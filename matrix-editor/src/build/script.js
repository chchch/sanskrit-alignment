"use strict";var De={};De.defaults={skip_sgml:!1,syncope:!1};var Ft=De.schemes={balinese:{vowels:"смЕ смЖ смЗ смИ смЙ смК смЛ смМ смН смО  смП смР  смС смТ".split(" "),vowel_marks:"см╡ см╢ см╖ см╕ см╣ см║ см╗ см╝ см╜ снВ см╛ см┐ снГ снА снБ".split(" "),other_marks:["смВ","смД","смБ",""],virama:["снД"],consonants:"смУ смФ смХ смЦ смЧ смШ смЩ смЪ смЫ смЬ смЭ смЮ смЯ сма смб смв смг смд сме смж смз сми смй смк смл смм смн смо смп см░ см▒ см▓ см│".split(" "),symbols:"снР снС снТ снУ снФ снХ снЦ снЧ снШ снЩ   снЮ снЯ".split(" "),zwj:["тАН"],skip:[""]},bengali:{vowels:"ржЕ ржЖ ржЗ ржИ ржЙ ржК ржЛ рза ржМ рзб  ржП ржР  ржУ ржФ".split(" "),vowel_marks:"рж╛ рж┐ рзА рзБ рзВ рзГ рзД рзв рзг  рзЗ рзИ  рзЛ рзМ".split(" "),other_marks:"ржВ ржГ ржБ".split(" "),virama:["рзН"],consonants:"ржХ ржЦ ржЧ ржШ ржЩ ржЪ ржЫ ржЬ ржЭ ржЮ ржЯ ржа ржб ржв ржг ржд рже ржж ржз ржи ржк ржл ржм ржн ржо ржп рж░ рж▓ ржм рж╢ рж╖ рж╕ рж╣ рд│ ржХрзНрж╖ ржЬрзНржЮ".split(" "),symbols:"рзж рзз рзи рзй рзк рзл рзм рзн рзо рзп реР рж╜ ред рее".split(" "),other:"    ржб ржв  ржп ".split(" ")},newa:{vowels:["ЁСРА","ЁСРБ","ЁСРВ","ЁСРГ","ЁСРД","ЁСРЕ","ЁСРЖ","ЁСРЗ","ЁСРИ","ЁСРЙ","","ЁСРК","ЁСРЛ","","ЁСРМ","ЁСРН"],vowel_marks:["ЁСР╡","ЁСР╢","ЁСР╖","ЁСР╕","ЁСР╣","ЁСР║","ЁСР╗","ЁСР╝","ЁСР╜","","ЁСР╛","ЁСР┐","","ЁССА","ЁССБ"],other_marks:["ЁССД","ЁССЕ","ЁССГ","ЁССа","ЁССб",""],virama:["ЁССВ"],consonants:["ЁСРО","ЁСРП","ЁСРР","ЁСРС","ЁСРТ","ЁСРФ","ЁСРХ","ЁСРЦ","ЁСРЧ","ЁСРШ","ЁСРЪ","ЁСРЫ","ЁСРЬ","ЁСРЭ","ЁСРЮ","ЁСРЯ","ЁСРа","ЁСРб","ЁСРв","ЁСРг","ЁСРе","ЁСРж","ЁСРз","ЁСРи","ЁСРй","ЁСРл","ЁСРм","ЁСРо","ЁСР░","ЁСР▒","ЁСР▓","ЁСР│","ЁСР┤"],symbols:["ЁССР","ЁССС","ЁССТ","ЁССУ","ЁССФ","ЁССХ","ЁССЦ","ЁССЧ","ЁССШ","ЁССЩ","ЁССЙ","ЁССЗ","ЁССЛ","ЁССМ"]},sarada:{vowels:["ЁСЖГ","ЁСЖД","ЁСЖЕ","ЁСЖЖ","ЁСЖЗ","ЁСЖИ","ЁСЖЙ","ЁСЖК","ЁСЖЛ","ЁСЖМ","","ЁСЖН","ЁСЖО","","ЁСЖП","ЁСЖР"],vowel_marks:["ЁСЖ│","ЁСЖ┤","ЁСЖ╡","ЁСЖ╢","ЁСЖ╖","ЁСЖ╕","ЁСЖ╣","ЁСЖ║","ЁСЖ╗","","ЁСЖ╝","ЁСЖ╜","","ЁСЖ╛","ЁСЖ┐"],other_marks:["ЁСЖБ","ЁСЖВ","ЁСЖА","ЁСЗВ","ЁСЗГ"],virama:["ЁСЗА"],consonants:["ЁСЖС","ЁСЖТ","ЁСЖУ","ЁСЖФ","ЁСЖХ","ЁСЖЦ","ЁСЖЧ","ЁСЖШ","ЁСЖЩ","ЁСЖЪ","ЁСЖЫ","ЁСЖЬ","ЁСЖЭ","ЁСЖЮ","ЁСЖЯ","ЁСЖа","ЁСЖб","ЁСЖв","ЁСЖг","ЁСЖд","ЁСЖе","ЁСЖж","ЁСЖз","ЁСЖи","ЁСЖй","ЁСЖк","ЁСЖл","ЁСЖм","ЁСЖо","ЁСЖп","ЁСЖ░","ЁСЖ▒","ЁСЖ▓","ЁСЖн"],symbols:["ЁСЗР","ЁСЗС","ЁСЗТ","ЁСЗУ","ЁСЗФ","ЁСЗХ","ЁСЗЦ","ЁСЗЧ","ЁСЗШ","ЁСЗЩ","ЁСЗД","ЁСЗБ","ЁСЗЕ","ЁСЗЖ"]},devanagari:{vowels:"рдЕ рдЖ рдЗ рдИ рдЙ рдК рдЛ реа рдМ реб рдО рдП рдР рдТ рдУ рдФ рдП рдР рдУ".split(" "),vowel_marks:"рд╛ рд┐ реА реБ реВ реГ реД рев рег реЖ реЗ реИ реК реЛ реМ реО реОреЗ реОрд╛ реОреЛ реЖ реП".split(" "),other_marks:"рдВ рдГ рдБ с│╡ с│╢ ъг╜".split(" "),virama:["реН"],consonants:"рдХ рдЦ рдЧ рдШ рдЩ рдЪ рдЫ рдЬ рдЭ рдЮ рдЯ рда рдб рдв рдг рдд рде рдж рдз рди рдк рдл рдм рдн рдо рдп рд░ рд▓ рд╡ рд╢ рд╖ рд╕ рд╣ рд│".split(" "),symbols:"реж рез реи рей рек рел рем рен рео реп реР рд╜ ред рее".split(" "),zwj:["тАН"],skip:[""],accent:["реС","реТ"],combo_accent:"рдГреС рдГреТ рдВреС рдВреТ".split(" "),candra:["реЕ"],other:"рдХрд╝ рдЦрд╝ рдЧрд╝ рдЬрд╝ рдбрд╝ рдврд╝ рдлрд╝ рдпрд╝ рд▒".split(" ")},gujarati:{vowels:"ркЕ ркЖ ркЗ ркИ ркЙ ркК ркЛ рла ркМ рлб  ркП ркР  ркУ ркФ".split(" "),vowel_marks:"рк╛ рк┐ рлА рлБ рлВ рлГ рлД рлв рлг  рлЗ рлИ  рлЛ рлМ".split(" "),other_marks:"ркВ ркГ ркБ".split(" "),virama:["рлН"],consonants:"ркХ ркЦ ркЧ ркШ ркЩ ркЪ ркЫ ркЬ ркЭ ркЮ ркЯ рка ркб ркв ркг ркд рке ркж ркз рки ркк ркл ркм ркн рко ркп рк░ рк▓ рк╡ рк╢ рк╖ рк╕ рк╣ рк│".split(" "),symbols:"рлж рлз рли рлй рлк рлл рлм рлн рло рлп рлР рк╜ рлд рле".split(" "),candra:["рлЕ"]},gurmukhi:{vowels:"риЕ риЖ риЗ риИ риЙ риК      риП риР  риУ риФ".split(" "),vowel_marks:"ри╛ ри┐ рйА рйБ рйВ      рйЗ рйИ  рйЛ рйМ".split(" "),other_marks:"риВ риГ риБ".split(" "),virama:["рйН"],consonants:"риХ риЦ риЧ риШ риЩ риЪ риЫ риЬ риЭ риЮ риЯ риа риб рив риг рид рие риж риз рии рик рил рим рин рио рип ри░ ри▓ ри╡ ри╢ ри╢ ри╕ ри╣ ри│".split(" "),symbols:"рйж рйз рйи рйй рйк рйл рйм рйн рйо рйп реР рд╜ ред рее".split(" "),other:" риЦ риЧ риЬ риб  рил  ".split(" ")},kannada:{vowels:"р▓Е р▓Ж р▓З р▓И р▓Й р▓К р▓Л р│а р▓М р│б р▓О р▓П р▓Р р▓Т р▓У р▓Ф".split(" "),vowel_marks:"р▓╛ р▓┐ р│А р│Б р│В р│Г р│Д р│в р│г р│Ж р│З р│И р│К р│Л р│М".split(" "),other_marks:"р▓В р▓Г рдБ".split(" "),virama:["р│Н"],consonants:"р▓Х р▓Ц р▓Ч р▓Ш р▓Щ р▓Ъ р▓Ы р▓Ь р▓Э р▓Ю р▓Я р▓а р▓б р▓в р▓г р▓д р▓е р▓ж р▓з р▓и р▓к р▓л р▓м р▓н р▓о р▓п р▓░ р▓▓ р▓╡ р▓╢ р▓╖ р▓╕ р▓╣ р▓│".split(" "),symbols:"р│ж р│з р│и р│й р│к р│л р│м р│н р│о р│п р▓Ур▓В р▓╜ ред рее".split(" "),other:"      р▓л  р▓▒".split(" ")},malayalam:{vowels:"р┤Е р┤Ж р┤З р┤И р┤Й р┤К р┤Л р╡а р┤М р╡б р┤О р┤П р┤Р р┤Т р┤У р┤Ф".split(" "),vowel_marks:"р┤╛ р┤┐ р╡А р╡Б р╡В р╡Г р╡Д р╡в р╡г р╡Ж р╡З р╡И р╡К р╡Л р╡М".split(" "),other_marks:"р┤В р┤Г рдБ".split(" "),virama:["р╡Н"],consonants:"р┤Х р┤Ц р┤Ч р┤Ш р┤Щ р┤Ъ р┤Ы р┤Ь р┤Э р┤Ю р┤Я р┤а р┤б р┤в р┤г р┤д р┤е р┤ж р┤з р┤и р┤к р┤л р┤м р┤н р┤о р┤п р┤░ р┤▓ р┤╡ р┤╢ р┤╖ р┤╕ р┤╣ р┤│".split(" "),symbols:"р╡ж р╡з р╡и р╡й р╡к р╡л р╡м р╡н р╡о р╡п р┤Ур┤В р┤╜ ред рее".split(" "),other:"        р┤▒".split(" ")},oriya:{vowels:"рмЕ рмЖ рмЗ рмИ рмЙ рмК рмЛ рна рмМ рнб  рмП рмР  рмУ рмФ".split(" "),vowel_marks:"рм╛ рм┐ рнА рнБ рнВ рнГ рнД рнв рнг  рнЗ рнИ  рнЛ рнМ".split(" "),other_marks:"рмВ рмГ рмБ".split(" "),virama:["рнН"],consonants:"рмХ рмЦ рмЧ рмШ рмЩ рмЪ рмЫ рмЬ рмЭ рмЮ рмЯ рма рмб рмв рмг рмд рме рмж рмз рми рмк рмл рмм рмн рмо рмп рм░ рм▓ рм╡ рм╢ рм╖ рм╕ рм╣ рм│".split(" "),symbols:"рнж рнз рни рнй рнк рнл рнм рнн рно рнп рмУрмВ рм╜ ред рее".split(" "),other:"    рмб рмв  рмп ".split(" ")},tamil:{vowels:"роЕ роЖ роЗ роИ роЙ роК     роО роП роР роТ роУ роФ".split(" "),vowel_marks:"ро╛ ро┐ рпА рпБ рпВ     рпЖ рпЗ рпИ рпК рпЛ рпМ".split(" "),other_marks:"роВ роГ ".split(" "),virama:["рпН"],consonants:"роХ роХ роХ роХ роЩ роЪ роЪ роЬ роЪ роЮ роЯ роЯ роЯ роЯ рог род род род род рои рок рок рок рок роо роп ро░ ро▓ ро╡ ро╢ ро╖ ро╕ ро╣ ро│".split(" "),symbols:"рпж рпз рпи рпй рпк рпл рпм рпн рпо рпп рпР рд╜ ред рее".split(" "),other:"        ро▒".split(" ")},telugu:{vowels:"р░Е р░Ж р░З р░И р░Й р░К р░Л р▒а р░М р▒б р░О р░П р░Р р░Т р░У р░Ф".split(" "),vowel_marks:"р░╛ р░┐ р▒А р▒Б р▒В р▒Г р▒Д р▒в р▒г р▒Ж р▒З р▒И р▒К р▒Л р▒М".split(" "),other_marks:"р░В р░Г р░Б с│▓ с│▓".split(" "),virama:["р▒Н"],consonants:"р░Х р░Ц р░Ч р░Ш р░Щ р░Ъ р░Ы р░Ь р░Э р░Ю р░Я р░а р░б р░в р░г р░д р░е р░ж р░з р░и р░к р░л р░м р░н р░о р░п р░░ р░▓ р░╡ р░╢ р░╖ р░╕ р░╣ р░│".split(" "),symbols:"р▒ж р▒з р▒и р▒й р▒к р▒л р▒м р▒н р▒о р▒п р░Ур░В р░╜ ред рее".split(" "),other:"        р░▒".split(" ")},iast:{vowels:"a ─Б i ─л u ┼л с╣Ы с╣Э с╕╖ с╕╣ с║╜ e ai ├╡ o au ├к a├о ├┤ a├╗".split(" "),other_marks:["с╣Г","с╕е","m╠Р","с║Ц","с╕л","oс╕┐"],virama:[""],consonants:"k kh g gh с╣Е c ch j jh ├▒ с╣н с╣нh с╕Н с╕Нh с╣З t th d dh n p ph b bh m y r l v ┼Ы с╣г s h с╕╗".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oс╣Б ' | ||".split(" ")},iso:{vowels:"a ─Б i ─л u ┼л r╠е r╠е╠Д l╠е l╠е╠Д с║╜ e ai ├╡ o au ├к a├о ├┤ a├╗".split(" "),other_marks:["с╣Б","с╕е","m╠Р","oс╕┐"],virama:[""],consonants:"k kh g gh с╣Е c ch j jh ├▒ с╣н с╣нh с╕Н с╕Нh с╣З t th d dh n p ph b bh m y r l v ┼Ы с╣г s h с╕╖ kс╣г j├▒".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 om╠Р ' | ||".split(" ")},itrans:{vowels:"a A i I u U RRi RRI LLi LLI  e ai  o au".split(" "),other_marks:["M","H",".N"],virama:[""],consonants:"k kh g gh ~N ch Ch j jh ~n T Th D Dh N t th d dh n p ph b bh m y r l v sh Sh s h L kSh j~n".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM .a | ||".split(" "),candra:[".c"],zwj:["{}"],skip:"_",accent:["\\'","\\_"],combo_accent:"\\'H \\_H \\'M \\_M".split(" "),other:"q K G z .D .Dh f Y R".split(" ")},hk:{vowels:"a A i I u U R RR lR lRR  e ai  o au".split(" "),other_marks:"M H ~".split(" "),virama:[""],consonants:"k kh g gh G c ch j jh J T Th D Dh N t th d dh n p ph b bh m y r l v z S s h L kS jJ".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM ' | ||".split(" ")},slp1:{vowels:"a A i I u U f F x X с║╜ e E ├╡ o O ├к ├К ├┤ ├Ф".split(" "),other_marks:"M H m╠Р с║Ц с╕л oс╕┐".split(" "),virama:[""],consonants:"k K g G N c C j J Y w W q Q R t T d D n p P b B m y r l v S z s h L".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oс╣Б ' | ||".split(" ")},velthuis:{vowels:"a aa i ii u uu .r .rr .li .ll  e ai  o au".split(" "),other_marks:".m .h ".split(" "),virama:[""],consonants:'k kh g gh "n c ch j jh ~n .t .th .d .d .n t th d dh n p ph b bh m y r l v ~s .s s h L k.s j~n'.split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 o.m ' | ||".split(" ")},wx:{vowels:"a A i I u U q Q L   e E  o O".split(" "),other_marks:"M H z".split(" "),virama:[""],consonants:"k K g G f c C j J F t T d D N w W x X n p P b B m y r l v S R s h  kR jF".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oM ' | ||".split(" ")}},x1={},Jt={iast:{с╣Ы:["r╠е"],с╣Г:["с╣Б"]},itrans:{A:["aa"],I:["ii","ee"],U:["uu","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],"j~n":["GY","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":"\\_.m \\_.n \\`M \\`.m \\`.n".split(" "),".a":["~"],"|":["."],"||":[".."],z:["J"]}},Rt={};De.isRomanScheme=function(x){return x1.hasOwnProperty(x)};De.addBrahmicScheme=function(x,p){De.schemes[x]=p};De.addRomanScheme=function(x,p){"vowel_marks"in p||(p.vowel_marks=p.vowels.slice(1)),De.schemes[x]=p,x1[x]=!0};var b1=function(x){var p={};for(var M in x)!x.hasOwnProperty(M)||(p[M]=x[M].slice(0));return p};(function(){var x=Ft.kolkata=b1(Ft.iast),p="iast itrans hk kolkata slp1 velthuis wx".split(" ");x.vowels="a ─Б i ─л u ┼л с╣Ы с╣Э с╕╖ с╕╣ e ─У ai o ┼Н au".split(" ");for(var M=0,b;b=p[M];M++)De.addRomanScheme(b,Ft[b]);var P=b1(Ft.itrans);P.vowels="a A i I u U Ri RRI LLi LLi e E ai o O au".split(" "),P.vowel_marks=P.vowels.slice(1),Jt.itrans_dravidian=Jt.itrans,De.addRomanScheme("itrans_dravidian",P)})();var U1=function(x,p){var M=Jt[x]||{},b={},P=De.schemes[x],f={},N=[],u={},d=De.schemes[p];for(var w in P)if(!!P.hasOwnProperty(w)){var B=P[w],H=d[w];if(H!==void 0)for(var q=0;q<B.length;q++){var D=B[q],E=H[q],O=M[D]||[],j=O.length,te=0;for(N.push(D.length),te=0;te<j;te++)N.push(O[te].length);if(w==="vowel_marks"||w==="virama")for(u[D]=E,te=0;te<j;te++)u[O[te]]=E;else{for(f[D]=E,te=0;te<j;te++)f[O[te]]=E;if(w==="consonants"||w==="other")for(b[D]=E,te=0;te<j;te++)b[O[te]]=E}}}return{consonants:b,fromRoman:De.isRomanScheme(x),letters:f,marks:u,maxTokenLength:Math.max.apply(Math,N),toRoman:De.isRomanScheme(p),virama:d.virama}},j1=function(x,p,M){for(var b=[],P=p.consonants,f=x.length,N=!1,u=p.letters,d=p.marks,w=p.maxTokenLength,B=M.skip_sgml,H=M.syncope,q,D,E="",O=p.toRoman,j=p.virama,te=!1,U=!1,V=!1,oe=0,he;(he=x.charAt(oe))||E;oe++){var ge=w-E.length;if(!(ge>0&&oe<f&&(E+=he,ge>1)))for(var G=0;G<w;G++){var pe=E.substr(0,w-G);if(te===!0)te=pe!==">";else if(pe==="<")te=B;else if(pe==="##"){V=!V,E=E.substr(2);break}if(U=te||V,(q=u[pe])!==void 0&&!U){O?b.push(q):(N?(D=d[pe])?b.push(D):pe!=="a"&&(b.push(j),b.push(q)):b.push(q),N=pe in P),E=E.substr(w-G);break}else G===w-1&&(N&&(N=!1,H||b.push(j)),b.push(pe),E=E.substr(1))}}return N&&!H&&b.push(j),b.join("")},G1=function(x,p){for(var M=[],b=p.consonants,P=!1,f=!1,N=p.letters,u=p.marks,d,w=p.toRoman,B=!1,H=0,q;q=x.charAt(H);H++){if(q==="#"){P?(B=!B,P=!1):P=!0,f&&(M.push("a"),f=!1);continue}else if(B){M.push(q);continue}(d=u[q])!==void 0?(M.push(d),f=!1):(P&&(M.push("#"),P=!1),f&&(M.push("a"),f=!1),(d=N[q])?(M.push(d),f=w&&q in b):M.push(q))}return f&&M.push("a"),M.join("")};De.t=function(x,p,M,b){b=b||{};var P=Rt.options||{},f=De.defaults,N=Rt.from===p&&Rt.to===M,u;for(var d in f)if(f.hasOwnProperty(d)){var w=f[d];d in b&&(w=b[d]),b[d]=w,w!==P[d]&&(N=!1)}return N?u=Rt.map:(u=U1(p,M,b),Rt={from:p,map:u,options:b,to:M}),p==="itrans"&&(x=x.replace(/\{\\m\+\}/g,".h.N"),x=x.replace(/\.h/g,""),x=x.replace(/\\([^'`_]|$)/g,"##$1##")),u.fromRoman?j1(x,u,b):G1(x,u,b)};var Qt={};(function(x){"use strict";x.__type__="csv";var p=typeof jQuery!="undefined"&&jQuery.Deferred||typeof _!="undefined"&&_.Deferred||function(){var u,d,w=new Promise(function(B,H){u=B,d=H});return{resolve:u,reject:d,promise:function(){return w}}};x.fetch=function(u){var d=new p;if(u.file){var w=new FileReader,B=u.encoding||"UTF-8";w.onload=function(D){var E=x.extractFields(x.parse(D.target.result,u),u);E.useMemoryStore=!0,E.metadata={filename:u.file.name},d.resolve(E)},w.onerror=function(D){d.reject({error:{message:"Failed to load file. Code: "+D.target.error.code}})},w.readAsText(u.file,B)}else if(u.data){var H=x.extractFields(x.parse(u.data,u),u);H.useMemoryStore=!0,d.resolve(H)}else if(u.url){var q=window.fetch||function(D){var E=jQuery.get(D),O={then:function(j){return E.done(j),O},catch:function(j){return E.fail(j),O}};return O};q(u.url).then(function(D){return D.text?D.text():D}).then(function(D){var E=x.extractFields(x.parse(D,u),u);E.useMemoryStore=!0,d.resolve(E)}).catch(function(D,E){d.reject({error:{message:"Failed to load file. "+D.statusText+". Code: "+D.status,request:D}})})}return d.promise()},x.extractFields=function(u,d){return d.noHeaderRow!==!0&&u.length>0?{fields:u[0],records:u.slice(1)}:{records:u}},x.normalizeDialectOptions=function(u){var d={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var w in u)w==="trim"?d.skipinitialspace=u.trim:d[w.toLowerCase()]=u[w];return d},x.parse=function(u,d){(!d||d&&!d.lineterminator)&&(u=x.normalizeLineTerminator(u,d));var w=x.normalizeDialectOptions(d);u=N(u,w.lineterminator);var B="",H=!1,q=!1,D="",E=[],O=[],j,te;for(te=function(U){return q!==!0&&(U===""?U=null:w.skipinitialspace===!0&&(U=f(U)),M.test(U)?U=parseInt(U,10):b.test(U)&&(U=parseFloat(U,10))),U},j=0;j<u.length;j+=1)B=u.charAt(j),H===!1&&(B===w.delimiter||B===w.lineterminator)?(D=te(D),E.push(D),B===w.lineterminator&&(O.push(E),E=[]),D="",q=!1):B!==w.quotechar?D+=B:H?u.charAt(j+1)===w.quotechar?(D+=w.quotechar,j+=1):H=!1:(H=!0,q=!0);return D=te(D),E.push(D),O.push(E),w.skipinitialrows&&(O=O.slice(w.skipinitialrows)),O},x.normalizeLineTerminator=function(u,d){return d=d||{},d.lineterminator?u:u.replace(/(\r\n|\n|\r)/gm,`
`)},x.objectToArray=function(u){for(var d=[],w=[],B=[],H=0;H<u.fields.length;H++){var q=u.fields[H].id;B.push(q);var D=u.fields[H].label?u.fields[H].label:q;w.push(D)}d.push(w);for(var H=0;H<u.records.length;H++){for(var E=[],O=u.records[H],j=0;j<B.length;j++)E.push(O[B[j]]);d.push(E)}return d},x.serialize=function(u,d){var w=null;u instanceof Array?w=u:w=x.objectToArray(u);var B=x.normalizeDialectOptions(d),H="",q="",D="",E="",O,j,te;for(te=function(U){return U===null?U="":typeof U=="string"&&P.test(U)?(B.doublequote&&(U=U.replace(/"/g,'""')),U=B.quotechar+U+B.quotechar):typeof U=="number"&&(U=U.toString(10)),U},O=0;O<w.length;O+=1)for(H=w[O],j=0;j<H.length;j+=1)q=te(H[j]),j===H.length-1?(D+=q,E+=D+B.lineterminator,D=""):D+=q+B.delimiter,q="";return E};var M=/^\d+$/,b=/^\d*\.\d+$|^\d+\.\d*$/,P=/^\s|\s$|,|"|\n/,f=function(){return String.prototype.trim?function(u){return u.trim()}:function(u){return u.replace(/^\s*/,"").replace(/\s*$/,"")}}();function N(u,d){return u.charAt(u.length-d.length)!==d?u:u.substring(0,u.length-d.length)}})(Qt);function W1(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function Y1(x,p,M){return M={path:p,exports:{},require:function(b,P){return X1(b,P==null?M.path:P)}},x(M,M.exports),M.exports}function X1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var J1=Y1(function(x,p){(function(M,b){x.exports=b()})(window,function(){return function(M){var b={};function P(f){if(b[f])return b[f].exports;var N=b[f]={i:f,l:!1,exports:{}};return M[f].call(N.exports,N,N.exports,P),N.l=!0,N.exports}return P.m=M,P.c=b,P.d=function(f,N,u){P.o(f,N)||Object.defineProperty(f,N,{enumerable:!0,get:u})},P.r=function(f){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},P.t=function(f,N){if(1&N&&(f=P(f)),8&N||4&N&&typeof f=="object"&&f&&f.__esModule)return f;var u=Object.create(null);if(P.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:f}),2&N&&typeof f!="string")for(var d in f)P.d(u,d,function(w){return f[w]}.bind(null,d));return u},P.n=function(f){var N=f&&f.__esModule?function(){return f.default}:function(){return f};return P.d(N,"a",N),N},P.o=function(f,N){return Object.prototype.hasOwnProperty.call(f,N)},P.p="",P(P.s=1)}([function(M,b,P){var f,N;f=[P(2)],(N=function(u){function d(e){if(d.is(e,"function"))return w?e():u.on("raphael.DOMload",e);if(d.is(e,i))return d._engine.create[U](d,e.splice(0,3+d.is(e[0],X))).add(e);var s=Array.prototype.slice.call(arguments,0);if(d.is(s[s.length-1],"function")){var o=s.pop();return w?o.call(d._engine.create[U](d,s)):u.on("raphael.DOMload",function(){o.call(d._engine.create[U](d,s))})}return d._engine.create[U](d,arguments)}d.version="2.3.0",d.eve=u;var w,B,H=/[, ]+/,q={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},D=/\{(\d+)\}/g,E="hasOwnProperty",O={doc:document,win:window},j={was:Object.prototype[E].call(O.win,"Raphael"),is:O.win.Raphael},te=function(){this.ca=this.customAttributes={}},U="apply",V="concat",oe="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,he="",ge=" ",G=String,pe="split",de="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[pe](ge),z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},ye=G.prototype.toLowerCase,ve=Math,Se=ve.max,W=ve.min,Ce=ve.abs,Ae=ve.pow,ee=ve.PI,X="number",i="array",l=Object.prototype.toString,n=(d._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),t={NaN:1,Infinity:1,"-Infinity":1},r=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,a=ve.round,h=parseFloat,g=parseInt,v=G.prototype.toUpperCase,L=d._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},k=d._availableAnimAttrs={blur:X,"clip-rect":"csv",cx:X,cy:X,fill:"colour","fill-opacity":X,"font-size":X,height:X,opacity:X,path:"path",r:X,rx:X,ry:X,stroke:"colour","stroke-opacity":X,"stroke-width":X,transform:"transform",width:X,x:X,y:X},I=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,$={hs:1,rg:1},K=/,?([achlmqrstvxz]),?/gi,se=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ae=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,fe=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,be=(d._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),_e=function(e,s){return h(e)-h(s)},xe=function(e){return e},we=d._rectPath=function(e,s,o,c,m){return m?[["M",e+m,s],["l",o-2*m,0],["a",m,m,0,0,1,m,m],["l",0,c-2*m],["a",m,m,0,0,1,-m,m],["l",2*m-o,0],["a",m,m,0,0,1,-m,-m],["l",0,2*m-c],["a",m,m,0,0,1,m,-m],["z"]]:[["M",e,s],["l",o,0],["l",0,c],["l",-o,0],["z"]]},Ne=function(e,s,o,c){return c==null&&(c=o),[["M",e,s],["m",0,-c],["a",o,c,0,1,1,0,2*c],["a",o,c,0,1,1,0,-2*c],["z"]]},Be=d._getPath={path:function(e){return e.attr("path")},circle:function(e){var s=e.attrs;return Ne(s.cx,s.cy,s.r)},ellipse:function(e){var s=e.attrs;return Ne(s.cx,s.cy,s.rx,s.ry)},rect:function(e){var s=e.attrs;return we(s.x,s.y,s.width,s.height,s.r)},image:function(e){var s=e.attrs;return we(s.x,s.y,s.width,s.height)},text:function(e){var s=e._getBBox();return we(s.x,s.y,s.width,s.height)},set:function(e){var s=e._getBBox();return we(s.x,s.y,s.width,s.height)}},Te=d.mapPath=function(e,s){if(!s)return e;var o,c,m,C,A,S,R;for(m=0,A=(e=St(e)).length;m<A;m++)for(C=1,S=(R=e[m]).length;C<S;C+=2)o=s.x(R[C],R[C+1]),c=s.y(R[C],R[C+1]),R[C]=o,R[C+1]=c;return e};if(d._g=O,d.type=O.win.SVGAngle||O.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",d.type=="VML"){var Le,qe=O.doc.createElement("div");if(qe.innerHTML='<v:shape adj="1"/>',(Le=qe.firstChild).style.behavior="url(#default#VML)",!Le||typeof Le.adj!="object")return d.type=he;qe=null}function ze(e){if(typeof e=="function"||Object(e)!==e)return e;var s=new e.constructor;for(var o in e)e[E](o)&&(s[o]=ze(e[o]));return s}d.svg=!(d.vml=d.type=="VML"),d._Paper=te,d.fn=B=te.prototype=d.prototype,d._id=0,d.is=function(e,s){return(s=ye.call(s))=="finite"?!t[E](+e):s=="array"?e instanceof Array:s=="null"&&e===null||s==typeof e&&e!==null||s=="object"&&e===Object(e)||s=="array"&&Array.isArray&&Array.isArray(e)||l.call(e).slice(8,-1).toLowerCase()==s},d.angle=function(e,s,o,c,m,C){if(m==null){var A=e-o,S=s-c;return A||S?(180+180*ve.atan2(-S,-A)/ee+360)%360:0}return d.angle(e,s,m,C)-d.angle(o,c,m,C)},d.rad=function(e){return e%360*ee/180},d.deg=function(e){return Math.round(180*e/ee%360*1e3)/1e3},d.snapTo=function(e,s,o){if(o=d.is(o,"finite")?o:10,d.is(e,i)){for(var c=e.length;c--;)if(Ce(e[c]-s)<=o)return e[c]}else{var m=s%(e=+e);if(m<o)return s-m;if(m>e-o)return s-m+e}return s};var He,Xe;d.createUUID=(He=/[xy]/g,Xe=function(e){var s=16*ve.random()|0;return(e=="x"?s:3&s|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(He,Xe).toUpperCase()}),d.setWindow=function(e){u("raphael.setWindow",d,O.win,e),O.win=e,O.doc=O.win.document,d._engine.initWin&&d._engine.initWin(O.win)};var Qe=function(e){if(d.vml){var s,o=/^\s+|\s+$/g;try{var c=new ActiveXObject("htmlfile");c.write("<body>"),c.close(),s=c.body}catch(A){s=createPopup().document.body}var m=s.createTextRange();Qe=Fe(function(A){try{s.style.color=G(A).replace(o,he);var S=m.queryCommandValue("ForeColor");return"#"+("000000"+(S=(255&S)<<16|65280&S|(16711680&S)>>>16).toString(16)).slice(-6)}catch(R){return"none"}})}else{var C=O.doc.createElement("i");C.title="Rapha├лl Colour Picker",C.style.display="none",O.doc.body.appendChild(C),Qe=Fe(function(A){return C.style.color=A,O.doc.defaultView.getComputedStyle(C,he).getPropertyValue("color")})}return Qe(e)},at=function(){return"hsb("+[this.h,this.s,this.b]+")"},lt=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ct=function(){return this.hex},ct=function(e,s,o){if(s==null&&d.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(o=e.b,s=e.g,e=e.r),s==null&&d.is(e,"string")){var c=d.getRGB(e);e=c.r,s=c.g,o=c.b}return(e>1||s>1||o>1)&&(e/=255,s/=255,o/=255),[e,s,o]},Nt=function(e,s,o,c){var m={r:e*=255,g:s*=255,b:o*=255,hex:d.rgb(e,s,o),toString:Ct};return d.is(c,"finite")&&(m.opacity=c),m};function Fe(e,s,o){return function c(){var m=Array.prototype.slice.call(arguments,0),C=m.join("тРА"),A=c.cache=c.cache||{},S=c.count=c.count||[];return A[E](C)?(function(R,F){for(var J=0,ie=R.length;J<ie;J++)if(R[J]===F)return R.push(R.splice(J,1)[0])}(S,C),o?o(A[C]):A[C]):(S.length>=1e3&&delete A[S.shift()],S.push(C),A[C]=e[U](s,m),o?o(A[C]):A[C])}}d.color=function(e){var s;return d.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(s=d.hsb2rgb(e),e.r=s.r,e.g=s.g,e.b=s.b,e.hex=s.hex):d.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(s=d.hsl2rgb(e),e.r=s.r,e.g=s.g,e.b=s.b,e.hex=s.hex):(d.is(e,"string")&&(e=d.getRGB(e)),d.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(s=d.rgb2hsl(e),e.h=s.h,e.s=s.s,e.l=s.l,s=d.rgb2hsb(e),e.v=s.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=Ct,e},d.hsb2rgb=function(e,s,o,c){var m,C,A,S,R;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(o=e.b,s=e.s,c=e.o,e=e.h),S=(R=o*s)*(1-Ce((e=(e*=360)%360/60)%2-1)),m=C=A=o-R,Nt(m+=[R,S,0,0,S,R][e=~~e],C+=[S,R,R,S,0,0][e],A+=[0,0,S,R,R,S][e],c)},d.hsl2rgb=function(e,s,o,c){var m,C,A,S,R;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(o=e.l,s=e.s,e=e.h),(e>1||s>1||o>1)&&(e/=360,s/=100,o/=100),S=(R=2*s*(o<.5?o:1-o))*(1-Ce((e=(e*=360)%360/60)%2-1)),m=C=A=o-R/2,Nt(m+=[R,S,0,0,S,R][e=~~e],C+=[S,R,R,S,0,0][e],A+=[0,0,S,R,R,S][e],c)},d.rgb2hsb=function(e,s,o){var c,m;return e=(o=ct(e,s,o))[0],s=o[1],o=o[2],{h:(((m=(c=Se(e,s,o))-W(e,s,o))==0?null:c==e?(s-o)/m:c==s?(o-e)/m+2:(e-s)/m+4)+360)%6*60/360,s:m==0?0:m/c,b:c,toString:at}},d.rgb2hsl=function(e,s,o){var c,m,C,A;return e=(o=ct(e,s,o))[0],s=o[1],o=o[2],c=((m=Se(e,s,o))+(C=W(e,s,o)))/2,{h:(((A=m-C)==0?null:m==e?(s-o)/A:m==s?(o-e)/A+2:(e-s)/A+4)+360)%6*60/360,s:A==0?0:c<.5?A/(2*c):A/(2-2*c),l:c,toString:lt}},d._path2string=function(){return this.join(",").replace(K,"$1")},d._preload=function(e,s){var o=O.doc.createElement("img");o.style.cssText="position:absolute;left:-9999em;top:-9999em",o.onload=function(){s.call(this),this.onload=null,O.doc.body.removeChild(this)},o.onerror=function(){O.doc.body.removeChild(this)},O.doc.body.appendChild(o),o.src=e};function Ke(){return this.hex}function ut(e,s){for(var o=[],c=0,m=e.length;m-2*!s>c;c+=2){var C=[{x:+e[c-2],y:+e[c-1]},{x:+e[c],y:+e[c+1]},{x:+e[c+2],y:+e[c+3]},{x:+e[c+4],y:+e[c+5]}];s?c?m-4==c?C[3]={x:+e[0],y:+e[1]}:m-2==c&&(C[2]={x:+e[0],y:+e[1]},C[3]={x:+e[2],y:+e[3]}):C[0]={x:+e[m-2],y:+e[m-1]}:m-4==c?C[3]=C[2]:c||(C[0]={x:+e[c],y:+e[c+1]}),o.push(["C",(-C[0].x+6*C[1].x+C[2].x)/6,(-C[0].y+6*C[1].y+C[2].y)/6,(C[1].x+6*C[2].x-C[3].x)/6,(C[1].y+6*C[2].y-C[3].y)/6,C[2].x,C[2].y])}return o}d.getRGB=Fe(function(e){if(!e||(e=G(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ke};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Ke};!$[E](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=Qe(e));var s,o,c,m,C,A,S=e.match(n);return S?(S[2]&&(c=g(S[2].substring(5),16),o=g(S[2].substring(3,5),16),s=g(S[2].substring(1,3),16)),S[3]&&(c=g((C=S[3].charAt(3))+C,16),o=g((C=S[3].charAt(2))+C,16),s=g((C=S[3].charAt(1))+C,16)),S[4]&&(A=S[4][pe](I),s=h(A[0]),A[0].slice(-1)=="%"&&(s*=2.55),o=h(A[1]),A[1].slice(-1)=="%"&&(o*=2.55),c=h(A[2]),A[2].slice(-1)=="%"&&(c*=2.55),S[1].toLowerCase().slice(0,4)=="rgba"&&(m=h(A[3])),A[3]&&A[3].slice(-1)=="%"&&(m/=100)),S[5]?(A=S[5][pe](I),s=h(A[0]),A[0].slice(-1)=="%"&&(s*=2.55),o=h(A[1]),A[1].slice(-1)=="%"&&(o*=2.55),c=h(A[2]),A[2].slice(-1)=="%"&&(c*=2.55),(A[0].slice(-3)=="deg"||A[0].slice(-1)=="┬░")&&(s/=360),S[1].toLowerCase().slice(0,4)=="hsba"&&(m=h(A[3])),A[3]&&A[3].slice(-1)=="%"&&(m/=100),d.hsb2rgb(s,o,c,m)):S[6]?(A=S[6][pe](I),s=h(A[0]),A[0].slice(-1)=="%"&&(s*=2.55),o=h(A[1]),A[1].slice(-1)=="%"&&(o*=2.55),c=h(A[2]),A[2].slice(-1)=="%"&&(c*=2.55),(A[0].slice(-3)=="deg"||A[0].slice(-1)=="┬░")&&(s/=360),S[1].toLowerCase().slice(0,4)=="hsla"&&(m=h(A[3])),A[3]&&A[3].slice(-1)=="%"&&(m/=100),d.hsl2rgb(s,o,c,m)):((S={r:s,g:o,b:c,toString:Ke}).hex="#"+(16777216|c|o<<8|s<<16).toString(16).slice(1),d.is(m,"finite")&&(S.opacity=m),S)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ke}},d),d.hsb=Fe(function(e,s,o){return d.hsb2rgb(e,s,o).hex}),d.hsl=Fe(function(e,s,o){return d.hsl2rgb(e,s,o).hex}),d.rgb=Fe(function(e,s,o){function c(m){return m+.5|0}return"#"+(16777216|c(o)|c(s)<<8|c(e)<<16).toString(16).slice(1)}),d.getColor=function(e){var s=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},o=this.hsb2rgb(s.h,s.s,s.b);return s.h+=.075,s.h>1&&(s.h=0,s.s-=.2,s.s<=0&&(this.getColor.start={h:0,s:1,b:s.b})),o.hex},d.getColor.reset=function(){delete this.start},d.parsePathString=function(e){if(!e)return null;var s=je(e);if(s.arr)return Ve(s.arr);var o={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},c=[];return d.is(e,i)&&d.is(e[0],i)&&(c=Ve(e)),c.length||G(e).replace(se,function(m,C,A){var S=[],R=C.toLowerCase();if(A.replace(fe,function(F,J){J&&S.push(+J)}),R=="m"&&S.length>2&&(c.push([C][V](S.splice(0,2))),R="l",C=C=="m"?"l":"L"),R=="r")c.push([C][V](S));else for(;S.length>=o[R]&&(c.push([C][V](S.splice(0,o[R]))),o[R]););}),c.toString=d._path2string,s.arr=Ve(c),c},d.parseTransformString=Fe(function(e){if(!e)return null;var s=[];return d.is(e,i)&&d.is(e[0],i)&&(s=Ve(e)),s.length||G(e).replace(ae,function(o,c,m){var C=[];ye.call(c),m.replace(fe,function(A,S){S&&C.push(+S)}),s.push([c][V](C))}),s.toString=d._path2string,s},this,function(e){if(!e)return e;for(var s=[],o=0;o<e.length;o++){for(var c=[],m=0;m<e[o].length;m++)c.push(e[o][m]);s.push(c)}return s});var je=function(e){var s=je.ps=je.ps||{};return s[e]?s[e].sleep=100:s[e]={sleep:100},setTimeout(function(){for(var o in s)s[E](o)&&o!=e&&(s[o].sleep--,!s[o].sleep&&delete s[o])}),s[e]};function ht(e,s,o,c,m){return e*(e*(-3*s+9*o-9*c+3*m)+6*s-12*o+6*c)-3*s+3*o}function Ge(e,s,o,c,m,C,A,S,R){R==null&&(R=1);for(var F=(R=R>1?1:R<0?0:R)/2,J=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ie=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0,Y=0;Y<12;Y++){var ne=F*J[Y]+F,le=ht(ne,e,o,m,A),re=ht(ne,s,c,C,S),Q=le*le+re*re;Z+=ie[Y]*ve.sqrt(Q)}return F*Z}function _t(e,s,o,c,m,C,A,S){if(!(Se(e,o)<W(m,A)||W(e,o)>Se(m,A)||Se(s,c)<W(C,S)||W(s,c)>Se(C,S))){var R=(e-o)*(C-S)-(s-c)*(m-A);if(R){var F=((e*c-s*o)*(m-A)-(e-o)*(m*S-C*A))/R,J=((e*c-s*o)*(C-S)-(s-c)*(m*S-C*A))/R,ie=+F.toFixed(2),Z=+J.toFixed(2);if(!(ie<+W(e,o).toFixed(2)||ie>+Se(e,o).toFixed(2)||ie<+W(m,A).toFixed(2)||ie>+Se(m,A).toFixed(2)||Z<+W(s,c).toFixed(2)||Z>+Se(s,c).toFixed(2)||Z<+W(C,S).toFixed(2)||Z>+Se(C,S).toFixed(2)))return{x:F,y:J}}}}function dt(e,s,o){var c=d.bezierBBox(e),m=d.bezierBBox(s);if(!d.isBBoxIntersect(c,m))return o?0:[];for(var C=Ge.apply(0,e),A=Ge.apply(0,s),S=Se(~~(C/5),1),R=Se(~~(A/5),1),F=[],J=[],ie={},Z=o?0:[],Y=0;Y<S+1;Y++){var ne=d.findDotsAtSegment.apply(d,e.concat(Y/S));F.push({x:ne.x,y:ne.y,t:Y/S})}for(Y=0;Y<R+1;Y++)ne=d.findDotsAtSegment.apply(d,s.concat(Y/R)),J.push({x:ne.x,y:ne.y,t:Y/R});for(Y=0;Y<S;Y++)for(var le=0;le<R;le++){var re=F[Y],Q=F[Y+1],ke=J[le],ce=J[le+1],me=Ce(Q.x-re.x)<.001?"y":"x",ue=Ce(ce.x-ke.x)<.001?"y":"x",Ee=_t(re.x,re.y,Q.x,Q.y,ke.x,ke.y,ce.x,ce.y);if(Ee){if(ie[Ee.x.toFixed(4)]==Ee.y.toFixed(4))continue;ie[Ee.x.toFixed(4)]=Ee.y.toFixed(4);var Pe=re.t+Ce((Ee[me]-re[me])/(Q[me]-re[me]))*(Q.t-re.t),Re=ke.t+Ce((Ee[ue]-ke[ue])/(ce[ue]-ke[ue]))*(ce.t-ke.t);Pe>=0&&Pe<=1.001&&Re>=0&&Re<=1.001&&(o?Z++:Z.push({x:Ee.x,y:Ee.y,t1:W(Pe,1),t2:W(Re,1)}))}}return Z}function kt(e,s,o){e=d._path2curve(e),s=d._path2curve(s);for(var c,m,C,A,S,R,F,J,ie,Z,Y=o?0:[],ne=0,le=e.length;ne<le;ne++){var re=e[ne];if(re[0]=="M")c=S=re[1],m=R=re[2];else{re[0]=="C"?(ie=[c,m].concat(re.slice(1)),c=ie[6],m=ie[7]):(ie=[c,m,c,m,S,R,S,R],c=S,m=R);for(var Q=0,ke=s.length;Q<ke;Q++){var ce=s[Q];if(ce[0]=="M")C=F=ce[1],A=J=ce[2];else{ce[0]=="C"?(Z=[C,A].concat(ce.slice(1)),C=Z[6],A=Z[7]):(Z=[C,A,C,A,F,J,F,J],C=F,A=J);var me=dt(ie,Z,o);if(o)Y+=me;else{for(var ue=0,Ee=me.length;ue<Ee;ue++)me[ue].segment1=ne,me[ue].segment2=Q,me[ue].bez1=ie,me[ue].bez2=Z;Y=Y.concat(me)}}}}}return Y}d.findDotsAtSegment=function(e,s,o,c,m,C,A,S,R){var F=1-R,J=Ae(F,3),ie=Ae(F,2),Z=R*R,Y=Z*R,ne=J*e+3*ie*R*o+3*F*R*R*m+Y*A,le=J*s+3*ie*R*c+3*F*R*R*C+Y*S,re=e+2*R*(o-e)+Z*(m-2*o+e),Q=s+2*R*(c-s)+Z*(C-2*c+s),ke=o+2*R*(m-o)+Z*(A-2*m+o),ce=c+2*R*(C-c)+Z*(S-2*C+c),me=F*e+R*o,ue=F*s+R*c,Ee=F*m+R*A,Pe=F*C+R*S,Re=90-180*ve.atan2(re-ke,Q-ce)/ee;return(re>ke||Q<ce)&&(Re+=180),{x:ne,y:le,m:{x:re,y:Q},n:{x:ke,y:ce},start:{x:me,y:ue},end:{x:Ee,y:Pe},alpha:Re}},d.bezierBBox=function(e,s,o,c,m,C,A,S){d.is(e,"array")||(e=[e,s,o,c,m,C,A,S]);var R=Mt.apply(null,e);return{x:R.min.x,y:R.min.y,x2:R.max.x,y2:R.max.y,width:R.max.x-R.min.x,height:R.max.y-R.min.y}},d.isPointInsideBBox=function(e,s,o){return s>=e.x&&s<=e.x2&&o>=e.y&&o<=e.y2},d.isBBoxIntersect=function(e,s){var o=d.isPointInsideBBox;return o(s,e.x,e.y)||o(s,e.x2,e.y)||o(s,e.x,e.y2)||o(s,e.x2,e.y2)||o(e,s.x,s.y)||o(e,s.x2,s.y)||o(e,s.x,s.y2)||o(e,s.x2,s.y2)||(e.x<s.x2&&e.x>s.x||s.x<e.x2&&s.x>e.x)&&(e.y<s.y2&&e.y>s.y||s.y<e.y2&&s.y>e.y)},d.pathIntersection=function(e,s){return kt(e,s)},d.pathIntersectionNumber=function(e,s){return kt(e,s,1)},d.isPointInsidePath=function(e,s,o){var c=d.pathBBox(e);return d.isPointInsideBBox(c,s,o)&&kt(e,[["M",s,o],["H",c.x2+10]],1)%2==1},d._removedFactory=function(e){return function(){u("raphael.log",null,"Rapha├лl: you are calling to method тАЬ"+e+"тАЭ of removed object",e)}};var Ze=d.pathBBox=function(e){var s=je(e);if(s.bbox)return ze(s.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var o,c=0,m=0,C=[],A=[],S=0,R=(e=St(e)).length;S<R;S++)if((o=e[S])[0]=="M")c=o[1],m=o[2],C.push(c),A.push(m);else{var F=Mt(c,m,o[1],o[2],o[3],o[4],o[5],o[6]);C=C[V](F.min.x,F.max.x),A=A[V](F.min.y,F.max.y),c=o[5],m=o[6]}var J=W[U](0,C),ie=W[U](0,A),Z=Se[U](0,C),Y=Se[U](0,A),ne=Z-J,le=Y-ie,re={x:J,y:ie,x2:Z,y2:Y,width:ne,height:le,cx:J+ne/2,cy:ie+le/2};return s.bbox=ze(re),re},Ve=function(e){var s=ze(e);return s.toString=d._path2string,s},Zt=d._pathToRelative=function(e){var s=je(e);if(s.rel)return Ve(s.rel);d.is(e,i)&&d.is(e&&e[0],i)||(e=d.parsePathString(e));var o=[],c=0,m=0,C=0,A=0,S=0;e[0][0]=="M"&&(C=c=e[0][1],A=m=e[0][2],S++,o.push(["M",c,m]));for(var R=S,F=e.length;R<F;R++){var J=o[R]=[],ie=e[R];if(ie[0]!=ye.call(ie[0]))switch(J[0]=ye.call(ie[0]),J[0]){case"a":J[1]=ie[1],J[2]=ie[2],J[3]=ie[3],J[4]=ie[4],J[5]=ie[5],J[6]=+(ie[6]-c).toFixed(3),J[7]=+(ie[7]-m).toFixed(3);break;case"v":J[1]=+(ie[1]-m).toFixed(3);break;case"m":C=ie[1],A=ie[2];default:for(var Z=1,Y=ie.length;Z<Y;Z++)J[Z]=+(ie[Z]-(Z%2?c:m)).toFixed(3)}else{J=o[R]=[],ie[0]=="m"&&(C=ie[1]+c,A=ie[2]+m);for(var ne=0,le=ie.length;ne<le;ne++)o[R][ne]=ie[ne]}var re=o[R].length;switch(o[R][0]){case"z":c=C,m=A;break;case"h":c+=+o[R][re-1];break;case"v":m+=+o[R][re-1];break;default:c+=+o[R][re-2],m+=+o[R][re-1]}}return o.toString=d._path2string,s.rel=Ve(o),o},ft=d._pathToAbsolute=function(e){var s=je(e);if(s.abs)return Ve(s.abs);if(d.is(e,i)&&d.is(e&&e[0],i)||(e=d.parsePathString(e)),!e||!e.length)return[["M",0,0]];var o=[],c=0,m=0,C=0,A=0,S=0;e[0][0]=="M"&&(C=c=+e[0][1],A=m=+e[0][2],S++,o[0]=["M",c,m]);for(var R,F,J=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z",ie=S,Z=e.length;ie<Z;ie++){if(o.push(R=[]),(F=e[ie])[0]!=v.call(F[0]))switch(R[0]=v.call(F[0]),R[0]){case"A":R[1]=F[1],R[2]=F[2],R[3]=F[3],R[4]=F[4],R[5]=F[5],R[6]=+(F[6]+c),R[7]=+(F[7]+m);break;case"V":R[1]=+F[1]+m;break;case"H":R[1]=+F[1]+c;break;case"R":for(var Y=[c,m][V](F.slice(1)),ne=2,le=Y.length;ne<le;ne++)Y[ne]=+Y[ne]+c,Y[++ne]=+Y[ne]+m;o.pop(),o=o[V](ut(Y,J));break;case"M":C=+F[1]+c,A=+F[2]+m;default:for(ne=1,le=F.length;ne<le;ne++)R[ne]=+F[ne]+(ne%2?c:m)}else if(F[0]=="R")Y=[c,m][V](F.slice(1)),o.pop(),o=o[V](ut(Y,J)),R=["R"][V](F.slice(-2));else for(var re=0,Q=F.length;re<Q;re++)R[re]=F[re];switch(R[0]){case"Z":c=C,m=A;break;case"H":c=R[1];break;case"V":m=R[1];break;case"M":C=R[R.length-2],A=R[R.length-1];default:c=R[R.length-2],m=R[R.length-1]}}return o.toString=d._path2string,s.abs=Ve(o),o},pt=function(e,s,o,c){return[e,s,o,c,o,c]},et=function(e,s,o,c,m,C){return[1/3*e+2/3*o,1/3*s+2/3*c,1/3*m+2/3*o,1/3*C+2/3*c,m,C]},Tt=function(e,s,o,c,m,C,A,S,R,F){var J,ie=120*ee/180,Z=ee/180*(+m||0),Y=[],ne=Fe(function(v1,y1,zt){return{x:v1*ve.cos(zt)-y1*ve.sin(zt),y:v1*ve.sin(zt)+y1*ve.cos(zt)}});if(F)Pe=F[0],Re=F[1],ue=F[2],Ee=F[3];else{e=(J=ne(e,s,-Z)).x,s=J.y,S=(J=ne(S,R,-Z)).x,R=J.y;var le=(e-S)/2,re=(s-R)/2,Q=le*le/(o*o)+re*re/(c*c);Q>1&&(o*=Q=ve.sqrt(Q),c*=Q);var ke=o*o,ce=c*c,me=(C==A?-1:1)*ve.sqrt(Ce((ke*ce-ke*re*re-ce*le*le)/(ke*re*re+ce*le*le))),ue=me*o*re/c+(e+S)/2,Ee=me*-c*le/o+(s+R)/2,Pe=ve.asin(((s-Ee)/c).toFixed(9)),Re=ve.asin(((R-Ee)/c).toFixed(9));(Pe=e<ue?ee-Pe:Pe)<0&&(Pe=2*ee+Pe),(Re=S<ue?ee-Re:Re)<0&&(Re=2*ee+Re),A&&Pe>Re&&(Pe-=2*ee),!A&&Re>Pe&&(Re-=2*ee)}var gt=Re-Pe;if(Ce(gt)>ie){var Et=Re,$e=S,We=R;Re=Pe+ie*(A&&Re>Pe?1:-1),S=ue+o*ve.cos(Re),R=Ee+c*ve.sin(Re),Y=Tt(S,R,o,c,m,0,A,$e,We,[Re,Et,ue,Ee])}gt=Re-Pe;var vt=ve.cos(Pe),yt=ve.sin(Pe),Dt=ve.cos(Re),Je=ve.sin(Re),ot=ve.tan(gt/4),qt=4/3*o*ot,d1=4/3*c*ot,f1=[e,s],xt=[e+qt*yt,s-d1*vt],p1=[S+qt*Je,R-d1*Dt],m1=[S,R];if(xt[0]=2*f1[0]-xt[0],xt[1]=2*f1[1]-xt[1],F)return[xt,p1,m1][V](Y);for(var g1=[],nt=0,$1=(Y=[xt,p1,m1][V](Y).join()[pe](",")).length;nt<$1;nt++)g1[nt]=nt%2?ne(Y[nt-1],Y[nt],Z).y:ne(Y[nt],Y[nt+1],Z).x;return g1},rt=function(e,s,o,c,m,C,A,S,R){var F=1-R;return{x:Ae(F,3)*e+3*Ae(F,2)*R*o+3*F*R*R*m+Ae(R,3)*A,y:Ae(F,3)*s+3*Ae(F,2)*R*c+3*F*R*R*C+Ae(R,3)*S}},Mt=Fe(function(e,s,o,c,m,C,A,S){var R,F=m-2*o+e-(A-2*m+o),J=2*(o-e)-2*(m-o),ie=e-o,Z=(-J+ve.sqrt(J*J-4*F*ie))/2/F,Y=(-J-ve.sqrt(J*J-4*F*ie))/2/F,ne=[s,S],le=[e,A];return Ce(Z)>"1e12"&&(Z=.5),Ce(Y)>"1e12"&&(Y=.5),Z>0&&Z<1&&(R=rt(e,s,o,c,m,C,A,S,Z),le.push(R.x),ne.push(R.y)),Y>0&&Y<1&&(R=rt(e,s,o,c,m,C,A,S,Y),le.push(R.x),ne.push(R.y)),F=C-2*c+s-(S-2*C+c),ie=s-c,Z=(-(J=2*(c-s)-2*(C-c))+ve.sqrt(J*J-4*F*ie))/2/F,Y=(-J-ve.sqrt(J*J-4*F*ie))/2/F,Ce(Z)>"1e12"&&(Z=.5),Ce(Y)>"1e12"&&(Y=.5),Z>0&&Z<1&&(R=rt(e,s,o,c,m,C,A,S,Z),le.push(R.x),ne.push(R.y)),Y>0&&Y<1&&(R=rt(e,s,o,c,m,C,A,S,Y),le.push(R.x),ne.push(R.y)),{min:{x:W[U](0,le),y:W[U](0,ne)},max:{x:Se[U](0,le),y:Se[U](0,ne)}}}),St=d._path2curve=Fe(function(e,s){var o=!s&&je(e);if(!s&&o.curve)return Ve(o.curve);for(var c=ft(e),m=s&&ft(s),C={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},A={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},S=function(me,ue,Ee){var Pe,Re;if(!me)return["C",ue.x,ue.y,ue.x,ue.y,ue.x,ue.y];switch(!(me[0]in{T:1,Q:1})&&(ue.qx=ue.qy=null),me[0]){case"M":ue.X=me[1],ue.Y=me[2];break;case"A":me=["C"][V](Tt[U](0,[ue.x,ue.y][V](me.slice(1))));break;case"S":Ee=="C"||Ee=="S"?(Pe=2*ue.x-ue.bx,Re=2*ue.y-ue.by):(Pe=ue.x,Re=ue.y),me=["C",Pe,Re][V](me.slice(1));break;case"T":Ee=="Q"||Ee=="T"?(ue.qx=2*ue.x-ue.qx,ue.qy=2*ue.y-ue.qy):(ue.qx=ue.x,ue.qy=ue.y),me=["C"][V](et(ue.x,ue.y,ue.qx,ue.qy,me[1],me[2]));break;case"Q":ue.qx=me[1],ue.qy=me[2],me=["C"][V](et(ue.x,ue.y,me[1],me[2],me[3],me[4]));break;case"L":me=["C"][V](pt(ue.x,ue.y,me[1],me[2]));break;case"H":me=["C"][V](pt(ue.x,ue.y,me[1],ue.y));break;case"V":me=["C"][V](pt(ue.x,ue.y,ue.x,me[1]));break;case"Z":me=["C"][V](pt(ue.x,ue.y,ue.X,ue.Y))}return me},R=function(me,ue){if(me[ue].length>7){me[ue].shift();for(var Ee=me[ue];Ee.length;)J[ue]="A",m&&(ie[ue]="A"),me.splice(ue++,0,["C"][V](Ee.splice(0,6)));me.splice(ue,1),le=Se(c.length,m&&m.length||0)}},F=function(me,ue,Ee,Pe,Re){me&&ue&&me[Re][0]=="M"&&ue[Re][0]!="M"&&(ue.splice(Re,0,["M",Pe.x,Pe.y]),Ee.bx=0,Ee.by=0,Ee.x=me[Re][1],Ee.y=me[Re][2],le=Se(c.length,m&&m.length||0))},J=[],ie=[],Z="",Y="",ne=0,le=Se(c.length,m&&m.length||0);ne<le;ne++){c[ne]&&(Z=c[ne][0]),Z!="C"&&(J[ne]=Z,ne&&(Y=J[ne-1])),c[ne]=S(c[ne],C,Y),J[ne]!="A"&&Z=="C"&&(J[ne]="C"),R(c,ne),m&&(m[ne]&&(Z=m[ne][0]),Z!="C"&&(ie[ne]=Z,ne&&(Y=ie[ne-1])),m[ne]=S(m[ne],A,Y),ie[ne]!="A"&&Z=="C"&&(ie[ne]="C"),R(m,ne)),F(c,m,C,A,ne),F(m,c,A,C,ne);var re=c[ne],Q=m&&m[ne],ke=re.length,ce=m&&Q.length;C.x=re[ke-2],C.y=re[ke-1],C.bx=h(re[ke-4])||C.x,C.by=h(re[ke-3])||C.y,A.bx=m&&(h(Q[ce-4])||A.x),A.by=m&&(h(Q[ce-3])||A.y),A.x=m&&Q[ce-2],A.y=m&&Q[ce-1]}return m||(o.curve=Ve(c)),m?[c,m]:c},null,Ve),It=(d._parseDots=Fe(function(e){for(var s=[],o=0,c=e.length;o<c;o++){var m={},C=e[o].match(/^([^:]*):?([\d\.]*)/);if(m.color=d.getRGB(C[1]),m.color.error)return null;m.opacity=m.color.opacity,m.color=m.color.hex,C[2]&&(m.offset=C[2]+"%"),s.push(m)}for(o=1,c=s.length-1;o<c;o++)if(!s[o].offset){for(var A=h(s[o-1].offset||0),S=0,R=o+1;R<c;R++)if(s[R].offset){S=s[R].offset;break}S||(S=100,R=c);for(var F=((S=h(S))-A)/(R-o+1);o<R;o++)A+=F,s[o].offset=A+"%"}return s}),d._tear=function(e,s){e==s.top&&(s.top=e.prev),e==s.bottom&&(s.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),I1=(d._tofront=function(e,s){s.top!==e&&(It(e,s),e.next=null,e.prev=s.top,s.top.next=e,s.top=e)},d._toback=function(e,s){s.bottom!==e&&(It(e,s),e.next=s.bottom,e.prev=null,s.bottom.prev=e,s.bottom=e)},d._insertafter=function(e,s,o){It(e,o),s==o.top&&(o.top=e),s.next&&(s.next.prev=e),e.next=s.next,e.prev=s,s.next=e},d._insertbefore=function(e,s,o){It(e,o),s==o.bottom&&(o.bottom=e),s.prev&&(s.prev.next=e),e.prev=s.prev,s.prev=e,e.next=s},d.toMatrix=function(e,s){var o=Ze(e),c={_:{transform:he},getBBox:function(){return o}};return e1(c,s),c.matrix}),e1=(d.transformPath=function(e,s){return Te(e,I1(e,s))},d._extractTransform=function(e,s){if(s==null)return e._.transform;s=G(s).replace(/\.{3}|\u2026/g,e._.transform||he);var o,c,m=d.parseTransformString(s),C=0,A=1,S=1,R=e._,F=new st;if(R.transform=m||[],m)for(var J=0,ie=m.length;J<ie;J++){var Z,Y,ne,le,re,Q=m[J],ke=Q.length,ce=G(Q[0]).toLowerCase(),me=Q[0]!=ce,ue=me?F.invert():0;ce=="t"&&ke==3?me?(Z=ue.x(0,0),Y=ue.y(0,0),ne=ue.x(Q[1],Q[2]),le=ue.y(Q[1],Q[2]),F.translate(ne-Z,le-Y)):F.translate(Q[1],Q[2]):ce=="r"?ke==2?(re=re||e.getBBox(1),F.rotate(Q[1],re.x+re.width/2,re.y+re.height/2),C+=Q[1]):ke==4&&(me?(ne=ue.x(Q[2],Q[3]),le=ue.y(Q[2],Q[3]),F.rotate(Q[1],ne,le)):F.rotate(Q[1],Q[2],Q[3]),C+=Q[1]):ce=="s"?ke==2||ke==3?(re=re||e.getBBox(1),F.scale(Q[1],Q[ke-1],re.x+re.width/2,re.y+re.height/2),A*=Q[1],S*=Q[ke-1]):ke==5&&(me?(ne=ue.x(Q[3],Q[4]),le=ue.y(Q[3],Q[4]),F.scale(Q[1],Q[2],ne,le)):F.scale(Q[1],Q[2],Q[3],Q[4]),A*=Q[1],S*=Q[2]):ce=="m"&&ke==7&&F.add(Q[1],Q[2],Q[3],Q[4],Q[5],Q[6]),R.dirtyT=1,e.matrix=F}e.matrix=F,R.sx=A,R.sy=S,R.deg=C,R.dx=o=F.e,R.dy=c=F.f,A==1&&S==1&&!C&&R.bbox?(R.bbox.x+=+o,R.bbox.y+=+c):R.dirtyT=1}),t1=function(e){var s=e[0];switch(s.toLowerCase()){case"t":return[s,0,0];case"m":return[s,1,0,0,1,0,0];case"r":return e.length==4?[s,0,e[2],e[3]]:[s,0];case"s":return e.length==5?[s,1,1,e[3],e[4]]:e.length==3?[s,1,1]:[s,1]}},D1=d._equaliseTransform=function(e,s){s=G(s).replace(/\.{3}|\u2026/g,e),e=d.parseTransformString(e)||[],s=d.parseTransformString(s)||[];for(var o,c,m,C,A=Se(e.length,s.length),S=[],R=[],F=0;F<A;F++){if(m=e[F]||t1(s[F]),C=s[F]||t1(m),m[0]!=C[0]||m[0].toLowerCase()=="r"&&(m[2]!=C[2]||m[3]!=C[3])||m[0].toLowerCase()=="s"&&(m[3]!=C[3]||m[4]!=C[4]))return;for(S[F]=[],R[F]=[],o=0,c=Se(m.length,C.length);o<c;o++)o in m&&(S[F][o]=m[o]),o in C&&(R[F][o]=C[o])}return{from:S,to:R}};function st(e,s,o,c,m,C){e!=null?(this.a=+e,this.b=+s,this.c=+o,this.d=+c,this.e=+m,this.f=+C):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}d._getContainer=function(e,s,o,c){var m;if((m=c!=null||d.is(e,"object")?e:O.doc.getElementById(e))!=null)return m.tagName?s==null?{container:m,width:m.style.pixelWidth||m.offsetWidth,height:m.style.pixelHeight||m.offsetHeight}:{container:m,width:s,height:o}:{container:1,x:e,y:s,width:o,height:c}},d.pathToRelative=Zt,d._engine={},d.path2curve=St,d.matrix=function(e,s,o,c,m,C){return new st(e,s,o,c,m,C)},function(e){function s(c){return c[0]*c[0]+c[1]*c[1]}function o(c){var m=ve.sqrt(s(c));c[0]&&(c[0]/=m),c[1]&&(c[1]/=m)}e.add=function(c,m,C,A,S,R){var F,J,ie,Z,Y=[[],[],[]],ne=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],le=[[c,C,S],[m,A,R],[0,0,1]];for(c&&c instanceof st&&(le=[[c.a,c.c,c.e],[c.b,c.d,c.f],[0,0,1]]),F=0;F<3;F++)for(J=0;J<3;J++){for(Z=0,ie=0;ie<3;ie++)Z+=ne[F][ie]*le[ie][J];Y[F][J]=Z}this.a=Y[0][0],this.b=Y[1][0],this.c=Y[0][1],this.d=Y[1][1],this.e=Y[0][2],this.f=Y[1][2]},e.invert=function(){var c=this,m=c.a*c.d-c.b*c.c;return new st(c.d/m,-c.b/m,-c.c/m,c.a/m,(c.c*c.f-c.d*c.e)/m,(c.b*c.e-c.a*c.f)/m)},e.clone=function(){return new st(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(c,m){this.add(1,0,0,1,c,m)},e.scale=function(c,m,C,A){m==null&&(m=c),(C||A)&&this.add(1,0,0,1,C,A),this.add(c,0,0,m,0,0),(C||A)&&this.add(1,0,0,1,-C,-A)},e.rotate=function(c,m,C){c=d.rad(c),m=m||0,C=C||0;var A=+ve.cos(c).toFixed(9),S=+ve.sin(c).toFixed(9);this.add(A,S,-S,A,m,C),this.add(1,0,0,1,-m,-C)},e.x=function(c,m){return c*this.a+m*this.c+this.e},e.y=function(c,m){return c*this.b+m*this.d+this.f},e.get=function(c){return+this[G.fromCharCode(97+c)].toFixed(4)},e.toString=function(){return d.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var c={};c.dx=this.e,c.dy=this.f;var m=[[this.a,this.c],[this.b,this.d]];c.scalex=ve.sqrt(s(m[0])),o(m[0]),c.shear=m[0][0]*m[1][0]+m[0][1]*m[1][1],m[1]=[m[1][0]-m[0][0]*c.shear,m[1][1]-m[0][1]*c.shear],c.scaley=ve.sqrt(s(m[1])),o(m[1]),c.shear/=c.scaley;var C=-m[0][1],A=m[1][1];return A<0?(c.rotate=d.deg(ve.acos(A)),C<0&&(c.rotate=360-c.rotate)):c.rotate=d.deg(ve.asin(C)),c.isSimple=!(+c.shear.toFixed(9)||c.scalex.toFixed(9)!=c.scaley.toFixed(9)&&c.rotate),c.isSuperSimple=!+c.shear.toFixed(9)&&c.scalex.toFixed(9)==c.scaley.toFixed(9)&&!c.rotate,c.noRotation=!+c.shear.toFixed(9)&&!c.rotate,c},e.toTransformString=function(c){var m=c||this[pe]();return m.isSimple?(m.scalex=+m.scalex.toFixed(4),m.scaley=+m.scaley.toFixed(4),m.rotate=+m.rotate.toFixed(4),(m.dx||m.dy?"t"+[m.dx,m.dy]:he)+(m.scalex!=1||m.scaley!=1?"s"+[m.scalex,m.scaley,0,0]:he)+(m.rotate?"r"+[m.rotate,0,0]:he)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(st.prototype);for(var q1=function(){this.returnValue=!1},z1=function(){return this.originalEvent.preventDefault()},F1=function(){this.cancelBubble=!0},O1=function(){return this.originalEvent.stopPropagation()},n1=function(e){var s=O.doc.documentElement.scrollTop||O.doc.body.scrollTop,o=O.doc.documentElement.scrollLeft||O.doc.body.scrollLeft;return{x:e.clientX+o,y:e.clientY+s}},H1=O.doc.addEventListener?function(e,s,o,c){var m=function(A){var S=n1(A);return o.call(c,A,S.x,S.y)};if(e.addEventListener(s,m,!1),oe&&z[s]){var C=function(A){for(var S=n1(A),R=A,F=0,J=A.targetTouches&&A.targetTouches.length;F<J;F++)if(A.targetTouches[F].target==e){(A=A.targetTouches[F]).originalEvent=R,A.preventDefault=z1,A.stopPropagation=O1;break}return o.call(c,A,S.x,S.y)};e.addEventListener(z[s],C,!1)}return function(){return e.removeEventListener(s,m,!1),oe&&z[s]&&e.removeEventListener(z[s],C,!1),!0}}:O.doc.attachEvent?function(e,s,o,c){var m=function(C){C=C||O.win.event;var A=O.doc.documentElement.scrollTop||O.doc.body.scrollTop,S=O.doc.documentElement.scrollLeft||O.doc.body.scrollLeft,R=C.clientX+S,F=C.clientY+A;return C.preventDefault=C.preventDefault||q1,C.stopPropagation=C.stopPropagation||F1,o.call(c,C,R,F)};return e.attachEvent("on"+s,m),function(){return e.detachEvent("on"+s,m),!0}}:void 0,tt=[],Vt=function(e){for(var s,o=e.clientX,c=e.clientY,m=O.doc.documentElement.scrollTop||O.doc.body.scrollTop,C=O.doc.documentElement.scrollLeft||O.doc.body.scrollLeft,A=tt.length;A--;){if(s=tt[A],oe&&e.touches){for(var S,R=e.touches.length;R--;)if((S=e.touches[R]).identifier==s.el._drag.id){o=S.clientX,c=S.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var F,J=s.el.node,ie=J.nextSibling,Z=J.parentNode,Y=J.style.display;O.win.opera&&Z.removeChild(J),J.style.display="none",F=s.el.paper.getElementByPoint(o,c),J.style.display=Y,O.win.opera&&(ie?Z.insertBefore(J,ie):Z.appendChild(J)),F&&u("raphael.drag.over."+s.el.id,s.el,F),o+=C,c+=m,u("raphael.drag.move."+s.el.id,s.move_scope||s.el,o-s.el._drag.x,c-s.el._drag.y,o,c,e)}},$t=function(e){d.unmousemove(Vt).unmouseup($t);for(var s,o=tt.length;o--;)(s=tt[o]).el._drag={},u("raphael.drag.end."+s.el.id,s.end_scope||s.start_scope||s.move_scope||s.el,e);tt=[]},Ie=d.el={},r1=de.length;r1--;)(function(e){d[e]=Ie[e]=function(s,o){return d.is(s,"function")&&(this.events=this.events||[],this.events.push({name:e,f:s,unbind:H1(this.shape||this.node||O.doc,e,s,o||this)})),this},d["un"+e]=Ie["un"+e]=function(s){for(var o=this.events||[],c=o.length;c--;)o[c].name!=e||!d.is(s,"undefined")&&o[c].f!=s||(o[c].unbind(),o.splice(c,1),!o.length&&delete this.events);return this}})(de[r1]);Ie.data=function(e,s){var o=be[this.id]=be[this.id]||{};if(arguments.length==0)return o;if(arguments.length==1){if(d.is(e,"object")){for(var c in e)e[E](c)&&this.data(c,e[c]);return this}return u("raphael.data.get."+this.id,this,o[e],e),o[e]}return o[e]=s,u("raphael.data.set."+this.id,this,s,e),this},Ie.removeData=function(e){return e==null?delete be[this.id]:be[this.id]&&delete be[this.id][e],this},Ie.getData=function(){return ze(be[this.id]||{})},Ie.hover=function(e,s,o,c){return this.mouseover(e,o).mouseout(s,c||o)},Ie.unhover=function(e,s){return this.unmouseover(e).unmouseout(s)};var mt=[];Ie.drag=function(e,s,o,c,m,C){function A(S){(S.originalEvent||S).preventDefault();var R=S.clientX,F=S.clientY,J=O.doc.documentElement.scrollTop||O.doc.body.scrollTop,ie=O.doc.documentElement.scrollLeft||O.doc.body.scrollLeft;if(this._drag.id=S.identifier,oe&&S.touches){for(var Z,Y=S.touches.length;Y--;)if(Z=S.touches[Y],this._drag.id=Z.identifier,Z.identifier==this._drag.id){R=Z.clientX,F=Z.clientY;break}}this._drag.x=R+ie,this._drag.y=F+J,!tt.length&&d.mousemove(Vt).mouseup($t),tt.push({el:this,move_scope:c,start_scope:m,end_scope:C}),s&&u.on("raphael.drag.start."+this.id,s),e&&u.on("raphael.drag.move."+this.id,e),o&&u.on("raphael.drag.end."+this.id,o),u("raphael.drag.start."+this.id,m||c||this,this._drag.x,this._drag.y,S)}return this._drag={},mt.push({el:this,start:A}),this.mousedown(A),this},Ie.onDragOver=function(e){e?u.on("raphael.drag.over."+this.id,e):u.unbind("raphael.drag.over."+this.id)},Ie.undrag=function(){for(var e=mt.length;e--;)mt[e].el==this&&(this.unmousedown(mt[e].start),mt.splice(e,1),u.unbind("raphael.drag.*."+this.id));!mt.length&&d.unmousemove(Vt).unmouseup($t),tt=[]},B.circle=function(e,s,o){var c=d._engine.circle(this,e||0,s||0,o||0);return this.__set__&&this.__set__.push(c),c},B.rect=function(e,s,o,c,m){var C=d._engine.rect(this,e||0,s||0,o||0,c||0,m||0);return this.__set__&&this.__set__.push(C),C},B.ellipse=function(e,s,o,c){var m=d._engine.ellipse(this,e||0,s||0,o||0,c||0);return this.__set__&&this.__set__.push(m),m},B.path=function(e){e&&!d.is(e,"string")&&!d.is(e[0],i)&&(e+=he);var s=d._engine.path(d.format[U](d,arguments),this);return this.__set__&&this.__set__.push(s),s},B.image=function(e,s,o,c,m){var C=d._engine.image(this,e||"about:blank",s||0,o||0,c||0,m||0);return this.__set__&&this.__set__.push(C),C},B.text=function(e,s,o){var c=d._engine.text(this,e||0,s||0,G(o));return this.__set__&&this.__set__.push(c),c},B.set=function(e){!d.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var s=new Pt(e);return this.__set__&&this.__set__.push(s),s.paper=this,s.type="set",s},B.setStart=function(e){this.__set__=e||this.set()},B.setFinish=function(e){var s=this.__set__;return delete this.__set__,s},B.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},B.setSize=function(e,s){return d._engine.setSize.call(this,e,s)},B.setViewBox=function(e,s,o,c,m){return d._engine.setViewBox.call(this,e,s,o,c,m)},B.top=B.bottom=null,B.raphael=d;function s1(){return this.x+ge+this.y+ge+this.width+" ├Ч "+this.height}B.getElementByPoint=function(e,s){var o,c,m,C,A,S,R,F=this.canvas,J=O.doc.elementFromPoint(e,s);if(O.win.opera&&J.tagName=="svg"){var ie=(c=(o=F).getBoundingClientRect(),m=o.ownerDocument,C=m.body,A=m.documentElement,S=A.clientTop||C.clientTop||0,R=A.clientLeft||C.clientLeft||0,{y:c.top+(O.win.pageYOffset||A.scrollTop||C.scrollTop)-S,x:c.left+(O.win.pageXOffset||A.scrollLeft||C.scrollLeft)-R}),Z=F.createSVGRect();Z.x=e-ie.x,Z.y=s-ie.y,Z.width=Z.height=1;var Y=F.getIntersectionList(Z,null);Y.length&&(J=Y[Y.length-1])}if(!J)return null;for(;J.parentNode&&J!=F.parentNode&&!J.raphael;)J=J.parentNode;return J==this.canvas.parentNode&&(J=F),J=J&&J.raphael?this.getById(J.raphaelid):null},B.getElementsByBBox=function(e){var s=this.set();return this.forEach(function(o){d.isBBoxIntersect(o.getBBox(),e)&&s.push(o)}),s},B.getById=function(e){for(var s=this.bottom;s;){if(s.id==e)return s;s=s.next}return null},B.forEach=function(e,s){for(var o=this.bottom;o;){if(e.call(s,o)===!1)return this;o=o.next}return this},B.getElementsByPoint=function(e,s){var o=this.set();return this.forEach(function(c){c.isPointInside(e,s)&&o.push(c)}),o},Ie.isPointInside=function(e,s){var o=this.realPath=Be[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(o=d.transformPath(o,this.attr("transform"))),d.isPointInsidePath(o,e,s)},Ie.getBBox=function(e){if(this.removed)return{};var s=this._;return e?(!s.dirty&&s.bboxwt||(this.realPath=Be[this.type](this),s.bboxwt=Ze(this.realPath),s.bboxwt.toString=s1,s.dirty=0),s.bboxwt):((s.dirty||s.dirtyT||!s.bbox)&&(!s.dirty&&this.realPath||(s.bboxwt=0,this.realPath=Be[this.type](this)),s.bbox=Ze(Te(this.realPath,this.matrix)),s.bbox.toString=s1,s.dirty=s.dirtyT=0),s.bbox)},Ie.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Ie.glow=function(e){if(this.type=="text")return null;var s={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity==null?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},o=s.width/2,c=this.paper,m=c.set(),C=this.realPath||Be[this.type](this);C=this.matrix?Te(C,this.matrix):C;for(var A=1;A<o+1;A++)m.push(c.path(C).attr({stroke:s.color,fill:s.fill?s.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(s.width/o*A).toFixed(3),opacity:+(s.opacity/o).toFixed(3)}));return m.insertBefore(this).translate(s.offsetx,s.offsety)};var Ut=function(e,s,o,c,m,C,A,S,R){return R==null?Ge(e,s,o,c,m,C,A,S):d.findDotsAtSegment(e,s,o,c,m,C,A,S,function(F,J,ie,Z,Y,ne,le,re,Q){if(!(Q<0||Ge(F,J,ie,Z,Y,ne,le,re)<Q)){var ke,ce=.5,me=1-ce;for(ke=Ge(F,J,ie,Z,Y,ne,le,re,me);Ce(ke-Q)>.01;)ke=Ge(F,J,ie,Z,Y,ne,le,re,me+=(ke<Q?1:-1)*(ce/=2));return me}}(e,s,o,c,m,C,A,S,R))},jt=function(e,s){return function(o,c,m){for(var C,A,S,R,F,J="",ie={},Z=0,Y=0,ne=(o=St(o)).length;Y<ne;Y++){if((S=o[Y])[0]=="M")C=+S[1],A=+S[2];else{if(Z+(R=Ut(C,A,S[1],S[2],S[3],S[4],S[5],S[6]))>c){if(s&&!ie.start){if(J+=["C"+(F=Ut(C,A,S[1],S[2],S[3],S[4],S[5],S[6],c-Z)).start.x,F.start.y,F.m.x,F.m.y,F.x,F.y],m)return J;ie.start=J,J=["M"+F.x,F.y+"C"+F.n.x,F.n.y,F.end.x,F.end.y,S[5],S[6]].join(),Z+=R,C=+S[5],A=+S[6];continue}if(!e&&!s)return{x:(F=Ut(C,A,S[1],S[2],S[3],S[4],S[5],S[6],c-Z)).x,y:F.y,alpha:F.alpha}}Z+=R,C=+S[5],A=+S[6]}J+=S.shift()+S}return ie.end=J,(F=e?Z:s?ie:d.findDotsAtSegment(C,A,S[0],S[1],S[2],S[3],S[4],S[5],1)).alpha&&(F={x:F.x,y:F.y,alpha:F.alpha}),F}},i1=jt(1),o1=jt(),Gt=jt(0,1);d.getTotalLength=i1,d.getPointAtLength=o1,d.getSubpath=function(e,s,o){if(this.getTotalLength(e)-o<1e-6)return Gt(e,s).end;var c=Gt(e,o,1);return s?Gt(c,s).end:c},Ie.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():i1(e)},Ie.getPointAtLength=function(e){var s=this.getPath();if(s)return o1(s,e)},Ie.getPath=function(){var e,s=d._getPath[this.type];if(this.type!="text"&&this.type!="set")return s&&(e=s(this)),e},Ie.getSubpath=function(e,s){var o=this.getPath();if(o)return d.getSubpath(o,e,s)};var Ue=d.easing_formulas={linear:function(e){return e},"<":function(e){return Ae(e,1.7)},">":function(e){return Ae(e,.48)},"<>":function(e){var s=.48-e/1.04,o=ve.sqrt(.1734+s*s),c=o-s,m=-o-s,C=Ae(Ce(c),1/3)*(c<0?-1:1)+Ae(Ce(m),1/3)*(m<0?-1:1)+.5;return 3*(1-C)*C*C+C*C*C},backIn:function(e){var s=1.70158;return e*e*((s+1)*e-s)},backOut:function(e){var s=1.70158;return(e-=1)*e*((s+1)*e+s)+1},elastic:function(e){return e==!!e?e:Ae(2,-10*e)*ve.sin(2*ee*(e-.075)/.3)+1},bounce:function(e){var s=7.5625,o=2.75;return e<1/o?s*e*e:e<2/o?s*(e-=1.5/o)*e+.75:e<2.5/o?s*(e-=2.25/o)*e+.9375:s*(e-=2.625/o)*e+.984375}};Ue.easeIn=Ue["ease-in"]=Ue["<"],Ue.easeOut=Ue["ease-out"]=Ue[">"],Ue.easeInOut=Ue["ease-in-out"]=Ue["<>"],Ue["back-in"]=Ue.backIn,Ue["back-out"]=Ue.backOut;var Me=[],a1=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},Wt=function(){for(var e=+new Date,s=0;s<Me.length;s++){var o=Me[s];if(!o.el.removed&&!o.paused){var c,m,C=e-o.start,A=o.ms,S=o.easing,R=o.from,F=o.diff,J=o.to,ie=(o.t,o.el),Z={},Y={};if(o.initstatus?(C=(o.initstatus*o.anim.top-o.prev)/(o.percent-o.prev)*A,o.status=o.initstatus,delete o.initstatus,o.stop&&Me.splice(s--,1)):o.status=(o.prev+(o.percent-o.prev)*(C/A))/o.anim.top,!(C<0))if(C<A){var ne=S(C/A);for(var le in R)if(R[E](le)){switch(k[le]){case X:c=+R[le]+ne*A*F[le];break;case"colour":c="rgb("+[Xt(a(R[le].r+ne*A*F[le].r)),Xt(a(R[le].g+ne*A*F[le].g)),Xt(a(R[le].b+ne*A*F[le].b))].join(",")+")";break;case"path":c=[];for(var re=0,Q=R[le].length;re<Q;re++){c[re]=[R[le][re][0]];for(var ke=1,ce=R[le][re].length;ke<ce;ke++)c[re][ke]=+R[le][re][ke]+ne*A*F[le][re][ke];c[re]=c[re].join(ge)}c=c.join(ge);break;case"transform":if(F[le].real)for(c=[],re=0,Q=R[le].length;re<Q;re++)for(c[re]=[R[le][re][0]],ke=1,ce=R[le][re].length;ke<ce;ke++)c[re][ke]=R[le][re][ke]+ne*A*F[le][re][ke];else{var me=function(Ee){return+R[le][Ee]+ne*A*F[le][Ee]};c=[["m",me(0),me(1),me(2),me(3),me(4),me(5)]]}break;case"csv":if(le=="clip-rect")for(c=[],re=4;re--;)c[re]=+R[le][re]+ne*A*F[le][re];break;default:var ue=[][V](R[le]);for(c=[],re=ie.paper.customAttributes[le].length;re--;)c[re]=+ue[re]+ne*A*F[le][re]}Z[le]=c}ie.attr(Z),function(Ee,Pe,Re){setTimeout(function(){u("raphael.anim.frame."+Ee,Pe,Re)})}(ie.id,ie,o.anim)}else{if(function(Ee,Pe,Re){setTimeout(function(){u("raphael.anim.frame."+Pe.id,Pe,Re),u("raphael.anim.finish."+Pe.id,Pe,Re),d.is(Ee,"function")&&Ee.call(Pe)})}(o.callback,ie,o.anim),ie.attr(J),Me.splice(s--,1),o.repeat>1&&!o.next){for(m in J)J[E](m)&&(Y[m]=o.totalOrigin[m]);o.el.attr(Y),At(o.anim,o.el,o.anim.percents[0],null,o.totalOrigin,o.repeat-1)}o.next&&!o.stop&&At(o.anim,o.el,o.next,null,o.totalOrigin,o.repeat)}}}Me.length&&a1(Wt)},Xt=function(e){return e>255?255:e<0?0:e};function V1(e,s,o,c,m,C){var A=3*s,S=3*(c-s)-A,R=1-A-S,F=3*o,J=3*(m-o)-F,ie=1-F-J;function Z(Y){return((R*Y+S)*Y+A)*Y}return function(Y,ne){var le=function(re,Q){var ke,ce,me,ue,Ee,Pe;for(me=re,Pe=0;Pe<8;Pe++){if(ue=Z(me)-re,Ce(ue)<Q)return me;if(Ce(Ee=(3*R*me+2*S)*me+A)<1e-6)break;me-=ue/Ee}if(ce=1,(me=re)<(ke=0))return ke;if(me>ce)return ce;for(;ke<ce;){if(ue=Z(me),Ce(ue-re)<Q)return me;re>ue?ke=me:ce=me,me=(ce-ke)/2+ke}return me}(Y,ne);return((ie*le+J)*le+F)*le}(e,1/(200*C))}function Ye(e,s){var o=[],c={};if(this.ms=s,this.times=1,e){for(var m in e)e[E](m)&&(c[h(m)]=e[m],o.push(h(m)));o.sort(_e)}this.anim=c,this.top=o[o.length-1],this.percents=o}function At(e,s,o,c,m,C){o=h(o);var A,S,R,F,J,ie,Z=e.ms,Y={},ne={},le={};if(c)for(Q=0,ke=Me.length;Q<ke;Q++){var re=Me[Q];if(re.el.id==s.id&&re.anim==e){re.percent!=o?(Me.splice(Q,1),R=1):S=re,s.attr(re.totalOrigin);break}}else c=+ne;for(var Q=0,ke=e.percents.length;Q<ke;Q++){if(e.percents[Q]==o||e.percents[Q]>c*e.top){o=e.percents[Q],J=e.percents[Q-1]||0,Z=Z/e.top*(o-J),F=e.percents[Q+1],A=e.anim[o];break}c&&s.attr(e.anim[e.percents[Q]])}if(A){if(S)S.initstatus=c,S.start=new Date-S.ms*c;else{for(var ce in A)if(A[E](ce)&&(k[E](ce)||s.paper.customAttributes[E](ce)))switch(Y[ce]=s.attr(ce),Y[ce]==null&&(Y[ce]=L[ce]),ne[ce]=A[ce],k[ce]){case X:le[ce]=(ne[ce]-Y[ce])/Z;break;case"colour":Y[ce]=d.getRGB(Y[ce]);var me=d.getRGB(ne[ce]);le[ce]={r:(me.r-Y[ce].r)/Z,g:(me.g-Y[ce].g)/Z,b:(me.b-Y[ce].b)/Z};break;case"path":var ue=St(Y[ce],ne[ce]),Ee=ue[1];for(Y[ce]=ue[0],le[ce]=[],Q=0,ke=Y[ce].length;Q<ke;Q++){le[ce][Q]=[0];for(var Pe=1,Re=Y[ce][Q].length;Pe<Re;Pe++)le[ce][Q][Pe]=(Ee[Q][Pe]-Y[ce][Q][Pe])/Z}break;case"transform":var gt=s._,Et=D1(gt[ce],ne[ce]);if(Et)for(Y[ce]=Et.from,ne[ce]=Et.to,le[ce]=[],le[ce].real=!0,Q=0,ke=Y[ce].length;Q<ke;Q++)for(le[ce][Q]=[Y[ce][Q][0]],Pe=1,Re=Y[ce][Q].length;Pe<Re;Pe++)le[ce][Q][Pe]=(ne[ce][Q][Pe]-Y[ce][Q][Pe])/Z;else{var $e=s.matrix||new st,We={_:{transform:gt.transform},getBBox:function(){return s.getBBox(1)}};Y[ce]=[$e.a,$e.b,$e.c,$e.d,$e.e,$e.f],e1(We,ne[ce]),ne[ce]=We._.transform,le[ce]=[(We.matrix.a-$e.a)/Z,(We.matrix.b-$e.b)/Z,(We.matrix.c-$e.c)/Z,(We.matrix.d-$e.d)/Z,(We.matrix.e-$e.e)/Z,(We.matrix.f-$e.f)/Z]}break;case"csv":var vt=G(A[ce])[pe](H),yt=G(Y[ce])[pe](H);if(ce=="clip-rect")for(Y[ce]=yt,le[ce]=[],Q=yt.length;Q--;)le[ce][Q]=(vt[Q]-Y[ce][Q])/Z;ne[ce]=vt;break;default:for(vt=[][V](A[ce]),yt=[][V](Y[ce]),le[ce]=[],Q=s.paper.customAttributes[ce].length;Q--;)le[ce][Q]=((vt[Q]||0)-(yt[Q]||0))/Z}var Dt=A.easing,Je=d.easing_formulas[Dt];if(!Je)if((Je=G(Dt).match(r))&&Je.length==5){var ot=Je;Je=function(qt){return V1(qt,+ot[1],+ot[2],+ot[3],+ot[4],Z)}}else Je=xe;if(re={anim:e,percent:o,timestamp:ie=A.start||e.start||+new Date,start:ie+(e.del||0),status:0,initstatus:c||0,stop:!1,ms:Z,easing:Je,from:Y,diff:le,to:ne,el:s,callback:A.callback,prev:J,next:F,repeat:C||e.times,origin:s.attr(),totalOrigin:m},Me.push(re),c&&!S&&!R&&(re.stop=!0,re.start=new Date-Z*c,Me.length==1))return Wt();R&&(re.start=new Date-re.ms*c),Me.length==1&&a1(Wt)}u("raphael.anim.start."+s.id,s,e)}}function l1(e){for(var s=0;s<Me.length;s++)Me[s].el.paper==e&&Me.splice(s--,1)}Ie.animateWith=function(e,s,o,c,m,C){if(this.removed)return C&&C.call(this),this;var A=o instanceof Ye?o:d.animation(o,c,m,C);At(A,this,A.percents[0],null,this.attr());for(var S=0,R=Me.length;S<R;S++)if(Me[S].anim==s&&Me[S].el==e){Me[R-1].start=Me[S].start;break}return this},Ie.onAnimation=function(e){return e?u.on("raphael.anim.frame."+this.id,e):u.unbind("raphael.anim.frame."+this.id),this},Ye.prototype.delay=function(e){var s=new Ye(this.anim,this.ms);return s.times=this.times,s.del=+e||0,s},Ye.prototype.repeat=function(e){var s=new Ye(this.anim,this.ms);return s.del=this.del,s.times=ve.floor(Se(e,0))||1,s},d.animation=function(e,s,o,c){if(e instanceof Ye)return e;!d.is(o,"function")&&o||(c=c||o||null,o=null),e=Object(e),s=+s||0;var m,C,A={};for(C in e)e[E](C)&&h(C)!=C&&h(C)+"%"!=C&&(m=!0,A[C]=e[C]);if(m)return o&&(A.easing=o),c&&(A.callback=c),new Ye({100:A},s);if(c){var S=0;for(var R in e){var F=g(R);e[E](R)&&F>S&&(S=F)}!e[S+="%"].callback&&(e[S].callback=c)}return new Ye(e,s)},Ie.animate=function(e,s,o,c){if(this.removed)return c&&c.call(this),this;var m=e instanceof Ye?e:d.animation(e,s,o,c);return At(m,this,m.percents[0],null,this.attr()),this},Ie.setTime=function(e,s){return e&&s!=null&&this.status(e,W(s,e.ms)/e.ms),this},Ie.status=function(e,s){var o,c,m=[],C=0;if(s!=null)return At(e,this,-1,W(s,1)),this;for(o=Me.length;C<o;C++)if((c=Me[C]).el.id==this.id&&(!e||c.anim==e)){if(e)return c.status;m.push({anim:c.anim,status:c.status})}return e?0:m},Ie.pause=function(e){for(var s=0;s<Me.length;s++)Me[s].el.id!=this.id||e&&Me[s].anim!=e||u("raphael.anim.pause."+this.id,this,Me[s].anim)!==!1&&(Me[s].paused=!0);return this},Ie.resume=function(e){for(var s=0;s<Me.length;s++)if(Me[s].el.id==this.id&&(!e||Me[s].anim==e)){var o=Me[s];u("raphael.anim.resume."+this.id,this,o.anim)!==!1&&(delete o.paused,this.status(o.anim,o.status))}return this},Ie.stop=function(e){for(var s=0;s<Me.length;s++)Me[s].el.id!=this.id||e&&Me[s].anim!=e||u("raphael.anim.stop."+this.id,this,Me[s].anim)!==!1&&Me.splice(s--,1);return this},u.on("raphael.remove",l1),u.on("raphael.clear",l1),Ie.toString=function(){return"Rapha├лlтАЩs object"};var c1,u1,it,h1,Pt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var s=0,o=e.length;s<o;s++)!e[s]||e[s].constructor!=Ie.constructor&&e[s].constructor!=Pt||(this[this.items.length]=this.items[this.items.length]=e[s],this.length++)},Oe=Pt.prototype;for(var Yt in Oe.push=function(){for(var e,s,o=0,c=arguments.length;o<c;o++)!(e=arguments[o])||e.constructor!=Ie.constructor&&e.constructor!=Pt||(this[s=this.items.length]=this.items[s]=e,this.length++);return this},Oe.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Oe.forEach=function(e,s){for(var o=0,c=this.items.length;o<c;o++)if(e.call(s,this.items[o],o)===!1)return this;return this},Ie)Ie[E](Yt)&&(Oe[Yt]=function(e){return function(){var s=arguments;return this.forEach(function(o){o[e][U](o,s)})}}(Yt));return Oe.attr=function(e,s){if(e&&d.is(e,i)&&d.is(e[0],"object"))for(var o=0,c=e.length;o<c;o++)this.items[o].attr(e[o]);else for(var m=0,C=this.items.length;m<C;m++)this.items[m].attr(e,s);return this},Oe.clear=function(){for(;this.length;)this.pop()},Oe.splice=function(e,s,o){e=e<0?Se(this.length+e,0):e,s=Se(0,W(this.length-e,s));var c,m=[],C=[],A=[];for(c=2;c<arguments.length;c++)A.push(arguments[c]);for(c=0;c<s;c++)C.push(this[e+c]);for(;c<this.length-e;c++)m.push(this[e+c]);var S=A.length;for(c=0;c<S+m.length;c++)this.items[e+c]=this[e+c]=c<S?A[c]:m[c-S];for(c=this.items.length=this.length-=s-S;this[c];)delete this[c++];return new Pt(C)},Oe.exclude=function(e){for(var s=0,o=this.length;s<o;s++)if(this[s]==e)return this.splice(s,1),!0},Oe.animate=function(e,s,o,c){(d.is(o,"function")||!o)&&(c=o||null);var m,C,A=this.items.length,S=A,R=this;if(!A)return this;c&&(C=function(){!--A&&c.call(R)}),o=d.is(o,"string")?o:C;var F=d.animation(e,s,o,C);for(m=this.items[--S].animate(F);S--;)this.items[S]&&!this.items[S].removed&&this.items[S].animateWith(m,F,F),this.items[S]&&!this.items[S].removed||A--;return this},Oe.insertAfter=function(e){for(var s=this.items.length;s--;)this.items[s].insertAfter(e);return this},Oe.getBBox=function(){for(var e=[],s=[],o=[],c=[],m=this.items.length;m--;)if(!this.items[m].removed){var C=this.items[m].getBBox();e.push(C.x),s.push(C.y),o.push(C.x+C.width),c.push(C.y+C.height)}return{x:e=W[U](0,e),y:s=W[U](0,s),x2:o=Se[U](0,o),y2:c=Se[U](0,c),width:o-e,height:c-s}},Oe.clone=function(e){e=this.paper.set();for(var s=0,o=this.items.length;s<o;s++)e.push(this.items[s].clone());return e},Oe.toString=function(){return"Rapha├лlтАШs set"},Oe.glow=function(e){var s=this.paper.set();return this.forEach(function(o,c){var m=o.glow(e);m!=null&&m.forEach(function(C,A){s.push(C)})}),s},Oe.isPointInside=function(e,s){var o=!1;return this.forEach(function(c){if(c.isPointInside(e,s))return o=!0,!1}),o},d.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var s={w:e.w,face:{},glyphs:{}},o=e.face["font-family"];for(var c in e.face)e.face[E](c)&&(s.face[c]=e.face[c]);if(this.fonts[o]?this.fonts[o].push(s):this.fonts[o]=[s],!e.svg){for(var m in s.face["units-per-em"]=g(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[E](m)){var C=e.glyphs[m];if(s.glyphs[m]={w:C.w,k:{},d:C.d&&"M"+C.d.replace(/[mlcxtrv]/g,function(S){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[S]||"M"})+"z"},C.k)for(var A in C.k)C[E](A)&&(s.glyphs[m].k[A]=C.k[A])}}return e},B.getFont=function(e,s,o,c){if(c=c||"normal",o=o||"normal",s=+s||{normal:400,bold:700,lighter:300,bolder:800}[s]||400,d.fonts){var m,C=d.fonts[e];if(!C){var A=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,he)+"(\\s|$)","i");for(var S in d.fonts)if(d.fonts[E](S)&&A.test(S)){C=d.fonts[S];break}}if(C)for(var R=0,F=C.length;R<F&&((m=C[R]).face["font-weight"]!=s||m.face["font-style"]!=o&&m.face["font-style"]||m.face["font-stretch"]!=c);R++);return m}},B.print=function(e,s,o,c,m,C,A,S){C=C||"middle",A=Se(W(A||0,1),-1),S=Se(W(S||1,3),1);var R,F=G(o)[pe](he),J=0,ie=0,Z=he;if(d.is(c,"string")&&(c=this.getFont(c)),c){R=(m||16)/c.face["units-per-em"];for(var Y=c.face.bbox[pe](H),ne=+Y[0],le=Y[3]-Y[1],re=0,Q=+Y[1]+(C=="baseline"?le+ +c.face.descent:le/2),ke=0,ce=F.length;ke<ce;ke++){if(F[ke]==`
`)J=0,ue=0,ie=0,re+=le*S;else{var me=ie&&c.glyphs[F[ke-1]]||{},ue=c.glyphs[F[ke]];J+=ie?(me.w||c.w)+(me.k&&me.k[F[ke]]||0)+c.w*A:0,ie=1}ue&&ue.d&&(Z+=d.transformPath(ue.d,["t",J*R,re*R,"s",R,R,ne,Q,"t",(e-ne)/R,(s-Q)/R]))}}return this.path(Z).attr({fill:"#000",stroke:"none"})},B.add=function(e){if(d.is(e,"array"))for(var s,o=this.set(),c=0,m=e.length;c<m;c++)s=e[c]||{},q[E](s.type)&&o.push(this[s.type]().attr(s));return o},d.format=function(e,s){var o=d.is(s,i)?[0][V](s):arguments;return e&&d.is(e,"string")&&o.length-1&&(e=e.replace(D,function(c,m){return o[++m]==null?he:o[m]})),e||he},d.fullfill=(c1=/\{([^\}]+)\}/g,u1=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,s){return String(e).replace(c1,function(o,c){return function(m,C,A){var S=A;return C.replace(u1,function(R,F,J,ie,Z){F=F||ie,S&&(F in S&&(S=S[F]),typeof S=="function"&&Z&&(S=S()))}),S=(S==null||S==A?m:S)+""}(o,c,s)})}),d.ninja=function(){if(j.was)O.win.Raphael=j.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return d},d.st=Oe,u.on("raphael.DOMload",function(){w=!0}),(it=document).readyState==null&&it.addEventListener&&(it.addEventListener("DOMContentLoaded",h1=function(){it.removeEventListener("DOMContentLoaded",h1,!1),it.readyState="complete"},!1),it.readyState="loading"),function e(){/in/.test(it.readyState)?setTimeout(e,9):d.eve("raphael.DOMload")}(),d}.apply(b,f))===void 0||(M.exports=N)},function(M,b,P){var f,N;f=[P(0),P(3),P(4)],(N=function(u){return u}.apply(b,f))===void 0||(M.exports=N)},function(M,b,P){var f,N,u,d,w,B,H,q,D,E,O,j,te,U;d="hasOwnProperty",w=/[\.\/]/,B=/\s*,\s*/,H=function(V,oe){return V-oe},q={n:{}},D=function(){for(var V=0,oe=this.length;V<oe;V++)if(this[V]!==void 0)return this[V]},E=function(){for(var V=this.length;--V;)if(this[V]!==void 0)return this[V]},O=Object.prototype.toString,j=String,te=Array.isArray||function(V){return V instanceof Array||O.call(V)=="[object Array]"},(U=function(V,oe){var he,ge=u,G=Array.prototype.slice.call(arguments,2),pe=U.listeners(V),de=0,z=[],ye={},ve=[],Se=N;ve.firstDefined=D,ve.lastDefined=E,N=V,u=0;for(var W=0,Ce=pe.length;W<Ce;W++)"zIndex"in pe[W]&&(z.push(pe[W].zIndex),pe[W].zIndex<0&&(ye[pe[W].zIndex]=pe[W]));for(z.sort(H);z[de]<0;)if(he=ye[z[de++]],ve.push(he.apply(oe,G)),u)return u=ge,ve;for(W=0;W<Ce;W++)if("zIndex"in(he=pe[W]))if(he.zIndex==z[de]){if(ve.push(he.apply(oe,G)),u)break;do if((he=ye[z[++de]])&&ve.push(he.apply(oe,G)),u)break;while(he)}else ye[he.zIndex]=he;else if(ve.push(he.apply(oe,G)),u)break;return u=ge,N=Se,ve})._events=q,U.listeners=function(V){var oe,he,ge,G,pe,de,z,ye,ve=te(V)?V:V.split(w),Se=q,W=[Se],Ce=[];for(G=0,pe=ve.length;G<pe;G++){for(ye=[],de=0,z=W.length;de<z;de++)for(he=[(Se=W[de].n)[ve[G]],Se["*"]],ge=2;ge--;)(oe=he[ge])&&(ye.push(oe),Ce=Ce.concat(oe.f||[]));W=ye}return Ce},U.separator=function(V){V?(V="["+(V=j(V).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",w=new RegExp(V)):w=/[\.\/]/},U.on=function(V,oe){if(typeof oe!="function")return function(){};for(var he=te(V)?te(V[0])?V:[V]:j(V).split(B),ge=0,G=he.length;ge<G;ge++)(function(pe){for(var de,z=te(pe)?pe:j(pe).split(w),ye=q,ve=0,Se=z.length;ve<Se;ve++)ye=(ye=ye.n).hasOwnProperty(z[ve])&&ye[z[ve]]||(ye[z[ve]]={n:{}});for(ye.f=ye.f||[],ve=0,Se=ye.f.length;ve<Se;ve++)if(ye.f[ve]==oe){de=!0;break}!de&&ye.f.push(oe)})(he[ge]);return function(pe){+pe==+pe&&(oe.zIndex=+pe)}},U.f=function(V){var oe=[].slice.call(arguments,1);return function(){U.apply(null,[V,null].concat(oe).concat([].slice.call(arguments,0)))}},U.stop=function(){u=1},U.nt=function(V){var oe=te(N)?N.join("."):N;return V?new RegExp("(?:\\.|\\/|^)"+V+"(?:\\.|\\/|$)").test(oe):oe},U.nts=function(){return te(N)?N:N.split(w)},U.off=U.unbind=function(V,oe){if(V){var he=te(V)?te(V[0])?V:[V]:j(V).split(B);if(he.length>1)for(var ge=0,G=he.length;ge<G;ge++)U.off(he[ge],oe);else{he=te(V)?V:j(V).split(w);var pe,de,z,ye,ve,Se=[q];for(ge=0,G=he.length;ge<G;ge++)for(ye=0;ye<Se.length;ye+=z.length-2){if(z=[ye,1],pe=Se[ye].n,he[ge]!="*")pe[he[ge]]&&z.push(pe[he[ge]]);else for(de in pe)pe[d](de)&&z.push(pe[de]);Se.splice.apply(Se,z)}for(ge=0,G=Se.length;ge<G;ge++)for(pe=Se[ge];pe.n;){if(oe){if(pe.f){for(ye=0,ve=pe.f.length;ye<ve;ye++)if(pe.f[ye]==oe){pe.f.splice(ye,1);break}!pe.f.length&&delete pe.f}for(de in pe.n)if(pe.n[d](de)&&pe.n[de].f){var W=pe.n[de].f;for(ye=0,ve=W.length;ye<ve;ye++)if(W[ye]==oe){W.splice(ye,1);break}!W.length&&delete pe.n[de].f}}else for(de in delete pe.f,pe.n)pe.n[d](de)&&pe.n[de].f&&delete pe.n[de].f;pe=pe.n}}}else U._events=q={n:{}}},U.once=function(V,oe){var he=function(){return U.off(V,he),oe.apply(this,arguments)};return U.on(V,he)},U.version="0.5.0",U.toString=function(){return"You are running Eve 0.5.0"},M.exports?M.exports=U:(f=function(){return U}.apply(b,[]))===void 0||(M.exports=f)},function(M,b,P){var f,N;f=[P(0)],(N=function(u){if(!u||u.svg){var d="hasOwnProperty",w=String,B=parseFloat,H=parseInt,q=Math,D=q.max,E=q.abs,O=q.pow,j=/[, ]+/,te=u.eve,U="",V=" ",oe="http://www.w3.org/1999/xlink",he={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},ge={};u.toString=function(){return`Your browser supports SVG.
You are running Rapha├лl `+this.version};var G=function(n,t){if(t)for(var r in typeof n=="string"&&(n=G(n)),t)t[d](r)&&(r.substring(0,6)=="xlink:"?n.setAttributeNS(oe,r.substring(6),w(t[r])):n.setAttribute(r,w(t[r])));else(n=u._g.doc.createElementNS("http://www.w3.org/2000/svg",n)).style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},pe=function(n,t){var r="linear",a=n.id+t,h=.5,g=.5,v=n.node,L=n.paper,k=v.style,I=u._g.doc.getElementById(a);if(!I){if(t=(t=w(t).replace(u._radial_gradient,function(_e,xe,we){if(r="radial",xe&&we){h=B(xe);var Ne=2*((g=B(we))>.5)-1;O(h-.5,2)+O(g-.5,2)>.25&&(g=q.sqrt(.25-O(h-.5,2))*Ne+.5)&&g!=.5&&(g=g.toFixed(5)-1e-5*Ne)}return U})).split(/\s*\-\s*/),r=="linear"){var $=t.shift();if($=-B($),isNaN($))return null;var K=[0,0,q.cos(u.rad($)),q.sin(u.rad($))],se=1/(D(E(K[2]),E(K[3]))||1);K[2]*=se,K[3]*=se,K[2]<0&&(K[0]=-K[2],K[2]=0),K[3]<0&&(K[1]=-K[3],K[3]=0)}var ae=u._parseDots(t);if(!ae)return null;if(a=a.replace(/[\(\)\s,\xb0#]/g,"_"),n.gradient&&a!=n.gradient.id&&(L.defs.removeChild(n.gradient),delete n.gradient),!n.gradient){I=G(r+"Gradient",{id:a}),n.gradient=I,G(I,r=="radial"?{fx:h,fy:g}:{x1:K[0],y1:K[1],x2:K[2],y2:K[3],gradientTransform:n.matrix.invert()}),L.defs.appendChild(I);for(var fe=0,be=ae.length;fe<be;fe++)I.appendChild(G("stop",{offset:ae[fe].offset?ae[fe].offset:fe?"100%":"0%","stop-color":ae[fe].color||"#fff","stop-opacity":isFinite(ae[fe].opacity)?ae[fe].opacity:1}))}}return G(v,{fill:de(a),opacity:1,"fill-opacity":1}),k.fill=U,k.opacity=1,k.fillOpacity=1,1},de=function(n){if((t=document.documentMode)&&(t===9||t===10))return"url('#"+n+"')";var t,r=document.location;return"url('"+(r.protocol+"//"+r.host+r.pathname+r.search)+"#"+n+"')"},z=function(n){var t=n.getBBox(1);G(n.pattern,{patternTransform:n.matrix.invert()+" translate("+t.x+","+t.y+")"})},ye=function(n,t,r){if(n.type=="path"){for(var a,h,g,v,L,k=w(t).toLowerCase().split("-"),I=n.paper,$=r?"end":"start",K=n.node,se=n.attrs,ae=se["stroke-width"],fe=k.length,be="classic",_e=3,xe=3,we=5;fe--;)switch(k[fe]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":be=k[fe];break;case"wide":xe=5;break;case"narrow":xe=2;break;case"long":_e=5;break;case"short":_e=2}if(be=="open"?(_e+=2,xe+=2,we+=2,g=1,v=r?4:1,L={fill:"none",stroke:se.stroke}):(v=g=_e/2,L={fill:se.stroke,stroke:"none"}),n._.arrows?r?(n._.arrows.endPath&&ge[n._.arrows.endPath]--,n._.arrows.endMarker&&ge[n._.arrows.endMarker]--):(n._.arrows.startPath&&ge[n._.arrows.startPath]--,n._.arrows.startMarker&&ge[n._.arrows.startMarker]--):n._.arrows={},be!="none"){var Ne="raphael-marker-"+be,Be="raphael-marker-"+$+be+_e+xe+"-obj"+n.id;u._g.doc.getElementById(Ne)?ge[Ne]++:(I.defs.appendChild(G(G("path"),{"stroke-linecap":"round",d:he[be],id:Ne})),ge[Ne]=1);var Te,Le=u._g.doc.getElementById(Be);Le?(ge[Be]++,Te=Le.getElementsByTagName("use")[0]):(Le=G(G("marker"),{id:Be,markerHeight:xe,markerWidth:_e,orient:"auto",refX:v,refY:xe/2}),Te=G(G("use"),{"xlink:href":"#"+Ne,transform:(r?"rotate(180 "+_e/2+" "+xe/2+") ":U)+"scale("+_e/we+","+xe/we+")","stroke-width":(1/((_e/we+xe/we)/2)).toFixed(4)}),Le.appendChild(Te),I.defs.appendChild(Le),ge[Be]=1),G(Te,L);var qe=g*(be!="diamond"&&be!="oval");r?(a=n._.arrows.startdx*ae||0,h=u.getTotalLength(se.path)-qe*ae):(a=qe*ae,h=u.getTotalLength(se.path)-(n._.arrows.enddx*ae||0)),(L={})["marker-"+$]="url(#"+Be+")",(h||a)&&(L.d=u.getSubpath(se.path,a,h)),G(K,L),n._.arrows[$+"Path"]=Ne,n._.arrows[$+"Marker"]=Be,n._.arrows[$+"dx"]=qe,n._.arrows[$+"Type"]=be,n._.arrows[$+"String"]=t}else r?(a=n._.arrows.startdx*ae||0,h=u.getTotalLength(se.path)-a):(a=0,h=u.getTotalLength(se.path)-(n._.arrows.enddx*ae||0)),n._.arrows[$+"Path"]&&G(K,{d:u.getSubpath(se.path,a,h)}),delete n._.arrows[$+"Path"],delete n._.arrows[$+"Marker"],delete n._.arrows[$+"dx"],delete n._.arrows[$+"Type"],delete n._.arrows[$+"String"];for(L in ge)if(ge[d](L)&&!ge[L]){var ze=u._g.doc.getElementById(L);ze&&ze.parentNode.removeChild(ze)}}},ve={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},Se=function(n,t,r){if(t=ve[w(t).toLowerCase()]){for(var a=n.attrs["stroke-width"]||"1",h={round:a,square:a,butt:0}[n.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,g=[],v=t.length;v--;)g[v]=t[v]*a+(v%2?1:-1)*h;G(n.node,{"stroke-dasharray":g.join(",")})}else G(n.node,{"stroke-dasharray":"none"})},W=function(n,t){var r=n.node,a=n.attrs,h=r.style.visibility;for(var g in r.style.visibility="hidden",t)if(t[d](g)){if(!u._availableAttrs[d](g))continue;var v=t[g];switch(a[g]=v,g){case"blur":n.blur(v);break;case"title":var L=r.getElementsByTagName("title");if(L.length&&(L=L[0]))L.firstChild.nodeValue=v;else{L=G("title");var k=u._g.doc.createTextNode(v);L.appendChild(k),r.appendChild(L)}break;case"href":case"target":var I=r.parentNode;if(I.tagName.toLowerCase()!="a"){var $=G("a");I.insertBefore($,r),$.appendChild(r),I=$}g=="target"?I.setAttributeNS(oe,"show",v=="blank"?"new":v):I.setAttributeNS(oe,g,v);break;case"cursor":r.style.cursor=v;break;case"transform":n.transform(v);break;case"arrow-start":ye(n,v);break;case"arrow-end":ye(n,v,1);break;case"clip-rect":var K=w(v).split(j);if(K.length==4){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var se=G("clipPath"),ae=G("rect");se.id=u.createUUID(),G(ae,{x:K[0],y:K[1],width:K[2],height:K[3]}),se.appendChild(ae),n.paper.defs.appendChild(se),G(r,{"clip-path":"url(#"+se.id+")"}),n.clip=ae}if(!v){var fe=r.getAttribute("clip-path");if(fe){var be=u._g.doc.getElementById(fe.replace(/(^url\(#|\)$)/g,U));be&&be.parentNode.removeChild(be),G(r,{"clip-path":U}),delete n.clip}}break;case"path":n.type=="path"&&(G(r,{d:v?a.path=u._pathToAbsolute(v):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&ye(n,n._.arrows.startString),"endString"in n._.arrows&&ye(n,n._.arrows.endString,1)));break;case"width":if(r.setAttribute(g,v),n._.dirty=1,!a.fx)break;g="x",v=a.x;case"x":a.fx&&(v=-a.x-(a.width||0));case"rx":if(g=="rx"&&n.type=="rect")break;case"cx":r.setAttribute(g,v),n.pattern&&z(n),n._.dirty=1;break;case"height":if(r.setAttribute(g,v),n._.dirty=1,!a.fy)break;g="y",v=a.y;case"y":a.fy&&(v=-a.y-(a.height||0));case"ry":if(g=="ry"&&n.type=="rect")break;case"cy":r.setAttribute(g,v),n.pattern&&z(n),n._.dirty=1;break;case"r":n.type=="rect"?G(r,{rx:v,ry:v}):r.setAttribute(g,v),n._.dirty=1;break;case"src":n.type=="image"&&r.setAttributeNS(oe,"href",v);break;case"stroke-width":n._.sx==1&&n._.sy==1||(v/=D(E(n._.sx),E(n._.sy))||1),r.setAttribute(g,v),a["stroke-dasharray"]&&Se(n,a["stroke-dasharray"],t),n._.arrows&&("startString"in n._.arrows&&ye(n,n._.arrows.startString),"endString"in n._.arrows&&ye(n,n._.arrows.endString,1));break;case"stroke-dasharray":Se(n,v,t);break;case"fill":var _e=w(v).match(u._ISURL);if(_e){se=G("pattern");var xe=G("image");se.id=u.createUUID(),G(se,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),G(xe,{x:0,y:0,"xlink:href":_e[1]}),se.appendChild(xe),function(Le){u._preload(_e[1],function(){var qe=this.offsetWidth,ze=this.offsetHeight;G(Le,{width:qe,height:ze}),G(xe,{width:qe,height:ze})})}(se),n.paper.defs.appendChild(se),G(r,{fill:"url(#"+se.id+")"}),n.pattern=se,n.pattern&&z(n);break}var we=u.getRGB(v);if(we.error){if((n.type=="circle"||n.type=="ellipse"||w(v).charAt()!="r")&&pe(n,v)){if("opacity"in a||"fill-opacity"in a){var Ne=u._g.doc.getElementById(r.getAttribute("fill").replace(/^url\(#|\)$/g,U));if(Ne){var Be=Ne.getElementsByTagName("stop");G(Be[Be.length-1],{"stop-opacity":("opacity"in a?a.opacity:1)*("fill-opacity"in a?a["fill-opacity"]:1)})}}a.gradient=v,a.fill="none";break}}else delete t.gradient,delete a.gradient,!u.is(a.opacity,"undefined")&&u.is(t.opacity,"undefined")&&G(r,{opacity:a.opacity}),!u.is(a["fill-opacity"],"undefined")&&u.is(t["fill-opacity"],"undefined")&&G(r,{"fill-opacity":a["fill-opacity"]});we[d]("opacity")&&G(r,{"fill-opacity":we.opacity>1?we.opacity/100:we.opacity});case"stroke":we=u.getRGB(v),r.setAttribute(g,we.hex),g=="stroke"&&we[d]("opacity")&&G(r,{"stroke-opacity":we.opacity>1?we.opacity/100:we.opacity}),g=="stroke"&&n._.arrows&&("startString"in n._.arrows&&ye(n,n._.arrows.startString),"endString"in n._.arrows&&ye(n,n._.arrows.endString,1));break;case"gradient":(n.type=="circle"||n.type=="ellipse"||w(v).charAt()!="r")&&pe(n,v);break;case"opacity":a.gradient&&!a[d]("stroke-opacity")&&G(r,{"stroke-opacity":v>1?v/100:v});case"fill-opacity":if(a.gradient){(Ne=u._g.doc.getElementById(r.getAttribute("fill").replace(/^url\(#|\)$/g,U)))&&(Be=Ne.getElementsByTagName("stop"),G(Be[Be.length-1],{"stop-opacity":v}));break}default:g=="font-size"&&(v=H(v,10)+"px");var Te=g.replace(/(\-.)/g,function(Le){return Le.substring(1).toUpperCase()});r.style[Te]=v,n._.dirty=1,r.setAttribute(g,v)}}Ce(n,t),r.style.visibility=h},Ce=function(n,t){if(n.type=="text"&&(t[d]("text")||t[d]("font")||t[d]("font-size")||t[d]("x")||t[d]("y"))){var r=n.attrs,a=n.node,h=a.firstChild?H(u._g.doc.defaultView.getComputedStyle(a.firstChild,U).getPropertyValue("font-size"),10):10;if(t[d]("text")){for(r.text=t.text;a.firstChild;)a.removeChild(a.firstChild);for(var g,v=w(t.text).split(`
`),L=[],k=0,I=v.length;k<I;k++)g=G("tspan"),k&&G(g,{dy:1.2*h,x:r.x}),g.appendChild(u._g.doc.createTextNode(v[k])),a.appendChild(g),L[k]=g}else for(k=0,I=(L=a.getElementsByTagName("tspan")).length;k<I;k++)k?G(L[k],{dy:1.2*h,x:r.x}):G(L[0],{dy:0});G(a,{x:r.x,y:r.y}),n._.dirty=1;var $=n._getBBox(),K=r.y-($.y+$.height/2);K&&u.is(K,"finite")&&G(L[0],{dy:K})}},Ae=function(n){return n.parentNode&&n.parentNode.tagName.toLowerCase()==="a"?n.parentNode:n},ee=function(n,t){this[0]=this.node=n,n.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),n.raphaelid=this.id,this.matrix=u.matrix(),this.realPath=null,this.paper=t,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null},X=u.el;ee.prototype=X,X.constructor=ee,u._engine.path=function(n,t){var r=G("path");t.canvas&&t.canvas.appendChild(r);var a=new ee(r,t);return a.type="path",W(a,{fill:"none",stroke:"#000",path:n}),a},X.rotate=function(n,t,r){if(this.removed)return this;if((n=w(n).split(j)).length-1&&(t=B(n[1]),r=B(n[2])),n=B(n[0]),r==null&&(t=r),t==null||r==null){var a=this.getBBox(1);t=a.x+a.width/2,r=a.y+a.height/2}return this.transform(this._.transform.concat([["r",n,t,r]])),this},X.scale=function(n,t,r,a){if(this.removed)return this;if((n=w(n).split(j)).length-1&&(t=B(n[1]),r=B(n[2]),a=B(n[3])),n=B(n[0]),t==null&&(t=n),a==null&&(r=a),r==null||a==null)var h=this.getBBox(1);return r=r==null?h.x+h.width/2:r,a=a==null?h.y+h.height/2:a,this.transform(this._.transform.concat([["s",n,t,r,a]])),this},X.translate=function(n,t){return this.removed?this:((n=w(n).split(j)).length-1&&(t=B(n[1])),n=B(n[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",n,t]])),this)},X.transform=function(n){var t=this._;if(n==null)return t.transform;if(u._extractTransform(this,n),this.clip&&G(this.clip,{transform:this.matrix.invert()}),this.pattern&&z(this),this.node&&G(this.node,{transform:this.matrix}),t.sx!=1||t.sy!=1){var r=this.attrs[d]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},X.hide=function(){return this.removed||(this.node.style.display="none"),this},X.show=function(){return this.removed||(this.node.style.display=""),this},X.remove=function(){var n=Ae(this.node);if(!this.removed&&n.parentNode){var t=this.paper;for(var r in t.__set__&&t.__set__.exclude(this),te.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),u._tear(this,t),n.parentNode.removeChild(n),this.removeData(),this)this[r]=typeof this[r]=="function"?u._removedFactory(r):null;this.removed=!0}},X._getBBox=function(){if(this.node.style.display=="none"){this.show();var n=!0}var t,r=!1;this.paper.canvas.parentElement?t=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(t=this.paper.canvas.parentNode.style),t&&t.display=="none"&&(r=!0,t.display="");var a={};try{a=this.node.getBBox()}catch(h){a={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{a=a||{},r&&(t.display="none")}return n&&this.hide(),a},X.attr=function(n,t){if(this.removed)return this;if(n==null){var r={};for(var a in this.attrs)this.attrs[d](a)&&(r[a]=this.attrs[a]);return r.gradient&&r.fill=="none"&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(t==null&&u.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(n=="transform")return this._.transform;for(var h=n.split(j),g={},v=0,L=h.length;v<L;v++)(n=h[v])in this.attrs?g[n]=this.attrs[n]:u.is(this.paper.customAttributes[n],"function")?g[n]=this.paper.customAttributes[n].def:g[n]=u._availableAttrs[n];return L-1?g:g[h[0]]}if(t==null&&u.is(n,"array")){for(g={},v=0,L=n.length;v<L;v++)g[n[v]]=this.attr(n[v]);return g}if(t!=null){var k={};k[n]=t}else n!=null&&u.is(n,"object")&&(k=n);for(var I in k)te("raphael.attr."+I+"."+this.id,this,k[I]);for(I in this.paper.customAttributes)if(this.paper.customAttributes[d](I)&&k[d](I)&&u.is(this.paper.customAttributes[I],"function")){var $=this.paper.customAttributes[I].apply(this,[].concat(k[I]));for(var K in this.attrs[I]=k[I],$)$[d](K)&&(k[K]=$[K])}return W(this,k),this},X.toFront=function(){if(this.removed)return this;var n=Ae(this.node);n.parentNode.appendChild(n);var t=this.paper;return t.top!=this&&u._tofront(this,t),this},X.toBack=function(){if(this.removed)return this;var n=Ae(this.node),t=n.parentNode;return t.insertBefore(n,t.firstChild),u._toback(this,this.paper),this.paper,this},X.insertAfter=function(n){if(this.removed||!n)return this;var t=Ae(this.node),r=Ae(n.node||n[n.length-1].node);return r.nextSibling?r.parentNode.insertBefore(t,r.nextSibling):r.parentNode.appendChild(t),u._insertafter(this,n,this.paper),this},X.insertBefore=function(n){if(this.removed||!n)return this;var t=Ae(this.node),r=Ae(n.node||n[0].node);return r.parentNode.insertBefore(t,r),u._insertbefore(this,n,this.paper),this},X.blur=function(n){var t=this;if(+n!=0){var r=G("filter"),a=G("feGaussianBlur");t.attrs.blur=n,r.id=u.createUUID(),G(a,{stdDeviation:+n||1.5}),r.appendChild(a),t.paper.defs.appendChild(r),t._blur=r,G(t.node,{filter:"url(#"+r.id+")"})}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter");return t},u._engine.circle=function(n,t,r,a){var h=G("circle");n.canvas&&n.canvas.appendChild(h);var g=new ee(h,n);return g.attrs={cx:t,cy:r,r:a,fill:"none",stroke:"#000"},g.type="circle",G(h,g.attrs),g},u._engine.rect=function(n,t,r,a,h,g){var v=G("rect");n.canvas&&n.canvas.appendChild(v);var L=new ee(v,n);return L.attrs={x:t,y:r,width:a,height:h,rx:g||0,ry:g||0,fill:"none",stroke:"#000"},L.type="rect",G(v,L.attrs),L},u._engine.ellipse=function(n,t,r,a,h){var g=G("ellipse");n.canvas&&n.canvas.appendChild(g);var v=new ee(g,n);return v.attrs={cx:t,cy:r,rx:a,ry:h,fill:"none",stroke:"#000"},v.type="ellipse",G(g,v.attrs),v},u._engine.image=function(n,t,r,a,h,g){var v=G("image");G(v,{x:r,y:a,width:h,height:g,preserveAspectRatio:"none"}),v.setAttributeNS(oe,"href",t),n.canvas&&n.canvas.appendChild(v);var L=new ee(v,n);return L.attrs={x:r,y:a,width:h,height:g,src:t},L.type="image",L},u._engine.text=function(n,t,r,a){var h=G("text");n.canvas&&n.canvas.appendChild(h);var g=new ee(h,n);return g.attrs={x:t,y:r,"text-anchor":"middle",text:a,"font-family":u._availableAttrs["font-family"],"font-size":u._availableAttrs["font-size"],stroke:"none",fill:"#000"},g.type="text",W(g,g.attrs),g},u._engine.setSize=function(n,t){return this.width=n||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},u._engine.create=function(){var n=u._getContainer.apply(0,arguments),t=n&&n.container;if(!t)throw new Error("SVG container not found.");var r,a=n.x,h=n.y,g=n.width,v=n.height,L=G("svg"),k="overflow:hidden;";return a=a||0,h=h||0,G(L,{height:v=v||342,version:1.1,width:g=g||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),t==1?(L.style.cssText=k+"position:absolute;left:"+a+"px;top:"+h+"px",u._g.doc.body.appendChild(L),r=1):(L.style.cssText=k+"position:relative",t.firstChild?t.insertBefore(L,t.firstChild):t.appendChild(L)),(t=new u._Paper).width=g,t.height=v,t.canvas=L,t.clear(),t._left=t._top=0,r&&(t.renderfix=function(){}),t.renderfix(),t},u._engine.setViewBox=function(n,t,r,a,h){te("raphael.setViewBox",this,this._viewBox,[n,t,r,a,h]);var g,v,L=this.getSize(),k=D(r/L.width,a/L.height),I=this.top,$=h?"xMidYMid meet":"xMinYMin";for(n==null?(this._vbSize&&(k=1),delete this._vbSize,g="0 0 "+this.width+V+this.height):(this._vbSize=k,g=n+V+t+V+r+V+a),G(this.canvas,{viewBox:g,preserveAspectRatio:$});k&&I;)v="stroke-width"in I.attrs?I.attrs["stroke-width"]:1,I.attr({"stroke-width":v}),I._.dirty=1,I._.dirtyT=1,I=I.prev;return this._viewBox=[n,t,r,a,!!h],this},u.prototype.renderfix=function(){var n,t=this.canvas,r=t.style;try{n=t.getScreenCTM()||t.createSVGMatrix()}catch(g){n=t.createSVGMatrix()}var a=-n.e%1,h=-n.f%1;(a||h)&&(a&&(this._left=(this._left+a)%1,r.left=this._left+"px"),h&&(this._top=(this._top+h)%1,r.top=this._top+"px"))},u.prototype.clear=function(){u.eve("raphael.clear",this);for(var n=this.canvas;n.firstChild;)n.removeChild(n.firstChild);this.bottom=this.top=null,(this.desc=G("desc")).appendChild(u._g.doc.createTextNode("Created with Rapha├лl "+u.version)),n.appendChild(this.desc),n.appendChild(this.defs=G("defs"))},u.prototype.remove=function(){for(var n in te("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[n]=typeof this[n]=="function"?u._removedFactory(n):null};var i=u.st;for(var l in X)X[d](l)&&!i[d](l)&&(i[l]=function(n){return function(){var t=arguments;return this.forEach(function(r){r[n].apply(r,t)})}}(l))}}.apply(b,f))===void 0||(M.exports=N)},function(M,b,P){var f,N;f=[P(0)],(N=function(u){if(!u||u.vml){var d="hasOwnProperty",w=String,B=parseFloat,H=Math,q=H.round,D=H.max,E=H.min,O=H.abs,j=/[, ]+/,te=u.eve,U=" ",V="",oe={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},he=/([clmz]),?([^clmz]*)/gi,ge=/ progid:\S+Blur\([^\)]+\)/g,G=/-?[^,\s-]+/g,pe="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",de=21600,z={path:1,rect:1,image:1},ye={circle:1,ellipse:1},ve=function(t,r,a){var h=u.matrix();return h.rotate(-t,.5,.5),{dx:h.x(r,a),dy:h.y(r,a)}},Se=function(t,r,a,h,g,v){var L=t._,k=t.matrix,I=L.fillpos,$=t.node,K=$.style,se=1,ae="",fe=de/r,be=de/a;if(K.visibility="hidden",r&&a){if($.coordsize=O(fe)+U+O(be),K.rotation=v*(r*a<0?-1:1),v){var _e=ve(v,h,g);h=_e.dx,g=_e.dy}if(r<0&&(ae+="x"),a<0&&(ae+=" y")&&(se=-1),K.flip=ae,$.coordorigin=h*-fe+U+g*-be,I||L.fillsize){var xe=$.getElementsByTagName("fill");xe=xe&&xe[0],$.removeChild(xe),I&&(_e=ve(v,k.x(I[0],I[1]),k.y(I[0],I[1])),xe.position=_e.dx*se+U+_e.dy*se),L.fillsize&&(xe.size=L.fillsize[0]*O(r)+U+L.fillsize[1]*O(a)),$.appendChild(xe)}K.visibility="visible"}};u.toString=function(){return`Your browser doesnтАЩt support SVG. Falling down to VML.
You are running Rapha├лl `+this.version};var W,Ce=function(t,r,a){for(var h=w(r).toLowerCase().split("-"),g=a?"end":"start",v=h.length,L="classic",k="medium",I="medium";v--;)switch(h[v]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":L=h[v];break;case"wide":case"narrow":I=h[v];break;case"long":case"short":k=h[v]}var $=t.node.getElementsByTagName("stroke")[0];$[g+"arrow"]=L,$[g+"arrowlength"]=k,$[g+"arrowwidth"]=I},Ae=function(t,r){t.attrs=t.attrs||{};var a=t.node,h=t.attrs,g=a.style,v=z[t.type]&&(r.x!=h.x||r.y!=h.y||r.width!=h.width||r.height!=h.height||r.cx!=h.cx||r.cy!=h.cy||r.rx!=h.rx||r.ry!=h.ry||r.r!=h.r),L=ye[t.type]&&(h.cx!=r.cx||h.cy!=r.cy||h.r!=r.r||h.rx!=r.rx||h.ry!=r.ry),k=t;for(var I in r)r[d](I)&&(h[I]=r[I]);if(v&&(h.path=u._getPath[t.type](t),t._.dirty=1),r.href&&(a.href=r.href),r.title&&(a.title=r.title),r.target&&(a.target=r.target),r.cursor&&(g.cursor=r.cursor),"blur"in r&&t.blur(r.blur),(r.path&&t.type=="path"||v)&&(a.path=function(Fe){var Ke=/[ahqstv]/gi,ut=u._pathToAbsolute;if(w(Fe).match(Ke)&&(ut=u._path2curve),Ke=/[clmz]/g,ut==u._pathToAbsolute&&!w(Fe).match(Ke)){var je=w(Fe).replace(he,function(Zt,ft,pt){var et=[],Tt=ft.toLowerCase()=="m",rt=oe[ft];return pt.replace(G,function(Mt){Tt&&et.length==2&&(rt+=et+oe[ft=="m"?"l":"L"],et=[]),et.push(q(Mt*de))}),rt+et});return je}var ht,Ge,_t=ut(Fe);je=[];for(var dt=0,kt=_t.length;dt<kt;dt++){ht=_t[dt],(Ge=_t[dt][0].toLowerCase())=="z"&&(Ge="x");for(var Ze=1,Ve=ht.length;Ze<Ve;Ze++)Ge+=q(ht[Ze]*de)+(Ze!=Ve-1?",":V);je.push(Ge)}return je.join(U)}(~w(h.path).toLowerCase().indexOf("r")?u._pathToAbsolute(h.path):h.path),t._.dirty=1,t.type=="image"&&(t._.fillpos=[h.x,h.y],t._.fillsize=[h.width,h.height],Se(t,1,1,0,0,0))),"transform"in r&&t.transform(r.transform),L){var $=+h.cx,K=+h.cy,se=+h.rx||+h.r||0,ae=+h.ry||+h.r||0;a.path=u.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",q(($-se)*de),q((K-ae)*de),q(($+se)*de),q((K+ae)*de),q($*de)),t._.dirty=1}if("clip-rect"in r){var fe=w(r["clip-rect"]).split(j);if(fe.length==4){fe[2]=+fe[2]+ +fe[0],fe[3]=+fe[3]+ +fe[1];var be=a.clipRect||u._g.doc.createElement("div"),_e=be.style;_e.clip=u.format("rect({1}px {2}px {3}px {0}px)",fe),a.clipRect||(_e.position="absolute",_e.top=0,_e.left=0,_e.width=t.paper.width+"px",_e.height=t.paper.height+"px",a.parentNode.insertBefore(be,a),be.appendChild(a),a.clipRect=be)}r["clip-rect"]||a.clipRect&&(a.clipRect.style.clip="auto")}if(t.textpath){var xe=t.textpath.style;r.font&&(xe.font=r.font),r["font-family"]&&(xe.fontFamily='"'+r["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,V)+'"'),r["font-size"]&&(xe.fontSize=r["font-size"]),r["font-weight"]&&(xe.fontWeight=r["font-weight"]),r["font-style"]&&(xe.fontStyle=r["font-style"])}if("arrow-start"in r&&Ce(k,r["arrow-start"]),"arrow-end"in r&&Ce(k,r["arrow-end"],1),r.opacity!=null||r.fill!=null||r.src!=null||r.stroke!=null||r["stroke-width"]!=null||r["stroke-opacity"]!=null||r["fill-opacity"]!=null||r["stroke-dasharray"]!=null||r["stroke-miterlimit"]!=null||r["stroke-linejoin"]!=null||r["stroke-linecap"]!=null){var we=a.getElementsByTagName("fill");if(!(we=we&&we[0])&&(we=W("fill")),t.type=="image"&&r.src&&(we.src=r.src),r.fill&&(we.on=!0),we.on!=null&&r.fill!="none"&&r.fill!==null||(we.on=!1),we.on&&r.fill){var Ne=w(r.fill).match(u._ISURL);if(Ne){we.parentNode==a&&a.removeChild(we),we.rotate=!0,we.src=Ne[1],we.type="tile";var Be=t.getBBox(1);we.position=Be.x+U+Be.y,t._.fillpos=[Be.x,Be.y],u._preload(Ne[1],function(){t._.fillsize=[this.offsetWidth,this.offsetHeight]})}else we.color=u.getRGB(r.fill).hex,we.src=V,we.type="solid",u.getRGB(r.fill).error&&(k.type in{circle:1,ellipse:1}||w(r.fill).charAt()!="r")&&ee(k,r.fill,we)&&(h.fill="none",h.gradient=r.fill,we.rotate=!1)}if("fill-opacity"in r||"opacity"in r){var Te=((+h["fill-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+u.getRGB(r.fill).o+1||2)-1);Te=E(D(Te,0),1),we.opacity=Te,we.src&&(we.color="none")}a.appendChild(we);var Le=a.getElementsByTagName("stroke")&&a.getElementsByTagName("stroke")[0],qe=!1;!Le&&(qe=Le=W("stroke")),(r.stroke&&r.stroke!="none"||r["stroke-width"]||r["stroke-opacity"]!=null||r["stroke-dasharray"]||r["stroke-miterlimit"]||r["stroke-linejoin"]||r["stroke-linecap"])&&(Le.on=!0),(r.stroke=="none"||r.stroke===null||Le.on==null||r.stroke==0||r["stroke-width"]==0)&&(Le.on=!1);var ze=u.getRGB(r.stroke);Le.on&&r.stroke&&(Le.color=ze.hex),Te=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+ze.o+1||2)-1);var He=.75*(B(r["stroke-width"])||1);if(Te=E(D(Te,0),1),r["stroke-width"]==null&&(He=h["stroke-width"]),r["stroke-width"]&&(Le.weight=He),He&&He<1&&(Te*=He)&&(Le.weight=1),Le.opacity=Te,r["stroke-linejoin"]&&(Le.joinstyle=r["stroke-linejoin"]||"miter"),Le.miterlimit=r["stroke-miterlimit"]||8,r["stroke-linecap"]&&(Le.endcap=r["stroke-linecap"]=="butt"?"flat":r["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in r){var Xe={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Le.dashstyle=Xe[d](r["stroke-dasharray"])?Xe[r["stroke-dasharray"]]:V}qe&&a.appendChild(Le)}if(k.type=="text"){k.paper.canvas.style.display=V;var Qe=k.paper.span,at=h.font&&h.font.match(/\d+(?:\.\d*)?(?=px)/);g=Qe.style,h.font&&(g.font=h.font),h["font-family"]&&(g.fontFamily=h["font-family"]),h["font-weight"]&&(g.fontWeight=h["font-weight"]),h["font-style"]&&(g.fontStyle=h["font-style"]),at=B(h["font-size"]||at&&at[0])||10,g.fontSize=100*at+"px",k.textpath.string&&(Qe.innerHTML=w(k.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var lt=Qe.getBoundingClientRect();k.W=h.w=(lt.right-lt.left)/100,k.H=h.h=(lt.bottom-lt.top)/100,k.X=h.x,k.Y=h.y+k.H/2,("x"in r||"y"in r)&&(k.path.v=u.format("m{0},{1}l{2},{1}",q(h.x*de),q(h.y*de),q(h.x*de)+1));for(var Ct=["x","y","text","font","font-family","font-weight","font-style","font-size"],ct=0,Nt=Ct.length;ct<Nt;ct++)if(Ct[ct]in r){k._.dirty=1;break}switch(h["text-anchor"]){case"start":k.textpath.style["v-text-align"]="left",k.bbx=k.W/2;break;case"end":k.textpath.style["v-text-align"]="right",k.bbx=-k.W/2;break;default:k.textpath.style["v-text-align"]="center",k.bbx=0}k.textpath.style["v-text-kern"]=!0}},ee=function(t,r,a){t.attrs=t.attrs||{},t.attrs;var h=Math.pow,g="linear",v=".5 .5";if(t.attrs.gradient=r,r=(r=w(r).replace(u._radial_gradient,function(se,ae,fe){return g="radial",ae&&fe&&(ae=B(ae),fe=B(fe),h(ae-.5,2)+h(fe-.5,2)>.25&&(fe=H.sqrt(.25-h(ae-.5,2))*(2*(fe>.5)-1)+.5),v=ae+U+fe),V})).split(/\s*\-\s*/),g=="linear"){var L=r.shift();if(L=-B(L),isNaN(L))return null}var k=u._parseDots(r);if(!k)return null;if(t=t.shape||t.node,k.length){t.removeChild(a),a.on=!0,a.method="none",a.color=k[0].color,a.color2=k[k.length-1].color;for(var I=[],$=0,K=k.length;$<K;$++)k[$].offset&&I.push(k[$].offset+U+k[$].color);a.colors=I.length?I.join():"0% "+a.color,g=="radial"?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=v,a.angle=0):(a.type="gradient",a.angle=(270-L)%360),t.appendChild(a)}return 1},X=function(t,r){this[0]=this.node=t,t.raphael=!0,this.id=u._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=r,this.matrix=u.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},i=u.el;X.prototype=i,i.constructor=X,i.transform=function(t){if(t==null)return this._.transform;var r,a=this.paper._viewBoxShift,h=a?"s"+[a.scale,a.scale]+"-1-1t"+[a.dx,a.dy]:V;a&&(r=t=w(t).replace(/\.{3}|\u2026/g,this._.transform||V)),u._extractTransform(this,h+t);var g,v=this.matrix.clone(),L=this.skew,k=this.node,I=~w(this.attrs.fill).indexOf("-"),$=!w(this.attrs.fill).indexOf("url(");if(v.translate(1,1),$||I||this.type=="image")if(L.matrix="1 0 0 1",L.offset="0 0",g=v.split(),I&&g.noRotation||!g.isSimple){k.style.filter=v.toFilter();var K=this.getBBox(),se=this.getBBox(1),ae=K.x-se.x,fe=K.y-se.y;k.coordorigin=ae*-de+U+fe*-de,Se(this,1,1,ae,fe,0)}else k.style.filter=V,Se(this,g.scalex,g.scaley,g.dx,g.dy,g.rotate);else k.style.filter=V,L.matrix=w(v),L.offset=v.offset();return r!==null&&(this._.transform=r,u._extractTransform(this,r)),this},i.rotate=function(t,r,a){if(this.removed)return this;if(t!=null){if((t=w(t).split(j)).length-1&&(r=B(t[1]),a=B(t[2])),t=B(t[0]),a==null&&(r=a),r==null||a==null){var h=this.getBBox(1);r=h.x+h.width/2,a=h.y+h.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,r,a]])),this}},i.translate=function(t,r){return this.removed?this:((t=w(t).split(j)).length-1&&(r=B(t[1])),t=B(t[0])||0,r=+r||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=r),this.transform(this._.transform.concat([["t",t,r]])),this)},i.scale=function(t,r,a,h){if(this.removed)return this;if((t=w(t).split(j)).length-1&&(r=B(t[1]),a=B(t[2]),h=B(t[3]),isNaN(a)&&(a=null),isNaN(h)&&(h=null)),t=B(t[0]),r==null&&(r=t),h==null&&(a=h),a==null||h==null)var g=this.getBBox(1);return a=a==null?g.x+g.width/2:a,h=h==null?g.y+g.height/2:h,this.transform(this._.transform.concat([["s",t,r,a,h]])),this._.dirtyT=1,this},i.hide=function(){return!this.removed&&(this.node.style.display="none"),this},i.show=function(){return!this.removed&&(this.node.style.display=V),this},i.auxGetBBox=u.el.getBBox,i.getBBox=function(){var t=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var r={},a=1/this.paper._viewBoxShift.scale;return r.x=t.x-this.paper._viewBoxShift.dx,r.x*=a,r.y=t.y-this.paper._viewBoxShift.dy,r.y*=a,r.width=t.width*a,r.height=t.height*a,r.x2=r.x+r.width,r.y2=r.y+r.height,r}return t},i._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},i.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),u.eve.unbind("raphael.*.*."+this.id),u._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]=typeof this[t]=="function"?u._removedFactory(t):null;this.removed=!0}},i.attr=function(t,r){if(this.removed)return this;if(t==null){var a={};for(var h in this.attrs)this.attrs[d](h)&&(a[h]=this.attrs[h]);return a.gradient&&a.fill=="none"&&(a.fill=a.gradient)&&delete a.gradient,a.transform=this._.transform,a}if(r==null&&u.is(t,"string")){if(t=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var g=t.split(j),v={},L=0,k=g.length;L<k;L++)(t=g[L])in this.attrs?v[t]=this.attrs[t]:u.is(this.paper.customAttributes[t],"function")?v[t]=this.paper.customAttributes[t].def:v[t]=u._availableAttrs[t];return k-1?v:v[g[0]]}if(this.attrs&&r==null&&u.is(t,"array")){for(v={},L=0,k=t.length;L<k;L++)v[t[L]]=this.attr(t[L]);return v}var I;for(var $ in r!=null&&((I={})[t]=r),r==null&&u.is(t,"object")&&(I=t),I)te("raphael.attr."+$+"."+this.id,this,I[$]);if(I){for($ in this.paper.customAttributes)if(this.paper.customAttributes[d]($)&&I[d]($)&&u.is(this.paper.customAttributes[$],"function")){var K=this.paper.customAttributes[$].apply(this,[].concat(I[$]));for(var se in this.attrs[$]=I[$],K)K[d](se)&&(I[se]=K[se])}I.text&&this.type=="text"&&(this.textpath.string=I.text),Ae(this,I)}return this},i.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&u._tofront(this,this.paper),this},i.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),u._toback(this,this.paper)),this)},i.insertAfter=function(t){return this.removed?this:(t.constructor==u.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),u._insertafter(this,t,this.paper),this)},i.insertBefore=function(t){return this.removed?this:(t.constructor==u.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),u._insertbefore(this,t,this.paper),this)},i.blur=function(t){var r=this.node.runtimeStyle,a=r.filter;return a=a.replace(ge,V),+t!=0?(this.attrs.blur=t,r.filter=a+U+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",r.margin=u.format("-{0}px 0 0 -{0}px",q(+t||1.5))):(r.filter=a,r.margin=0,delete this.attrs.blur),this},u._engine.path=function(t,r){var a=W("shape");a.style.cssText=pe,a.coordsize=de+U+de,a.coordorigin=r.coordorigin;var h=new X(a,r),g={fill:"none",stroke:"#000"};t&&(g.path=t),h.type="path",h.path=[],h.Path=V,Ae(h,g),r.canvas&&r.canvas.appendChild(a);var v=W("skew");return v.on=!0,a.appendChild(v),h.skew=v,h.transform(V),h},u._engine.rect=function(t,r,a,h,g,v){var L=u._rectPath(r,a,h,g,v),k=t.path(L),I=k.attrs;return k.X=I.x=r,k.Y=I.y=a,k.W=I.width=h,k.H=I.height=g,I.r=v,I.path=L,k.type="rect",k},u._engine.ellipse=function(t,r,a,h,g){var v=t.path();return v.attrs,v.X=r-h,v.Y=a-g,v.W=2*h,v.H=2*g,v.type="ellipse",Ae(v,{cx:r,cy:a,rx:h,ry:g}),v},u._engine.circle=function(t,r,a,h){var g=t.path();return g.attrs,g.X=r-h,g.Y=a-h,g.W=g.H=2*h,g.type="circle",Ae(g,{cx:r,cy:a,r:h}),g},u._engine.image=function(t,r,a,h,g,v){var L=u._rectPath(a,h,g,v),k=t.path(L).attr({stroke:"none"}),I=k.attrs,$=k.node,K=$.getElementsByTagName("fill")[0];return I.src=r,k.X=I.x=a,k.Y=I.y=h,k.W=I.width=g,k.H=I.height=v,I.path=L,k.type="image",K.parentNode==$&&$.removeChild(K),K.rotate=!0,K.src=r,K.type="tile",k._.fillpos=[a,h],k._.fillsize=[g,v],$.appendChild(K),Se(k,1,1,0,0,0),k},u._engine.text=function(t,r,a,h){var g=W("shape"),v=W("path"),L=W("textpath");r=r||0,a=a||0,h=h||"",v.v=u.format("m{0},{1}l{2},{1}",q(r*de),q(a*de),q(r*de)+1),v.textpathok=!0,L.string=w(h),L.on=!0,g.style.cssText=pe,g.coordsize=de+U+de,g.coordorigin="0 0";var k=new X(g,t),I={fill:"#000",stroke:"none",font:u._availableAttrs.font,text:h};k.shape=g,k.path=v,k.textpath=L,k.type="text",k.attrs.text=w(h),k.attrs.x=r,k.attrs.y=a,k.attrs.w=1,k.attrs.h=1,Ae(k,I),g.appendChild(L),g.appendChild(v),t.canvas.appendChild(g);var $=W("skew");return $.on=!0,g.appendChild($),k.skew=$,k.transform(V),k},u._engine.setSize=function(t,r){var a=this.canvas.style;return this.width=t,this.height=r,t==+t&&(t+="px"),r==+r&&(r+="px"),a.width=t,a.height=r,a.clip="rect(0 "+t+" "+r+" 0)",this._viewBox&&u._engine.setViewBox.apply(this,this._viewBox),this},u._engine.setViewBox=function(t,r,a,h,g){u.eve("raphael.setViewBox",this,this._viewBox,[t,r,a,h,g]);var v,L,k=this.getSize(),I=k.width,$=k.height;return g&&(a*(v=$/h)<I&&(t-=(I-a*v)/2/v),h*(L=I/a)<$&&(r-=($-h*L)/2/L)),this._viewBox=[t,r,a,h,!!g],this._viewBoxShift={dx:-t,dy:-r,scale:k},this.forEach(function(K){K.transform("...")}),this},u._engine.initWin=function(t){var r=t.document;r.styleSheets.length<31?r.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):r.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!r.namespaces.rvml&&r.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),W=function(a){return r.createElement("<rvml:"+a+' class="rvml">')}}catch(a){W=function(h){return r.createElement("<"+h+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},u._engine.initWin(u._g.win),u._engine.create=function(){var t=u._getContainer.apply(0,arguments),r=t.container,a=t.height,h=t.width,g=t.x,v=t.y;if(!r)throw new Error("VML container not found.");var L=new u._Paper,k=L.canvas=u._g.doc.createElement("div"),I=k.style;return g=g||0,v=v||0,h=h||512,a=a||342,L.width=h,L.height=a,h==+h&&(h+="px"),a==+a&&(a+="px"),L.coordsize=216e5+U+216e5,L.coordorigin="0 0",L.span=u._g.doc.createElement("span"),L.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",k.appendChild(L.span),I.cssText=u.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",h,a),r==1?(u._g.doc.body.appendChild(k),I.left=g+"px",I.top=v+"px",I.position="absolute"):r.firstChild?r.insertBefore(k,r.firstChild):r.appendChild(k),L.renderfix=function(){},L},u.prototype.clear=function(){u.eve("raphael.clear",this),this.canvas.innerHTML=V,this.span=u._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},u.prototype.remove=function(){for(var t in u.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]=typeof this[t]=="function"?u._removedFactory(t):null;return!0};var l=u.st;for(var n in i)i[d](n)&&!l[d](n)&&(l[n]=function(t){return function(){var r=arguments;return this.forEach(function(a){a[t].apply(a,r)})}}(n))}}.apply(b,f))===void 0||(M.exports=N)}])})}),Q1=W1(J1),Lt=Q1;var T={};T.Common={nodeIdIncrement:0,activeNode:0,roundFloat:function(x,p){for(var M=0,b=1;M<p;)b*=10,M++;return Math.round(x*b)/b},apply:function(x,p){if(x&&typeof p=="object")for(var M in p)x[M]=p[M];return x},addRaphEventHandler:function(x,p,M,b){try{x[p](function(P,f){return function(N,u){var d=f;d.e=N,P(d)}}(M,b))}catch(P){}},isInteger:function(x){return!isNaN(parseInt(x))},isXMLSerializerAvailable:function(){return typeof XMLSerializer=="function"},createSvgEl:function(x,p){if(x=document.createElementNS("http://www.w3.org/2000/svg",x),p)for(var M in p)p.hasOwnProperty(M)&&x.setAttribute(M,String(p[M]));return x},createGradientEl:function(x,p,M){if(p.type!="radialGradient")return!1;var b=T.Common.createSvgEl("radialGradient",{id:x,gradientUnits:"userSpaceOnUse",cx:M[0],cy:M[1],r:M[2],fx:M[0],fy:M[1]});if(p.stop)for(var P=p.stop,f=0;f<P.length;f++){var N=P[f];N["@attributes"]?b.appendChild(T.Common.createSvgEl("stop",N["@attributes"])):(N._attributes&&delete N._attributes,N._children&&delete N._children,N.__proto__&&delete N.__proto__,b.appendChild(T.Common.createSvgEl("stop",N)))}return b},setCssStyle:function(x,p){var M=document.styleSheets[0];M.addRule?M.addRule(x,p):M.insertRule&&M.insertRule(x+" { "+p+" }",M.cssRules.length)}};T.PhyloCanvas=function(){var x,p,M,b,P;return function(f,N,u,d,w){if(this.getNewickObject=function(){return M},this.clear=function(){},this.scale=function(H){b.svg.scale(H)},this.getSvg=function(){return b},this.getPhylogram=function(){return x},this.getSvgSource=function(){if(Lt.svg&&T.Common.isXMLSerializerAvailable()){var H=new XMLSerializer;return H.serializeToString(b.svg.canvas)}else return!1},typeof f=="object")if(f.xml){if(f.fileSource)var B=f.xml;else var B=bt.textToXML(f.xml);B=bt.xmlToJSON(B),P=new T.PhyloCanvas.PhyloxmlParse(B)}else if(f.phyloxml){if(f.fileSource)var B=f.phyloxml;else var B=bt.textToXML(f.phyloxml);B=bt.xmlToJSON(B),P=new T.PhyloCanvas.PhyloxmlParse(B)}else if(f.nexml){if(f.fileSource)var B=f.nexml;else var B=bt.textToXML(f.nexml);B=bt.xmlToJSON(B),P=new T.PhyloCanvas.NexmlParse(B,f)}else f.json?P=new T.PhyloCanvas.PhyloxmlParse(f.json):f.newick?P=new T.PhyloCanvas.NewickParse(f.newick):f.nexmlJson?P=new T.PhyloCanvas.NexmlJsonParse(f):alert("Please set the format of input data");else P=new T.PhyloCanvas.NewickParse(f);p=N,b=new T.PhyloCanvas.Render.SVG(p,u,d),w=="circular"?x=new T.PhyloCanvas.Render.CircularPhylogram(b,P):x=new T.PhyloCanvas.Render.Phylogram(b,P)}}();T.PhyloCanvas.prototype={};T.PhyloCanvas.Node=function(){return function(x,p){this.id=T.Common.nodeIdIncrement+=1,this.level=0,this.len=0,this.newickLen=0,this.name="",this.type="",this.chart={},this.img=[],x&&T.Common.apply(this,x),this._countAllChildren=!1,this._countImmediateChildren=!1,this._midBranchPosition=!1,this.children=new Array,p&&p.children.push(this)}}();T.PhyloCanvas.Node.prototype={getCountAllChildren:function(){if(this._countAllChildren!==!1)return this._countAllChildren;var x=0;for(var p in this.children)if(T.Common.isInteger(p)){var M=this.children[p];M.children&&M.children.length>0?x+=M.getCountAllChildren():x++}return this._countAllChildren=x,x},getCountImmediateChildren:function(){if(this._countImmediateChildren!==!1)return this._countImmediateChildren;var x=0;for(var p in this.children){var M=this.children[p];x+=M.length}return this._countImmediateChildren=x,x},getMidbranchPosition:function(x){if(this._midBranchPosition!==!1)return this._midBranchPosition;for(var p=[0,0],M=0;M<this.children.length;M++){var b=this.children[M];b.children&&b.children.length>0?M==0&&x?(p[0]=b.getMidbranchPosition(!0),p[1]+=b.getCountAllChildren()-1):M==0?(p[0]=b.getMidbranchPosition(),p[1]+=b.getCountAllChildren()):M==this.children.length-1?p[1]+=b.getMidbranchPosition():p[1]+=b.getCountAllChildren():M==0&&x?p[0]=0:M==0?(p[0]=1,p[1]+=1):(M==this.children.length-1,p[1]+=1)}return this._midBranchPosition=p[1]>=p[0]?(p[1]+p[0])/2:p[0],this._midBranchPosition}};T.PhyloCanvas.NewickParse=function(){var x,p,M,b=0,P=0,f,N,u=function(D){for(var E=new T.PhyloCanvas.Node;p!==")"&&p!==",";)p===":"?(H(),E.len=T.Common.roundFloat(w(),4),E.len==0&&(E.len=1e-4)):p==="'"||p==='"'?(E.type="label",E.name=B(p)):(E.type="label",E.name=w());return E.level=D.level+1,E},d=function(D){var E=new T.PhyloCanvas.Node;for(D&&(E.level=D.level+1);p!==")";)H(),p==="("?E.children.push(d(E)):E.children.push(u(E));return H(),p!==":"&&p!==")"&&p!==","&&p!==";"&&(E.type="label",E.name=w()),p===":"&&(H(),E.len=T.Common.roundFloat(w(),4),E.len==0&&(E.len=1e-4),E.type="stem"),E},w=function(){for(var D="";p!==":"&&p!==")"&&p!==","&&p!==";";)D+=p,H();return D},B=function(D){for(var E="";p!==D;)E+=p,H();return E},H=function(){return p=x.charAt(M),M+=1,p},q=function(D,E){if(D.children&&D.children.length)for(var O=0;O<D.children.length;O++){var j=D.children[O];j.len===0&&(j.len=1),j.newickLen=T.Common.roundFloat(j.len+D.newickLen,4),j.level>b&&(b=j.level),j.newickLen>P&&(P=j.newickLen),j.children.length>0&&q(j,D)}return D};return function(D){this.getRoot=function(){return f},this.getLevels=function(){return b},this.getNewickLen=function(){return P},this.getValidate=function(){return N},b=0,P=0,x=D,M=0,H(),f=d(),f=q(f)}}();T.PhyloCanvas.NewickParse.prototype={};T.PhyloCanvas.PhyloxmlParse=function(){var x=0,p=0,M,b,P=function(u,d){var w=new T.PhyloCanvas.Node;if(d&&(w.level=d.level+1),u.clade&&u.clade.length)for(var B=0;B<u.clade.length;B++){var H=u.clade[B];w.children.push(P(H,w))}if(u.branch_length&&(typeof u.branch_length=="object"&&(u.branch_length=u.branch_length[0].Text),w.len=T.Common.roundFloat(u.branch_length,4),w.len==0&&(w.len=1e-4)),u.color?(w.red=u.color[0].red[0].Text,w.green=u.color[0].green[0].Text,w.blue=u.color[0].blue[0].Text):(w.red=0,w.green=0,w.blue=0),u.property&&u.property[0].applies_to=="node"&&u.property[0].ref=="style:font_color"&&(w.font_color_hex=u.property[0].Text),u.name?(w.type="label",w.name=u.name[0].Text,u.name[0]&&u.name[0].style&&(w.style=u.name[0].style),u.name[0]&&u.name[0].bgStyle&&(w.bgStyle=u.name[0].bgStyle)):u.confidence&&(w.name=u.confidence[0].Text),u.sequence&&u.sequence[0]&&u.sequence[0].name&&u.sequence[0].name[0]&&u.sequence[0].name[0].Text&&(w.sequenceName=u.sequence[0].name[0].Text),u.taxonomy&&u.taxonomy[0]&&(u.taxonomy[0].scientific_name&&u.taxonomy[0].scientific_name[0]&&u.taxonomy[0].scientific_name[0].Text&&(w.taxonomyScientificName=u.taxonomy[0].scientific_name[0].Text),u.taxonomy[0].common_name&&u.taxonomy[0].common_name[0]&&u.taxonomy[0].common_name[0].Text&&(w.taxonomyCommonName=u.taxonomy[0].common_name[0].Text)),u.sequence&&u.sequence[0]&&u.sequence[0].accession&&u.sequence[0].accession[0]&&u.sequence[0].accession[0].Text&&(w.sequenceAccession=u.sequence[0].accession[0].Text),u.point&&(w.LatLong=[u.point[0].lat[0].Text,u.point[0].long[0].Text]),w.name||(w.sequenceName?w.name=w.sequenceName:w.taxonomyScientificName?w.name=w.taxonomyScientificName:w.taxonomyCommonName?w.name=w.taxonomyCommonName:w.sequenceAccession&&(w.name=w.sequenceAccession),w.name&&(w.type="label")),u.annotation&&(u.annotation[0]&&u.annotation[0].desc&&u.annotation[0].desc[0]&&u.annotation[0].desc[0].Text&&(w.description=u.annotation[0].desc[0].Text),u.annotation[0]&&u.annotation[0].uri&&u.annotation[0].uri[0]&&u.annotation[0].uri[0].Text&&(w.uri=u.annotation[0].uri[0].Text),u.annotation[0]&&u.annotation[0].img))for(var B in u.annotation[0].img)T.Common.isInteger(B)&&(w.img[B]=u.annotation[0].img[B].Text);if(u.chart&&u.chart[0])for(var B in u.chart[0])B!="Text"&&B!="_children"&&(w.chart[B]=u.chart[0][B][0].Text);return w&&w.level>1&&(w.len||(b="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),w},f=function(u,d){if(u.children&&u.children.length)for(var w=0;w<u.children.length;w++){var B=u.children[w];B.newickLen=Math.round((B.len+u.newickLen)*1e4)/1e4,B.level>x&&(x=B.level),B.newickLen>p&&(p=B.newickLen),B.children.length>0&&f(B,u)}return u},N=function(u,d){for(var w in u)w!="_children"&&w!="Text"&&(w=="rectangular"||w=="circular"?N(u[w][0],w):(T.PhyloCanvas.Render.Parameters[w]||(T.PhyloCanvas.Render.Parameters[w]={}),T.PhyloCanvas.Render.Parameters.set(w,u[w][0].Text,d)))};return function(u){if(this.getRoot=function(){return M},this.getLevels=function(){return x},this.getNewickLen=function(){return p},this.getValidate=function(){return b},u.phylogeny&&u.phylogeny[0]&&u.phylogeny[0].clade&&(M=P(u.phylogeny[0].clade[0])),u.phylogeny&&u.phylogeny[0]&&u.phylogeny[0].render&&u.phylogeny[0].render[0]){var d=u.phylogeny[0].render[0];if(d&&d.styles){var w=d.styles[0];for(var B in w)if(B!="_children"&&B!="Text")if(w[B][0].type&&w[B][0].type=="radialGradient"&&Lt.svg)w[B][0].name=B,T.PhyloCanvas.Render.Style[B]=w[B][0],T.PhyloCanvas.Render.Style.jsphylosvgGradientList||(T.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),T.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(B);else{T.PhyloCanvas.Render.Style[B]||(T.PhyloCanvas.Render.Style[B]={});for(var H in w[B][0])H!="_attributes"&&H!="_children"&&H!="type"&&(T.PhyloCanvas.Render.Style[B][H.replace("_","-")]=w[B][0][H])}}if(d&&d.parameters&&N(d.parameters[0]),d&&d.charts){var q=d.charts[0];for(var B in q)if(B!="_children"&&B!="Text")for(var H in q[B])q[B][H].type=="binary"?(q[B][H].chart=B,T.PhyloCanvas.Render.Parameters.binaryCharts.push(q[B][H])):q[B][H].type=="integratedBinary"?(q[B][H].chart=B,T.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(q[B][H])):q[B][H].type=="bar"&&(q[B][H].chart=B,T.PhyloCanvas.Render.Parameters.barCharts.length==1&&T.PhyloCanvas.Render.Parameters.barCharts.shift(),T.PhyloCanvas.Render.Parameters.barCharts.push(q[B][H]))}}M=f(M)}}();T.PhyloCanvas.PhyloxmlParse.prototype={};T.PhyloCanvas.NexmlParse=function(){var x=0,p=0,M,b,P,f,N=function(w,B,H){var q=new T.PhyloCanvas.Node;H&&(q.level=H.level+1);for(var D=0;D<P.length;D++)if(P[D].source==w.id)for(var E=0;E<f.length;E++)P[D].target==f[E].id&&q.children.push(N(f[E],P[D].length,q));if(q&&q.level>0&&!q.len&&(q.len=1),B&&(q.len=T.Common.roundFloat(B,4),q.len==0&&(q.len=1e-4)),w.label&&(q.type="label",q.name=w.label,w.style&&(q.style=w.style)),w.color){let O=w.color.replace(/[a-z%\s\(\)]/g,"").split(",");q.red=O[0],q.green=O[1],q.blue=O[2]}else{let O=T.PhyloCanvas.Render.Style.line.stroke.replace(/[a-z%\s\(\)]/g,"").split(",");q.red=O[0],q.green=O[1],q.blue=O[2]}return q},u=function(w,B){if(w.children&&w.children.length)for(var H=0;H<w.children.length;H++){var q=w.children[H];q.newickLen=Math.round((q.len+w.newickLen)*1e4)/1e4,q.level>x&&(x=q.level),q.newickLen>p&&(p=q.newickLen),q.children.length>0&&u(q,w)}return w},d=function(w,B){for(var H in w)H!="_children"&&H!="Text"&&(H=="rectangular"||H=="circular"?d(w[H][0],H):(T.PhyloCanvas.Render.Parameters[H]||(T.PhyloCanvas.Render.Parameters[H]={}),T.PhyloCanvas.Render.Parameters.set(H,w[H][0].Text,B)))};return function(w,B){this.getRoot=function(){return M},this.getLevels=function(){return x},this.getNewickLen=function(){return p},this.getValidate=function(){return b},B.tree&&w.trees[0]&&w.trees[0].tree[B.tree-1]?(P=w.trees[0].tree[B.tree-1].edge,f=w.trees[0].tree[B.tree-1].node):(P=w.trees[0].tree[0].edge,f=w.trees[0].tree[0].node);for(var H=0;H<f.length;H++){var q=0;if(f[H].root&&f[H].root=="true"){M=f[H];break}for(var D=0;D<P.length;D++)P[D].target==f[H].id&&q++;if(q==0){M=f[H];break}}M?(M=N(M),M=u(M)):b="Error. Currently, only rooted NeXML trees are supported."}}();T.PhyloCanvas.NexmlParse.prototype={};T.PhyloCanvas.NexmlJsonParse=function(){var x=0,p=0,M,b,P=[],f=[],N=function(w,B,H){var q=new T.PhyloCanvas.Node;H&&(q.level=H.level+1);for(var D=0;D<P.length;D++)if(P[D].source==w.id)for(var E=0;E<f.length;E++)P[D].target==f[E].id&&q.children.push(N(f[E],P[D].length,q));return B&&(q.len=T.Common.roundFloat(B,4),q.len==0&&(q.len=1e-4)),w.label&&(q.type="label",q.name=w.label,w.accession&&(q.accession=w.accession),w.style&&(q.style=w.style),w.bgStyle&&(q.bgStyle=w.bgStyle)),w.chart&&(q.chart=w.chart),q&&q.level>1&&(q.len||(b="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),q},u=function(w,B){if(w.children&&w.children.length)for(var H=0;H<w.children.length;H++){var q=w.children[H];q.newickLen=Math.round((q.len+w.newickLen)*1e4)/1e4,q.level>x&&(x=q.level),q.newickLen>p&&(p=q.newickLen),q.children.length>0&&u(q,w)}return w},d=function(w,B){for(var H in w)H!="_children"&&H!="Text"&&(H=="rectangular"||H=="circular"?d(w[H],H):(T.PhyloCanvas.Render.Parameters[H]||(T.PhyloCanvas.Render.Parameters[H]={}),T.PhyloCanvas.Render.Parameters.set(H,w[H],B)))};return function(w){this.getRoot=function(){return M},this.getLevels=function(){return x},this.getNewickLen=function(){return p},this.getValidate=function(){return b};var B=w.nexmlJson.nexml,H=B.render;if(H&&H.styles){var q=H.styles;for(var D in q)if(D!="_children"&&D!="Text")if(q[D]["@attributes"].type&&q[D]["@attributes"].type=="radialGradient"&&Lt.svg)q[D].name=D,q[D].type=q[D]["@attributes"].type,T.PhyloCanvas.Render.Style[D]=q[D],T.PhyloCanvas.Render.Style.jsphylosvgGradientList||(T.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),T.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(D);else{T.PhyloCanvas.Render.Style[D]||(T.PhyloCanvas.Render.Style[D]={});for(var E in q[D]["@attributes"])E!="_attributes"&&E!="_children"&&E!="type"&&(T.PhyloCanvas.Render.Style[D][E.replace("_","-")]=q[D]["@attributes"][E])}}if(H&&H.parameters&&d(H.parameters),H&&H.charts){var O=H.charts;for(var D in O)O[D]["@attributes"].chart=D,O[D]["@attributes"].type=="binary"?T.PhyloCanvas.Render.Parameters.binaryCharts.push(O[D]["@attributes"]):O[D]["@attributes"].type=="integratedBinary"?T.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(O[D]["@attributes"]):O[D]["@attributes"].type=="bar"&&T.PhyloCanvas.Render.Parameters.barCharts.push(O[D]["@attributes"])}if(w.tree&&B.trees[0]&&B.trees[0].tree[w.tree-1])P=B.trees[0].tree[w.tree-1].edge,f=B.trees[0].tree[w.tree-1].node;else{for(var D=0;D<B.trees.tree.edge.length;D++)P.push(B.trees.tree.edge[D]["@attributes"]);for(var D=0;D<B.trees.tree.node.length;D++){var j=B.trees.tree.node[D]["@attributes"];j.label&&(j.chart=B.trees.tree.node[D].chart),f.push(j)}}for(var D=0;D<f.length;D++)f[D].root&&f[D].root=="true"&&(M=f[D]);M?(M=N(M),M=u(M)):b="Error. Currently, only rooted NeXML trees are supported."}}();T.PhyloCanvas.NexmlParse.prototype={};T.PhyloCanvas.Render={};T.PhyloCanvas.Render.Style={line:{stroke:"rgb(0,0,0)","stroke-width":1},text:{"font-family":"Verdana","font-size":12,"text-anchor":"start"},path:{stroke:"rgb(0,0,0)","stroke-width":1},connectedDash:{stroke:"rgb(200,200,200)","stroke-dasharray":". "},textSecantBg:{fill:"#EEE",stroke:"#DDD"},highlightedEdgeCircle:{fill:"black",stroke:"black"},barChart:{fill:"#003300",stroke:"#DDD"},getStyle:function(x,p){return this[x]?this[x]:this[p]}};T.PhyloCanvas.Render.Parameters={jsOverride:0,Rectangular:{bufferX:200,paddingX:10,paddingY:20,bufferInnerLabels:10,bufferOuterLabels:5,minHeightBetweenLeaves:10,alignPadding:0,alignRight:!1,showScaleBar:!1},Circular:{bufferRadius:.33,bufferAngle:20,initStartAngle:160,innerCircleRadius:0,minHeightBetweenLeaves:5,bufferInnerLabels:2,bufferOuterLabels:5},binaryCharts:[],integratedBinaryCharts:[],barCharts:[],binaryChartBufferInner:5,binaryChartBufferSiblings:.01,binaryChartThickness:15,binaryChartDisjointed:!1,barChartBufferInner:3,barChartHeight:50,barChartWidth:.5,set:function(x,p,M){this.jsOverride||(M?M=="circular"?this.Circular[x]=parseFloat(p):M=="rectangular"&&(this.Rectangular[x]=parseFloat(p)):this[x]=parseFloat(p))}};T.PhyloCanvas.Render.Line=function(){return function(x,p,M,b,P,f,N,u){this.type="line",this.attr=T.PhyloCanvas.Render.Style.line,this.attr.stroke=["rgb(",P,",",f,",",N,")"].join(""),this.x1=x,this.x2=p,this.y1=M,this.y2=b,u&&(T.Common.apply(this,u),u.attr&&(this.attr=u.attr))}}();T.PhyloCanvas.Render.Text=function(){return function(x,p,M,b){this.type="text",this.attr=T.PhyloCanvas.Render.Style.text,this.x=x,this.y=p,this.text=M,b&&(T.Common.apply(this,b),b.attr&&(this.attr=b.attr))}}();T.PhyloCanvas.Render.Path=function(){var x=T.PhyloCanvas.Render.Style.path;return function(p,M){this.type="path",this.attr=T.PhyloCanvas.Render.Style.path,this.path=p,M&&(T.Common.apply(this,M),M.attr&&(this.attr=M.attr))}}();T.PhyloCanvas.Render.Circle=function(){return function(x,p,M,b){this.type="circle",this.x=x,this.y=p,this.radius=M,b&&(T.Common.apply(this,b),b.attr&&(this.attr=b.attr))}}();T.PhyloCanvas.Render.SVG=function(){var x,p;return function(M,b,P){x=M,this.canvasSize=[b,P],this.svg=Lt(M,this.canvasSize[0],this.canvasSize[1])}}();T.PhyloCanvas.Render.SVG.prototype={render:function(){for(var x=this.phylogramObject.getDrawInstructs(),p=0;p<x.length;p++)if(x[p].type=="line")var M=this.svg.path(["M",x[p].x1,x[p].y1,"L",x[p].x2,x[p].y2]).attr(T.PhyloCanvas.Render.Style.line);else if(x[p].type=="path")var b=this.svg.path(x[p].path).attr(x[p].attr);else if(x[p].type=="circle")var b=this.svg.circle(x[p].x,x[p].y,x[p].radius).attr({stroke:"black",fill:"black"});else{var P=this.svg.text(x[p].x,x[p].y,x[p].text).attr(T.PhyloCanvas.Render.Style.text);x[p].attr&&P.attr(x[p].attr),x[p].rotate&&P.rotate(x[p].rotate);var f=P.getBBox(),N=Math.sqrt(f.height*f.height+f.width*f.width)}},draw:function(x){var p,M;if(x.type=="line")p=this.svg.path(["M",x.x1,x.y1,"L",x.x2,x.y2]).attr(T.PhyloCanvas.Render.Style.line);else if(x.type=="path")p=this.svg.path(x.path).attr(x.attr);else if(x.type=="circle")p=this.svg.circle(x.x,x.y,x.radius).attr({stroke:"black",fill:"black"});else if(x.type=="text"){p=this.svg.text(x.x,x.y,x.text).attr(T.PhyloCanvas.Render.Style.text),x.attr&&p.attr(x.attr),x.rotate&&p.rotate(x.rotate);var b=p.getBBox();M=Math.sqrt(b.height*b.height+b.width*b.width)}return[p,M]}};T.PhyloCanvas.Render.Phylogram=function(){var x,p=T.PhyloCanvas.Render.Parameters.Rectangular,M,b,P,f,N,u,d=!0,w=0,B=0,H,q,D,E,O,j,te,U,V,oe,he,ge,G=[],pe=function(W){return W+Math.round(W/4)},de=function(W,Ce,Ae,ee){return["M",W,Ce,"L",Ae,Ce,"L",Ae,ee,"L",W,ee,"Z"]},z=function(W,Ce){if(W.len&&d==!1&&W.children.length==0&&(w=T.Common.roundFloat(w+f,4)),W.children.length>0){var Ae=[],ee,X,i,l,n,t,r;if(W.len&&(ee=Ce,X=Ce=T.Common.roundFloat(Ce+P*W.len,4),i=w+W.getMidbranchPosition(d)*f,l=i,n=W.red,t=W.green,r=W.blue,x.draw(new T.PhyloCanvas.Render.Line(ee,X,i,l,n,t,r))),W.name){var a={};if(a=T.PhyloCanvas.Render.Style.getStyle("bootstrap","text"),W.font_color_hex?a.fill=W.font_color_hex:a.fill="#000000",W.uri&&(a.href=W.uri),W.description&&(a.title=W.description),W.level==0)var h=w+W.getMidbranchPosition(d)*f;else var h=l;x.draw(new T.PhyloCanvas.Render.Text((X||Ce)+5,h,W.name,{attr:a}))}if(W.children&&W.children.length)for(var g=0;g<W.children.length;g++){var v=W.children[g];Ae.push(z(v,Ce))}for(var L=[],g=0;g<Ae.length;g++)Ae[g][0]&&L.push(Ae[g][0]),Ae[g][1]&&L.push(Ae[g][1]);for(var k=Math.min.apply(null,L),I=Math.max.apply(null,L),$=(k+I)/2,K="",se="",ae="",fe=0,g=0;g<W.children.length;++g){var be=W.children[g];if(g==0)K=be.red,se=be.green,ae=be.blue;else if(K==be.red&&se==be.green&&ae==be.blue)fe=1;else{fe=0;break}}fe==0?T.PhyloCanvas.Render.Style.line.stroke="black":(n=W.children[0].red,t=W.children[0].green,r=W.children[0].blue,T.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",t,",",r,")"].join("")),W.children.length==2?(n=W.children[0].red,t=W.children[0].green,r=W.children[0].blue,T.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",t,",",r,")"].join(""),x.draw(new T.PhyloCanvas.Render.Path(["M",Ce+1e-4,k,"L",Ce,k,"L",Ce,$],{attr:T.PhyloCanvas.Render.Style.line})),n=W.children[1].red,t=W.children[1].green,r=W.children[1].blue,T.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",t,",",r,")"].join(""),x.draw(new T.PhyloCanvas.Render.Path(["M",Ce,$,"L",Ce,I,"L",Ce+1e-4,I],{attr:T.PhyloCanvas.Render.Style.line}))):x.draw(new T.PhyloCanvas.Render.Path(["M",Ce+1e-4,k,"L",Ce,k,"L",Ce,I,"L",Ce+1e-4,I],{attr:T.PhyloCanvas.Render.Style.line}))}else{if(ee=Ce,X=T.Common.roundFloat(Ce+P*W.len,2),i=w,l=w,n=W.red,t=W.green,r=W.blue,W.y=w,G.push(W),x.draw(new T.PhyloCanvas.Render.Line(ee,X,i,l,n,t,r)),p.alignRight&&x.draw(new T.PhyloCanvas.Render.Path(["M",X,i,"L",p.alignPadding+N,l],{attr:T.PhyloCanvas.Render.Style.connectedDash})),W.name){var a={};W.style&&(a=T.PhyloCanvas.Render.Style.getStyle(W.style,"text")),W.font_color_hex?a.fill=W.font_color_hex:a.fill="#000000",a["text-anchor"]="start",W.uri&&(a.href=W.uri),W.description&&(a.title=W.description);var _e=x.draw(new T.PhyloCanvas.Render.Text(p.alignRight?N+p.bufferInnerLabels+p.alignPadding:X+p.bufferInnerLabels,l,W.name,{attr:a}));B=Math.max(_e[1],B),T.PhyloCanvas.Render.Parameters.mouseRollOver&&T.Common.addRaphEventHandler(_e[0],"mouseover",T.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:x,node:W,x:X,y:l,textEl:_e[0]}),T.PhyloCanvas.Render.Parameters.mouseRollOut&&T.Common.addRaphEventHandler(_e[0],"mouseout",T.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:x,node:W,x:X,y:l,textEl:_e[0]}),T.PhyloCanvas.Render.Parameters.onClickAction&&T.Common.addRaphEventHandler(_e[0],"click",T.PhyloCanvas.Render.Parameters.onClickAction,{svg:x,node:W,x:X,y:l,textEl:_e[0]})}d&&(d=!1)}return[i,l]},ye=function(){y=w+f,E=0,O=p.showScaleBar*P,x.draw(new T.PhyloCanvas.Render.Line(E,O,y,y)),x.draw(new T.PhyloCanvas.Render.Text((E+O)/2,y-8,p.showScaleBar))},ve=function(W,Ce,Ae){for(var ee=(Ae&&Ae.bufferInner?Ae.bufferInner:0)|T.PhyloCanvas.Render.Parameters.binaryChartBufferInner,X=(Ae&&Ae.bufferSiblings?Ae.bufferSiblings*f:0)|(T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?f*T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),i=(Ae&&Ae.thickness?Ae.thickness:0)|T.PhyloCanvas.Render.Parameters.binaryChartThickness,l,n=0;n<G.length;n++){var t=G[n];x.draw(new T.PhyloCanvas.Render.Path(de(W+ee,t.y-f/2+X/2,W+ee+i,t.y+f/2-X/2),{attr:T.PhyloCanvas.Render.Style.getStyle(t.chart[Ce],"textSecantBg")}))}return W+ee+i},Se=function(W,Ce,Ae){for(var ee=[],X,i=Ae&&Ae.bufferInner?Ae.bufferInner:0|T.PhyloCanvas.Render.Parameters.barChartBufferInner,l=Ae&&Ae.height?Ae.height:0|T.PhyloCanvas.Render.Parameters.barChartHeight,n=Ae&&Ae.width?Ae.width<1?f*Ae.width:Ae.width:0|(T.PhyloCanvas.Render.Parameters.barChartWidth<1?f*T.PhyloCanvas.Render.Parameters.barChartWidth:T.PhyloCanvas.Render.Parameters.barChartWidth),t=0,r=0;r<G.length;r++)ee.push(G[r].chart[Ce]);X=Math.max.apply(null,ee),t=T.Common.roundFloat(l/X,4);for(var r=0;r<G.length;r++){var a=G[r];x.draw(new T.PhyloCanvas.Render.Path(de(W+i,a.y-n/2,W+i+t*a.chart[Ce],a.y+n/2),{attr:T.PhyloCanvas.Render.Style.getStyle(a.chart[Ce],"barChart")}))}return W+i+l};return function(W,Ce){this.getCanvasSize=function(){return[M,b]},this.getRoot=function(){return Ce.getRoot()},Ce.getValidate()&&x.draw(0,0,Ce.getValidate()),d=!0,x=W;var Ae=Ce.getRoot(),ee=Ce.getNewickLen();if(M=x.canvasSize[0],b=x.canvasSize[1],oe=p.bufferX,he=p.paddingX,ge=p.paddingY,u=p.minHeightBetweenLeaves,w=ge,P=Math.round((M-oe-he*2)/ee),f=Math.round((b-ge*2)/(p.showScaleBar?Ae.getCountAllChildren():Ae.getCountAllChildren()-1)),f<u&&(f=u),N=Math.round(M-oe-he*2),(T.PhyloCanvas.Render.Parameters.binaryCharts.length||T.PhyloCanvas.Render.Parameters.barCharts.length)&&(p.alignRight=!0),z(Ae,he),p.showScaleBar&&ye(),H=N+B+p.bufferInnerLabels,T.PhyloCanvas.Render.Parameters.binaryCharts.length){var X=T.PhyloCanvas.Render.Parameters.binaryCharts;for(var i in X)H=ve(H,X[i].chart,X[i])}if(T.PhyloCanvas.Render.Parameters.barCharts.length){var l=T.PhyloCanvas.Render.Parameters.barCharts;for(var i in l)D=Se(H,l[i].chart,l[i])}G=[],typeof bgLabelsHold!="undefined"&&(bgLabelsHold=[])}}();T.PhyloCanvas.Render.Phylogram.prototype={};T.PhyloCanvas.Render.CircularPhylogram=function(){var x,p=T.PhyloCanvas.Render.Parameters.Circular,M,b,P,f,N,u,d,w=!0,B=0,H,q,D,E=[],O=[],j,te,U,V=0,oe,he=Math.PI/180;function ge(ee,X){return X+=oe,[T.Common.roundFloat(H+ee*Math.sin(X*he),4),T.Common.roundFloat(q+ee*Math.cos(X*he),4)]}function G(ee){var X=z(90-ee-oe);if(X>90&&X<270){X+=180;var i="end"}else var i="start";return[X,i]}function pe(ee,X,i,l){var n=ge(ee,X),t=ge(ee,i),r=[],a,h=0;return Math.abs(z(i-X))>180?a=1:a=-1,l&&l.invertSecant&&(a*=-1,h=1),l&&l.noMove||r.push("M"),r.push(n[0],n[1],"A",ee,ee,0,a<1?0:1,h,t[0],t[1]),r}function de(ee,X,i,l){var n=[],t=ge(X,ee),r=ge(i,ee);return l&&l.noMove||n.push("M"),n.push(t[0],t[1],"L",r[0],r[1]),n}function z(ee){for(;ee>360||ee<0;)ee>360?ee-=360:ee<0&&(ee+=360);return ee}function ye(ee,X,i,l){if(!X&&ee.length>1)var l=ee[3],i=ee[2],X=ee[1],ee=ee[0];var n=Se("M",pe(ee,i,l,{noMove:1,invertSecant:0}),"L",pe(X,l,i,{noMove:1,invertSecant:1}),"Z");return n}function ve(ee,X){if(X=X,ee.len&&(w?B=te||1:ee.children.length==0&&(B=T.Common.roundFloat(B+N,4))),ee.children.length>0){var i=[],l,n,t,r;if(l=X,n=X+=T.Common.roundFloat(f*ee.len,4),ee.name,ee.children&&ee.children.length)for(var a=0;a<ee.children.length;a++){var h=ee.children[a],g=ve(h,X);g>0&&i.push(g)}var v=T.Common.roundFloat(Math.min.apply(null,i),4),L=T.Common.roundFloat(Math.max.apply(null,i),4);ee.level!=0&&x.draw(new T.PhyloCanvas.Render.Path(Se("M",ge(X+.01,v),"L",pe(X,v,L,{noMove:!0}),"L",ge(X+.01,L)))),ee.len&&(t=T.Common.roundFloat(v+(L-v)/2,4),x.draw(new T.PhyloCanvas.Render.Path(de(t,l,n))))}else if(ee.y=B,E.push(ee),l=X,n=X=T.Common.roundFloat(X+f*ee.len),t=B,x.draw(new T.PhyloCanvas.Render.Path(de(t,l,n))),x.draw(new T.PhyloCanvas.Render.Path(de(t,n,D),{attr:T.PhyloCanvas.Render.Style.connectedDash})),ee.name){var k=ge(D+p.bufferInnerLabels,t),I=G(t),$=I[0],K=I[1],se={};ee.style&&T.Common.apply(se,T.PhyloCanvas.Render.Style.getStyle(ee.style,"text")),ee.font_color_hex?se.fill=ee.font_color_hex:se.fill="#000000",se["text-anchor"]=K,ee.uri&&(se.href=ee.uri),ee.description&&(se.title=ee.description);var ae=x.draw(new T.PhyloCanvas.Render.Text(k[0],k[1],ee.name,{attr:se,rotate:[$,k[0],k[1]]}));ee.bgStyle&&O.push([ee.bgStyle,t]);var k=ge(n,t);T.PhyloCanvas.Render.Parameters.mouseRollOver&&T.Common.addRaphEventHandler(ae[0],"mouseover",T.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:x,node:ee,x:k[0],y:k[1],textEl:ae[0]}),T.PhyloCanvas.Render.Parameters.mouseRollOut&&T.Common.addRaphEventHandler(ae[0],"mouseout",T.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:x,node:ee,x:k[0],y:k[1],textEl:ae[0]}),T.PhyloCanvas.Render.Parameters.onClickAction&&T.Common.addRaphEventHandler(ae[0],"click",T.PhyloCanvas.Render.Parameters.onClickAction,{svg:x,node:ee,x:k[0],y:k[1],textEl:ae[0]}),V=Math.max(ae[1],V)}return w&&(w=!1),t}function Se(ee){for(var X=ee,i=1;i<arguments.length;i++)X=X.concat(arguments[i]);return X}function W(){var ee=[];if(O.length>0){if(T.PhyloCanvas.Render.Style.jsphylosvgGradientList)for(var X=0;X<T.PhyloCanvas.Render.Style.jsphylosvgGradientList.length;X++){var i=T.PhyloCanvas.Render.Style.jsphylosvgGradientList[X],l=T.Common.createGradientEl(i,T.PhyloCanvas.Render.Style[i],[H,q,D+V+p.bufferOuterLabels]);x.svg.defs.appendChild(l)}for(var X=0;X<O.length;X++){if(X!=O.length-1&&O[X][0]==O[X+1][0]){O[X+1][2]=O[X][2]?O[X][2]:O[X][1];continue}var ee=ye(D,D+V+p.bufferOuterLabels,O[X][2]?O[X][2]-N/2:O[X][1]-N/2,O[X][1]+N/2),n=T.PhyloCanvas.Render.Style.getStyle(O[X][0],"textSecantBg"),t=x.draw(new T.PhyloCanvas.Render.Path(ee,{attr:n.type?{}:n}));n.type&&n.type=="radialGradient"&&t[0].node.setAttribute("fill","url(#"+n.name+")"),n.type&&n.type=="radialGradient"&&t[0].node.setAttribute("stroke","none"),t[0].toBack()}}var ee=ye(D,D+V+p.bufferOuterLabels,(te||1)-N/2,360-N/2),t=x.draw(new T.PhyloCanvas.Render.Path(ee,{attr:T.PhyloCanvas.Render.Style.textSecantBg}));return t[0].toBack(),D+V+p.bufferOuterLabels}function Ce(ee,X,i){for(var l=i&&i.bufferInner?parseFloat(i.bufferInner):T.PhyloCanvas.Render.Parameters.binaryChartBufferInner,n=(i&&i.bufferSiblings?i.bufferSiblings*N:0)|(T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?N*T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),t=i&&i.thickness?parseFloat(i.thickness):T.PhyloCanvas.Render.Parameters.binaryChartThickness,r=(i&&i.disjointed?i.disjointed:!1)|T.PhyloCanvas.Render.Parameters.binaryChartDisjointed,a=i&&i.isInternal?i.isInternal:!1,h=!0,g,v=0;v<E.length;v++){var L=E[v];if((!E[v+1]||L.chart[X]!==E[v+1].chart[X]||r)&&L.chart[X]!="none"){var k=T.PhyloCanvas.Render.Style.getStyle(L.chart[X],"textSecantBg");if(a)var I=[D-l-t,D-l,(g||L.y)-N/2+(h&&!r?0:n/2),L.y+N/2-(v==E.length-1&&!r?0:n/2)];else var I=[ee+l,ee+l+t,(g||L.y)-N/2+(h&&!r?0:n/2),L.y+N/2-(v==E.length-1&&!r?0:n/2)];if(k.label){var $=T.PhyloCanvas.Render.Style.getStyle(k.labelStyle,"text"),K=ge((I[0]+I[1])/2,(I[2]+I[3])/2),se=G((I[2]+I[3])/2),ae=z(se[0]+($.rotate?parseFloat($.rotate):0)),fe=z(90-(I[2]+I[3])/2-oe);fe>90&&fe<270&&(ae+=180),$["text-anchor"]||($["text-anchor"]="middle"),L.font_color_hex?k.fill=L.font_color_hex:k.fill="#000000";var be=x.draw(new T.PhyloCanvas.Render.Text(K[0],K[1],k.label,{attr:$,rotate:ae}));be[0].toBack()}if(k.borderStyle){var _e=T.PhyloCanvas.Render.Style.getStyle(k.borderStyle,"textSecantBg"),xe=[D,_e.fullsize?I[1]:I[0],I[2],I[3]],we=x.draw(new T.PhyloCanvas.Render.Path(ye(xe),{attr:_e}));we[0].toBack()}var Ne=x.draw(new T.PhyloCanvas.Render.Path(ye(I),{attr:k}));Ne[0].toBack(),g=0,h=!1}else g||(g=L.y),L.chart[X]=="none"&&(g=0);h=!1}return a?ee:ee+l+t}function Ae(ee,X,i){for(var l=[],n,t=i&&i.bufferInner?parseFloat(i.bufferInner):T.PhyloCanvas.Render.Parameters.barChartBufferInner,r=i&&i.height?parseFloat(i.height):T.PhyloCanvas.Render.Parameters.barChartHeight?T.PhyloCanvas.Render.Parameters.barChartHeight:0,a=i&&i.width?parseFloat(i.width)<1?N*parseFloat(i.width):parseFloat(i.width):0|(T.PhyloCanvas.Render.Parameters.barChartWidth<1?N*T.PhyloCanvas.Render.Parameters.barChartWidth:T.PhyloCanvas.Render.Parameters.barChartWidth),h=0,g=0;g<E.length;g++)l.push(E[g].chart[X]);n=Math.max.apply(null,l),h=T.Common.roundFloat(r/n,4);for(var g=0;g<E.length;g++){var v=E[g];v.chart[X]>0&&x.draw(new T.PhyloCanvas.Render.Path(ye(ee+t,ee+t+h*v.chart[X],v.y-a/2,v.y+a/2),{attr:T.PhyloCanvas.Render.Style.getStyle(v.chart[X],"barChart")}))}return ee+t+r}return function(ee,X,i){if(this.getCanvasSize=function(){return[M,b]},this.getRoot=function(){return X.getRoot()},X.getValidate()){ee.draw({type:"text",x:0,y:ee.canvasSize[1]/3,text:X.getValidate()});return}x=ee;var l=X.getRoot(),n=X.getNewickLen();if(M=x.canvasSize[0],b=x.canvasSize[1],H=M/2,q=b/2,P=Math.min.apply(null,[M,b]),i=p.bufferRadius>1?p.bufferRadius:T.Common.roundFloat(P*p.bufferRadius,4),te=p.bufferAngle,d=p.innerCircleRadius,u=p.minHeightBetweenLeaves,oe=p.initStartAngle,D=Math.round((P-i-d)/2),f=(D-d)/n,N=T.Common.roundFloat((360-te)/l.getCountAllChildren(),4),ve(l,d),U=D+V+p.bufferOuterLabels,T.PhyloCanvas.Render.Parameters.integratedBinaryCharts.length){var t=T.PhyloCanvas.Render.Parameters.integratedBinaryCharts;for(var r in t){var a=t[r].bufferInner?t[r].bufferInner:T.PhyloCanvas.Render.Parameters.binaryChartBufferInner,h=t[r].thickness?t[r].thickness:T.PhyloCanvas.Render.Parameters.binaryChartThickness;U=Ce(U-h-a,t[r].chart,t[r])}}if(U=W(),T.PhyloCanvas.Render.Parameters.binaryCharts.length){var g=T.PhyloCanvas.Render.Parameters.binaryCharts;for(var r in g)U=Ce(U,g[r].chart,g[r])}if(T.PhyloCanvas.Render.Parameters.barCharts.length){var v=T.PhyloCanvas.Render.Parameters.barCharts;for(var r in v)U=Ae(U,v[r].chart,v[r])}E=[],O=[]}}();T.PhyloCanvas.Render.CircularPhylogram.prototype={};var bt=function(){var x=function(b){if(!!b&&typeof b=="object"){let P=function(){};return P.prototype=b,new P}},p=function(b){var P="";!!b&&typeof b=="string"&&(P=b);var f=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return f.test(P)},M={xmlToJSON:function(b){try{let d=function(D){return D.replace(/^\s+|\s+$/gm,"")},w=function(D){var E=/-/g,O=String(D).replace(E,"_");return O},B=function(D,E){if(E.attributes.length>0){var O=E.attributes.length-1,j;D._attributes=[];do j=String(w(E.attributes[O].name)),D._attributes.push(j),D[j]=d(E.attributes[O].value);while(O--)}},H=function(D){D.getNodeByAttribute=function(E,O){if(this.length>0){var j,te=this.length-1;try{do if(j=this[te],j[E]==O)return j;while(te--)}catch(U){return!1}return!1}},D.contains=function(E,O){if(this.length>0){var j=this.length-1;try{do if(this[j][E]==O)return!0;while(j--)}catch(te){return!1}return!1}},D.indexOf=function(E,O){var j=-1;if(this.length>0){var te=this.length-1;try{do this[te][E]==O&&(j=te);while(te--)}catch(U){return-1}return j}},D.SortByAttribute=function(E,O){if(this.length){let j=function(U,V){var oe=U[V];return oe=p(oe)?parseFloat(oe):oe,oe},te=function(U,V){var oe=0,he,ge;return he=j(U,E),ge=j(V,E),he<ge?oe=-1:ge<he&&(oe=1),O&&(oe=O.toUpperCase()=="DESC"?0-oe:oe),oe};this.sort(te)}},D.SortByValue=function(E){if(this.length){let O=function(te){var U=te.Text;return U=p(U)?parseFloat(U):U,U},j=function(te,U){var V=0,oe,he;return oe=O(te),he=O(U),oe<he?V=-1:he<oe&&(V=1),E&&(V=E.toUpperCase()=="DESC"?0-V:V),V};this.sort(j)}},D.SortByNode=function(E,O){if(this.length){let j=function(U,V){var oe=U[V][0].Text;return oe=p(oe)?parseFloat(oe):oe,oe},te=function(U,V){var oe=0,he,ge;return he=j(U,E),ge=j(V,E),he<ge?oe=-1:ge<he&&(oe=1),O&&(oe=O.toUpperCase()=="DESC"?0-oe:oe),oe};this.sort(te)}}},q=function(D,E){var O,j,te,U="";if(!E)return null;if(E.attributes.length>0&&B(D,E),D.Text="",E.hasChildNodes()){var V=E.childNodes.length-1,oe=0;do switch(j=E.childNodes[oe],j.nodeType){case 1:D._children=[],O=j.localName?j.localName:j.baseName,O=w(O),U!=O&&D._children.push(O),D[O]||(D[O]=[]),te={},D[O].push(te),j.attributes.length>0&&B(te,j),D[O].contains||H(D[O]),U=O,j.hasChildNodes()&&q(te,j);break;case 3:D.Text+=d(j.nodeValue);break;case 4:D.Text+=j.text?d(j.text):d(j.nodeValue);break}while(oe++<V)}};if(!b)return null;var P={};P.typeOf="JSXBObject";var f=b.nodeType==9?b.documentElement:b;if(P.RootName=f.nodeName||"",b.nodeType==3||b.nodeType==4)return b.nodeValue;var N=function(){var D={activate:function(){var E=[];return E&&(E.getNodesByAttribute=function(O,j){if(!!E&&E.length>0){var te=[],U,V=E.length-1;try{do U=E[V],U[O]===j&&te.push(U);while(V--);return te.reverse(),te}catch(oe){return null}return null}},E.getNodeByAttribute=function(O,j){if(!!E&&E.length>0){var te,U=E.length-1;try{do if(te=E[U],te[O]===j)return te;while(U--)}catch(V){return null}return null}},E.getNodesByValue=function(O){if(!!E&&E.length>0){var j=[],te,U=E.length-1;try{do te=E[U],!!te.Text&&te.Text===O&&j.push(te);while(U--);return j}catch(V){return null}return null}},E.contains=function(O,j){if(!!E&&E.length>0){var te=E.length-1;try{do if(E[te][O]===j)return!0;while(te--)}catch(U){return!1}return!1}},E.indexOf=function(O,j){var te=-1;if(!!E&&E.length>0){var U=E.length-1;try{do E[U][O]===j&&(te=U);while(U--)}catch(V){return-1}return te}},E.SortByAttribute=function(O,j){if(!!E&&E.length>0){let te=function(V,oe){var he=V[oe];return he=bam.validation.isNumeric(he)?parseFloat(he):he,he},U=function(V,oe){var he,ge;he=te(V,O),ge=te(oe,O);var G=he<ge?-1:ge<he?1:0;return j&&(G=j.toUpperCase()==="DESC"?0-G:G),G};E.sort(U)}},E.SortByValue=function(O){if(!!E&&E.length>0){let j=function(U){var V=U.Text;return V=bam.validation.isNumeric(V)?parseFloat(V):V,V},te=function(U,V){var oe,he;oe=j(U),he=j(V);var ge=oe<he?-1:he<oe?1:0;return O&&(ge=O.toUpperCase()==="DESC"?0-ge:ge),ge};E.sort(te)}},E.SortByNode=function(O,j){if(!!E&&E.length>0){let te=function(V,oe){var he=V[oe][0].Text;return he=bam.validation.isNumeric(he)?parseFloat(he):he,he},U=function(V,oe){var he,ge;he=te(V,O),ge=te(oe,O);var G=he<ge?-1:ge<he?1:0;return j&&(G=j.toUpperCase()==="DESC"?0-G:G),G};E.sort(U)}}),E}};return D}(),u=function(){var D=x(N);return D.activate()};return q(P,f),b=null,f=null,P}catch(d){return null}},textToXML:function(b){var P=null;try{P=document.all?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser,P.async=!1}catch(N){throw new Error("XML Parser could not be instantiated")}var f;try{document.all?f=P.loadXML(b)?P:!1:f=P.parseFromString(b,"text/xml")}catch(N){throw new Error("Error parsing XML string")}return f}};return M}();import{showSaveFilePicker as Kt}from"https://cdn.jsdelivr.net/npm/native-file-system-adapter/mod.js";var w1=function(){let x=[{name:"valapalagilaka",search:"с╣Щ",replace:()=>"r"},{name:"short e",search:"с║╜",replace:()=>"e"},{name:"short o",search:"├╡",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б e",search:"├к",replace:()=>"e"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б o",search:"├┤",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б ai",search:"├К",replace:()=>"E"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б au",search:"├Ф",replace:()=>"O"},{name:"candrabindu",search:"m╠Р",replace:()=>"M"},{name:"oс╣Гk─Бras",search:"oс╣Б",replace:()=>"oM"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"(?:kK|gG|cC|jJ|wW|qQ|tT|dD|pP|bB)",replace:N=>N[0].slice(-1)},{name:"geminated m after h",search:"(?:Mhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rfi]|p[aA])tt|tt(?=[rvy]\\S)",replace:N=>`${N[1]}t`},{name:"geminated consonants after r",search:"([rf]\\s*)([kgcjwqdpbRnmyvl])\\2{1,2}",replace:N=>`${N[1]}${N[2]}`},{name:"final nasal variants",search:"(?:M[lSs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnNYR](?=[pPbBmdDtTnwWqQcCjJkKgG])",replace:()=>"M"},{name:"final anusv─Бra variants",search:"M?[mN](?!\\S)|n(?=\\s+[tdn])|Y(?=\\s+[jc])",replace:()=>"M"},{name:"visarga aс╕е before voiced consonants",search:"(?<!\\sB)(?:a[Hr]|[o])(?=\\s+['gGjJqQdDnbBmrylvh])",replace:()=>"aH"},{name:"visarga aс╕е before vowels",search:"aH(?=\\s+[AiIeuUof])",replace:()=>"a"},{name:"visarga aс╕е before unvoiced consonants and space + anusv─Бra",search:"o\\s+(?=[kKcCwWtTpPszSM])",replace:()=>"aH a"},{name:"visarga ─Бс╕е variants",search:"AH(?=\\s+[aAiIeEuUogGjJqQdDbBnmyrlvh])",replace:()=>"A"},{name:"other visarga variants",search:"H?[rszS](?!\\S)",replace:()=>"H"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"z(?=[kK])|s(?=s)",replace:()=>"H"},{name:"final au/─Бv",search:"Av(?!\\S)",replace:()=>"O"},{name:"final su",search:"(?<=[sz])v(?=\\s+[aAiIuUoOeE])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aAuUoOeE])",replace:()=>"y"},{name:"kcch/k┼Ы",search:"k(\\s*)(?:S|c?C)",replace:N=>`k${N[1]}S`},{name:"c┼Ы/t┼Ы",search:"[tc](\\s*)S",replace:N=>`c${N[1]}C`},{name:"cch/ch",search:"([aAiIuUeEoO])C",replace:N=>`${N[1]}cC`},{name:"final t + hi",search:"d(\\s+)D(?=[iy](?:\\s|$))",replace:N=>`t${N[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aAiIeEuUoOgGdDbByrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:N=>`${N[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aAuUeEoO])",replace:()=>"i"},{name:"bhd for bdh",search:"Bd",replace:()=>"bD"}],p=[{name:"valapalagilaka",search:"с╣Щ",replace:()=>"r"},{name:"short e",search:"с║╜",replace:()=>"e"},{name:"short o",search:"├╡",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б e",search:"├к",replace:()=>"e"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б o",search:"├┤",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б ai",search:"a├о",replace:()=>"ai"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б au",search:"a├╗",replace:()=>"au"},{name:"candrabindu",search:"m╠Р",replace:()=>"с╣Г"},{name:"oс╣Гk─Бras",search:"oс╣Б",replace:()=>"oс╣Г"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"([kgcjс╣нс╕Нtdpb]){2}h",replace:N=>`${N[1]}h`},{name:"geminated m after h",search:"(?:с╣Гhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rс╣Ыi]|p[a─Б])tt|tt(?=[rvy]\\S)",replace:N=>`${N[1]}t`},{name:"geminated consonants after r",search:"([rс╣Ы]\\s*)([kgcjс╣нс╕Нс╣Зtdnpbmyvl])\\2{1,2}",replace:N=>`${N[1]}${N[2]}`},{name:"final nasal variants",search:"(?:с╣Г[lс╣гs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnс╣Е├▒с╣З](?=[pbmdtnс╣нс╕Нcjkg])",replace:()=>"с╣Г"},{name:"final anusv─Бra variants",search:"с╣Г?[mс╣Е](?!\\S)|n(?=\\s+[tdn])|├▒(?=\\s+[jc])",replace:()=>"с╣Г"},{name:"visarga aс╕е before voiced consonants",search:"(?:a[с╕еr]|[o])(?=\\s+['gjс╕Нdnbmyrlvh])",replace:()=>"aс╕е"},{name:"visarga aс╕е before vowels",search:"aс╕е(?=\\s+[─Бi─лeu┼лoс╣Ы])",replace:()=>"a"},{name:"visarga aс╕е before unvoiced consonants and space + anusv─Бra",search:"o\\s+(?=[kcс╣нtp┼Ыс╣гsс╣Г])",replace:()=>"aс╕е a"},{name:"visarga ─Бс╕е variants",search:"─Бс╕е(?=\\s+[a─Бi─лeu┼лogjс╕Нdnbmyrlvh])",replace:()=>"─Б"},{name:"other visarga variants",search:"с╕е?[r┼Ыс╣гs](?!\\S)",replace:()=>"с╕е"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"с╣г(?=k)|s(?=s)",replace:()=>"s"},{name:"final au/─Бv",search:"─Бv(?!\\S)",replace:()=>"au"},{name:"final su",search:"(?<=[sс╣г])v(?=\\s+[a─Бi─лu┼лoe])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[a─Бu┼лeo])",replace:()=>"y"},{name:"kcch/k┼Ы",search:"k(\\s*)(?:┼Ы|c?ch)",replace:N=>`k${N[1]}┼Ы`},{name:"c┼Ы/t┼Ы",search:"[tc](\\s*)┼Ы",replace:N=>`c${N[1]}ch`},{name:"cch/ch",search:"([a─Бi─лu┼лeo])ch",replace:N=>`${N[1]}cch`},{name:"final t + hi",search:"d(\\s+)dh(?=[iy](?:\\s|$))",replace:N=>`t${N[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[a─Бi─лeu┼лogdbyrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:N=>`${N[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[a─Бu┼лeo])",replace:()=>"i"},{name:"bhd for bdh",search:"bhd",replace:()=>"bdh"}],M={none:{name:"remove spaces",search:"\\s",replace:()=>""},collapse:{name:"collapse spaces",search:"\\s+",replace:()=>" "}},b=function(N,u){let d=u.join(""),w=[],B=[...d.matchAll(N.search)],H=0,q=null;for(let D of u){let E=H+D.length,O=D,j=0;if(q)if(q.length<=D.length)O=P(D,0,q.length,q.text),j=q.text.length-q.length,q=null;else{O=q.text.slice(0,D.length);let U=q.text.slice(D.length);q={length:q.length-D.length,text:U};continue}for(;B.length>0&&B[0].index<E;){let te=B.shift(),U=te.index-H+j,V=N.replace(te);if(te.index+te[0].length<E)O=P(O,U,te[0].length,V),j=j+V.length-te[0].length;else{let oe=D.length-U+j,he=V.slice(0,oe);O=O.slice(0,U)+he;let ge=V.slice(oe);q={length:te[0].length-oe,text:ge}}}w.push(O),H=E}return w},P=function(N,u,d,w){return N.slice(0,u)+w+N.slice(u+d)};return function(N){let u=N.map(d=>De.t(d,"iast","slp1"));for(let d of[...x,M.none])u=b(d,u);return u.map(d=>De.t(d,"slp1","iast"))}}();var Bt={smush:function(x,p){return x.toLowerCase().replace(/([с╕Нdrmvynhs]) ([a─Бi─лu┼лс╣Ыeo├й├│])/g,"$1$2"+p).replace(/([kgcjс╣нс╕Нtdpb]) h/g,"$1тАМ"+p+"h").replace(/([kgcj├▒с╕Нtdnpbmrlyv┼Ыс╣гsс╣Щ]) ([kgcjс╣нс╕Нtdnpbmyrlv┼Ыс╣гshс╕╗])/g,"$1"+p+"$2").replace(/([o├│e├й─Б]) ([с╣Г'])/g,"$1"+p+"$2").replace(/^с╣Г/,"'тАНс╣Г").replace(/^с╕е/,"'тАНс╕е").replace(/^_y/,"'тАНy").replace(/├╝/g,"тАМu").replace(/├п/g,"тАМi").replace(/_{1,2}(?=\s*)/g,function(M){if(M==="__")return"тАН";if(M==="_")return"тАМ"})},iast:function(x,p){let M=p||"devanagari";return De.t(x,M,"iast",{skip_sgml:!0})},devanagari:function(x,p){let M=p||"",b={skip_sgml:!0},P=x.replace(/с╣Щ/g,"r").replace(/^_─Б/,"рд╜тАНрд╛"),f=Bt.smush(P,M);return De.t(f,"iast","devanagari",b).replace(/┬п/g,"ъг╗")},malayalam:function(x,p){let M=p||"",b={skip_sgml:!0},P={р┤Х:"р╡┐",р┤д:"р╡╜",р┤и:"р╡╗",р┤о:"р╡Ф",р┤░:"р╡╝"},f=x.replace(/^_─Б/,"р┤╜тАНр┤╛"),N=Bt.smush(f,M).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"r").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return De.t(N,"iast","malayalam",b).replace(/(^|[^р╡Н])р┤░р╡Н(?=\S)/g,"$1р╡О").replace(/([р┤Хр┤др┤ир┤ор┤░])р╡Н(?![^\s\u200C,тАФтАЩтАХ])/g,function(d,w){return P[w]})},grantha:function(x,p){let M=p||"",b={skip_sgml:!0},P=new Map([["р┤╕","юЗУ"],["р┤░","р╡╝"],["р┤п","юЗЛ"],["р┤Ъ","юЖ╢"],["р┤ж","юЗВ"],["р┤╢","юЗТ"]]),f=new RegExp("(["+[...P.keys()].join("")+"])р╡Н(?![^тАМ ,тАФтАЩтАХ])","g"),N=x.replace(/^_─Б/,"р┤╜тАНр┤╛"),u=Bt.smush(N,M).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"r").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return De.t(u,"iast","malayalam",b).replace(/(^|[^р╡Н])р┤░р╡Н(?=\S)/g,"$1р╡О").replace(f,(w,B)=>P.get(B)).replace(/р┤Хр╡Нр┤╖р┤┐/g,"роХрпНро╖ро┐")},telugu:function(x,p){var M=p||"";let b={skip_sgml:!0},P=x.replace(/^_─Б/,"р░╜тАНр░╛"),f=Bt.smush(P,M).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"rтАН").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return De.t(f,"iast","telugu",b)}},Ot=function(x,p,M=!1,b="sa"){let P=Bt[p],f=x.cloneNode(!0),N=function(u,d){let w=u.childNodes;for(let B of w)if(B.nodeType!==8){if(B.nodeType===3){if(d!=="sa")continue;B.data=P(B.data,M)}else if(B.hasChildNodes()){let H=B.getAttribute("lang")||d;H==="sa"&&B.classList.contains("subst")&&K1(B,p),N(B,H)}}};return N(f,b),f},C1=function(x,p=!1){if(x.nodeType===3)return x;let M=document.createTreeWalker(x,NodeFilter.SHOW_TEXT,null,!1);if(p){let b;for(;M.nextNode();)b=M.currentNode;return b}else return M.nextNode},K1=function(x,p){if(x.firstChild.nodeType!==3&&x.lastChild.nodeType!==3)return;let M=x.childNodes,b=/^[a─Бi─лu┼лeoс╣Ыс╣Эс╕╖с╣Гс╕е]/,P=/[kgс╣Еcj├▒с╣нс╕Нс╣Зtdnpbmyrlvс╣г┼Ыsh]$/,f=["─Б","i","─л","e","o","_","ai","au"],N=["h","k","┼Ы","y","g","gh","c","ch","jh","с╣нh","с╕Н","с╕Нh","t","th","d","dh","n","p","ph","bh","m","r","с╕╗","v","с╣г","s"];var u=!1,d=[],w=[];let B=M[0].nodeType===3;for(let H of M){if(H.nodeType>3)continue;let q=H.textContent.trim();if(q!==""){if(q==="a"){H.textContent="";continue}if(q.match(P)){let D=C1(H,!0);D.textContent=D.textContent.replace(/\s+$/,"")+"a",p==="telugu"&&N.indexOf(q)>=0&&d.push(H)}if(H===x.lastChild&&H.nodeType===3){let D=document.createElement("span");D.appendChild(H.cloneNode(!1)),x.replaceChild(D,H),H=D,H.classList.add("aalt")}else B&&q.match(b)&&H.classList.add("aalt");switch(p){case"devanagari":(q==="i"||q==="├й")&&w.unshift(H);break;case"grantha":case"malayalam":if(q==="e"||q==="ai")w.unshift(H);else if(q==="o"){let D=H.cloneNode(!0);_1("o","e",D),w.unshift(D),_1("o","─Б",H)}break;case"telugu":!u&&f.indexOf(q)>=0&&(u=!0);break}}}for(let H of w)x.insertBefore(H,x.firstChild);if(u)for(let H of d){let q=C1(H,!0);q.textContent=q.textContent+"тАНр▒Н"}},_1=function(x,p,M){let b=document.createTreeWalker(M,NodeFilter.SHOW_TEXT,null,!1);for(;b.nextNode();)b.currentNode.textContent.match(x)&&(b.currentNode.textContent=p)};"use strict";var Z1=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,115,116,114,105,112,45,115,112,97,99,101,32,101,108,101,109,101,110,116,115,61,34,42,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,47,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,97,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,45,45,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,33,45,45,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,45,45,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),k1=Z1;"use strict";var en=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,32,32,32,32,60,120,115,108,58,111,117,116,112,117,116,32,105,110,100,101,110,116,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,72,101,97,100,101,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,120,101,110,111,68,97,116,97,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),S1=en;"use strict";var tn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,97,98,108,101,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,114,101,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,100,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,115,101,108,101,99,116,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,104,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,99,111,112,101,34,62,114,111,119,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,114,97,103,103,97,98,108,101,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,100,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,97,114,101,110,116,58,58,120,58,99,108,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,39,49,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,115,116,97,114,116,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,101,110,100,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,105,110,116,101,114,110,97,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,105,110,115,105,103,110,105,102,105,99,97,110,116,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,105,110,115,105,103,110,105,102,105,99,97,110,116,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,98,105,110,97,114,121,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,98,105,110,97,114,121,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),A1=tn;"use strict";var nn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,116,114,101,101,45,118,101,114,115,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,108,97,110,103,34,62,101,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,91,118,101,114,115,101,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,93,60,47,120,115,108,58,116,101,120,116,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),P1=nn;"use strict";var rn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,101,109,101,110,100,101,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,110,111,116,40,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,105,110,118,105,115,105,98,108,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,48,48,65,48,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,55,51,59,60,47,120,115,108,58,116,101,120,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,99,108,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,114,111,117,112,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),E1=rn;"use strict";var sn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),R1=sn;var wt=function(x){let M=new DOMParser().parseFromString(x,"text/xml"),b=new XSLTProcessor;return b.importStylesheet(M),b},L1=function(x,p){this.transformString=function(M,b){let P=x.xml.createElementNS(p.teins,"ab");return P.innerHTML=M,b.transformToFragment(P,document)},this.sheets={csv:wt(k1),xml:wt(S1),matrix:wt(A1),lemma:wt(E1),lg:wt(R1),tree:wt(P1)}};var B1=function(x){let p={basename(){return x.filename.split(/\.[^.]+$/)[0]},range(b,P){return Array.from(Array(parseInt(P)-parseInt(b)+1).keys(),f=>f+b)},maxlemma(){return[...p.firsttext().querySelectorAll("w[n]")].length-1},lemmata(b,P){let f=P||document.querySelector("#views");return b===!1?f.querySelectorAll(".lemma"):f.querySelectorAll(`.lemma[data-n="${b}"]`)},tds(b,P){let f=P||x.matrix.boxdiv;return b===!1?f.querySelectorAll("td[data-n]"):f.querySelectorAll(`td[data-n="${b}"]`)},firsttd(b,P){return(P||x.matrix.boxdiv).querySelector(`td[data-n="${b}"]`)},tr(b){return x.matrix.boxdiv.querySelector(`tr[data-n="${b}"]`)},trs(b){return(b||x.matrix.boxdiv).querySelectorAll("tr[data-n]")},firsttr(b){return(b||x.matrix.boxdiv).querySelector("tr[data-n]")},lasttr(b){return(b||x.matrix.boxdiv).querySelector("tr[data-n]:last-of-type")},trWalker(b){return document.createNodeIterator(b,NodeFilter.SHOW_ELEMENT,{acceptNode:function(P){if(P.tagName==="TD")return NodeFilter.FILTER_ACCEPT}},!1)},textWalker(b){return document.createNodeIterator(b,NodeFilter.SHOW_ELEMENT,{acceptNode:function(P){if(P.tagName.toLowerCase()==="w")return NodeFilter.FILTER_ACCEPT}},!1)},tei(b,P=x.xml){return P.querySelector(`TEI[n="${b}"]`)},teis(b=x.xml){return b.querySelectorAll("TEI")},texts(b){return(b||x.xml).querySelectorAll("text")},serializedtexts(b,P){let f=[...b.querySelectorAll("otu[label]")].map(u=>u.getAttribute("label")),N=[...p.teis()].filter(u=>f.indexOf(u.getAttribute("n"))!==-1);return new Map(N.map(u=>[b.querySelector(`node[label="${u.getAttribute("n")}"]`).getAttribute("id"),[...u.querySelectorAll("w")].map(d=>P&&d.hasAttribute("lemma")?d.getAttribute("lemma"):d.textContent)]))},serializedlevels(b){return b.map(P=>{if(P instanceof Map){let f=new Map;for(let[N,u]of P)f.set(N.getAttribute("id"),u.map(d=>d.getAttribute("id")));return f}else return P.map(f=>f.getAttribute("id"))})},firsttext(b){return b?x.xml.querySelector(`[n="${b}"] text`):x.xml.querySelector("text")},words(b,P){let f=P||x.xml;return b===!1?f.querySelectorAll("w[n]"):f.querySelectorAll(`w[n="${b}"]`)},firstword(b,P){return(P||x.xml).querySelector(`w[n="${b}"]`)},normal(b){return(b||document.getElementById("views")).querySelectorAll(".lemma[data-normal], .tree-lemma[data-normal]")},htmlreading(b,P){return P&&b.dataset.normal?b.dataset.normal:b.IAST.textContent},ths(){return x.matrix.boxdiv.querySelectorAll("th[data-ref]")},firstth(b){return x.matrix.boxdiv.querySelector(`th[data-ref="${b}"]`)},checkbox(b,P){return x.matrix.boxdiv.querySelector(`th[data-ref="${b}"] input.${P}`)},highlit(){let P=p.firsttr().querySelectorAll(".highlit"),f=new Set;for(let N of P)f.add(N.dataset.n);return f},highlitcell(){return x.matrix.boxdiv.querySelector("td.highlitcell")},highlitrow(){let b=p.highlitcell();return b?b.closest("tr"):!1},lowhigh(b){let P=[...b].sort((u,d)=>parseInt(u)-parseInt(d)),f=parseInt(P[0]),N=P.length>1?parseInt(P[P.length-1]):void 0;return[f,N]},readings(b,P){let f=P||x.matrix.boxdiv,N=p.tds(b,f);var u=0;let d=new Set;for(let w of N){let B=w.textContent;B!==""&&(u++,d.add(B))}return[u,d.size]},attr(b,P){let f=p.firsttr();var N=[];for(let u of P)p.firsttd(u,f).dataset[b]==="true"?N.push([u,!0]):N.push([u,!1]);return new Map(N)},whichattr(b){return b.hasAttribute("n")?"n":b.hasAttribute("data-n")?"data-n":b.hasAttribute("data-ref")?"data-ref":!1},clauses(b,P=!1){let f=p.firsttext();var N=!1;let u=new Set;for(let d of b){let B=p.firstword(d,f).closest("cl");B?u.add(B):P&&(N=!0)}if(u.size===0)return!1;{let d=[...u].map(w=>{let B=w.querySelectorAll("w");return new Set([...B].map(H=>H.getAttribute("n")))});return N?[null].concat(d):d}},clausesToRemove(b,P,f=0){let N=new Set;for(let u of b){let d=new Set(u);for(let w of P)d.delete(w);d.size<=f&&N.add(u)}return[...N]},empty(){let b=new Set,P=[...p.trs()],f=P.map(d=>p.trWalker(d)),N=P[0].querySelector("td:last-of-type").dataset.n;for(let d=0;d<=N;d++){var u=!0;for(let w of f){let B=w.nextNode();u&&B.textContent!==""&&(u=!1)}u&&b.add(d)}return b},prevNonempty(b,P){for(let f=b;f>=0;f--)if(P[f].textContent!=="")return f;return!1},nextNonempty(b,P){for(let f=b;f<P.length;f++)if(P[f].textContent!=="")return f;return!1},setIntersection(...b){let P=b[0];return new Set([...P].filter(f=>{for(let N=1;N<b.length;N++)if(!b[N].has(f))return!1;return!0}))},setUnion(...b){return new Set(b.reduce((P,f)=>(P=[...P,...f],P),[]))},cursorPos(b){let P=window.getSelection().getRangeAt(0),f=P.cloneRange();f.selectNodeContents(b);let N=f.toString().length;return f.setEnd(P.endContainer,P.endOffset),[f.toString().length,N]},selection(){let b=window.getSelection();if(b.isCollapsed)return!1;let P=b.rangeCount>1?b.getRangeAt(1).cloneContents():b.getRangeAt(0).cloneContents();if(!P)return!1;let f=new Set,N=P.querySelectorAll(".lemma");for(let u of N)f.add(u.dataset.n);return f}},M={undo(){return x.undo.length>0},redo(){return x.redo.length>0},checkbox(b,P=null){if(!M.anyhighlit())return!1;let f=P===null?p.highlit():P,N=p.attr(b,f);for(let u of N.values())if(u===!1)return!1;return!0},grouped(){let b=p.highlit();if(!b)return!1;let P=p.firsttr();for(let f of b){let N=p.firsttd(f,P);if(N.classList.contains("group-start")||N.classList.contains("group-internal")||N.classList.contains("group-end"))return!0}return!1},oneGrouped(){let b=p.highlit();if(b.size===0)return!1;if(b.size===1){let P=p.firsttr(),f=p.firsttd([...b][0],P);return!!(f.classList.contains("group-start")||f.classList.contains("group-end")||f.classList.contains("group-internal"))}return!0},anyhighlit(){return!!x.matrix.boxdiv.querySelector("td.highlit")},manyhighlit(){return p.highlit().size>1},highlitcell(){return!!x.matrix.boxdiv.querySelector("td.highlitcell")},normalizedView(){return document.getElementById("views").classList.contains("normalized")},anyNormalized(){return x.matrix.boxdiv.querySelector(".lemma[data-normal]")},headerView(){return x.matrix.boxdiv.querySelector("tr.header").style.display!=="none"}};return{find:p,check:M}};var N1=function(){var x,p,M,b;let P={setIntersection:function(...d){let w=d[0];return new Set([...w].filter(B=>{for(let H=1;H<d.length;H++)if(!d[H].has(B))return!1;return!0}))},setUnion:function(...d){return new Set(d.reduce((w,B)=>(w=[...w,...B],w),[]))}},f=function(d,w){let B=new Map;for(let H of p[0]){let q=x.get(H),D=q?[q[d]]:[];B.set(H,new Set(D))}for(let H=1;H<p.length;H++)for(let[q,D]of p[H]){let E=D.map(te=>B.get(te)),O=P.setIntersection(...E);if(q===w&&O.size===1)return[...O][0];let j=O.size>0?O:P.setUnion(...E);B.set(q,j)}return B},N=function(d,w){let B=p[0],H=new Map;for(let q of p[p.length-1])H.set(q[0],d.get(q[0]));for(let q=p.length-1;q>1;q--)for(let[D,E]of p[q]){let O=H.get(D);for(let j of E){if(B.indexOf(j)!==-1)continue;let te=d.get(j),U=P.setIntersection(O,te),V=U.size>0?U:te;if(j===w)return V;H.set(j,V)}}return H.get(w)},u=function(d,w){let B=f(w,d);return typeof B=="string"?B:function(q){if(q.size===1)return[...q][0].trim();let D=[...q].map(E=>E.trim()===""?"_":E);return D.length===1?D[0]:"{"+D.join(", ")+"}"}(N(B,d))};onmessage=function(d){x=d.data.readings,p=d.data.levels,M=d.data.num,b=d.data.id,postMessage({n:M,result:u(b,M)})}};function Ht(x){var p=[],M=0;if(this.trie=this.createTrie(x.patterns),this.leftMin=x.leftmin,this.rightMin=x.rightmin,this.exceptions={},x.exceptions)for(p=x.exceptions.split(/,\s?/g);M<p.length;M+=1)this.exceptions[p[M].replace(/\u2027/g,"").toLowerCase()]=new RegExp("("+p[M].split("тАз").join(")(")+")","i")}Ht.prototype.createTrie=function(x){var p=0,M=0,b=0,P=0,f=null,N=null,u=null,d=null,w={_points:[]},B;for(p in x)if(x.hasOwnProperty(p))for(B=x[p].match(new RegExp(".{1,"+ +p+"}","g")),M=0;M<B.length;M+=1){for(f=B[M].replace(/[0-9]/g,"").split(""),N=B[M].split(/\D/),d=w,b=0;b<f.length;b+=1)u=f[b].charCodeAt(0),d[u]||(d[u]={}),d=d[u];for(d._points=[],P=0;P<N.length;P+=1)d._points[P]=N[P]||0}return w};Ht.prototype.hyphenateText=function(x,p){p=p||4;for(var M=x.split(/([a-zA-Z0-9_\u0027\u00AD\u00DF-\u00EA\u00EB\u00EC-\u00EF\u00F1-\u00F6\u00F8-\u00FD\u0101\u0103\u0105\u0107\u0109\u010D\u010F\u0111\u0113\u0117\u0119\u011B\u011D\u011F\u0123\u0125\u012B\u012F\u0131\u0135\u0137\u013C\u013E\u0142\u0144\u0146\u0148\u0151\u0153\u0155\u0159\u015B\u015D\u015F\u0161\u0165\u016B\u016D\u016F\u0171\u0173\u017A\u017C\u017E\u017F\u0219\u021B\u02BC\u0390\u03AC-\u03CE\u03F2\u0401\u0410-\u044F\u0451\u0454\u0456\u0457\u045E\u0491\u0531-\u0556\u0561-\u0587\u0902\u0903\u0905-\u090B\u090E-\u0910\u0912\u0914-\u0928\u092A-\u0939\u093E-\u0943\u0946-\u0948\u094A-\u094D\u0982\u0983\u0985-\u098B\u098F\u0990\u0994-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BE-\u09C3\u09C7\u09C8\u09CB-\u09CD\u09D7\u0A02\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A14-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A82\u0A83\u0A85-\u0A8B\u0A8F\u0A90\u0A94-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABE-\u0AC3\u0AC7\u0AC8\u0ACB-\u0ACD\u0B02\u0B03\u0B05-\u0B0B\u0B0F\u0B10\u0B14-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3E-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B57\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C02\u0C03\u0C05-\u0C0B\u0C0E-\u0C10\u0C12\u0C14-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C43\u0C46-\u0C48\u0C4A-\u0C4D\u0C82\u0C83\u0C85-\u0C8B\u0C8E-\u0C90\u0C92\u0C94-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBE-\u0CC3\u0CC6-\u0CC8\u0CCA-\u0CCD\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D7A-\u0D7F\u1F00-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB2-\u1FB4\u1FB6\u1FB7\u1FBD\u1FBF\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD2\u1FD3\u1FD6\u1FD7\u1FE2-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u200D\u2019]+)/gi),b=0;b<M.length;b+=1)M[b].indexOf("/")!==-1?b!==0&&b!==M.length-1&&!/\s+\/|\/\s+/.test(M[b])&&(M[b]+="тАЛ"):M[b].length>p&&(M[b]=this.hyphenate(M[b]).join("┬н"));return M.join("")};Ht.prototype.hyphenate=function(x){var p,M=[],b,P,f,N,u,d=[],w,B=x.toLowerCase(),H,q,D=Math.max,E=this.trie,O=[""];if(this.exceptions.hasOwnProperty(B))return x.match(this.exceptions[B]).slice(1);if(x.indexOf("┬н")!==-1)return[x];for(x="_"+x+"_",p=x.toLowerCase().split(""),b=x.split(""),w=p.length,P=0;P<w;P+=1)d[P]=0,M[P]=p[P].charCodeAt(0);for(P=0;P<w;P+=1)for(u=E,f=P;f<w&&(u=u[M[f]],u);f+=1)if(H=u._points,H)for(N=0,q=H.length;N<q;N+=1)d[P+N]=D(d[P+N],H[N]);for(P=1;P<w-1;P+=1)P>this.leftMin&&P<w-this.rightMin&&d[P]%2?O.push(b[P]):O[O.length-1]+=b[P];return O};var on=Ht,T1=on;var M1={id:"sa",leftmin:2,rightmin:2,patterns:{2:"a1e1i1o1u1├й1├н1├п1├│1├║1├╝1─Б1─л1┼л1с╕╖1с╕╣1с╣Ы1с╣Э1",3:"2b_2c_2d_2g_2h_2j_2k_2l_2m_2n_2p_2r_2s_2t_2v_2y_2├▒_2┼Ы_2с╕Н_2с╕е12с╕л12с╕╖_2с╣Б12с╣Г12с╣Е_2с╣З_2с╣н_2с║Ц1l╠е1r╠е1",4:"2bh_2ch_2dh_2gh_2jh_2kh_2m╠Р12ph_2rb_2rd_2rg_2rk_2rp_2rt_2rс╕Н_2rс╣н_2th_2с╕Нh_2с╣нh_a2i1a2u1a3├п1a3├╝1l╠е╠Д1r╠е╠Д1"}};window.comboView=function(){let x={teins:"http://www.tei-c.org/ns/1.0",scripts:["iast","devanagari","telugu","grantha","malayalam"]},p={filename:null,xml:null,treelist:new Map,trees:[],textboxes:[],matrix:null,viewdiv:null,descs:null,maxlemma:null,windows:[window],dragged:null,undo:[],redo:[],editing:!1},M=new T1(M1),b=new L1(p,x),P=new B1(p),f=P.find,N=P.check,u=function(){let i=document.getElementById("tooltip");i&&i.remove()},d=function(){let i=document.getElementById("left_menu");i.innerHTML=`<div id="matrixmenu" class="menubox">
    <div class="heading">Matrix</div>
      <ul>
        <li>select CSV/XML file(s): <input type="file" id="file" name="file" accept=".xml,.csv" multiple/></li>
      </ul>
</div>
<div style="display: none" id="mssmenu" class="menubox">
    <div class="heading">Texts</div>
    <ul class="ms">
    </ul>
</div>
<div style="display: none" id="treemenu" class="menubox">
    <div class="heading">Trees</div>
        <ul class="tree">
            <li>select NeXML file: <input type="file" id="treefile" name="treefile" accept=".xml"/></li>
        </ul>
    </div>
`;let l=document.getElementById("menu");l.addEventListener("mouseover",de.menuMouseover),l.addEventListener("mouseout",de.menuMouseout),l.addEventListener("click",de.menuClick),l.querySelector("#file").addEventListener("change",O.bind(null,j),!1),l.querySelector("#treefile").addEventListener("change",O.bind(null,te),!1)},w={matrix:function(){return p.matrix=new X,p.matrix.init(),p.matrix.show(),document.getElementById("matrixmenu").style.display="none",B(),E.rehighlight(),p.matrix},text:function(i){let l=new ee(i);return p.textboxes.push(l),l.init(),l.show(),B(),E.rehighlight(),document.querySelector(".highlit")||de.textClick({target:l.boxdiv.querySelector(".lemma:not(.invisible)")}),l},tree:function(i,l){let n=new Ae(i,l);return p.trees.push(n),n.init(),n.show(),B(),E.rehighlight(),n}},B=function(){for(let i of p.trees)i.draw()},H=function(){let i=window.getSelection?window.getSelection():document.selection;i&&(i.removeAllRanges?i.removeAllRanges():i.empty&&i.empty())},q=function(i){let l=document.createTreeWalker(i,NodeFilter.SHOW_TEXT);for(;l.nextNode();){let n=D(l.currentNode.nodeValue);l.currentNode.nodeValue=n}},D=function(i){return M.hyphenateText(i.replace(/ \|/g,"┬а|").replace(/\| (?=\d)/g,"|┬а").replace(/\|\|/g,"рее").replace(/\|/g,"ред"))},E={getAllWindows:function(){return window.mainWindow?window.mainWindow.comboView.getWindows():p.windows},forEachWindow:function(i){let l=E.getAllWindows();for(let n of l)if(!n.closed&&i(n)===!1)break},highlightLemma:function(i,l){var n=!!l;E.forEachWindow(t=>{let r=t.comboView.getViewdiv().querySelectorAll('[data-n="'+i+'"]');for(let h of r)(!n||!h.classList.contains("invisible"))&&h.classList.add("highlit");let a=t.comboView.getViewdiv().querySelectorAll('[data-n-trans="'+i+'"]');for(let h of a)h.classList.add("translit")})},highlightRange:function(i){if(!i||i.size===0)return;E.unHighlightAll();let[l,n]=f.lowhigh(i);if(n!==void 0)for(let t=l;t<=n;t++)E.highlightLemma(t,!0);else E.highlightLemma(l);E.repopulateTrees(l,n);for(let t of p.viewdiv.querySelectorAll(".text-box"))t.querySelector(".highlit")||t.querySelector('[data-n="'+l+'"]').classList.add("highlit");ye.xScroll(l)},highlightAll:function(){N.anyhighlit()?E.unHighlightAll():E.highlightRange(new Set([0,f.maxlemma()]))},unHighlightAll:function(){E.forEachWindow(i=>{let l=i.comboView.getViewdiv().querySelectorAll(".highlit");for(let t of l)t.classList.remove("highlit");let n=i.comboView.getViewdiv().querySelectorAll(".translit");for(let t of n)t.classList.remove("translit");E.unCelllightAll()})},unCelllightAll:function(){E.forEachWindow(i=>{let l=i.comboView.getViewdiv().querySelectorAll(".highlitcell");for(let n of l)n.classList.remove("highlitcell")})},rehighlight:function(){var i;if(E.forEachWindow(n=>{if(i=n.document.querySelectorAll(".highlit"),i.length>0)return!1}),i.length>0){var l=new Set;for(let n of i)l.add(n.dataset.n);E.highlightRange(l)}},clearTrees:function(){E.forEachWindow(i=>{let l=i.comboView.getTrees();for(let n of l)n.clearlemmata()})},repopulateTrees:function(i,l){E.forEachWindow(n=>{let t=n.comboView.getTrees();for(let r of t)r.populate(i,l),r.colourizeVariants(i,l),r.updatescript()})},highlightTreeLemma:function(i){E.forEachWindow(l=>{let n=l.comboView.getTrees();for(let t of n){let r=t.boxdiv.querySelector('.tree-lemma[data-id="'+i+'"]'),a=t.boxdiv.querySelectorAll(".tree-lemma");for(let h of a)(r.dataset.nodes&&h.dataset.nodes===r.dataset.nodes||!r.dataset.nodes&&h.dataset.id===r.dataset.id)&&h.classList.add("highlit");t.clearLabels()}})},unhighlightTrees:function(){E.forEachWindow(i=>{let l=i.comboView.getViewdiv().querySelectorAll(".tree-lemma.highlit");for(let t of l)t.classList.remove("highlit");let n=i.comboView.getTrees();for(let t of n)t.clearLabels()})}},O=function(i,l){let n=l.target.files[0],t=[...l.target.files].slice(1),r=new FileReader;r.onload=i.bind(null,n,t),r.readAsText(n)},j=function(i,l,n){p.filename=i.name,document.title=document.title+`: ${p.filename}`,p.filename.split(".").pop()==="csv"?V(i,l,n):oe(i,l,n)},te=function(i,l,n){let t=n.target.result,a=new DOMParser().parseFromString(t,"text/xml"),h=p.xml.querySelector("teiHeader > xenoData")||function(){let v=p.xml.querySelector("teiHeader")||function(){let k=p.xml.createElementNS(x.teins,"teiHeader");return p.xml.documentElement.appendChild(k),k}(),L=p.xml.createElementNS(x.teins,"xenoData");return v.appendChild(L),L}(),g=p.xml.createElementNS(x.teins,"stemma");g.setAttribute("format","nexml"),g.id="stemma"+[...h.querySelectorAll("stemma")].length,g.appendChild(a.firstChild.cloneNode(!0)),h.appendChild(g),U(a,g.id)},U=function(i,l,n=!0){let t=i.querySelectorAll("tree"),r=document.querySelector("#treemenu ul");for(let a of t){let h=a.id,g=i.cloneNode(!0);for(let k of g.querySelectorAll("tree"))k.id!==h&&k.parentNode.removeChild(k);let v=a.getAttribute("label")||"New Tree "+p.treelist.size;p.treelist.set(`#${l} #${h}`,g);let L=document.createElement("li");L.dataset.name=v,L.dataset.treeid=h,L.dataset.stemmaid=l,L.appendChild(document.createTextNode(v)),r.insertBefore(L,r.lastElementChild),n&&w.tree(l,h)}},V=function(i,l,n){let t=Qt.parse(n.target.result,{delimiter:","});p.xml=document.implementation.createDocument(x.teins,"",null);let r=p.xml.createElementNS(x.teins,"teiCorpus"),a=p.xml.createElementNS(x.teins,"teiHeader");r.appendChild(a),p.xml.appendChild(r);for(let h of t){let g=h[0],v=h.slice(1),L=p.xml.createElementNS(x.teins,"TEI");L.setAttribute("n",g);let k=p.xml.createElementNS(x.teins,"text");for(let I=0;I<v.length;I++){let $=v[I],K=p.xml.createElementNS(x.teins,"w");$&&K.appendChild(document.createTextNode($)),K.setAttribute("n",I),k.appendChild(K)}L.appendChild(k),r.appendChild(L)}p.xml.normalize(),p.maxlemma=f.maxlemma(),G()},oe=function(i,l,n){let t=new DOMParser;p.xml=t.parseFromString(n.target.result,"text/xml");let r=p.xml.querySelectorAll("teiHeader xenoData stemma nexml");for(let a of r){let h=document.implementation.createDocument("http://www.nexml.org/2009","",null);h.appendChild(a.cloneNode(!0)),U(h,a.closest("stemma").id,!1)}p.maxlemma=f.maxlemma(),l.length>0?he(l):G()},he=function(i){let l=i[0],n=i.slice(1),t=function(h,g){let v=new Set(h);for(let L of g)v.delete(L);return v},r=function(h,g){let L=new DOMParser().parseFromString(g.target.result,"text/xml"),k=new Map;for(let xe of f.teis()){let we=xe.getAttribute("n");k.set(we,xe)}let I=new Set(k.keys()),$=new Map;for(let xe of L.querySelectorAll("TEI")){let we=xe.getAttribute("n");$.set(we,xe)}let K=new Set($.keys()),se=t(I,K),ae=t(K,I);for(let xe of ae)ve.tei(xe);let fe=[...L.querySelector("text").querySelectorAll("w[n]")].length,be=p.maxlemma+fe;for(let[xe,we]of $)if(k.has(xe)){let Ne=k.get(xe).querySelector("text"),Te=we.querySelector("text").querySelectorAll("w[n]");var _e=p.maxlemma+1;for(let Le of Te)Le.setAttribute("n",_e),Ne.appendChild(Le),_e=_e+1}else{let Ne=p.xml.createElementNS(x.teins,"TEI");Ne.setAttribute("n",xe);let Be=p.xml.createElementNS(x.teins,"text");ve.emptywords(Be,be,0),Ne.appendChild(Be),p.xml.documentElement.appendChild(Ne)}for(let xe of se){let we=k.get(xe).querySelector("text");ve.emptywords(we,be,p.maxlemma+1)}p.maxlemma=f.maxlemma(),h.length>0?he(h):G()},a=new FileReader;a.onload=r.bind(null,n),a.readAsText(l)},ge=function(){var i="";let l=[...f.teis()].map(n=>n.getAttribute("n"));for(let n of l)i+=`<li data-name="${n}">${n}</li>`;document.getElementById("menu").querySelector(".ms").innerHTML=i},G=function(){ge();let i=new W("Export");i.populate([{text:"TEI corpus",func:pe.showOptions.bind(null,pe.xml,pe.options)},{text:"TEI apparatus",func:pe.showOptions.bind(null,pe.xml,pe.appOptions)},{text:"CSV",func:pe.showOptions.bind(null,pe.csv,pe.options)},{text:"NEXUS",func:pe.showOptions.bind(null,pe.nexus,pe.options)}]);let l=new W("Edit");l.populate([{text:"Undo",greyout:N.undo,func:z.undo},{text:"Redo",greyout:N.redo,func:z.redo},{text:"Select all",alt:"Deselect all",toggle:N.anyhighlit,func:E.highlightAll},{text:"(Re)normalize columns",greyout:N.anyhighlit,func:z.startRenormalize.bind(null,!1)},{text:"Delete column",greyout:N.anyhighlit,func:z.startRemoveCol.bind(null,!1)},{text:"Delete empty columns",func:z.startRemoveEmpty},{text:"Merge columns",greyout:N.manyhighlit,func:z.startMerge.bind(null,!1)},{text:"Group columns",alt:"Ungroup columns",greyout:N.oneGrouped,toggle:N.grouped,func:z.startGroup.bind(null,!1)},{text:"Group words",func:z.doGroupWords},{text:"Edit cell",greyout:N.highlitcell,func:z.startEditCell.bind(null,!1)},{text:"Insert row",func:z.startNewRow},{text:"Insert column",greyout:N.anyhighlit,func:z.startInsertCol},{text:"Mark insignificant",checkbox:N.checkbox.bind(null,"insignificant"),greyout:N.anyhighlit,func:z.startMarkAs.bind(null,"insignificant",!1)},{text:"Mark binary",checkbox:N.checkbox.bind(null,"binary"),greyout:N.anyhighlit,func:z.startMarkAs.bind(null,"binary",!1)}]);let n=new W("View");n.populate([{text:"Header",checkbox:N.headerView,func:ye.toggleHeader},{text:"Normalized",checkbox:N.normalizedView,greyout:N.anyNormalized,func:ye.toggleNormalize}]);let t=document.getElementById("left_menu");t.appendChild(n.box),t.appendChild(l.box),t.appendChild(i.box);let r=document.getElementById("views");r.style.justifyContent="flex-start",r.removeChild(r.querySelector("#splash")),w.matrix();let a=document.getElementById("matrixmenu");a.addEventListener("click",w.matrix),a.removeChild(a.querySelector("ul")),document.getElementById("mssmenu").style.display="block",document.getElementById("treemenu").style.display="block"},pe={write:async function(i,l){let n=await l.createWritable();n.write(i),n.close()},xml:async function(i){let l=new XMLSerializer().serializeToString(b.sheets.xml.transformToDocument(i)),n=new Blob([l],{type:"text/xml;charset=utf-8"}),t=f.basename()+".xml",r=await Kt({_preferPolyfill:!1,suggestedName:t,types:[{description:"TEI XML",accept:{"text/xml":[".xml"]}}]});pe.write(n,r)},csv:async function(i){let l=b.sheets.csv.transformToDocument(i).documentElement.textContent,n=new Blob([l],{type:"text/csv;charset=utf-8"}),t=f.basename()+".csv",r=await Kt({_preferPolyfill:!1,suggestedName:t,types:[{description:"CSV file",accept:{"text/csv":[".csv"]}}]});pe.write(n,r)},nexus:async function(i){let l=[...f.texts(i)],n=l.length,t="0 1 2 3 4 5 6 7 8 9 A B C D E F G H K L M N P Q R S T U V W X Y Z a b c d e f g h k l m n p q r s t u v w x y z",[r,...a]=t.split(" "),h="-",g=l.map(_e=>"'"+_e.parentElement.getAttribute("n")+"'"),v=l.map(_e=>f.textWalker(_e)),L=l[0].querySelectorAll("w").length,k=[],I=g.map(_e=>[_e+" "]);for(let _e=0;_e<L;_e++){let xe=new Set,we=[];for(let Be=0;Be<v.length;Be++){let Le=v[Be].nextNode(),qe=De.t(Le.textContent.trim().toLowerCase(),"iast","hk").replace(/'/g,"()");we.push(qe),qe!==""&&qe!=="[]"&&xe.add(qe)}k.push(["[]",...xe]);let Ne=new Map([...xe].map((Be,Te)=>[Be,a[Te]]));for(let Be=0;Be<we.length;Be++){let Te=(Le=>{switch(we[Le]){case"":return h;case"[]":return r;default:return Ne.get(we[Le])}})(Be);I[Be].push(Te)}}let $=k.map((_e,xe)=>xe+1+" / "+[..._e].map(we=>`'${we}'`).join(" ")).join(`,
`),K=I.map(_e=>_e.join("")).map(_e=>_e.replace(/0{8,}/g,xe=>xe.replace(/0/g,"-"))).reduce((_e,xe)=>_e+`
`+xe),se=`#NEXUS

BEGIN TAXA;
  DIMENSIONS NTAX=${n};
  TAXLABELS ${g.join(" ")};
END;

BEGIN CHARACTERS;
  DIMENSIONS
    NCHAR=${L};
  FORMAT 
    DATATYPE=STANDARD 
    RESPECTCASE 
    GAP=${h} 
    MISSING=? 
    SYMBOLS="${t}";
  CHARSTATELABELS
${$}
;
MATRIX
${K}
;
END;
`,ae=new Blob([se],{type:"text/nexus;charset=iso8859-1"}),fe=f.basename()+".nex",be=await Kt({_preferPolyfill:!1,suggestedName:fe,types:[{description:"NEXUS file",accept:{"text/nexus":[".nex"]}}]});pe.write(ae,be)},processOptions:function(i){let l=p.xml.cloneNode(!0);if(i.get("option_normalize")){let n=l.querySelectorAll("w[lemma]");for(let t of n)t.textContent=t.getAttribute("lemma")}if(i.get("option_mergegroups")){let n=l.querySelectorAll("cl");for(let t of n){let r=t.removeChild(t.firstChild);for(;t.firstChild;){let a=r.getAttribute("lemma")||r.textContent,h=t.firstChild.getAttribute("lemma")||t.firstChild.textContent;for(r.setAttribute("lemma",a+h);t.firstChild.firstChild;)r.appendChild(t.firstChild.firstChild);t.firstChild.remove()}r.getAttribute("lemma")===r.textContent&&r.removeAttribute("lemma"),t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t)}}if(i.get("option_insignificant")){let n=l.querySelectorAll('w[insignificant="true"]');for(let t of n)t.parentNode.removeChild(t)}if(i.get("option_binary")){let t=[...f.firsttext().querySelectorAll('w[binary="true"]')].map(r=>r.getAttribute("n"));for(let r of t){let a=l.querySelectorAll(`w[n="${r}"]:not(:empty)`);if(a.length===0)continue;let h=`[${a[0].textContent}]`;for(let g of a)g.textContent=h}}if(i.get("option_noempty")){let n=l.querySelectorAll("w:empty");for(let t of n)t.textContent="[]"}return i.get("option_basetext")?pe.makeApp(i,l):l},makeHeader(i,l){let n=i.createElementNS(x.teins,"teiHeader"),t=i.createElementNS(x.teins,"fileDesc"),r=i.createElementNS(x.teins,"sourceDesc"),a=i.createElementNS(x.teins,"listWit");for(let h of f.teis(l)){let g=h.getAttribute("n"),v=i.createElementNS(x.teins,"witness");v.setAttribute("xml:id",g);let L=i.createElementNS(x.teins,"idno");L.setAttribute("type","siglum"),L.append(g),v.appendChild(L),a.appendChild(v)}return r.appendChild(a),t.appendChild(r),n.appendChild(t),n},makeApp(i,l){let n=i.get("option_basetext"),t=f.tei(n,l),r=i.get("option_app_normalize"),a=document.implementation.createDocument(x.teins,"",null);a.appendChild(t);let h=pe.makeHeader(a,l);t.insertBefore(h,t.firstChild);let g=f.words(!1,t);for(let v of g){let L=v.getAttribute("n"),k=r&&v.getAttribute("lemma")||v.textContent,I=[],$=new Map,K=f.words(L,l);for(let se of K){let ae=se.closest("TEI").getAttribute("n");if(r&&se.getAttribute("lemma")===k)I.push(ae);else if(se.textContent===k)I.push(ae);else{let fe=se.textContent===""?"[om.]":se.textContent,be=$.get(fe)||[];be.push(ae),$.set(fe,be)}}if($.size===0)for(;v.firstChild;)v.parentElement.insertBefore(v.firstChild,v);else{let se=a.createElementNS(x.teins,"app");se.setAttribute("n",L);let ae=a.createElementNS(x.teins,"lem"),fe=I.map(be=>`#${be}`).join(" ");for(fe!==""&&ae.setAttribute("wit",fe);v.firstChild;)ae.appendChild(v.firstChild);se.appendChild(ae);for(let[be,_e]of $){let xe=a.createElementNS(x.teins,"rdg"),we=_e.map(Ne=>`#${Ne}`).join(" ");xe.setAttribute("wit",we),xe.append(be),se.appendChild(xe)}v.parentElement.insertBefore(se,v),ae.textContent.match(/\s$/)&&v.parentElement.insertBefore(a.createTextNode(" "),v)}v.remove()}return a},options(){return document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <input type="checkbox" id="option_insignificant" name="option_insignificant"><label for="option_insignificant">Remove insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_binary" name="option_binary"><label for="option_binary">Binarize marked lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_noempty" name="option_noempty"><label for="option_noempty">Gaps are significant</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups"><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`)},appOptions(){let i=document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <label for="option__basetext">Base text</label>
        <select id="option__basetext" name="option_basetext"></select>
      </div>
      <div>
        <input type="checkbox" id="option__app_insignificant" name="option_app_insignificant"><label for="option_app_insignificant">Ignore insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups" checked><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_app_normalize" name="option_app_normalize" checked><label for="option_app_normalize">Normalized spellings in positive apparatus</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings in negative apparatus</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`),l=i.getElementById("option__basetext"),n=[...f.trs()].map(t=>t.dataset.n);for(let t of n){let r=document.createElement("option");r.value=t,r.append(t),l.appendChild(r)}return i},showOptions:function(i,l){let n=l(),t=document.createElement("div");t.id="blackout",t.appendChild(n),document.body.appendChild(t);let r=function(h){h.preventDefault();var g=[];let v=document.getElementById("exportform").elements;for(let k of v)k.type==="checkbox"?g.push([k.name,k.checked]):g.push([k.name,k.value]);let L=pe.processOptions(new Map(g));i(L),document.body.removeChild(t)};return t.querySelector("button").addEventListener("click",r),t.addEventListener("click",pe.blackoutClick),t},blackoutClick:function(i){if(!i.target.closest(".popup")){let n=document.querySelector("#blackout");n.parentNode.removeChild(n)}}},de={selectAll(i){let l=document.createRange();l.selectNodeContents(i);let n=window.getSelection();n.removeAllRanges(),n.addRange(l)},deselect(){let i=window.getSelection();i.removeAllRanges?i.removeAllRanges():i.empty&&i.empty()},treeMouseover(i){let l=i.target.classList.contains("tree-lemma")?i.target:i.target.closest(".tree-lemma");l&&(E.highlightTreeLemma(l.dataset.id),l.addEventListener("mouseout",E.unhighlightTrees));let n=i.target.dataset.reconstructed;if(!n)return;let t=document.createElement("div");t.id="tooltip",t.style.top=i.pageY+"px",t.style.left=i.pageX+"px",t.style.opacity=0,t.style.transition="opacity 0.2s ease-in",p.viewdiv.parentElement.appendChild(t);let r=document.createElement("div");if(r.appendChild(document.createTextNode(n)),this.script!==0?t.appendChild(Ot(r,x.scripts[this.script])):t.appendChild(r),i.target.classList.contains("reconstructed")){let a=i.target.parentNode.querySelector("span.tree-lemma");if(a&&a.dataset.hasOwnProperty("emended")){let h=document.createElement("div");h.classList.add("emphasis"),h.appendChild(document.createTextNode(a.textContent)),this.script!==0?t.prepend(Ot(h,x.scripts[this.script])):t.prepend(h)}}window.getComputedStyle(t).opacity,t.style.opacity=1,i.target.addEventListener("mouseout",u)},treeClick(i){i.target.classList.contains("witness")?w.text(i.target.dataset.key):i.target.classList.contains("reconstructed")?w.text(i.target.dataset.label):i.target.classList.contains("internal")&&z.startReconstruction(i),u()},keyDown(i){if(!p.editing&&i.key.substring(0,5)==="Arrow")de.cycleVariant(i);else if(i.ctrlKey||i.metaKey)i.key==="Z"?z.redo():i.key==="z"&&z.undo();else if(!p.editing&&p.matrix&&!p.matrix.closed&i.key==="Enter"){let l=f.highlitcell();l&&(i.preventDefault(),z.startEditCell(l))}},cycleVariant(i){let l=f.highlitcell()||p.viewdiv.querySelector("td.highlit")||p.viewdiv.querySelector('td[data-n="0"]');switch(i.key){case"ArrowRight":{if(!p.matrix.closed&&l){let n=l.nextElementSibling;n&&de.textClick({target:n})}else{let n=p.viewdiv.querySelector(".highlit"),t=n?n.dataset.n:0,r=parseInt(t)+1;for(;r<=p.maxlemma;){let a=p.viewdiv.querySelectorAll('[data-n="'+r+'"]');for(let h of a)if(h&&!h.classList.contains("invisible")){de.textClick({target:h});return}r++}}break}case"ArrowLeft":{if(!p.matrix.closed&&l){let n=l.previousElementSibling;n&&de.textClick({target:n})}else{let n=p.viewdiv.querySelector(".highlit"),t=n?n.dataset.n:0,r=parseInt(t)-1;for(;r>=0;){let a=p.viewdiv.querySelectorAll('[data-n="'+r+'"]');for(let h of a)if(h&&!h.classList.contains("invisible")){de.textClick({target:h});return}if(r--,l){de.textClick({target:l.previousElementSibling});return}}}break}case"ArrowUp":{if(p.matrix.closed||!l)return;let t=l.closest("tr").previousElementSibling;if(!t||!t.dataset.n)return;let r=t.querySelector(`td[data-n="${l.dataset.n}"]`);de.textClick({target:r});break}case"ArrowDown":{if(p.matrix.closed||!l)return;let t=l.closest("tr").nextElementSibling;if(!t||t.tagName!=="TR")return;let r=t.querySelector(`td[data-n="${l.dataset.n}"]`);de.textClick({target:r})}}},textClick(i,l=!1){if(i.target.closest("tr.header")){de.matrixHeaderClick(i);return}let n=i.target.classList.contains("lemma")?i.target:i.target.closest(".lemma");if(n){if(!l&&i.ctrlKey){de.rightClick(i);return}let t=n.dataset.n,r=f.highlitrow();if(E.unHighlightAll(),E.highlightLemma(t),E.repopulateTrees(t),ye.xScroll(t,r),n.tagName==="TD")n.classList.add("highlitcell");else{let a=n.closest(".text-box");if(a){let h=a.dataset.id;f.tr(h).querySelector(`td[data-n="${t}"]`).classList.add("highlitcell")}}}},textMouseup(){let i=f.selection();E.highlightRange(i),H()},menuMouseover(i){let l=i.target.classList.contains("menubox")?i.target:i.target.closest(".menubox");if(l){let n=l.querySelector("ul");n&&(n.style.display="block"),l.classList.add("open")}},menuMouseout(i){let l=i.target.classList.contains("menubox")?i.target:i.target.closest(".menubox");if(l){let n=l.querySelector("ul");n&&(n.style.display="none"),l.classList.remove("open")}},menuClick(i){!i.target.parentElement||(i.target.parentElement.className==="ms"&&(de.menuMouseout(i),w.text(i.target.dataset.name)),i.target.parentElement.className==="tree"&&(de.menuMouseout(i),i.target.closest("li[data-name]")&&w.tree(i.target.dataset.stemmaid,i.target.dataset.treeid)))},thDragStart(i){i.dataTransfer.setData("text/plain",i.target.textContent),z.startMoveRow(i.target.parentNode,i)},trDragEnter(i){let l=i.target.nodeType===1?i.target.closest("tr"):i.target.parentElement.closest("tr");l&&l.classList.add("dragenter")},trDragLeave(i){let l=i.target.nodeType===1?i.target.closest("tr"):i.target.parentElement.closest("tr");l&&l.classList.remove("dragenter")},trDragDrop(i){i.preventDefault(),z.finishMoveRow(i)},matrixMousedown(i){if(i.button!==0)return;if(i.ctrlKey){de.rightClick(i);return}let l=i.target.nodeType===1?i.target.closest(".lemma"):i.target.parentElement.closest(".lemma");if(l){if(l.isContentEditable)return;E.unHighlightAll(),E.highlightLemma(l.dataset.n);let n=p.matrix.boxdiv.querySelector("table");n.addEventListener("mouseover",de.matrixMouseover),n.addEventListener("mouseup",de.matrixMouseup)}},matrixMouseup(){let i=f.highlit();E.highlightRange(i);let l=p.matrix.boxdiv.querySelector("table");l.removeEventListener("mouseover",de.matrixMouseover),l.removeEventListener("mouseup",de.matrixMouseup)},matrixMouseover(i){let l=i.target.nodeType===1?i.target.closest(".lemma"):i.target.parentElement.closest(".lemma");l&&E.highlightLemma(l.dataset.n)},matrixHeaderClick(i){if(i.target.tagName!=="INPUT")return;let l=i.target.className;if(l!=="insignificant"&&l!=="binary")return;let n=i.target.closest("th").dataset.ref,t=f.firsttd(n).dataset[l]!=="true",r=new Map([[n,t]]);z.doMarkAs(l,r)},rightClick(i){let l=i.target.nodeType===1?i.target.closest("tr[data-n] th"):i.target.parentElement.closest("tr[data-n] th");if(l){i.preventDefault(),Se.remove();let t=Se.create(i),r=[{text:"move row",func:z.startMoveRow.bind(null,l.parentNode)},{text:"delete row",func:z.doDeleteRow.bind(null,l.parentNode.dataset.n)}];Se.populate(t,r),Se.show(t);return}let n=i.target.nodeType===1?i.target.closest("td.lemma"):i.target.parentElement.closest("td.lemma");if(n){i.preventDefault();let t=n.classList.contains("highlit")?function(){let h=f.highlit();return h.size===1&&!n.classList.contains("highlitcell")&&(E.unCelllightAll(),n.classList.add("highlitcell")),h}():(de.textClick(i,!0),new Set([n.dataset.n])),r=t.size>1?[{text:"merge columns",func:z.startMerge.bind(null,t)},{text:"ungroup columns",alt:"group columns",toggle:N.grouped,func:z.startGroup.bind(null,!1)},{text:"delete columns",func:z.startRemoveCol.bind(null,t)}]:[{text:"edit cell",func:z.startEditCell.bind(null,n)},{text:"delete column",func:z.startRemoveCol.bind(null,t)},{text:"insert column",func:z.startInsertCol}];Se.remove();let a=Se.create(i);Se.populate(a,r),Se.show(a)}}},z={undo:function(){let i=p.undo.pop();i&&i[0](...i[1])},redo:function(){let i=p.redo.pop();i&&i[0](...i[1])},doStack:function(i,l="do"){l==="undo"?(i[1].push("redo"),p.redo.push(i)):l==="redo"?(i[1].push("undo"),p.undo.push(i)):(i[1].push("undo"),p.undo.push(i),p.redo=[])},doMulti:function(i,l){let n=[];for(let t of i){let r=t[0](...t[1],"multido");n.unshift(r)}z.doStack([z.doMulti,[n]],l)},startMoveRow:function(i,l){if(p.dragged=i,p.dragged.classList.add("dragging"),l.type!=="dragstart"){for(let n of f.trs())n.classList.add("moveinprogress");p.matrix.boxdiv.querySelector("table").addEventListener("mousedown",z.finishMoveRow)}},startMerge:function(i){let l=i===!1?f.highlit():i,n=f.clauses(l,!0);if(!n)z.doMerge(l,"do");else if(n[0]===null){let t=n.filter(r=>r!==null).map(r=>[z.doUngroup,[r]]).concat([[z.doMerge,[l]]]);z.doMulti(t,"do")}else{let t=f.clausesToRemove(n,l);if(!t)z.doMerge(l,"do");else{let r=t.map(a=>[z.doUngroup,[a]]).concat([[z.doMerge,[l]]]);z.doMulti(r,"do")}}},startGroup:function(i){let l=i===!1?f.highlit():i;N.grouped()?z.startUngroup(l):z.doGroup(l,"do")},startUngroup:function(i){let n=[...f.clauses(i)].map(t=>[z.doUngroup,[t]]);z.doMulti(n,"do")},startInsertCol:function(){let i=Math.max([...f.highlit()])||p.maxlemma;z.doInsertCol(i)},startRemoveCol:function(i){let l=i===!1?f.highlit():i,n=f.clauses(l);if(!n)z.doRemoveCol(l,"do");else{let t=f.clausesToRemove(n,l,1);if(!t)z.doRemoveCol(l,"do");else{let r=t.map(a=>[z.doUngroup,[a]]).concat([[z.doRemoveCol,[l]]]);z.doMulti(r,"do")}}},startRemoveEmpty:function(){let i=f.empty(),l=f.clauses(i);if(!l)z.doRemoveCol(i,"do");else{let n=f.clausesToRemove(l,i,1);if(!n)z.doRemoveCol(i,"do");else{let t=n.map(r=>[z.doUngroup,[r]]).concat([[z.doRemoveCol,[i]]]);z.doMulti(t,"do")}}},startEditCell:function(i){let l=i||f.highlitcell();!l||(z.unnormalize(l),l.dataset.oldContent=l.textContent,l.contentEditable="true",l.focus(),p.editing=!0,de.selectAll(l),l.addEventListener("blur",z.finishEditCell),l.addEventListener("keydown",z.cellKeyDown))},cellKeyDown:function(i){switch(i.key){case"Enter":z.finishEditCell(i);break;case"Escape":z.finishEditCell(i,!0);break;case"ArrowRight":{let l=f.cursorPos(i.target);l[0]===l[1]&&(i.preventDefault(),z.finishEditCell(i),de.cycleVariant({key:"ArrowRight"}),z.startEditCell(f.highlitcell()));break}case"ArrowLeft":{f.cursorPos(i.target)[0]===0&&(i.preventDefault(),z.finishEditCell(i),de.cycleVariant({key:"ArrowLeft"}),z.startEditCell(f.highlitcell()));break}}},startMarkAs:function(i,l,n){let t=n.target.tagName==="INPUT"?n.target:n.target.querySelector("input"),r=l===!1?f.highlit():l,a=new Map([...r].map(h=>[h,!t.checked]));z.doMarkAs(i,a)},startNewRow:function(){let i=ve.row("new row"),l=i.querySelector("th");l.contentEditable=!0,l.addEventListener("blur",z.finishNewRow),l.addEventListener("keydown",z.thKeyDown),p.matrix.boxdiv.querySelector("tbody").appendChild(i),l.scrollIntoView(),l.focus(),document.execCommand("selectAll",!1,null),p.editing=!0},startRenameRow:function(){},startReconstruction:function(i){let l=i.target.dataset.key,n=i.target.closest(".tree-box").myTree,t=n.desc,r=document.createElement("div");r.id="blackout";let a=document.createRange().createContextualFragment(`<div id="reconstructionoptions" class="popup">
    <form id="reconstructionform">
      <div>
        <label for="reconstructed_node_name">Label for node:</label>
        <input type="text" id="reconstructed_node_name" name="reconstructed_node_name" placeholder="${t}-${l}" size="15">
      </div>
      <div style="width: 100%; display: flex; justify-content: center;padding-top: 1em;">
        <button type="submit">Add to matrix</button>
      </div>
    </form>
</div>`);r.appendChild(a),document.body.appendChild(r);let h=function(v){v.preventDefault();let L=r.querySelector("input"),k=L.value?L.value:L.placeholder;z.doReconstruction(n,l,k),document.body.removeChild(r)};r.querySelector("button").addEventListener("click",h),r.addEventListener("click",pe.blackoutClick)},thKeyDown:function(i){i.key==="Enter"&&z.finishNewRow(i)},finishNewRow:function(i){let l=i.target,n=l.textContent;l.closest("tr").dataset.n=n;let t=ve.tei(n);p.xml.documentElement.appendChild(t),p.editing=!1,l.contentEditable=!1,l.removeEventListener("blur",z.finishNewRow),l.removeEventListener("keydown",z.thKeyDown),z.doStack([z.doDeleteRow,[n]],"do")},finishEditCell:function(i,l=!1){let n=i.target;p.editing=!1,n.contentEditable="false",n.removeEventListener("blur",z.finishEditCell),n.removeEventListener("keydown",z.cellKeyDown),n.blur(),de.deselect();let t=n.textContent;if(t===""){let g=n.querySelector("br");g&&g.remove()}if(l||t===n.dataset.oldContent)return;n.hasOwnProperty("IAST")||(n.IAST=n.cloneNode(!0)),n.IAST.textContent=t;let r=parseInt(n.dataset.n),a=n.closest("tr"),h=a.dataset.n;if(z.xmlChangeCell(r,h,t),a.dataset.hasOwnProperty("treename")&&!n.dataset.hasOwnProperty("emended")){let g=z.doEmend(r,h,"multido"),v=[];v.push([z.doChangeCell,[r,h,n.dataset.oldContent]]),v.push(g),z.doStack([z.doMulti,[v]],"do")}else z.doStack([z.doChangeCell,[r,h,n.dataset.oldContent]],"do");delete n.dataset.oldContent,z.refresh(),ye.updateAllHeaders(!0),n.classList.add("highlitcell")},finishMoveRow:function(i){let l=i.target.nodeType===1?i.target.closest("tr"):i.target.parentElement.closest("tr");if(l&&z.doMoveRow(p.dragged,l,"do"),i.type!=="drop"){for(let n of f.trs())n.classList.remove("moveinprogress");p.matrix.boxdiv.querySelector("table").removeEventListener("mousedown",z.finishMoveRow)}else for(let n of f.trs())n.classList.remove("dragenter");p.dragged.classList.remove("dragging"),p.dragged=null},doReconstruction:function(i,l,n){let t=ve.row(n,"pending");t.dataset.treename=i.name,t.dataset.nodename=l;let r=t.querySelector("th"),a=document.createElement("div");a.id="spinner",r.prepend(a);let h=ve.tei(n);h.setAttribute("type","reconstructed"),h.setAttribute("corresp",i.name),h.setAttribute("select",`#${l}`);let g=[...f.tds(!1,t)],v=[...f.words(!1,h)];p.matrix.boxdiv.querySelector("tbody").appendChild(t),r.scrollIntoView();let L=new Blob(["("+N1.toString()+")()"],{type:"application/javascript"}),k=new Worker(window.URL.createObjectURL(L)),I=N.normalizedView(),$=f.serializedtexts(i.nexml,I),K=f.serializedlevels(i.levels,I);k.postMessage({readings:$,levels:K,num:0,id:l}),k.onmessage=function(se){let ae=se.data.n,fe=se.data.result;if(g[ae].textContent=fe,g[ae].IAST=g[ae].cloneNode(!0),g[ae].classList.remove("pending"),v[ae].textContent=fe,ae<p.maxlemma)k.postMessage({readings:$,levels:K,num:ae+1,id:l});else{r.removeChild(a),p.xml.documentElement.appendChild(h),ye.updateAllHeaders(),i.draw();let be=f.highlit();be.size>0&&E.repopulateTrees(...f.lowhigh(be));let _e=document.getElementById("menu").querySelector(".ms"),xe=document.createElement("li");xe.setAttribute("data-name",n),xe.appendChild(document.createTextNode(n)),_e.appendChild(xe),z.doStack([z.doDeleteRow,[n]],"do")}}},doDeleteRow:function(i,l="do"){let n=f.tr(i),t=f.tei(i),a=[...f.teis()].indexOf(t);n.parentNode.removeChild(n),t.parentNode.removeChild(t),ye.updateAllHeaders(),ge(),B(),z.doStack([z.doUndeleteRow,[n,t,a]],l)},doUndeleteRow:function(i,l,n,t="do"){let r=l.getAttribute("n"),a=[...f.teis()];if(n===a.length)p.xml.documentElement.appendChild(l),p.matrix.boxdiv.querySelector("tbody").appendChild(i);else{let h=[...f.trs()];p.xml.documentElement.insertBefore(l,a[n]),h[n].parentNode.insertBefore(i,h[n])}ye.updateAllHeaders(),ge(),B(),z.doStack([z.doDeleteRow,[r]],t)},doMoveRow:function(i,l,n="do"){let t=i.parentNode,r=[...f.trs()],a=i.previousElementSibling,h=r.indexOf(i),g=l!==null?r.indexOf(l):null,v=function(){l===null?t.insertBefore(i,t.firstChild):l.nextElementSibling?t.insertBefore(i,l.nextElementSibling):t.appendChild(i)},L=function(){let k=p.xml.documentElement,I=[...f.teis()],$=I[h];if(g===null)k.insertBefore($,I[0]);else{let K=I[g];K.nextElementSibling?k.insertBefore($,K.nextElementSibling):k.appendChild($)}};if(v(),L(),n==="multido")return[z.doMoveRow,[i,a]];z.doStack([z.doMoveRow,[i,a]],n)},doMerge:function(i,l="do"){let n=function(h,g,v){let L=h();var k=[];for(let I of L){let $=[...v].map(ae=>g(ae,I)),K=$.map(ae=>ae.cloneNode(!0));k.push(K);for(let ae of $)z.unnormalize(ae);let se=$.reduce(function(ae,fe){if(fe.hasChildNodes())for(;fe.firstChild;)ae.appendChild(fe.firstChild);return fe.parentNode.removeChild(fe),ae});se.normalize(),se.dataset?(delete se.dataset.normal,se.IAST=se.cloneNode(!0)):se.removeAttribute("lemma")}return[h,g,k]},t=n(f.trs,f.firsttd,i),r=n(f.texts,f.firstword,i),a=parseInt([...i][0]);if(z.renumber(a),z.restyleGroups(i),z.refresh(),ye.updateAllHeaders(),l==="multido")return[z.doUnmerge,[t,r]];z.doStack([z.doUnmerge,[t,r]],l)},doUnmerge:function(i,l,n="undo"){let t=function(g,v,L){let k=f.whichattr(L[0][0]),I=L[0].map(ae=>ae.getAttribute(k)),$=I[0],K=g();for(var se=0;se<K.length;se++){let ae=L[se].pop(),fe=v($,K[se]);fe.parentNode.replaceChild(ae,fe);for(let be of L[se])ae.parentNode.insertBefore(be,ae)}return I};t(...i);let r=t(...l),h=[...r].sort((g,v)=>parseInt(g)-parseInt(v))[0];if(z.renumber(h),z.reIAST(r),z.refresh(),z.restyleGroups(r),ye.updateAllHeaders(),n==="multido")return[z.doMerge,[r]];z.doStack([z.doMerge,[r]],n)},doGroup:function(i,l="do"){let n=[...i],t=n.shift(),r=f.texts();for(let h of r){let g=document.createElementNS("http://www.tei-c.org/ns/1.0","cl"),v=f.firstword(t,h);v.parentNode.insertBefore(g,v),g.appendChild(v);for(let L of i)g.appendChild(f.firstword(L,h))}let a=n.pop();for(let h of f.tds(t))h.classList.add("group-start");for(let h of f.tds(a))h.classList.add("group-end");for(let h of n)for(let g of f.tds(h))g.classList.add("group-internal");for(let h of p.textboxes)h.refresh();if(l==="multido")return[z.doUngroup,[i]];z.doStack([z.doUngroup,[i]],l)},doUngroup:function(i,l="do"){let n=f.texts();for(let r of n){let a;for(let h of i){let g=f.firstword(h,r);a||(a=g.closest("cl")),a.parentNode.insertBefore(g,a)}a.parentNode.removeChild(a)}let t=[...i].map(r=>[...f.tds(r)]).reduce((r,a)=>r.concat(a),[]);for(let r of t)r.classList.remove("group-start","group-internal","group-end");for(let r of p.textboxes)r.refresh();if(l==="multido")return[z.doGroup,[i]];z.doStack([z.doGroup,[i]],l)},doGroupWords:function(){let i=0,l=[];for(let n=0;n<=p.maxlemma;n++){let t=f.tds(n),r=t[0].classList;if(r.contains("group-start")||r.contains("group-internal")||r.contains("group-end")){i=n+1;continue}let a=t.length,h=0;if(n===p.maxlemma)h=a;else for(let g of t)(g.IAST?g.IAST.textContent:g.textContent).slice(-1)===" "&&h++;if(h/a>=.5)if(i===n){i++;continue}else{let g=f.range(i,n);l.push([z.doGroup,[g]]),i=n+1}}z.doMulti(l)},doRemoveCol:function(i,l="do"){let n=function(g,v,L){let k=g();var I=[];for(let $ of k){let K=[...L].map(ae=>{let fe=v(ae,$);return z.unnormalize(fe),fe}),se=K.map(ae=>ae.cloneNode(!0));I.push(se);for(let ae of K)ae.parentNode.removeChild(ae)}return[g,v,I]},t=n(f.trs,f.firsttd,i),r=n(f.texts,f.firstword,i),a=[...i].sort((g,v)=>parseInt(g)-parseInt(v)),h=parseInt([...a][0])-1;if(z.renumber(h),z.refresh(),z.restyleGroups(i,!0),ye.updateAllHeaders(),l==="multido")return[z.doUnremoveCol,[t,r]];z.doStack([z.doUnremoveCol,[t,r]],l)},doUnremoveCol:function(i,l,n){let t=function(v,L,k){let I=f.whichattr(k[0][0]),$=k[0].map(fe=>fe.getAttribute(I)),K=$[0],se=v();for(var ae=0;ae<se.length;ae++){let fe=L(K,se[ae]);for(let be of k[ae])fe.parentNode.insertBefore(be,fe)}return $};t(...i);let r=t(...l),a=[...r].sort((v,L)=>parseInt(v)-parseInt(L)),h=parseInt(a[0])-1;z.renumber(h);let g=document.querySelectorAll(".highlitcell");for(let v of g)v.classList.remove("highlitcell");if(z.reIAST(r),z.refresh(),z.restyleGroups(r,!0),ye.updateAllHeaders(),n==="multido")return[z.doRemoveCol,[r]];z.doStack([z.doRemoveCol,[r]],n)},doInsertCol:function(i,l="do"){let n=function(r,a,h,g){let v=r();for(let L of v){let k=a(g,L),I=h(g+1);k.insertAdjacentElement("afterend",I)}};n(f.trs,f.firsttd,ve.emptycell,i),n(f.texts,f.firstword,ve.emptyword,i),z.renumber(i),z.refresh(),z.restyleGroups([i,i+1],!0),ye.updateAllHeaders();let t=[i+1];if(l==="multido")return[z.doRemoveCol,[t]];z.doStack([z.doRemoveCol,[t]],l)},doEmend:function(i,l,n="do"){let t=[...f.trs()][l],r=f.firsttd(i,t);r.dataset.emended=!0;let a=f.tei(l).querySelector("text");if(f.firstword(i,a).setAttribute("emended","true"),n==="multido")return[z.doUnemend,[i,l]];z.doStack([z.doUnemend,[i,l]],n)},doUnemend:function(i,l,n="do"){let t=[...f.trs()][l],r=f.firsttd(i,t);delete r.dataset.emended;let a=f.tei(l).querySelector("text");if(f.firstword(i,a).removeAttribute("emended"),n==="multido")return[z.doEmend,[i,l]];z.doStack([z.doEmend,[i,l]],n)},doChangeCell:function(i,l,n,t="do"){let r=z.xmlChangeCell(i,l,n),a=z.htmlChangeCell(i,l,n);if(z.refresh(),ye.updateAllHeaders(!0),de.textClick({target:a}),t==="multido")return[z.doChangeCell,[i,l,r]];z.doStack([z.doChangeCell,[i,l,r]],t)},htmlChangeCell:function(i,l,n){let t=f.tr(l),r=f.firsttd(i,t);return z.unnormalize(r),r.textContent=n,r.IAST&&(r.IAST=r.cloneNode(!0)),r},xmlChangeCell:function(i,l,n){let t=f.tei(l).querySelector("text"),r=f.firstword(i,t);z.unnormalize(r);let a=r.textContent;return r.childNodes.length===0?r.appendChild(document.createTextNode(n)):r.textContent=n,a},doMarkAs:function(i,l,n="do"){let t=[...l.keys()],r=f.attr(i,t);for(let a of t){let h=f.tds(a),g=f.words(a);if(l.get(a)===!0){for(let L of h)L.dataset[i]="true";for(let L of g)L.setAttribute(i,"true")}else{for(let L of h)delete L.dataset[i];for(let L of g)L.removeAttribute(i)}let v=f.checkbox(a,i);v.checked=l.get(a)}if(n==="multido")return[z.doMarkAs,[i,r]];z.doStack([z.doMarkAs,[i,r]],n)},refresh:function(){for(let i of p.textboxes)i.refresh();E.rehighlight(),N.anyhighlit()?E.repopulateTrees(...f.lowhigh(f.highlit())):E.clearTrees()},renumber:function(i=0){let l=function(n,t,r){let a=n();for(let g of a){let v=[...t(!1,g)],L=f.whichattr(v[0]);for(var h=parseInt(r)+1;h<v.length;h++)v[h].setAttribute(L,h)}};l(f.trs,f.tds,i),l(()=>[!0],f.ths,i),l(f.texts,f.words,i),p.maxlemma=f.maxlemma()},reIAST:function(i){let l=[...i].map(n=>[...f.lemmata(n)]).flat();for(let n of l)n.IAST=n.cloneNode(!0)},restyleGroups:function(i,l=!1){let t=l?function(a){var h=[...a];let g=parseInt(i[0])-1,v=parseInt(i[i.length-1])+1;return h.unshift(g),h.push(v),h}(i):i,r=function(a,h=!1){let g=new Set(["group-start","group-internal","group-end"]);h&&g.delete(h);for(let v of a){for(let L of g)v.classList.remove(L);h&&v.classList.add(h)}};for(let a of t){let h=f.firstword(a),g=f.tds(a);if(g.length===0)continue;let v=h.closest("cl");v?h===v.firstElementChild?r(g,"group-start"):h===v.lastElementChild?r(g,"group-end"):r(g,"group-internal"):r(g)}},startRenormalize:function(i){let l=i===!1?f.highlit():i;z.doRenormalize(Math.min(...l),Math.max(...l))},doRenormalize:function(i,l,n=!1,t="do"){let r=N.normalizedView(),a=new Map,h=[...f.trs()],g=[...f.texts()],v=n?[n]:[...h.keys()];for(let L of v){let k=new Map,I=g[L],$=[...f.words(!1,I)],K=f.firstword(i,I),se=f.firstword(l,I),ae=$.indexOf(K),fe=$.indexOf(se),be=$.slice(ae,fe+1),_e=h[L],we=[...f.tds(!1,_e)].slice(ae,fe+1),Ne=be.map(Te=>Te.textContent),Be=w1(Ne);for(let Te=0;Te<Be.length;Te++){let Le=be[Te],qe=Be[Te],ze=Ne[Te],He=we[Te],Xe=Le.hasAttribute("lemma")?Le.getAttribute("lemma"):!1;if(Xe!==!1){if(Xe===qe)continue;k.set(He.dataset.n,Xe),z.unnormalize(Le),z.unnormalize(He)}else k.set(He.dataset.n,null);qe!==ze&&(Le.setAttribute("lemma",qe),He.dataset.normal=qe,r&&(He.textContent=qe))}a.set(L,k)}ye.updateAllHeaders(!0),ye.xScrollToHighlit(),z.doStack([z.doUnrenormalize,[a]],t)},doUnrenormalize:function(i,l="undo"){let n=N.normalizedView(),t=new Map,r=[...f.trs()],a=[...f.texts()];for(let[h,g]of i.entries()){let v=r[h],L=a[h],k=new Map;for(let[I,$]of g.entries()){let K=f.firsttd(I,v),se=f.firstword(I,L),ae=se.hasAttribute("lemma")?se.getAttribute("lemma"):null;k.set(I,ae),$===null?(z.unnormalize(K),z.unnormalize(se)):(K.dataset.normal=$,se.setAttribute("lemma",$),n&&(K.textContent=$))}t.set(h,k)}z.doStack([z.doUnrenormalize,[t]],l)},unnormalize:function(i){i.hasOwnProperty("IAST")&&(i.textContent=i.IAST.textContent),i.dataset&&i.dataset.hasOwnProperty("normal")&&delete i.dataset.normal,i.getAttribute("lemma")&&i.removeAttribute("lemma")}},ye={toggleNormalize:function(){N.normalizedView()?ye.showUnnormalized():ye.showNormalized()},showNormalized:function(i){if(i)i.updatescript();else{document.getElementById("views").classList.add("normalized");for(let n of p.textboxes)n.updatescript();p.matrix.updatescript(),N.anyhighlit()?E.repopulateTrees(...f.lowhigh(f.highlit())):E.clearTrees()}ye.updateAllHeaders(!0),ye.xScrollToHighlit()},showUnnormalized:function(){document.getElementById("views").classList.remove("normalized"),p.matrix.updatescript();for(let i of p.textboxes)i.updatescript();N.anyhighlit()?E.repopulateTrees(...f.lowhigh(f.highlit())):E.clearTrees(),ye.updateAllHeaders(!0),ye.xScrollToHighlit()},toggleHeader:function(){let i=p.matrix.boxdiv.querySelector("tr.header");i.style.display==="none"?i.style.display="table-row":i.style.display="none"},updateHeaders(i){for(let l of i){let n=f.firstth(l),[t,r]=f.readings(l),a=n.querySelector("span.readings"),h=t<2?t:`${t}(${r.size})`;a.textContent=h}},updateAllHeaders(i=!1){let l=[...f.trs()],n=l.map(g=>f.trWalker(g)),t=[...f.tds(!1,l[0])],r=[...f.ths()],a=p.matrix.boxdiv.querySelector("tr.header"),h=function(){let g=document.createElement("th"),v=document.createElement("span");v.classList.add("readings"),g.appendChild(v);let L=document.createElement("form");return L.innerHTML='<div><input class="insignificant" type="checkbox">Insignificant</div><div><input class="binary" type="checkbox">Binary</div>',g.appendChild(L),a.appendChild(g),g};for(let g=0;g<t.length;g++){let v=g>=r.length?h():r[g],L=t[g];v.dataset.ref=L.dataset.n;let k=0,I=new Set;for(let K of n){let se=K.nextNode().textContent;se!==""&&(k++,I.add(se))}let $=k<2?k:`${k}(${I.size})`;v.querySelector("span.readings").textContent=$,i||(v.querySelector("input.insignificant").checked=!!L.dataset.insignificant,v.querySelector("input.binary").checked=!!L.dataset.binary)}if(r.length>t.length)for(let g=t.length;g<r.length;g++)a.removeChild(r[g])},xScrollToHighlit:function(){let i=f.highlit();i.size>0&&ye.xScroll([...i][0])},xScroll:function(i,l){if(!i)return;let n=l||f.firsttr(),t=f.firsttd(i,n),r=t.getBoundingClientRect(),a=p.matrix.boxdiv,g=a.getBoundingClientRect().right,v=n.querySelector("th").getBoundingClientRect(),L=v.right,k=r.right>g,I=r.left+.1<L;k&&t.scrollIntoView({inline:"end",block:"nearest"}),I&&(t.scrollIntoView({inline:"start",block:"nearest"}),a.scroll({left:a.scrollLeft-v.width}))}},ve={tei:function(i){let l=p.xml.createElementNS(x.teins,"TEI");l.setAttribute("n",i);let n=f.firsttext().cloneNode(!0);l.appendChild(n);for(let t of f.words(!1,n))for(t.removeAttribute("lemma");t.firstChild;)t.firstChild.remove();return l},emptycell:function(i){let l=document.createElement("td");return l.className="lemma",l.dataset.n=i,l},emptyword:function(i,l=p.xml){let n=l.createElementNS(x.teins,"w");return n.setAttribute("n",i),n},emptywords:function(i,l,n){let t=l||p.maxlemma,r=n||0;for(let a=r;a<=t;a++){let h=ve.emptyword(a);i.appendChild(h)}},row:function(i,l){let n=document.createElement("tr"),t=document.createElement("th");t.scope="row",t.draggable=!0,t.appendChild(document.createTextNode(i)),t.addEventListener("dragstart",de.thDragStart),n.dataset.n=i,n.appendChild(t);let r=f.firsttr();for(let a of r.querySelectorAll("td")){let h=document.createElement("td");h.dataset.n=a.dataset.n,h.className=a.className,l&&h.classList.add(l),n.appendChild(h)}return n}},Se={create:function(i){let l=document.createElement("div");return l.classList.add("contextmenu"),l.style.left=i.clientX-12+"px",l.style.top=i.clientY-22+"px",l},remove:function(){for(let i of document.querySelectorAll(".contextmenu"))i.parentNode.removeChild(i)},show:function(i){document.body.appendChild(i)},populate:function(i,l){let n=document.createElement("ul");for(let t of l){let r=document.createElement("li");if(t.hasOwnProperty("cond")){let a=document.createRange().createContextualFragment('<form><input type="checkbox"'+(t.cond()?" checked":"")+"></form>");r.appendChild(a)}if(t.hasOwnProperty("toggle")){let a=t.toggle()?t.text:t.alt;r.appendChild(document.createTextNode(a))}else r.appendChild(document.createTextNode(t.text));r.addEventListener("mouseup",t.func),n.appendChild(r)}i.appendChild(n)}};class W{constructor(l){this.name=l,this.box=document.createElement("div"),this.box.classList.add("menubox");let n=document.createElement("div");n.classList.add("heading"),n.appendChild(document.createTextNode(l)),this.box.appendChild(n),n.addEventListener("mouseover",this.checkConditions.bind(this)),this.box.addEventListener("mouseup",this.click.bind(this)),this.items=new Map,this.conditions=new Map}populate(l){let n=this.box.querySelector("ul")||function(t){let r=document.createElement("ul");return t.box.appendChild(r),r}(this);for(let t of l){let r=document.createElement("li");if(t.hasOwnProperty("checkbox")){let a=document.createElement("form"),h=document.createElement("input");h.type="checkbox",h.addEventListener("click",g=>g.preventDefault()),a.appendChild(h),r.appendChild(a),r.appendChild(document.createTextNode(t.text)),this.conditions.set(h,t.checkbox)}else if(t.hasOwnProperty("toggle")){let a=document.createElement("span");a.appendChild(document.createTextNode(t.text)),a.dataset.text=t.text,a.dataset.alt=t.alt,this.conditions.set(a,t.toggle),r.appendChild(a)}else r.appendChild(document.createTextNode(t.text));t.hasOwnProperty("greyout")&&this.conditions.set(r,t.greyout),this.items.set(r,t.func),n.appendChild(r)}}click(l){let n=l.target.tagName==="LI"?l.target:l.target.closest("li");if(n&&!n.classList.contains("greyedout")){let t=this.items.get(n);t&&(t(l),this.checkConditions())}}checkConditions(){let l=new Map;for(let[n,t]of this.conditions){let r=l.get(t)||function(){let a=t();return l.set(t,a),a}();n.tagName==="INPUT"?n.checked=r:n.tagName==="SPAN"?r?n.textContent=n.dataset.alt:n.textContent=n.dataset.text:n.tagName==="LI"&&(r?n.classList.remove("greyedout"):n.classList.add("greyedout"))}}}class Ce{constructor(l){this.name=l,this.script=0}show(){p.descs.appendChild(this.descbox),N.normalizedView()&&ye.showNormalized(this),p.viewdiv.appendChild(this.boxdiv),this.closed=!1}clear(){for(;this.boxdiv.firstChild;)this.boxdiv.removeChild(this.boxdiv.firstChild);this.svgcontainer&&(this.clearsvg(),this.boxdiv.appendChild(this.svgcontainer))}destroy(){p.viewdiv.removeChild(this.boxdiv),p.descs.removeChild(this.descbox);let l=p.trees.indexOf(this);l>-1&&p.trees.splice(l,1);let n=p.textboxes.indexOf(this);n>-1&&p.textboxes.splice(n,1),this.closed=!0,this.name==="Matrix"&&(document.getElementById("matrixmenu").style.display="block"),B(),E.rehighlight()}pullout(){this.destroy();let l="menubar=no,location=no,status=no,height=620,width=620,scrollbars=yes,centerscreen=yes",n=window.mainWindow?window.mainWindow.comboView.getWindows().length:p.windows.length,t=window.open("slave.html","slave"+n,l);t.mainWindow=window.mainWindow?window.mainWindow:window,t.startbox=this.text?{text:{name:this.name}}:{tree:this.name},t.mainWindow.comboView.addWindow(t)}makeDescBox(){let l=document.createElement("div"),n=document.createElement("div");n.classList.add("closer"),n.innerHTML="x",n.title="close";let t=document.createElement("div");t.classList.add("scripter"),t.innerHTML="A",t.title="change script",l.appendChild(n),l.appendChild(t),l.appendChild(document.createTextNode(this.desc)),this.descbox=l,n.addEventListener("click",this.destroy.bind(this)),t.addEventListener("click",this.cyclescript.bind(this))}cyclescript(){this.script=this.script+1,this.script===x.scripts.length&&(this.script=0);let l=this.descbox.querySelector(".scripter");this.script===0?l.innerHTML="A":l.innerHTML=to[x.scripts[this.script]]("a"),x.scripts[this.script]==="grantha"?l.classList.add("grantha"):l.classList.remove("grantha"),this.updatescript()}updatescript(){let l=this.boxdiv.querySelectorAll(".lemma,.tree-lemma");for(let n of l){let t=n.dataset.hasOwnProperty("normal");if(!t&&n.textContent.trim()==="")continue;let r=function(){if(N.normalizedView()&&t){let h=document.createElement("span");return h.appendChild(document.createTextNode(n.dataset.normal)),h}else return n.IAST.cloneNode(!0)}(),a=this.script===0?r:Ot(r,x.scripts[this.script]);for(n.innerHTML="";a.firstChild;)n.appendChild(a.firstChild)}x.scripts[this.script]==="grantha"?this.boxdiv.classList.add("grantha"):this.boxdiv.classList.remove("grantha"),this.boxdiv.classList.contains("matrix")&&ye.xScrollToHighlit()}}class Ae extends Ce{constructor(l,n){super(`#${l} #${n}`);this.stemmaid=l,this.id=n,this.nexml=p.treelist.get(this.name).cloneNode(!0),this.desc=this.nexml.querySelector("tree").getAttribute("label")}init(){this.makeDescBox();let l=document.createElement("div");l.classList.add("tree-box");var n,t=0;do n="tree"+t,t++;while(document.getElementById(n));l.id=n,this.boxdiv=l,this.boxdiv.addEventListener("mouseover",de.treeMouseover.bind(this)),this.boxdiv.addEventListener("click",de.treeClick),this.svgcontainer=document.createElement("div"),this.svgcontainer.id=this.boxdiv.id+"container",this.boxdiv.appendChild(this.svgcontainer),this.boxdiv.myTree=this,this.calcPaths(),this.jiggleroot(),this.findLevels(),this.labelInternal()}show(){p.descs.appendChild(this.descbox),p.viewdiv.appendChild(this.boxdiv)}jiggleroot(){let l=this.nexml.evaluate('//nex:node[@root="true"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,n=this.nexml.evaluate('//nex:edge[@source="'+l.id+'"]|//nex:edge[@target="'+l.id+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);if(n.snapshotLength===3){var t,r;for(let a=0;a<n.snapshotLength;a++){let h=n.snapshotItem(a),g=h.getAttribute("source"),v=h.getAttribute("target"),L=this.nexml.evaluate('//nex:node[@id="'+g+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,k=this.nexml.evaluate('//nex:node[@id="'+v+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!L.hasAttribute("otu")&&!k.hasAttribute("otu")){t=h,r=v===l.id?"target":"source";break}}if(t){let a=this.nexml.createElementNS(l.namespaceURI,"node");a.id="fakeroot",a.setAttribute("root","true"),l.removeAttribute("root"),l.parentElement.insertBefore(a,l);let h=this.nexml.createElementNS(l.namespaceURI,"edge");h.id="newrootedge",h.setAttribute("length","0"),h.setAttribute("source","fakeroot"),h.setAttribute("target",l.id),l.parentElement.insertBefore(h,t),t.setAttribute(r,a.id)}}}findLevels(){let l=this.nexml.querySelectorAll("edge"),n=[...this.nexml.querySelectorAll("node[otu]")],t=this.nexml;this.levels=[n];let r=function(g,v){let L=g.map(fe=>fe.id),k=new Map,I=new Map,$=[];for(let fe of v){let be=fe.getAttribute("target"),_e=fe.getAttribute("source"),xe=(()=>L.indexOf(be)!==-1?{ancestor:t.getElementById(_e),child:t.getElementById(be)}:L.indexOf(_e)!==-1?{ancestor:t.getElementById(be),child:t.getElementById(_e)}:null)();if(xe!==null)if(I.has(xe.ancestor)){let we=I.get(xe.ancestor);k.set(xe.ancestor,[we.child,xe.child]),$.push(fe),$.push(we.edge)}else I.set(xe.ancestor,{child:xe.child,edge:fe})}let K=[...k.keys()],se=[...I.keys()].reduce((fe,be)=>(K.indexOf(be)===-1&&fe.push(I.get(be).child),fe),[]),ae=[...v].reduce((fe,be)=>($.indexOf(be)===-1&&fe.push(be),fe),[]);return{match:k,remainder:[...new Set(se)],edges:ae}};var a=n,h=l;do{let g=r(a,h);this.levels.push(g.match),a=[...g.match.keys(),...g.remainder],h=g.edges}while(h.length>0)}labelInternal(){for(let l of this.nexml.querySelectorAll("node:not([label])"))l.setAttribute("label",l.id)}fitch1(){let l=new Map;for(let n of this.levels[0]){let t=n.getAttribute("label"),r=this.boxdiv.querySelector(`span.tree-lemma[data-id="${t}"]`),a=r?[f.htmlreading(r,N.normalizedView())]:[];l.set(n,new Set(a))}for(let n=1;n<this.levels.length;n++)for(let[t,r]of this.levels[n]){let a=r.map(v=>l.get(v)),h=f.setIntersection(...a),g=h.size>0?h:f.setUnion(...a);l.set(t,g)}return l}fitch2(l){let n=[...this.nexml.querySelectorAll("node[otu]")],t=new Map;for(let[r]of this.levels[this.levels.length-1])t.set(r,l.get(r));for(let r=this.levels.length-1;r>1;r--)for(let[a,h]of this.levels[r]){let g=t.get(a);for(let v of h){if(n.indexOf(v)!==-1)continue;let L=l.get(v);if(L.size===1)t.set(v,L);else{let k=f.setIntersection(g,L),I=k.size>0?k:L;t.set(v,I)}}}return t}fitch(){let l=this.fitch1(),n=function(r){let a=[...r].map(h=>h.trim()===""?"_":h);return a.length===1?a[0]:"{"+a.join(", ")+"}"},t=this.fitch2(l);for(let[r,a]of t){let h=this.boxdiv.querySelector(`span.internal[data-key="${r.id}"]`);h.dataset.reconstructed=n(a)}}clearsvg(){for(;this.svgcontainer.firstChild;)this.svgcontainer.removeChild(this.svgcontainer.firstChild)}removecolors(){let l=this.nexml.querySelectorAll("node[color]");for(let n=0;n<l.snapshotLength;n++)l.snapshotItem(n).removeAttribute("color")}drawlines(l,n){if(this.removecolors(),l){let g=this.getPath(...l.split(";")).path,v=new Set;for(let L of g)v.add(L.getAttribute("target")),v.add(L.getAttribute("source"));for(let L of v){let k=this.nexml.evaluate('//nex:node[@id="'+L+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;k.getAttribute("root")||k.setAttribute("color",n)}}let t=parseInt(window.getComputedStyle(this.svgcontainer,null).width)-15,r=parseInt(window.getComputedStyle(this.boxdiv,null).height)-10,a=function(){return r<600?600:r}();T.PhyloCanvas.Render.Style.line.stroke="rgb(162,164,170)",this.phylocanvas=new T.PhyloCanvas({nexml:this.nexml,fileSource:!0},this.svgcontainer.id,t,a);let h=this.svgcontainer.querySelectorAll('path:not([stroke="#a2a4aa"])');for(let g of h)g.style.strokeWidth="2"}draw(){this.clear(),this.drawlines(),this.makeLabels()}clearLabels(){for(let l of this.boxdiv.firstChild.querySelectorAll("text"))l.parentElement.removeChild(l)}makeLabels(){let l=[...f.texts()],n=new Set(l.map(r=>r.parentNode.getAttribute("n"))),t=new Map(l.filter(r=>r.parentNode.hasAttribute("corresp")&&r.parentNode.getAttribute("corresp")===this.name).map(r=>[r.parentNode.getAttribute("select").replace(/^#/,""),r.parentNode.getAttribute("n")]));for(let r of this.boxdiv.firstChild.querySelectorAll("text")){let a=document.createElement("div");a.setAttribute("class","tree-div");let h=parseInt(r.getAttribute("x")-5),g=parseInt(r.getAttribute("y"))-15;a.style.left=h+"px",a.style.top=g+"px";let v=r.textContent.trim();n.has(v)?a.innerHTML=`<span class="witness inactive" data-key="${v}">${v}</span><span class="tree-lemma ${v}" data-id="${v}"></span>`:v!=="fakeroot"?t.has(v)?a.innerHTML=`<span class="internal reconstructed" data-key="${v}" data-label="${t.get(v)}">${t.get(v)}</span><span class="tree-lemma invisible ${v}" data-id="${v}" data-label="${t.get(v)}"></span>`:a.innerHTML=`<span class="internal" data-key="${v}">0</span>`:a.innerHTML=`<span class="internal" data-key="${v}"></span>`,r.parentElement.removeChild(r),this.boxdiv.appendChild(a)}}clearlemmata(){for(let l of this.boxdiv.querySelectorAll("span.tree-lemma"))l.innerHTML="",l.dataset.hasOwnProperty("normal")&&delete l.dataset.normal,l.IAST=l.cloneNode(!0)}populate(l,n){let t=f.texts();for(let h of t){let g=h.parentNode.getAttribute("n"),v=this.boxdiv.querySelector(`span.tree-lemma[data-id="${g}"]`)||this.boxdiv.querySelector(`span.tree-lemma[data-label="${g}"]`);if(!!v){if(v.hasOwnProperty("IAST")||(v.IAST=v.cloneNode(!0)),v.IAST.innerHTML="",n){let L=[],k=[];var r=!1;for(let I=l;I<=n;I++){let $=f.firstword(I,h);L.push($.innerHTML),$.hasAttribute("lemma")&&(k[I-l]=$.getAttribute("lemma")),$.hasAttribute("emended")&&(r=!0)}if(v.IAST.appendChild(b.transformString(L.join(" ").replace(/\s+/g," ").trim(),b.sheets.tree)),k.length!==0){let I=L.slice(0).map((K,se)=>k.hasOwnProperty(se)?k[se]:K),$=document.createElement("span");$.appendChild(b.transformString(I.join(" ").replace(/\s+/g," ").trim(),b.sheets.tree)),v.dataset.normal=$.innerHTML}r?v.dataset.emended=!0:v.dataset.hasOwnProperty("emended")&&delete v.dataset.emended}else{let L=f.firstword(l,h);v.IAST.appendChild(b.transformString(L.innerHTML,b.sheets.tree)),L.hasAttribute("lemma")?v.dataset.normal=L.getAttribute("lemma"):delete v.dataset.normal,L.hasAttribute("emended")?v.dataset.emended=!0:v.dataset.hasOwnProperty("emended")&&delete v.dataset.emended}N.normalizedView()&&v.dataset.hasOwnProperty("normal")?v.innerHTML=v.dataset.normal:v.innerHTML=v.IAST.innerHTML}}let a=this.boxdiv.querySelectorAll(".inactive");for(let h of a)h.classList.remove("inactive");this.fitch()}calcPaths(){this.nodes=[],this.paths=[],this.longest={path:[]},this.nsResolver=this.nexml.createNSResolver(this.nexml.ownerDocument==null?this.nexml.documentElement:this.nexml.ownerDocument.documentElement);let l=this.nexml.evaluate("//nex:node[@label]",this.nexml,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);for(let n=0;n<l.snapshotLength;n++)this.nodes.push(l.snapshotItem(n));for(let n=0;n<this.nodes.length;n++){let t=this.nodes[n],r=t.getAttribute("label"),a=t.id;for(let h=n+1;h<this.nodes.length;h++){let g=this.nodes[h],v=g.getAttribute("label"),L=g.id;this.paths.push({nodes:[r,v],path:this.pathFind(a,L)})}}for(let n of Object.keys(this.paths))this.paths[n].path.length>this.longest.path.length&&(this.longest=this.paths[n])}pathFind(l,n,t){t||(t=[]);let r=this.nexml.evaluate('//nex:edge[@source="'+l+'"]|//nex:edge[@target="'+l+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);var a;for(let h=0;h<r.snapshotLength;h++){let g=r.snapshotItem(h);if(a=[g],t.indexOf(g.id)!=-1)continue;t.push(g.id);let v=g.getAttribute("source")!==l?g.getAttribute("source"):g.getAttribute("target");if(v===n)return a;if(!this.nexml.evaluate('//nex:node[@id="'+v+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.hasAttribute("otu")){let k=this.pathFind(v,n,t);if(k)return a.concat(k);continue}}return!1}analyzeVariants(l,n){let t=[],r=[],a=function(k){return k.startsWith("<lg")?b.transformString(k,b.sheets.lg).firstChild.data.slice(1):k},h=function(k){return k.map(I=>a(I)).join(" ").replace(/\s+/g," ").trim()},g=N.normalizedView()?function(k,I){let $=f.firstword(k,I);return $.hasAttribute("lemma")?$.getAttribute("lemma"):$.textContent}:function(k,I){return f.firstword(k,I).textContent};for(let k of f.texts()){let I=k.parentNode.getAttribute("n");if(!this.nexml.querySelector(`otu[label="${I}"]`))continue;let $=n?h(f.range(l,n).map(K=>g(K,k))):a(g(l,k));$===""?t.hasOwnProperty("")?t[""].push(I):t[""]=[I]:t.hasOwnProperty($)?t[$].push(I):t[$]=[I]}let v={};for(let k of Object.keys(t)){var L={length:0,branch_length:0,paths:[]};if(t[k].length===1)L=!1;else for(let I=0;I<t[k].length;I++)for(let $=I+1;$<t[k].length;$++){let K=this.getPath(t[k][I],t[k][$]);if(K.hasOwnProperty("path")||alert(K),K.path.length===L.length){let se=this.calcBranchLength(K.path);se===L.branch_length?L.paths.push(K):se>L.branch_length&&(L={length:K.path.length,branch_length:se,paths:[K]})}else K.path.length>L.length&&(L={length:K.path.length,branch_length:this.calcBranchLength(K.path),paths:[K]})}v[k]=L}for(let k of Object.keys(r))v[k]=r[k];return v}getPath(l,n){for(let t of this.paths)if(t.nodes.indexOf(l)>-1&&t.nodes.indexOf(n)>-1)return t;return!1}calcBranchLength(l){return l.map(n=>n.getAttribute("length")).reduce((n,t)=>parseFloat(n)+parseFloat(t))}pickColour(l,n,t,r){var a=n,h=t,g=l;r&&(g=g*2,g>=1&&(g-=1,a=t,h=r));let v=h.red-a.red,L=h.green-a.green,k=h.blue-a.blue,I={red:parseInt(Math.floor(a.red+v*g),10),green:parseInt(Math.floor(a.green+L*g),10),blue:parseInt(Math.floor(a.blue+k*g),10)};return"rgb("+I.red+","+I.green+","+I.blue+")"}colourizeVariants(l,n){let t=this.analyzeVariants(l,n);for(let r of this.boxdiv.querySelectorAll("span.tree-lemma")){let a=t.hasOwnProperty(r.dataset.id)?t[t[r.dataset.id]]:t[r.textContent],h={red:252,green:70,blue:107},g={red:63,green:94,blue:251};a?(r.style.color=this.pickColour(a.length/this.longest.path.length,g,h),r.dataset.length=a.length,r.dataset.branch_length=a.branch_length,r.dataset.nodes=a.paths[0].nodes.join(";")):(r.style.color=this.pickColour(1/this.longest.path.length,g,h),r.dataset.length=0,r.dataset.branch_length=0,r.dataset.nodes=""),r.textContent.trim()===""?(r.innerHTML='<span lang="en">┬а┬а┬а</span>',r.style.backgroundColor=r.style.color):r.style.backgroundColor=""}}}class ee extends Ce{constructor(l){super(l);this.desc=l,this.text=f.firsttext(l)}init(){this.makeTextBox(),this.makeDescBox(),this.descbox.style.maxWidth="595px",this.descbox.style.paddingLeft="5px",this.boxdiv.addEventListener("mouseup",de.textMouseup)}refresh(){this.boxdiv.innerHTML="",this.boxdiv.appendChild(b.sheets.lemma.transformToFragment(this.text,document)),q(this.boxdiv);for(let l of f.lemmata(!1,this.boxdiv))l.IAST=l.cloneNode(!0);this.updatescript()}makeTextBox(){let l=document.createElement("div");l.dataset.id=this.name,l.classList.add("text-box"),l.appendChild(b.sheets.lemma.transformToFragment(this.text,document)),q(l);for(let n of f.lemmata(!1,l))n.IAST=n.cloneNode(!0);this.boxdiv=l}}class X extends Ce{constructor(){super(name);this.desc="Matrix",this.name="Matrix",this.makeDescBox(),this.makeViewBox(),this.descbox.style.maxWidth="100vw",this.descbox.style.paddingLeft="5px"}init(){this.makeTable()}makeViewBox(){let l=document.createElement("div");l.classList.add("matrix"),l.dataset.id=this.name,this.boxdiv=l}makeTable(){let l=document.createElement("div");l.classList.add("scroller"),l.append(b.sheets.matrix.transformToFragment(p.xml,document));for(let v of l.getElementsByTagName("th"))v.addEventListener("dragstart",de.thDragStart);l.addEventListener("dragenter",de.trDragEnter),l.addEventListener("dragleave",de.trDragLeave),l.addEventListener("dragover",v=>v.preventDefault()),l.addEventListener("drop",de.trDragDrop),l.addEventListener("mousedown",de.matrixMousedown);let n=document.createElement("tr");n.classList.add("header");let t=document.createElement("td");t.classList.add("anchor"),n.appendChild(t);let r=[...f.trs(l)],a=r.map(v=>f.trWalker(v)),h=f.tds(!1,r[0]);for(let v of h){let L=document.createElement("th");L.dataset.ref=v.dataset.n;let k=0,I=new Set;for(let ae of a){let fe=ae.nextNode();fe.IAST=fe.cloneNode(!0);let be=fe.textContent;be!==""&&(k++,I.add(be))}let $=k<2?k:`${k}(${I.size})`,K=document.createElement("span");K.classList.add("readings"),K.appendChild(document.createTextNode($)),L.appendChild(K);let se=document.createElement("form");se.innerHTML='<div><input class="insignificant" title="insignificant" type="checkbox"'+(v.dataset.insignificant?"checked":"")+'></div><div><input class="binary" title="binary" type="checkbox"'+(v.dataset.binary?"checked":"")+"></div>",L.appendChild(se),n.appendChild(L)}let g=l.querySelector("tbody");g.insertBefore(n,g.firstChild),this.boxdiv.append(l)}}return{slaveinit:function(){comboView.init(),window.startbox!==void 0&&(window.startbox.tree?w.tree(window.startbox.tree.stemmaid,window.startbox.tree.id):window.startbox.text&&w.text(window.startbox.text.name,window.startbox.text.map))},maininit:function(){document.getElementById("comboview").style.display="block",comboView.init(),d()},init:function(){p.viewdiv=document.getElementById("views"),p.descs=document.getElementById("descs"),p.viewdiv.addEventListener("click",de.textClick),document.addEventListener("keydown",de.keyDown,{capture:!0}),document.addEventListener("contextmenu",de.rightClick),document.addEventListener("mouseup",Se.remove)},getWindows:function(){return p.windows},addWindow:function(i){p.windows.push(i)},getViewdiv:function(){return p.viewdiv},getTrees:function(){return p.trees}}}();window.addEventListener("load",window.comboView.maininit);
//# sourceMappingURL=script.js.map
