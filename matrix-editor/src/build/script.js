"use strict";var De={};De.defaults={skip_sgml:!1,syncope:!1};var Ft=De.schemes={balinese:{vowels:"смЕ смЖ смЗ смИ смЙ смК смЛ смМ смН смО  смП смР  смС смТ".split(" "),vowel_marks:"см╡ см╢ см╖ см╕ см╣ см║ см╗ см╝ см╜ снВ см╛ см┐ снГ снА снБ".split(" "),other_marks:["смВ","смД","смБ",""],virama:["снД"],consonants:"смУ смФ смХ смЦ смЧ смШ смЩ смЪ смЫ смЬ смЭ смЮ смЯ сма смб смв смг смд сме смж смз сми смй смк смл смм смн смо смп см░ см▒ см▓ см│".split(" "),symbols:"снР снС снТ снУ снФ снХ снЦ снЧ снШ снЩ   снЮ снЯ".split(" "),zwj:["тАН"],skip:[""]},bengali:{vowels:"ржЕ ржЖ ржЗ ржИ ржЙ ржК ржЛ рза ржМ рзб  ржП ржР  ржУ ржФ".split(" "),vowel_marks:"рж╛ рж┐ рзА рзБ рзВ рзГ рзД рзв рзг  рзЗ рзИ  рзЛ рзМ".split(" "),other_marks:"ржВ ржГ ржБ".split(" "),virama:["рзН"],consonants:"ржХ ржЦ ржЧ ржШ ржЩ ржЪ ржЫ ржЬ ржЭ ржЮ ржЯ ржа ржб ржв ржг ржд рже ржж ржз ржи ржк ржл ржм ржн ржо ржп рж░ рж▓ ржм рж╢ рж╖ рж╕ рж╣ рд│ ржХрзНрж╖ ржЬрзНржЮ".split(" "),symbols:"рзж рзз рзи рзй рзк рзл рзм рзн рзо рзп реР рж╜ ред рее".split(" "),other:"    ржб ржв  ржп ".split(" ")},newa:{vowels:["ЁСРА","ЁСРБ","ЁСРВ","ЁСРГ","ЁСРД","ЁСРЕ","ЁСРЖ","ЁСРЗ","ЁСРИ","ЁСРЙ","","ЁСРК","ЁСРЛ","","ЁСРМ","ЁСРН"],vowel_marks:["ЁСР╡","ЁСР╢","ЁСР╖","ЁСР╕","ЁСР╣","ЁСР║","ЁСР╗","ЁСР╝","ЁСР╜","","ЁСР╛","ЁСР┐","","ЁССА","ЁССБ"],other_marks:["ЁССД","ЁССЕ","ЁССГ","ЁССа","ЁССб",""],virama:["ЁССВ"],consonants:["ЁСРО","ЁСРП","ЁСРР","ЁСРС","ЁСРТ","ЁСРФ","ЁСРХ","ЁСРЦ","ЁСРЧ","ЁСРШ","ЁСРЪ","ЁСРЫ","ЁСРЬ","ЁСРЭ","ЁСРЮ","ЁСРЯ","ЁСРа","ЁСРб","ЁСРв","ЁСРг","ЁСРе","ЁСРж","ЁСРз","ЁСРи","ЁСРй","ЁСРл","ЁСРм","ЁСРо","ЁСР░","ЁСР▒","ЁСР▓","ЁСР│","ЁСР┤"],symbols:["ЁССР","ЁССС","ЁССТ","ЁССУ","ЁССФ","ЁССХ","ЁССЦ","ЁССЧ","ЁССШ","ЁССЩ","ЁССЙ","ЁССЗ","ЁССЛ","ЁССМ"]},sarada:{vowels:["ЁСЖГ","ЁСЖД","ЁСЖЕ","ЁСЖЖ","ЁСЖЗ","ЁСЖИ","ЁСЖЙ","ЁСЖК","ЁСЖЛ","ЁСЖМ","","ЁСЖН","ЁСЖО","","ЁСЖП","ЁСЖР"],vowel_marks:["ЁСЖ│","ЁСЖ┤","ЁСЖ╡","ЁСЖ╢","ЁСЖ╖","ЁСЖ╕","ЁСЖ╣","ЁСЖ║","ЁСЖ╗","","ЁСЖ╝","ЁСЖ╜","","ЁСЖ╛","ЁСЖ┐"],other_marks:["ЁСЖБ","ЁСЖВ","ЁСЖА","ЁСЗВ","ЁСЗГ"],virama:["ЁСЗА"],consonants:["ЁСЖС","ЁСЖТ","ЁСЖУ","ЁСЖФ","ЁСЖХ","ЁСЖЦ","ЁСЖЧ","ЁСЖШ","ЁСЖЩ","ЁСЖЪ","ЁСЖЫ","ЁСЖЬ","ЁСЖЭ","ЁСЖЮ","ЁСЖЯ","ЁСЖа","ЁСЖб","ЁСЖв","ЁСЖг","ЁСЖд","ЁСЖе","ЁСЖж","ЁСЖз","ЁСЖи","ЁСЖй","ЁСЖк","ЁСЖл","ЁСЖм","ЁСЖо","ЁСЖп","ЁСЖ░","ЁСЖ▒","ЁСЖ▓","ЁСЖн"],symbols:["ЁСЗР","ЁСЗС","ЁСЗТ","ЁСЗУ","ЁСЗФ","ЁСЗХ","ЁСЗЦ","ЁСЗЧ","ЁСЗШ","ЁСЗЩ","ЁСЗД","ЁСЗБ","ЁСЗЕ","ЁСЗЖ"]},devanagari:{vowels:"рдЕ рдЖ рдЗ рдИ рдЙ рдК рдЛ реа рдМ реб рдО рдП рдР рдТ рдУ рдФ рдП рдР рдУ".split(" "),vowel_marks:"рд╛ рд┐ реА реБ реВ реГ реД рев рег реЖ реЗ реИ реК реЛ реМ реО реОреЗ реОрд╛ реОреЛ реЖ реП".split(" "),other_marks:"рдВ рдГ рдБ с│╡ с│╢ ъг╜".split(" "),virama:["реН"],consonants:"рдХ рдЦ рдЧ рдШ рдЩ рдЪ рдЫ рдЬ рдЭ рдЮ рдЯ рда рдб рдв рдг рдд рде рдж рдз рди рдк рдл рдм рдн рдо рдп рд░ рд▓ рд╡ рд╢ рд╖ рд╕ рд╣ рд│".split(" "),symbols:"реж рез реи рей рек рел рем рен рео реп реР рд╜ ред рее".split(" "),zwj:["тАН"],skip:[""],accent:["реС","реТ"],combo_accent:"рдГреС рдГреТ рдВреС рдВреТ".split(" "),candra:["реЕ"],other:"рдХрд╝ рдЦрд╝ рдЧрд╝ рдЬрд╝ рдбрд╝ рдврд╝ рдлрд╝ рдпрд╝ рд▒".split(" ")},gujarati:{vowels:"ркЕ ркЖ ркЗ ркИ ркЙ ркК ркЛ рла ркМ рлб  ркП ркР  ркУ ркФ".split(" "),vowel_marks:"рк╛ рк┐ рлА рлБ рлВ рлГ рлД рлв рлг  рлЗ рлИ  рлЛ рлМ".split(" "),other_marks:"ркВ ркГ ркБ".split(" "),virama:["рлН"],consonants:"ркХ ркЦ ркЧ ркШ ркЩ ркЪ ркЫ ркЬ ркЭ ркЮ ркЯ рка ркб ркв ркг ркд рке ркж ркз рки ркк ркл ркм ркн рко ркп рк░ рк▓ рк╡ рк╢ рк╖ рк╕ рк╣ рк│".split(" "),symbols:"рлж рлз рли рлй рлк рлл рлм рлн рло рлп рлР рк╜ рлд рле".split(" "),candra:["рлЕ"]},gurmukhi:{vowels:"риЕ риЖ риЗ риИ риЙ риК      риП риР  риУ риФ".split(" "),vowel_marks:"ри╛ ри┐ рйА рйБ рйВ      рйЗ рйИ  рйЛ рйМ".split(" "),other_marks:"риВ риГ риБ".split(" "),virama:["рйН"],consonants:"риХ риЦ риЧ риШ риЩ риЪ риЫ риЬ риЭ риЮ риЯ риа риб рив риг рид рие риж риз рии рик рил рим рин рио рип ри░ ри▓ ри╡ ри╢ ри╢ ри╕ ри╣ ри│".split(" "),symbols:"рйж рйз рйи рйй рйк рйл рйм рйн рйо рйп реР рд╜ ред рее".split(" "),other:" риЦ риЧ риЬ риб  рил  ".split(" ")},kannada:{vowels:"р▓Е р▓Ж р▓З р▓И р▓Й р▓К р▓Л р│а р▓М р│б р▓О р▓П р▓Р р▓Т р▓У р▓Ф".split(" "),vowel_marks:"р▓╛ р▓┐ р│А р│Б р│В р│Г р│Д р│в р│г р│Ж р│З р│И р│К р│Л р│М".split(" "),other_marks:"р▓В р▓Г рдБ".split(" "),virama:["р│Н"],consonants:"р▓Х р▓Ц р▓Ч р▓Ш р▓Щ р▓Ъ р▓Ы р▓Ь р▓Э р▓Ю р▓Я р▓а р▓б р▓в р▓г р▓д р▓е р▓ж р▓з р▓и р▓к р▓л р▓м р▓н р▓о р▓п р▓░ р▓▓ р▓╡ р▓╢ р▓╖ р▓╕ р▓╣ р▓│".split(" "),symbols:"р│ж р│з р│и р│й р│к р│л р│м р│н р│о р│п р▓Ур▓В р▓╜ ред рее".split(" "),other:"      р▓л  р▓▒".split(" ")},malayalam:{vowels:"р┤Е р┤Ж р┤З р┤И р┤Й р┤К р┤Л р╡а р┤М р╡б р┤О р┤П р┤Р р┤Т р┤У р┤Ф".split(" "),vowel_marks:"р┤╛ р┤┐ р╡А р╡Б р╡В р╡Г р╡Д р╡в р╡г р╡Ж р╡З р╡И р╡К р╡Л р╡М".split(" "),other_marks:"р┤В р┤Г рдБ".split(" "),virama:["р╡Н"],consonants:"р┤Х р┤Ц р┤Ч р┤Ш р┤Щ р┤Ъ р┤Ы р┤Ь р┤Э р┤Ю р┤Я р┤а р┤б р┤в р┤г р┤д р┤е р┤ж р┤з р┤и р┤к р┤л р┤м р┤н р┤о р┤п р┤░ р┤▓ р┤╡ р┤╢ р┤╖ р┤╕ р┤╣ р┤│".split(" "),symbols:"р╡ж р╡з р╡и р╡й р╡к р╡л р╡м р╡н р╡о р╡п р┤Ур┤В р┤╜ ред рее".split(" "),other:"        р┤▒".split(" ")},oriya:{vowels:"рмЕ рмЖ рмЗ рмИ рмЙ рмК рмЛ рна рмМ рнб  рмП рмР  рмУ рмФ".split(" "),vowel_marks:"рм╛ рм┐ рнА рнБ рнВ рнГ рнД рнв рнг  рнЗ рнИ  рнЛ рнМ".split(" "),other_marks:"рмВ рмГ рмБ".split(" "),virama:["рнН"],consonants:"рмХ рмЦ рмЧ рмШ рмЩ рмЪ рмЫ рмЬ рмЭ рмЮ рмЯ рма рмб рмв рмг рмд рме рмж рмз рми рмк рмл рмм рмн рмо рмп рм░ рм▓ рм╡ рм╢ рм╖ рм╕ рм╣ рм│".split(" "),symbols:"рнж рнз рни рнй рнк рнл рнм рнн рно рнп рмУрмВ рм╜ ред рее".split(" "),other:"    рмб рмв  рмп ".split(" ")},tamil:{vowels:"роЕ роЖ роЗ роИ роЙ роК     роО роП роР роТ роУ роФ".split(" "),vowel_marks:"ро╛ ро┐ рпА рпБ рпВ     рпЖ рпЗ рпИ рпК рпЛ рпМ".split(" "),other_marks:"роВ роГ ".split(" "),virama:["рпН"],consonants:"роХ роХ роХ роХ роЩ роЪ роЪ роЬ роЪ роЮ роЯ роЯ роЯ роЯ рог род род род род рои рок рок рок рок роо роп ро░ ро▓ ро╡ ро╢ ро╖ ро╕ ро╣ ро│".split(" "),symbols:"рпж рпз рпи рпй рпк рпл рпм рпн рпо рпп рпР рд╜ ред рее".split(" "),other:"        ро▒".split(" ")},telugu:{vowels:"р░Е р░Ж р░З р░И р░Й р░К р░Л р▒а р░М р▒б р░О р░П р░Р р░Т р░У р░Ф".split(" "),vowel_marks:"р░╛ р░┐ р▒А р▒Б р▒В р▒Г р▒Д р▒в р▒г р▒Ж р▒З р▒И р▒К р▒Л р▒М".split(" "),other_marks:"р░В р░Г р░Б с│▓ с│▓".split(" "),virama:["р▒Н"],consonants:"р░Х р░Ц р░Ч р░Ш р░Щ р░Ъ р░Ы р░Ь р░Э р░Ю р░Я р░а р░б р░в р░г р░д р░е р░ж р░з р░и р░к р░л р░м р░н р░о р░п р░░ р░▓ р░╡ р░╢ р░╖ р░╕ р░╣ р░│".split(" "),symbols:"р▒ж р▒з р▒и р▒й р▒к р▒л р▒м р▒н р▒о р▒п р░Ур░В р░╜ ред рее".split(" "),other:"        р░▒".split(" ")},iast:{vowels:"a ─Б i ─л u ┼л с╣Ы с╣Э с╕╖ с╕╣ с║╜ e ai ├╡ o au ├к a├о ├┤ a├╗".split(" "),other_marks:["с╣Г","с╕е","m╠Р","с║Ц","с╕л","oс╕┐"],virama:[""],consonants:"k kh g gh с╣Е c ch j jh ├▒ с╣н с╣нh с╕Н с╕Нh с╣З t th d dh n p ph b bh m y r l v ┼Ы с╣г s h с╕╗".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oс╣Б ' | ||".split(" ")},iso:{vowels:"a ─Б i ─л u ┼л r╠е r╠е╠Д l╠е l╠е╠Д с║╜ e ai ├╡ o au ├к a├о ├┤ a├╗".split(" "),other_marks:["с╣Б","с╕е","m╠Р","oс╕┐"],virama:[""],consonants:"k kh g gh с╣Е c ch j jh ├▒ с╣н с╣нh с╕Н с╕Нh с╣З t th d dh n p ph b bh m y r l v ┼Ы с╣г s h с╕╖ kс╣г j├▒".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 om╠Р ' | ||".split(" ")},itrans:{vowels:"a A i I u U RRi RRI LLi LLI  e ai  o au".split(" "),other_marks:["M","H",".N"],virama:[""],consonants:"k kh g gh ~N ch Ch j jh ~n T Th D Dh N t th d dh n p ph b bh m y r l v sh Sh s h L kSh j~n".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM .a | ||".split(" "),candra:[".c"],zwj:["{}"],skip:"_",accent:["\\'","\\_"],combo_accent:"\\'H \\_H \\'M \\_M".split(" "),other:"q K G z .D .Dh f Y R".split(" ")},hk:{vowels:"a A i I u U R RR lR lRR  e ai  o au".split(" "),other_marks:"M H ~".split(" "),virama:[""],consonants:"k kh g gh G c ch j jh J T Th D Dh N t th d dh n p ph b bh m y r l v z S s h L kS jJ".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM ' | ||".split(" ")},slp1:{vowels:"a A i I u U f F x X с║╜ e E ├╡ o O ├к ├К ├┤ ├Ф".split(" "),other_marks:"M H m╠Р с║Ц с╕л oс╕┐".split(" "),virama:[""],consonants:"k K g G N c C j J Y w W q Q R t T d D n p P b B m y r l v S z s h L".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oс╣Б ' | ||".split(" ")},velthuis:{vowels:"a aa i ii u uu .r .rr .li .ll  e ai  o au".split(" "),other_marks:".m .h ".split(" "),virama:[""],consonants:'k kh g gh "n c ch j jh ~n .t .th .d .d .n t th d dh n p ph b bh m y r l v ~s .s s h L k.s j~n'.split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 o.m ' | ||".split(" ")},wx:{vowels:"a A i I u U q Q L   e E  o O".split(" "),other_marks:"M H z".split(" "),virama:[""],consonants:"k K g G f c C j J F t T d D N w W x X n p P b B m y r l v S R s h  kR jF".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oM ' | ||".split(" ")}},x1={},Jt={iast:{с╣Ы:["r╠е"],с╣Г:["с╣Б"]},itrans:{A:["aa"],I:["ii","ee"],U:["uu","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],"j~n":["GY","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":"\\_.m \\_.n \\`M \\`.m \\`.n".split(" "),".a":["~"],"|":["."],"||":[".."],z:["J"]}},Rt={};De.isRomanScheme=function(x){return x1.hasOwnProperty(x)};De.addBrahmicScheme=function(x,p){De.schemes[x]=p};De.addRomanScheme=function(x,p){"vowel_marks"in p||(p.vowel_marks=p.vowels.slice(1)),De.schemes[x]=p,x1[x]=!0};var b1=function(x){var p={};for(var I in x)!x.hasOwnProperty(I)||(p[I]=x[I].slice(0));return p};(function(){var x=Ft.kolkata=b1(Ft.iast),p="iast itrans hk kolkata slp1 velthuis wx".split(" ");x.vowels="a ─Б i ─л u ┼л с╣Ы с╣Э с╕╖ с╕╣ e ─У ai o ┼Н au".split(" ");for(var I=0,b;b=p[I];I++)De.addRomanScheme(b,Ft[b]);var E=b1(Ft.itrans);E.vowels="a A i I u U Ri RRI LLi LLi e E ai o O au".split(" "),E.vowel_marks=E.vowels.slice(1),Jt.itrans_dravidian=Jt.itrans,De.addRomanScheme("itrans_dravidian",E)})();var $1=function(x,p){var I=Jt[x]||{},b={},E=De.schemes[x],f={},B=[],u={},d=De.schemes[p];for(var C in E)if(!!E.hasOwnProperty(C)){var N=E[C],H=d[C];if(H!==void 0)for(var O=0;O<N.length;O++){var q=N[O],L=H[O],F=I[q]||[],J=F.length,se=0;for(B.push(q.length),se=0;se<J;se++)B.push(F[se].length);if(C==="vowel_marks"||C==="virama")for(u[q]=L,se=0;se<J;se++)u[F[se]]=L;else{for(f[q]=L,se=0;se<J;se++)f[F[se]]=L;if(C==="consonants"||C==="other")for(b[q]=L,se=0;se<J;se++)b[F[se]]=L}}}return{consonants:b,fromRoman:De.isRomanScheme(x),letters:f,marks:u,maxTokenLength:Math.max.apply(Math,B),toRoman:De.isRomanScheme(p),virama:d.virama}},U1=function(x,p,I){for(var b=[],E=p.consonants,f=x.length,B=!1,u=p.letters,d=p.marks,C=p.maxTokenLength,N=I.skip_sgml,H=I.syncope,O,q,L="",F=p.toRoman,J=p.virama,se=!1,U=!1,$=!1,oe=0,he;(he=x.charAt(oe))||L;oe++){var ge=C-L.length;if(!(ge>0&&oe<f&&(L+=he,ge>1)))for(var j=0;j<C;j++){var pe=L.substr(0,C-j);if(se===!0)se=pe!==">";else if(pe==="<")se=N;else if(pe==="##"){$=!$,L=L.substr(2);break}if(U=se||$,(O=u[pe])!==void 0&&!U){F?b.push(O):(B?(q=d[pe])?b.push(q):pe!=="a"&&(b.push(J),b.push(O)):b.push(O),B=pe in E),L=L.substr(C-j);break}else j===C-1&&(B&&(B=!1,H||b.push(J)),b.push(pe),L=L.substr(1))}}return B&&!H&&b.push(J),b.join("")},j1=function(x,p){for(var I=[],b=p.consonants,E=!1,f=!1,B=p.letters,u=p.marks,d,C=p.toRoman,N=!1,H=0,O;O=x.charAt(H);H++){if(O==="#"){E?(N=!N,E=!1):E=!0,f&&(I.push("a"),f=!1);continue}else if(N){I.push(O);continue}(d=u[O])!==void 0?(I.push(d),f=!1):(E&&(I.push("#"),E=!1),f&&(I.push("a"),f=!1),(d=B[O])?(I.push(d),f=C&&O in b):I.push(O))}return f&&I.push("a"),I.join("")};De.t=function(x,p,I,b){b=b||{};var E=Rt.options||{},f=De.defaults,B=Rt.from===p&&Rt.to===I,u;for(var d in f)if(f.hasOwnProperty(d)){var C=f[d];d in b&&(C=b[d]),b[d]=C,C!==E[d]&&(B=!1)}return B?u=Rt.map:(u=$1(p,I,b),Rt={from:p,map:u,options:b,to:I}),p==="itrans"&&(x=x.replace(/\{\\m\+\}/g,".h.N"),x=x.replace(/\.h/g,""),x=x.replace(/\\([^'`_]|$)/g,"##$1##")),u.fromRoman?U1(x,u,b):j1(x,u,b)};var Qt={};(function(x){"use strict";x.__type__="csv";var p=typeof jQuery!="undefined"&&jQuery.Deferred||typeof _!="undefined"&&_.Deferred||function(){var u,d,C=new Promise(function(N,H){u=N,d=H});return{resolve:u,reject:d,promise:function(){return C}}};x.fetch=function(u){var d=new p;if(u.file){var C=new FileReader,N=u.encoding||"UTF-8";C.onload=function(q){var L=x.extractFields(x.parse(q.target.result,u),u);L.useMemoryStore=!0,L.metadata={filename:u.file.name},d.resolve(L)},C.onerror=function(q){d.reject({error:{message:"Failed to load file. Code: "+q.target.error.code}})},C.readAsText(u.file,N)}else if(u.data){var H=x.extractFields(x.parse(u.data,u),u);H.useMemoryStore=!0,d.resolve(H)}else if(u.url){var O=window.fetch||function(q){var L=jQuery.get(q),F={then:function(J){return L.done(J),F},catch:function(J){return L.fail(J),F}};return F};O(u.url).then(function(q){return q.text?q.text():q}).then(function(q){var L=x.extractFields(x.parse(q,u),u);L.useMemoryStore=!0,d.resolve(L)}).catch(function(q,L){d.reject({error:{message:"Failed to load file. "+q.statusText+". Code: "+q.status,request:q}})})}return d.promise()},x.extractFields=function(u,d){return d.noHeaderRow!==!0&&u.length>0?{fields:u[0],records:u.slice(1)}:{records:u}},x.normalizeDialectOptions=function(u){var d={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var C in u)C==="trim"?d.skipinitialspace=u.trim:d[C.toLowerCase()]=u[C];return d},x.parse=function(u,d){(!d||d&&!d.lineterminator)&&(u=x.normalizeLineTerminator(u,d));var C=x.normalizeDialectOptions(d);u=B(u,C.lineterminator);var N="",H=!1,O=!1,q="",L=[],F=[],J,se;for(se=function(U){return O!==!0&&(U===""?U=null:C.skipinitialspace===!0&&(U=f(U)),I.test(U)?U=parseInt(U,10):b.test(U)&&(U=parseFloat(U,10))),U},J=0;J<u.length;J+=1)N=u.charAt(J),H===!1&&(N===C.delimiter||N===C.lineterminator)?(q=se(q),L.push(q),N===C.lineterminator&&(F.push(L),L=[]),q="",O=!1):N!==C.quotechar?q+=N:H?u.charAt(J+1)===C.quotechar?(q+=C.quotechar,J+=1):H=!1:(H=!0,O=!0);return q=se(q),L.push(q),F.push(L),C.skipinitialrows&&(F=F.slice(C.skipinitialrows)),F},x.normalizeLineTerminator=function(u,d){return d=d||{},d.lineterminator?u:u.replace(/(\r\n|\n|\r)/gm,`
`)},x.objectToArray=function(u){for(var d=[],C=[],N=[],H=0;H<u.fields.length;H++){var O=u.fields[H].id;N.push(O);var q=u.fields[H].label?u.fields[H].label:O;C.push(q)}d.push(C);for(var H=0;H<u.records.length;H++){for(var L=[],F=u.records[H],J=0;J<N.length;J++)L.push(F[N[J]]);d.push(L)}return d},x.serialize=function(u,d){var C=null;u instanceof Array?C=u:C=x.objectToArray(u);var N=x.normalizeDialectOptions(d),H="",O="",q="",L="",F,J,se;for(se=function(U){return U===null?U="":typeof U=="string"&&E.test(U)?(N.doublequote&&(U=U.replace(/"/g,'""')),U=N.quotechar+U+N.quotechar):typeof U=="number"&&(U=U.toString(10)),U},F=0;F<C.length;F+=1)for(H=C[F],J=0;J<H.length;J+=1)O=se(H[J]),J===H.length-1?(q+=O,L+=q+N.lineterminator,q=""):q+=O+N.delimiter,O="";return L};var I=/^\d+$/,b=/^\d*\.\d+$|^\d+\.\d*$/,E=/^\s|\s$|,|"|\n/,f=function(){return String.prototype.trim?function(u){return u.trim()}:function(u){return u.replace(/^\s*/,"").replace(/\s*$/,"")}}();function B(u,d){return u.charAt(u.length-d.length)!==d?u:u.substring(0,u.length-d.length)}})(Qt);function G1(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function X1(x,p,I){return I={path:p,exports:{},require:function(b,E){return W1(b,E==null?I.path:E)}},x(I,I.exports),I.exports}function W1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Y1=X1(function(x,p){(function(I,b){x.exports=b()})(window,function(){return function(I){var b={};function E(f){if(b[f])return b[f].exports;var B=b[f]={i:f,l:!1,exports:{}};return I[f].call(B.exports,B,B.exports,E),B.l=!0,B.exports}return E.m=I,E.c=b,E.d=function(f,B,u){E.o(f,B)||Object.defineProperty(f,B,{enumerable:!0,get:u})},E.r=function(f){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},E.t=function(f,B){if(1&B&&(f=E(f)),8&B||4&B&&typeof f=="object"&&f&&f.__esModule)return f;var u=Object.create(null);if(E.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:f}),2&B&&typeof f!="string")for(var d in f)E.d(u,d,function(C){return f[C]}.bind(null,d));return u},E.n=function(f){var B=f&&f.__esModule?function(){return f.default}:function(){return f};return E.d(B,"a",B),B},E.o=function(f,B){return Object.prototype.hasOwnProperty.call(f,B)},E.p="",E(E.s=1)}([function(I,b,E){var f,B;f=[E(2)],(B=function(u){function d(e){if(d.is(e,"function"))return C?e():u.on("raphael.DOMload",e);if(d.is(e,i))return d._engine.create[U](d,e.splice(0,3+d.is(e[0],W))).add(e);var s=Array.prototype.slice.call(arguments,0);if(d.is(s[s.length-1],"function")){var a=s.pop();return C?a.call(d._engine.create[U](d,s)):u.on("raphael.DOMload",function(){a.call(d._engine.create[U](d,s))})}return d._engine.create[U](d,arguments)}d.version="2.3.0",d.eve=u;var C,N,H=/[, ]+/,O={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},q=/\{(\d+)\}/g,L="hasOwnProperty",F={doc:document,win:window},J={was:Object.prototype[L].call(F.win,"Raphael"),is:F.win.Raphael},se=function(){this.ca=this.customAttributes={}},U="apply",$="concat",oe="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,he="",ge=" ",j=String,pe="split",de="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[pe](ge),D={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},ye=j.prototype.toLowerCase,ve=Math,Se=ve.max,G=ve.min,_e=ve.abs,Ae=ve.pow,ee=ve.PI,W="number",i="array",l=Object.prototype.toString,n=(d._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),t={NaN:1,Infinity:1,"-Infinity":1},r=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,o=ve.round,h=parseFloat,g=parseInt,v=j.prototype.toUpperCase,P=d._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},k=d._availableAnimAttrs={blur:W,"clip-rect":"csv",cx:W,cy:W,fill:"colour","fill-opacity":W,"font-size":W,height:W,opacity:W,path:"path",r:W,rx:W,ry:W,stroke:"colour","stroke-opacity":W,"stroke-width":W,transform:"transform",width:W,x:W,y:W},M=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,V={hs:1,rg:1},Z=/,?([achlmqrstvxz]),?/gi,ne=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ie=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,fe=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,xe=(d._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),we=function(e,s){return h(e)-h(s)},be=function(e){return e},Ce=d._rectPath=function(e,s,a,c,m){return m?[["M",e+m,s],["l",a-2*m,0],["a",m,m,0,0,1,m,m],["l",0,c-2*m],["a",m,m,0,0,1,-m,m],["l",2*m-a,0],["a",m,m,0,0,1,-m,-m],["l",0,2*m-c],["a",m,m,0,0,1,m,-m],["z"]]:[["M",e,s],["l",a,0],["l",0,c],["l",-a,0],["z"]]},Ne=function(e,s,a,c){return c==null&&(c=a),[["M",e,s],["m",0,-c],["a",a,c,0,1,1,0,2*c],["a",a,c,0,1,1,0,-2*c],["z"]]},Be=d._getPath={path:function(e){return e.attr("path")},circle:function(e){var s=e.attrs;return Ne(s.cx,s.cy,s.r)},ellipse:function(e){var s=e.attrs;return Ne(s.cx,s.cy,s.rx,s.ry)},rect:function(e){var s=e.attrs;return Ce(s.x,s.y,s.width,s.height,s.r)},image:function(e){var s=e.attrs;return Ce(s.x,s.y,s.width,s.height)},text:function(e){var s=e._getBBox();return Ce(s.x,s.y,s.width,s.height)},set:function(e){var s=e._getBBox();return Ce(s.x,s.y,s.width,s.height)}},Te=d.mapPath=function(e,s){if(!s)return e;var a,c,m,w,A,S,R;for(m=0,A=(e=St(e)).length;m<A;m++)for(w=1,S=(R=e[m]).length;w<S;w+=2)a=s.x(R[w],R[w+1]),c=s.y(R[w],R[w+1]),R[w]=a,R[w+1]=c;return e};if(d._g=F,d.type=F.win.SVGAngle||F.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",d.type=="VML"){var Le,qe=F.doc.createElement("div");if(qe.innerHTML='<v:shape adj="1"/>',(Le=qe.firstChild).style.behavior="url(#default#VML)",!Le||typeof Le.adj!="object")return d.type=he;qe=null}function ze(e){if(typeof e=="function"||Object(e)!==e)return e;var s=new e.constructor;for(var a in e)e[L](a)&&(s[a]=ze(e[a]));return s}d.svg=!(d.vml=d.type=="VML"),d._Paper=se,d.fn=N=se.prototype=d.prototype,d._id=0,d.is=function(e,s){return(s=ye.call(s))=="finite"?!t[L](+e):s=="array"?e instanceof Array:s=="null"&&e===null||s==typeof e&&e!==null||s=="object"&&e===Object(e)||s=="array"&&Array.isArray&&Array.isArray(e)||l.call(e).slice(8,-1).toLowerCase()==s},d.angle=function(e,s,a,c,m,w){if(m==null){var A=e-a,S=s-c;return A||S?(180+180*ve.atan2(-S,-A)/ee+360)%360:0}return d.angle(e,s,m,w)-d.angle(a,c,m,w)},d.rad=function(e){return e%360*ee/180},d.deg=function(e){return Math.round(180*e/ee%360*1e3)/1e3},d.snapTo=function(e,s,a){if(a=d.is(a,"finite")?a:10,d.is(e,i)){for(var c=e.length;c--;)if(_e(e[c]-s)<=a)return e[c]}else{var m=s%(e=+e);if(m<a)return s-m;if(m>e-a)return s-m+e}return s};var He,Xe;d.createUUID=(He=/[xy]/g,Xe=function(e){var s=16*ve.random()|0;return(e=="x"?s:3&s|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(He,Xe).toUpperCase()}),d.setWindow=function(e){u("raphael.setWindow",d,F.win,e),F.win=e,F.doc=F.win.document,d._engine.initWin&&d._engine.initWin(F.win)};var Qe=function(e){if(d.vml){var s,a=/^\s+|\s+$/g;try{var c=new ActiveXObject("htmlfile");c.write("<body>"),c.close(),s=c.body}catch(A){s=createPopup().document.body}var m=s.createTextRange();Qe=Fe(function(A){try{s.style.color=j(A).replace(a,he);var S=m.queryCommandValue("ForeColor");return"#"+("000000"+(S=(255&S)<<16|65280&S|(16711680&S)>>>16).toString(16)).slice(-6)}catch(R){return"none"}})}else{var w=F.doc.createElement("i");w.title="Rapha├лl Colour Picker",w.style.display="none",F.doc.body.appendChild(w),Qe=Fe(function(A){return w.style.color=A,F.doc.defaultView.getComputedStyle(w,he).getPropertyValue("color")})}return Qe(e)},ot=function(){return"hsb("+[this.h,this.s,this.b]+")"},lt=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ct=function(){return this.hex},ct=function(e,s,a){if(s==null&&d.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(a=e.b,s=e.g,e=e.r),s==null&&d.is(e,"string")){var c=d.getRGB(e);e=c.r,s=c.g,a=c.b}return(e>1||s>1||a>1)&&(e/=255,s/=255,a/=255),[e,s,a]},Nt=function(e,s,a,c){var m={r:e*=255,g:s*=255,b:a*=255,hex:d.rgb(e,s,a),toString:Ct};return d.is(c,"finite")&&(m.opacity=c),m};function Fe(e,s,a){return function c(){var m=Array.prototype.slice.call(arguments,0),w=m.join("тРА"),A=c.cache=c.cache||{},S=c.count=c.count||[];return A[L](w)?(function(R,z){for(var Y=0,ae=R.length;Y<ae;Y++)if(R[Y]===z)return R.push(R.splice(Y,1)[0])}(S,w),a?a(A[w]):A[w]):(S.length>=1e3&&delete A[S.shift()],S.push(w),A[w]=e[U](s,m),a?a(A[w]):A[w])}}d.color=function(e){var s;return d.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(s=d.hsb2rgb(e),e.r=s.r,e.g=s.g,e.b=s.b,e.hex=s.hex):d.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(s=d.hsl2rgb(e),e.r=s.r,e.g=s.g,e.b=s.b,e.hex=s.hex):(d.is(e,"string")&&(e=d.getRGB(e)),d.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(s=d.rgb2hsl(e),e.h=s.h,e.s=s.s,e.l=s.l,s=d.rgb2hsb(e),e.v=s.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=Ct,e},d.hsb2rgb=function(e,s,a,c){var m,w,A,S,R;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(a=e.b,s=e.s,c=e.o,e=e.h),S=(R=a*s)*(1-_e((e=(e*=360)%360/60)%2-1)),m=w=A=a-R,Nt(m+=[R,S,0,0,S,R][e=~~e],w+=[S,R,R,S,0,0][e],A+=[0,0,S,R,R,S][e],c)},d.hsl2rgb=function(e,s,a,c){var m,w,A,S,R;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(a=e.l,s=e.s,e=e.h),(e>1||s>1||a>1)&&(e/=360,s/=100,a/=100),S=(R=2*s*(a<.5?a:1-a))*(1-_e((e=(e*=360)%360/60)%2-1)),m=w=A=a-R/2,Nt(m+=[R,S,0,0,S,R][e=~~e],w+=[S,R,R,S,0,0][e],A+=[0,0,S,R,R,S][e],c)},d.rgb2hsb=function(e,s,a){var c,m;return e=(a=ct(e,s,a))[0],s=a[1],a=a[2],{h:(((m=(c=Se(e,s,a))-G(e,s,a))==0?null:c==e?(s-a)/m:c==s?(a-e)/m+2:(e-s)/m+4)+360)%6*60/360,s:m==0?0:m/c,b:c,toString:ot}},d.rgb2hsl=function(e,s,a){var c,m,w,A;return e=(a=ct(e,s,a))[0],s=a[1],a=a[2],c=((m=Se(e,s,a))+(w=G(e,s,a)))/2,{h:(((A=m-w)==0?null:m==e?(s-a)/A:m==s?(a-e)/A+2:(e-s)/A+4)+360)%6*60/360,s:A==0?0:c<.5?A/(2*c):A/(2-2*c),l:c,toString:lt}},d._path2string=function(){return this.join(",").replace(Z,"$1")},d._preload=function(e,s){var a=F.doc.createElement("img");a.style.cssText="position:absolute;left:-9999em;top:-9999em",a.onload=function(){s.call(this),this.onload=null,F.doc.body.removeChild(this)},a.onerror=function(){F.doc.body.removeChild(this)},F.doc.body.appendChild(a),a.src=e};function Ke(){return this.hex}function ut(e,s){for(var a=[],c=0,m=e.length;m-2*!s>c;c+=2){var w=[{x:+e[c-2],y:+e[c-1]},{x:+e[c],y:+e[c+1]},{x:+e[c+2],y:+e[c+3]},{x:+e[c+4],y:+e[c+5]}];s?c?m-4==c?w[3]={x:+e[0],y:+e[1]}:m-2==c&&(w[2]={x:+e[0],y:+e[1]},w[3]={x:+e[2],y:+e[3]}):w[0]={x:+e[m-2],y:+e[m-1]}:m-4==c?w[3]=w[2]:c||(w[0]={x:+e[c],y:+e[c+1]}),a.push(["C",(-w[0].x+6*w[1].x+w[2].x)/6,(-w[0].y+6*w[1].y+w[2].y)/6,(w[1].x+6*w[2].x-w[3].x)/6,(w[1].y+6*w[2].y-w[3].y)/6,w[2].x,w[2].y])}return a}d.getRGB=Fe(function(e){if(!e||(e=j(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ke};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Ke};!V[L](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=Qe(e));var s,a,c,m,w,A,S=e.match(n);return S?(S[2]&&(c=g(S[2].substring(5),16),a=g(S[2].substring(3,5),16),s=g(S[2].substring(1,3),16)),S[3]&&(c=g((w=S[3].charAt(3))+w,16),a=g((w=S[3].charAt(2))+w,16),s=g((w=S[3].charAt(1))+w,16)),S[4]&&(A=S[4][pe](M),s=h(A[0]),A[0].slice(-1)=="%"&&(s*=2.55),a=h(A[1]),A[1].slice(-1)=="%"&&(a*=2.55),c=h(A[2]),A[2].slice(-1)=="%"&&(c*=2.55),S[1].toLowerCase().slice(0,4)=="rgba"&&(m=h(A[3])),A[3]&&A[3].slice(-1)=="%"&&(m/=100)),S[5]?(A=S[5][pe](M),s=h(A[0]),A[0].slice(-1)=="%"&&(s*=2.55),a=h(A[1]),A[1].slice(-1)=="%"&&(a*=2.55),c=h(A[2]),A[2].slice(-1)=="%"&&(c*=2.55),(A[0].slice(-3)=="deg"||A[0].slice(-1)=="┬░")&&(s/=360),S[1].toLowerCase().slice(0,4)=="hsba"&&(m=h(A[3])),A[3]&&A[3].slice(-1)=="%"&&(m/=100),d.hsb2rgb(s,a,c,m)):S[6]?(A=S[6][pe](M),s=h(A[0]),A[0].slice(-1)=="%"&&(s*=2.55),a=h(A[1]),A[1].slice(-1)=="%"&&(a*=2.55),c=h(A[2]),A[2].slice(-1)=="%"&&(c*=2.55),(A[0].slice(-3)=="deg"||A[0].slice(-1)=="┬░")&&(s/=360),S[1].toLowerCase().slice(0,4)=="hsla"&&(m=h(A[3])),A[3]&&A[3].slice(-1)=="%"&&(m/=100),d.hsl2rgb(s,a,c,m)):((S={r:s,g:a,b:c,toString:Ke}).hex="#"+(16777216|c|a<<8|s<<16).toString(16).slice(1),d.is(m,"finite")&&(S.opacity=m),S)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ke}},d),d.hsb=Fe(function(e,s,a){return d.hsb2rgb(e,s,a).hex}),d.hsl=Fe(function(e,s,a){return d.hsl2rgb(e,s,a).hex}),d.rgb=Fe(function(e,s,a){function c(m){return m+.5|0}return"#"+(16777216|c(a)|c(s)<<8|c(e)<<16).toString(16).slice(1)}),d.getColor=function(e){var s=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},a=this.hsb2rgb(s.h,s.s,s.b);return s.h+=.075,s.h>1&&(s.h=0,s.s-=.2,s.s<=0&&(this.getColor.start={h:0,s:1,b:s.b})),a.hex},d.getColor.reset=function(){delete this.start},d.parsePathString=function(e){if(!e)return null;var s=je(e);if(s.arr)return Ve(s.arr);var a={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},c=[];return d.is(e,i)&&d.is(e[0],i)&&(c=Ve(e)),c.length||j(e).replace(ne,function(m,w,A){var S=[],R=w.toLowerCase();if(A.replace(fe,function(z,Y){Y&&S.push(+Y)}),R=="m"&&S.length>2&&(c.push([w][$](S.splice(0,2))),R="l",w=w=="m"?"l":"L"),R=="r")c.push([w][$](S));else for(;S.length>=a[R]&&(c.push([w][$](S.splice(0,a[R]))),a[R]););}),c.toString=d._path2string,s.arr=Ve(c),c},d.parseTransformString=Fe(function(e){if(!e)return null;var s=[];return d.is(e,i)&&d.is(e[0],i)&&(s=Ve(e)),s.length||j(e).replace(ie,function(a,c,m){var w=[];ye.call(c),m.replace(fe,function(A,S){S&&w.push(+S)}),s.push([c][$](w))}),s.toString=d._path2string,s},this,function(e){if(!e)return e;for(var s=[],a=0;a<e.length;a++){for(var c=[],m=0;m<e[a].length;m++)c.push(e[a][m]);s.push(c)}return s});var je=function(e){var s=je.ps=je.ps||{};return s[e]?s[e].sleep=100:s[e]={sleep:100},setTimeout(function(){for(var a in s)s[L](a)&&a!=e&&(s[a].sleep--,!s[a].sleep&&delete s[a])}),s[e]};function ht(e,s,a,c,m){return e*(e*(-3*s+9*a-9*c+3*m)+6*s-12*a+6*c)-3*s+3*a}function Ge(e,s,a,c,m,w,A,S,R){R==null&&(R=1);for(var z=(R=R>1?1:R<0?0:R)/2,Y=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ae=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],K=0,X=0;X<12;X++){var te=z*Y[X]+z,le=ht(te,e,a,m,A),re=ht(te,s,c,w,S),Q=le*le+re*re;K+=ae[X]*ve.sqrt(Q)}return z*K}function _t(e,s,a,c,m,w,A,S){if(!(Se(e,a)<G(m,A)||G(e,a)>Se(m,A)||Se(s,c)<G(w,S)||G(s,c)>Se(w,S))){var R=(e-a)*(w-S)-(s-c)*(m-A);if(R){var z=((e*c-s*a)*(m-A)-(e-a)*(m*S-w*A))/R,Y=((e*c-s*a)*(w-S)-(s-c)*(m*S-w*A))/R,ae=+z.toFixed(2),K=+Y.toFixed(2);if(!(ae<+G(e,a).toFixed(2)||ae>+Se(e,a).toFixed(2)||ae<+G(m,A).toFixed(2)||ae>+Se(m,A).toFixed(2)||K<+G(s,c).toFixed(2)||K>+Se(s,c).toFixed(2)||K<+G(w,S).toFixed(2)||K>+Se(w,S).toFixed(2)))return{x:z,y:Y}}}}function dt(e,s,a){var c=d.bezierBBox(e),m=d.bezierBBox(s);if(!d.isBBoxIntersect(c,m))return a?0:[];for(var w=Ge.apply(0,e),A=Ge.apply(0,s),S=Se(~~(w/5),1),R=Se(~~(A/5),1),z=[],Y=[],ae={},K=a?0:[],X=0;X<S+1;X++){var te=d.findDotsAtSegment.apply(d,e.concat(X/S));z.push({x:te.x,y:te.y,t:X/S})}for(X=0;X<R+1;X++)te=d.findDotsAtSegment.apply(d,s.concat(X/R)),Y.push({x:te.x,y:te.y,t:X/R});for(X=0;X<S;X++)for(var le=0;le<R;le++){var re=z[X],Q=z[X+1],ke=Y[le],ce=Y[le+1],me=_e(Q.x-re.x)<.001?"y":"x",ue=_e(ce.x-ke.x)<.001?"y":"x",Ee=_t(re.x,re.y,Q.x,Q.y,ke.x,ke.y,ce.x,ce.y);if(Ee){if(ae[Ee.x.toFixed(4)]==Ee.y.toFixed(4))continue;ae[Ee.x.toFixed(4)]=Ee.y.toFixed(4);var Pe=re.t+_e((Ee[me]-re[me])/(Q[me]-re[me]))*(Q.t-re.t),Re=ke.t+_e((Ee[ue]-ke[ue])/(ce[ue]-ke[ue]))*(ce.t-ke.t);Pe>=0&&Pe<=1.001&&Re>=0&&Re<=1.001&&(a?K++:K.push({x:Ee.x,y:Ee.y,t1:G(Pe,1),t2:G(Re,1)}))}}return K}function kt(e,s,a){e=d._path2curve(e),s=d._path2curve(s);for(var c,m,w,A,S,R,z,Y,ae,K,X=a?0:[],te=0,le=e.length;te<le;te++){var re=e[te];if(re[0]=="M")c=S=re[1],m=R=re[2];else{re[0]=="C"?(ae=[c,m].concat(re.slice(1)),c=ae[6],m=ae[7]):(ae=[c,m,c,m,S,R,S,R],c=S,m=R);for(var Q=0,ke=s.length;Q<ke;Q++){var ce=s[Q];if(ce[0]=="M")w=z=ce[1],A=Y=ce[2];else{ce[0]=="C"?(K=[w,A].concat(ce.slice(1)),w=K[6],A=K[7]):(K=[w,A,w,A,z,Y,z,Y],w=z,A=Y);var me=dt(ae,K,a);if(a)X+=me;else{for(var ue=0,Ee=me.length;ue<Ee;ue++)me[ue].segment1=te,me[ue].segment2=Q,me[ue].bez1=ae,me[ue].bez2=K;X=X.concat(me)}}}}}return X}d.findDotsAtSegment=function(e,s,a,c,m,w,A,S,R){var z=1-R,Y=Ae(z,3),ae=Ae(z,2),K=R*R,X=K*R,te=Y*e+3*ae*R*a+3*z*R*R*m+X*A,le=Y*s+3*ae*R*c+3*z*R*R*w+X*S,re=e+2*R*(a-e)+K*(m-2*a+e),Q=s+2*R*(c-s)+K*(w-2*c+s),ke=a+2*R*(m-a)+K*(A-2*m+a),ce=c+2*R*(w-c)+K*(S-2*w+c),me=z*e+R*a,ue=z*s+R*c,Ee=z*m+R*A,Pe=z*w+R*S,Re=90-180*ve.atan2(re-ke,Q-ce)/ee;return(re>ke||Q<ce)&&(Re+=180),{x:te,y:le,m:{x:re,y:Q},n:{x:ke,y:ce},start:{x:me,y:ue},end:{x:Ee,y:Pe},alpha:Re}},d.bezierBBox=function(e,s,a,c,m,w,A,S){d.is(e,"array")||(e=[e,s,a,c,m,w,A,S]);var R=Mt.apply(null,e);return{x:R.min.x,y:R.min.y,x2:R.max.x,y2:R.max.y,width:R.max.x-R.min.x,height:R.max.y-R.min.y}},d.isPointInsideBBox=function(e,s,a){return s>=e.x&&s<=e.x2&&a>=e.y&&a<=e.y2},d.isBBoxIntersect=function(e,s){var a=d.isPointInsideBBox;return a(s,e.x,e.y)||a(s,e.x2,e.y)||a(s,e.x,e.y2)||a(s,e.x2,e.y2)||a(e,s.x,s.y)||a(e,s.x2,s.y)||a(e,s.x,s.y2)||a(e,s.x2,s.y2)||(e.x<s.x2&&e.x>s.x||s.x<e.x2&&s.x>e.x)&&(e.y<s.y2&&e.y>s.y||s.y<e.y2&&s.y>e.y)},d.pathIntersection=function(e,s){return kt(e,s)},d.pathIntersectionNumber=function(e,s){return kt(e,s,1)},d.isPointInsidePath=function(e,s,a){var c=d.pathBBox(e);return d.isPointInsideBBox(c,s,a)&&kt(e,[["M",s,a],["H",c.x2+10]],1)%2==1},d._removedFactory=function(e){return function(){u("raphael.log",null,"Rapha├лl: you are calling to method тАЬ"+e+"тАЭ of removed object",e)}};var Ze=d.pathBBox=function(e){var s=je(e);if(s.bbox)return ze(s.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var a,c=0,m=0,w=[],A=[],S=0,R=(e=St(e)).length;S<R;S++)if((a=e[S])[0]=="M")c=a[1],m=a[2],w.push(c),A.push(m);else{var z=Mt(c,m,a[1],a[2],a[3],a[4],a[5],a[6]);w=w[$](z.min.x,z.max.x),A=A[$](z.min.y,z.max.y),c=a[5],m=a[6]}var Y=G[U](0,w),ae=G[U](0,A),K=Se[U](0,w),X=Se[U](0,A),te=K-Y,le=X-ae,re={x:Y,y:ae,x2:K,y2:X,width:te,height:le,cx:Y+te/2,cy:ae+le/2};return s.bbox=ze(re),re},Ve=function(e){var s=ze(e);return s.toString=d._path2string,s},Zt=d._pathToRelative=function(e){var s=je(e);if(s.rel)return Ve(s.rel);d.is(e,i)&&d.is(e&&e[0],i)||(e=d.parsePathString(e));var a=[],c=0,m=0,w=0,A=0,S=0;e[0][0]=="M"&&(w=c=e[0][1],A=m=e[0][2],S++,a.push(["M",c,m]));for(var R=S,z=e.length;R<z;R++){var Y=a[R]=[],ae=e[R];if(ae[0]!=ye.call(ae[0]))switch(Y[0]=ye.call(ae[0]),Y[0]){case"a":Y[1]=ae[1],Y[2]=ae[2],Y[3]=ae[3],Y[4]=ae[4],Y[5]=ae[5],Y[6]=+(ae[6]-c).toFixed(3),Y[7]=+(ae[7]-m).toFixed(3);break;case"v":Y[1]=+(ae[1]-m).toFixed(3);break;case"m":w=ae[1],A=ae[2];default:for(var K=1,X=ae.length;K<X;K++)Y[K]=+(ae[K]-(K%2?c:m)).toFixed(3)}else{Y=a[R]=[],ae[0]=="m"&&(w=ae[1]+c,A=ae[2]+m);for(var te=0,le=ae.length;te<le;te++)a[R][te]=ae[te]}var re=a[R].length;switch(a[R][0]){case"z":c=w,m=A;break;case"h":c+=+a[R][re-1];break;case"v":m+=+a[R][re-1];break;default:c+=+a[R][re-2],m+=+a[R][re-1]}}return a.toString=d._path2string,s.rel=Ve(a),a},ft=d._pathToAbsolute=function(e){var s=je(e);if(s.abs)return Ve(s.abs);if(d.is(e,i)&&d.is(e&&e[0],i)||(e=d.parsePathString(e)),!e||!e.length)return[["M",0,0]];var a=[],c=0,m=0,w=0,A=0,S=0;e[0][0]=="M"&&(w=c=+e[0][1],A=m=+e[0][2],S++,a[0]=["M",c,m]);for(var R,z,Y=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z",ae=S,K=e.length;ae<K;ae++){if(a.push(R=[]),(z=e[ae])[0]!=v.call(z[0]))switch(R[0]=v.call(z[0]),R[0]){case"A":R[1]=z[1],R[2]=z[2],R[3]=z[3],R[4]=z[4],R[5]=z[5],R[6]=+(z[6]+c),R[7]=+(z[7]+m);break;case"V":R[1]=+z[1]+m;break;case"H":R[1]=+z[1]+c;break;case"R":for(var X=[c,m][$](z.slice(1)),te=2,le=X.length;te<le;te++)X[te]=+X[te]+c,X[++te]=+X[te]+m;a.pop(),a=a[$](ut(X,Y));break;case"M":w=+z[1]+c,A=+z[2]+m;default:for(te=1,le=z.length;te<le;te++)R[te]=+z[te]+(te%2?c:m)}else if(z[0]=="R")X=[c,m][$](z.slice(1)),a.pop(),a=a[$](ut(X,Y)),R=["R"][$](z.slice(-2));else for(var re=0,Q=z.length;re<Q;re++)R[re]=z[re];switch(R[0]){case"Z":c=w,m=A;break;case"H":c=R[1];break;case"V":m=R[1];break;case"M":w=R[R.length-2],A=R[R.length-1];default:c=R[R.length-2],m=R[R.length-1]}}return a.toString=d._path2string,s.abs=Ve(a),a},pt=function(e,s,a,c){return[e,s,a,c,a,c]},et=function(e,s,a,c,m,w){return[1/3*e+2/3*a,1/3*s+2/3*c,1/3*m+2/3*a,1/3*w+2/3*c,m,w]},Tt=function(e,s,a,c,m,w,A,S,R,z){var Y,ae=120*ee/180,K=ee/180*(+m||0),X=[],te=Fe(function(v1,y1,zt){return{x:v1*ve.cos(zt)-y1*ve.sin(zt),y:v1*ve.sin(zt)+y1*ve.cos(zt)}});if(z)Pe=z[0],Re=z[1],ue=z[2],Ee=z[3];else{e=(Y=te(e,s,-K)).x,s=Y.y,S=(Y=te(S,R,-K)).x,R=Y.y;var le=(e-S)/2,re=(s-R)/2,Q=le*le/(a*a)+re*re/(c*c);Q>1&&(a*=Q=ve.sqrt(Q),c*=Q);var ke=a*a,ce=c*c,me=(w==A?-1:1)*ve.sqrt(_e((ke*ce-ke*re*re-ce*le*le)/(ke*re*re+ce*le*le))),ue=me*a*re/c+(e+S)/2,Ee=me*-c*le/a+(s+R)/2,Pe=ve.asin(((s-Ee)/c).toFixed(9)),Re=ve.asin(((R-Ee)/c).toFixed(9));(Pe=e<ue?ee-Pe:Pe)<0&&(Pe=2*ee+Pe),(Re=S<ue?ee-Re:Re)<0&&(Re=2*ee+Re),A&&Pe>Re&&(Pe-=2*ee),!A&&Re>Pe&&(Re-=2*ee)}var gt=Re-Pe;if(_e(gt)>ae){var Et=Re,$e=S,We=R;Re=Pe+ae*(A&&Re>Pe?1:-1),S=ue+a*ve.cos(Re),R=Ee+c*ve.sin(Re),X=Tt(S,R,a,c,m,0,A,$e,We,[Re,Et,ue,Ee])}gt=Re-Pe;var vt=ve.cos(Pe),yt=ve.sin(Pe),Dt=ve.cos(Re),Je=ve.sin(Re),at=ve.tan(gt/4),qt=4/3*a*at,d1=4/3*c*at,f1=[e,s],xt=[e+qt*yt,s-d1*vt],p1=[S+qt*Je,R-d1*Dt],m1=[S,R];if(xt[0]=2*f1[0]-xt[0],xt[1]=2*f1[1]-xt[1],z)return[xt,p1,m1][$](X);for(var g1=[],nt=0,V1=(X=[xt,p1,m1][$](X).join()[pe](",")).length;nt<V1;nt++)g1[nt]=nt%2?te(X[nt-1],X[nt],K).y:te(X[nt],X[nt+1],K).x;return g1},rt=function(e,s,a,c,m,w,A,S,R){var z=1-R;return{x:Ae(z,3)*e+3*Ae(z,2)*R*a+3*z*R*R*m+Ae(R,3)*A,y:Ae(z,3)*s+3*Ae(z,2)*R*c+3*z*R*R*w+Ae(R,3)*S}},Mt=Fe(function(e,s,a,c,m,w,A,S){var R,z=m-2*a+e-(A-2*m+a),Y=2*(a-e)-2*(m-a),ae=e-a,K=(-Y+ve.sqrt(Y*Y-4*z*ae))/2/z,X=(-Y-ve.sqrt(Y*Y-4*z*ae))/2/z,te=[s,S],le=[e,A];return _e(K)>"1e12"&&(K=.5),_e(X)>"1e12"&&(X=.5),K>0&&K<1&&(R=rt(e,s,a,c,m,w,A,S,K),le.push(R.x),te.push(R.y)),X>0&&X<1&&(R=rt(e,s,a,c,m,w,A,S,X),le.push(R.x),te.push(R.y)),z=w-2*c+s-(S-2*w+c),ae=s-c,K=(-(Y=2*(c-s)-2*(w-c))+ve.sqrt(Y*Y-4*z*ae))/2/z,X=(-Y-ve.sqrt(Y*Y-4*z*ae))/2/z,_e(K)>"1e12"&&(K=.5),_e(X)>"1e12"&&(X=.5),K>0&&K<1&&(R=rt(e,s,a,c,m,w,A,S,K),le.push(R.x),te.push(R.y)),X>0&&X<1&&(R=rt(e,s,a,c,m,w,A,S,X),le.push(R.x),te.push(R.y)),{min:{x:G[U](0,le),y:G[U](0,te)},max:{x:Se[U](0,le),y:Se[U](0,te)}}}),St=d._path2curve=Fe(function(e,s){var a=!s&&je(e);if(!s&&a.curve)return Ve(a.curve);for(var c=ft(e),m=s&&ft(s),w={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},A={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},S=function(me,ue,Ee){var Pe,Re;if(!me)return["C",ue.x,ue.y,ue.x,ue.y,ue.x,ue.y];switch(!(me[0]in{T:1,Q:1})&&(ue.qx=ue.qy=null),me[0]){case"M":ue.X=me[1],ue.Y=me[2];break;case"A":me=["C"][$](Tt[U](0,[ue.x,ue.y][$](me.slice(1))));break;case"S":Ee=="C"||Ee=="S"?(Pe=2*ue.x-ue.bx,Re=2*ue.y-ue.by):(Pe=ue.x,Re=ue.y),me=["C",Pe,Re][$](me.slice(1));break;case"T":Ee=="Q"||Ee=="T"?(ue.qx=2*ue.x-ue.qx,ue.qy=2*ue.y-ue.qy):(ue.qx=ue.x,ue.qy=ue.y),me=["C"][$](et(ue.x,ue.y,ue.qx,ue.qy,me[1],me[2]));break;case"Q":ue.qx=me[1],ue.qy=me[2],me=["C"][$](et(ue.x,ue.y,me[1],me[2],me[3],me[4]));break;case"L":me=["C"][$](pt(ue.x,ue.y,me[1],me[2]));break;case"H":me=["C"][$](pt(ue.x,ue.y,me[1],ue.y));break;case"V":me=["C"][$](pt(ue.x,ue.y,ue.x,me[1]));break;case"Z":me=["C"][$](pt(ue.x,ue.y,ue.X,ue.Y))}return me},R=function(me,ue){if(me[ue].length>7){me[ue].shift();for(var Ee=me[ue];Ee.length;)Y[ue]="A",m&&(ae[ue]="A"),me.splice(ue++,0,["C"][$](Ee.splice(0,6)));me.splice(ue,1),le=Se(c.length,m&&m.length||0)}},z=function(me,ue,Ee,Pe,Re){me&&ue&&me[Re][0]=="M"&&ue[Re][0]!="M"&&(ue.splice(Re,0,["M",Pe.x,Pe.y]),Ee.bx=0,Ee.by=0,Ee.x=me[Re][1],Ee.y=me[Re][2],le=Se(c.length,m&&m.length||0))},Y=[],ae=[],K="",X="",te=0,le=Se(c.length,m&&m.length||0);te<le;te++){c[te]&&(K=c[te][0]),K!="C"&&(Y[te]=K,te&&(X=Y[te-1])),c[te]=S(c[te],w,X),Y[te]!="A"&&K=="C"&&(Y[te]="C"),R(c,te),m&&(m[te]&&(K=m[te][0]),K!="C"&&(ae[te]=K,te&&(X=ae[te-1])),m[te]=S(m[te],A,X),ae[te]!="A"&&K=="C"&&(ae[te]="C"),R(m,te)),z(c,m,w,A,te),z(m,c,A,w,te);var re=c[te],Q=m&&m[te],ke=re.length,ce=m&&Q.length;w.x=re[ke-2],w.y=re[ke-1],w.bx=h(re[ke-4])||w.x,w.by=h(re[ke-3])||w.y,A.bx=m&&(h(Q[ce-4])||A.x),A.by=m&&(h(Q[ce-3])||A.y),A.x=m&&Q[ce-2],A.y=m&&Q[ce-1]}return m||(a.curve=Ve(c)),m?[c,m]:c},null,Ve),It=(d._parseDots=Fe(function(e){for(var s=[],a=0,c=e.length;a<c;a++){var m={},w=e[a].match(/^([^:]*):?([\d\.]*)/);if(m.color=d.getRGB(w[1]),m.color.error)return null;m.opacity=m.color.opacity,m.color=m.color.hex,w[2]&&(m.offset=w[2]+"%"),s.push(m)}for(a=1,c=s.length-1;a<c;a++)if(!s[a].offset){for(var A=h(s[a-1].offset||0),S=0,R=a+1;R<c;R++)if(s[R].offset){S=s[R].offset;break}S||(S=100,R=c);for(var z=((S=h(S))-A)/(R-a+1);a<R;a++)A+=z,s[a].offset=A+"%"}return s}),d._tear=function(e,s){e==s.top&&(s.top=e.prev),e==s.bottom&&(s.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),M1=(d._tofront=function(e,s){s.top!==e&&(It(e,s),e.next=null,e.prev=s.top,s.top.next=e,s.top=e)},d._toback=function(e,s){s.bottom!==e&&(It(e,s),e.next=s.bottom,e.prev=null,s.bottom.prev=e,s.bottom=e)},d._insertafter=function(e,s,a){It(e,a),s==a.top&&(a.top=e),s.next&&(s.next.prev=e),e.next=s.next,e.prev=s,s.next=e},d._insertbefore=function(e,s,a){It(e,a),s==a.bottom&&(a.bottom=e),s.prev&&(s.prev.next=e),e.prev=s.prev,s.prev=e,e.next=s},d.toMatrix=function(e,s){var a=Ze(e),c={_:{transform:he},getBBox:function(){return a}};return e1(c,s),c.matrix}),e1=(d.transformPath=function(e,s){return Te(e,M1(e,s))},d._extractTransform=function(e,s){if(s==null)return e._.transform;s=j(s).replace(/\.{3}|\u2026/g,e._.transform||he);var a,c,m=d.parseTransformString(s),w=0,A=1,S=1,R=e._,z=new st;if(R.transform=m||[],m)for(var Y=0,ae=m.length;Y<ae;Y++){var K,X,te,le,re,Q=m[Y],ke=Q.length,ce=j(Q[0]).toLowerCase(),me=Q[0]!=ce,ue=me?z.invert():0;ce=="t"&&ke==3?me?(K=ue.x(0,0),X=ue.y(0,0),te=ue.x(Q[1],Q[2]),le=ue.y(Q[1],Q[2]),z.translate(te-K,le-X)):z.translate(Q[1],Q[2]):ce=="r"?ke==2?(re=re||e.getBBox(1),z.rotate(Q[1],re.x+re.width/2,re.y+re.height/2),w+=Q[1]):ke==4&&(me?(te=ue.x(Q[2],Q[3]),le=ue.y(Q[2],Q[3]),z.rotate(Q[1],te,le)):z.rotate(Q[1],Q[2],Q[3]),w+=Q[1]):ce=="s"?ke==2||ke==3?(re=re||e.getBBox(1),z.scale(Q[1],Q[ke-1],re.x+re.width/2,re.y+re.height/2),A*=Q[1],S*=Q[ke-1]):ke==5&&(me?(te=ue.x(Q[3],Q[4]),le=ue.y(Q[3],Q[4]),z.scale(Q[1],Q[2],te,le)):z.scale(Q[1],Q[2],Q[3],Q[4]),A*=Q[1],S*=Q[2]):ce=="m"&&ke==7&&z.add(Q[1],Q[2],Q[3],Q[4],Q[5],Q[6]),R.dirtyT=1,e.matrix=z}e.matrix=z,R.sx=A,R.sy=S,R.deg=w,R.dx=a=z.e,R.dy=c=z.f,A==1&&S==1&&!w&&R.bbox?(R.bbox.x+=+a,R.bbox.y+=+c):R.dirtyT=1}),t1=function(e){var s=e[0];switch(s.toLowerCase()){case"t":return[s,0,0];case"m":return[s,1,0,0,1,0,0];case"r":return e.length==4?[s,0,e[2],e[3]]:[s,0];case"s":return e.length==5?[s,1,1,e[3],e[4]]:e.length==3?[s,1,1]:[s,1]}},I1=d._equaliseTransform=function(e,s){s=j(s).replace(/\.{3}|\u2026/g,e),e=d.parseTransformString(e)||[],s=d.parseTransformString(s)||[];for(var a,c,m,w,A=Se(e.length,s.length),S=[],R=[],z=0;z<A;z++){if(m=e[z]||t1(s[z]),w=s[z]||t1(m),m[0]!=w[0]||m[0].toLowerCase()=="r"&&(m[2]!=w[2]||m[3]!=w[3])||m[0].toLowerCase()=="s"&&(m[3]!=w[3]||m[4]!=w[4]))return;for(S[z]=[],R[z]=[],a=0,c=Se(m.length,w.length);a<c;a++)a in m&&(S[z][a]=m[a]),a in w&&(R[z][a]=w[a])}return{from:S,to:R}};function st(e,s,a,c,m,w){e!=null?(this.a=+e,this.b=+s,this.c=+a,this.d=+c,this.e=+m,this.f=+w):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}d._getContainer=function(e,s,a,c){var m;if((m=c!=null||d.is(e,"object")?e:F.doc.getElementById(e))!=null)return m.tagName?s==null?{container:m,width:m.style.pixelWidth||m.offsetWidth,height:m.style.pixelHeight||m.offsetHeight}:{container:m,width:s,height:a}:{container:1,x:e,y:s,width:a,height:c}},d.pathToRelative=Zt,d._engine={},d.path2curve=St,d.matrix=function(e,s,a,c,m,w){return new st(e,s,a,c,m,w)},function(e){function s(c){return c[0]*c[0]+c[1]*c[1]}function a(c){var m=ve.sqrt(s(c));c[0]&&(c[0]/=m),c[1]&&(c[1]/=m)}e.add=function(c,m,w,A,S,R){var z,Y,ae,K,X=[[],[],[]],te=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],le=[[c,w,S],[m,A,R],[0,0,1]];for(c&&c instanceof st&&(le=[[c.a,c.c,c.e],[c.b,c.d,c.f],[0,0,1]]),z=0;z<3;z++)for(Y=0;Y<3;Y++){for(K=0,ae=0;ae<3;ae++)K+=te[z][ae]*le[ae][Y];X[z][Y]=K}this.a=X[0][0],this.b=X[1][0],this.c=X[0][1],this.d=X[1][1],this.e=X[0][2],this.f=X[1][2]},e.invert=function(){var c=this,m=c.a*c.d-c.b*c.c;return new st(c.d/m,-c.b/m,-c.c/m,c.a/m,(c.c*c.f-c.d*c.e)/m,(c.b*c.e-c.a*c.f)/m)},e.clone=function(){return new st(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(c,m){this.add(1,0,0,1,c,m)},e.scale=function(c,m,w,A){m==null&&(m=c),(w||A)&&this.add(1,0,0,1,w,A),this.add(c,0,0,m,0,0),(w||A)&&this.add(1,0,0,1,-w,-A)},e.rotate=function(c,m,w){c=d.rad(c),m=m||0,w=w||0;var A=+ve.cos(c).toFixed(9),S=+ve.sin(c).toFixed(9);this.add(A,S,-S,A,m,w),this.add(1,0,0,1,-m,-w)},e.x=function(c,m){return c*this.a+m*this.c+this.e},e.y=function(c,m){return c*this.b+m*this.d+this.f},e.get=function(c){return+this[j.fromCharCode(97+c)].toFixed(4)},e.toString=function(){return d.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var c={};c.dx=this.e,c.dy=this.f;var m=[[this.a,this.c],[this.b,this.d]];c.scalex=ve.sqrt(s(m[0])),a(m[0]),c.shear=m[0][0]*m[1][0]+m[0][1]*m[1][1],m[1]=[m[1][0]-m[0][0]*c.shear,m[1][1]-m[0][1]*c.shear],c.scaley=ve.sqrt(s(m[1])),a(m[1]),c.shear/=c.scaley;var w=-m[0][1],A=m[1][1];return A<0?(c.rotate=d.deg(ve.acos(A)),w<0&&(c.rotate=360-c.rotate)):c.rotate=d.deg(ve.asin(w)),c.isSimple=!(+c.shear.toFixed(9)||c.scalex.toFixed(9)!=c.scaley.toFixed(9)&&c.rotate),c.isSuperSimple=!+c.shear.toFixed(9)&&c.scalex.toFixed(9)==c.scaley.toFixed(9)&&!c.rotate,c.noRotation=!+c.shear.toFixed(9)&&!c.rotate,c},e.toTransformString=function(c){var m=c||this[pe]();return m.isSimple?(m.scalex=+m.scalex.toFixed(4),m.scaley=+m.scaley.toFixed(4),m.rotate=+m.rotate.toFixed(4),(m.dx||m.dy?"t"+[m.dx,m.dy]:he)+(m.scalex!=1||m.scaley!=1?"s"+[m.scalex,m.scaley,0,0]:he)+(m.rotate?"r"+[m.rotate,0,0]:he)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(st.prototype);for(var D1=function(){this.returnValue=!1},q1=function(){return this.originalEvent.preventDefault()},z1=function(){this.cancelBubble=!0},F1=function(){return this.originalEvent.stopPropagation()},n1=function(e){var s=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,a=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft;return{x:e.clientX+a,y:e.clientY+s}},O1=F.doc.addEventListener?function(e,s,a,c){var m=function(A){var S=n1(A);return a.call(c,A,S.x,S.y)};if(e.addEventListener(s,m,!1),oe&&D[s]){var w=function(A){for(var S=n1(A),R=A,z=0,Y=A.targetTouches&&A.targetTouches.length;z<Y;z++)if(A.targetTouches[z].target==e){(A=A.targetTouches[z]).originalEvent=R,A.preventDefault=q1,A.stopPropagation=F1;break}return a.call(c,A,S.x,S.y)};e.addEventListener(D[s],w,!1)}return function(){return e.removeEventListener(s,m,!1),oe&&D[s]&&e.removeEventListener(D[s],w,!1),!0}}:F.doc.attachEvent?function(e,s,a,c){var m=function(w){w=w||F.win.event;var A=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,S=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft,R=w.clientX+S,z=w.clientY+A;return w.preventDefault=w.preventDefault||D1,w.stopPropagation=w.stopPropagation||z1,a.call(c,w,R,z)};return e.attachEvent("on"+s,m),function(){return e.detachEvent("on"+s,m),!0}}:void 0,tt=[],Vt=function(e){for(var s,a=e.clientX,c=e.clientY,m=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,w=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft,A=tt.length;A--;){if(s=tt[A],oe&&e.touches){for(var S,R=e.touches.length;R--;)if((S=e.touches[R]).identifier==s.el._drag.id){a=S.clientX,c=S.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var z,Y=s.el.node,ae=Y.nextSibling,K=Y.parentNode,X=Y.style.display;F.win.opera&&K.removeChild(Y),Y.style.display="none",z=s.el.paper.getElementByPoint(a,c),Y.style.display=X,F.win.opera&&(ae?K.insertBefore(Y,ae):K.appendChild(Y)),z&&u("raphael.drag.over."+s.el.id,s.el,z),a+=w,c+=m,u("raphael.drag.move."+s.el.id,s.move_scope||s.el,a-s.el._drag.x,c-s.el._drag.y,a,c,e)}},$t=function(e){d.unmousemove(Vt).unmouseup($t);for(var s,a=tt.length;a--;)(s=tt[a]).el._drag={},u("raphael.drag.end."+s.el.id,s.end_scope||s.start_scope||s.move_scope||s.el,e);tt=[]},Ie=d.el={},r1=de.length;r1--;)(function(e){d[e]=Ie[e]=function(s,a){return d.is(s,"function")&&(this.events=this.events||[],this.events.push({name:e,f:s,unbind:O1(this.shape||this.node||F.doc,e,s,a||this)})),this},d["un"+e]=Ie["un"+e]=function(s){for(var a=this.events||[],c=a.length;c--;)a[c].name!=e||!d.is(s,"undefined")&&a[c].f!=s||(a[c].unbind(),a.splice(c,1),!a.length&&delete this.events);return this}})(de[r1]);Ie.data=function(e,s){var a=xe[this.id]=xe[this.id]||{};if(arguments.length==0)return a;if(arguments.length==1){if(d.is(e,"object")){for(var c in e)e[L](c)&&this.data(c,e[c]);return this}return u("raphael.data.get."+this.id,this,a[e],e),a[e]}return a[e]=s,u("raphael.data.set."+this.id,this,s,e),this},Ie.removeData=function(e){return e==null?delete xe[this.id]:xe[this.id]&&delete xe[this.id][e],this},Ie.getData=function(){return ze(xe[this.id]||{})},Ie.hover=function(e,s,a,c){return this.mouseover(e,a).mouseout(s,c||a)},Ie.unhover=function(e,s){return this.unmouseover(e).unmouseout(s)};var mt=[];Ie.drag=function(e,s,a,c,m,w){function A(S){(S.originalEvent||S).preventDefault();var R=S.clientX,z=S.clientY,Y=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,ae=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft;if(this._drag.id=S.identifier,oe&&S.touches){for(var K,X=S.touches.length;X--;)if(K=S.touches[X],this._drag.id=K.identifier,K.identifier==this._drag.id){R=K.clientX,z=K.clientY;break}}this._drag.x=R+ae,this._drag.y=z+Y,!tt.length&&d.mousemove(Vt).mouseup($t),tt.push({el:this,move_scope:c,start_scope:m,end_scope:w}),s&&u.on("raphael.drag.start."+this.id,s),e&&u.on("raphael.drag.move."+this.id,e),a&&u.on("raphael.drag.end."+this.id,a),u("raphael.drag.start."+this.id,m||c||this,this._drag.x,this._drag.y,S)}return this._drag={},mt.push({el:this,start:A}),this.mousedown(A),this},Ie.onDragOver=function(e){e?u.on("raphael.drag.over."+this.id,e):u.unbind("raphael.drag.over."+this.id)},Ie.undrag=function(){for(var e=mt.length;e--;)mt[e].el==this&&(this.unmousedown(mt[e].start),mt.splice(e,1),u.unbind("raphael.drag.*."+this.id));!mt.length&&d.unmousemove(Vt).unmouseup($t),tt=[]},N.circle=function(e,s,a){var c=d._engine.circle(this,e||0,s||0,a||0);return this.__set__&&this.__set__.push(c),c},N.rect=function(e,s,a,c,m){var w=d._engine.rect(this,e||0,s||0,a||0,c||0,m||0);return this.__set__&&this.__set__.push(w),w},N.ellipse=function(e,s,a,c){var m=d._engine.ellipse(this,e||0,s||0,a||0,c||0);return this.__set__&&this.__set__.push(m),m},N.path=function(e){e&&!d.is(e,"string")&&!d.is(e[0],i)&&(e+=he);var s=d._engine.path(d.format[U](d,arguments),this);return this.__set__&&this.__set__.push(s),s},N.image=function(e,s,a,c,m){var w=d._engine.image(this,e||"about:blank",s||0,a||0,c||0,m||0);return this.__set__&&this.__set__.push(w),w},N.text=function(e,s,a){var c=d._engine.text(this,e||0,s||0,j(a));return this.__set__&&this.__set__.push(c),c},N.set=function(e){!d.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var s=new Pt(e);return this.__set__&&this.__set__.push(s),s.paper=this,s.type="set",s},N.setStart=function(e){this.__set__=e||this.set()},N.setFinish=function(e){var s=this.__set__;return delete this.__set__,s},N.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},N.setSize=function(e,s){return d._engine.setSize.call(this,e,s)},N.setViewBox=function(e,s,a,c,m){return d._engine.setViewBox.call(this,e,s,a,c,m)},N.top=N.bottom=null,N.raphael=d;function s1(){return this.x+ge+this.y+ge+this.width+" ├Ч "+this.height}N.getElementByPoint=function(e,s){var a,c,m,w,A,S,R,z=this.canvas,Y=F.doc.elementFromPoint(e,s);if(F.win.opera&&Y.tagName=="svg"){var ae=(c=(a=z).getBoundingClientRect(),m=a.ownerDocument,w=m.body,A=m.documentElement,S=A.clientTop||w.clientTop||0,R=A.clientLeft||w.clientLeft||0,{y:c.top+(F.win.pageYOffset||A.scrollTop||w.scrollTop)-S,x:c.left+(F.win.pageXOffset||A.scrollLeft||w.scrollLeft)-R}),K=z.createSVGRect();K.x=e-ae.x,K.y=s-ae.y,K.width=K.height=1;var X=z.getIntersectionList(K,null);X.length&&(Y=X[X.length-1])}if(!Y)return null;for(;Y.parentNode&&Y!=z.parentNode&&!Y.raphael;)Y=Y.parentNode;return Y==this.canvas.parentNode&&(Y=z),Y=Y&&Y.raphael?this.getById(Y.raphaelid):null},N.getElementsByBBox=function(e){var s=this.set();return this.forEach(function(a){d.isBBoxIntersect(a.getBBox(),e)&&s.push(a)}),s},N.getById=function(e){for(var s=this.bottom;s;){if(s.id==e)return s;s=s.next}return null},N.forEach=function(e,s){for(var a=this.bottom;a;){if(e.call(s,a)===!1)return this;a=a.next}return this},N.getElementsByPoint=function(e,s){var a=this.set();return this.forEach(function(c){c.isPointInside(e,s)&&a.push(c)}),a},Ie.isPointInside=function(e,s){var a=this.realPath=Be[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(a=d.transformPath(a,this.attr("transform"))),d.isPointInsidePath(a,e,s)},Ie.getBBox=function(e){if(this.removed)return{};var s=this._;return e?(!s.dirty&&s.bboxwt||(this.realPath=Be[this.type](this),s.bboxwt=Ze(this.realPath),s.bboxwt.toString=s1,s.dirty=0),s.bboxwt):((s.dirty||s.dirtyT||!s.bbox)&&(!s.dirty&&this.realPath||(s.bboxwt=0,this.realPath=Be[this.type](this)),s.bbox=Ze(Te(this.realPath,this.matrix)),s.bbox.toString=s1,s.dirty=s.dirtyT=0),s.bbox)},Ie.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Ie.glow=function(e){if(this.type=="text")return null;var s={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity==null?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},a=s.width/2,c=this.paper,m=c.set(),w=this.realPath||Be[this.type](this);w=this.matrix?Te(w,this.matrix):w;for(var A=1;A<a+1;A++)m.push(c.path(w).attr({stroke:s.color,fill:s.fill?s.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(s.width/a*A).toFixed(3),opacity:+(s.opacity/a).toFixed(3)}));return m.insertBefore(this).translate(s.offsetx,s.offsety)};var Ut=function(e,s,a,c,m,w,A,S,R){return R==null?Ge(e,s,a,c,m,w,A,S):d.findDotsAtSegment(e,s,a,c,m,w,A,S,function(z,Y,ae,K,X,te,le,re,Q){if(!(Q<0||Ge(z,Y,ae,K,X,te,le,re)<Q)){var ke,ce=.5,me=1-ce;for(ke=Ge(z,Y,ae,K,X,te,le,re,me);_e(ke-Q)>.01;)ke=Ge(z,Y,ae,K,X,te,le,re,me+=(ke<Q?1:-1)*(ce/=2));return me}}(e,s,a,c,m,w,A,S,R))},jt=function(e,s){return function(a,c,m){for(var w,A,S,R,z,Y="",ae={},K=0,X=0,te=(a=St(a)).length;X<te;X++){if((S=a[X])[0]=="M")w=+S[1],A=+S[2];else{if(K+(R=Ut(w,A,S[1],S[2],S[3],S[4],S[5],S[6]))>c){if(s&&!ae.start){if(Y+=["C"+(z=Ut(w,A,S[1],S[2],S[3],S[4],S[5],S[6],c-K)).start.x,z.start.y,z.m.x,z.m.y,z.x,z.y],m)return Y;ae.start=Y,Y=["M"+z.x,z.y+"C"+z.n.x,z.n.y,z.end.x,z.end.y,S[5],S[6]].join(),K+=R,w=+S[5],A=+S[6];continue}if(!e&&!s)return{x:(z=Ut(w,A,S[1],S[2],S[3],S[4],S[5],S[6],c-K)).x,y:z.y,alpha:z.alpha}}K+=R,w=+S[5],A=+S[6]}Y+=S.shift()+S}return ae.end=Y,(z=e?K:s?ae:d.findDotsAtSegment(w,A,S[0],S[1],S[2],S[3],S[4],S[5],1)).alpha&&(z={x:z.x,y:z.y,alpha:z.alpha}),z}},i1=jt(1),a1=jt(),Gt=jt(0,1);d.getTotalLength=i1,d.getPointAtLength=a1,d.getSubpath=function(e,s,a){if(this.getTotalLength(e)-a<1e-6)return Gt(e,s).end;var c=Gt(e,a,1);return s?Gt(c,s).end:c},Ie.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():i1(e)},Ie.getPointAtLength=function(e){var s=this.getPath();if(s)return a1(s,e)},Ie.getPath=function(){var e,s=d._getPath[this.type];if(this.type!="text"&&this.type!="set")return s&&(e=s(this)),e},Ie.getSubpath=function(e,s){var a=this.getPath();if(a)return d.getSubpath(a,e,s)};var Ue=d.easing_formulas={linear:function(e){return e},"<":function(e){return Ae(e,1.7)},">":function(e){return Ae(e,.48)},"<>":function(e){var s=.48-e/1.04,a=ve.sqrt(.1734+s*s),c=a-s,m=-a-s,w=Ae(_e(c),1/3)*(c<0?-1:1)+Ae(_e(m),1/3)*(m<0?-1:1)+.5;return 3*(1-w)*w*w+w*w*w},backIn:function(e){var s=1.70158;return e*e*((s+1)*e-s)},backOut:function(e){var s=1.70158;return(e-=1)*e*((s+1)*e+s)+1},elastic:function(e){return e==!!e?e:Ae(2,-10*e)*ve.sin(2*ee*(e-.075)/.3)+1},bounce:function(e){var s=7.5625,a=2.75;return e<1/a?s*e*e:e<2/a?s*(e-=1.5/a)*e+.75:e<2.5/a?s*(e-=2.25/a)*e+.9375:s*(e-=2.625/a)*e+.984375}};Ue.easeIn=Ue["ease-in"]=Ue["<"],Ue.easeOut=Ue["ease-out"]=Ue[">"],Ue.easeInOut=Ue["ease-in-out"]=Ue["<>"],Ue["back-in"]=Ue.backIn,Ue["back-out"]=Ue.backOut;var Me=[],o1=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},Wt=function(){for(var e=+new Date,s=0;s<Me.length;s++){var a=Me[s];if(!a.el.removed&&!a.paused){var c,m,w=e-a.start,A=a.ms,S=a.easing,R=a.from,z=a.diff,Y=a.to,ae=(a.t,a.el),K={},X={};if(a.initstatus?(w=(a.initstatus*a.anim.top-a.prev)/(a.percent-a.prev)*A,a.status=a.initstatus,delete a.initstatus,a.stop&&Me.splice(s--,1)):a.status=(a.prev+(a.percent-a.prev)*(w/A))/a.anim.top,!(w<0))if(w<A){var te=S(w/A);for(var le in R)if(R[L](le)){switch(k[le]){case W:c=+R[le]+te*A*z[le];break;case"colour":c="rgb("+[Xt(o(R[le].r+te*A*z[le].r)),Xt(o(R[le].g+te*A*z[le].g)),Xt(o(R[le].b+te*A*z[le].b))].join(",")+")";break;case"path":c=[];for(var re=0,Q=R[le].length;re<Q;re++){c[re]=[R[le][re][0]];for(var ke=1,ce=R[le][re].length;ke<ce;ke++)c[re][ke]=+R[le][re][ke]+te*A*z[le][re][ke];c[re]=c[re].join(ge)}c=c.join(ge);break;case"transform":if(z[le].real)for(c=[],re=0,Q=R[le].length;re<Q;re++)for(c[re]=[R[le][re][0]],ke=1,ce=R[le][re].length;ke<ce;ke++)c[re][ke]=R[le][re][ke]+te*A*z[le][re][ke];else{var me=function(Ee){return+R[le][Ee]+te*A*z[le][Ee]};c=[["m",me(0),me(1),me(2),me(3),me(4),me(5)]]}break;case"csv":if(le=="clip-rect")for(c=[],re=4;re--;)c[re]=+R[le][re]+te*A*z[le][re];break;default:var ue=[][$](R[le]);for(c=[],re=ae.paper.customAttributes[le].length;re--;)c[re]=+ue[re]+te*A*z[le][re]}K[le]=c}ae.attr(K),function(Ee,Pe,Re){setTimeout(function(){u("raphael.anim.frame."+Ee,Pe,Re)})}(ae.id,ae,a.anim)}else{if(function(Ee,Pe,Re){setTimeout(function(){u("raphael.anim.frame."+Pe.id,Pe,Re),u("raphael.anim.finish."+Pe.id,Pe,Re),d.is(Ee,"function")&&Ee.call(Pe)})}(a.callback,ae,a.anim),ae.attr(Y),Me.splice(s--,1),a.repeat>1&&!a.next){for(m in Y)Y[L](m)&&(X[m]=a.totalOrigin[m]);a.el.attr(X),At(a.anim,a.el,a.anim.percents[0],null,a.totalOrigin,a.repeat-1)}a.next&&!a.stop&&At(a.anim,a.el,a.next,null,a.totalOrigin,a.repeat)}}}Me.length&&o1(Wt)},Xt=function(e){return e>255?255:e<0?0:e};function H1(e,s,a,c,m,w){var A=3*s,S=3*(c-s)-A,R=1-A-S,z=3*a,Y=3*(m-a)-z,ae=1-z-Y;function K(X){return((R*X+S)*X+A)*X}return function(X,te){var le=function(re,Q){var ke,ce,me,ue,Ee,Pe;for(me=re,Pe=0;Pe<8;Pe++){if(ue=K(me)-re,_e(ue)<Q)return me;if(_e(Ee=(3*R*me+2*S)*me+A)<1e-6)break;me-=ue/Ee}if(ce=1,(me=re)<(ke=0))return ke;if(me>ce)return ce;for(;ke<ce;){if(ue=K(me),_e(ue-re)<Q)return me;re>ue?ke=me:ce=me,me=(ce-ke)/2+ke}return me}(X,te);return((ae*le+Y)*le+z)*le}(e,1/(200*w))}function Ye(e,s){var a=[],c={};if(this.ms=s,this.times=1,e){for(var m in e)e[L](m)&&(c[h(m)]=e[m],a.push(h(m)));a.sort(we)}this.anim=c,this.top=a[a.length-1],this.percents=a}function At(e,s,a,c,m,w){a=h(a);var A,S,R,z,Y,ae,K=e.ms,X={},te={},le={};if(c)for(Q=0,ke=Me.length;Q<ke;Q++){var re=Me[Q];if(re.el.id==s.id&&re.anim==e){re.percent!=a?(Me.splice(Q,1),R=1):S=re,s.attr(re.totalOrigin);break}}else c=+te;for(var Q=0,ke=e.percents.length;Q<ke;Q++){if(e.percents[Q]==a||e.percents[Q]>c*e.top){a=e.percents[Q],Y=e.percents[Q-1]||0,K=K/e.top*(a-Y),z=e.percents[Q+1],A=e.anim[a];break}c&&s.attr(e.anim[e.percents[Q]])}if(A){if(S)S.initstatus=c,S.start=new Date-S.ms*c;else{for(var ce in A)if(A[L](ce)&&(k[L](ce)||s.paper.customAttributes[L](ce)))switch(X[ce]=s.attr(ce),X[ce]==null&&(X[ce]=P[ce]),te[ce]=A[ce],k[ce]){case W:le[ce]=(te[ce]-X[ce])/K;break;case"colour":X[ce]=d.getRGB(X[ce]);var me=d.getRGB(te[ce]);le[ce]={r:(me.r-X[ce].r)/K,g:(me.g-X[ce].g)/K,b:(me.b-X[ce].b)/K};break;case"path":var ue=St(X[ce],te[ce]),Ee=ue[1];for(X[ce]=ue[0],le[ce]=[],Q=0,ke=X[ce].length;Q<ke;Q++){le[ce][Q]=[0];for(var Pe=1,Re=X[ce][Q].length;Pe<Re;Pe++)le[ce][Q][Pe]=(Ee[Q][Pe]-X[ce][Q][Pe])/K}break;case"transform":var gt=s._,Et=I1(gt[ce],te[ce]);if(Et)for(X[ce]=Et.from,te[ce]=Et.to,le[ce]=[],le[ce].real=!0,Q=0,ke=X[ce].length;Q<ke;Q++)for(le[ce][Q]=[X[ce][Q][0]],Pe=1,Re=X[ce][Q].length;Pe<Re;Pe++)le[ce][Q][Pe]=(te[ce][Q][Pe]-X[ce][Q][Pe])/K;else{var $e=s.matrix||new st,We={_:{transform:gt.transform},getBBox:function(){return s.getBBox(1)}};X[ce]=[$e.a,$e.b,$e.c,$e.d,$e.e,$e.f],e1(We,te[ce]),te[ce]=We._.transform,le[ce]=[(We.matrix.a-$e.a)/K,(We.matrix.b-$e.b)/K,(We.matrix.c-$e.c)/K,(We.matrix.d-$e.d)/K,(We.matrix.e-$e.e)/K,(We.matrix.f-$e.f)/K]}break;case"csv":var vt=j(A[ce])[pe](H),yt=j(X[ce])[pe](H);if(ce=="clip-rect")for(X[ce]=yt,le[ce]=[],Q=yt.length;Q--;)le[ce][Q]=(vt[Q]-X[ce][Q])/K;te[ce]=vt;break;default:for(vt=[][$](A[ce]),yt=[][$](X[ce]),le[ce]=[],Q=s.paper.customAttributes[ce].length;Q--;)le[ce][Q]=((vt[Q]||0)-(yt[Q]||0))/K}var Dt=A.easing,Je=d.easing_formulas[Dt];if(!Je)if((Je=j(Dt).match(r))&&Je.length==5){var at=Je;Je=function(qt){return H1(qt,+at[1],+at[2],+at[3],+at[4],K)}}else Je=be;if(re={anim:e,percent:a,timestamp:ae=A.start||e.start||+new Date,start:ae+(e.del||0),status:0,initstatus:c||0,stop:!1,ms:K,easing:Je,from:X,diff:le,to:te,el:s,callback:A.callback,prev:Y,next:z,repeat:w||e.times,origin:s.attr(),totalOrigin:m},Me.push(re),c&&!S&&!R&&(re.stop=!0,re.start=new Date-K*c,Me.length==1))return Wt();R&&(re.start=new Date-re.ms*c),Me.length==1&&o1(Wt)}u("raphael.anim.start."+s.id,s,e)}}function l1(e){for(var s=0;s<Me.length;s++)Me[s].el.paper==e&&Me.splice(s--,1)}Ie.animateWith=function(e,s,a,c,m,w){if(this.removed)return w&&w.call(this),this;var A=a instanceof Ye?a:d.animation(a,c,m,w);At(A,this,A.percents[0],null,this.attr());for(var S=0,R=Me.length;S<R;S++)if(Me[S].anim==s&&Me[S].el==e){Me[R-1].start=Me[S].start;break}return this},Ie.onAnimation=function(e){return e?u.on("raphael.anim.frame."+this.id,e):u.unbind("raphael.anim.frame."+this.id),this},Ye.prototype.delay=function(e){var s=new Ye(this.anim,this.ms);return s.times=this.times,s.del=+e||0,s},Ye.prototype.repeat=function(e){var s=new Ye(this.anim,this.ms);return s.del=this.del,s.times=ve.floor(Se(e,0))||1,s},d.animation=function(e,s,a,c){if(e instanceof Ye)return e;!d.is(a,"function")&&a||(c=c||a||null,a=null),e=Object(e),s=+s||0;var m,w,A={};for(w in e)e[L](w)&&h(w)!=w&&h(w)+"%"!=w&&(m=!0,A[w]=e[w]);if(m)return a&&(A.easing=a),c&&(A.callback=c),new Ye({100:A},s);if(c){var S=0;for(var R in e){var z=g(R);e[L](R)&&z>S&&(S=z)}!e[S+="%"].callback&&(e[S].callback=c)}return new Ye(e,s)},Ie.animate=function(e,s,a,c){if(this.removed)return c&&c.call(this),this;var m=e instanceof Ye?e:d.animation(e,s,a,c);return At(m,this,m.percents[0],null,this.attr()),this},Ie.setTime=function(e,s){return e&&s!=null&&this.status(e,G(s,e.ms)/e.ms),this},Ie.status=function(e,s){var a,c,m=[],w=0;if(s!=null)return At(e,this,-1,G(s,1)),this;for(a=Me.length;w<a;w++)if((c=Me[w]).el.id==this.id&&(!e||c.anim==e)){if(e)return c.status;m.push({anim:c.anim,status:c.status})}return e?0:m},Ie.pause=function(e){for(var s=0;s<Me.length;s++)Me[s].el.id!=this.id||e&&Me[s].anim!=e||u("raphael.anim.pause."+this.id,this,Me[s].anim)!==!1&&(Me[s].paused=!0);return this},Ie.resume=function(e){for(var s=0;s<Me.length;s++)if(Me[s].el.id==this.id&&(!e||Me[s].anim==e)){var a=Me[s];u("raphael.anim.resume."+this.id,this,a.anim)!==!1&&(delete a.paused,this.status(a.anim,a.status))}return this},Ie.stop=function(e){for(var s=0;s<Me.length;s++)Me[s].el.id!=this.id||e&&Me[s].anim!=e||u("raphael.anim.stop."+this.id,this,Me[s].anim)!==!1&&Me.splice(s--,1);return this},u.on("raphael.remove",l1),u.on("raphael.clear",l1),Ie.toString=function(){return"Rapha├лlтАЩs object"};var c1,u1,it,h1,Pt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var s=0,a=e.length;s<a;s++)!e[s]||e[s].constructor!=Ie.constructor&&e[s].constructor!=Pt||(this[this.items.length]=this.items[this.items.length]=e[s],this.length++)},Oe=Pt.prototype;for(var Yt in Oe.push=function(){for(var e,s,a=0,c=arguments.length;a<c;a++)!(e=arguments[a])||e.constructor!=Ie.constructor&&e.constructor!=Pt||(this[s=this.items.length]=this.items[s]=e,this.length++);return this},Oe.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Oe.forEach=function(e,s){for(var a=0,c=this.items.length;a<c;a++)if(e.call(s,this.items[a],a)===!1)return this;return this},Ie)Ie[L](Yt)&&(Oe[Yt]=function(e){return function(){var s=arguments;return this.forEach(function(a){a[e][U](a,s)})}}(Yt));return Oe.attr=function(e,s){if(e&&d.is(e,i)&&d.is(e[0],"object"))for(var a=0,c=e.length;a<c;a++)this.items[a].attr(e[a]);else for(var m=0,w=this.items.length;m<w;m++)this.items[m].attr(e,s);return this},Oe.clear=function(){for(;this.length;)this.pop()},Oe.splice=function(e,s,a){e=e<0?Se(this.length+e,0):e,s=Se(0,G(this.length-e,s));var c,m=[],w=[],A=[];for(c=2;c<arguments.length;c++)A.push(arguments[c]);for(c=0;c<s;c++)w.push(this[e+c]);for(;c<this.length-e;c++)m.push(this[e+c]);var S=A.length;for(c=0;c<S+m.length;c++)this.items[e+c]=this[e+c]=c<S?A[c]:m[c-S];for(c=this.items.length=this.length-=s-S;this[c];)delete this[c++];return new Pt(w)},Oe.exclude=function(e){for(var s=0,a=this.length;s<a;s++)if(this[s]==e)return this.splice(s,1),!0},Oe.animate=function(e,s,a,c){(d.is(a,"function")||!a)&&(c=a||null);var m,w,A=this.items.length,S=A,R=this;if(!A)return this;c&&(w=function(){!--A&&c.call(R)}),a=d.is(a,"string")?a:w;var z=d.animation(e,s,a,w);for(m=this.items[--S].animate(z);S--;)this.items[S]&&!this.items[S].removed&&this.items[S].animateWith(m,z,z),this.items[S]&&!this.items[S].removed||A--;return this},Oe.insertAfter=function(e){for(var s=this.items.length;s--;)this.items[s].insertAfter(e);return this},Oe.getBBox=function(){for(var e=[],s=[],a=[],c=[],m=this.items.length;m--;)if(!this.items[m].removed){var w=this.items[m].getBBox();e.push(w.x),s.push(w.y),a.push(w.x+w.width),c.push(w.y+w.height)}return{x:e=G[U](0,e),y:s=G[U](0,s),x2:a=Se[U](0,a),y2:c=Se[U](0,c),width:a-e,height:c-s}},Oe.clone=function(e){e=this.paper.set();for(var s=0,a=this.items.length;s<a;s++)e.push(this.items[s].clone());return e},Oe.toString=function(){return"Rapha├лlтАШs set"},Oe.glow=function(e){var s=this.paper.set();return this.forEach(function(a,c){var m=a.glow(e);m!=null&&m.forEach(function(w,A){s.push(w)})}),s},Oe.isPointInside=function(e,s){var a=!1;return this.forEach(function(c){if(c.isPointInside(e,s))return a=!0,!1}),a},d.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var s={w:e.w,face:{},glyphs:{}},a=e.face["font-family"];for(var c in e.face)e.face[L](c)&&(s.face[c]=e.face[c]);if(this.fonts[a]?this.fonts[a].push(s):this.fonts[a]=[s],!e.svg){for(var m in s.face["units-per-em"]=g(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[L](m)){var w=e.glyphs[m];if(s.glyphs[m]={w:w.w,k:{},d:w.d&&"M"+w.d.replace(/[mlcxtrv]/g,function(S){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[S]||"M"})+"z"},w.k)for(var A in w.k)w[L](A)&&(s.glyphs[m].k[A]=w.k[A])}}return e},N.getFont=function(e,s,a,c){if(c=c||"normal",a=a||"normal",s=+s||{normal:400,bold:700,lighter:300,bolder:800}[s]||400,d.fonts){var m,w=d.fonts[e];if(!w){var A=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,he)+"(\\s|$)","i");for(var S in d.fonts)if(d.fonts[L](S)&&A.test(S)){w=d.fonts[S];break}}if(w)for(var R=0,z=w.length;R<z&&((m=w[R]).face["font-weight"]!=s||m.face["font-style"]!=a&&m.face["font-style"]||m.face["font-stretch"]!=c);R++);return m}},N.print=function(e,s,a,c,m,w,A,S){w=w||"middle",A=Se(G(A||0,1),-1),S=Se(G(S||1,3),1);var R,z=j(a)[pe](he),Y=0,ae=0,K=he;if(d.is(c,"string")&&(c=this.getFont(c)),c){R=(m||16)/c.face["units-per-em"];for(var X=c.face.bbox[pe](H),te=+X[0],le=X[3]-X[1],re=0,Q=+X[1]+(w=="baseline"?le+ +c.face.descent:le/2),ke=0,ce=z.length;ke<ce;ke++){if(z[ke]==`
`)Y=0,ue=0,ae=0,re+=le*S;else{var me=ae&&c.glyphs[z[ke-1]]||{},ue=c.glyphs[z[ke]];Y+=ae?(me.w||c.w)+(me.k&&me.k[z[ke]]||0)+c.w*A:0,ae=1}ue&&ue.d&&(K+=d.transformPath(ue.d,["t",Y*R,re*R,"s",R,R,te,Q,"t",(e-te)/R,(s-Q)/R]))}}return this.path(K).attr({fill:"#000",stroke:"none"})},N.add=function(e){if(d.is(e,"array"))for(var s,a=this.set(),c=0,m=e.length;c<m;c++)s=e[c]||{},O[L](s.type)&&a.push(this[s.type]().attr(s));return a},d.format=function(e,s){var a=d.is(s,i)?[0][$](s):arguments;return e&&d.is(e,"string")&&a.length-1&&(e=e.replace(q,function(c,m){return a[++m]==null?he:a[m]})),e||he},d.fullfill=(c1=/\{([^\}]+)\}/g,u1=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,s){return String(e).replace(c1,function(a,c){return function(m,w,A){var S=A;return w.replace(u1,function(R,z,Y,ae,K){z=z||ae,S&&(z in S&&(S=S[z]),typeof S=="function"&&K&&(S=S()))}),S=(S==null||S==A?m:S)+""}(a,c,s)})}),d.ninja=function(){if(J.was)F.win.Raphael=J.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return d},d.st=Oe,u.on("raphael.DOMload",function(){C=!0}),(it=document).readyState==null&&it.addEventListener&&(it.addEventListener("DOMContentLoaded",h1=function(){it.removeEventListener("DOMContentLoaded",h1,!1),it.readyState="complete"},!1),it.readyState="loading"),function e(){/in/.test(it.readyState)?setTimeout(e,9):d.eve("raphael.DOMload")}(),d}.apply(b,f))===void 0||(I.exports=B)},function(I,b,E){var f,B;f=[E(0),E(3),E(4)],(B=function(u){return u}.apply(b,f))===void 0||(I.exports=B)},function(I,b,E){var f,B,u,d,C,N,H,O,q,L,F,J,se,U;d="hasOwnProperty",C=/[\.\/]/,N=/\s*,\s*/,H=function($,oe){return $-oe},O={n:{}},q=function(){for(var $=0,oe=this.length;$<oe;$++)if(this[$]!==void 0)return this[$]},L=function(){for(var $=this.length;--$;)if(this[$]!==void 0)return this[$]},F=Object.prototype.toString,J=String,se=Array.isArray||function($){return $ instanceof Array||F.call($)=="[object Array]"},(U=function($,oe){var he,ge=u,j=Array.prototype.slice.call(arguments,2),pe=U.listeners($),de=0,D=[],ye={},ve=[],Se=B;ve.firstDefined=q,ve.lastDefined=L,B=$,u=0;for(var G=0,_e=pe.length;G<_e;G++)"zIndex"in pe[G]&&(D.push(pe[G].zIndex),pe[G].zIndex<0&&(ye[pe[G].zIndex]=pe[G]));for(D.sort(H);D[de]<0;)if(he=ye[D[de++]],ve.push(he.apply(oe,j)),u)return u=ge,ve;for(G=0;G<_e;G++)if("zIndex"in(he=pe[G]))if(he.zIndex==D[de]){if(ve.push(he.apply(oe,j)),u)break;do if((he=ye[D[++de]])&&ve.push(he.apply(oe,j)),u)break;while(he)}else ye[he.zIndex]=he;else if(ve.push(he.apply(oe,j)),u)break;return u=ge,B=Se,ve})._events=O,U.listeners=function($){var oe,he,ge,j,pe,de,D,ye,ve=se($)?$:$.split(C),Se=O,G=[Se],_e=[];for(j=0,pe=ve.length;j<pe;j++){for(ye=[],de=0,D=G.length;de<D;de++)for(he=[(Se=G[de].n)[ve[j]],Se["*"]],ge=2;ge--;)(oe=he[ge])&&(ye.push(oe),_e=_e.concat(oe.f||[]));G=ye}return _e},U.separator=function($){$?($="["+($=J($).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",C=new RegExp($)):C=/[\.\/]/},U.on=function($,oe){if(typeof oe!="function")return function(){};for(var he=se($)?se($[0])?$:[$]:J($).split(N),ge=0,j=he.length;ge<j;ge++)(function(pe){for(var de,D=se(pe)?pe:J(pe).split(C),ye=O,ve=0,Se=D.length;ve<Se;ve++)ye=(ye=ye.n).hasOwnProperty(D[ve])&&ye[D[ve]]||(ye[D[ve]]={n:{}});for(ye.f=ye.f||[],ve=0,Se=ye.f.length;ve<Se;ve++)if(ye.f[ve]==oe){de=!0;break}!de&&ye.f.push(oe)})(he[ge]);return function(pe){+pe==+pe&&(oe.zIndex=+pe)}},U.f=function($){var oe=[].slice.call(arguments,1);return function(){U.apply(null,[$,null].concat(oe).concat([].slice.call(arguments,0)))}},U.stop=function(){u=1},U.nt=function($){var oe=se(B)?B.join("."):B;return $?new RegExp("(?:\\.|\\/|^)"+$+"(?:\\.|\\/|$)").test(oe):oe},U.nts=function(){return se(B)?B:B.split(C)},U.off=U.unbind=function($,oe){if($){var he=se($)?se($[0])?$:[$]:J($).split(N);if(he.length>1)for(var ge=0,j=he.length;ge<j;ge++)U.off(he[ge],oe);else{he=se($)?$:J($).split(C);var pe,de,D,ye,ve,Se=[O];for(ge=0,j=he.length;ge<j;ge++)for(ye=0;ye<Se.length;ye+=D.length-2){if(D=[ye,1],pe=Se[ye].n,he[ge]!="*")pe[he[ge]]&&D.push(pe[he[ge]]);else for(de in pe)pe[d](de)&&D.push(pe[de]);Se.splice.apply(Se,D)}for(ge=0,j=Se.length;ge<j;ge++)for(pe=Se[ge];pe.n;){if(oe){if(pe.f){for(ye=0,ve=pe.f.length;ye<ve;ye++)if(pe.f[ye]==oe){pe.f.splice(ye,1);break}!pe.f.length&&delete pe.f}for(de in pe.n)if(pe.n[d](de)&&pe.n[de].f){var G=pe.n[de].f;for(ye=0,ve=G.length;ye<ve;ye++)if(G[ye]==oe){G.splice(ye,1);break}!G.length&&delete pe.n[de].f}}else for(de in delete pe.f,pe.n)pe.n[d](de)&&pe.n[de].f&&delete pe.n[de].f;pe=pe.n}}}else U._events=O={n:{}}},U.once=function($,oe){var he=function(){return U.off($,he),oe.apply(this,arguments)};return U.on($,he)},U.version="0.5.0",U.toString=function(){return"You are running Eve 0.5.0"},I.exports?I.exports=U:(f=function(){return U}.apply(b,[]))===void 0||(I.exports=f)},function(I,b,E){var f,B;f=[E(0)],(B=function(u){if(!u||u.svg){var d="hasOwnProperty",C=String,N=parseFloat,H=parseInt,O=Math,q=O.max,L=O.abs,F=O.pow,J=/[, ]+/,se=u.eve,U="",$=" ",oe="http://www.w3.org/1999/xlink",he={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},ge={};u.toString=function(){return`Your browser supports SVG.
You are running Rapha├лl `+this.version};var j=function(n,t){if(t)for(var r in typeof n=="string"&&(n=j(n)),t)t[d](r)&&(r.substring(0,6)=="xlink:"?n.setAttributeNS(oe,r.substring(6),C(t[r])):n.setAttribute(r,C(t[r])));else(n=u._g.doc.createElementNS("http://www.w3.org/2000/svg",n)).style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},pe=function(n,t){var r="linear",o=n.id+t,h=.5,g=.5,v=n.node,P=n.paper,k=v.style,M=u._g.doc.getElementById(o);if(!M){if(t=(t=C(t).replace(u._radial_gradient,function(we,be,Ce){if(r="radial",be&&Ce){h=N(be);var Ne=2*((g=N(Ce))>.5)-1;F(h-.5,2)+F(g-.5,2)>.25&&(g=O.sqrt(.25-F(h-.5,2))*Ne+.5)&&g!=.5&&(g=g.toFixed(5)-1e-5*Ne)}return U})).split(/\s*\-\s*/),r=="linear"){var V=t.shift();if(V=-N(V),isNaN(V))return null;var Z=[0,0,O.cos(u.rad(V)),O.sin(u.rad(V))],ne=1/(q(L(Z[2]),L(Z[3]))||1);Z[2]*=ne,Z[3]*=ne,Z[2]<0&&(Z[0]=-Z[2],Z[2]=0),Z[3]<0&&(Z[1]=-Z[3],Z[3]=0)}var ie=u._parseDots(t);if(!ie)return null;if(o=o.replace(/[\(\)\s,\xb0#]/g,"_"),n.gradient&&o!=n.gradient.id&&(P.defs.removeChild(n.gradient),delete n.gradient),!n.gradient){M=j(r+"Gradient",{id:o}),n.gradient=M,j(M,r=="radial"?{fx:h,fy:g}:{x1:Z[0],y1:Z[1],x2:Z[2],y2:Z[3],gradientTransform:n.matrix.invert()}),P.defs.appendChild(M);for(var fe=0,xe=ie.length;fe<xe;fe++)M.appendChild(j("stop",{offset:ie[fe].offset?ie[fe].offset:fe?"100%":"0%","stop-color":ie[fe].color||"#fff","stop-opacity":isFinite(ie[fe].opacity)?ie[fe].opacity:1}))}}return j(v,{fill:de(o),opacity:1,"fill-opacity":1}),k.fill=U,k.opacity=1,k.fillOpacity=1,1},de=function(n){if((t=document.documentMode)&&(t===9||t===10))return"url('#"+n+"')";var t,r=document.location;return"url('"+(r.protocol+"//"+r.host+r.pathname+r.search)+"#"+n+"')"},D=function(n){var t=n.getBBox(1);j(n.pattern,{patternTransform:n.matrix.invert()+" translate("+t.x+","+t.y+")"})},ye=function(n,t,r){if(n.type=="path"){for(var o,h,g,v,P,k=C(t).toLowerCase().split("-"),M=n.paper,V=r?"end":"start",Z=n.node,ne=n.attrs,ie=ne["stroke-width"],fe=k.length,xe="classic",we=3,be=3,Ce=5;fe--;)switch(k[fe]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":xe=k[fe];break;case"wide":be=5;break;case"narrow":be=2;break;case"long":we=5;break;case"short":we=2}if(xe=="open"?(we+=2,be+=2,Ce+=2,g=1,v=r?4:1,P={fill:"none",stroke:ne.stroke}):(v=g=we/2,P={fill:ne.stroke,stroke:"none"}),n._.arrows?r?(n._.arrows.endPath&&ge[n._.arrows.endPath]--,n._.arrows.endMarker&&ge[n._.arrows.endMarker]--):(n._.arrows.startPath&&ge[n._.arrows.startPath]--,n._.arrows.startMarker&&ge[n._.arrows.startMarker]--):n._.arrows={},xe!="none"){var Ne="raphael-marker-"+xe,Be="raphael-marker-"+V+xe+we+be+"-obj"+n.id;u._g.doc.getElementById(Ne)?ge[Ne]++:(M.defs.appendChild(j(j("path"),{"stroke-linecap":"round",d:he[xe],id:Ne})),ge[Ne]=1);var Te,Le=u._g.doc.getElementById(Be);Le?(ge[Be]++,Te=Le.getElementsByTagName("use")[0]):(Le=j(j("marker"),{id:Be,markerHeight:be,markerWidth:we,orient:"auto",refX:v,refY:be/2}),Te=j(j("use"),{"xlink:href":"#"+Ne,transform:(r?"rotate(180 "+we/2+" "+be/2+") ":U)+"scale("+we/Ce+","+be/Ce+")","stroke-width":(1/((we/Ce+be/Ce)/2)).toFixed(4)}),Le.appendChild(Te),M.defs.appendChild(Le),ge[Be]=1),j(Te,P);var qe=g*(xe!="diamond"&&xe!="oval");r?(o=n._.arrows.startdx*ie||0,h=u.getTotalLength(ne.path)-qe*ie):(o=qe*ie,h=u.getTotalLength(ne.path)-(n._.arrows.enddx*ie||0)),(P={})["marker-"+V]="url(#"+Be+")",(h||o)&&(P.d=u.getSubpath(ne.path,o,h)),j(Z,P),n._.arrows[V+"Path"]=Ne,n._.arrows[V+"Marker"]=Be,n._.arrows[V+"dx"]=qe,n._.arrows[V+"Type"]=xe,n._.arrows[V+"String"]=t}else r?(o=n._.arrows.startdx*ie||0,h=u.getTotalLength(ne.path)-o):(o=0,h=u.getTotalLength(ne.path)-(n._.arrows.enddx*ie||0)),n._.arrows[V+"Path"]&&j(Z,{d:u.getSubpath(ne.path,o,h)}),delete n._.arrows[V+"Path"],delete n._.arrows[V+"Marker"],delete n._.arrows[V+"dx"],delete n._.arrows[V+"Type"],delete n._.arrows[V+"String"];for(P in ge)if(ge[d](P)&&!ge[P]){var ze=u._g.doc.getElementById(P);ze&&ze.parentNode.removeChild(ze)}}},ve={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},Se=function(n,t,r){if(t=ve[C(t).toLowerCase()]){for(var o=n.attrs["stroke-width"]||"1",h={round:o,square:o,butt:0}[n.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,g=[],v=t.length;v--;)g[v]=t[v]*o+(v%2?1:-1)*h;j(n.node,{"stroke-dasharray":g.join(",")})}else j(n.node,{"stroke-dasharray":"none"})},G=function(n,t){var r=n.node,o=n.attrs,h=r.style.visibility;for(var g in r.style.visibility="hidden",t)if(t[d](g)){if(!u._availableAttrs[d](g))continue;var v=t[g];switch(o[g]=v,g){case"blur":n.blur(v);break;case"title":var P=r.getElementsByTagName("title");if(P.length&&(P=P[0]))P.firstChild.nodeValue=v;else{P=j("title");var k=u._g.doc.createTextNode(v);P.appendChild(k),r.appendChild(P)}break;case"href":case"target":var M=r.parentNode;if(M.tagName.toLowerCase()!="a"){var V=j("a");M.insertBefore(V,r),V.appendChild(r),M=V}g=="target"?M.setAttributeNS(oe,"show",v=="blank"?"new":v):M.setAttributeNS(oe,g,v);break;case"cursor":r.style.cursor=v;break;case"transform":n.transform(v);break;case"arrow-start":ye(n,v);break;case"arrow-end":ye(n,v,1);break;case"clip-rect":var Z=C(v).split(J);if(Z.length==4){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var ne=j("clipPath"),ie=j("rect");ne.id=u.createUUID(),j(ie,{x:Z[0],y:Z[1],width:Z[2],height:Z[3]}),ne.appendChild(ie),n.paper.defs.appendChild(ne),j(r,{"clip-path":"url(#"+ne.id+")"}),n.clip=ie}if(!v){var fe=r.getAttribute("clip-path");if(fe){var xe=u._g.doc.getElementById(fe.replace(/(^url\(#|\)$)/g,U));xe&&xe.parentNode.removeChild(xe),j(r,{"clip-path":U}),delete n.clip}}break;case"path":n.type=="path"&&(j(r,{d:v?o.path=u._pathToAbsolute(v):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&ye(n,n._.arrows.startString),"endString"in n._.arrows&&ye(n,n._.arrows.endString,1)));break;case"width":if(r.setAttribute(g,v),n._.dirty=1,!o.fx)break;g="x",v=o.x;case"x":o.fx&&(v=-o.x-(o.width||0));case"rx":if(g=="rx"&&n.type=="rect")break;case"cx":r.setAttribute(g,v),n.pattern&&D(n),n._.dirty=1;break;case"height":if(r.setAttribute(g,v),n._.dirty=1,!o.fy)break;g="y",v=o.y;case"y":o.fy&&(v=-o.y-(o.height||0));case"ry":if(g=="ry"&&n.type=="rect")break;case"cy":r.setAttribute(g,v),n.pattern&&D(n),n._.dirty=1;break;case"r":n.type=="rect"?j(r,{rx:v,ry:v}):r.setAttribute(g,v),n._.dirty=1;break;case"src":n.type=="image"&&r.setAttributeNS(oe,"href",v);break;case"stroke-width":n._.sx==1&&n._.sy==1||(v/=q(L(n._.sx),L(n._.sy))||1),r.setAttribute(g,v),o["stroke-dasharray"]&&Se(n,o["stroke-dasharray"],t),n._.arrows&&("startString"in n._.arrows&&ye(n,n._.arrows.startString),"endString"in n._.arrows&&ye(n,n._.arrows.endString,1));break;case"stroke-dasharray":Se(n,v,t);break;case"fill":var we=C(v).match(u._ISURL);if(we){ne=j("pattern");var be=j("image");ne.id=u.createUUID(),j(ne,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),j(be,{x:0,y:0,"xlink:href":we[1]}),ne.appendChild(be),function(Le){u._preload(we[1],function(){var qe=this.offsetWidth,ze=this.offsetHeight;j(Le,{width:qe,height:ze}),j(be,{width:qe,height:ze})})}(ne),n.paper.defs.appendChild(ne),j(r,{fill:"url(#"+ne.id+")"}),n.pattern=ne,n.pattern&&D(n);break}var Ce=u.getRGB(v);if(Ce.error){if((n.type=="circle"||n.type=="ellipse"||C(v).charAt()!="r")&&pe(n,v)){if("opacity"in o||"fill-opacity"in o){var Ne=u._g.doc.getElementById(r.getAttribute("fill").replace(/^url\(#|\)$/g,U));if(Ne){var Be=Ne.getElementsByTagName("stop");j(Be[Be.length-1],{"stop-opacity":("opacity"in o?o.opacity:1)*("fill-opacity"in o?o["fill-opacity"]:1)})}}o.gradient=v,o.fill="none";break}}else delete t.gradient,delete o.gradient,!u.is(o.opacity,"undefined")&&u.is(t.opacity,"undefined")&&j(r,{opacity:o.opacity}),!u.is(o["fill-opacity"],"undefined")&&u.is(t["fill-opacity"],"undefined")&&j(r,{"fill-opacity":o["fill-opacity"]});Ce[d]("opacity")&&j(r,{"fill-opacity":Ce.opacity>1?Ce.opacity/100:Ce.opacity});case"stroke":Ce=u.getRGB(v),r.setAttribute(g,Ce.hex),g=="stroke"&&Ce[d]("opacity")&&j(r,{"stroke-opacity":Ce.opacity>1?Ce.opacity/100:Ce.opacity}),g=="stroke"&&n._.arrows&&("startString"in n._.arrows&&ye(n,n._.arrows.startString),"endString"in n._.arrows&&ye(n,n._.arrows.endString,1));break;case"gradient":(n.type=="circle"||n.type=="ellipse"||C(v).charAt()!="r")&&pe(n,v);break;case"opacity":o.gradient&&!o[d]("stroke-opacity")&&j(r,{"stroke-opacity":v>1?v/100:v});case"fill-opacity":if(o.gradient){(Ne=u._g.doc.getElementById(r.getAttribute("fill").replace(/^url\(#|\)$/g,U)))&&(Be=Ne.getElementsByTagName("stop"),j(Be[Be.length-1],{"stop-opacity":v}));break}default:g=="font-size"&&(v=H(v,10)+"px");var Te=g.replace(/(\-.)/g,function(Le){return Le.substring(1).toUpperCase()});r.style[Te]=v,n._.dirty=1,r.setAttribute(g,v)}}_e(n,t),r.style.visibility=h},_e=function(n,t){if(n.type=="text"&&(t[d]("text")||t[d]("font")||t[d]("font-size")||t[d]("x")||t[d]("y"))){var r=n.attrs,o=n.node,h=o.firstChild?H(u._g.doc.defaultView.getComputedStyle(o.firstChild,U).getPropertyValue("font-size"),10):10;if(t[d]("text")){for(r.text=t.text;o.firstChild;)o.removeChild(o.firstChild);for(var g,v=C(t.text).split(`
`),P=[],k=0,M=v.length;k<M;k++)g=j("tspan"),k&&j(g,{dy:1.2*h,x:r.x}),g.appendChild(u._g.doc.createTextNode(v[k])),o.appendChild(g),P[k]=g}else for(k=0,M=(P=o.getElementsByTagName("tspan")).length;k<M;k++)k?j(P[k],{dy:1.2*h,x:r.x}):j(P[0],{dy:0});j(o,{x:r.x,y:r.y}),n._.dirty=1;var V=n._getBBox(),Z=r.y-(V.y+V.height/2);Z&&u.is(Z,"finite")&&j(P[0],{dy:Z})}},Ae=function(n){return n.parentNode&&n.parentNode.tagName.toLowerCase()==="a"?n.parentNode:n},ee=function(n,t){this[0]=this.node=n,n.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),n.raphaelid=this.id,this.matrix=u.matrix(),this.realPath=null,this.paper=t,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null},W=u.el;ee.prototype=W,W.constructor=ee,u._engine.path=function(n,t){var r=j("path");t.canvas&&t.canvas.appendChild(r);var o=new ee(r,t);return o.type="path",G(o,{fill:"none",stroke:"#000",path:n}),o},W.rotate=function(n,t,r){if(this.removed)return this;if((n=C(n).split(J)).length-1&&(t=N(n[1]),r=N(n[2])),n=N(n[0]),r==null&&(t=r),t==null||r==null){var o=this.getBBox(1);t=o.x+o.width/2,r=o.y+o.height/2}return this.transform(this._.transform.concat([["r",n,t,r]])),this},W.scale=function(n,t,r,o){if(this.removed)return this;if((n=C(n).split(J)).length-1&&(t=N(n[1]),r=N(n[2]),o=N(n[3])),n=N(n[0]),t==null&&(t=n),o==null&&(r=o),r==null||o==null)var h=this.getBBox(1);return r=r==null?h.x+h.width/2:r,o=o==null?h.y+h.height/2:o,this.transform(this._.transform.concat([["s",n,t,r,o]])),this},W.translate=function(n,t){return this.removed?this:((n=C(n).split(J)).length-1&&(t=N(n[1])),n=N(n[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",n,t]])),this)},W.transform=function(n){var t=this._;if(n==null)return t.transform;if(u._extractTransform(this,n),this.clip&&j(this.clip,{transform:this.matrix.invert()}),this.pattern&&D(this),this.node&&j(this.node,{transform:this.matrix}),t.sx!=1||t.sy!=1){var r=this.attrs[d]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},W.hide=function(){return this.removed||(this.node.style.display="none"),this},W.show=function(){return this.removed||(this.node.style.display=""),this},W.remove=function(){var n=Ae(this.node);if(!this.removed&&n.parentNode){var t=this.paper;for(var r in t.__set__&&t.__set__.exclude(this),se.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),u._tear(this,t),n.parentNode.removeChild(n),this.removeData(),this)this[r]=typeof this[r]=="function"?u._removedFactory(r):null;this.removed=!0}},W._getBBox=function(){if(this.node.style.display=="none"){this.show();var n=!0}var t,r=!1;this.paper.canvas.parentElement?t=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(t=this.paper.canvas.parentNode.style),t&&t.display=="none"&&(r=!0,t.display="");var o={};try{o=this.node.getBBox()}catch(h){o={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{o=o||{},r&&(t.display="none")}return n&&this.hide(),o},W.attr=function(n,t){if(this.removed)return this;if(n==null){var r={};for(var o in this.attrs)this.attrs[d](o)&&(r[o]=this.attrs[o]);return r.gradient&&r.fill=="none"&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(t==null&&u.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(n=="transform")return this._.transform;for(var h=n.split(J),g={},v=0,P=h.length;v<P;v++)(n=h[v])in this.attrs?g[n]=this.attrs[n]:u.is(this.paper.customAttributes[n],"function")?g[n]=this.paper.customAttributes[n].def:g[n]=u._availableAttrs[n];return P-1?g:g[h[0]]}if(t==null&&u.is(n,"array")){for(g={},v=0,P=n.length;v<P;v++)g[n[v]]=this.attr(n[v]);return g}if(t!=null){var k={};k[n]=t}else n!=null&&u.is(n,"object")&&(k=n);for(var M in k)se("raphael.attr."+M+"."+this.id,this,k[M]);for(M in this.paper.customAttributes)if(this.paper.customAttributes[d](M)&&k[d](M)&&u.is(this.paper.customAttributes[M],"function")){var V=this.paper.customAttributes[M].apply(this,[].concat(k[M]));for(var Z in this.attrs[M]=k[M],V)V[d](Z)&&(k[Z]=V[Z])}return G(this,k),this},W.toFront=function(){if(this.removed)return this;var n=Ae(this.node);n.parentNode.appendChild(n);var t=this.paper;return t.top!=this&&u._tofront(this,t),this},W.toBack=function(){if(this.removed)return this;var n=Ae(this.node),t=n.parentNode;return t.insertBefore(n,t.firstChild),u._toback(this,this.paper),this.paper,this},W.insertAfter=function(n){if(this.removed||!n)return this;var t=Ae(this.node),r=Ae(n.node||n[n.length-1].node);return r.nextSibling?r.parentNode.insertBefore(t,r.nextSibling):r.parentNode.appendChild(t),u._insertafter(this,n,this.paper),this},W.insertBefore=function(n){if(this.removed||!n)return this;var t=Ae(this.node),r=Ae(n.node||n[0].node);return r.parentNode.insertBefore(t,r),u._insertbefore(this,n,this.paper),this},W.blur=function(n){var t=this;if(+n!=0){var r=j("filter"),o=j("feGaussianBlur");t.attrs.blur=n,r.id=u.createUUID(),j(o,{stdDeviation:+n||1.5}),r.appendChild(o),t.paper.defs.appendChild(r),t._blur=r,j(t.node,{filter:"url(#"+r.id+")"})}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter");return t},u._engine.circle=function(n,t,r,o){var h=j("circle");n.canvas&&n.canvas.appendChild(h);var g=new ee(h,n);return g.attrs={cx:t,cy:r,r:o,fill:"none",stroke:"#000"},g.type="circle",j(h,g.attrs),g},u._engine.rect=function(n,t,r,o,h,g){var v=j("rect");n.canvas&&n.canvas.appendChild(v);var P=new ee(v,n);return P.attrs={x:t,y:r,width:o,height:h,rx:g||0,ry:g||0,fill:"none",stroke:"#000"},P.type="rect",j(v,P.attrs),P},u._engine.ellipse=function(n,t,r,o,h){var g=j("ellipse");n.canvas&&n.canvas.appendChild(g);var v=new ee(g,n);return v.attrs={cx:t,cy:r,rx:o,ry:h,fill:"none",stroke:"#000"},v.type="ellipse",j(g,v.attrs),v},u._engine.image=function(n,t,r,o,h,g){var v=j("image");j(v,{x:r,y:o,width:h,height:g,preserveAspectRatio:"none"}),v.setAttributeNS(oe,"href",t),n.canvas&&n.canvas.appendChild(v);var P=new ee(v,n);return P.attrs={x:r,y:o,width:h,height:g,src:t},P.type="image",P},u._engine.text=function(n,t,r,o){var h=j("text");n.canvas&&n.canvas.appendChild(h);var g=new ee(h,n);return g.attrs={x:t,y:r,"text-anchor":"middle",text:o,"font-family":u._availableAttrs["font-family"],"font-size":u._availableAttrs["font-size"],stroke:"none",fill:"#000"},g.type="text",G(g,g.attrs),g},u._engine.setSize=function(n,t){return this.width=n||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},u._engine.create=function(){var n=u._getContainer.apply(0,arguments),t=n&&n.container;if(!t)throw new Error("SVG container not found.");var r,o=n.x,h=n.y,g=n.width,v=n.height,P=j("svg"),k="overflow:hidden;";return o=o||0,h=h||0,j(P,{height:v=v||342,version:1.1,width:g=g||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),t==1?(P.style.cssText=k+"position:absolute;left:"+o+"px;top:"+h+"px",u._g.doc.body.appendChild(P),r=1):(P.style.cssText=k+"position:relative",t.firstChild?t.insertBefore(P,t.firstChild):t.appendChild(P)),(t=new u._Paper).width=g,t.height=v,t.canvas=P,t.clear(),t._left=t._top=0,r&&(t.renderfix=function(){}),t.renderfix(),t},u._engine.setViewBox=function(n,t,r,o,h){se("raphael.setViewBox",this,this._viewBox,[n,t,r,o,h]);var g,v,P=this.getSize(),k=q(r/P.width,o/P.height),M=this.top,V=h?"xMidYMid meet":"xMinYMin";for(n==null?(this._vbSize&&(k=1),delete this._vbSize,g="0 0 "+this.width+$+this.height):(this._vbSize=k,g=n+$+t+$+r+$+o),j(this.canvas,{viewBox:g,preserveAspectRatio:V});k&&M;)v="stroke-width"in M.attrs?M.attrs["stroke-width"]:1,M.attr({"stroke-width":v}),M._.dirty=1,M._.dirtyT=1,M=M.prev;return this._viewBox=[n,t,r,o,!!h],this},u.prototype.renderfix=function(){var n,t=this.canvas,r=t.style;try{n=t.getScreenCTM()||t.createSVGMatrix()}catch(g){n=t.createSVGMatrix()}var o=-n.e%1,h=-n.f%1;(o||h)&&(o&&(this._left=(this._left+o)%1,r.left=this._left+"px"),h&&(this._top=(this._top+h)%1,r.top=this._top+"px"))},u.prototype.clear=function(){u.eve("raphael.clear",this);for(var n=this.canvas;n.firstChild;)n.removeChild(n.firstChild);this.bottom=this.top=null,(this.desc=j("desc")).appendChild(u._g.doc.createTextNode("Created with Rapha├лl "+u.version)),n.appendChild(this.desc),n.appendChild(this.defs=j("defs"))},u.prototype.remove=function(){for(var n in se("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[n]=typeof this[n]=="function"?u._removedFactory(n):null};var i=u.st;for(var l in W)W[d](l)&&!i[d](l)&&(i[l]=function(n){return function(){var t=arguments;return this.forEach(function(r){r[n].apply(r,t)})}}(l))}}.apply(b,f))===void 0||(I.exports=B)},function(I,b,E){var f,B;f=[E(0)],(B=function(u){if(!u||u.vml){var d="hasOwnProperty",C=String,N=parseFloat,H=Math,O=H.round,q=H.max,L=H.min,F=H.abs,J=/[, ]+/,se=u.eve,U=" ",$="",oe={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},he=/([clmz]),?([^clmz]*)/gi,ge=/ progid:\S+Blur\([^\)]+\)/g,j=/-?[^,\s-]+/g,pe="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",de=21600,D={path:1,rect:1,image:1},ye={circle:1,ellipse:1},ve=function(t,r,o){var h=u.matrix();return h.rotate(-t,.5,.5),{dx:h.x(r,o),dy:h.y(r,o)}},Se=function(t,r,o,h,g,v){var P=t._,k=t.matrix,M=P.fillpos,V=t.node,Z=V.style,ne=1,ie="",fe=de/r,xe=de/o;if(Z.visibility="hidden",r&&o){if(V.coordsize=F(fe)+U+F(xe),Z.rotation=v*(r*o<0?-1:1),v){var we=ve(v,h,g);h=we.dx,g=we.dy}if(r<0&&(ie+="x"),o<0&&(ie+=" y")&&(ne=-1),Z.flip=ie,V.coordorigin=h*-fe+U+g*-xe,M||P.fillsize){var be=V.getElementsByTagName("fill");be=be&&be[0],V.removeChild(be),M&&(we=ve(v,k.x(M[0],M[1]),k.y(M[0],M[1])),be.position=we.dx*ne+U+we.dy*ne),P.fillsize&&(be.size=P.fillsize[0]*F(r)+U+P.fillsize[1]*F(o)),V.appendChild(be)}Z.visibility="visible"}};u.toString=function(){return`Your browser doesnтАЩt support SVG. Falling down to VML.
You are running Rapha├лl `+this.version};var G,_e=function(t,r,o){for(var h=C(r).toLowerCase().split("-"),g=o?"end":"start",v=h.length,P="classic",k="medium",M="medium";v--;)switch(h[v]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":P=h[v];break;case"wide":case"narrow":M=h[v];break;case"long":case"short":k=h[v]}var V=t.node.getElementsByTagName("stroke")[0];V[g+"arrow"]=P,V[g+"arrowlength"]=k,V[g+"arrowwidth"]=M},Ae=function(t,r){t.attrs=t.attrs||{};var o=t.node,h=t.attrs,g=o.style,v=D[t.type]&&(r.x!=h.x||r.y!=h.y||r.width!=h.width||r.height!=h.height||r.cx!=h.cx||r.cy!=h.cy||r.rx!=h.rx||r.ry!=h.ry||r.r!=h.r),P=ye[t.type]&&(h.cx!=r.cx||h.cy!=r.cy||h.r!=r.r||h.rx!=r.rx||h.ry!=r.ry),k=t;for(var M in r)r[d](M)&&(h[M]=r[M]);if(v&&(h.path=u._getPath[t.type](t),t._.dirty=1),r.href&&(o.href=r.href),r.title&&(o.title=r.title),r.target&&(o.target=r.target),r.cursor&&(g.cursor=r.cursor),"blur"in r&&t.blur(r.blur),(r.path&&t.type=="path"||v)&&(o.path=function(Fe){var Ke=/[ahqstv]/gi,ut=u._pathToAbsolute;if(C(Fe).match(Ke)&&(ut=u._path2curve),Ke=/[clmz]/g,ut==u._pathToAbsolute&&!C(Fe).match(Ke)){var je=C(Fe).replace(he,function(Zt,ft,pt){var et=[],Tt=ft.toLowerCase()=="m",rt=oe[ft];return pt.replace(j,function(Mt){Tt&&et.length==2&&(rt+=et+oe[ft=="m"?"l":"L"],et=[]),et.push(O(Mt*de))}),rt+et});return je}var ht,Ge,_t=ut(Fe);je=[];for(var dt=0,kt=_t.length;dt<kt;dt++){ht=_t[dt],(Ge=_t[dt][0].toLowerCase())=="z"&&(Ge="x");for(var Ze=1,Ve=ht.length;Ze<Ve;Ze++)Ge+=O(ht[Ze]*de)+(Ze!=Ve-1?",":$);je.push(Ge)}return je.join(U)}(~C(h.path).toLowerCase().indexOf("r")?u._pathToAbsolute(h.path):h.path),t._.dirty=1,t.type=="image"&&(t._.fillpos=[h.x,h.y],t._.fillsize=[h.width,h.height],Se(t,1,1,0,0,0))),"transform"in r&&t.transform(r.transform),P){var V=+h.cx,Z=+h.cy,ne=+h.rx||+h.r||0,ie=+h.ry||+h.r||0;o.path=u.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",O((V-ne)*de),O((Z-ie)*de),O((V+ne)*de),O((Z+ie)*de),O(V*de)),t._.dirty=1}if("clip-rect"in r){var fe=C(r["clip-rect"]).split(J);if(fe.length==4){fe[2]=+fe[2]+ +fe[0],fe[3]=+fe[3]+ +fe[1];var xe=o.clipRect||u._g.doc.createElement("div"),we=xe.style;we.clip=u.format("rect({1}px {2}px {3}px {0}px)",fe),o.clipRect||(we.position="absolute",we.top=0,we.left=0,we.width=t.paper.width+"px",we.height=t.paper.height+"px",o.parentNode.insertBefore(xe,o),xe.appendChild(o),o.clipRect=xe)}r["clip-rect"]||o.clipRect&&(o.clipRect.style.clip="auto")}if(t.textpath){var be=t.textpath.style;r.font&&(be.font=r.font),r["font-family"]&&(be.fontFamily='"'+r["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,$)+'"'),r["font-size"]&&(be.fontSize=r["font-size"]),r["font-weight"]&&(be.fontWeight=r["font-weight"]),r["font-style"]&&(be.fontStyle=r["font-style"])}if("arrow-start"in r&&_e(k,r["arrow-start"]),"arrow-end"in r&&_e(k,r["arrow-end"],1),r.opacity!=null||r.fill!=null||r.src!=null||r.stroke!=null||r["stroke-width"]!=null||r["stroke-opacity"]!=null||r["fill-opacity"]!=null||r["stroke-dasharray"]!=null||r["stroke-miterlimit"]!=null||r["stroke-linejoin"]!=null||r["stroke-linecap"]!=null){var Ce=o.getElementsByTagName("fill");if(!(Ce=Ce&&Ce[0])&&(Ce=G("fill")),t.type=="image"&&r.src&&(Ce.src=r.src),r.fill&&(Ce.on=!0),Ce.on!=null&&r.fill!="none"&&r.fill!==null||(Ce.on=!1),Ce.on&&r.fill){var Ne=C(r.fill).match(u._ISURL);if(Ne){Ce.parentNode==o&&o.removeChild(Ce),Ce.rotate=!0,Ce.src=Ne[1],Ce.type="tile";var Be=t.getBBox(1);Ce.position=Be.x+U+Be.y,t._.fillpos=[Be.x,Be.y],u._preload(Ne[1],function(){t._.fillsize=[this.offsetWidth,this.offsetHeight]})}else Ce.color=u.getRGB(r.fill).hex,Ce.src=$,Ce.type="solid",u.getRGB(r.fill).error&&(k.type in{circle:1,ellipse:1}||C(r.fill).charAt()!="r")&&ee(k,r.fill,Ce)&&(h.fill="none",h.gradient=r.fill,Ce.rotate=!1)}if("fill-opacity"in r||"opacity"in r){var Te=((+h["fill-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+u.getRGB(r.fill).o+1||2)-1);Te=L(q(Te,0),1),Ce.opacity=Te,Ce.src&&(Ce.color="none")}o.appendChild(Ce);var Le=o.getElementsByTagName("stroke")&&o.getElementsByTagName("stroke")[0],qe=!1;!Le&&(qe=Le=G("stroke")),(r.stroke&&r.stroke!="none"||r["stroke-width"]||r["stroke-opacity"]!=null||r["stroke-dasharray"]||r["stroke-miterlimit"]||r["stroke-linejoin"]||r["stroke-linecap"])&&(Le.on=!0),(r.stroke=="none"||r.stroke===null||Le.on==null||r.stroke==0||r["stroke-width"]==0)&&(Le.on=!1);var ze=u.getRGB(r.stroke);Le.on&&r.stroke&&(Le.color=ze.hex),Te=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+ze.o+1||2)-1);var He=.75*(N(r["stroke-width"])||1);if(Te=L(q(Te,0),1),r["stroke-width"]==null&&(He=h["stroke-width"]),r["stroke-width"]&&(Le.weight=He),He&&He<1&&(Te*=He)&&(Le.weight=1),Le.opacity=Te,r["stroke-linejoin"]&&(Le.joinstyle=r["stroke-linejoin"]||"miter"),Le.miterlimit=r["stroke-miterlimit"]||8,r["stroke-linecap"]&&(Le.endcap=r["stroke-linecap"]=="butt"?"flat":r["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in r){var Xe={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Le.dashstyle=Xe[d](r["stroke-dasharray"])?Xe[r["stroke-dasharray"]]:$}qe&&o.appendChild(Le)}if(k.type=="text"){k.paper.canvas.style.display=$;var Qe=k.paper.span,ot=h.font&&h.font.match(/\d+(?:\.\d*)?(?=px)/);g=Qe.style,h.font&&(g.font=h.font),h["font-family"]&&(g.fontFamily=h["font-family"]),h["font-weight"]&&(g.fontWeight=h["font-weight"]),h["font-style"]&&(g.fontStyle=h["font-style"]),ot=N(h["font-size"]||ot&&ot[0])||10,g.fontSize=100*ot+"px",k.textpath.string&&(Qe.innerHTML=C(k.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var lt=Qe.getBoundingClientRect();k.W=h.w=(lt.right-lt.left)/100,k.H=h.h=(lt.bottom-lt.top)/100,k.X=h.x,k.Y=h.y+k.H/2,("x"in r||"y"in r)&&(k.path.v=u.format("m{0},{1}l{2},{1}",O(h.x*de),O(h.y*de),O(h.x*de)+1));for(var Ct=["x","y","text","font","font-family","font-weight","font-style","font-size"],ct=0,Nt=Ct.length;ct<Nt;ct++)if(Ct[ct]in r){k._.dirty=1;break}switch(h["text-anchor"]){case"start":k.textpath.style["v-text-align"]="left",k.bbx=k.W/2;break;case"end":k.textpath.style["v-text-align"]="right",k.bbx=-k.W/2;break;default:k.textpath.style["v-text-align"]="center",k.bbx=0}k.textpath.style["v-text-kern"]=!0}},ee=function(t,r,o){t.attrs=t.attrs||{},t.attrs;var h=Math.pow,g="linear",v=".5 .5";if(t.attrs.gradient=r,r=(r=C(r).replace(u._radial_gradient,function(ne,ie,fe){return g="radial",ie&&fe&&(ie=N(ie),fe=N(fe),h(ie-.5,2)+h(fe-.5,2)>.25&&(fe=H.sqrt(.25-h(ie-.5,2))*(2*(fe>.5)-1)+.5),v=ie+U+fe),$})).split(/\s*\-\s*/),g=="linear"){var P=r.shift();if(P=-N(P),isNaN(P))return null}var k=u._parseDots(r);if(!k)return null;if(t=t.shape||t.node,k.length){t.removeChild(o),o.on=!0,o.method="none",o.color=k[0].color,o.color2=k[k.length-1].color;for(var M=[],V=0,Z=k.length;V<Z;V++)k[V].offset&&M.push(k[V].offset+U+k[V].color);o.colors=M.length?M.join():"0% "+o.color,g=="radial"?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=v,o.angle=0):(o.type="gradient",o.angle=(270-P)%360),t.appendChild(o)}return 1},W=function(t,r){this[0]=this.node=t,t.raphael=!0,this.id=u._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=r,this.matrix=u.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},i=u.el;W.prototype=i,i.constructor=W,i.transform=function(t){if(t==null)return this._.transform;var r,o=this.paper._viewBoxShift,h=o?"s"+[o.scale,o.scale]+"-1-1t"+[o.dx,o.dy]:$;o&&(r=t=C(t).replace(/\.{3}|\u2026/g,this._.transform||$)),u._extractTransform(this,h+t);var g,v=this.matrix.clone(),P=this.skew,k=this.node,M=~C(this.attrs.fill).indexOf("-"),V=!C(this.attrs.fill).indexOf("url(");if(v.translate(1,1),V||M||this.type=="image")if(P.matrix="1 0 0 1",P.offset="0 0",g=v.split(),M&&g.noRotation||!g.isSimple){k.style.filter=v.toFilter();var Z=this.getBBox(),ne=this.getBBox(1),ie=Z.x-ne.x,fe=Z.y-ne.y;k.coordorigin=ie*-de+U+fe*-de,Se(this,1,1,ie,fe,0)}else k.style.filter=$,Se(this,g.scalex,g.scaley,g.dx,g.dy,g.rotate);else k.style.filter=$,P.matrix=C(v),P.offset=v.offset();return r!==null&&(this._.transform=r,u._extractTransform(this,r)),this},i.rotate=function(t,r,o){if(this.removed)return this;if(t!=null){if((t=C(t).split(J)).length-1&&(r=N(t[1]),o=N(t[2])),t=N(t[0]),o==null&&(r=o),r==null||o==null){var h=this.getBBox(1);r=h.x+h.width/2,o=h.y+h.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,r,o]])),this}},i.translate=function(t,r){return this.removed?this:((t=C(t).split(J)).length-1&&(r=N(t[1])),t=N(t[0])||0,r=+r||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=r),this.transform(this._.transform.concat([["t",t,r]])),this)},i.scale=function(t,r,o,h){if(this.removed)return this;if((t=C(t).split(J)).length-1&&(r=N(t[1]),o=N(t[2]),h=N(t[3]),isNaN(o)&&(o=null),isNaN(h)&&(h=null)),t=N(t[0]),r==null&&(r=t),h==null&&(o=h),o==null||h==null)var g=this.getBBox(1);return o=o==null?g.x+g.width/2:o,h=h==null?g.y+g.height/2:h,this.transform(this._.transform.concat([["s",t,r,o,h]])),this._.dirtyT=1,this},i.hide=function(){return!this.removed&&(this.node.style.display="none"),this},i.show=function(){return!this.removed&&(this.node.style.display=$),this},i.auxGetBBox=u.el.getBBox,i.getBBox=function(){var t=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var r={},o=1/this.paper._viewBoxShift.scale;return r.x=t.x-this.paper._viewBoxShift.dx,r.x*=o,r.y=t.y-this.paper._viewBoxShift.dy,r.y*=o,r.width=t.width*o,r.height=t.height*o,r.x2=r.x+r.width,r.y2=r.y+r.height,r}return t},i._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},i.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),u.eve.unbind("raphael.*.*."+this.id),u._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]=typeof this[t]=="function"?u._removedFactory(t):null;this.removed=!0}},i.attr=function(t,r){if(this.removed)return this;if(t==null){var o={};for(var h in this.attrs)this.attrs[d](h)&&(o[h]=this.attrs[h]);return o.gradient&&o.fill=="none"&&(o.fill=o.gradient)&&delete o.gradient,o.transform=this._.transform,o}if(r==null&&u.is(t,"string")){if(t=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var g=t.split(J),v={},P=0,k=g.length;P<k;P++)(t=g[P])in this.attrs?v[t]=this.attrs[t]:u.is(this.paper.customAttributes[t],"function")?v[t]=this.paper.customAttributes[t].def:v[t]=u._availableAttrs[t];return k-1?v:v[g[0]]}if(this.attrs&&r==null&&u.is(t,"array")){for(v={},P=0,k=t.length;P<k;P++)v[t[P]]=this.attr(t[P]);return v}var M;for(var V in r!=null&&((M={})[t]=r),r==null&&u.is(t,"object")&&(M=t),M)se("raphael.attr."+V+"."+this.id,this,M[V]);if(M){for(V in this.paper.customAttributes)if(this.paper.customAttributes[d](V)&&M[d](V)&&u.is(this.paper.customAttributes[V],"function")){var Z=this.paper.customAttributes[V].apply(this,[].concat(M[V]));for(var ne in this.attrs[V]=M[V],Z)Z[d](ne)&&(M[ne]=Z[ne])}M.text&&this.type=="text"&&(this.textpath.string=M.text),Ae(this,M)}return this},i.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&u._tofront(this,this.paper),this},i.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),u._toback(this,this.paper)),this)},i.insertAfter=function(t){return this.removed?this:(t.constructor==u.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),u._insertafter(this,t,this.paper),this)},i.insertBefore=function(t){return this.removed?this:(t.constructor==u.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),u._insertbefore(this,t,this.paper),this)},i.blur=function(t){var r=this.node.runtimeStyle,o=r.filter;return o=o.replace(ge,$),+t!=0?(this.attrs.blur=t,r.filter=o+U+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",r.margin=u.format("-{0}px 0 0 -{0}px",O(+t||1.5))):(r.filter=o,r.margin=0,delete this.attrs.blur),this},u._engine.path=function(t,r){var o=G("shape");o.style.cssText=pe,o.coordsize=de+U+de,o.coordorigin=r.coordorigin;var h=new W(o,r),g={fill:"none",stroke:"#000"};t&&(g.path=t),h.type="path",h.path=[],h.Path=$,Ae(h,g),r.canvas&&r.canvas.appendChild(o);var v=G("skew");return v.on=!0,o.appendChild(v),h.skew=v,h.transform($),h},u._engine.rect=function(t,r,o,h,g,v){var P=u._rectPath(r,o,h,g,v),k=t.path(P),M=k.attrs;return k.X=M.x=r,k.Y=M.y=o,k.W=M.width=h,k.H=M.height=g,M.r=v,M.path=P,k.type="rect",k},u._engine.ellipse=function(t,r,o,h,g){var v=t.path();return v.attrs,v.X=r-h,v.Y=o-g,v.W=2*h,v.H=2*g,v.type="ellipse",Ae(v,{cx:r,cy:o,rx:h,ry:g}),v},u._engine.circle=function(t,r,o,h){var g=t.path();return g.attrs,g.X=r-h,g.Y=o-h,g.W=g.H=2*h,g.type="circle",Ae(g,{cx:r,cy:o,r:h}),g},u._engine.image=function(t,r,o,h,g,v){var P=u._rectPath(o,h,g,v),k=t.path(P).attr({stroke:"none"}),M=k.attrs,V=k.node,Z=V.getElementsByTagName("fill")[0];return M.src=r,k.X=M.x=o,k.Y=M.y=h,k.W=M.width=g,k.H=M.height=v,M.path=P,k.type="image",Z.parentNode==V&&V.removeChild(Z),Z.rotate=!0,Z.src=r,Z.type="tile",k._.fillpos=[o,h],k._.fillsize=[g,v],V.appendChild(Z),Se(k,1,1,0,0,0),k},u._engine.text=function(t,r,o,h){var g=G("shape"),v=G("path"),P=G("textpath");r=r||0,o=o||0,h=h||"",v.v=u.format("m{0},{1}l{2},{1}",O(r*de),O(o*de),O(r*de)+1),v.textpathok=!0,P.string=C(h),P.on=!0,g.style.cssText=pe,g.coordsize=de+U+de,g.coordorigin="0 0";var k=new W(g,t),M={fill:"#000",stroke:"none",font:u._availableAttrs.font,text:h};k.shape=g,k.path=v,k.textpath=P,k.type="text",k.attrs.text=C(h),k.attrs.x=r,k.attrs.y=o,k.attrs.w=1,k.attrs.h=1,Ae(k,M),g.appendChild(P),g.appendChild(v),t.canvas.appendChild(g);var V=G("skew");return V.on=!0,g.appendChild(V),k.skew=V,k.transform($),k},u._engine.setSize=function(t,r){var o=this.canvas.style;return this.width=t,this.height=r,t==+t&&(t+="px"),r==+r&&(r+="px"),o.width=t,o.height=r,o.clip="rect(0 "+t+" "+r+" 0)",this._viewBox&&u._engine.setViewBox.apply(this,this._viewBox),this},u._engine.setViewBox=function(t,r,o,h,g){u.eve("raphael.setViewBox",this,this._viewBox,[t,r,o,h,g]);var v,P,k=this.getSize(),M=k.width,V=k.height;return g&&(o*(v=V/h)<M&&(t-=(M-o*v)/2/v),h*(P=M/o)<V&&(r-=(V-h*P)/2/P)),this._viewBox=[t,r,o,h,!!g],this._viewBoxShift={dx:-t,dy:-r,scale:k},this.forEach(function(Z){Z.transform("...")}),this},u._engine.initWin=function(t){var r=t.document;r.styleSheets.length<31?r.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):r.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!r.namespaces.rvml&&r.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),G=function(o){return r.createElement("<rvml:"+o+' class="rvml">')}}catch(o){G=function(h){return r.createElement("<"+h+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},u._engine.initWin(u._g.win),u._engine.create=function(){var t=u._getContainer.apply(0,arguments),r=t.container,o=t.height,h=t.width,g=t.x,v=t.y;if(!r)throw new Error("VML container not found.");var P=new u._Paper,k=P.canvas=u._g.doc.createElement("div"),M=k.style;return g=g||0,v=v||0,h=h||512,o=o||342,P.width=h,P.height=o,h==+h&&(h+="px"),o==+o&&(o+="px"),P.coordsize=216e5+U+216e5,P.coordorigin="0 0",P.span=u._g.doc.createElement("span"),P.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",k.appendChild(P.span),M.cssText=u.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",h,o),r==1?(u._g.doc.body.appendChild(k),M.left=g+"px",M.top=v+"px",M.position="absolute"):r.firstChild?r.insertBefore(k,r.firstChild):r.appendChild(k),P.renderfix=function(){},P},u.prototype.clear=function(){u.eve("raphael.clear",this),this.canvas.innerHTML=$,this.span=u._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},u.prototype.remove=function(){for(var t in u.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]=typeof this[t]=="function"?u._removedFactory(t):null;return!0};var l=u.st;for(var n in i)i[d](n)&&!l[d](n)&&(l[n]=function(t){return function(){var r=arguments;return this.forEach(function(o){o[t].apply(o,r)})}}(n))}}.apply(b,f))===void 0||(I.exports=B)}])})}),J1=G1(Y1),Lt=J1;var T={};T.Common={nodeIdIncrement:0,activeNode:0,roundFloat:function(x,p){for(var I=0,b=1;I<p;)b*=10,I++;return Math.round(x*b)/b},apply:function(x,p){if(x&&typeof p=="object")for(var I in p)x[I]=p[I];return x},addRaphEventHandler:function(x,p,I,b){try{x[p](function(E,f){return function(B,u){var d=f;d.e=B,E(d)}}(I,b))}catch(E){}},isInteger:function(x){return!isNaN(parseInt(x))},isXMLSerializerAvailable:function(){return typeof XMLSerializer=="function"},createSvgEl:function(x,p){if(x=document.createElementNS("http://www.w3.org/2000/svg",x),p)for(var I in p)p.hasOwnProperty(I)&&x.setAttribute(I,String(p[I]));return x},createGradientEl:function(x,p,I){if(p.type!="radialGradient")return!1;var b=T.Common.createSvgEl("radialGradient",{id:x,gradientUnits:"userSpaceOnUse",cx:I[0],cy:I[1],r:I[2],fx:I[0],fy:I[1]});if(p.stop)for(var E=p.stop,f=0;f<E.length;f++){var B=E[f];B["@attributes"]?b.appendChild(T.Common.createSvgEl("stop",B["@attributes"])):(B._attributes&&delete B._attributes,B._children&&delete B._children,B.__proto__&&delete B.__proto__,b.appendChild(T.Common.createSvgEl("stop",B)))}return b},setCssStyle:function(x,p){var I=document.styleSheets[0];I.addRule?I.addRule(x,p):I.insertRule&&I.insertRule(x+" { "+p+" }",I.cssRules.length)}};T.PhyloCanvas=function(){var x,p,I,b,E;return function(f,B,u,d,C){if(this.getNewickObject=function(){return I},this.clear=function(){},this.scale=function(H){b.svg.scale(H)},this.getSvg=function(){return b},this.getPhylogram=function(){return x},this.getSvgSource=function(){if(Lt.svg&&T.Common.isXMLSerializerAvailable()){var H=new XMLSerializer;return H.serializeToString(b.svg.canvas)}else return!1},typeof f=="object")if(f.xml){if(f.fileSource)var N=f.xml;else var N=bt.textToXML(f.xml);N=bt.xmlToJSON(N),E=new T.PhyloCanvas.PhyloxmlParse(N)}else if(f.phyloxml){if(f.fileSource)var N=f.phyloxml;else var N=bt.textToXML(f.phyloxml);N=bt.xmlToJSON(N),E=new T.PhyloCanvas.PhyloxmlParse(N)}else if(f.nexml){if(f.fileSource)var N=f.nexml;else var N=bt.textToXML(f.nexml);N=bt.xmlToJSON(N),E=new T.PhyloCanvas.NexmlParse(N,f)}else f.json?E=new T.PhyloCanvas.PhyloxmlParse(f.json):f.newick?E=new T.PhyloCanvas.NewickParse(f.newick):f.nexmlJson?E=new T.PhyloCanvas.NexmlJsonParse(f):alert("Please set the format of input data");else E=new T.PhyloCanvas.NewickParse(f);p=B,b=new T.PhyloCanvas.Render.SVG(p,u,d),C=="circular"?x=new T.PhyloCanvas.Render.CircularPhylogram(b,E):x=new T.PhyloCanvas.Render.Phylogram(b,E)}}();T.PhyloCanvas.prototype={};T.PhyloCanvas.Node=function(){return function(x,p){this.id=T.Common.nodeIdIncrement+=1,this.level=0,this.len=0,this.newickLen=0,this.name="",this.type="",this.chart={},this.img=[],x&&T.Common.apply(this,x),this._countAllChildren=!1,this._countImmediateChildren=!1,this._midBranchPosition=!1,this.children=new Array,p&&p.children.push(this)}}();T.PhyloCanvas.Node.prototype={getCountAllChildren:function(){if(this._countAllChildren!==!1)return this._countAllChildren;var x=0;for(var p in this.children)if(T.Common.isInteger(p)){var I=this.children[p];I.children&&I.children.length>0?x+=I.getCountAllChildren():x++}return this._countAllChildren=x,x},getCountImmediateChildren:function(){if(this._countImmediateChildren!==!1)return this._countImmediateChildren;var x=0;for(var p in this.children){var I=this.children[p];x+=I.length}return this._countImmediateChildren=x,x},getMidbranchPosition:function(x){if(this._midBranchPosition!==!1)return this._midBranchPosition;for(var p=[0,0],I=0;I<this.children.length;I++){var b=this.children[I];b.children&&b.children.length>0?I==0&&x?(p[0]=b.getMidbranchPosition(!0),p[1]+=b.getCountAllChildren()-1):I==0?(p[0]=b.getMidbranchPosition(),p[1]+=b.getCountAllChildren()):I==this.children.length-1?p[1]+=b.getMidbranchPosition():p[1]+=b.getCountAllChildren():I==0&&x?p[0]=0:I==0?(p[0]=1,p[1]+=1):(I==this.children.length-1,p[1]+=1)}return this._midBranchPosition=p[1]>=p[0]?(p[1]+p[0])/2:p[0],this._midBranchPosition}};T.PhyloCanvas.NewickParse=function(){var x,p,I,b=0,E=0,f,B,u=function(q){for(var L=new T.PhyloCanvas.Node;p!==")"&&p!==",";)p===":"?(H(),L.len=T.Common.roundFloat(C(),4),L.len==0&&(L.len=1e-4)):p==="'"||p==='"'?(L.type="label",L.name=N(p)):(L.type="label",L.name=C());return L.level=q.level+1,L},d=function(q){var L=new T.PhyloCanvas.Node;for(q&&(L.level=q.level+1);p!==")";)H(),p==="("?L.children.push(d(L)):L.children.push(u(L));return H(),p!==":"&&p!==")"&&p!==","&&p!==";"&&(L.type="label",L.name=C()),p===":"&&(H(),L.len=T.Common.roundFloat(C(),4),L.len==0&&(L.len=1e-4),L.type="stem"),L},C=function(){for(var q="";p!==":"&&p!==")"&&p!==","&&p!==";";)q+=p,H();return q},N=function(q){for(var L="";p!==q;)L+=p,H();return L},H=function(){return p=x.charAt(I),I+=1,p},O=function(q,L){if(q.children&&q.children.length)for(var F=0;F<q.children.length;F++){var J=q.children[F];J.len===0&&(J.len=1),J.newickLen=T.Common.roundFloat(J.len+q.newickLen,4),J.level>b&&(b=J.level),J.newickLen>E&&(E=J.newickLen),J.children.length>0&&O(J,q)}return q};return function(q){this.getRoot=function(){return f},this.getLevels=function(){return b},this.getNewickLen=function(){return E},this.getValidate=function(){return B},b=0,E=0,x=q,I=0,H(),f=d(),f=O(f)}}();T.PhyloCanvas.NewickParse.prototype={};T.PhyloCanvas.PhyloxmlParse=function(){var x=0,p=0,I,b,E=function(u,d){var C=new T.PhyloCanvas.Node;if(d&&(C.level=d.level+1),u.clade&&u.clade.length)for(var N=0;N<u.clade.length;N++){var H=u.clade[N];C.children.push(E(H,C))}if(u.branch_length&&(typeof u.branch_length=="object"&&(u.branch_length=u.branch_length[0].Text),C.len=T.Common.roundFloat(u.branch_length,4),C.len==0&&(C.len=1e-4)),u.color?(C.red=u.color[0].red[0].Text,C.green=u.color[0].green[0].Text,C.blue=u.color[0].blue[0].Text):(C.red=0,C.green=0,C.blue=0),u.property&&u.property[0].applies_to=="node"&&u.property[0].ref=="style:font_color"&&(C.font_color_hex=u.property[0].Text),u.name?(C.type="label",C.name=u.name[0].Text,u.name[0]&&u.name[0].style&&(C.style=u.name[0].style),u.name[0]&&u.name[0].bgStyle&&(C.bgStyle=u.name[0].bgStyle)):u.confidence&&(C.name=u.confidence[0].Text),u.sequence&&u.sequence[0]&&u.sequence[0].name&&u.sequence[0].name[0]&&u.sequence[0].name[0].Text&&(C.sequenceName=u.sequence[0].name[0].Text),u.taxonomy&&u.taxonomy[0]&&(u.taxonomy[0].scientific_name&&u.taxonomy[0].scientific_name[0]&&u.taxonomy[0].scientific_name[0].Text&&(C.taxonomyScientificName=u.taxonomy[0].scientific_name[0].Text),u.taxonomy[0].common_name&&u.taxonomy[0].common_name[0]&&u.taxonomy[0].common_name[0].Text&&(C.taxonomyCommonName=u.taxonomy[0].common_name[0].Text)),u.sequence&&u.sequence[0]&&u.sequence[0].accession&&u.sequence[0].accession[0]&&u.sequence[0].accession[0].Text&&(C.sequenceAccession=u.sequence[0].accession[0].Text),u.point&&(C.LatLong=[u.point[0].lat[0].Text,u.point[0].long[0].Text]),C.name||(C.sequenceName?C.name=C.sequenceName:C.taxonomyScientificName?C.name=C.taxonomyScientificName:C.taxonomyCommonName?C.name=C.taxonomyCommonName:C.sequenceAccession&&(C.name=C.sequenceAccession),C.name&&(C.type="label")),u.annotation&&(u.annotation[0]&&u.annotation[0].desc&&u.annotation[0].desc[0]&&u.annotation[0].desc[0].Text&&(C.description=u.annotation[0].desc[0].Text),u.annotation[0]&&u.annotation[0].uri&&u.annotation[0].uri[0]&&u.annotation[0].uri[0].Text&&(C.uri=u.annotation[0].uri[0].Text),u.annotation[0]&&u.annotation[0].img))for(var N in u.annotation[0].img)T.Common.isInteger(N)&&(C.img[N]=u.annotation[0].img[N].Text);if(u.chart&&u.chart[0])for(var N in u.chart[0])N!="Text"&&N!="_children"&&(C.chart[N]=u.chart[0][N][0].Text);return C&&C.level>1&&(C.len||(b="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),C},f=function(u,d){if(u.children&&u.children.length)for(var C=0;C<u.children.length;C++){var N=u.children[C];N.newickLen=Math.round((N.len+u.newickLen)*1e4)/1e4,N.level>x&&(x=N.level),N.newickLen>p&&(p=N.newickLen),N.children.length>0&&f(N,u)}return u},B=function(u,d){for(var C in u)C!="_children"&&C!="Text"&&(C=="rectangular"||C=="circular"?B(u[C][0],C):(T.PhyloCanvas.Render.Parameters[C]||(T.PhyloCanvas.Render.Parameters[C]={}),T.PhyloCanvas.Render.Parameters.set(C,u[C][0].Text,d)))};return function(u){if(this.getRoot=function(){return I},this.getLevels=function(){return x},this.getNewickLen=function(){return p},this.getValidate=function(){return b},u.phylogeny&&u.phylogeny[0]&&u.phylogeny[0].clade&&(I=E(u.phylogeny[0].clade[0])),u.phylogeny&&u.phylogeny[0]&&u.phylogeny[0].render&&u.phylogeny[0].render[0]){var d=u.phylogeny[0].render[0];if(d&&d.styles){var C=d.styles[0];for(var N in C)if(N!="_children"&&N!="Text")if(C[N][0].type&&C[N][0].type=="radialGradient"&&Lt.svg)C[N][0].name=N,T.PhyloCanvas.Render.Style[N]=C[N][0],T.PhyloCanvas.Render.Style.jsphylosvgGradientList||(T.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),T.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(N);else{T.PhyloCanvas.Render.Style[N]||(T.PhyloCanvas.Render.Style[N]={});for(var H in C[N][0])H!="_attributes"&&H!="_children"&&H!="type"&&(T.PhyloCanvas.Render.Style[N][H.replace("_","-")]=C[N][0][H])}}if(d&&d.parameters&&B(d.parameters[0]),d&&d.charts){var O=d.charts[0];for(var N in O)if(N!="_children"&&N!="Text")for(var H in O[N])O[N][H].type=="binary"?(O[N][H].chart=N,T.PhyloCanvas.Render.Parameters.binaryCharts.push(O[N][H])):O[N][H].type=="integratedBinary"?(O[N][H].chart=N,T.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(O[N][H])):O[N][H].type=="bar"&&(O[N][H].chart=N,T.PhyloCanvas.Render.Parameters.barCharts.length==1&&T.PhyloCanvas.Render.Parameters.barCharts.shift(),T.PhyloCanvas.Render.Parameters.barCharts.push(O[N][H]))}}I=f(I)}}();T.PhyloCanvas.PhyloxmlParse.prototype={};T.PhyloCanvas.NexmlParse=function(){var x=0,p=0,I,b,E,f,B=function(C,N,H){var O=new T.PhyloCanvas.Node;H&&(O.level=H.level+1);for(var q=0;q<E.length;q++)if(E[q].source==C.id)for(var L=0;L<f.length;L++)E[q].target==f[L].id&&O.children.push(B(f[L],E[q].length,O));if(O&&O.level>0&&!O.len&&(O.len=1),N&&(O.len=T.Common.roundFloat(N,4),O.len==0&&(O.len=1e-4)),C.label&&(O.type="label",O.name=C.label,C.style&&(O.style=C.style)),C.color){let F=C.color.replace(/[a-z%\s\(\)]/g,"").split(",");O.red=F[0],O.green=F[1],O.blue=F[2]}else{let F=T.PhyloCanvas.Render.Style.line.stroke.replace(/[a-z%\s\(\)]/g,"").split(",");O.red=F[0],O.green=F[1],O.blue=F[2]}return O},u=function(C,N){if(C.children&&C.children.length)for(var H=0;H<C.children.length;H++){var O=C.children[H];O.newickLen=Math.round((O.len+C.newickLen)*1e4)/1e4,O.level>x&&(x=O.level),O.newickLen>p&&(p=O.newickLen),O.children.length>0&&u(O,C)}return C},d=function(C,N){for(var H in C)H!="_children"&&H!="Text"&&(H=="rectangular"||H=="circular"?d(C[H][0],H):(T.PhyloCanvas.Render.Parameters[H]||(T.PhyloCanvas.Render.Parameters[H]={}),T.PhyloCanvas.Render.Parameters.set(H,C[H][0].Text,N)))};return function(C,N){this.getRoot=function(){return I},this.getLevels=function(){return x},this.getNewickLen=function(){return p},this.getValidate=function(){return b},N.tree&&C.trees[0]&&C.trees[0].tree[N.tree-1]?(E=C.trees[0].tree[N.tree-1].edge,f=C.trees[0].tree[N.tree-1].node):(E=C.trees[0].tree[0].edge,f=C.trees[0].tree[0].node);for(var H=0;H<f.length;H++){var O=0;if(f[H].root&&f[H].root=="true"){I=f[H];break}for(var q=0;q<E.length;q++)E[q].target==f[H].id&&O++;if(O==0){I=f[H];break}}I?(I=B(I),I=u(I)):b="Error. Currently, only rooted NeXML trees are supported."}}();T.PhyloCanvas.NexmlParse.prototype={};T.PhyloCanvas.NexmlJsonParse=function(){var x=0,p=0,I,b,E=[],f=[],B=function(C,N,H){var O=new T.PhyloCanvas.Node;H&&(O.level=H.level+1);for(var q=0;q<E.length;q++)if(E[q].source==C.id)for(var L=0;L<f.length;L++)E[q].target==f[L].id&&O.children.push(B(f[L],E[q].length,O));return N&&(O.len=T.Common.roundFloat(N,4),O.len==0&&(O.len=1e-4)),C.label&&(O.type="label",O.name=C.label,C.accession&&(O.accession=C.accession),C.style&&(O.style=C.style),C.bgStyle&&(O.bgStyle=C.bgStyle)),C.chart&&(O.chart=C.chart),O&&O.level>1&&(O.len||(b="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),O},u=function(C,N){if(C.children&&C.children.length)for(var H=0;H<C.children.length;H++){var O=C.children[H];O.newickLen=Math.round((O.len+C.newickLen)*1e4)/1e4,O.level>x&&(x=O.level),O.newickLen>p&&(p=O.newickLen),O.children.length>0&&u(O,C)}return C},d=function(C,N){for(var H in C)H!="_children"&&H!="Text"&&(H=="rectangular"||H=="circular"?d(C[H],H):(T.PhyloCanvas.Render.Parameters[H]||(T.PhyloCanvas.Render.Parameters[H]={}),T.PhyloCanvas.Render.Parameters.set(H,C[H],N)))};return function(C){this.getRoot=function(){return I},this.getLevels=function(){return x},this.getNewickLen=function(){return p},this.getValidate=function(){return b};var N=C.nexmlJson.nexml,H=N.render;if(H&&H.styles){var O=H.styles;for(var q in O)if(q!="_children"&&q!="Text")if(O[q]["@attributes"].type&&O[q]["@attributes"].type=="radialGradient"&&Lt.svg)O[q].name=q,O[q].type=O[q]["@attributes"].type,T.PhyloCanvas.Render.Style[q]=O[q],T.PhyloCanvas.Render.Style.jsphylosvgGradientList||(T.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),T.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(q);else{T.PhyloCanvas.Render.Style[q]||(T.PhyloCanvas.Render.Style[q]={});for(var L in O[q]["@attributes"])L!="_attributes"&&L!="_children"&&L!="type"&&(T.PhyloCanvas.Render.Style[q][L.replace("_","-")]=O[q]["@attributes"][L])}}if(H&&H.parameters&&d(H.parameters),H&&H.charts){var F=H.charts;for(var q in F)F[q]["@attributes"].chart=q,F[q]["@attributes"].type=="binary"?T.PhyloCanvas.Render.Parameters.binaryCharts.push(F[q]["@attributes"]):F[q]["@attributes"].type=="integratedBinary"?T.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(F[q]["@attributes"]):F[q]["@attributes"].type=="bar"&&T.PhyloCanvas.Render.Parameters.barCharts.push(F[q]["@attributes"])}if(C.tree&&N.trees[0]&&N.trees[0].tree[C.tree-1])E=N.trees[0].tree[C.tree-1].edge,f=N.trees[0].tree[C.tree-1].node;else{for(var q=0;q<N.trees.tree.edge.length;q++)E.push(N.trees.tree.edge[q]["@attributes"]);for(var q=0;q<N.trees.tree.node.length;q++){var J=N.trees.tree.node[q]["@attributes"];J.label&&(J.chart=N.trees.tree.node[q].chart),f.push(J)}}for(var q=0;q<f.length;q++)f[q].root&&f[q].root=="true"&&(I=f[q]);I?(I=B(I),I=u(I)):b="Error. Currently, only rooted NeXML trees are supported."}}();T.PhyloCanvas.NexmlParse.prototype={};T.PhyloCanvas.Render={};T.PhyloCanvas.Render.Style={line:{stroke:"rgb(0,0,0)","stroke-width":1},text:{"font-family":"Verdana","font-size":12,"text-anchor":"start"},path:{stroke:"rgb(0,0,0)","stroke-width":1},connectedDash:{stroke:"rgb(200,200,200)","stroke-dasharray":". "},textSecantBg:{fill:"#EEE",stroke:"#DDD"},highlightedEdgeCircle:{fill:"black",stroke:"black"},barChart:{fill:"#003300",stroke:"#DDD"},getStyle:function(x,p){return this[x]?this[x]:this[p]}};T.PhyloCanvas.Render.Parameters={jsOverride:0,Rectangular:{bufferX:200,paddingX:10,paddingY:20,bufferInnerLabels:10,bufferOuterLabels:5,minHeightBetweenLeaves:10,alignPadding:0,alignRight:!1,showScaleBar:!1},Circular:{bufferRadius:.33,bufferAngle:20,initStartAngle:160,innerCircleRadius:0,minHeightBetweenLeaves:5,bufferInnerLabels:2,bufferOuterLabels:5},binaryCharts:[],integratedBinaryCharts:[],barCharts:[],binaryChartBufferInner:5,binaryChartBufferSiblings:.01,binaryChartThickness:15,binaryChartDisjointed:!1,barChartBufferInner:3,barChartHeight:50,barChartWidth:.5,set:function(x,p,I){this.jsOverride||(I?I=="circular"?this.Circular[x]=parseFloat(p):I=="rectangular"&&(this.Rectangular[x]=parseFloat(p)):this[x]=parseFloat(p))}};T.PhyloCanvas.Render.Line=function(){return function(x,p,I,b,E,f,B,u){this.type="line",this.attr=T.PhyloCanvas.Render.Style.line,this.attr.stroke=["rgb(",E,",",f,",",B,")"].join(""),this.x1=x,this.x2=p,this.y1=I,this.y2=b,u&&(T.Common.apply(this,u),u.attr&&(this.attr=u.attr))}}();T.PhyloCanvas.Render.Text=function(){return function(x,p,I,b){this.type="text",this.attr=T.PhyloCanvas.Render.Style.text,this.x=x,this.y=p,this.text=I,b&&(T.Common.apply(this,b),b.attr&&(this.attr=b.attr))}}();T.PhyloCanvas.Render.Path=function(){var x=T.PhyloCanvas.Render.Style.path;return function(p,I){this.type="path",this.attr=T.PhyloCanvas.Render.Style.path,this.path=p,I&&(T.Common.apply(this,I),I.attr&&(this.attr=I.attr))}}();T.PhyloCanvas.Render.Circle=function(){return function(x,p,I,b){this.type="circle",this.x=x,this.y=p,this.radius=I,b&&(T.Common.apply(this,b),b.attr&&(this.attr=b.attr))}}();T.PhyloCanvas.Render.SVG=function(){var x,p;return function(I,b,E){x=I,this.canvasSize=[b,E],this.svg=Lt(I,this.canvasSize[0],this.canvasSize[1])}}();T.PhyloCanvas.Render.SVG.prototype={render:function(){for(var x=this.phylogramObject.getDrawInstructs(),p=0;p<x.length;p++)if(x[p].type=="line")var I=this.svg.path(["M",x[p].x1,x[p].y1,"L",x[p].x2,x[p].y2]).attr(T.PhyloCanvas.Render.Style.line);else if(x[p].type=="path")var b=this.svg.path(x[p].path).attr(x[p].attr);else if(x[p].type=="circle")var b=this.svg.circle(x[p].x,x[p].y,x[p].radius).attr({stroke:"black",fill:"black"});else{var E=this.svg.text(x[p].x,x[p].y,x[p].text).attr(T.PhyloCanvas.Render.Style.text);x[p].attr&&E.attr(x[p].attr),x[p].rotate&&E.rotate(x[p].rotate);var f=E.getBBox(),B=Math.sqrt(f.height*f.height+f.width*f.width)}},draw:function(x){var p,I;if(x.type=="line")p=this.svg.path(["M",x.x1,x.y1,"L",x.x2,x.y2]).attr(T.PhyloCanvas.Render.Style.line);else if(x.type=="path")p=this.svg.path(x.path).attr(x.attr);else if(x.type=="circle")p=this.svg.circle(x.x,x.y,x.radius).attr({stroke:"black",fill:"black"});else if(x.type=="text"){p=this.svg.text(x.x,x.y,x.text).attr(T.PhyloCanvas.Render.Style.text),x.attr&&p.attr(x.attr),x.rotate&&p.rotate(x.rotate);var b=p.getBBox();I=Math.sqrt(b.height*b.height+b.width*b.width)}return[p,I]}};T.PhyloCanvas.Render.Phylogram=function(){var x,p=T.PhyloCanvas.Render.Parameters.Rectangular,I,b,E,f,B,u,d=!0,C=0,N=0,H,O,q,L,F,J,se,U,$,oe,he,ge,j=[],pe=function(G){return G+Math.round(G/4)},de=function(G,_e,Ae,ee){return["M",G,_e,"L",Ae,_e,"L",Ae,ee,"L",G,ee,"Z"]},D=function(G,_e){if(G.len&&d==!1&&G.children.length==0&&(C=T.Common.roundFloat(C+f,4)),G.children.length>0){var Ae=[],ee,W,i,l,n,t,r;if(G.len&&(ee=_e,W=_e=T.Common.roundFloat(_e+E*G.len,4),i=C+G.getMidbranchPosition(d)*f,l=i,n=G.red,t=G.green,r=G.blue,x.draw(new T.PhyloCanvas.Render.Line(ee,W,i,l,n,t,r))),G.name){var o={};if(o=T.PhyloCanvas.Render.Style.getStyle("bootstrap","text"),G.font_color_hex?o.fill=G.font_color_hex:o.fill="#000000",G.uri&&(o.href=G.uri),G.description&&(o.title=G.description),G.level==0)var h=C+G.getMidbranchPosition(d)*f;else var h=l;x.draw(new T.PhyloCanvas.Render.Text((W||_e)+5,h,G.name,{attr:o}))}if(G.children&&G.children.length)for(var g=0;g<G.children.length;g++){var v=G.children[g];Ae.push(D(v,_e))}for(var P=[],g=0;g<Ae.length;g++)Ae[g][0]&&P.push(Ae[g][0]),Ae[g][1]&&P.push(Ae[g][1]);for(var k=Math.min.apply(null,P),M=Math.max.apply(null,P),V=(k+M)/2,Z="",ne="",ie="",fe=0,g=0;g<G.children.length;++g){var xe=G.children[g];if(g==0)Z=xe.red,ne=xe.green,ie=xe.blue;else if(Z==xe.red&&ne==xe.green&&ie==xe.blue)fe=1;else{fe=0;break}}fe==0?T.PhyloCanvas.Render.Style.line.stroke="black":(n=G.children[0].red,t=G.children[0].green,r=G.children[0].blue,T.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",t,",",r,")"].join("")),G.children.length==2?(n=G.children[0].red,t=G.children[0].green,r=G.children[0].blue,T.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",t,",",r,")"].join(""),x.draw(new T.PhyloCanvas.Render.Path(["M",_e+1e-4,k,"L",_e,k,"L",_e,V],{attr:T.PhyloCanvas.Render.Style.line})),n=G.children[1].red,t=G.children[1].green,r=G.children[1].blue,T.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",t,",",r,")"].join(""),x.draw(new T.PhyloCanvas.Render.Path(["M",_e,V,"L",_e,M,"L",_e+1e-4,M],{attr:T.PhyloCanvas.Render.Style.line}))):x.draw(new T.PhyloCanvas.Render.Path(["M",_e+1e-4,k,"L",_e,k,"L",_e,M,"L",_e+1e-4,M],{attr:T.PhyloCanvas.Render.Style.line}))}else{if(ee=_e,W=T.Common.roundFloat(_e+E*G.len,2),i=C,l=C,n=G.red,t=G.green,r=G.blue,G.y=C,j.push(G),x.draw(new T.PhyloCanvas.Render.Line(ee,W,i,l,n,t,r)),p.alignRight&&x.draw(new T.PhyloCanvas.Render.Path(["M",W,i,"L",p.alignPadding+B,l],{attr:T.PhyloCanvas.Render.Style.connectedDash})),G.name){var o={};G.style&&(o=T.PhyloCanvas.Render.Style.getStyle(G.style,"text")),G.font_color_hex?o.fill=G.font_color_hex:o.fill="#000000",o["text-anchor"]="start",G.uri&&(o.href=G.uri),G.description&&(o.title=G.description);var we=x.draw(new T.PhyloCanvas.Render.Text(p.alignRight?B+p.bufferInnerLabels+p.alignPadding:W+p.bufferInnerLabels,l,G.name,{attr:o}));N=Math.max(we[1],N),T.PhyloCanvas.Render.Parameters.mouseRollOver&&T.Common.addRaphEventHandler(we[0],"mouseover",T.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:x,node:G,x:W,y:l,textEl:we[0]}),T.PhyloCanvas.Render.Parameters.mouseRollOut&&T.Common.addRaphEventHandler(we[0],"mouseout",T.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:x,node:G,x:W,y:l,textEl:we[0]}),T.PhyloCanvas.Render.Parameters.onClickAction&&T.Common.addRaphEventHandler(we[0],"click",T.PhyloCanvas.Render.Parameters.onClickAction,{svg:x,node:G,x:W,y:l,textEl:we[0]})}d&&(d=!1)}return[i,l]},ye=function(){y=C+f,L=0,F=p.showScaleBar*E,x.draw(new T.PhyloCanvas.Render.Line(L,F,y,y)),x.draw(new T.PhyloCanvas.Render.Text((L+F)/2,y-8,p.showScaleBar))},ve=function(G,_e,Ae){for(var ee=(Ae&&Ae.bufferInner?Ae.bufferInner:0)|T.PhyloCanvas.Render.Parameters.binaryChartBufferInner,W=(Ae&&Ae.bufferSiblings?Ae.bufferSiblings*f:0)|(T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?f*T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),i=(Ae&&Ae.thickness?Ae.thickness:0)|T.PhyloCanvas.Render.Parameters.binaryChartThickness,l,n=0;n<j.length;n++){var t=j[n];x.draw(new T.PhyloCanvas.Render.Path(de(G+ee,t.y-f/2+W/2,G+ee+i,t.y+f/2-W/2),{attr:T.PhyloCanvas.Render.Style.getStyle(t.chart[_e],"textSecantBg")}))}return G+ee+i},Se=function(G,_e,Ae){for(var ee=[],W,i=Ae&&Ae.bufferInner?Ae.bufferInner:0|T.PhyloCanvas.Render.Parameters.barChartBufferInner,l=Ae&&Ae.height?Ae.height:0|T.PhyloCanvas.Render.Parameters.barChartHeight,n=Ae&&Ae.width?Ae.width<1?f*Ae.width:Ae.width:0|(T.PhyloCanvas.Render.Parameters.barChartWidth<1?f*T.PhyloCanvas.Render.Parameters.barChartWidth:T.PhyloCanvas.Render.Parameters.barChartWidth),t=0,r=0;r<j.length;r++)ee.push(j[r].chart[_e]);W=Math.max.apply(null,ee),t=T.Common.roundFloat(l/W,4);for(var r=0;r<j.length;r++){var o=j[r];x.draw(new T.PhyloCanvas.Render.Path(de(G+i,o.y-n/2,G+i+t*o.chart[_e],o.y+n/2),{attr:T.PhyloCanvas.Render.Style.getStyle(o.chart[_e],"barChart")}))}return G+i+l};return function(G,_e){this.getCanvasSize=function(){return[I,b]},this.getRoot=function(){return _e.getRoot()},_e.getValidate()&&x.draw(0,0,_e.getValidate()),d=!0,x=G;var Ae=_e.getRoot(),ee=_e.getNewickLen();if(I=x.canvasSize[0],b=x.canvasSize[1],oe=p.bufferX,he=p.paddingX,ge=p.paddingY,u=p.minHeightBetweenLeaves,C=ge,E=Math.round((I-oe-he*2)/ee),f=Math.round((b-ge*2)/(p.showScaleBar?Ae.getCountAllChildren():Ae.getCountAllChildren()-1)),f<u&&(f=u),B=Math.round(I-oe-he*2),(T.PhyloCanvas.Render.Parameters.binaryCharts.length||T.PhyloCanvas.Render.Parameters.barCharts.length)&&(p.alignRight=!0),D(Ae,he),p.showScaleBar&&ye(),H=B+N+p.bufferInnerLabels,T.PhyloCanvas.Render.Parameters.binaryCharts.length){var W=T.PhyloCanvas.Render.Parameters.binaryCharts;for(var i in W)H=ve(H,W[i].chart,W[i])}if(T.PhyloCanvas.Render.Parameters.barCharts.length){var l=T.PhyloCanvas.Render.Parameters.barCharts;for(var i in l)q=Se(H,l[i].chart,l[i])}j=[],typeof bgLabelsHold!="undefined"&&(bgLabelsHold=[])}}();T.PhyloCanvas.Render.Phylogram.prototype={};T.PhyloCanvas.Render.CircularPhylogram=function(){var x,p=T.PhyloCanvas.Render.Parameters.Circular,I,b,E,f,B,u,d,C=!0,N=0,H,O,q,L=[],F=[],J,se,U,$=0,oe,he=Math.PI/180;function ge(ee,W){return W+=oe,[T.Common.roundFloat(H+ee*Math.sin(W*he),4),T.Common.roundFloat(O+ee*Math.cos(W*he),4)]}function j(ee){var W=D(90-ee-oe);if(W>90&&W<270){W+=180;var i="end"}else var i="start";return[W,i]}function pe(ee,W,i,l){var n=ge(ee,W),t=ge(ee,i),r=[],o,h=0;return Math.abs(D(i-W))>180?o=1:o=-1,l&&l.invertSecant&&(o*=-1,h=1),l&&l.noMove||r.push("M"),r.push(n[0],n[1],"A",ee,ee,0,o<1?0:1,h,t[0],t[1]),r}function de(ee,W,i,l){var n=[],t=ge(W,ee),r=ge(i,ee);return l&&l.noMove||n.push("M"),n.push(t[0],t[1],"L",r[0],r[1]),n}function D(ee){for(;ee>360||ee<0;)ee>360?ee-=360:ee<0&&(ee+=360);return ee}function ye(ee,W,i,l){if(!W&&ee.length>1)var l=ee[3],i=ee[2],W=ee[1],ee=ee[0];var n=Se("M",pe(ee,i,l,{noMove:1,invertSecant:0}),"L",pe(W,l,i,{noMove:1,invertSecant:1}),"Z");return n}function ve(ee,W){if(W=W,ee.len&&(C?N=se||1:ee.children.length==0&&(N=T.Common.roundFloat(N+B,4))),ee.children.length>0){var i=[],l,n,t,r;if(l=W,n=W+=T.Common.roundFloat(f*ee.len,4),ee.name,ee.children&&ee.children.length)for(var o=0;o<ee.children.length;o++){var h=ee.children[o],g=ve(h,W);g>0&&i.push(g)}var v=T.Common.roundFloat(Math.min.apply(null,i),4),P=T.Common.roundFloat(Math.max.apply(null,i),4);ee.level!=0&&x.draw(new T.PhyloCanvas.Render.Path(Se("M",ge(W+.01,v),"L",pe(W,v,P,{noMove:!0}),"L",ge(W+.01,P)))),ee.len&&(t=T.Common.roundFloat(v+(P-v)/2,4),x.draw(new T.PhyloCanvas.Render.Path(de(t,l,n))))}else if(ee.y=N,L.push(ee),l=W,n=W=T.Common.roundFloat(W+f*ee.len),t=N,x.draw(new T.PhyloCanvas.Render.Path(de(t,l,n))),x.draw(new T.PhyloCanvas.Render.Path(de(t,n,q),{attr:T.PhyloCanvas.Render.Style.connectedDash})),ee.name){var k=ge(q+p.bufferInnerLabels,t),M=j(t),V=M[0],Z=M[1],ne={};ee.style&&T.Common.apply(ne,T.PhyloCanvas.Render.Style.getStyle(ee.style,"text")),ee.font_color_hex?ne.fill=ee.font_color_hex:ne.fill="#000000",ne["text-anchor"]=Z,ee.uri&&(ne.href=ee.uri),ee.description&&(ne.title=ee.description);var ie=x.draw(new T.PhyloCanvas.Render.Text(k[0],k[1],ee.name,{attr:ne,rotate:[V,k[0],k[1]]}));ee.bgStyle&&F.push([ee.bgStyle,t]);var k=ge(n,t);T.PhyloCanvas.Render.Parameters.mouseRollOver&&T.Common.addRaphEventHandler(ie[0],"mouseover",T.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:x,node:ee,x:k[0],y:k[1],textEl:ie[0]}),T.PhyloCanvas.Render.Parameters.mouseRollOut&&T.Common.addRaphEventHandler(ie[0],"mouseout",T.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:x,node:ee,x:k[0],y:k[1],textEl:ie[0]}),T.PhyloCanvas.Render.Parameters.onClickAction&&T.Common.addRaphEventHandler(ie[0],"click",T.PhyloCanvas.Render.Parameters.onClickAction,{svg:x,node:ee,x:k[0],y:k[1],textEl:ie[0]}),$=Math.max(ie[1],$)}return C&&(C=!1),t}function Se(ee){for(var W=ee,i=1;i<arguments.length;i++)W=W.concat(arguments[i]);return W}function G(){var ee=[];if(F.length>0){if(T.PhyloCanvas.Render.Style.jsphylosvgGradientList)for(var W=0;W<T.PhyloCanvas.Render.Style.jsphylosvgGradientList.length;W++){var i=T.PhyloCanvas.Render.Style.jsphylosvgGradientList[W],l=T.Common.createGradientEl(i,T.PhyloCanvas.Render.Style[i],[H,O,q+$+p.bufferOuterLabels]);x.svg.defs.appendChild(l)}for(var W=0;W<F.length;W++){if(W!=F.length-1&&F[W][0]==F[W+1][0]){F[W+1][2]=F[W][2]?F[W][2]:F[W][1];continue}var ee=ye(q,q+$+p.bufferOuterLabels,F[W][2]?F[W][2]-B/2:F[W][1]-B/2,F[W][1]+B/2),n=T.PhyloCanvas.Render.Style.getStyle(F[W][0],"textSecantBg"),t=x.draw(new T.PhyloCanvas.Render.Path(ee,{attr:n.type?{}:n}));n.type&&n.type=="radialGradient"&&t[0].node.setAttribute("fill","url(#"+n.name+")"),n.type&&n.type=="radialGradient"&&t[0].node.setAttribute("stroke","none"),t[0].toBack()}}var ee=ye(q,q+$+p.bufferOuterLabels,(se||1)-B/2,360-B/2),t=x.draw(new T.PhyloCanvas.Render.Path(ee,{attr:T.PhyloCanvas.Render.Style.textSecantBg}));return t[0].toBack(),q+$+p.bufferOuterLabels}function _e(ee,W,i){for(var l=i&&i.bufferInner?parseFloat(i.bufferInner):T.PhyloCanvas.Render.Parameters.binaryChartBufferInner,n=(i&&i.bufferSiblings?i.bufferSiblings*B:0)|(T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?B*T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),t=i&&i.thickness?parseFloat(i.thickness):T.PhyloCanvas.Render.Parameters.binaryChartThickness,r=(i&&i.disjointed?i.disjointed:!1)|T.PhyloCanvas.Render.Parameters.binaryChartDisjointed,o=i&&i.isInternal?i.isInternal:!1,h=!0,g,v=0;v<L.length;v++){var P=L[v];if((!L[v+1]||P.chart[W]!==L[v+1].chart[W]||r)&&P.chart[W]!="none"){var k=T.PhyloCanvas.Render.Style.getStyle(P.chart[W],"textSecantBg");if(o)var M=[q-l-t,q-l,(g||P.y)-B/2+(h&&!r?0:n/2),P.y+B/2-(v==L.length-1&&!r?0:n/2)];else var M=[ee+l,ee+l+t,(g||P.y)-B/2+(h&&!r?0:n/2),P.y+B/2-(v==L.length-1&&!r?0:n/2)];if(k.label){var V=T.PhyloCanvas.Render.Style.getStyle(k.labelStyle,"text"),Z=ge((M[0]+M[1])/2,(M[2]+M[3])/2),ne=j((M[2]+M[3])/2),ie=D(ne[0]+(V.rotate?parseFloat(V.rotate):0)),fe=D(90-(M[2]+M[3])/2-oe);fe>90&&fe<270&&(ie+=180),V["text-anchor"]||(V["text-anchor"]="middle"),P.font_color_hex?k.fill=P.font_color_hex:k.fill="#000000";var xe=x.draw(new T.PhyloCanvas.Render.Text(Z[0],Z[1],k.label,{attr:V,rotate:ie}));xe[0].toBack()}if(k.borderStyle){var we=T.PhyloCanvas.Render.Style.getStyle(k.borderStyle,"textSecantBg"),be=[q,we.fullsize?M[1]:M[0],M[2],M[3]],Ce=x.draw(new T.PhyloCanvas.Render.Path(ye(be),{attr:we}));Ce[0].toBack()}var Ne=x.draw(new T.PhyloCanvas.Render.Path(ye(M),{attr:k}));Ne[0].toBack(),g=0,h=!1}else g||(g=P.y),P.chart[W]=="none"&&(g=0);h=!1}return o?ee:ee+l+t}function Ae(ee,W,i){for(var l=[],n,t=i&&i.bufferInner?parseFloat(i.bufferInner):T.PhyloCanvas.Render.Parameters.barChartBufferInner,r=i&&i.height?parseFloat(i.height):T.PhyloCanvas.Render.Parameters.barChartHeight?T.PhyloCanvas.Render.Parameters.barChartHeight:0,o=i&&i.width?parseFloat(i.width)<1?B*parseFloat(i.width):parseFloat(i.width):0|(T.PhyloCanvas.Render.Parameters.barChartWidth<1?B*T.PhyloCanvas.Render.Parameters.barChartWidth:T.PhyloCanvas.Render.Parameters.barChartWidth),h=0,g=0;g<L.length;g++)l.push(L[g].chart[W]);n=Math.max.apply(null,l),h=T.Common.roundFloat(r/n,4);for(var g=0;g<L.length;g++){var v=L[g];v.chart[W]>0&&x.draw(new T.PhyloCanvas.Render.Path(ye(ee+t,ee+t+h*v.chart[W],v.y-o/2,v.y+o/2),{attr:T.PhyloCanvas.Render.Style.getStyle(v.chart[W],"barChart")}))}return ee+t+r}return function(ee,W,i){if(this.getCanvasSize=function(){return[I,b]},this.getRoot=function(){return W.getRoot()},W.getValidate()){ee.draw({type:"text",x:0,y:ee.canvasSize[1]/3,text:W.getValidate()});return}x=ee;var l=W.getRoot(),n=W.getNewickLen();if(I=x.canvasSize[0],b=x.canvasSize[1],H=I/2,O=b/2,E=Math.min.apply(null,[I,b]),i=p.bufferRadius>1?p.bufferRadius:T.Common.roundFloat(E*p.bufferRadius,4),se=p.bufferAngle,d=p.innerCircleRadius,u=p.minHeightBetweenLeaves,oe=p.initStartAngle,q=Math.round((E-i-d)/2),f=(q-d)/n,B=T.Common.roundFloat((360-se)/l.getCountAllChildren(),4),ve(l,d),U=q+$+p.bufferOuterLabels,T.PhyloCanvas.Render.Parameters.integratedBinaryCharts.length){var t=T.PhyloCanvas.Render.Parameters.integratedBinaryCharts;for(var r in t){var o=t[r].bufferInner?t[r].bufferInner:T.PhyloCanvas.Render.Parameters.binaryChartBufferInner,h=t[r].thickness?t[r].thickness:T.PhyloCanvas.Render.Parameters.binaryChartThickness;U=_e(U-h-o,t[r].chart,t[r])}}if(U=G(),T.PhyloCanvas.Render.Parameters.binaryCharts.length){var g=T.PhyloCanvas.Render.Parameters.binaryCharts;for(var r in g)U=_e(U,g[r].chart,g[r])}if(T.PhyloCanvas.Render.Parameters.barCharts.length){var v=T.PhyloCanvas.Render.Parameters.barCharts;for(var r in v)U=Ae(U,v[r].chart,v[r])}L=[],F=[]}}();T.PhyloCanvas.Render.CircularPhylogram.prototype={};var bt=function(){var x=function(b){if(!!b&&typeof b=="object"){let E=function(){};return E.prototype=b,new E}},p=function(b){var E="";!!b&&typeof b=="string"&&(E=b);var f=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return f.test(E)},I={xmlToJSON:function(b){try{let d=function(q){return q.replace(/^\s+|\s+$/gm,"")},C=function(q){var L=/-/g,F=String(q).replace(L,"_");return F},N=function(q,L){if(L.attributes.length>0){var F=L.attributes.length-1,J;q._attributes=[];do J=String(C(L.attributes[F].name)),q._attributes.push(J),q[J]=d(L.attributes[F].value);while(F--)}},H=function(q){q.getNodeByAttribute=function(L,F){if(this.length>0){var J,se=this.length-1;try{do if(J=this[se],J[L]==F)return J;while(se--)}catch(U){return!1}return!1}},q.contains=function(L,F){if(this.length>0){var J=this.length-1;try{do if(this[J][L]==F)return!0;while(J--)}catch(se){return!1}return!1}},q.indexOf=function(L,F){var J=-1;if(this.length>0){var se=this.length-1;try{do this[se][L]==F&&(J=se);while(se--)}catch(U){return-1}return J}},q.SortByAttribute=function(L,F){if(this.length){let J=function(U,$){var oe=U[$];return oe=p(oe)?parseFloat(oe):oe,oe},se=function(U,$){var oe=0,he,ge;return he=J(U,L),ge=J($,L),he<ge?oe=-1:ge<he&&(oe=1),F&&(oe=F.toUpperCase()=="DESC"?0-oe:oe),oe};this.sort(se)}},q.SortByValue=function(L){if(this.length){let F=function(se){var U=se.Text;return U=p(U)?parseFloat(U):U,U},J=function(se,U){var $=0,oe,he;return oe=F(se),he=F(U),oe<he?$=-1:he<oe&&($=1),L&&($=L.toUpperCase()=="DESC"?0-$:$),$};this.sort(J)}},q.SortByNode=function(L,F){if(this.length){let J=function(U,$){var oe=U[$][0].Text;return oe=p(oe)?parseFloat(oe):oe,oe},se=function(U,$){var oe=0,he,ge;return he=J(U,L),ge=J($,L),he<ge?oe=-1:ge<he&&(oe=1),F&&(oe=F.toUpperCase()=="DESC"?0-oe:oe),oe};this.sort(se)}}},O=function(q,L){var F,J,se,U="";if(!L)return null;if(L.attributes.length>0&&N(q,L),q.Text="",L.hasChildNodes()){var $=L.childNodes.length-1,oe=0;do switch(J=L.childNodes[oe],J.nodeType){case 1:q._children=[],F=J.localName?J.localName:J.baseName,F=C(F),U!=F&&q._children.push(F),q[F]||(q[F]=[]),se={},q[F].push(se),J.attributes.length>0&&N(se,J),q[F].contains||H(q[F]),U=F,J.hasChildNodes()&&O(se,J);break;case 3:q.Text+=d(J.nodeValue);break;case 4:q.Text+=J.text?d(J.text):d(J.nodeValue);break}while(oe++<$)}};if(!b)return null;var E={};E.typeOf="JSXBObject";var f=b.nodeType==9?b.documentElement:b;if(E.RootName=f.nodeName||"",b.nodeType==3||b.nodeType==4)return b.nodeValue;var B=function(){var q={activate:function(){var L=[];return L&&(L.getNodesByAttribute=function(F,J){if(!!L&&L.length>0){var se=[],U,$=L.length-1;try{do U=L[$],U[F]===J&&se.push(U);while($--);return se.reverse(),se}catch(oe){return null}return null}},L.getNodeByAttribute=function(F,J){if(!!L&&L.length>0){var se,U=L.length-1;try{do if(se=L[U],se[F]===J)return se;while(U--)}catch($){return null}return null}},L.getNodesByValue=function(F){if(!!L&&L.length>0){var J=[],se,U=L.length-1;try{do se=L[U],!!se.Text&&se.Text===F&&J.push(se);while(U--);return J}catch($){return null}return null}},L.contains=function(F,J){if(!!L&&L.length>0){var se=L.length-1;try{do if(L[se][F]===J)return!0;while(se--)}catch(U){return!1}return!1}},L.indexOf=function(F,J){var se=-1;if(!!L&&L.length>0){var U=L.length-1;try{do L[U][F]===J&&(se=U);while(U--)}catch($){return-1}return se}},L.SortByAttribute=function(F,J){if(!!L&&L.length>0){let se=function($,oe){var he=$[oe];return he=bam.validation.isNumeric(he)?parseFloat(he):he,he},U=function($,oe){var he,ge;he=se($,F),ge=se(oe,F);var j=he<ge?-1:ge<he?1:0;return J&&(j=J.toUpperCase()==="DESC"?0-j:j),j};L.sort(U)}},L.SortByValue=function(F){if(!!L&&L.length>0){let J=function(U){var $=U.Text;return $=bam.validation.isNumeric($)?parseFloat($):$,$},se=function(U,$){var oe,he;oe=J(U),he=J($);var ge=oe<he?-1:he<oe?1:0;return F&&(ge=F.toUpperCase()==="DESC"?0-ge:ge),ge};L.sort(se)}},L.SortByNode=function(F,J){if(!!L&&L.length>0){let se=function($,oe){var he=$[oe][0].Text;return he=bam.validation.isNumeric(he)?parseFloat(he):he,he},U=function($,oe){var he,ge;he=se($,F),ge=se(oe,F);var j=he<ge?-1:ge<he?1:0;return J&&(j=J.toUpperCase()==="DESC"?0-j:j),j};L.sort(U)}}),L}};return q}(),u=function(){var q=x(B);return q.activate()};return O(E,f),b=null,f=null,E}catch(d){return null}},textToXML:function(b){var E=null;try{E=document.all?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser,E.async=!1}catch(B){throw new Error("XML Parser could not be instantiated")}var f;try{document.all?f=E.loadXML(b)?E:!1:f=E.parseFromString(b,"text/xml")}catch(B){throw new Error("Error parsing XML string")}return f}};return I}();import{showSaveFilePicker as Kt}from"https://cdn.jsdelivr.net/npm/native-file-system-adapter/mod.js";var w1=function(){let x=[{name:"valapalagilaka",search:"с╣Щ",replace:()=>"r"},{name:"short e",search:"с║╜",replace:()=>"e"},{name:"short o",search:"├╡",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б e",search:"├к",replace:()=>"e"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б o",search:"├┤",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б ai",search:"├К",replace:()=>"E"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б au",search:"├Ф",replace:()=>"O"},{name:"candrabindu",search:"m╠Р",replace:()=>"M"},{name:"oс╣Гk─Бras",search:"oс╣Б",replace:()=>"oM"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"(?:kK|gG|cC|jJ|wW|qQ|tT|dD|pP|bB)",replace:B=>B[0].slice(-1)},{name:"geminated m after h",search:"(?:Mhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rfi]|p[aA])tt|tt(?=[rvy]\\S)",replace:B=>`${B[1]}t`},{name:"geminated consonants after r",search:"([rf]\\s*)([kgcjwqdpbRnmyvl])\\2{1,2}",replace:B=>`${B[1]}${B[2]}`},{name:"final nasal variants",search:"(?:M[lSs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnNYR](?=[pPbBmdDtTnwWqQcCjJkKgG])",replace:()=>"M"},{name:"final anusv─Бra variants",search:"M?[mN](?!\\S)|n(?=\\s+[tdn])|Y(?=\\s+[jc])",replace:()=>"M"},{name:"visarga aс╕е before voiced consonants",search:"(?<!\\sB)(?:a[Hr]|[o])(?=\\s+['gGjJqQdDnbBmrylvh])",replace:()=>"aH"},{name:"visarga aс╕е before vowels",search:"aH(?=\\s+[AiIeuUof])",replace:()=>"a"},{name:"visarga aс╕е before unvoiced consonants and space + anusv─Бra",search:"o\\s+(?=[kKcCwWtTpPszSM])",replace:()=>"aH a"},{name:"visarga ─Бс╕е variants",search:"AH(?=\\s+[aAiIeEuUogGjJqQdDbBnmyrlvh])",replace:()=>"A"},{name:"other visarga variants",search:"H?[rszS](?!\\S)",replace:()=>"H"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"z(?=[kK])|s(?=s)",replace:()=>"H"},{name:"final au/─Бv",search:"Av(?!\\S)",replace:()=>"O"},{name:"final su",search:"(?<=[sz])v(?=\\s+[aAiIuUoOeE])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aAuUoOeE])",replace:()=>"y"},{name:"kcch/k┼Ы",search:"k(\\s*)(?:S|c?C)",replace:B=>`k${B[1]}S`},{name:"c┼Ы/t┼Ы",search:"[tc](\\s*)S",replace:B=>`c${B[1]}C`},{name:"cch/ch",search:"([aAiIuUeEoO])C",replace:B=>`${B[1]}cC`},{name:"final t + hi",search:"d(\\s+)D(?=[iy](?:\\s|$))",replace:B=>`t${B[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aAiIeEuUoOgGdDbByrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:B=>`${B[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aAuUeEoO])",replace:()=>"i"},{name:"bhd for bdh",search:"Bd",replace:()=>"bD"}],p=[{name:"valapalagilaka",search:"с╣Щ",replace:()=>"r"},{name:"short e",search:"с║╜",replace:()=>"e"},{name:"short o",search:"├╡",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б e",search:"├к",replace:()=>"e"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б o",search:"├┤",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б ai",search:"a├о",replace:()=>"ai"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б au",search:"a├╗",replace:()=>"au"},{name:"candrabindu",search:"m╠Р",replace:()=>"с╣Г"},{name:"oс╣Гk─Бras",search:"oс╣Б",replace:()=>"oс╣Г"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"([kgcjс╣нс╕Нtdpb]){2}h",replace:B=>`${B[1]}h`},{name:"geminated m after h",search:"(?:с╣Гhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rс╣Ыi]|p[a─Б])tt|tt(?=[rvy]\\S)",replace:B=>`${B[1]}t`},{name:"geminated consonants after r",search:"([rс╣Ы]\\s*)([kgcjс╣нс╕Нс╣Зtdnpbmyvl])\\2{1,2}",replace:B=>`${B[1]}${B[2]}`},{name:"final nasal variants",search:"(?:с╣Г[lс╣гs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnс╣Е├▒с╣З](?=[pbmdtnс╣нс╕Нcjkg])",replace:()=>"с╣Г"},{name:"final anusv─Бra variants",search:"с╣Г?[mс╣Е](?!\\S)|n(?=\\s+[tdn])|├▒(?=\\s+[jc])",replace:()=>"с╣Г"},{name:"visarga aс╕е before voiced consonants",search:"(?:a[с╕еr]|[o])(?=\\s+['gjс╕Нdnbmyrlvh])",replace:()=>"aс╕е"},{name:"visarga aс╕е before vowels",search:"aс╕е(?=\\s+[─Бi─лeu┼лoс╣Ы])",replace:()=>"a"},{name:"visarga aс╕е before unvoiced consonants and space + anusv─Бra",search:"o\\s+(?=[kcс╣нtp┼Ыс╣гsс╣Г])",replace:()=>"aс╕е a"},{name:"visarga ─Бс╕е variants",search:"─Бс╕е(?=\\s+[a─Бi─лeu┼лogjс╕Нdnbmyrlvh])",replace:()=>"─Б"},{name:"other visarga variants",search:"с╕е?[r┼Ыс╣гs](?!\\S)",replace:()=>"с╕е"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"с╣г(?=k)|s(?=s)",replace:()=>"s"},{name:"final au/─Бv",search:"─Бv(?!\\S)",replace:()=>"au"},{name:"final su",search:"(?<=[sс╣г])v(?=\\s+[a─Бi─лu┼лoe])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[a─Бu┼лeo])",replace:()=>"y"},{name:"kcch/k┼Ы",search:"k(\\s*)(?:┼Ы|c?ch)",replace:B=>`k${B[1]}┼Ы`},{name:"c┼Ы/t┼Ы",search:"[tc](\\s*)┼Ы",replace:B=>`c${B[1]}ch`},{name:"cch/ch",search:"([a─Бi─лu┼лeo])ch",replace:B=>`${B[1]}cch`},{name:"final t + hi",search:"d(\\s+)dh(?=[iy](?:\\s|$))",replace:B=>`t${B[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[a─Бi─лeu┼лogdbyrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:B=>`${B[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[a─Бu┼лeo])",replace:()=>"i"},{name:"bhd for bdh",search:"bhd",replace:()=>"bdh"}],I={none:{name:"remove spaces",search:"\\s",replace:()=>""},collapse:{name:"collapse spaces",search:"\\s+",replace:()=>" "}},b=function(B,u){let d=u.join(""),C=[],N=[...d.matchAll(B.search)],H=0,O=null;for(let q of u){let L=H+q.length,F=q,J=0;if(O)if(O.length<=q.length)F=E(q,0,O.length,O.text),J=O.text.length-O.length,O=null;else{F=O.text.slice(0,q.length);let U=O.text.slice(q.length);O={length:O.length-q.length,text:U};continue}for(;N.length>0&&N[0].index<L;){let se=N.shift(),U=se.index-H+J,$=B.replace(se);if(se.index+se[0].length<L)F=E(F,U,se[0].length,$),J=J+$.length-se[0].length;else{let oe=q.length-U+J,he=$.slice(0,oe);F=F.slice(0,U)+he;let ge=$.slice(oe);O={length:se[0].length-oe,text:ge}}}C.push(F),H=L}return C},E=function(B,u,d,C){return B.slice(0,u)+C+B.slice(u+d)};return function(B){let u=B.map(d=>De.t(d,"iast","slp1"));for(let d of[...x,I.none])u=b(d,u);return u.map(d=>De.t(d,"slp1","iast"))}}();var Bt={smush:function(x,p){return x.toLowerCase().replace(/([с╕Нdrmvynhs]) ([a─Бi─лu┼лс╣Ыeo├й├│])/g,"$1$2"+p).replace(/([kgcjс╣нс╕Нtdpb]) h/g,"$1тАМ"+p+"h").replace(/([kgcj├▒с╕Нtdnpbmrlyv┼Ыс╣гsс╣Щ]) ([kgcjс╣нс╕Нtdnpbmyrlv┼Ыс╣гshс╕╗])/g,"$1"+p+"$2").replace(/([o├│e├й─Б]) ([с╣Г'])/g,"$1"+p+"$2").replace(/^с╣Г/,"'тАНс╣Г").replace(/^с╕е/,"'тАНс╕е").replace(/^_y/,"'тАНy").replace(/├╝/g,"тАМu").replace(/├п/g,"тАМi").replace(/_{1,2}(?=\s*)/g,function(I){if(I==="__")return"тАН";if(I==="_")return"тАМ"})},iast:function(x,p){let I=p||"devanagari";return De.t(x,I,"iast",{skip_sgml:!0})},devanagari:function(x,p){let I=p||"",b={skip_sgml:!0},E=x.replace(/с╣Щ/g,"r").replace(/^_─Б/,"рд╜тАНрд╛"),f=Bt.smush(E,I);return De.t(f,"iast","devanagari",b).replace(/┬п/g,"ъг╗")},malayalam:function(x,p){let I=p||"",b={skip_sgml:!0},E={р┤Х:"р╡┐",р┤д:"р╡╜",р┤и:"р╡╗",р┤о:"р╡Ф",р┤░:"р╡╝"},f=x.replace(/^_─Б/,"р┤╜тАНр┤╛"),B=Bt.smush(f,I).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"r").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return De.t(B,"iast","malayalam",b).replace(/(^|[^р╡Н])р┤░р╡Н(?=\S)/g,"$1р╡О").replace(/([р┤Хр┤др┤ир┤ор┤░])р╡Н(?![^\s\u200C,тАФтАЩтАХ])/g,function(d,C){return E[C]})},grantha:function(x,p){let I=p||"",b={skip_sgml:!0},E=new Map([["р┤╕","юЗУ"],["р┤░","р╡╝"],["р┤п","юЗЛ"],["р┤Ъ","юЖ╢"],["р┤ж","юЗВ"],["р┤╢","юЗТ"]]),f=new RegExp("(["+[...E.keys()].join("")+"])р╡Н(?![^тАМ ,тАФтАЩтАХ])","g"),B=x.replace(/^_─Б/,"р┤╜тАНр┤╛"),u=Bt.smush(B,I).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"r").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return De.t(u,"iast","malayalam",b).replace(/(^|[^р╡Н])р┤░р╡Н(?=\S)/g,"$1р╡О").replace(f,(C,N)=>E.get(N)).replace(/р┤Хр╡Нр┤╖р┤┐/g,"роХрпНро╖ро┐")},telugu:function(x,p){var I=p||"";let b={skip_sgml:!0},E=x.replace(/^_─Б/,"р░╜тАНр░╛"),f=Bt.smush(E,I).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"rтАН").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return De.t(f,"iast","telugu",b)}},Ot=function(x,p,I=!1,b="sa"){let E=Bt[p],f=x.cloneNode(!0),B=function(u,d){let C=u.childNodes;for(let N of C)if(N.nodeType!==8){if(N.nodeType===3){if(d!=="sa")continue;N.data=E(N.data,I)}else if(N.hasChildNodes()){let H=N.getAttribute("lang")||d;H==="sa"&&N.classList.contains("subst")&&Q1(N,p),B(N,H)}}};return B(f,b),f},C1=function(x,p=!1){if(x.nodeType===3)return x;let I=document.createTreeWalker(x,NodeFilter.SHOW_TEXT,null,!1);if(p){let b;for(;I.nextNode();)b=I.currentNode;return b}else return I.nextNode},Q1=function(x,p){if(x.firstChild.nodeType!==3&&x.lastChild.nodeType!==3)return;let I=x.childNodes,b=/^[a─Бi─лu┼лeoс╣Ыс╣Эс╕╖с╣Гс╕е]/,E=/[kgс╣Еcj├▒с╣нс╕Нс╣Зtdnpbmyrlvс╣г┼Ыsh]$/,f=["─Б","i","─л","e","o","_","ai","au"],B=["h","k","┼Ы","y","g","gh","c","ch","jh","с╣нh","с╕Н","с╕Нh","t","th","d","dh","n","p","ph","bh","m","r","с╕╗","v","с╣г","s"];var u=!1,d=[],C=[];let N=I[0].nodeType===3;for(let H of I){if(H.nodeType>3)continue;let O=H.textContent.trim();if(O!==""){if(O==="a"){H.textContent="";continue}if(O.match(E)){let q=C1(H,!0);q.textContent=q.textContent.replace(/\s+$/,"")+"a",p==="telugu"&&B.indexOf(O)>=0&&d.push(H)}if(H===x.lastChild&&H.nodeType===3){let q=document.createElement("span");q.appendChild(H.cloneNode(!1)),x.replaceChild(q,H),H=q,H.classList.add("aalt")}else N&&O.match(b)&&H.classList.add("aalt");switch(p){case"devanagari":(O==="i"||O==="├й")&&C.unshift(H);break;case"grantha":case"malayalam":if(O==="e"||O==="ai")C.unshift(H);else if(O==="o"){let q=H.cloneNode(!0);_1("o","e",q),C.unshift(q),_1("o","─Б",H)}break;case"telugu":!u&&f.indexOf(O)>=0&&(u=!0);break}}}for(let H of C)x.insertBefore(H,x.firstChild);if(u)for(let H of d){let O=C1(H,!0);O.textContent=O.textContent+"тАНр▒Н"}},_1=function(x,p,I){let b=document.createTreeWalker(I,NodeFilter.SHOW_TEXT,null,!1);for(;b.nextNode();)b.currentNode.textContent.match(x)&&(b.currentNode.textContent=p)};"use strict";var K1=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,115,116,114,105,112,45,115,112,97,99,101,32,101,108,101,109,101,110,116,115,61,34,42,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,47,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,97,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,45,45,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,33,45,45,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,45,45,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),k1=K1;"use strict";var Z1=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,32,32,32,32,60,120,115,108,58,111,117,116,112,117,116,32,105,110,100,101,110,116,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,72,101,97,100,101,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,120,101,110,111,68,97,116,97,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),S1=Z1;"use strict";var en=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,97,98,108,101,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,114,101,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,100,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,115,101,108,101,99,116,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,104,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,99,111,112,101,34,62,114,111,119,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,114,97,103,103,97,98,108,101,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,100,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,97,114,101,110,116,58,58,120,58,99,108,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,39,49,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,115,116,97,114,116,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,101,110,100,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,105,110,116,101,114,110,97,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,105,110,115,105,103,110,105,102,105,99,97,110,116,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,105,110,115,105,103,110,105,102,105,99,97,110,116,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,98,105,110,97,114,121,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,98,105,110,97,114,121,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),A1=en;"use strict";var tn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,116,114,101,101,45,118,101,114,115,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,108,97,110,103,34,62,101,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,91,118,101,114,115,101,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,93,60,47,120,115,108,58,116,101,120,116,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),P1=tn;"use strict";var nn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,101,109,101,110,100,101,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,110,111,116,40,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,105,110,118,105,115,105,98,108,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,48,48,65,48,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,55,51,59,60,47,120,115,108,58,116,101,120,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,99,108,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,114,111,117,112,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),E1=nn;"use strict";var rn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),R1=rn;var wt=function(x){let I=new DOMParser().parseFromString(x,"text/xml"),b=new XSLTProcessor;return b.importStylesheet(I),b},L1=function(x,p){this.transformString=function(I,b){let E=x.xml.createElementNS(p.teins,"ab");return E.innerHTML=I,b.transformToFragment(E,document)},this.sheets={csv:wt(k1),xml:wt(S1),matrix:wt(A1),lemma:wt(E1),lg:wt(R1),tree:wt(P1)}};var B1=function(x){let p={basename(){return x.filename.split(/\.[^.]+$/)[0]},range(b,E){return Array.from(Array(parseInt(E)-parseInt(b)+1).keys(),f=>f+b)},maxlemma(){return[...p.firsttext().querySelectorAll("w[n]")].length-1},lemmata(b,E){let f=E||document.querySelector("#views");return b===!1?f.querySelectorAll(".lemma"):f.querySelectorAll(`.lemma[data-n="${b}"]`)},tds(b,E){let f=E||x.matrix.boxdiv;return b===!1?f.querySelectorAll("td[data-n]"):f.querySelectorAll(`td[data-n="${b}"]`)},firsttd(b,E){return(E||x.matrix.boxdiv).querySelector(`td[data-n="${b}"]`)},tr(b){return x.matrix.boxdiv.querySelector(`tr[data-n="${b}"]`)},trs(b){return(b||x.matrix.boxdiv).querySelectorAll("tr[data-n]")},firsttr(b){return(b||x.matrix.boxdiv).querySelector("tr[data-n]")},lasttr(b){return(b||x.matrix.boxdiv).querySelector("tr[data-n]:last-of-type")},trWalker(b){return document.createNodeIterator(b,NodeFilter.SHOW_ELEMENT,{acceptNode:function(E){if(E.tagName==="TD")return NodeFilter.FILTER_ACCEPT}},!1)},textWalker(b){return document.createNodeIterator(b,NodeFilter.SHOW_ELEMENT,{acceptNode:function(E){if(E.tagName.toLowerCase()==="w")return NodeFilter.FILTER_ACCEPT}},!1)},tei(b,E=x.xml){return E.querySelector(`TEI[n="${b}"]`)},teis(b=x.xml){return b.querySelectorAll("TEI")},texts(b){return(b||x.xml).querySelectorAll("text")},serializedtexts(b,E){let f=[...b.querySelectorAll("otu[label]")].map(u=>u.getAttribute("label"));return[...p.teis()].filter(u=>f.indexOf(u.getAttribute("n"))!==-1).map(u=>[b.querySelector(`node[label="${u.getAttribute("n")}"]`).getAttribute("id"),[...u.querySelectorAll("w")].map(d=>E&&d.hasAttribute("lemma")?d.getAttribute("lemma"):d.textContent)])},serializedlevels(b){return b.map(E=>{if(E instanceof Map){let f=new Map;for(let[B,u]of E)f.set(B.getAttribute("id"),u.map(d=>d.getAttribute("id")));return f}else return E.map(f=>f.getAttribute("id"))})},firsttext(b){return b?x.xml.querySelector(`[n="${b}"] text`):x.xml.querySelector("text")},words(b,E){let f=E||x.xml;return b===!1?f.querySelectorAll("w[n]"):f.querySelectorAll(`w[n="${b}"]`)},firstword(b,E){return(E||x.xml).querySelector(`w[n="${b}"]`)},normal(b){return(b||document.getElementById("views")).querySelectorAll(".lemma[data-normal], .tree-lemma[data-normal]")},htmlreading(b,E){return E&&b.dataset.normal?b.dataset.normal:b.IAST.textContent},ths(){return x.matrix.boxdiv.querySelectorAll("th[data-ref]")},firstth(b){return x.matrix.boxdiv.querySelector(`th[data-ref="${b}"]`)},checkbox(b,E){return x.matrix.boxdiv.querySelector(`th[data-ref="${b}"] input.${E}`)},highlit(){let E=p.firsttr().querySelectorAll(".highlit"),f=new Set;for(let B of E)f.add(B.dataset.n);return f},highlitcell(){return x.matrix.boxdiv.querySelector("td.highlitcell")},highlitrow(){let b=p.highlitcell();return b?b.closest("tr"):!1},lowhigh(b){let E=[...b].sort((u,d)=>parseInt(u)-parseInt(d)),f=parseInt(E[0]),B=E.length>1?parseInt(E[E.length-1]):void 0;return[f,B]},readings(b,E){let f=E||x.matrix.boxdiv,B=p.tds(b,f);var u=0;let d=new Set;for(let C of B){let N=C.textContent;N!==""&&(u++,d.add(N))}return[u,d.size]},attr(b,E){let f=p.firsttr();var B=[];for(let u of E)p.firsttd(u,f).dataset[b]==="true"?B.push([u,!0]):B.push([u,!1]);return new Map(B)},whichattr(b){return b.hasAttribute("n")?"n":b.hasAttribute("data-n")?"data-n":b.hasAttribute("data-ref")?"data-ref":!1},clauses(b,E=!1){let f=p.firsttext();var B=!1;let u=new Set;for(let d of b){let N=p.firstword(d,f).closest("cl");N?u.add(N):E&&(B=!0)}if(u.size===0)return!1;{let d=[...u].map(C=>{let N=C.querySelectorAll("w");return new Set([...N].map(H=>H.getAttribute("n")))});return B?[null].concat(d):d}},clausesToRemove(b,E,f=0){let B=new Set;for(let u of b){let d=new Set(u);for(let C of E)d.delete(C);d.size<=f&&B.add(u)}return[...B]},empty(){let b=new Set,E=[...p.trs()],f=E.map(d=>p.trWalker(d)),B=E[0].querySelector("td:last-of-type").dataset.n;for(let d=0;d<=B;d++){var u=!0;for(let C of f){let N=C.nextNode();u&&N.textContent!==""&&(u=!1)}u&&b.add(d)}return b},prevNonempty(b,E){for(let f=b;f>=0;f--)if(E[f].textContent!=="")return f;return!1},nextNonempty(b,E){for(let f=b;f<E.length;f++)if(E[f].textContent!=="")return f;return!1},setIntersection(...b){let E=b[0];return new Set([...E].filter(f=>{for(let B=1;B<b.length;B++)if(!b[B].has(f))return!1;return!0}))},setUnion(...b){return new Set(b.reduce((E,f)=>(E=[...E,...f],E),[]))},cursorPos(b){let E=window.getSelection().getRangeAt(0),f=E.cloneRange();f.selectNodeContents(b);let B=f.toString().length;return f.setEnd(E.endContainer,E.endOffset),[f.toString().length,B]},selection(){let b=window.getSelection();if(b.isCollapsed)return!1;let E=b.rangeCount>1?b.getRangeAt(1).cloneContents():b.getRangeAt(0).cloneContents();if(!E)return!1;let f=new Set,B=E.querySelectorAll(".lemma");for(let u of B)f.add(u.dataset.n);return f}},I={undo(){return x.undo.length>0},redo(){return x.redo.length>0},checkbox(b,E=null){if(!I.anyhighlit())return!1;let f=E===null?p.highlit():E,B=p.attr(b,f);for(let u of B.values())if(u===!1)return!1;return!0},grouped(){let b=p.highlit();if(!b)return!1;let E=p.firsttr();for(let f of b){let B=p.firsttd(f,E);if(B.classList.contains("group-start")||B.classList.contains("group-internal")||B.classList.contains("group-end"))return!0}return!1},oneGrouped(){let b=p.highlit();if(b.size===0)return!1;if(b.size===1){let E=p.firsttr(),f=p.firsttd([...b][0],E);return!!(f.classList.contains("group-start")||f.classList.contains("group-end")||f.classList.contains("group-internal"))}return!0},anyhighlit(){return!!x.matrix.boxdiv.querySelector("td.highlit")},manyhighlit(){return p.highlit().size>1},highlitcell(){return!!x.matrix.boxdiv.querySelector("td.highlitcell")},normalizedView(){return document.getElementById("views").classList.contains("normalized")},anyNormalized(){return x.matrix.boxdiv.querySelector(".lemma[data-normal]")},headerView(){return x.matrix.boxdiv.querySelector("tr.header").style.display!=="none"}};return{find:p,check:I}};function Ht(x){var p=[],I=0;if(this.trie=this.createTrie(x.patterns),this.leftMin=x.leftmin,this.rightMin=x.rightmin,this.exceptions={},x.exceptions)for(p=x.exceptions.split(/,\s?/g);I<p.length;I+=1)this.exceptions[p[I].replace(/\u2027/g,"").toLowerCase()]=new RegExp("("+p[I].split("тАз").join(")(")+")","i")}Ht.prototype.createTrie=function(x){var p=0,I=0,b=0,E=0,f=null,B=null,u=null,d=null,C={_points:[]},N;for(p in x)if(x.hasOwnProperty(p))for(N=x[p].match(new RegExp(".{1,"+ +p+"}","g")),I=0;I<N.length;I+=1){for(f=N[I].replace(/[0-9]/g,"").split(""),B=N[I].split(/\D/),d=C,b=0;b<f.length;b+=1)u=f[b].charCodeAt(0),d[u]||(d[u]={}),d=d[u];for(d._points=[],E=0;E<B.length;E+=1)d._points[E]=B[E]||0}return C};Ht.prototype.hyphenateText=function(x,p){p=p||4;for(var I=x.split(/([a-zA-Z0-9_\u0027\u00AD\u00DF-\u00EA\u00EB\u00EC-\u00EF\u00F1-\u00F6\u00F8-\u00FD\u0101\u0103\u0105\u0107\u0109\u010D\u010F\u0111\u0113\u0117\u0119\u011B\u011D\u011F\u0123\u0125\u012B\u012F\u0131\u0135\u0137\u013C\u013E\u0142\u0144\u0146\u0148\u0151\u0153\u0155\u0159\u015B\u015D\u015F\u0161\u0165\u016B\u016D\u016F\u0171\u0173\u017A\u017C\u017E\u017F\u0219\u021B\u02BC\u0390\u03AC-\u03CE\u03F2\u0401\u0410-\u044F\u0451\u0454\u0456\u0457\u045E\u0491\u0531-\u0556\u0561-\u0587\u0902\u0903\u0905-\u090B\u090E-\u0910\u0912\u0914-\u0928\u092A-\u0939\u093E-\u0943\u0946-\u0948\u094A-\u094D\u0982\u0983\u0985-\u098B\u098F\u0990\u0994-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BE-\u09C3\u09C7\u09C8\u09CB-\u09CD\u09D7\u0A02\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A14-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A82\u0A83\u0A85-\u0A8B\u0A8F\u0A90\u0A94-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABE-\u0AC3\u0AC7\u0AC8\u0ACB-\u0ACD\u0B02\u0B03\u0B05-\u0B0B\u0B0F\u0B10\u0B14-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3E-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B57\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C02\u0C03\u0C05-\u0C0B\u0C0E-\u0C10\u0C12\u0C14-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C43\u0C46-\u0C48\u0C4A-\u0C4D\u0C82\u0C83\u0C85-\u0C8B\u0C8E-\u0C90\u0C92\u0C94-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBE-\u0CC3\u0CC6-\u0CC8\u0CCA-\u0CCD\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D7A-\u0D7F\u1F00-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB2-\u1FB4\u1FB6\u1FB7\u1FBD\u1FBF\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD2\u1FD3\u1FD6\u1FD7\u1FE2-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u200D\u2019]+)/gi),b=0;b<I.length;b+=1)I[b].indexOf("/")!==-1?b!==0&&b!==I.length-1&&!/\s+\/|\/\s+/.test(I[b])&&(I[b]+="тАЛ"):I[b].length>p&&(I[b]=this.hyphenate(I[b]).join("┬н"));return I.join("")};Ht.prototype.hyphenate=function(x){var p,I=[],b,E,f,B,u,d=[],C,N=x.toLowerCase(),H,O,q=Math.max,L=this.trie,F=[""];if(this.exceptions.hasOwnProperty(N))return x.match(this.exceptions[N]).slice(1);if(x.indexOf("┬н")!==-1)return[x];for(x="_"+x+"_",p=x.toLowerCase().split(""),b=x.split(""),C=p.length,E=0;E<C;E+=1)d[E]=0,I[E]=p[E].charCodeAt(0);for(E=0;E<C;E+=1)for(u=L,f=E;f<C&&(u=u[I[f]],u);f+=1)if(H=u._points,H)for(B=0,O=H.length;B<O;B+=1)d[E+B]=q(d[E+B],H[B]);for(E=1;E<C-1;E+=1)E>this.leftMin&&E<C-this.rightMin&&d[E]%2?F.push(b[E]):F[F.length-1]+=b[E];return F};var sn=Ht,N1=sn;var T1={id:"sa",leftmin:2,rightmin:2,patterns:{2:"a1e1i1o1u1├й1├н1├п1├│1├║1├╝1─Б1─л1┼л1с╕╖1с╕╣1с╣Ы1с╣Э1",3:"2b_2c_2d_2g_2h_2j_2k_2l_2m_2n_2p_2r_2s_2t_2v_2y_2├▒_2┼Ы_2с╕Н_2с╕е12с╕л12с╕╖_2с╣Б12с╣Г12с╣Е_2с╣З_2с╣н_2с║Ц1l╠е1r╠е1",4:"2bh_2ch_2dh_2gh_2jh_2kh_2m╠Р12ph_2rb_2rd_2rg_2rk_2rp_2rt_2rс╕Н_2rс╣н_2th_2с╕Нh_2с╣нh_a2i1a2u1a3├п1a3├╝1l╠е╠Д1r╠е╠Д1"}};window.comboView=function(){let x={teins:"http://www.tei-c.org/ns/1.0",scripts:["iast","devanagari","telugu","grantha","malayalam"]},p={filename:null,xml:null,treelist:new Map,trees:[],textboxes:[],matrix:null,viewdiv:null,descs:null,maxlemma:null,windows:[window],dragged:null,undo:[],redo:[],editing:!1},I=new N1(T1),b=new L1(p,x),E=new B1(p),f=E.find,B=E.check,u=function(){let i=document.getElementById("tooltip");i&&i.remove()},d=function(){let i=document.getElementById("left_menu");i.innerHTML=`<div id="matrixmenu" class="menubox">
    <div class="heading">Matrix</div>
      <ul>
        <li>select CSV/XML file(s): <input type="file" id="file" name="file" accept=".xml,.csv" multiple/></li>
      </ul>
</div>
<div style="display: none" id="mssmenu" class="menubox">
    <div class="heading">Texts</div>
    <ul class="ms">
    </ul>
</div>
<div style="display: none" id="treemenu" class="menubox">
    <div class="heading">Trees</div>
        <ul class="tree">
            <li>select NeXML file: <input type="file" id="treefile" name="treefile" accept=".xml"/></li>
        </ul>
    </div>
`;let l=document.getElementById("menu");l.addEventListener("mouseover",de.menuMouseover),l.addEventListener("mouseout",de.menuMouseout),l.addEventListener("click",de.menuClick),l.querySelector("#file").addEventListener("change",F.bind(null,J),!1),l.querySelector("#treefile").addEventListener("change",F.bind(null,se),!1)},C={matrix:function(){return p.matrix=new W,p.matrix.init(),p.matrix.show(),document.getElementById("matrixmenu").style.display="none",N(),L.rehighlight(),p.matrix},text:function(i){let l=new ee(i);return p.textboxes.push(l),l.init(),l.show(),N(),L.rehighlight(),document.querySelector(".highlit")||de.textClick({target:l.boxdiv.querySelector(".lemma:not(.invisible)")}),l},tree:function(i,l){let n=new Ae(i,l);return p.trees.push(n),n.init(),n.show(),N(),L.rehighlight(),n}},N=function(){for(let i of p.trees)i.draw()},H=function(){let i=window.getSelection?window.getSelection():document.selection;i&&(i.removeAllRanges?i.removeAllRanges():i.empty&&i.empty())},O=function(i){let l=document.createTreeWalker(i,NodeFilter.SHOW_TEXT);for(;l.nextNode();){let n=q(l.currentNode.nodeValue);l.currentNode.nodeValue=n}},q=function(i){return I.hyphenateText(i.replace(/ \|/g,"┬а|").replace(/\| (?=\d)/g,"|┬а").replace(/\|\|/g,"рее").replace(/\|/g,"ред"))},L={getAllWindows:function(){return window.mainWindow?window.mainWindow.comboView.getWindows():p.windows},forEachWindow:function(i){let l=L.getAllWindows();for(let n of l)if(!n.closed&&i(n)===!1)break},highlightLemma:function(i,l){var n=!!l;L.forEachWindow(t=>{let r=t.comboView.getViewdiv().querySelectorAll('[data-n="'+i+'"]');for(let h of r)(!n||!h.classList.contains("invisible"))&&h.classList.add("highlit");let o=t.comboView.getViewdiv().querySelectorAll('[data-n-trans="'+i+'"]');for(let h of o)h.classList.add("translit")})},highlightRange:function(i){if(!i||i.size===0)return;L.unHighlightAll();let[l,n]=f.lowhigh(i);if(n!==void 0)for(let t=l;t<=n;t++)L.highlightLemma(t,!0);else L.highlightLemma(l);L.repopulateTrees(l,n);for(let t of p.viewdiv.querySelectorAll(".text-box"))t.querySelector(".highlit")||t.querySelector('[data-n="'+l+'"]').classList.add("highlit");ye.xScroll(l)},highlightAll:function(){B.anyhighlit()?L.unHighlightAll():L.highlightRange(new Set([0,f.maxlemma()]))},unHighlightAll:function(){L.forEachWindow(i=>{let l=i.comboView.getViewdiv().querySelectorAll(".highlit");for(let t of l)t.classList.remove("highlit");let n=i.comboView.getViewdiv().querySelectorAll(".translit");for(let t of n)t.classList.remove("translit");L.unCelllightAll()})},unCelllightAll:function(){L.forEachWindow(i=>{let l=i.comboView.getViewdiv().querySelectorAll(".highlitcell");for(let n of l)n.classList.remove("highlitcell")})},rehighlight:function(){var i;if(L.forEachWindow(n=>{if(i=n.document.querySelectorAll(".highlit"),i.length>0)return!1}),i.length>0){var l=new Set;for(let n of i)l.add(n.dataset.n);L.highlightRange(l)}},clearTrees:function(){L.forEachWindow(i=>{let l=i.comboView.getTrees();for(let n of l)n.clearlemmata()})},repopulateTrees:function(i,l){L.forEachWindow(n=>{let t=n.comboView.getTrees();for(let r of t)r.populate(i,l),r.colourizeVariants(i,l),r.updatescript()})},highlightTreeLemma:function(i){L.forEachWindow(l=>{let n=l.comboView.getTrees();for(let t of n){let r=t.boxdiv.querySelector('.tree-lemma[data-id="'+i+'"]'),o=t.boxdiv.querySelectorAll(".tree-lemma");for(let h of o)(r.dataset.nodes&&h.dataset.nodes===r.dataset.nodes||!r.dataset.nodes&&h.dataset.id===r.dataset.id)&&h.classList.add("highlit");t.clearLabels()}})},unhighlightTrees:function(){L.forEachWindow(i=>{let l=i.comboView.getViewdiv().querySelectorAll(".tree-lemma.highlit");for(let t of l)t.classList.remove("highlit");let n=i.comboView.getTrees();for(let t of n)t.clearLabels()})}},F=function(i,l){let n=l.target.files[0],t=[...l.target.files].slice(1),r=new FileReader;r.onload=i.bind(null,n,t),r.readAsText(n)},J=function(i,l,n){p.filename=i.name,document.title=document.title+`: ${p.filename}`,p.filename.split(".").pop()==="csv"?$(i,l,n):oe(i,l,n)},se=function(i,l,n){let t=n.target.result,o=new DOMParser().parseFromString(t,"text/xml"),h=p.xml.querySelector("teiHeader > xenoData")||function(){let v=p.xml.querySelector("teiHeader")||function(){let k=p.xml.createElementNS(x.teins,"teiHeader");return p.xml.documentElement.appendChild(k),k}(),P=p.xml.createElementNS(x.teins,"xenoData");return v.appendChild(P),P}(),g=p.xml.createElementNS(x.teins,"stemma");g.setAttribute("format","nexml"),g.id="stemma"+[...h.querySelectorAll("stemma")].length,g.appendChild(o.firstChild.cloneNode(!0)),h.appendChild(g),U(o,g.id)},U=function(i,l,n=!0){let t=i.querySelectorAll("tree"),r=document.querySelector("#treemenu ul");for(let o of t){let h=o.id,g=i.cloneNode(!0);for(let k of g.querySelectorAll("tree"))k.id!==h&&k.parentNode.removeChild(k);let v=o.getAttribute("label")||"New Tree "+p.treelist.size;p.treelist.set(`#${l} #${h}`,g);let P=document.createElement("li");P.dataset.name=v,P.dataset.treeid=h,P.dataset.stemmaid=l,P.appendChild(document.createTextNode(v)),r.insertBefore(P,r.lastElementChild),n&&C.tree(l,h)}},$=function(i,l,n){let t=Qt.parse(n.target.result,{delimiter:","});p.xml=document.implementation.createDocument(x.teins,"",null);let r=p.xml.createElementNS(x.teins,"teiCorpus"),o=p.xml.createElementNS(x.teins,"teiHeader");r.appendChild(o),p.xml.appendChild(r);for(let h of t){let g=h[0],v=h.slice(1),P=p.xml.createElementNS(x.teins,"TEI");P.setAttribute("n",g);let k=p.xml.createElementNS(x.teins,"text");for(let M=0;M<v.length;M++){let V=v[M],Z=p.xml.createElementNS(x.teins,"w");V&&Z.appendChild(document.createTextNode(V)),Z.setAttribute("n",M),k.appendChild(Z)}P.appendChild(k),r.appendChild(P)}p.xml.normalize(),p.maxlemma=f.maxlemma(),j()},oe=function(i,l,n){let t=new DOMParser;p.xml=t.parseFromString(n.target.result,"text/xml");let r=p.xml.querySelectorAll("teiHeader xenoData stemma nexml");for(let o of r){let h=document.implementation.createDocument("http://www.nexml.org/2009","",null);h.appendChild(o.cloneNode(!0)),U(h,o.closest("stemma").id,!1)}p.maxlemma=f.maxlemma(),l.length>0?he(l):j()},he=function(i){let l=i[0],n=i.slice(1),t=function(h,g){let v=new Set(h);for(let P of g)v.delete(P);return v},r=function(h,g){let P=new DOMParser().parseFromString(g.target.result,"text/xml"),k=new Map;for(let be of f.teis()){let Ce=be.getAttribute("n");k.set(Ce,be)}let M=new Set(k.keys()),V=new Map;for(let be of P.querySelectorAll("TEI")){let Ce=be.getAttribute("n");V.set(Ce,be)}let Z=new Set(V.keys()),ne=t(M,Z),ie=t(Z,M);for(let be of ie)ve.tei(be);let fe=[...P.querySelector("text").querySelectorAll("w[n]")].length,xe=p.maxlemma+fe;for(let[be,Ce]of V)if(k.has(be)){let Ne=k.get(be).querySelector("text"),Te=Ce.querySelector("text").querySelectorAll("w[n]");var we=p.maxlemma+1;for(let Le of Te)Le.setAttribute("n",we),Ne.appendChild(Le),we=we+1}else{let Ne=p.xml.createElementNS(x.teins,"TEI");Ne.setAttribute("n",be);let Be=p.xml.createElementNS(x.teins,"text");ve.emptywords(Be,xe,0),Ne.appendChild(Be),p.xml.documentElement.appendChild(Ne)}for(let be of ne){let Ce=k.get(be).querySelector("text");ve.emptywords(Ce,xe,p.maxlemma+1)}p.maxlemma=f.maxlemma(),h.length>0?he(h):j()},o=new FileReader;o.onload=r.bind(null,n),o.readAsText(l)},ge=function(){var i="";let l=[...f.teis()].map(n=>n.getAttribute("n"));for(let n of l)i+=`<li data-name="${n}">${n}</li>`;document.getElementById("menu").querySelector(".ms").innerHTML=i},j=function(){ge();let i=new G("Export");i.populate([{text:"TEI corpus",func:pe.showOptions.bind(null,pe.xml,pe.options)},{text:"TEI apparatus",func:pe.showOptions.bind(null,pe.xml,pe.appOptions)},{text:"CSV",func:pe.showOptions.bind(null,pe.csv,pe.options)},{text:"NEXUS",func:pe.showOptions.bind(null,pe.nexus,pe.options)}]);let l=new G("Edit");l.populate([{text:"Undo",greyout:B.undo,func:D.undo},{text:"Redo",greyout:B.redo,func:D.redo},{text:"Select all",alt:"Deselect all",toggle:B.anyhighlit,func:L.highlightAll},{text:"(Re)normalize columns",greyout:B.anyhighlit,func:D.startRenormalize.bind(null,!1)},{text:"Delete column",greyout:B.anyhighlit,func:D.startRemoveCol.bind(null,!1)},{text:"Delete empty columns",func:D.startRemoveEmpty},{text:"Merge columns",greyout:B.manyhighlit,func:D.startMerge.bind(null,!1)},{text:"Group columns",alt:"Ungroup columns",greyout:B.oneGrouped,toggle:B.grouped,func:D.startGroup.bind(null,!1)},{text:"Group words",func:D.doGroupWords},{text:"Edit cell",greyout:B.highlitcell,func:D.startEditCell.bind(null,!1)},{text:"Insert row",func:D.startNewRow},{text:"Insert column",greyout:B.anyhighlit,func:D.startInsertCol},{text:"Mark insignificant",checkbox:B.checkbox.bind(null,"insignificant"),greyout:B.anyhighlit,func:D.startMarkAs.bind(null,"insignificant",!1)},{text:"Mark binary",checkbox:B.checkbox.bind(null,"binary"),greyout:B.anyhighlit,func:D.startMarkAs.bind(null,"binary",!1)}]);let n=new G("View");n.populate([{text:"Header",checkbox:B.headerView,func:ye.toggleHeader},{text:"Normalized",checkbox:B.normalizedView,greyout:B.anyNormalized,func:ye.toggleNormalize}]);let t=document.getElementById("left_menu");t.appendChild(n.box),t.appendChild(l.box),t.appendChild(i.box);let r=document.getElementById("views");r.style.justifyContent="flex-start",r.removeChild(r.querySelector("#splash")),C.matrix();let o=document.getElementById("matrixmenu");o.addEventListener("click",C.matrix),o.removeChild(o.querySelector("ul")),document.getElementById("mssmenu").style.display="block",document.getElementById("treemenu").style.display="block"},pe={write:async function(i,l){let n=await l.createWritable();n.write(i),n.close()},xml:async function(i){let l=new XMLSerializer().serializeToString(b.sheets.xml.transformToDocument(i)),n=new Blob([l],{type:"text/xml;charset=utf-8"}),t=f.basename()+".xml",r=await Kt({_preferPolyfill:!1,suggestedName:t,types:[{description:"TEI XML",accept:{"text/xml":[".xml"]}}]});pe.write(n,r)},csv:async function(i){let l=b.sheets.csv.transformToDocument(i).documentElement.textContent,n=new Blob([l],{type:"text/csv;charset=utf-8"}),t=f.basename()+".csv",r=await Kt({_preferPolyfill:!1,suggestedName:t,types:[{description:"CSV file",accept:{"text/csv":[".csv"]}}]});pe.write(n,r)},nexus:async function(i){let l=[...f.texts(i)],n=l.length,t="0 1 2 3 4 5 6 7 8 9 A B C D E F G H K L M N P Q R S T U V W X Y Z a b c d e f g h k l m n p q r s t u v w x y z",[r,...o]=t.split(" "),h="-",g=l.map(we=>"'"+we.parentElement.getAttribute("n")+"'"),v=l.map(we=>f.textWalker(we)),P=l[0].querySelectorAll("w").length,k=[],M=g.map(we=>[we+" "]);for(let we=0;we<P;we++){let be=new Set,Ce=[];for(let Be=0;Be<v.length;Be++){let Le=v[Be].nextNode(),qe=De.t(Le.textContent.trim().toLowerCase(),"iast","hk").replace(/'/g,"()");Ce.push(qe),qe!==""&&qe!=="[]"&&be.add(qe)}k.push(["[]",...be]);let Ne=new Map([...be].map((Be,Te)=>[Be,o[Te]]));for(let Be=0;Be<Ce.length;Be++){let Te=(Le=>{switch(Ce[Le]){case"":return h;case"[]":return r;default:return Ne.get(Ce[Le])}})(Be);M[Be].push(Te)}}let V=k.map((we,be)=>be+1+" / "+[...we].map(Ce=>`'${Ce}'`).join(" ")).join(`,
`),Z=M.map(we=>we.join("")).map(we=>we.replace(/0{8,}/g,be=>be.replace(/0/g,"-"))).reduce((we,be)=>we+`
`+be),ne=`#NEXUS

BEGIN TAXA;
  DIMENSIONS NTAX=${n};
  TAXLABELS ${g.join(" ")};
END;

BEGIN CHARACTERS;
  DIMENSIONS
    NCHAR=${P};
  FORMAT 
    DATATYPE=STANDARD 
    RESPECTCASE 
    GAP=${h} 
    MISSING=? 
    SYMBOLS="${t}";
  CHARSTATELABELS
${V}
;
MATRIX
${Z}
;
END;
`,ie=new Blob([ne],{type:"text/nexus;charset=iso8859-1"}),fe=f.basename()+".nex",xe=await Kt({_preferPolyfill:!1,suggestedName:fe,types:[{description:"NEXUS file",accept:{"text/nexus":[".nex"]}}]});pe.write(ie,xe)},processOptions:function(i){let l=p.xml.cloneNode(!0);if(i.get("option_normalize")){let n=l.querySelectorAll("w[lemma]");for(let t of n)t.textContent=t.getAttribute("lemma")}if(i.get("option_mergegroups")){let n=l.querySelectorAll("cl");for(let t of n){let r=t.removeChild(t.firstChild);for(;t.firstChild;){let o=r.getAttribute("lemma")||r.textContent,h=t.firstChild.getAttribute("lemma")||t.firstChild.textContent;for(r.setAttribute("lemma",o+h);t.firstChild.firstChild;)r.appendChild(t.firstChild.firstChild);t.firstChild.remove()}r.getAttribute("lemma")===r.textContent&&r.removeAttribute("lemma"),t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t)}}if(i.get("option_insignificant")){let n=l.querySelectorAll('w[insignificant="true"]');for(let t of n)t.parentNode.removeChild(t)}if(i.get("option_binary")){let t=[...f.firsttext().querySelectorAll('w[binary="true"]')].map(r=>r.getAttribute("n"));for(let r of t){let o=l.querySelectorAll(`w[n="${r}"]:not(:empty)`);if(o.length===0)continue;let h=`[${o[0].textContent}]`;for(let g of o)g.textContent=h}}if(i.get("option_noempty")){let n=l.querySelectorAll("w:empty");for(let t of n)t.textContent="[]"}return i.get("option_basetext")?pe.makeApp(i,l):l},makeHeader(i,l){let n=i.createElementNS(x.teins,"teiHeader"),t=i.createElementNS(x.teins,"fileDesc"),r=i.createElementNS(x.teins,"sourceDesc"),o=i.createElementNS(x.teins,"listWit");for(let h of f.teis(l)){let g=h.getAttribute("n"),v=i.createElementNS(x.teins,"witness");v.setAttribute("xml:id",g);let P=i.createElementNS(x.teins,"idno");P.setAttribute("type","siglum"),P.append(g),v.appendChild(P),o.appendChild(v)}return r.appendChild(o),t.appendChild(r),n.appendChild(t),n},makeApp(i,l){let n=i.get("option_basetext"),t=f.tei(n,l),r=i.get("option_app_normalize"),o=document.implementation.createDocument(x.teins,"",null);o.appendChild(t);let h=pe.makeHeader(o,l);t.insertBefore(h,t.firstChild);let g=f.words(!1,t);for(let v of g){let P=v.getAttribute("n"),k=r&&v.getAttribute("lemma")||v.textContent,M=[],V=new Map,Z=f.words(P,l);for(let ne of Z){let ie=ne.closest("TEI").getAttribute("n");if(r&&ne.getAttribute("lemma")===k)M.push(ie);else if(ne.textContent===k)M.push(ie);else{let fe=ne.textContent===""?"[om.]":ne.textContent,xe=V.get(fe)||[];xe.push(ie),V.set(fe,xe)}}if(V.size===0)for(;v.firstChild;)v.parentElement.insertBefore(v.firstChild,v);else{let ne=o.createElementNS(x.teins,"app");ne.setAttribute("n",P);let ie=o.createElementNS(x.teins,"lem"),fe=M.map(xe=>`#${xe}`).join(" ");for(fe!==""&&ie.setAttribute("wit",fe);v.firstChild;)ie.appendChild(v.firstChild);ne.appendChild(ie);for(let[xe,we]of V){let be=o.createElementNS(x.teins,"rdg"),Ce=we.map(Ne=>`#${Ne}`).join(" ");be.setAttribute("wit",Ce),be.append(xe),ne.appendChild(be)}v.parentElement.insertBefore(ne,v),ie.textContent.match(/\s$/)&&v.parentElement.insertBefore(o.createTextNode(" "),v)}v.remove()}return o},options(){return document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <input type="checkbox" id="option_insignificant" name="option_insignificant"><label for="option_insignificant">Remove insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_binary" name="option_binary"><label for="option_binary">Binarize marked lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_noempty" name="option_noempty"><label for="option_noempty">Gaps are significant</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups"><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`)},appOptions(){let i=document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <label for="option__basetext">Base text</label>
        <select id="option__basetext" name="option_basetext"></select>
      </div>
      <div>
        <input type="checkbox" id="option__app_insignificant" name="option_app_insignificant"><label for="option_app_insignificant">Ignore insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups" checked><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_app_normalize" name="option_app_normalize" checked><label for="option_app_normalize">Normalized spellings in positive apparatus</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings in negative apparatus</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`),l=i.getElementById("option__basetext"),n=[...f.trs()].map(t=>t.dataset.n);for(let t of n){let r=document.createElement("option");r.value=t,r.append(t),l.appendChild(r)}return i},showOptions:function(i,l){let n=l(),t=document.createElement("div");t.id="blackout",t.appendChild(n),document.body.appendChild(t);let r=function(h){h.preventDefault();var g=[];let v=document.getElementById("exportform").elements;for(let k of v)k.type==="checkbox"?g.push([k.name,k.checked]):g.push([k.name,k.value]);let P=pe.processOptions(new Map(g));i(P),document.body.removeChild(t)};return t.querySelector("button").addEventListener("click",r),t.addEventListener("click",pe.blackoutClick),t},blackoutClick:function(i){if(!i.target.closest(".popup")){let n=document.querySelector("#blackout");n.parentNode.removeChild(n)}}},de={selectAll(i){let l=document.createRange();l.selectNodeContents(i);let n=window.getSelection();n.removeAllRanges(),n.addRange(l)},deselect(){let i=window.getSelection();i.removeAllRanges?i.removeAllRanges():i.empty&&i.empty()},treeMouseover(i){let l=i.target.classList.contains("tree-lemma")?i.target:i.target.closest(".tree-lemma");l&&(L.highlightTreeLemma(l.dataset.id),l.addEventListener("mouseout",L.unhighlightTrees));let n=i.target.dataset.reconstructed;if(!n)return;let t=document.createElement("div");t.id="tooltip",t.style.top=i.pageY+"px",t.style.left=i.pageX+"px",t.style.opacity=0,t.style.transition="opacity 0.2s ease-in",p.viewdiv.parentElement.appendChild(t);let r=document.createElement("div");if(r.appendChild(document.createTextNode(n)),this.script!==0?t.appendChild(Ot(r,x.scripts[this.script])):t.appendChild(r),i.target.classList.contains("reconstructed")){let o=i.target.parentNode.querySelector("span.tree-lemma");if(o&&o.dataset.hasOwnProperty("emended")){let h=document.createElement("div");h.classList.add("emphasis"),h.appendChild(document.createTextNode(o.textContent)),this.script!==0?t.prepend(Ot(h,x.scripts[this.script])):t.prepend(h)}}window.getComputedStyle(t).opacity,t.style.opacity=1,i.target.addEventListener("mouseout",u)},treeClick(i){i.target.classList.contains("witness")?C.text(i.target.dataset.key):i.target.classList.contains("reconstructed")?C.text(i.target.dataset.label):i.target.classList.contains("internal")&&D.startReconstruction(i),u()},keyDown(i){if(!p.editing&&i.key.substring(0,5)==="Arrow")de.cycleVariant(i);else if(i.ctrlKey||i.metaKey)i.key==="Z"?D.redo():i.key==="z"&&D.undo();else if(!p.editing&&p.matrix&&!p.matrix.closed&i.key==="Enter"){let l=f.highlitcell();l&&(i.preventDefault(),D.startEditCell(l))}},cycleVariant(i){let l=f.highlitcell()||p.viewdiv.querySelector("td.highlit")||p.viewdiv.querySelector('td[data-n="0"]');switch(i.key){case"ArrowRight":{if(!p.matrix.closed&&l){let n=l.nextElementSibling;n&&de.textClick({target:n})}else{let n=p.viewdiv.querySelector(".highlit"),t=n?n.dataset.n:0,r=parseInt(t)+1;for(;r<=p.maxlemma;){let o=p.viewdiv.querySelectorAll('[data-n="'+r+'"]');for(let h of o)if(h&&!h.classList.contains("invisible")){de.textClick({target:h});return}r++}}break}case"ArrowLeft":{if(!p.matrix.closed&&l){let n=l.previousElementSibling;n&&de.textClick({target:n})}else{let n=p.viewdiv.querySelector(".highlit"),t=n?n.dataset.n:0,r=parseInt(t)-1;for(;r>=0;){let o=p.viewdiv.querySelectorAll('[data-n="'+r+'"]');for(let h of o)if(h&&!h.classList.contains("invisible")){de.textClick({target:h});return}if(r--,l){de.textClick({target:l.previousElementSibling});return}}}break}case"ArrowUp":{if(p.matrix.closed||!l)return;let t=l.closest("tr").previousElementSibling;if(!t||!t.dataset.n)return;let r=t.querySelector(`td[data-n="${l.dataset.n}"]`);de.textClick({target:r});break}case"ArrowDown":{if(p.matrix.closed||!l)return;let t=l.closest("tr").nextElementSibling;if(!t||t.tagName!=="TR")return;let r=t.querySelector(`td[data-n="${l.dataset.n}"]`);de.textClick({target:r})}}},textClick(i,l=!1){if(i.target.closest("tr.header")){de.matrixHeaderClick(i);return}let n=i.target.classList.contains("lemma")?i.target:i.target.closest(".lemma");if(n){if(!l&&i.ctrlKey){de.rightClick(i);return}let t=n.dataset.n,r=f.highlitrow();if(L.unHighlightAll(),L.highlightLemma(t),L.repopulateTrees(t),ye.xScroll(t,r),n.tagName==="TD")n.classList.add("highlitcell");else{let o=n.closest(".text-box");if(o){let h=o.dataset.id;f.tr(h).querySelector(`td[data-n="${t}"]`).classList.add("highlitcell")}}}},textMouseup(){let i=f.selection();L.highlightRange(i),H()},menuMouseover(i){let l=i.target.classList.contains("menubox")?i.target:i.target.closest(".menubox");if(l){let n=l.querySelector("ul");n&&(n.style.display="block"),l.classList.add("open")}},menuMouseout(i){let l=i.target.classList.contains("menubox")?i.target:i.target.closest(".menubox");if(l){let n=l.querySelector("ul");n&&(n.style.display="none"),l.classList.remove("open")}},menuClick(i){!i.target.parentElement||(i.target.parentElement.className==="ms"&&(de.menuMouseout(i),C.text(i.target.dataset.name)),i.target.parentElement.className==="tree"&&(de.menuMouseout(i),i.target.closest("li[data-name]")&&C.tree(i.target.dataset.stemmaid,i.target.dataset.treeid)))},thDragStart(i){i.dataTransfer.setData("text/plain",i.target.textContent),D.startMoveRow(i.target.parentNode,i)},trDragEnter(i){let l=i.target.nodeType===1?i.target.closest("tr"):i.target.parentElement.closest("tr");l&&l.classList.add("dragenter")},trDragLeave(i){let l=i.target.nodeType===1?i.target.closest("tr"):i.target.parentElement.closest("tr");l&&l.classList.remove("dragenter")},trDragDrop(i){i.preventDefault(),D.finishMoveRow(i)},matrixMousedown(i){if(i.button!==0)return;if(i.ctrlKey){de.rightClick(i);return}let l=i.target.nodeType===1?i.target.closest(".lemma"):i.target.parentElement.closest(".lemma");if(l){if(l.isContentEditable)return;L.unHighlightAll(),L.highlightLemma(l.dataset.n);let n=p.matrix.boxdiv.querySelector("table");n.addEventListener("mouseover",de.matrixMouseover),n.addEventListener("mouseup",de.matrixMouseup)}},matrixMouseup(){let i=f.highlit();L.highlightRange(i);let l=p.matrix.boxdiv.querySelector("table");l.removeEventListener("mouseover",de.matrixMouseover),l.removeEventListener("mouseup",de.matrixMouseup)},matrixMouseover(i){let l=i.target.nodeType===1?i.target.closest(".lemma"):i.target.parentElement.closest(".lemma");l&&L.highlightLemma(l.dataset.n)},matrixHeaderClick(i){if(i.target.tagName!=="INPUT")return;let l=i.target.className;if(l!=="insignificant"&&l!=="binary")return;let n=i.target.closest("th").dataset.ref,t=f.firsttd(n).dataset[l]!=="true",r=new Map([[n,t]]);D.doMarkAs(l,r)},rightClick(i){let l=i.target.nodeType===1?i.target.closest("tr[data-n] th"):i.target.parentElement.closest("tr[data-n] th");if(l){i.preventDefault(),Se.remove();let t=Se.create(i),r=[{text:"move row",func:D.startMoveRow.bind(null,l.parentNode)},{text:"delete row",func:D.doDeleteRow.bind(null,l.parentNode.dataset.n)}];Se.populate(t,r),Se.show(t);return}let n=i.target.nodeType===1?i.target.closest("td.lemma"):i.target.parentElement.closest("td.lemma");if(n){i.preventDefault();let t=n.classList.contains("highlit")?function(){let h=f.highlit();return h.size===1&&!n.classList.contains("highlitcell")&&(L.unCelllightAll(),n.classList.add("highlitcell")),h}():(de.textClick(i,!0),new Set([n.dataset.n])),r=t.size>1?[{text:"merge columns",func:D.startMerge.bind(null,t)},{text:"ungroup columns",alt:"group columns",toggle:B.grouped,func:D.startGroup.bind(null,!1)},{text:"delete columns",func:D.startRemoveCol.bind(null,t)}]:[{text:"edit cell",func:D.startEditCell.bind(null,n)},{text:"delete column",func:D.startRemoveCol.bind(null,t)},{text:"insert column",func:D.startInsertCol}];Se.remove();let o=Se.create(i);Se.populate(o,r),Se.show(o)}}},D={undo:function(){let i=p.undo.pop();i&&i[0](...i[1])},redo:function(){let i=p.redo.pop();i&&i[0](...i[1])},doStack:function(i,l="do"){l==="undo"?(i[1].push("redo"),p.redo.push(i)):l==="redo"?(i[1].push("undo"),p.undo.push(i)):(i[1].push("undo"),p.undo.push(i),p.redo=[])},doMulti:function(i,l){let n=[];for(let t of i){let r=t[0](...t[1],"multido");n.unshift(r)}D.doStack([D.doMulti,[n]],l)},startMoveRow:function(i,l){if(p.dragged=i,p.dragged.classList.add("dragging"),l.type!=="dragstart"){for(let n of f.trs())n.classList.add("moveinprogress");p.matrix.boxdiv.querySelector("table").addEventListener("mousedown",D.finishMoveRow)}},startMerge:function(i){let l=i===!1?f.highlit():i,n=f.clauses(l,!0);if(!n)D.doMerge(l,"do");else if(n[0]===null){let t=n.filter(r=>r!==null).map(r=>[D.doUngroup,[r]]).concat([[D.doMerge,[l]]]);D.doMulti(t,"do")}else{let t=f.clausesToRemove(n,l);if(!t)D.doMerge(l,"do");else{let r=t.map(o=>[D.doUngroup,[o]]).concat([[D.doMerge,[l]]]);D.doMulti(r,"do")}}},startGroup:function(i){let l=i===!1?f.highlit():i;B.grouped()?D.startUngroup(l):D.doGroup(l,"do")},startUngroup:function(i){let n=[...f.clauses(i)].map(t=>[D.doUngroup,[t]]);D.doMulti(n,"do")},startInsertCol:function(){let i=Math.max([...f.highlit()])||p.maxlemma;D.doInsertCol(i)},startRemoveCol:function(i){let l=i===!1?f.highlit():i,n=f.clauses(l);if(!n)D.doRemoveCol(l,"do");else{let t=f.clausesToRemove(n,l,1);if(!t)D.doRemoveCol(l,"do");else{let r=t.map(o=>[D.doUngroup,[o]]).concat([[D.doRemoveCol,[l]]]);D.doMulti(r,"do")}}},startRemoveEmpty:function(){let i=f.empty(),l=f.clauses(i);if(!l)D.doRemoveCol(i,"do");else{let n=f.clausesToRemove(l,i,1);if(!n)D.doRemoveCol(i,"do");else{let t=n.map(r=>[D.doUngroup,[r]]).concat([[D.doRemoveCol,[i]]]);D.doMulti(t,"do")}}},startEditCell:function(i){let l=i||f.highlitcell();!l||(D.unnormalize(l),l.dataset.oldContent=l.textContent,l.contentEditable="true",l.focus(),p.editing=!0,de.selectAll(l),l.addEventListener("blur",D.finishEditCell),l.addEventListener("keydown",D.cellKeyDown))},cellKeyDown:function(i){switch(i.key){case"Enter":D.finishEditCell(i);break;case"Escape":D.finishEditCell(i,!0);break;case"ArrowRight":{let l=f.cursorPos(i.target);l[0]===l[1]&&(i.preventDefault(),D.finishEditCell(i),de.cycleVariant({key:"ArrowRight"}),D.startEditCell(f.highlitcell()));break}case"ArrowLeft":{f.cursorPos(i.target)[0]===0&&(i.preventDefault(),D.finishEditCell(i),de.cycleVariant({key:"ArrowLeft"}),D.startEditCell(f.highlitcell()));break}}},startMarkAs:function(i,l,n){let t=n.target.tagName==="INPUT"?n.target:n.target.querySelector("input"),r=l===!1?f.highlit():l,o=new Map([...r].map(h=>[h,!t.checked]));D.doMarkAs(i,o)},startNewRow:function(){let i=ve.row("new row"),l=i.querySelector("th");l.contentEditable=!0,l.addEventListener("blur",D.finishNewRow),l.addEventListener("keydown",D.thKeyDown),p.matrix.boxdiv.querySelector("tbody").appendChild(i),l.scrollIntoView(),l.focus(),document.execCommand("selectAll",!1,null),p.editing=!0},startRenameRow:function(){},startReconstruction:function(i){let l=i.target.dataset.key,n=i.target.closest(".tree-box").myTree,t=n.desc,r=document.createElement("div");r.id="blackout";let o=document.createRange().createContextualFragment(`<div id="reconstructionoptions" class="popup">
    <form id="reconstructionform">
      <div>
        <label for="reconstructed_node_name">Label for node:</label>
        <input type="text" id="reconstructed_node_name" name="reconstructed_node_name" placeholder="${t}-${l}" size="15">
      </div>
      <div style="width: 100%; display: flex; justify-content: center;padding-top: 1em;">
        <button type="submit">Add to matrix</button>
      </div>
    </form>
</div>`);r.appendChild(o),document.body.appendChild(r);let h=function(v){v.preventDefault();let P=r.querySelector("input"),k=P.value?P.value:P.placeholder;D.doReconstruction(n,l,k),document.body.removeChild(r)};r.querySelector("button").addEventListener("click",h),r.addEventListener("click",pe.blackoutClick)},thKeyDown:function(i){i.key==="Enter"&&D.finishNewRow(i)},finishNewRow:function(i){let l=i.target,n=l.textContent;l.closest("tr").dataset.n=n;let t=ve.tei(n);p.xml.documentElement.appendChild(t),p.editing=!1,l.contentEditable=!1,l.removeEventListener("blur",D.finishNewRow),l.removeEventListener("keydown",D.thKeyDown),D.doStack([D.doDeleteRow,[n]],"do")},finishEditCell:function(i,l=!1){let n=i.target;p.editing=!1,n.contentEditable="false",n.removeEventListener("blur",D.finishEditCell),n.removeEventListener("keydown",D.cellKeyDown),n.blur(),de.deselect();let t=n.textContent;if(t===""){let g=n.querySelector("br");g&&g.remove()}if(l||t===n.dataset.oldContent)return;n.hasOwnProperty("IAST")||(n.IAST=n.cloneNode(!0)),n.IAST.textContent=t;let r=parseInt(n.dataset.n),o=n.closest("tr"),h=o.dataset.n;if(D.xmlChangeCell(r,h,t),o.dataset.hasOwnProperty("treename")&&!n.dataset.hasOwnProperty("emended")){let g=D.doEmend(r,h,"multido"),v=[];v.push([D.doChangeCell,[r,h,n.dataset.oldContent]]),v.push(g),D.doStack([D.doMulti,[v]],"do")}else D.doStack([D.doChangeCell,[r,h,n.dataset.oldContent]],"do");delete n.dataset.oldContent,D.refresh(),ye.updateAllHeaders(!0),n.classList.add("highlitcell")},finishMoveRow:function(i){let l=i.target.nodeType===1?i.target.closest("tr"):i.target.parentElement.closest("tr");if(l&&D.doMoveRow(p.dragged,l,"do"),i.type!=="drop"){for(let n of f.trs())n.classList.remove("moveinprogress");p.matrix.boxdiv.querySelector("table").removeEventListener("mousedown",D.finishMoveRow)}else for(let n of f.trs())n.classList.remove("dragenter");p.dragged.classList.remove("dragging"),p.dragged=null},doReconstruction:function(i,l,n){let t=ve.row(n,"pending");t.dataset.treename=i.name,t.dataset.nodename=l;let r=t.querySelector("th"),o=document.createElement("div");o.id="spinner",r.prepend(o);let h=ve.tei(n);h.setAttribute("type","reconstructed"),h.setAttribute("corresp",i.name),h.setAttribute("select",`#${l}`);let g=[...f.tds(!1,t)],v=[...f.words(!1,h)];p.matrix.boxdiv.querySelector("tbody").appendChild(t),r.scrollIntoView();let P=new Worker("./worker.js"),k=B.normalizedView(),M=f.serializedtexts(i.nexml,k),V=f.serializedlevels(i.levels,k),Z=new Map(M.map(ne=>[ne[0],ne[1][0]]));P.postMessage({readings:Z,levels:V,num:0,id:l}),P.onmessage=function(ne){let ie=ne.data.n,fe=ne.data.result;if(g[ie].textContent=fe,g[ie].IAST=g[ie].cloneNode(!0),g[ie].classList.remove("pending"),v[ie].textContent=fe,ie<p.maxlemma){let xe=new Map(M.map(we=>[we[0],we[1][ie+1]]));P.postMessage({readings:xe,levels:V,num:ie+1,id:l})}else{r.removeChild(o),p.xml.documentElement.appendChild(h),ye.updateAllHeaders(),i.draw();let xe=f.highlit();xe.size>0&&L.repopulateTrees(...f.lowhigh(xe));let we=document.getElementById("menu").querySelector(".ms"),be=document.createElement("li");be.setAttribute("data-name",n),be.appendChild(document.createTextNode(n)),we.appendChild(be),D.doStack([D.doDeleteRow,[n]],"do")}}},doDeleteRow:function(i,l="do"){let n=f.tr(i),t=f.tei(i),o=[...f.teis()].indexOf(t);n.parentNode.removeChild(n),t.parentNode.removeChild(t),ye.updateAllHeaders(),ge(),N(),D.doStack([D.doUndeleteRow,[n,t,o]],l)},doUndeleteRow:function(i,l,n,t="do"){let r=l.getAttribute("n"),o=[...f.teis()];if(n===o.length)p.xml.documentElement.appendChild(l),p.matrix.boxdiv.querySelector("tbody").appendChild(i);else{let h=[...f.trs()];p.xml.documentElement.insertBefore(l,o[n]),h[n].parentNode.insertBefore(i,h[n])}ye.updateAllHeaders(),ge(),N(),D.doStack([D.doDeleteRow,[r]],t)},doMoveRow:function(i,l,n="do"){let t=i.parentNode,r=[...f.trs()],o=i.previousElementSibling,h=r.indexOf(i),g=l!==null?r.indexOf(l):null,v=function(){l===null?t.insertBefore(i,t.firstChild):l.nextElementSibling?t.insertBefore(i,l.nextElementSibling):t.appendChild(i)},P=function(){let k=p.xml.documentElement,M=[...f.teis()],V=M[h];if(g===null)k.insertBefore(V,M[0]);else{let Z=M[g];Z.nextElementSibling?k.insertBefore(V,Z.nextElementSibling):k.appendChild(V)}};if(v(),P(),n==="multido")return[D.doMoveRow,[i,o]];D.doStack([D.doMoveRow,[i,o]],n)},doMerge:function(i,l="do"){let n=function(h,g,v){let P=h();var k=[];for(let M of P){let V=[...v].map(ie=>g(ie,M)),Z=V.map(ie=>ie.cloneNode(!0));k.push(Z);for(let ie of V)D.unnormalize(ie);let ne=V.reduce(function(ie,fe){if(fe.hasChildNodes())for(;fe.firstChild;)ie.appendChild(fe.firstChild);return fe.parentNode.removeChild(fe),ie});ne.normalize(),ne.dataset?(delete ne.dataset.normal,ne.IAST=ne.cloneNode(!0)):ne.removeAttribute("lemma")}return[h,g,k]},t=n(f.trs,f.firsttd,i),r=n(f.texts,f.firstword,i),o=parseInt([...i][0]);if(D.renumber(o),D.restyleGroups(i),D.refresh(),ye.updateAllHeaders(),l==="multido")return[D.doUnmerge,[t,r]];D.doStack([D.doUnmerge,[t,r]],l)},doUnmerge:function(i,l,n="undo"){let t=function(g,v,P){let k=f.whichattr(P[0][0]),M=P[0].map(ie=>ie.getAttribute(k)),V=M[0],Z=g();for(var ne=0;ne<Z.length;ne++){let ie=P[ne].pop(),fe=v(V,Z[ne]);fe.parentNode.replaceChild(ie,fe);for(let xe of P[ne])ie.parentNode.insertBefore(xe,ie)}return M};t(...i);let r=t(...l),h=[...r].sort((g,v)=>parseInt(g)-parseInt(v))[0];if(D.renumber(h),D.reIAST(r),D.refresh(),D.restyleGroups(r),ye.updateAllHeaders(),n==="multido")return[D.doMerge,[r]];D.doStack([D.doMerge,[r]],n)},doGroup:function(i,l="do"){let n=[...i],t=n.shift(),r=f.texts();for(let h of r){let g=document.createElementNS("http://www.tei-c.org/ns/1.0","cl"),v=f.firstword(t,h);v.parentNode.insertBefore(g,v),g.appendChild(v);for(let P of i)g.appendChild(f.firstword(P,h))}let o=n.pop();for(let h of f.tds(t))h.classList.add("group-start");for(let h of f.tds(o))h.classList.add("group-end");for(let h of n)for(let g of f.tds(h))g.classList.add("group-internal");for(let h of p.textboxes)h.refresh();if(l==="multido")return[D.doUngroup,[i]];D.doStack([D.doUngroup,[i]],l)},doUngroup:function(i,l="do"){let n=f.texts();for(let r of n){let o;for(let h of i){let g=f.firstword(h,r);o||(o=g.closest("cl")),o.parentNode.insertBefore(g,o)}o.parentNode.removeChild(o)}let t=[...i].map(r=>[...f.tds(r)]).reduce((r,o)=>r.concat(o),[]);for(let r of t)r.classList.remove("group-start","group-internal","group-end");for(let r of p.textboxes)r.refresh();if(l==="multido")return[D.doGroup,[i]];D.doStack([D.doGroup,[i]],l)},doGroupWords:function(){let i=0,l=[];for(let n=0;n<=p.maxlemma;n++){let t=f.tds(n),r=t[0].classList;if(r.contains("group-start")||r.contains("group-internal")||r.contains("group-end")){i=n+1;continue}let o=t.length,h=0;if(n===p.maxlemma)h=o;else for(let g of t)(g.IAST?g.IAST.textContent:g.textContent).slice(-1)===" "&&h++;if(h/o>=.5)if(i===n){i++;continue}else{let g=f.range(i,n);l.push([D.doGroup,[g]]),i=n+1}}D.doMulti(l)},doRemoveCol:function(i,l="do"){let n=function(g,v,P){let k=g();var M=[];for(let V of k){let Z=[...P].map(ie=>{let fe=v(ie,V);return D.unnormalize(fe),fe}),ne=Z.map(ie=>ie.cloneNode(!0));M.push(ne);for(let ie of Z)ie.parentNode.removeChild(ie)}return[g,v,M]},t=n(f.trs,f.firsttd,i),r=n(f.texts,f.firstword,i),o=[...i].sort((g,v)=>parseInt(g)-parseInt(v)),h=parseInt([...o][0])-1;if(D.renumber(h),D.refresh(),D.restyleGroups(i,!0),ye.updateAllHeaders(),l==="multido")return[D.doUnremoveCol,[t,r]];D.doStack([D.doUnremoveCol,[t,r]],l)},doUnremoveCol:function(i,l,n){let t=function(v,P,k){let M=f.whichattr(k[0][0]),V=k[0].map(fe=>fe.getAttribute(M)),Z=V[0],ne=v();for(var ie=0;ie<ne.length;ie++){let fe=P(Z,ne[ie]);for(let xe of k[ie])fe.parentNode.insertBefore(xe,fe)}return V};t(...i);let r=t(...l),o=[...r].sort((v,P)=>parseInt(v)-parseInt(P)),h=parseInt(o[0])-1;D.renumber(h);let g=document.querySelectorAll(".highlitcell");for(let v of g)v.classList.remove("highlitcell");if(D.reIAST(r),D.refresh(),D.restyleGroups(r,!0),ye.updateAllHeaders(),n==="multido")return[D.doRemoveCol,[r]];D.doStack([D.doRemoveCol,[r]],n)},doInsertCol:function(i,l="do"){let n=function(r,o,h,g){let v=r();for(let P of v){let k=o(g,P),M=h(g+1);k.insertAdjacentElement("afterend",M)}};n(f.trs,f.firsttd,ve.emptycell,i),n(f.texts,f.firstword,ve.emptyword,i),D.renumber(i),D.refresh(),D.restyleGroups([i,i+1],!0),ye.updateAllHeaders();let t=[i+1];if(l==="multido")return[D.doRemoveCol,[t]];D.doStack([D.doRemoveCol,[t]],l)},doEmend:function(i,l,n="do"){let t=[...f.trs()][l],r=f.firsttd(i,t);r.dataset.emended=!0;let o=f.tei(l).querySelector("text");if(f.firstword(i,o).setAttribute("emended","true"),n==="multido")return[D.doUnemend,[i,l]];D.doStack([D.doUnemend,[i,l]],n)},doUnemend:function(i,l,n="do"){let t=[...f.trs()][l],r=f.firsttd(i,t);delete r.dataset.emended;let o=f.tei(l).querySelector("text");if(f.firstword(i,o).removeAttribute("emended"),n==="multido")return[D.doEmend,[i,l]];D.doStack([D.doEmend,[i,l]],n)},doChangeCell:function(i,l,n,t="do"){let r=D.xmlChangeCell(i,l,n),o=D.htmlChangeCell(i,l,n);if(D.refresh(),ye.updateAllHeaders(!0),de.textClick({target:o}),t==="multido")return[D.doChangeCell,[i,l,r]];D.doStack([D.doChangeCell,[i,l,r]],t)},htmlChangeCell:function(i,l,n){let t=f.tr(l),r=f.firsttd(i,t);return D.unnormalize(r),r.textContent=n,r.IAST&&(r.IAST=r.cloneNode(!0)),r},xmlChangeCell:function(i,l,n){let t=f.tei(l).querySelector("text"),r=f.firstword(i,t);D.unnormalize(r);let o=r.textContent;return r.childNodes.length===0?r.appendChild(document.createTextNode(n)):r.textContent=n,o},doMarkAs:function(i,l,n="do"){let t=[...l.keys()],r=f.attr(i,t);for(let o of t){let h=f.tds(o),g=f.words(o);if(l.get(o)===!0){for(let P of h)P.dataset[i]="true";for(let P of g)P.setAttribute(i,"true")}else{for(let P of h)delete P.dataset[i];for(let P of g)P.removeAttribute(i)}let v=f.checkbox(o,i);v.checked=l.get(o)}if(n==="multido")return[D.doMarkAs,[i,r]];D.doStack([D.doMarkAs,[i,r]],n)},refresh:function(){for(let i of p.textboxes)i.refresh();L.rehighlight(),B.anyhighlit()?L.repopulateTrees(...f.lowhigh(f.highlit())):L.clearTrees()},renumber:function(i=0){let l=function(n,t,r){let o=n();for(let g of o){let v=[...t(!1,g)],P=f.whichattr(v[0]);for(var h=parseInt(r)+1;h<v.length;h++)v[h].setAttribute(P,h)}};l(f.trs,f.tds,i),l(()=>[!0],f.ths,i),l(f.texts,f.words,i),p.maxlemma=f.maxlemma()},reIAST:function(i){let l=[...i].map(n=>[...f.lemmata(n)]).flat();for(let n of l)n.IAST=n.cloneNode(!0)},restyleGroups:function(i,l=!1){let t=l?function(o){var h=[...o];let g=parseInt(i[0])-1,v=parseInt(i[i.length-1])+1;return h.unshift(g),h.push(v),h}(i):i,r=function(o,h=!1){let g=new Set(["group-start","group-internal","group-end"]);h&&g.delete(h);for(let v of o){for(let P of g)v.classList.remove(P);h&&v.classList.add(h)}};for(let o of t){let h=f.firstword(o),g=f.tds(o);if(g.length===0)continue;let v=h.closest("cl");v?h===v.firstElementChild?r(g,"group-start"):h===v.lastElementChild?r(g,"group-end"):r(g,"group-internal"):r(g)}},startRenormalize:function(i){let l=i===!1?f.highlit():i;D.doRenormalize(Math.min(...l),Math.max(...l))},doRenormalize:function(i,l,n=!1,t="do"){let r=B.normalizedView(),o=new Map,h=[...f.trs()],g=[...f.texts()],v=n?[n]:[...h.keys()];for(let P of v){let k=new Map,M=g[P],V=[...f.words(!1,M)],Z=f.firstword(i,M),ne=f.firstword(l,M),ie=V.indexOf(Z),fe=V.indexOf(ne),xe=V.slice(ie,fe+1),we=h[P],Ce=[...f.tds(!1,we)].slice(ie,fe+1),Ne=xe.map(Te=>Te.textContent),Be=w1(Ne);for(let Te=0;Te<Be.length;Te++){let Le=xe[Te],qe=Be[Te],ze=Ne[Te],He=Ce[Te],Xe=Le.hasAttribute("lemma")?Le.getAttribute("lemma"):!1;if(Xe!==!1){if(Xe===qe)continue;k.set(He.dataset.n,Xe),D.unnormalize(Le),D.unnormalize(He)}else k.set(He.dataset.n,null);qe!==ze&&(Le.setAttribute("lemma",qe),He.dataset.normal=qe,r&&(He.textContent=qe))}o.set(P,k)}ye.updateAllHeaders(!0),ye.xScrollToHighlit(),D.doStack([D.doUnrenormalize,[o]],t)},doUnrenormalize:function(i,l="undo"){let n=B.normalizedView(),t=new Map,r=[...f.trs()],o=[...f.texts()];for(let[h,g]of i.entries()){let v=r[h],P=o[h],k=new Map;for(let[M,V]of g.entries()){let Z=f.firsttd(M,v),ne=f.firstword(M,P),ie=ne.hasAttribute("lemma")?ne.getAttribute("lemma"):null;k.set(M,ie),V===null?(D.unnormalize(Z),D.unnormalize(ne)):(Z.dataset.normal=V,ne.setAttribute("lemma",V),n&&(Z.textContent=V))}t.set(h,k)}D.doStack([D.doUnrenormalize,[t]],l)},unnormalize:function(i){i.hasOwnProperty("IAST")&&(i.textContent=i.IAST.textContent),i.dataset&&i.dataset.hasOwnProperty("normal")&&delete i.dataset.normal,i.getAttribute("lemma")&&i.removeAttribute("lemma")}},ye={toggleNormalize:function(){B.normalizedView()?ye.showUnnormalized():ye.showNormalized()},showNormalized:function(i){if(i)i.updatescript();else{document.getElementById("views").classList.add("normalized");for(let n of p.textboxes)n.updatescript();p.matrix.updatescript(),B.anyhighlit()?L.repopulateTrees(...f.lowhigh(f.highlit())):L.clearTrees()}ye.updateAllHeaders(!0),ye.xScrollToHighlit()},showUnnormalized:function(){document.getElementById("views").classList.remove("normalized"),p.matrix.updatescript();for(let i of p.textboxes)i.updatescript();B.anyhighlit()?L.repopulateTrees(...f.lowhigh(f.highlit())):L.clearTrees(),ye.updateAllHeaders(!0),ye.xScrollToHighlit()},toggleHeader:function(){let i=p.matrix.boxdiv.querySelector("tr.header");i.style.display==="none"?i.style.display="table-row":i.style.display="none"},updateHeaders(i){for(let l of i){let n=f.firstth(l),[t,r]=f.readings(l),o=n.querySelector("span.readings"),h=t<2?t:`${t}(${r.size})`;o.textContent=h}},updateAllHeaders(i=!1){let l=[...f.trs()],n=l.map(g=>f.trWalker(g)),t=[...f.tds(!1,l[0])],r=[...f.ths()],o=p.matrix.boxdiv.querySelector("tr.header"),h=function(){let g=document.createElement("th"),v=document.createElement("span");v.classList.add("readings"),g.appendChild(v);let P=document.createElement("form");return P.innerHTML='<div><input class="insignificant" type="checkbox">Insignificant</div><div><input class="binary" type="checkbox">Binary</div>',g.appendChild(P),o.appendChild(g),g};for(let g=0;g<t.length;g++){let v=g>=r.length?h():r[g],P=t[g];v.dataset.ref=P.dataset.n;let k=0,M=new Set;for(let Z of n){let ne=Z.nextNode().textContent;ne!==""&&(k++,M.add(ne))}let V=k<2?k:`${k}(${M.size})`;v.querySelector("span.readings").textContent=V,i||(v.querySelector("input.insignificant").checked=!!P.dataset.insignificant,v.querySelector("input.binary").checked=!!P.dataset.binary)}if(r.length>t.length)for(let g=t.length;g<r.length;g++)o.removeChild(r[g])},xScrollToHighlit:function(){let i=f.highlit();i.size>0&&ye.xScroll([...i][0])},xScroll:function(i,l){if(!i)return;let n=l||f.firsttr(),t=f.firsttd(i,n),r=t.getBoundingClientRect(),o=p.matrix.boxdiv,g=o.getBoundingClientRect().right,v=n.querySelector("th").getBoundingClientRect(),P=v.right,k=r.right>g,M=r.left+.1<P;k&&t.scrollIntoView({inline:"end",block:"nearest"}),M&&(t.scrollIntoView({inline:"start",block:"nearest"}),o.scroll({left:o.scrollLeft-v.width}))}},ve={tei:function(i){let l=p.xml.createElementNS(x.teins,"TEI");l.setAttribute("n",i);let n=f.firsttext().cloneNode(!0);l.appendChild(n);for(let t of f.words(!1,n))for(t.removeAttribute("lemma");t.firstChild;)t.firstChild.remove();return l},emptycell:function(i){let l=document.createElement("td");return l.className="lemma",l.dataset.n=i,l},emptyword:function(i,l=p.xml){let n=l.createElementNS(x.teins,"w");return n.setAttribute("n",i),n},emptywords:function(i,l,n){let t=l||p.maxlemma,r=n||0;for(let o=r;o<=t;o++){let h=ve.emptyword(o);i.appendChild(h)}},row:function(i,l){let n=document.createElement("tr"),t=document.createElement("th");t.scope="row",t.draggable=!0,t.appendChild(document.createTextNode(i)),t.addEventListener("dragstart",de.thDragStart),n.dataset.n=i,n.appendChild(t);let r=f.firsttr();for(let o of r.querySelectorAll("td")){let h=document.createElement("td");h.dataset.n=o.dataset.n,h.className=o.className,l&&h.classList.add(l),n.appendChild(h)}return n}},Se={create:function(i){let l=document.createElement("div");return l.classList.add("contextmenu"),l.style.left=i.clientX-12+"px",l.style.top=i.clientY-22+"px",l},remove:function(){for(let i of document.querySelectorAll(".contextmenu"))i.parentNode.removeChild(i)},show:function(i){document.body.appendChild(i)},populate:function(i,l){let n=document.createElement("ul");for(let t of l){let r=document.createElement("li");if(t.hasOwnProperty("cond")){let o=document.createRange().createContextualFragment('<form><input type="checkbox"'+(t.cond()?" checked":"")+"></form>");r.appendChild(o)}if(t.hasOwnProperty("toggle")){let o=t.toggle()?t.text:t.alt;r.appendChild(document.createTextNode(o))}else r.appendChild(document.createTextNode(t.text));r.addEventListener("mouseup",t.func),n.appendChild(r)}i.appendChild(n)}};class G{constructor(l){this.name=l,this.box=document.createElement("div"),this.box.classList.add("menubox");let n=document.createElement("div");n.classList.add("heading"),n.appendChild(document.createTextNode(l)),this.box.appendChild(n),n.addEventListener("mouseover",this.checkConditions.bind(this)),this.box.addEventListener("mouseup",this.click.bind(this)),this.items=new Map,this.conditions=new Map}populate(l){let n=this.box.querySelector("ul")||function(t){let r=document.createElement("ul");return t.box.appendChild(r),r}(this);for(let t of l){let r=document.createElement("li");if(t.hasOwnProperty("checkbox")){let o=document.createElement("form"),h=document.createElement("input");h.type="checkbox",h.addEventListener("click",g=>g.preventDefault()),o.appendChild(h),r.appendChild(o),r.appendChild(document.createTextNode(t.text)),this.conditions.set(h,t.checkbox)}else if(t.hasOwnProperty("toggle")){let o=document.createElement("span");o.appendChild(document.createTextNode(t.text)),o.dataset.text=t.text,o.dataset.alt=t.alt,this.conditions.set(o,t.toggle),r.appendChild(o)}else r.appendChild(document.createTextNode(t.text));t.hasOwnProperty("greyout")&&this.conditions.set(r,t.greyout),this.items.set(r,t.func),n.appendChild(r)}}click(l){let n=l.target.tagName==="LI"?l.target:l.target.closest("li");if(n&&!n.classList.contains("greyedout")){let t=this.items.get(n);t&&(t(l),this.checkConditions())}}checkConditions(){let l=new Map;for(let[n,t]of this.conditions){let r=l.get(t)||function(){let o=t();return l.set(t,o),o}();n.tagName==="INPUT"?n.checked=r:n.tagName==="SPAN"?r?n.textContent=n.dataset.alt:n.textContent=n.dataset.text:n.tagName==="LI"&&(r?n.classList.remove("greyedout"):n.classList.add("greyedout"))}}}class _e{constructor(l){this.name=l,this.script=0}show(){p.descs.appendChild(this.descbox),B.normalizedView()&&ye.showNormalized(this),p.viewdiv.appendChild(this.boxdiv),this.closed=!1}clear(){for(;this.boxdiv.firstChild;)this.boxdiv.removeChild(this.boxdiv.firstChild);this.svgcontainer&&(this.clearsvg(),this.boxdiv.appendChild(this.svgcontainer))}destroy(){p.viewdiv.removeChild(this.boxdiv),p.descs.removeChild(this.descbox);let l=p.trees.indexOf(this);l>-1&&p.trees.splice(l,1);let n=p.textboxes.indexOf(this);n>-1&&p.textboxes.splice(n,1),this.closed=!0,this.name==="Matrix"&&(document.getElementById("matrixmenu").style.display="block"),N(),L.rehighlight()}pullout(){this.destroy();let l="menubar=no,location=no,status=no,height=620,width=620,scrollbars=yes,centerscreen=yes",n=window.mainWindow?window.mainWindow.comboView.getWindows().length:p.windows.length,t=window.open("slave.html","slave"+n,l);t.mainWindow=window.mainWindow?window.mainWindow:window,t.startbox=this.text?{text:{name:this.name}}:{tree:this.name},t.mainWindow.comboView.addWindow(t)}makeDescBox(){let l=document.createElement("div"),n=document.createElement("div");n.classList.add("closer"),n.innerHTML="x",n.title="close";let t=document.createElement("div");t.classList.add("scripter"),t.innerHTML="A",t.title="change script",l.appendChild(n),l.appendChild(t),l.appendChild(document.createTextNode(this.desc)),this.descbox=l,n.addEventListener("click",this.destroy.bind(this)),t.addEventListener("click",this.cyclescript.bind(this))}cyclescript(){this.script=this.script+1,this.script===x.scripts.length&&(this.script=0);let l=this.descbox.querySelector(".scripter");this.script===0?l.innerHTML="A":l.innerHTML=to[x.scripts[this.script]]("a"),x.scripts[this.script]==="grantha"?l.classList.add("grantha"):l.classList.remove("grantha"),this.updatescript()}updatescript(){let l=this.boxdiv.querySelectorAll(".lemma,.tree-lemma");for(let n of l){let t=n.dataset.hasOwnProperty("normal");if(!t&&n.textContent.trim()==="")continue;let r=function(){if(B.normalizedView()&&t){let h=document.createElement("span");return h.appendChild(document.createTextNode(n.dataset.normal)),h}else return n.IAST.cloneNode(!0)}(),o=this.script===0?r:Ot(r,x.scripts[this.script]);for(n.innerHTML="";o.firstChild;)n.appendChild(o.firstChild)}x.scripts[this.script]==="grantha"?this.boxdiv.classList.add("grantha"):this.boxdiv.classList.remove("grantha"),this.boxdiv.classList.contains("matrix")&&ye.xScrollToHighlit()}}class Ae extends _e{constructor(l,n){super(`#${l} #${n}`);this.stemmaid=l,this.id=n,this.nexml=p.treelist.get(this.name).cloneNode(!0),this.desc=this.nexml.querySelector("tree").getAttribute("label")}init(){this.makeDescBox();let l=document.createElement("div");l.classList.add("tree-box");var n,t=0;do n="tree"+t,t++;while(document.getElementById(n));l.id=n,this.boxdiv=l,this.boxdiv.addEventListener("mouseover",de.treeMouseover.bind(this)),this.boxdiv.addEventListener("click",de.treeClick),this.svgcontainer=document.createElement("div"),this.svgcontainer.id=this.boxdiv.id+"container",this.boxdiv.appendChild(this.svgcontainer),this.boxdiv.myTree=this,this.calcPaths(),this.jiggleroot(),this.findLevels(),this.labelInternal()}show(){p.descs.appendChild(this.descbox),p.viewdiv.appendChild(this.boxdiv)}jiggleroot(){let l=this.nexml.evaluate('//nex:node[@root="true"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,n=this.nexml.evaluate('//nex:edge[@source="'+l.id+'"]|//nex:edge[@target="'+l.id+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);if(n.snapshotLength===3){var t,r;for(let o=0;o<n.snapshotLength;o++){let h=n.snapshotItem(o),g=h.getAttribute("source"),v=h.getAttribute("target"),P=this.nexml.evaluate('//nex:node[@id="'+g+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,k=this.nexml.evaluate('//nex:node[@id="'+v+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!P.hasAttribute("otu")&&!k.hasAttribute("otu")){t=h,r=v===l.id?"target":"source";break}}if(t){let o=this.nexml.createElementNS(l.namespaceURI,"node");o.id="fakeroot",o.setAttribute("root","true"),l.removeAttribute("root"),l.parentElement.insertBefore(o,l);let h=this.nexml.createElementNS(l.namespaceURI,"edge");h.id="newrootedge",h.setAttribute("length","0"),h.setAttribute("source","fakeroot"),h.setAttribute("target",l.id),l.parentElement.insertBefore(h,t),t.setAttribute(r,o.id)}}}findLevels(){let l=this.nexml.querySelectorAll("edge"),n=[...this.nexml.querySelectorAll("node[otu]")],t=this.nexml;this.levels=[n];let r=function(g,v){let P=g.map(fe=>fe.id),k=new Map,M=new Map,V=[];for(let fe of v){let xe=fe.getAttribute("target"),we=fe.getAttribute("source"),be=(()=>P.indexOf(xe)!==-1?{ancestor:t.getElementById(we),child:t.getElementById(xe)}:P.indexOf(we)!==-1?{ancestor:t.getElementById(xe),child:t.getElementById(we)}:null)();if(be!==null)if(M.has(be.ancestor)){let Ce=M.get(be.ancestor);k.set(be.ancestor,[Ce.child,be.child]),V.push(fe),V.push(Ce.edge)}else M.set(be.ancestor,{child:be.child,edge:fe})}let Z=[...k.keys()],ne=[...M.keys()].reduce((fe,xe)=>(Z.indexOf(xe)===-1&&fe.push(M.get(xe).child),fe),[]),ie=[...v].reduce((fe,xe)=>(V.indexOf(xe)===-1&&fe.push(xe),fe),[]);return{match:k,remainder:[...new Set(ne)],edges:ie}};var o=n,h=l;do{let g=r(o,h);this.levels.push(g.match),o=[...g.match.keys(),...g.remainder],h=g.edges}while(h.length>0)}labelInternal(){for(let l of this.nexml.querySelectorAll("node:not([label])"))l.setAttribute("label",l.id)}fitch1(){let l=new Map;for(let n of this.levels[0]){let t=n.getAttribute("label"),r=this.boxdiv.querySelector(`span.tree-lemma[data-id="${t}"]`),o=r?[f.htmlreading(r,B.normalizedView())]:[];l.set(n,new Set(o))}for(let n=1;n<this.levels.length;n++)for(let[t,r]of this.levels[n]){let o=r.map(v=>l.get(v)),h=f.setIntersection(...o),g=h.size>0?h:f.setUnion(...o);l.set(t,g)}return l}fitch2(l){let n=[...this.nexml.querySelectorAll("node[otu]")],t=new Map;for(let[r]of this.levels[this.levels.length-1])t.set(r,l.get(r));for(let r=this.levels.length-1;r>1;r--)for(let[o,h]of this.levels[r]){let g=t.get(o);for(let v of h){if(n.indexOf(v)!==-1)continue;let P=l.get(v);if(P.size===1)t.set(v,P);else{let k=f.setIntersection(g,P),M=k.size>0?k:P;t.set(v,M)}}}return t}fitch(){let l=this.fitch1(),n=function(r){let o=[...r].map(h=>h.trim()===""?"_":h);return o.length===1?o[0]:"{"+o.join(", ")+"}"},t=this.fitch2(l);for(let[r,o]of t){let h=this.boxdiv.querySelector(`span.internal[data-key="${r.id}"]`);h.dataset.reconstructed=n(o)}}clearsvg(){for(;this.svgcontainer.firstChild;)this.svgcontainer.removeChild(this.svgcontainer.firstChild)}removecolors(){let l=this.nexml.querySelectorAll("node[color]");for(let n=0;n<l.snapshotLength;n++)l.snapshotItem(n).removeAttribute("color")}drawlines(l,n){if(this.removecolors(),l){let g=this.getPath(...l.split(";")).path,v=new Set;for(let P of g)v.add(P.getAttribute("target")),v.add(P.getAttribute("source"));for(let P of v){let k=this.nexml.evaluate('//nex:node[@id="'+P+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;k.getAttribute("root")||k.setAttribute("color",n)}}let t=parseInt(window.getComputedStyle(this.svgcontainer,null).width)-15,r=parseInt(window.getComputedStyle(this.boxdiv,null).height)-10,o=function(){return r<600?600:r}();T.PhyloCanvas.Render.Style.line.stroke="rgb(162,164,170)",this.phylocanvas=new T.PhyloCanvas({nexml:this.nexml,fileSource:!0},this.svgcontainer.id,t,o);let h=this.svgcontainer.querySelectorAll('path:not([stroke="#a2a4aa"])');for(let g of h)g.style.strokeWidth="2"}draw(){this.clear(),this.drawlines(),this.makeLabels()}clearLabels(){for(let l of this.boxdiv.firstChild.querySelectorAll("text"))l.parentElement.removeChild(l)}makeLabels(){let l=[...f.texts()],n=new Set(l.map(r=>r.parentNode.getAttribute("n"))),t=new Map(l.filter(r=>r.parentNode.hasAttribute("corresp")&&r.parentNode.getAttribute("corresp")===this.name).map(r=>[r.parentNode.getAttribute("select").replace(/^#/,""),r.parentNode.getAttribute("n")]));for(let r of this.boxdiv.firstChild.querySelectorAll("text")){let o=document.createElement("div");o.setAttribute("class","tree-div");let h=parseInt(r.getAttribute("x")-5),g=parseInt(r.getAttribute("y"))-15;o.style.left=h+"px",o.style.top=g+"px";let v=r.textContent.trim();n.has(v)?o.innerHTML=`<span class="witness inactive" data-key="${v}">${v}</span><span class="tree-lemma ${v}" data-id="${v}"></span>`:v!=="fakeroot"?t.has(v)?o.innerHTML=`<span class="internal reconstructed" data-key="${v}" data-label="${t.get(v)}">${t.get(v)}</span><span class="tree-lemma invisible ${v}" data-id="${v}" data-label="${t.get(v)}"></span>`:o.innerHTML=`<span class="internal" data-key="${v}">0</span>`:o.innerHTML=`<span class="internal" data-key="${v}"></span>`,r.parentElement.removeChild(r),this.boxdiv.appendChild(o)}}clearlemmata(){for(let l of this.boxdiv.querySelectorAll("span.tree-lemma"))l.innerHTML="",l.dataset.hasOwnProperty("normal")&&delete l.dataset.normal,l.IAST=l.cloneNode(!0)}populate(l,n){let t=f.texts();for(let h of t){let g=h.parentNode.getAttribute("n"),v=this.boxdiv.querySelector(`span.tree-lemma[data-id="${g}"]`)||this.boxdiv.querySelector(`span.tree-lemma[data-label="${g}"]`);if(!!v){if(v.hasOwnProperty("IAST")||(v.IAST=v.cloneNode(!0)),v.IAST.innerHTML="",n){let P=[],k=[];var r=!1;for(let M=l;M<=n;M++){let V=f.firstword(M,h);P.push(V.innerHTML),V.hasAttribute("lemma")&&(k[M-l]=V.getAttribute("lemma")),V.hasAttribute("emended")&&(r=!0)}if(v.IAST.appendChild(b.transformString(P.join(" ").replace(/\s+/g," ").trim(),b.sheets.tree)),k.length!==0){let M=P.slice(0).map((Z,ne)=>k.hasOwnProperty(ne)?k[ne]:Z),V=document.createElement("span");V.appendChild(b.transformString(M.join(" ").replace(/\s+/g," ").trim(),b.sheets.tree)),v.dataset.normal=V.innerHTML}r?v.dataset.emended=!0:v.dataset.hasOwnProperty("emended")&&delete v.dataset.emended}else{let P=f.firstword(l,h);v.IAST.appendChild(b.transformString(P.innerHTML,b.sheets.tree)),P.hasAttribute("lemma")?v.dataset.normal=P.getAttribute("lemma"):delete v.dataset.normal,P.hasAttribute("emended")?v.dataset.emended=!0:v.dataset.hasOwnProperty("emended")&&delete v.dataset.emended}B.normalizedView()&&v.dataset.hasOwnProperty("normal")?v.innerHTML=v.dataset.normal:v.innerHTML=v.IAST.innerHTML}}let o=this.boxdiv.querySelectorAll(".inactive");for(let h of o)h.classList.remove("inactive");this.fitch()}calcPaths(){this.nodes=[],this.paths=[],this.longest={path:[]},this.nsResolver=this.nexml.createNSResolver(this.nexml.ownerDocument==null?this.nexml.documentElement:this.nexml.ownerDocument.documentElement);let l=this.nexml.evaluate("//nex:node[@label]",this.nexml,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);for(let n=0;n<l.snapshotLength;n++)this.nodes.push(l.snapshotItem(n));for(let n=0;n<this.nodes.length;n++){let t=this.nodes[n],r=t.getAttribute("label"),o=t.id;for(let h=n+1;h<this.nodes.length;h++){let g=this.nodes[h],v=g.getAttribute("label"),P=g.id;this.paths.push({nodes:[r,v],path:this.pathFind(o,P)})}}for(let n of Object.keys(this.paths))this.paths[n].path.length>this.longest.path.length&&(this.longest=this.paths[n])}pathFind(l,n,t){t||(t=[]);let r=this.nexml.evaluate('//nex:edge[@source="'+l+'"]|//nex:edge[@target="'+l+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);var o;for(let h=0;h<r.snapshotLength;h++){let g=r.snapshotItem(h);if(o=[g],t.indexOf(g.id)!=-1)continue;t.push(g.id);let v=g.getAttribute("source")!==l?g.getAttribute("source"):g.getAttribute("target");if(v===n)return o;if(!this.nexml.evaluate('//nex:node[@id="'+v+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.hasAttribute("otu")){let k=this.pathFind(v,n,t);if(k)return o.concat(k);continue}}return!1}analyzeVariants(l,n){let t=[],r=[],o=function(k){return k.startsWith("<lg")?b.transformString(k,b.sheets.lg).firstChild.data.slice(1):k},h=function(k){return k.map(M=>o(M)).join(" ").replace(/\s+/g," ").trim()},g=B.normalizedView()?function(k,M){let V=f.firstword(k,M);return V.hasAttribute("lemma")?V.getAttribute("lemma"):V.textContent}:function(k,M){return f.firstword(k,M).textContent};for(let k of f.texts()){let M=k.parentNode.getAttribute("n");if(!this.nexml.querySelector(`otu[label="${M}"]`))continue;let V=n?h(f.range(l,n).map(Z=>g(Z,k))):o(g(l,k));V===""?t.hasOwnProperty("")?t[""].push(M):t[""]=[M]:t.hasOwnProperty(V)?t[V].push(M):t[V]=[M]}let v={};for(let k of Object.keys(t)){var P={length:0,branch_length:0,paths:[]};if(t[k].length===1)P=!1;else for(let M=0;M<t[k].length;M++)for(let V=M+1;V<t[k].length;V++){let Z=this.getPath(t[k][M],t[k][V]);if(Z.hasOwnProperty("path")||alert(Z),Z.path.length===P.length){let ne=this.calcBranchLength(Z.path);ne===P.branch_length?P.paths.push(Z):ne>P.branch_length&&(P={length:Z.path.length,branch_length:ne,paths:[Z]})}else Z.path.length>P.length&&(P={length:Z.path.length,branch_length:this.calcBranchLength(Z.path),paths:[Z]})}v[k]=P}for(let k of Object.keys(r))v[k]=r[k];return v}getPath(l,n){for(let t of this.paths)if(t.nodes.indexOf(l)>-1&&t.nodes.indexOf(n)>-1)return t;return!1}calcBranchLength(l){return l.map(n=>n.getAttribute("length")).reduce((n,t)=>parseFloat(n)+parseFloat(t))}pickColour(l,n,t,r){var o=n,h=t,g=l;r&&(g=g*2,g>=1&&(g-=1,o=t,h=r));let v=h.red-o.red,P=h.green-o.green,k=h.blue-o.blue,M={red:parseInt(Math.floor(o.red+v*g),10),green:parseInt(Math.floor(o.green+P*g),10),blue:parseInt(Math.floor(o.blue+k*g),10)};return"rgb("+M.red+","+M.green+","+M.blue+")"}colourizeVariants(l,n){let t=this.analyzeVariants(l,n);for(let r of this.boxdiv.querySelectorAll("span.tree-lemma")){let o=t.hasOwnProperty(r.dataset.id)?t[t[r.dataset.id]]:t[r.textContent],h={red:252,green:70,blue:107},g={red:63,green:94,blue:251};o?(r.style.color=this.pickColour(o.length/this.longest.path.length,g,h),r.dataset.length=o.length,r.dataset.branch_length=o.branch_length,r.dataset.nodes=o.paths[0].nodes.join(";")):(r.style.color=this.pickColour(1/this.longest.path.length,g,h),r.dataset.length=0,r.dataset.branch_length=0,r.dataset.nodes=""),r.textContent.trim()===""?(r.innerHTML='<span lang="en">┬а┬а┬а</span>',r.style.backgroundColor=r.style.color):r.style.backgroundColor=""}}}class ee extends _e{constructor(l){super(l);this.desc=l,this.text=f.firsttext(l)}init(){this.makeTextBox(),this.makeDescBox(),this.descbox.style.maxWidth="595px",this.descbox.style.paddingLeft="5px",this.boxdiv.addEventListener("mouseup",de.textMouseup)}refresh(){this.boxdiv.innerHTML="",this.boxdiv.appendChild(b.sheets.lemma.transformToFragment(this.text,document)),O(this.boxdiv);for(let l of f.lemmata(!1,this.boxdiv))l.IAST=l.cloneNode(!0);this.updatescript()}makeTextBox(){let l=document.createElement("div");l.dataset.id=this.name,l.classList.add("text-box"),l.appendChild(b.sheets.lemma.transformToFragment(this.text,document)),O(l);for(let n of f.lemmata(!1,l))n.IAST=n.cloneNode(!0);this.boxdiv=l}}class W extends _e{constructor(){super(name);this.desc="Matrix",this.name="Matrix",this.makeDescBox(),this.makeViewBox(),this.descbox.style.maxWidth="100vw",this.descbox.style.paddingLeft="5px"}init(){this.makeTable()}makeViewBox(){let l=document.createElement("div");l.classList.add("matrix"),l.dataset.id=this.name,this.boxdiv=l}makeTable(){let l=document.createElement("div");l.classList.add("scroller"),l.append(b.sheets.matrix.transformToFragment(p.xml,document));for(let v of l.getElementsByTagName("th"))v.addEventListener("dragstart",de.thDragStart);l.addEventListener("dragenter",de.trDragEnter),l.addEventListener("dragleave",de.trDragLeave),l.addEventListener("dragover",v=>v.preventDefault()),l.addEventListener("drop",de.trDragDrop),l.addEventListener("mousedown",de.matrixMousedown);let n=document.createElement("tr");n.classList.add("header");let t=document.createElement("td");t.classList.add("anchor"),n.appendChild(t);let r=[...f.trs(l)],o=r.map(v=>f.trWalker(v)),h=f.tds(!1,r[0]);for(let v of h){let P=document.createElement("th");P.dataset.ref=v.dataset.n;let k=0,M=new Set;for(let ie of o){let fe=ie.nextNode();fe.IAST=fe.cloneNode(!0);let xe=fe.textContent;xe!==""&&(k++,M.add(xe))}let V=k<2?k:`${k}(${M.size})`,Z=document.createElement("span");Z.classList.add("readings"),Z.appendChild(document.createTextNode(V)),P.appendChild(Z);let ne=document.createElement("form");ne.innerHTML='<div><input class="insignificant" title="insignificant" type="checkbox"'+(v.dataset.insignificant?"checked":"")+'></div><div><input class="binary" title="binary" type="checkbox"'+(v.dataset.binary?"checked":"")+"></div>",P.appendChild(ne),n.appendChild(P)}let g=l.querySelector("tbody");g.insertBefore(n,g.firstChild),this.boxdiv.append(l)}}return{slaveinit:function(){comboView.init(),window.startbox!==void 0&&(window.startbox.tree?C.tree(window.startbox.tree.stemmaid,window.startbox.tree.id):window.startbox.text&&C.text(window.startbox.text.name,window.startbox.text.map))},maininit:function(){document.getElementById("comboview").style.display="block",comboView.init(),d()},init:function(){p.viewdiv=document.getElementById("views"),p.descs=document.getElementById("descs"),p.viewdiv.addEventListener("click",de.textClick),document.addEventListener("keydown",de.keyDown,{capture:!0}),document.addEventListener("contextmenu",de.rightClick),document.addEventListener("mouseup",Se.remove)},getWindows:function(){return p.windows},addWindow:function(i){p.windows.push(i)},getViewdiv:function(){return p.viewdiv},getTrees:function(){return p.trees}}}();window.addEventListener("load",window.comboView.maininit);
//# sourceMappingURL=script.js.map
