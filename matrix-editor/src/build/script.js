"use strict";var ze={};ze.defaults={skip_sgml:!1,syncope:!1};var Ft=ze.schemes={balinese:{vowels:"á¬… á¬† á¬‡ á¬ˆ á¬‰ á¬Š á¬‹ á¬Œ á¬ á¬  á¬ á¬  á¬‘ á¬’".split(" "),vowel_marks:"á¬µ á¬¶ á¬· á¬¸ á¬¹ á¬º á¬» á¬¼ á¬½ á­‚ á¬¾ á¬¿ á­ƒ á­€ á­".split(" "),other_marks:["á¬‚","á¬„","á¬",""],virama:["á­„"],consonants:"á¬“ á¬” á¬• á¬– á¬— á¬˜ á¬™ á¬š á¬› á¬œ á¬ á¬ á¬Ÿ á¬  á¬¡ á¬¢ á¬£ á¬¤ á¬¥ á¬¦ á¬§ á¬¨ á¬© á¬ª á¬« á¬¬ á¬­ á¬® á¬¯ á¬° á¬± á¬² á¬³".split(" "),symbols:"á­ á­‘ á­’ á­“ á­” á­• á­– á­— á­˜ á­™   á­ á­Ÿ".split(" "),zwj:["â€"],skip:[""]},bengali:{vowels:"à¦… à¦† à¦‡ à¦ˆ à¦‰ à¦Š à¦‹ à§  à¦Œ à§¡  à¦ à¦  à¦“ à¦”".split(" "),vowel_marks:"à¦¾ à¦¿ à§€ à§ à§‚ à§ƒ à§„ à§¢ à§£  à§‡ à§ˆ  à§‹ à§Œ".split(" "),other_marks:"à¦‚ à¦ƒ à¦".split(" "),virama:["à§"],consonants:"à¦• à¦– à¦— à¦˜ à¦™ à¦š à¦› à¦œ à¦ à¦ à¦Ÿ à¦  à¦¡ à¦¢ à¦£ à¦¤ à¦¥ à¦¦ à¦§ à¦¨ à¦ª à¦« à¦¬ à¦­ à¦® à¦¯ à¦° à¦² à¦¬ à¦¶ à¦· à¦¸ à¦¹ à¤³ à¦•à§à¦· à¦œà§à¦".split(" "),symbols:"à§¦ à§§ à§¨ à§© à§ª à§« à§¬ à§­ à§® à§¯ à¥ à¦½ à¥¤ à¥¥".split(" "),other:"    à¦¡ à¦¢  à¦¯ ".split(" ")},newa:{vowels:["ğ‘€","ğ‘","ğ‘‚","ğ‘ƒ","ğ‘„","ğ‘…","ğ‘†","ğ‘‡","ğ‘ˆ","ğ‘‰","","ğ‘Š","ğ‘‹","","ğ‘Œ","ğ‘"],vowel_marks:["ğ‘µ","ğ‘¶","ğ‘·","ğ‘¸","ğ‘¹","ğ‘º","ğ‘»","ğ‘¼","ğ‘½","","ğ‘¾","ğ‘¿","","ğ‘‘€","ğ‘‘"],other_marks:["ğ‘‘„","ğ‘‘…","ğ‘‘ƒ","ğ‘‘ ","ğ‘‘¡",""],virama:["ğ‘‘‚"],consonants:["ğ‘","ğ‘","ğ‘","ğ‘‘","ğ‘’","ğ‘”","ğ‘•","ğ‘–","ğ‘—","ğ‘˜","ğ‘š","ğ‘›","ğ‘œ","ğ‘","ğ‘","ğ‘Ÿ","ğ‘ ","ğ‘¡","ğ‘¢","ğ‘£","ğ‘¥","ğ‘¦","ğ‘§","ğ‘¨","ğ‘©","ğ‘«","ğ‘¬","ğ‘®","ğ‘°","ğ‘±","ğ‘²","ğ‘³","ğ‘´"],symbols:["ğ‘‘","ğ‘‘‘","ğ‘‘’","ğ‘‘“","ğ‘‘”","ğ‘‘•","ğ‘‘–","ğ‘‘—","ğ‘‘˜","ğ‘‘™","ğ‘‘‰","ğ‘‘‡","ğ‘‘‹","ğ‘‘Œ"]},sarada:{vowels:["ğ‘†ƒ","ğ‘†„","ğ‘†…","ğ‘††","ğ‘†‡","ğ‘†ˆ","ğ‘†‰","ğ‘†Š","ğ‘†‹","ğ‘†Œ","","ğ‘†","ğ‘†","","ğ‘†","ğ‘†"],vowel_marks:["ğ‘†³","ğ‘†´","ğ‘†µ","ğ‘†¶","ğ‘†·","ğ‘†¸","ğ‘†¹","ğ‘†º","ğ‘†»","","ğ‘†¼","ğ‘†½","","ğ‘†¾","ğ‘†¿"],other_marks:["ğ‘†","ğ‘†‚","ğ‘†€","ğ‘‡‚","ğ‘‡ƒ"],virama:["ğ‘‡€"],consonants:["ğ‘†‘","ğ‘†’","ğ‘†“","ğ‘†”","ğ‘†•","ğ‘†–","ğ‘†—","ğ‘†˜","ğ‘†™","ğ‘†š","ğ‘†›","ğ‘†œ","ğ‘†","ğ‘†","ğ‘†Ÿ","ğ‘† ","ğ‘†¡","ğ‘†¢","ğ‘†£","ğ‘†¤","ğ‘†¥","ğ‘†¦","ğ‘†§","ğ‘†¨","ğ‘†©","ğ‘†ª","ğ‘†«","ğ‘†¬","ğ‘†®","ğ‘†¯","ğ‘†°","ğ‘†±","ğ‘†²","ğ‘†­"],symbols:["ğ‘‡","ğ‘‡‘","ğ‘‡’","ğ‘‡“","ğ‘‡”","ğ‘‡•","ğ‘‡–","ğ‘‡—","ğ‘‡˜","ğ‘‡™","ğ‘‡„","ğ‘‡","ğ‘‡…","ğ‘‡†"]},devanagari:{vowels:"à¤… à¤† à¤‡ à¤ˆ à¤‰ à¤Š à¤‹ à¥  à¤Œ à¥¡ à¤ à¤ à¤ à¤’ à¤“ à¤” à¤ à¤ à¤“".split(" "),vowel_marks:"à¤¾ à¤¿ à¥€ à¥ à¥‚ à¥ƒ à¥„ à¥¢ à¥£ à¥† à¥‡ à¥ˆ à¥Š à¥‹ à¥Œ à¥ à¥à¥‡ à¥à¤¾ à¥à¥‹ à¥† à¥".split(" "),other_marks:"à¤‚ à¤ƒ à¤ á³µ á³¶ ê£½".split(" "),virama:["à¥"],consonants:"à¤• à¤– à¤— à¤˜ à¤™ à¤š à¤› à¤œ à¤ à¤ à¤Ÿ à¤  à¤¡ à¤¢ à¤£ à¤¤ à¤¥ à¤¦ à¤§ à¤¨ à¤ª à¤« à¤¬ à¤­ à¤® à¤¯ à¤° à¤² à¤µ à¤¶ à¤· à¤¸ à¤¹ à¤³".split(" "),symbols:"à¥¦ à¥§ à¥¨ à¥© à¥ª à¥« à¥¬ à¥­ à¥® à¥¯ à¥ à¤½ à¥¤ à¥¥".split(" "),zwj:["â€"],skip:[""],accent:["à¥‘","à¥’"],combo_accent:"à¤ƒà¥‘ à¤ƒà¥’ à¤‚à¥‘ à¤‚à¥’".split(" "),candra:["à¥…"],other:"à¤•à¤¼ à¤–à¤¼ à¤—à¤¼ à¤œà¤¼ à¤¡à¤¼ à¤¢à¤¼ à¤«à¤¼ à¤¯à¤¼ à¤±".split(" ")},gujarati:{vowels:"àª… àª† àª‡ àªˆ àª‰ àªŠ àª‹ à«  àªŒ à«¡  àª àª  àª“ àª”".split(" "),vowel_marks:"àª¾ àª¿ à«€ à« à«‚ à«ƒ à«„ à«¢ à«£  à«‡ à«ˆ  à«‹ à«Œ".split(" "),other_marks:"àª‚ àªƒ àª".split(" "),virama:["à«"],consonants:"àª• àª– àª— àª˜ àª™ àªš àª› àªœ àª àª àªŸ àª  àª¡ àª¢ àª£ àª¤ àª¥ àª¦ àª§ àª¨ àªª àª« àª¬ àª­ àª® àª¯ àª° àª² àªµ àª¶ àª· àª¸ àª¹ àª³".split(" "),symbols:"à«¦ à«§ à«¨ à«© à«ª à«« à«¬ à«­ à«® à«¯ à« àª½ à«¤ à«¥".split(" "),candra:["à«…"]},gurmukhi:{vowels:"à¨… à¨† à¨‡ à¨ˆ à¨‰ à¨Š      à¨ à¨  à¨“ à¨”".split(" "),vowel_marks:"à¨¾ à¨¿ à©€ à© à©‚      à©‡ à©ˆ  à©‹ à©Œ".split(" "),other_marks:"à¨‚ à¨ƒ à¨".split(" "),virama:["à©"],consonants:"à¨• à¨– à¨— à¨˜ à¨™ à¨š à¨› à¨œ à¨ à¨ à¨Ÿ à¨  à¨¡ à¨¢ à¨£ à¨¤ à¨¥ à¨¦ à¨§ à¨¨ à¨ª à¨« à¨¬ à¨­ à¨® à¨¯ à¨° à¨² à¨µ à¨¶ à¨¶ à¨¸ à¨¹ à¨³".split(" "),symbols:"à©¦ à©§ à©¨ à©© à©ª à©« à©¬ à©­ à©® à©¯ à¥ à¤½ à¥¤ à¥¥".split(" "),other:" à¨– à¨— à¨œ à¨¡  à¨«  ".split(" ")},kannada:{vowels:"à²… à²† à²‡ à²ˆ à²‰ à²Š à²‹ à³  à²Œ à³¡ à² à² à² à²’ à²“ à²”".split(" "),vowel_marks:"à²¾ à²¿ à³€ à³ à³‚ à³ƒ à³„ à³¢ à³£ à³† à³‡ à³ˆ à³Š à³‹ à³Œ".split(" "),other_marks:"à²‚ à²ƒ à¤".split(" "),virama:["à³"],consonants:"à²• à²– à²— à²˜ à²™ à²š à²› à²œ à² à² à²Ÿ à²  à²¡ à²¢ à²£ à²¤ à²¥ à²¦ à²§ à²¨ à²ª à²« à²¬ à²­ à²® à²¯ à²° à²² à²µ à²¶ à²· à²¸ à²¹ à²³".split(" "),symbols:"à³¦ à³§ à³¨ à³© à³ª à³« à³¬ à³­ à³® à³¯ à²“à²‚ à²½ à¥¤ à¥¥".split(" "),other:"      à²«  à²±".split(" ")},malayalam:{vowels:"à´… à´† à´‡ à´ˆ à´‰ à´Š à´‹ àµ  à´Œ àµ¡ à´ à´ à´ à´’ à´“ à´”".split(" "),vowel_marks:"à´¾ à´¿ àµ€ àµ àµ‚ àµƒ àµ„ àµ¢ àµ£ àµ† àµ‡ àµˆ àµŠ àµ‹ àµŒ".split(" "),other_marks:"à´‚ à´ƒ à¤".split(" "),virama:["àµ"],consonants:"à´• à´– à´— à´˜ à´™ à´š à´› à´œ à´ à´ à´Ÿ à´  à´¡ à´¢ à´£ à´¤ à´¥ à´¦ à´§ à´¨ à´ª à´« à´¬ à´­ à´® à´¯ à´° à´² à´µ à´¶ à´· à´¸ à´¹ à´³".split(" "),symbols:"àµ¦ àµ§ àµ¨ àµ© àµª àµ« àµ¬ àµ­ àµ® àµ¯ à´“à´‚ à´½ à¥¤ à¥¥".split(" "),other:"        à´±".split(" ")},oriya:{vowels:"à¬… à¬† à¬‡ à¬ˆ à¬‰ à¬Š à¬‹ à­  à¬Œ à­¡  à¬ à¬  à¬“ à¬”".split(" "),vowel_marks:"à¬¾ à¬¿ à­€ à­ à­‚ à­ƒ à­„ à­¢ à­£  à­‡ à­ˆ  à­‹ à­Œ".split(" "),other_marks:"à¬‚ à¬ƒ à¬".split(" "),virama:["à­"],consonants:"à¬• à¬– à¬— à¬˜ à¬™ à¬š à¬› à¬œ à¬ à¬ à¬Ÿ à¬  à¬¡ à¬¢ à¬£ à¬¤ à¬¥ à¬¦ à¬§ à¬¨ à¬ª à¬« à¬¬ à¬­ à¬® à¬¯ à¬° à¬² à¬µ à¬¶ à¬· à¬¸ à¬¹ à¬³".split(" "),symbols:"à­¦ à­§ à­¨ à­© à­ª à­« à­¬ à­­ à­® à­¯ à¬“à¬‚ à¬½ à¥¤ à¥¥".split(" "),other:"    à¬¡ à¬¢  à¬¯ ".split(" ")},tamil:{vowels:"à®… à®† à®‡ à®ˆ à®‰ à®Š     à® à® à® à®’ à®“ à®”".split(" "),vowel_marks:"à®¾ à®¿ à¯€ à¯ à¯‚     à¯† à¯‡ à¯ˆ à¯Š à¯‹ à¯Œ".split(" "),other_marks:"à®‚ à®ƒ ".split(" "),virama:["à¯"],consonants:"à®• à®• à®• à®• à®™ à®š à®š à®œ à®š à® à®Ÿ à®Ÿ à®Ÿ à®Ÿ à®£ à®¤ à®¤ à®¤ à®¤ à®¨ à®ª à®ª à®ª à®ª à®® à®¯ à®° à®² à®µ à®¶ à®· à®¸ à®¹ à®³".split(" "),symbols:"à¯¦ à¯§ à¯¨ à¯© à¯ª à¯« à¯¬ à¯­ à¯® à¯¯ à¯ à¤½ à¥¤ à¥¥".split(" "),other:"        à®±".split(" ")},telugu:{vowels:"à°… à°† à°‡ à°ˆ à°‰ à°Š à°‹ à±  à°Œ à±¡ à° à° à° à°’ à°“ à°”".split(" "),vowel_marks:"à°¾ à°¿ à±€ à± à±‚ à±ƒ à±„ à±¢ à±£ à±† à±‡ à±ˆ à±Š à±‹ à±Œ".split(" "),other_marks:"à°‚ à°ƒ à° á³² á³²".split(" "),virama:["à±"],consonants:"à°• à°– à°— à°˜ à°™ à°š à°› à°œ à° à° à°Ÿ à°  à°¡ à°¢ à°£ à°¤ à°¥ à°¦ à°§ à°¨ à°ª à°« à°¬ à°­ à°® à°¯ à°° à°² à°µ à°¶ à°· à°¸ à°¹ à°³".split(" "),symbols:"à±¦ à±§ à±¨ à±© à±ª à±« à±¬ à±­ à±® à±¯ à°“à°‚ à°½ à¥¤ à¥¥".split(" "),other:"        à°±".split(" ")},iast:{vowels:"a Ä i Ä« u Å« á¹› á¹ á¸· á¸¹ áº½ e ai Ãµ o au Ãª aÃ® Ã´ aÃ»".split(" "),other_marks:["á¹ƒ","á¸¥","mÌ","áº–","á¸«","oá¸¿"],virama:[""],consonants:"k kh g gh á¹… c ch j jh Ã± á¹­ á¹­h á¸ á¸h á¹‡ t th d dh n p ph b bh m y r l v Å› á¹£ s h á¸»".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oá¹ ' | ||".split(" ")},iso:{vowels:"a Ä i Ä« u Å« rÌ¥ rÌ¥Ì„ lÌ¥ lÌ¥Ì„ áº½ e ai Ãµ o au Ãª aÃ® Ã´ aÃ»".split(" "),other_marks:["á¹","á¸¥","mÌ","oá¸¿"],virama:[""],consonants:"k kh g gh á¹… c ch j jh Ã± á¹­ á¹­h á¸ á¸h á¹‡ t th d dh n p ph b bh m y r l v Å› á¹£ s h á¸· ká¹£ jÃ±".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 omÌ ' | ||".split(" ")},itrans:{vowels:"a A i I u U RRi RRI LLi LLI  e ai  o au".split(" "),other_marks:["M","H",".N"],virama:[""],consonants:"k kh g gh ~N ch Ch j jh ~n T Th D Dh N t th d dh n p ph b bh m y r l v sh Sh s h L kSh j~n".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM .a | ||".split(" "),candra:[".c"],zwj:["{}"],skip:"_",accent:["\\'","\\_"],combo_accent:"\\'H \\_H \\'M \\_M".split(" "),other:"q K G z .D .Dh f Y R".split(" ")},hk:{vowels:"a A i I u U R RR lR lRR  e ai  o au".split(" "),other_marks:"M H ~".split(" "),virama:[""],consonants:"k kh g gh G c ch j jh J T Th D Dh N t th d dh n p ph b bh m y r l v z S s h L kS jJ".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM ' | ||".split(" ")},slp1:{vowels:"a A i I u U f F x X áº½ e E Ãµ o O Ãª ÃŠ Ã´ Ã”".split(" "),other_marks:"M H mÌ áº– á¸« oá¸¿".split(" "),virama:[""],consonants:"k K g G N c C j J Y w W q Q R t T d D n p P b B m y r l v S z s h L".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oá¹ ' | ||".split(" ")},velthuis:{vowels:"a aa i ii u uu .r .rr .li .ll  e ai  o au".split(" "),other_marks:".m .h ".split(" "),virama:[""],consonants:'k kh g gh "n c ch j jh ~n .t .th .d .d .n t th d dh n p ph b bh m y r l v ~s .s s h L k.s j~n'.split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 o.m ' | ||".split(" ")},wx:{vowels:"a A i I u U q Q L   e E  o O".split(" "),other_marks:"M H z".split(" "),virama:[""],consonants:"k K g G f c C j J F t T d D N w W x X n p P b B m y r l v S R s h  kR jF".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oM ' | ||".split(" ")}},x1={},Jt={iast:{á¹›:["rÌ¥"],á¹ƒ:["á¹"]},itrans:{A:["aa"],I:["ii","ee"],U:["uu","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],"j~n":["GY","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":"\\_.m \\_.n \\`M \\`.m \\`.n".split(" "),".a":["~"],"|":["."],"||":[".."],z:["J"]}},Rt={};ze.isRomanScheme=function(v){return x1.hasOwnProperty(v)};ze.addBrahmicScheme=function(v,c){ze.schemes[v]=c};ze.addRomanScheme=function(v,c){"vowel_marks"in c||(c.vowel_marks=c.vowels.slice(1)),ze.schemes[v]=c,x1[v]=!0};var b1=function(v){var c={};for(var C in v)!v.hasOwnProperty(C)||(c[C]=v[C].slice(0));return c};(function(){var v=Ft.kolkata=b1(Ft.iast),c="iast itrans hk kolkata slp1 velthuis wx".split(" ");v.vowels="a Ä i Ä« u Å« á¹› á¹ á¸· á¸¹ e Ä“ ai o Å au".split(" ");for(var C=0,E;E=c[C];C++)ze.addRomanScheme(E,Ft[E]);var m=b1(Ft.itrans);m.vowels="a A i I u U Ri RRI LLi LLi e E ai o O au".split(" "),m.vowel_marks=m.vowels.slice(1),Jt.itrans_dravidian=Jt.itrans,ze.addRomanScheme("itrans_dravidian",m)})();var $1=function(v,c){var C=Jt[v]||{},E={},m=ze.schemes[v],T={},M=[],h={},f=ze.schemes[c];for(var w in m)if(!!m.hasOwnProperty(w)){var L=m[w],O=f[w];if(O!==void 0)for(var F=0;F<L.length;F++){var D=L[F],R=O[F],z=C[D]||[],J=z.length,re=0;for(M.push(D.length),re=0;re<J;re++)M.push(z[re].length);if(w==="vowel_marks"||w==="virama")for(h[D]=R,re=0;re<J;re++)h[z[re]]=R;else{for(T[D]=R,re=0;re<J;re++)T[z[re]]=R;if(w==="consonants"||w==="other")for(E[D]=R,re=0;re<J;re++)E[z[re]]=R}}}return{consonants:E,fromRoman:ze.isRomanScheme(v),letters:T,marks:h,maxTokenLength:Math.max.apply(Math,M),toRoman:ze.isRomanScheme(c),virama:f.virama}},j1=function(v,c,C){for(var E=[],m=c.consonants,T=v.length,M=!1,h=c.letters,f=c.marks,w=c.maxTokenLength,L=C.skip_sgml,O=C.syncope,F,D,R="",z=c.toRoman,J=c.virama,re=!1,$=!1,V=!1,le=0,fe;(fe=v.charAt(le))||R;le++){var ye=w-R.length;if(!(ye>0&&le<T&&(R+=fe,ye>1)))for(var G=0;G<w;G++){var me=R.substr(0,w-G);if(re===!0)re=me!==">";else if(me==="<")re=L;else if(me==="##"){V=!V,R=R.substr(2);break}if($=re||V,(F=h[me])!==void 0&&!$){z?E.push(F):(M?(D=f[me])?E.push(D):me!=="a"&&(E.push(J),E.push(F)):E.push(F),M=me in m),R=R.substr(w-G);break}else G===w-1&&(M&&(M=!1,O||E.push(J)),E.push(me),R=R.substr(1))}}return M&&!O&&E.push(J),E.join("")},U1=function(v,c){for(var C=[],E=c.consonants,m=!1,T=!1,M=c.letters,h=c.marks,f,w=c.toRoman,L=!1,O=0,F;F=v.charAt(O);O++){if(F==="#"){m?(L=!L,m=!1):m=!0,T&&(C.push("a"),T=!1);continue}else if(L){C.push(F);continue}(f=h[F])!==void 0?(C.push(f),T=!1):(m&&(C.push("#"),m=!1),T&&(C.push("a"),T=!1),(f=M[F])?(C.push(f),T=w&&F in E):C.push(F))}return T&&C.push("a"),C.join("")};ze.t=function(v,c,C,E){E=E||{};var m=Rt.options||{},T=ze.defaults,M=Rt.from===c&&Rt.to===C,h;for(var f in T)if(T.hasOwnProperty(f)){var w=T[f];f in E&&(w=E[f]),E[f]=w,w!==m[f]&&(M=!1)}return M?h=Rt.map:(h=$1(c,C,E),Rt={from:c,map:h,options:E,to:C}),c==="itrans"&&(v=v.replace(/\{\\m\+\}/g,".h.N"),v=v.replace(/\.h/g,""),v=v.replace(/\\([^'`_]|$)/g,"##$1##")),h.fromRoman?j1(v,h,E):U1(v,h,E)};var Qt={};(function(v){"use strict";v.__type__="csv";var c=typeof jQuery!="undefined"&&jQuery.Deferred||typeof _!="undefined"&&_.Deferred||function(){var h,f,w=new Promise(function(L,O){h=L,f=O});return{resolve:h,reject:f,promise:function(){return w}}};v.fetch=function(h){var f=new c;if(h.file){var w=new FileReader,L=h.encoding||"UTF-8";w.onload=function(D){var R=v.extractFields(v.parse(D.target.result,h),h);R.useMemoryStore=!0,R.metadata={filename:h.file.name},f.resolve(R)},w.onerror=function(D){f.reject({error:{message:"Failed to load file. Code: "+D.target.error.code}})},w.readAsText(h.file,L)}else if(h.data){var O=v.extractFields(v.parse(h.data,h),h);O.useMemoryStore=!0,f.resolve(O)}else if(h.url){var F=window.fetch||function(D){var R=jQuery.get(D),z={then:function(J){return R.done(J),z},catch:function(J){return R.fail(J),z}};return z};F(h.url).then(function(D){return D.text?D.text():D}).then(function(D){var R=v.extractFields(v.parse(D,h),h);R.useMemoryStore=!0,f.resolve(R)}).catch(function(D,R){f.reject({error:{message:"Failed to load file. "+D.statusText+". Code: "+D.status,request:D}})})}return f.promise()},v.extractFields=function(h,f){return f.noHeaderRow!==!0&&h.length>0?{fields:h[0],records:h.slice(1)}:{records:h}},v.normalizeDialectOptions=function(h){var f={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var w in h)w==="trim"?f.skipinitialspace=h.trim:f[w.toLowerCase()]=h[w];return f},v.parse=function(h,f){(!f||f&&!f.lineterminator)&&(h=v.normalizeLineTerminator(h,f));var w=v.normalizeDialectOptions(f);h=M(h,w.lineterminator);var L="",O=!1,F=!1,D="",R=[],z=[],J,re;for(re=function($){return F!==!0&&($===""?$=null:w.skipinitialspace===!0&&($=T($)),C.test($)?$=parseInt($,10):E.test($)&&($=parseFloat($,10))),$},J=0;J<h.length;J+=1)L=h.charAt(J),O===!1&&(L===w.delimiter||L===w.lineterminator)?(D=re(D),R.push(D),L===w.lineterminator&&(z.push(R),R=[]),D="",F=!1):L!==w.quotechar?D+=L:O?h.charAt(J+1)===w.quotechar?(D+=w.quotechar,J+=1):O=!1:(O=!0,F=!0);return D=re(D),R.push(D),z.push(R),w.skipinitialrows&&(z=z.slice(w.skipinitialrows)),z},v.normalizeLineTerminator=function(h,f){return f=f||{},f.lineterminator?h:h.replace(/(\r\n|\n|\r)/gm,`
`)},v.objectToArray=function(h){for(var f=[],w=[],L=[],O=0;O<h.fields.length;O++){var F=h.fields[O].id;L.push(F);var D=h.fields[O].label?h.fields[O].label:F;w.push(D)}f.push(w);for(var O=0;O<h.records.length;O++){for(var R=[],z=h.records[O],J=0;J<L.length;J++)R.push(z[L[J]]);f.push(R)}return f},v.serialize=function(h,f){var w=null;h instanceof Array?w=h:w=v.objectToArray(h);var L=v.normalizeDialectOptions(f),O="",F="",D="",R="",z,J,re;for(re=function($){return $===null?$="":typeof $=="string"&&m.test($)?(L.doublequote&&($=$.replace(/"/g,'""')),$=L.quotechar+$+L.quotechar):typeof $=="number"&&($=$.toString(10)),$},z=0;z<w.length;z+=1)for(O=w[z],J=0;J<O.length;J+=1)F=re(O[J]),J===O.length-1?(D+=F,R+=D+L.lineterminator,D=""):D+=F+L.delimiter,F="";return R};var C=/^\d+$/,E=/^\d*\.\d+$|^\d+\.\d*$/,m=/^\s|\s$|,|"|\n/,T=function(){return String.prototype.trim?function(h){return h.trim()}:function(h){return h.replace(/^\s*/,"").replace(/\s*$/,"")}}();function M(h,f){return h.charAt(h.length-f.length)!==f?h:h.substring(0,h.length-f.length)}})(Qt);function G1(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}function X1(v,c,C){return C={path:c,exports:{},require:function(E,m){return W1(E,m==null?C.path:m)}},v(C,C.exports),C.exports}function W1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Y1=X1(function(v,c){(function(C,E){v.exports=E()})(window,function(){return function(C){var E={};function m(T){if(E[T])return E[T].exports;var M=E[T]={i:T,l:!1,exports:{}};return C[T].call(M.exports,M,M.exports,m),M.l=!0,M.exports}return m.m=C,m.c=E,m.d=function(T,M,h){m.o(T,M)||Object.defineProperty(T,M,{enumerable:!0,get:h})},m.r=function(T){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})},m.t=function(T,M){if(1&M&&(T=m(T)),8&M||4&M&&typeof T=="object"&&T&&T.__esModule)return T;var h=Object.create(null);if(m.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:T}),2&M&&typeof T!="string")for(var f in T)m.d(h,f,function(w){return T[w]}.bind(null,f));return h},m.n=function(T){var M=T&&T.__esModule?function(){return T.default}:function(){return T};return m.d(M,"a",M),M},m.o=function(T,M){return Object.prototype.hasOwnProperty.call(T,M)},m.p="",m(m.s=1)}([function(C,E,m){var T,M;T=[m(2)],(M=function(h){function f(n){if(f.is(n,"function"))return w?n():h.on("raphael.DOMload",n);if(f.is(n,ie))return f._engine.create[$](f,n.splice(0,3+f.is(n[0],W))).add(n);var s=Array.prototype.slice.call(arguments,0);if(f.is(s[s.length-1],"function")){var a=s.pop();return w?a.call(f._engine.create[$](f,s)):h.on("raphael.DOMload",function(){a.call(f._engine.create[$](f,s))})}return f._engine.create[$](f,arguments)}f.version="2.3.0",f.eve=h;var w,L,O=/[, ]+/,F={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},D=/\{(\d+)\}/g,R="hasOwnProperty",z={doc:document,win:window},J={was:Object.prototype[R].call(z.win,"Raphael"),is:z.win.Raphael},re=function(){this.ca=this.customAttributes={}},$="apply",V="concat",le="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,fe="",ye=" ",G=String,me="split",pe="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[me](ye),I={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},be=G.prototype.toLowerCase,oe=Math,ke=oe.max,j=oe.min,Ce=oe.abs,Se=oe.pow,Z=oe.PI,W="number",ie="array",Pe=Object.prototype.toString,r=(f._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),e={NaN:1,Infinity:1,"-Infinity":1},t=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,i=oe.round,o=parseFloat,u=parseInt,d=G.prototype.toUpperCase,b=f._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},g=f._availableAnimAttrs={blur:W,"clip-rect":"csv",cx:W,cy:W,fill:"colour","fill-opacity":W,"font-size":W,height:W,opacity:W,path:"path",r:W,rx:W,ry:W,stroke:"colour","stroke-opacity":W,"stroke-width":W,transform:"transform",width:W,x:W,y:W},A=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,B={hs:1,rg:1},H=/,?([achlmqrstvxz]),?/gi,U=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ee=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,se=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,de=(f._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ge=function(n,s){return o(n)-o(s)},we=function(n){return n},xe=f._rectPath=function(n,s,a,l,p){return p?[["M",n+p,s],["l",a-2*p,0],["a",p,p,0,0,1,p,p],["l",0,l-2*p],["a",p,p,0,0,1,-p,p],["l",2*p-a,0],["a",p,p,0,0,1,-p,-p],["l",0,2*p-l],["a",p,p,0,0,1,p,-p],["z"]]:[["M",n,s],["l",a,0],["l",0,l],["l",-a,0],["z"]]},Ae=function(n,s,a,l){return l==null&&(l=a),[["M",n,s],["m",0,-l],["a",a,l,0,1,1,0,2*l],["a",a,l,0,1,1,0,-2*l],["z"]]},Ne=f._getPath={path:function(n){return n.attr("path")},circle:function(n){var s=n.attrs;return Ae(s.cx,s.cy,s.r)},ellipse:function(n){var s=n.attrs;return Ae(s.cx,s.cy,s.rx,s.ry)},rect:function(n){var s=n.attrs;return xe(s.x,s.y,s.width,s.height,s.r)},image:function(n){var s=n.attrs;return xe(s.x,s.y,s.width,s.height)},text:function(n){var s=n._getBBox();return xe(s.x,s.y,s.width,s.height)},set:function(n){var s=n._getBBox();return xe(s.x,s.y,s.width,s.height)}},Me=f.mapPath=function(n,s){if(!s)return n;var a,l,p,x,S,k,P;for(p=0,S=(n=St(n)).length;p<S;p++)for(x=1,k=(P=n[p]).length;x<k;x+=2)a=s.x(P[x],P[x+1]),l=s.y(P[x],P[x+1]),P[x]=a,P[x+1]=l;return n};if(f._g=z,f.type=z.win.SVGAngle||z.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",f.type=="VML"){var Re,De=z.doc.createElement("div");if(De.innerHTML='<v:shape adj="1"/>',(Re=De.firstChild).style.behavior="url(#default#VML)",!Re||typeof Re.adj!="object")return f.type=fe;De=null}function qe(n){if(typeof n=="function"||Object(n)!==n)return n;var s=new n.constructor;for(var a in n)n[R](a)&&(s[a]=qe(n[a]));return s}f.svg=!(f.vml=f.type=="VML"),f._Paper=re,f.fn=L=re.prototype=f.prototype,f._id=0,f.is=function(n,s){return(s=be.call(s))=="finite"?!e[R](+n):s=="array"?n instanceof Array:s=="null"&&n===null||s==typeof n&&n!==null||s=="object"&&n===Object(n)||s=="array"&&Array.isArray&&Array.isArray(n)||Pe.call(n).slice(8,-1).toLowerCase()==s},f.angle=function(n,s,a,l,p,x){if(p==null){var S=n-a,k=s-l;return S||k?(180+180*oe.atan2(-k,-S)/Z+360)%360:0}return f.angle(n,s,p,x)-f.angle(a,l,p,x)},f.rad=function(n){return n%360*Z/180},f.deg=function(n){return Math.round(180*n/Z%360*1e3)/1e3},f.snapTo=function(n,s,a){if(a=f.is(a,"finite")?a:10,f.is(n,ie)){for(var l=n.length;l--;)if(Ce(n[l]-s)<=a)return n[l]}else{var p=s%(n=+n);if(p<a)return s-p;if(p>n-a)return s-p+n}return s};var Fe,rt;f.createUUID=(Fe=/[xy]/g,rt=function(n){var s=16*oe.random()|0;return(n=="x"?s:3&s|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Fe,rt).toUpperCase()}),f.setWindow=function(n){h("raphael.setWindow",f,z.win,n),z.win=n,z.doc=z.win.document,f._engine.initWin&&f._engine.initWin(z.win)};var Ve=function(n){if(f.vml){var s,a=/^\s+|\s+$/g;try{var l=new ActiveXObject("htmlfile");l.write("<body>"),l.close(),s=l.body}catch(S){s=createPopup().document.body}var p=s.createTextRange();Ve=Oe(function(S){try{s.style.color=G(S).replace(a,fe);var k=p.queryCommandValue("ForeColor");return"#"+("000000"+(k=(255&k)<<16|65280&k|(16711680&k)>>>16).toString(16)).slice(-6)}catch(P){return"none"}})}else{var x=z.doc.createElement("i");x.title="RaphaÃ«l Colour Picker",x.style.display="none",z.doc.body.appendChild(x),Ve=Oe(function(S){return x.style.color=S,z.doc.defaultView.getComputedStyle(x,fe).getPropertyValue("color")})}return Ve(n)},Xe=function(){return"hsb("+[this.h,this.s,this.b]+")"},lt=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ct=function(){return this.hex},ct=function(n,s,a){if(s==null&&f.is(n,"object")&&"r"in n&&"g"in n&&"b"in n&&(a=n.b,s=n.g,n=n.r),s==null&&f.is(n,"string")){var l=f.getRGB(n);n=l.r,s=l.g,a=l.b}return(n>1||s>1||a>1)&&(n/=255,s/=255,a/=255),[n,s,a]},Nt=function(n,s,a,l){var p={r:n*=255,g:s*=255,b:a*=255,hex:f.rgb(n,s,a),toString:Ct};return f.is(l,"finite")&&(p.opacity=l),p};function Oe(n,s,a){return function l(){var p=Array.prototype.slice.call(arguments,0),x=p.join("â€"),S=l.cache=l.cache||{},k=l.count=l.count||[];return S[R](x)?(function(P,q){for(var Y=0,ae=P.length;Y<ae;Y++)if(P[Y]===q)return P.push(P.splice(Y,1)[0])}(k,x),a?a(S[x]):S[x]):(k.length>=1e3&&delete S[k.shift()],k.push(x),S[x]=n[$](s,p),a?a(S[x]):S[x])}}f.color=function(n){var s;return f.is(n,"object")&&"h"in n&&"s"in n&&"b"in n?(s=f.hsb2rgb(n),n.r=s.r,n.g=s.g,n.b=s.b,n.hex=s.hex):f.is(n,"object")&&"h"in n&&"s"in n&&"l"in n?(s=f.hsl2rgb(n),n.r=s.r,n.g=s.g,n.b=s.b,n.hex=s.hex):(f.is(n,"string")&&(n=f.getRGB(n)),f.is(n,"object")&&"r"in n&&"g"in n&&"b"in n?(s=f.rgb2hsl(n),n.h=s.h,n.s=s.s,n.l=s.l,s=f.rgb2hsb(n),n.v=s.b):(n={hex:"none"}).r=n.g=n.b=n.h=n.s=n.v=n.l=-1),n.toString=Ct,n},f.hsb2rgb=function(n,s,a,l){var p,x,S,k,P;return this.is(n,"object")&&"h"in n&&"s"in n&&"b"in n&&(a=n.b,s=n.s,l=n.o,n=n.h),k=(P=a*s)*(1-Ce((n=(n*=360)%360/60)%2-1)),p=x=S=a-P,Nt(p+=[P,k,0,0,k,P][n=~~n],x+=[k,P,P,k,0,0][n],S+=[0,0,k,P,P,k][n],l)},f.hsl2rgb=function(n,s,a,l){var p,x,S,k,P;return this.is(n,"object")&&"h"in n&&"s"in n&&"l"in n&&(a=n.l,s=n.s,n=n.h),(n>1||s>1||a>1)&&(n/=360,s/=100,a/=100),k=(P=2*s*(a<.5?a:1-a))*(1-Ce((n=(n*=360)%360/60)%2-1)),p=x=S=a-P/2,Nt(p+=[P,k,0,0,k,P][n=~~n],x+=[k,P,P,k,0,0][n],S+=[0,0,k,P,P,k][n],l)},f.rgb2hsb=function(n,s,a){var l,p;return n=(a=ct(n,s,a))[0],s=a[1],a=a[2],{h:(((p=(l=ke(n,s,a))-j(n,s,a))==0?null:l==n?(s-a)/p:l==s?(a-n)/p+2:(n-s)/p+4)+360)%6*60/360,s:p==0?0:p/l,b:l,toString:Xe}},f.rgb2hsl=function(n,s,a){var l,p,x,S;return n=(a=ct(n,s,a))[0],s=a[1],a=a[2],l=((p=ke(n,s,a))+(x=j(n,s,a)))/2,{h:(((S=p-x)==0?null:p==n?(s-a)/S:p==s?(a-n)/S+2:(n-s)/S+4)+360)%6*60/360,s:S==0?0:l<.5?S/(2*l):S/(2-2*l),l,toString:lt}},f._path2string=function(){return this.join(",").replace(H,"$1")},f._preload=function(n,s){var a=z.doc.createElement("img");a.style.cssText="position:absolute;left:-9999em;top:-9999em",a.onload=function(){s.call(this),this.onload=null,z.doc.body.removeChild(this)},a.onerror=function(){z.doc.body.removeChild(this)},z.doc.body.appendChild(a),a.src=n};function Ke(){return this.hex}function ut(n,s){for(var a=[],l=0,p=n.length;p-2*!s>l;l+=2){var x=[{x:+n[l-2],y:+n[l-1]},{x:+n[l],y:+n[l+1]},{x:+n[l+2],y:+n[l+3]},{x:+n[l+4],y:+n[l+5]}];s?l?p-4==l?x[3]={x:+n[0],y:+n[1]}:p-2==l&&(x[2]={x:+n[0],y:+n[1]},x[3]={x:+n[2],y:+n[3]}):x[0]={x:+n[p-2],y:+n[p-1]}:p-4==l?x[3]=x[2]:l||(x[0]={x:+n[l],y:+n[l+1]}),a.push(["C",(-x[0].x+6*x[1].x+x[2].x)/6,(-x[0].y+6*x[1].y+x[2].y)/6,(x[1].x+6*x[2].x-x[3].x)/6,(x[1].y+6*x[2].y-x[3].y)/6,x[2].x,x[2].y])}return a}f.getRGB=Oe(function(n){if(!n||(n=G(n)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ke};if(n=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Ke};!B[R](n.toLowerCase().substring(0,2))&&n.charAt()!="#"&&(n=Ve(n));var s,a,l,p,x,S,k=n.match(r);return k?(k[2]&&(l=u(k[2].substring(5),16),a=u(k[2].substring(3,5),16),s=u(k[2].substring(1,3),16)),k[3]&&(l=u((x=k[3].charAt(3))+x,16),a=u((x=k[3].charAt(2))+x,16),s=u((x=k[3].charAt(1))+x,16)),k[4]&&(S=k[4][me](A),s=o(S[0]),S[0].slice(-1)=="%"&&(s*=2.55),a=o(S[1]),S[1].slice(-1)=="%"&&(a*=2.55),l=o(S[2]),S[2].slice(-1)=="%"&&(l*=2.55),k[1].toLowerCase().slice(0,4)=="rgba"&&(p=o(S[3])),S[3]&&S[3].slice(-1)=="%"&&(p/=100)),k[5]?(S=k[5][me](A),s=o(S[0]),S[0].slice(-1)=="%"&&(s*=2.55),a=o(S[1]),S[1].slice(-1)=="%"&&(a*=2.55),l=o(S[2]),S[2].slice(-1)=="%"&&(l*=2.55),(S[0].slice(-3)=="deg"||S[0].slice(-1)=="Â°")&&(s/=360),k[1].toLowerCase().slice(0,4)=="hsba"&&(p=o(S[3])),S[3]&&S[3].slice(-1)=="%"&&(p/=100),f.hsb2rgb(s,a,l,p)):k[6]?(S=k[6][me](A),s=o(S[0]),S[0].slice(-1)=="%"&&(s*=2.55),a=o(S[1]),S[1].slice(-1)=="%"&&(a*=2.55),l=o(S[2]),S[2].slice(-1)=="%"&&(l*=2.55),(S[0].slice(-3)=="deg"||S[0].slice(-1)=="Â°")&&(s/=360),k[1].toLowerCase().slice(0,4)=="hsla"&&(p=o(S[3])),S[3]&&S[3].slice(-1)=="%"&&(p/=100),f.hsl2rgb(s,a,l,p)):((k={r:s,g:a,b:l,toString:Ke}).hex="#"+(16777216|l|a<<8|s<<16).toString(16).slice(1),f.is(p,"finite")&&(k.opacity=p),k)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ke}},f),f.hsb=Oe(function(n,s,a){return f.hsb2rgb(n,s,a).hex}),f.hsl=Oe(function(n,s,a){return f.hsl2rgb(n,s,a).hex}),f.rgb=Oe(function(n,s,a){function l(p){return p+.5|0}return"#"+(16777216|l(a)|l(s)<<8|l(n)<<16).toString(16).slice(1)}),f.getColor=function(n){var s=this.getColor.start=this.getColor.start||{h:0,s:1,b:n||.75},a=this.hsb2rgb(s.h,s.s,s.b);return s.h+=.075,s.h>1&&(s.h=0,s.s-=.2,s.s<=0&&(this.getColor.start={h:0,s:1,b:s.b})),a.hex},f.getColor.reset=function(){delete this.start},f.parsePathString=function(n){if(!n)return null;var s=Ge(n);if(s.arr)return $e(s.arr);var a={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},l=[];return f.is(n,ie)&&f.is(n[0],ie)&&(l=$e(n)),l.length||G(n).replace(U,function(p,x,S){var k=[],P=x.toLowerCase();if(S.replace(se,function(q,Y){Y&&k.push(+Y)}),P=="m"&&k.length>2&&(l.push([x][V](k.splice(0,2))),P="l",x=x=="m"?"l":"L"),P=="r")l.push([x][V](k));else for(;k.length>=a[P]&&(l.push([x][V](k.splice(0,a[P]))),a[P]););}),l.toString=f._path2string,s.arr=$e(l),l},f.parseTransformString=Oe(function(n){if(!n)return null;var s=[];return f.is(n,ie)&&f.is(n[0],ie)&&(s=$e(n)),s.length||G(n).replace(ee,function(a,l,p){var x=[];be.call(l),p.replace(se,function(S,k){k&&x.push(+k)}),s.push([l][V](x))}),s.toString=f._path2string,s},this,function(n){if(!n)return n;for(var s=[],a=0;a<n.length;a++){for(var l=[],p=0;p<n[a].length;p++)l.push(n[a][p]);s.push(l)}return s});var Ge=function(n){var s=Ge.ps=Ge.ps||{};return s[n]?s[n].sleep=100:s[n]={sleep:100},setTimeout(function(){for(var a in s)s[R](a)&&a!=n&&(s[a].sleep--,!s[a].sleep&&delete s[a])}),s[n]};function ht(n,s,a,l,p){return n*(n*(-3*s+9*a-9*l+3*p)+6*s-12*a+6*l)-3*s+3*a}function We(n,s,a,l,p,x,S,k,P){P==null&&(P=1);for(var q=(P=P>1?1:P<0?0:P)/2,Y=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ae=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],K=0,X=0;X<12;X++){var te=q*Y[X]+q,ce=ht(te,n,a,p,S),ne=ht(te,s,l,x,k),Q=ce*ce+ne*ne;K+=ae[X]*oe.sqrt(Q)}return q*K}function _t(n,s,a,l,p,x,S,k){if(!(ke(n,a)<j(p,S)||j(n,a)>ke(p,S)||ke(s,l)<j(x,k)||j(s,l)>ke(x,k))){var P=(n-a)*(x-k)-(s-l)*(p-S);if(P){var q=((n*l-s*a)*(p-S)-(n-a)*(p*k-x*S))/P,Y=((n*l-s*a)*(x-k)-(s-l)*(p*k-x*S))/P,ae=+q.toFixed(2),K=+Y.toFixed(2);if(!(ae<+j(n,a).toFixed(2)||ae>+ke(n,a).toFixed(2)||ae<+j(p,S).toFixed(2)||ae>+ke(p,S).toFixed(2)||K<+j(s,l).toFixed(2)||K>+ke(s,l).toFixed(2)||K<+j(x,k).toFixed(2)||K>+ke(x,k).toFixed(2)))return{x:q,y:Y}}}}function dt(n,s,a){var l=f.bezierBBox(n),p=f.bezierBBox(s);if(!f.isBBoxIntersect(l,p))return a?0:[];for(var x=We.apply(0,n),S=We.apply(0,s),k=ke(~~(x/5),1),P=ke(~~(S/5),1),q=[],Y=[],ae={},K=a?0:[],X=0;X<k+1;X++){var te=f.findDotsAtSegment.apply(f,n.concat(X/k));q.push({x:te.x,y:te.y,t:X/k})}for(X=0;X<P+1;X++)te=f.findDotsAtSegment.apply(f,s.concat(X/P)),Y.push({x:te.x,y:te.y,t:X/P});for(X=0;X<k;X++)for(var ce=0;ce<P;ce++){var ne=q[X],Q=q[X+1],_e=Y[ce],ue=Y[ce+1],ve=Ce(Q.x-ne.x)<.001?"y":"x",he=Ce(ue.x-_e.x)<.001?"y":"x",Le=_t(ne.x,ne.y,Q.x,Q.y,_e.x,_e.y,ue.x,ue.y);if(Le){if(ae[Le.x.toFixed(4)]==Le.y.toFixed(4))continue;ae[Le.x.toFixed(4)]=Le.y.toFixed(4);var Ee=ne.t+Ce((Le[ve]-ne[ve])/(Q[ve]-ne[ve]))*(Q.t-ne.t),Be=_e.t+Ce((Le[he]-_e[he])/(ue[he]-_e[he]))*(ue.t-_e.t);Ee>=0&&Ee<=1.001&&Be>=0&&Be<=1.001&&(a?K++:K.push({x:Le.x,y:Le.y,t1:j(Ee,1),t2:j(Be,1)}))}}return K}function kt(n,s,a){n=f._path2curve(n),s=f._path2curve(s);for(var l,p,x,S,k,P,q,Y,ae,K,X=a?0:[],te=0,ce=n.length;te<ce;te++){var ne=n[te];if(ne[0]=="M")l=k=ne[1],p=P=ne[2];else{ne[0]=="C"?(ae=[l,p].concat(ne.slice(1)),l=ae[6],p=ae[7]):(ae=[l,p,l,p,k,P,k,P],l=k,p=P);for(var Q=0,_e=s.length;Q<_e;Q++){var ue=s[Q];if(ue[0]=="M")x=q=ue[1],S=Y=ue[2];else{ue[0]=="C"?(K=[x,S].concat(ue.slice(1)),x=K[6],S=K[7]):(K=[x,S,x,S,q,Y,q,Y],x=q,S=Y);var ve=dt(ae,K,a);if(a)X+=ve;else{for(var he=0,Le=ve.length;he<Le;he++)ve[he].segment1=te,ve[he].segment2=Q,ve[he].bez1=ae,ve[he].bez2=K;X=X.concat(ve)}}}}}return X}f.findDotsAtSegment=function(n,s,a,l,p,x,S,k,P){var q=1-P,Y=Se(q,3),ae=Se(q,2),K=P*P,X=K*P,te=Y*n+3*ae*P*a+3*q*P*P*p+X*S,ce=Y*s+3*ae*P*l+3*q*P*P*x+X*k,ne=n+2*P*(a-n)+K*(p-2*a+n),Q=s+2*P*(l-s)+K*(x-2*l+s),_e=a+2*P*(p-a)+K*(S-2*p+a),ue=l+2*P*(x-l)+K*(k-2*x+l),ve=q*n+P*a,he=q*s+P*l,Le=q*p+P*S,Ee=q*x+P*k,Be=90-180*oe.atan2(ne-_e,Q-ue)/Z;return(ne>_e||Q<ue)&&(Be+=180),{x:te,y:ce,m:{x:ne,y:Q},n:{x:_e,y:ue},start:{x:ve,y:he},end:{x:Le,y:Ee},alpha:Be}},f.bezierBBox=function(n,s,a,l,p,x,S,k){f.is(n,"array")||(n=[n,s,a,l,p,x,S,k]);var P=Mt.apply(null,n);return{x:P.min.x,y:P.min.y,x2:P.max.x,y2:P.max.y,width:P.max.x-P.min.x,height:P.max.y-P.min.y}},f.isPointInsideBBox=function(n,s,a){return s>=n.x&&s<=n.x2&&a>=n.y&&a<=n.y2},f.isBBoxIntersect=function(n,s){var a=f.isPointInsideBBox;return a(s,n.x,n.y)||a(s,n.x2,n.y)||a(s,n.x,n.y2)||a(s,n.x2,n.y2)||a(n,s.x,s.y)||a(n,s.x2,s.y)||a(n,s.x,s.y2)||a(n,s.x2,s.y2)||(n.x<s.x2&&n.x>s.x||s.x<n.x2&&s.x>n.x)&&(n.y<s.y2&&n.y>s.y||s.y<n.y2&&s.y>n.y)},f.pathIntersection=function(n,s){return kt(n,s)},f.pathIntersectionNumber=function(n,s){return kt(n,s,1)},f.isPointInsidePath=function(n,s,a){var l=f.pathBBox(n);return f.isPointInsideBBox(l,s,a)&&kt(n,[["M",s,a],["H",l.x2+10]],1)%2==1},f._removedFactory=function(n){return function(){h("raphael.log",null,"RaphaÃ«l: you are calling to method â€œ"+n+"â€ of removed object",n)}};var Ze=f.pathBBox=function(n){var s=Ge(n);if(s.bbox)return qe(s.bbox);if(!n)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var a,l=0,p=0,x=[],S=[],k=0,P=(n=St(n)).length;k<P;k++)if((a=n[k])[0]=="M")l=a[1],p=a[2],x.push(l),S.push(p);else{var q=Mt(l,p,a[1],a[2],a[3],a[4],a[5],a[6]);x=x[V](q.min.x,q.max.x),S=S[V](q.min.y,q.max.y),l=a[5],p=a[6]}var Y=j[$](0,x),ae=j[$](0,S),K=ke[$](0,x),X=ke[$](0,S),te=K-Y,ce=X-ae,ne={x:Y,y:ae,x2:K,y2:X,width:te,height:ce,cx:Y+te/2,cy:ae+ce/2};return s.bbox=qe(ne),ne},$e=function(n){var s=qe(n);return s.toString=f._path2string,s},Zt=f._pathToRelative=function(n){var s=Ge(n);if(s.rel)return $e(s.rel);f.is(n,ie)&&f.is(n&&n[0],ie)||(n=f.parsePathString(n));var a=[],l=0,p=0,x=0,S=0,k=0;n[0][0]=="M"&&(x=l=n[0][1],S=p=n[0][2],k++,a.push(["M",l,p]));for(var P=k,q=n.length;P<q;P++){var Y=a[P]=[],ae=n[P];if(ae[0]!=be.call(ae[0]))switch(Y[0]=be.call(ae[0]),Y[0]){case"a":Y[1]=ae[1],Y[2]=ae[2],Y[3]=ae[3],Y[4]=ae[4],Y[5]=ae[5],Y[6]=+(ae[6]-l).toFixed(3),Y[7]=+(ae[7]-p).toFixed(3);break;case"v":Y[1]=+(ae[1]-p).toFixed(3);break;case"m":x=ae[1],S=ae[2];default:for(var K=1,X=ae.length;K<X;K++)Y[K]=+(ae[K]-(K%2?l:p)).toFixed(3)}else{Y=a[P]=[],ae[0]=="m"&&(x=ae[1]+l,S=ae[2]+p);for(var te=0,ce=ae.length;te<ce;te++)a[P][te]=ae[te]}var ne=a[P].length;switch(a[P][0]){case"z":l=x,p=S;break;case"h":l+=+a[P][ne-1];break;case"v":p+=+a[P][ne-1];break;default:l+=+a[P][ne-2],p+=+a[P][ne-1]}}return a.toString=f._path2string,s.rel=$e(a),a},ft=f._pathToAbsolute=function(n){var s=Ge(n);if(s.abs)return $e(s.abs);if(f.is(n,ie)&&f.is(n&&n[0],ie)||(n=f.parsePathString(n)),!n||!n.length)return[["M",0,0]];var a=[],l=0,p=0,x=0,S=0,k=0;n[0][0]=="M"&&(x=l=+n[0][1],S=p=+n[0][2],k++,a[0]=["M",l,p]);for(var P,q,Y=n.length==3&&n[0][0]=="M"&&n[1][0].toUpperCase()=="R"&&n[2][0].toUpperCase()=="Z",ae=k,K=n.length;ae<K;ae++){if(a.push(P=[]),(q=n[ae])[0]!=d.call(q[0]))switch(P[0]=d.call(q[0]),P[0]){case"A":P[1]=q[1],P[2]=q[2],P[3]=q[3],P[4]=q[4],P[5]=q[5],P[6]=+(q[6]+l),P[7]=+(q[7]+p);break;case"V":P[1]=+q[1]+p;break;case"H":P[1]=+q[1]+l;break;case"R":for(var X=[l,p][V](q.slice(1)),te=2,ce=X.length;te<ce;te++)X[te]=+X[te]+l,X[++te]=+X[te]+p;a.pop(),a=a[V](ut(X,Y));break;case"M":x=+q[1]+l,S=+q[2]+p;default:for(te=1,ce=q.length;te<ce;te++)P[te]=+q[te]+(te%2?l:p)}else if(q[0]=="R")X=[l,p][V](q.slice(1)),a.pop(),a=a[V](ut(X,Y)),P=["R"][V](q.slice(-2));else for(var ne=0,Q=q.length;ne<Q;ne++)P[ne]=q[ne];switch(P[0]){case"Z":l=x,p=S;break;case"H":l=P[1];break;case"V":p=P[1];break;case"M":x=P[P.length-2],S=P[P.length-1];default:l=P[P.length-2],p=P[P.length-1]}}return a.toString=f._path2string,s.abs=$e(a),a},pt=function(n,s,a,l){return[n,s,a,l,a,l]},et=function(n,s,a,l,p,x){return[1/3*n+2/3*a,1/3*s+2/3*l,1/3*p+2/3*a,1/3*x+2/3*l,p,x]},Tt=function(n,s,a,l,p,x,S,k,P,q){var Y,ae=120*Z/180,K=Z/180*(+p||0),X=[],te=Oe(function(v1,y1,zt){return{x:v1*oe.cos(zt)-y1*oe.sin(zt),y:v1*oe.sin(zt)+y1*oe.cos(zt)}});if(q)Ee=q[0],Be=q[1],he=q[2],Le=q[3];else{n=(Y=te(n,s,-K)).x,s=Y.y,k=(Y=te(k,P,-K)).x,P=Y.y;var ce=(n-k)/2,ne=(s-P)/2,Q=ce*ce/(a*a)+ne*ne/(l*l);Q>1&&(a*=Q=oe.sqrt(Q),l*=Q);var _e=a*a,ue=l*l,ve=(x==S?-1:1)*oe.sqrt(Ce((_e*ue-_e*ne*ne-ue*ce*ce)/(_e*ne*ne+ue*ce*ce))),he=ve*a*ne/l+(n+k)/2,Le=ve*-l*ce/a+(s+P)/2,Ee=oe.asin(((s-Le)/l).toFixed(9)),Be=oe.asin(((P-Le)/l).toFixed(9));(Ee=n<he?Z-Ee:Ee)<0&&(Ee=2*Z+Ee),(Be=k<he?Z-Be:Be)<0&&(Be=2*Z+Be),S&&Ee>Be&&(Ee-=2*Z),!S&&Be>Ee&&(Be-=2*Z)}var gt=Be-Ee;if(Ce(gt)>ae){var Et=Be,je=k,Ye=P;Be=Ee+ae*(S&&Be>Ee?1:-1),k=he+a*oe.cos(Be),P=Le+l*oe.sin(Be),X=Tt(k,P,a,l,p,0,S,je,Ye,[Be,Et,he,Le])}gt=Be-Ee;var vt=oe.cos(Ee),yt=oe.sin(Ee),Dt=oe.cos(Be),Qe=oe.sin(Be),at=oe.tan(gt/4),qt=4/3*a*at,d1=4/3*l*at,f1=[n,s],xt=[n+qt*yt,s-d1*vt],p1=[k+qt*Qe,P-d1*Dt],m1=[k,P];if(xt[0]=2*f1[0]-xt[0],xt[1]=2*f1[1]-xt[1],q)return[xt,p1,m1][V](X);for(var g1=[],nt=0,V1=(X=[xt,p1,m1][V](X).join()[me](",")).length;nt<V1;nt++)g1[nt]=nt%2?te(X[nt-1],X[nt],K).y:te(X[nt],X[nt+1],K).x;return g1},it=function(n,s,a,l,p,x,S,k,P){var q=1-P;return{x:Se(q,3)*n+3*Se(q,2)*P*a+3*q*P*P*p+Se(P,3)*S,y:Se(q,3)*s+3*Se(q,2)*P*l+3*q*P*P*x+Se(P,3)*k}},Mt=Oe(function(n,s,a,l,p,x,S,k){var P,q=p-2*a+n-(S-2*p+a),Y=2*(a-n)-2*(p-a),ae=n-a,K=(-Y+oe.sqrt(Y*Y-4*q*ae))/2/q,X=(-Y-oe.sqrt(Y*Y-4*q*ae))/2/q,te=[s,k],ce=[n,S];return Ce(K)>"1e12"&&(K=.5),Ce(X)>"1e12"&&(X=.5),K>0&&K<1&&(P=it(n,s,a,l,p,x,S,k,K),ce.push(P.x),te.push(P.y)),X>0&&X<1&&(P=it(n,s,a,l,p,x,S,k,X),ce.push(P.x),te.push(P.y)),q=x-2*l+s-(k-2*x+l),ae=s-l,K=(-(Y=2*(l-s)-2*(x-l))+oe.sqrt(Y*Y-4*q*ae))/2/q,X=(-Y-oe.sqrt(Y*Y-4*q*ae))/2/q,Ce(K)>"1e12"&&(K=.5),Ce(X)>"1e12"&&(X=.5),K>0&&K<1&&(P=it(n,s,a,l,p,x,S,k,K),ce.push(P.x),te.push(P.y)),X>0&&X<1&&(P=it(n,s,a,l,p,x,S,k,X),ce.push(P.x),te.push(P.y)),{min:{x:j[$](0,ce),y:j[$](0,te)},max:{x:ke[$](0,ce),y:ke[$](0,te)}}}),St=f._path2curve=Oe(function(n,s){var a=!s&&Ge(n);if(!s&&a.curve)return $e(a.curve);for(var l=ft(n),p=s&&ft(s),x={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},S={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k=function(ve,he,Le){var Ee,Be;if(!ve)return["C",he.x,he.y,he.x,he.y,he.x,he.y];switch(!(ve[0]in{T:1,Q:1})&&(he.qx=he.qy=null),ve[0]){case"M":he.X=ve[1],he.Y=ve[2];break;case"A":ve=["C"][V](Tt[$](0,[he.x,he.y][V](ve.slice(1))));break;case"S":Le=="C"||Le=="S"?(Ee=2*he.x-he.bx,Be=2*he.y-he.by):(Ee=he.x,Be=he.y),ve=["C",Ee,Be][V](ve.slice(1));break;case"T":Le=="Q"||Le=="T"?(he.qx=2*he.x-he.qx,he.qy=2*he.y-he.qy):(he.qx=he.x,he.qy=he.y),ve=["C"][V](et(he.x,he.y,he.qx,he.qy,ve[1],ve[2]));break;case"Q":he.qx=ve[1],he.qy=ve[2],ve=["C"][V](et(he.x,he.y,ve[1],ve[2],ve[3],ve[4]));break;case"L":ve=["C"][V](pt(he.x,he.y,ve[1],ve[2]));break;case"H":ve=["C"][V](pt(he.x,he.y,ve[1],he.y));break;case"V":ve=["C"][V](pt(he.x,he.y,he.x,ve[1]));break;case"Z":ve=["C"][V](pt(he.x,he.y,he.X,he.Y))}return ve},P=function(ve,he){if(ve[he].length>7){ve[he].shift();for(var Le=ve[he];Le.length;)Y[he]="A",p&&(ae[he]="A"),ve.splice(he++,0,["C"][V](Le.splice(0,6)));ve.splice(he,1),ce=ke(l.length,p&&p.length||0)}},q=function(ve,he,Le,Ee,Be){ve&&he&&ve[Be][0]=="M"&&he[Be][0]!="M"&&(he.splice(Be,0,["M",Ee.x,Ee.y]),Le.bx=0,Le.by=0,Le.x=ve[Be][1],Le.y=ve[Be][2],ce=ke(l.length,p&&p.length||0))},Y=[],ae=[],K="",X="",te=0,ce=ke(l.length,p&&p.length||0);te<ce;te++){l[te]&&(K=l[te][0]),K!="C"&&(Y[te]=K,te&&(X=Y[te-1])),l[te]=k(l[te],x,X),Y[te]!="A"&&K=="C"&&(Y[te]="C"),P(l,te),p&&(p[te]&&(K=p[te][0]),K!="C"&&(ae[te]=K,te&&(X=ae[te-1])),p[te]=k(p[te],S,X),ae[te]!="A"&&K=="C"&&(ae[te]="C"),P(p,te)),q(l,p,x,S,te),q(p,l,S,x,te);var ne=l[te],Q=p&&p[te],_e=ne.length,ue=p&&Q.length;x.x=ne[_e-2],x.y=ne[_e-1],x.bx=o(ne[_e-4])||x.x,x.by=o(ne[_e-3])||x.y,S.bx=p&&(o(Q[ue-4])||S.x),S.by=p&&(o(Q[ue-3])||S.y),S.x=p&&Q[ue-2],S.y=p&&Q[ue-1]}return p||(a.curve=$e(l)),p?[l,p]:l},null,$e),It=(f._parseDots=Oe(function(n){for(var s=[],a=0,l=n.length;a<l;a++){var p={},x=n[a].match(/^([^:]*):?([\d\.]*)/);if(p.color=f.getRGB(x[1]),p.color.error)return null;p.opacity=p.color.opacity,p.color=p.color.hex,x[2]&&(p.offset=x[2]+"%"),s.push(p)}for(a=1,l=s.length-1;a<l;a++)if(!s[a].offset){for(var S=o(s[a-1].offset||0),k=0,P=a+1;P<l;P++)if(s[P].offset){k=s[P].offset;break}k||(k=100,P=l);for(var q=((k=o(k))-S)/(P-a+1);a<P;a++)S+=q,s[a].offset=S+"%"}return s}),f._tear=function(n,s){n==s.top&&(s.top=n.prev),n==s.bottom&&(s.bottom=n.next),n.next&&(n.next.prev=n.prev),n.prev&&(n.prev.next=n.next)}),M1=(f._tofront=function(n,s){s.top!==n&&(It(n,s),n.next=null,n.prev=s.top,s.top.next=n,s.top=n)},f._toback=function(n,s){s.bottom!==n&&(It(n,s),n.next=s.bottom,n.prev=null,s.bottom.prev=n,s.bottom=n)},f._insertafter=function(n,s,a){It(n,a),s==a.top&&(a.top=n),s.next&&(s.next.prev=n),n.next=s.next,n.prev=s,s.next=n},f._insertbefore=function(n,s,a){It(n,a),s==a.bottom&&(a.bottom=n),s.prev&&(s.prev.next=n),n.prev=s.prev,s.prev=n,n.next=s},f.toMatrix=function(n,s){var a=Ze(n),l={_:{transform:fe},getBBox:function(){return a}};return e1(l,s),l.matrix}),e1=(f.transformPath=function(n,s){return Me(n,M1(n,s))},f._extractTransform=function(n,s){if(s==null)return n._.transform;s=G(s).replace(/\.{3}|\u2026/g,n._.transform||fe);var a,l,p=f.parseTransformString(s),x=0,S=1,k=1,P=n._,q=new st;if(P.transform=p||[],p)for(var Y=0,ae=p.length;Y<ae;Y++){var K,X,te,ce,ne,Q=p[Y],_e=Q.length,ue=G(Q[0]).toLowerCase(),ve=Q[0]!=ue,he=ve?q.invert():0;ue=="t"&&_e==3?ve?(K=he.x(0,0),X=he.y(0,0),te=he.x(Q[1],Q[2]),ce=he.y(Q[1],Q[2]),q.translate(te-K,ce-X)):q.translate(Q[1],Q[2]):ue=="r"?_e==2?(ne=ne||n.getBBox(1),q.rotate(Q[1],ne.x+ne.width/2,ne.y+ne.height/2),x+=Q[1]):_e==4&&(ve?(te=he.x(Q[2],Q[3]),ce=he.y(Q[2],Q[3]),q.rotate(Q[1],te,ce)):q.rotate(Q[1],Q[2],Q[3]),x+=Q[1]):ue=="s"?_e==2||_e==3?(ne=ne||n.getBBox(1),q.scale(Q[1],Q[_e-1],ne.x+ne.width/2,ne.y+ne.height/2),S*=Q[1],k*=Q[_e-1]):_e==5&&(ve?(te=he.x(Q[3],Q[4]),ce=he.y(Q[3],Q[4]),q.scale(Q[1],Q[2],te,ce)):q.scale(Q[1],Q[2],Q[3],Q[4]),S*=Q[1],k*=Q[2]):ue=="m"&&_e==7&&q.add(Q[1],Q[2],Q[3],Q[4],Q[5],Q[6]),P.dirtyT=1,n.matrix=q}n.matrix=q,P.sx=S,P.sy=k,P.deg=x,P.dx=a=q.e,P.dy=l=q.f,S==1&&k==1&&!x&&P.bbox?(P.bbox.x+=+a,P.bbox.y+=+l):P.dirtyT=1}),t1=function(n){var s=n[0];switch(s.toLowerCase()){case"t":return[s,0,0];case"m":return[s,1,0,0,1,0,0];case"r":return n.length==4?[s,0,n[2],n[3]]:[s,0];case"s":return n.length==5?[s,1,1,n[3],n[4]]:n.length==3?[s,1,1]:[s,1]}},I1=f._equaliseTransform=function(n,s){s=G(s).replace(/\.{3}|\u2026/g,n),n=f.parseTransformString(n)||[],s=f.parseTransformString(s)||[];for(var a,l,p,x,S=ke(n.length,s.length),k=[],P=[],q=0;q<S;q++){if(p=n[q]||t1(s[q]),x=s[q]||t1(p),p[0]!=x[0]||p[0].toLowerCase()=="r"&&(p[2]!=x[2]||p[3]!=x[3])||p[0].toLowerCase()=="s"&&(p[3]!=x[3]||p[4]!=x[4]))return;for(k[q]=[],P[q]=[],a=0,l=ke(p.length,x.length);a<l;a++)a in p&&(k[q][a]=p[a]),a in x&&(P[q][a]=x[a])}return{from:k,to:P}};function st(n,s,a,l,p,x){n!=null?(this.a=+n,this.b=+s,this.c=+a,this.d=+l,this.e=+p,this.f=+x):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}f._getContainer=function(n,s,a,l){var p;if((p=l!=null||f.is(n,"object")?n:z.doc.getElementById(n))!=null)return p.tagName?s==null?{container:p,width:p.style.pixelWidth||p.offsetWidth,height:p.style.pixelHeight||p.offsetHeight}:{container:p,width:s,height:a}:{container:1,x:n,y:s,width:a,height:l}},f.pathToRelative=Zt,f._engine={},f.path2curve=St,f.matrix=function(n,s,a,l,p,x){return new st(n,s,a,l,p,x)},function(n){function s(l){return l[0]*l[0]+l[1]*l[1]}function a(l){var p=oe.sqrt(s(l));l[0]&&(l[0]/=p),l[1]&&(l[1]/=p)}n.add=function(l,p,x,S,k,P){var q,Y,ae,K,X=[[],[],[]],te=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],ce=[[l,x,k],[p,S,P],[0,0,1]];for(l&&l instanceof st&&(ce=[[l.a,l.c,l.e],[l.b,l.d,l.f],[0,0,1]]),q=0;q<3;q++)for(Y=0;Y<3;Y++){for(K=0,ae=0;ae<3;ae++)K+=te[q][ae]*ce[ae][Y];X[q][Y]=K}this.a=X[0][0],this.b=X[1][0],this.c=X[0][1],this.d=X[1][1],this.e=X[0][2],this.f=X[1][2]},n.invert=function(){var l=this,p=l.a*l.d-l.b*l.c;return new st(l.d/p,-l.b/p,-l.c/p,l.a/p,(l.c*l.f-l.d*l.e)/p,(l.b*l.e-l.a*l.f)/p)},n.clone=function(){return new st(this.a,this.b,this.c,this.d,this.e,this.f)},n.translate=function(l,p){this.add(1,0,0,1,l,p)},n.scale=function(l,p,x,S){p==null&&(p=l),(x||S)&&this.add(1,0,0,1,x,S),this.add(l,0,0,p,0,0),(x||S)&&this.add(1,0,0,1,-x,-S)},n.rotate=function(l,p,x){l=f.rad(l),p=p||0,x=x||0;var S=+oe.cos(l).toFixed(9),k=+oe.sin(l).toFixed(9);this.add(S,k,-k,S,p,x),this.add(1,0,0,1,-p,-x)},n.x=function(l,p){return l*this.a+p*this.c+this.e},n.y=function(l,p){return l*this.b+p*this.d+this.f},n.get=function(l){return+this[G.fromCharCode(97+l)].toFixed(4)},n.toString=function(){return f.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},n.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},n.split=function(){var l={};l.dx=this.e,l.dy=this.f;var p=[[this.a,this.c],[this.b,this.d]];l.scalex=oe.sqrt(s(p[0])),a(p[0]),l.shear=p[0][0]*p[1][0]+p[0][1]*p[1][1],p[1]=[p[1][0]-p[0][0]*l.shear,p[1][1]-p[0][1]*l.shear],l.scaley=oe.sqrt(s(p[1])),a(p[1]),l.shear/=l.scaley;var x=-p[0][1],S=p[1][1];return S<0?(l.rotate=f.deg(oe.acos(S)),x<0&&(l.rotate=360-l.rotate)):l.rotate=f.deg(oe.asin(x)),l.isSimple=!(+l.shear.toFixed(9)||l.scalex.toFixed(9)!=l.scaley.toFixed(9)&&l.rotate),l.isSuperSimple=!+l.shear.toFixed(9)&&l.scalex.toFixed(9)==l.scaley.toFixed(9)&&!l.rotate,l.noRotation=!+l.shear.toFixed(9)&&!l.rotate,l},n.toTransformString=function(l){var p=l||this[me]();return p.isSimple?(p.scalex=+p.scalex.toFixed(4),p.scaley=+p.scaley.toFixed(4),p.rotate=+p.rotate.toFixed(4),(p.dx||p.dy?"t"+[p.dx,p.dy]:fe)+(p.scalex!=1||p.scaley!=1?"s"+[p.scalex,p.scaley,0,0]:fe)+(p.rotate?"r"+[p.rotate,0,0]:fe)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(st.prototype);for(var D1=function(){this.returnValue=!1},q1=function(){return this.originalEvent.preventDefault()},z1=function(){this.cancelBubble=!0},F1=function(){return this.originalEvent.stopPropagation()},n1=function(n){var s=z.doc.documentElement.scrollTop||z.doc.body.scrollTop,a=z.doc.documentElement.scrollLeft||z.doc.body.scrollLeft;return{x:n.clientX+a,y:n.clientY+s}},O1=z.doc.addEventListener?function(n,s,a,l){var p=function(S){var k=n1(S);return a.call(l,S,k.x,k.y)};if(n.addEventListener(s,p,!1),le&&I[s]){var x=function(S){for(var k=n1(S),P=S,q=0,Y=S.targetTouches&&S.targetTouches.length;q<Y;q++)if(S.targetTouches[q].target==n){(S=S.targetTouches[q]).originalEvent=P,S.preventDefault=q1,S.stopPropagation=F1;break}return a.call(l,S,k.x,k.y)};n.addEventListener(I[s],x,!1)}return function(){return n.removeEventListener(s,p,!1),le&&I[s]&&n.removeEventListener(I[s],x,!1),!0}}:z.doc.attachEvent?function(n,s,a,l){var p=function(x){x=x||z.win.event;var S=z.doc.documentElement.scrollTop||z.doc.body.scrollTop,k=z.doc.documentElement.scrollLeft||z.doc.body.scrollLeft,P=x.clientX+k,q=x.clientY+S;return x.preventDefault=x.preventDefault||D1,x.stopPropagation=x.stopPropagation||z1,a.call(l,x,P,q)};return n.attachEvent("on"+s,p),function(){return n.detachEvent("on"+s,p),!0}}:void 0,tt=[],Vt=function(n){for(var s,a=n.clientX,l=n.clientY,p=z.doc.documentElement.scrollTop||z.doc.body.scrollTop,x=z.doc.documentElement.scrollLeft||z.doc.body.scrollLeft,S=tt.length;S--;){if(s=tt[S],le&&n.touches){for(var k,P=n.touches.length;P--;)if((k=n.touches[P]).identifier==s.el._drag.id){a=k.clientX,l=k.clientY,(n.originalEvent?n.originalEvent:n).preventDefault();break}}else n.preventDefault();var q,Y=s.el.node,ae=Y.nextSibling,K=Y.parentNode,X=Y.style.display;z.win.opera&&K.removeChild(Y),Y.style.display="none",q=s.el.paper.getElementByPoint(a,l),Y.style.display=X,z.win.opera&&(ae?K.insertBefore(Y,ae):K.appendChild(Y)),q&&h("raphael.drag.over."+s.el.id,s.el,q),a+=x,l+=p,h("raphael.drag.move."+s.el.id,s.move_scope||s.el,a-s.el._drag.x,l-s.el._drag.y,a,l,n)}},$t=function(n){f.unmousemove(Vt).unmouseup($t);for(var s,a=tt.length;a--;)(s=tt[a]).el._drag={},h("raphael.drag.end."+s.el.id,s.end_scope||s.start_scope||s.move_scope||s.el,n);tt=[]},Ie=f.el={},r1=pe.length;r1--;)(function(n){f[n]=Ie[n]=function(s,a){return f.is(s,"function")&&(this.events=this.events||[],this.events.push({name:n,f:s,unbind:O1(this.shape||this.node||z.doc,n,s,a||this)})),this},f["un"+n]=Ie["un"+n]=function(s){for(var a=this.events||[],l=a.length;l--;)a[l].name!=n||!f.is(s,"undefined")&&a[l].f!=s||(a[l].unbind(),a.splice(l,1),!a.length&&delete this.events);return this}})(pe[r1]);Ie.data=function(n,s){var a=de[this.id]=de[this.id]||{};if(arguments.length==0)return a;if(arguments.length==1){if(f.is(n,"object")){for(var l in n)n[R](l)&&this.data(l,n[l]);return this}return h("raphael.data.get."+this.id,this,a[n],n),a[n]}return a[n]=s,h("raphael.data.set."+this.id,this,s,n),this},Ie.removeData=function(n){return n==null?delete de[this.id]:de[this.id]&&delete de[this.id][n],this},Ie.getData=function(){return qe(de[this.id]||{})},Ie.hover=function(n,s,a,l){return this.mouseover(n,a).mouseout(s,l||a)},Ie.unhover=function(n,s){return this.unmouseover(n).unmouseout(s)};var mt=[];Ie.drag=function(n,s,a,l,p,x){function S(k){(k.originalEvent||k).preventDefault();var P=k.clientX,q=k.clientY,Y=z.doc.documentElement.scrollTop||z.doc.body.scrollTop,ae=z.doc.documentElement.scrollLeft||z.doc.body.scrollLeft;if(this._drag.id=k.identifier,le&&k.touches){for(var K,X=k.touches.length;X--;)if(K=k.touches[X],this._drag.id=K.identifier,K.identifier==this._drag.id){P=K.clientX,q=K.clientY;break}}this._drag.x=P+ae,this._drag.y=q+Y,!tt.length&&f.mousemove(Vt).mouseup($t),tt.push({el:this,move_scope:l,start_scope:p,end_scope:x}),s&&h.on("raphael.drag.start."+this.id,s),n&&h.on("raphael.drag.move."+this.id,n),a&&h.on("raphael.drag.end."+this.id,a),h("raphael.drag.start."+this.id,p||l||this,this._drag.x,this._drag.y,k)}return this._drag={},mt.push({el:this,start:S}),this.mousedown(S),this},Ie.onDragOver=function(n){n?h.on("raphael.drag.over."+this.id,n):h.unbind("raphael.drag.over."+this.id)},Ie.undrag=function(){for(var n=mt.length;n--;)mt[n].el==this&&(this.unmousedown(mt[n].start),mt.splice(n,1),h.unbind("raphael.drag.*."+this.id));!mt.length&&f.unmousemove(Vt).unmouseup($t),tt=[]},L.circle=function(n,s,a){var l=f._engine.circle(this,n||0,s||0,a||0);return this.__set__&&this.__set__.push(l),l},L.rect=function(n,s,a,l,p){var x=f._engine.rect(this,n||0,s||0,a||0,l||0,p||0);return this.__set__&&this.__set__.push(x),x},L.ellipse=function(n,s,a,l){var p=f._engine.ellipse(this,n||0,s||0,a||0,l||0);return this.__set__&&this.__set__.push(p),p},L.path=function(n){n&&!f.is(n,"string")&&!f.is(n[0],ie)&&(n+=fe);var s=f._engine.path(f.format[$](f,arguments),this);return this.__set__&&this.__set__.push(s),s},L.image=function(n,s,a,l,p){var x=f._engine.image(this,n||"about:blank",s||0,a||0,l||0,p||0);return this.__set__&&this.__set__.push(x),x},L.text=function(n,s,a){var l=f._engine.text(this,n||0,s||0,G(a));return this.__set__&&this.__set__.push(l),l},L.set=function(n){!f.is(n,"array")&&(n=Array.prototype.splice.call(arguments,0,arguments.length));var s=new Pt(n);return this.__set__&&this.__set__.push(s),s.paper=this,s.type="set",s},L.setStart=function(n){this.__set__=n||this.set()},L.setFinish=function(n){var s=this.__set__;return delete this.__set__,s},L.getSize=function(){var n=this.canvas.parentNode;return{width:n.offsetWidth,height:n.offsetHeight}},L.setSize=function(n,s){return f._engine.setSize.call(this,n,s)},L.setViewBox=function(n,s,a,l,p){return f._engine.setViewBox.call(this,n,s,a,l,p)},L.top=L.bottom=null,L.raphael=f;function i1(){return this.x+ye+this.y+ye+this.width+" Ã— "+this.height}L.getElementByPoint=function(n,s){var a,l,p,x,S,k,P,q=this.canvas,Y=z.doc.elementFromPoint(n,s);if(z.win.opera&&Y.tagName=="svg"){var ae=(l=(a=q).getBoundingClientRect(),p=a.ownerDocument,x=p.body,S=p.documentElement,k=S.clientTop||x.clientTop||0,P=S.clientLeft||x.clientLeft||0,{y:l.top+(z.win.pageYOffset||S.scrollTop||x.scrollTop)-k,x:l.left+(z.win.pageXOffset||S.scrollLeft||x.scrollLeft)-P}),K=q.createSVGRect();K.x=n-ae.x,K.y=s-ae.y,K.width=K.height=1;var X=q.getIntersectionList(K,null);X.length&&(Y=X[X.length-1])}if(!Y)return null;for(;Y.parentNode&&Y!=q.parentNode&&!Y.raphael;)Y=Y.parentNode;return Y==this.canvas.parentNode&&(Y=q),Y=Y&&Y.raphael?this.getById(Y.raphaelid):null},L.getElementsByBBox=function(n){var s=this.set();return this.forEach(function(a){f.isBBoxIntersect(a.getBBox(),n)&&s.push(a)}),s},L.getById=function(n){for(var s=this.bottom;s;){if(s.id==n)return s;s=s.next}return null},L.forEach=function(n,s){for(var a=this.bottom;a;){if(n.call(s,a)===!1)return this;a=a.next}return this},L.getElementsByPoint=function(n,s){var a=this.set();return this.forEach(function(l){l.isPointInside(n,s)&&a.push(l)}),a},Ie.isPointInside=function(n,s){var a=this.realPath=Ne[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(a=f.transformPath(a,this.attr("transform"))),f.isPointInsidePath(a,n,s)},Ie.getBBox=function(n){if(this.removed)return{};var s=this._;return n?(!s.dirty&&s.bboxwt||(this.realPath=Ne[this.type](this),s.bboxwt=Ze(this.realPath),s.bboxwt.toString=i1,s.dirty=0),s.bboxwt):((s.dirty||s.dirtyT||!s.bbox)&&(!s.dirty&&this.realPath||(s.bboxwt=0,this.realPath=Ne[this.type](this)),s.bbox=Ze(Me(this.realPath,this.matrix)),s.bbox.toString=i1,s.dirty=s.dirtyT=0),s.bbox)},Ie.clone=function(){if(this.removed)return null;var n=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(n),n},Ie.glow=function(n){if(this.type=="text")return null;var s={width:((n=n||{}).width||10)+(+this.attr("stroke-width")||1),fill:n.fill||!1,opacity:n.opacity==null?.5:n.opacity,offsetx:n.offsetx||0,offsety:n.offsety||0,color:n.color||"#000"},a=s.width/2,l=this.paper,p=l.set(),x=this.realPath||Ne[this.type](this);x=this.matrix?Me(x,this.matrix):x;for(var S=1;S<a+1;S++)p.push(l.path(x).attr({stroke:s.color,fill:s.fill?s.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(s.width/a*S).toFixed(3),opacity:+(s.opacity/a).toFixed(3)}));return p.insertBefore(this).translate(s.offsetx,s.offsety)};var jt=function(n,s,a,l,p,x,S,k,P){return P==null?We(n,s,a,l,p,x,S,k):f.findDotsAtSegment(n,s,a,l,p,x,S,k,function(q,Y,ae,K,X,te,ce,ne,Q){if(!(Q<0||We(q,Y,ae,K,X,te,ce,ne)<Q)){var _e,ue=.5,ve=1-ue;for(_e=We(q,Y,ae,K,X,te,ce,ne,ve);Ce(_e-Q)>.01;)_e=We(q,Y,ae,K,X,te,ce,ne,ve+=(_e<Q?1:-1)*(ue/=2));return ve}}(n,s,a,l,p,x,S,k,P))},Ut=function(n,s){return function(a,l,p){for(var x,S,k,P,q,Y="",ae={},K=0,X=0,te=(a=St(a)).length;X<te;X++){if((k=a[X])[0]=="M")x=+k[1],S=+k[2];else{if(K+(P=jt(x,S,k[1],k[2],k[3],k[4],k[5],k[6]))>l){if(s&&!ae.start){if(Y+=["C"+(q=jt(x,S,k[1],k[2],k[3],k[4],k[5],k[6],l-K)).start.x,q.start.y,q.m.x,q.m.y,q.x,q.y],p)return Y;ae.start=Y,Y=["M"+q.x,q.y+"C"+q.n.x,q.n.y,q.end.x,q.end.y,k[5],k[6]].join(),K+=P,x=+k[5],S=+k[6];continue}if(!n&&!s)return{x:(q=jt(x,S,k[1],k[2],k[3],k[4],k[5],k[6],l-K)).x,y:q.y,alpha:q.alpha}}K+=P,x=+k[5],S=+k[6]}Y+=k.shift()+k}return ae.end=Y,(q=n?K:s?ae:f.findDotsAtSegment(x,S,k[0],k[1],k[2],k[3],k[4],k[5],1)).alpha&&(q={x:q.x,y:q.y,alpha:q.alpha}),q}},s1=Ut(1),o1=Ut(),Gt=Ut(0,1);f.getTotalLength=s1,f.getPointAtLength=o1,f.getSubpath=function(n,s,a){if(this.getTotalLength(n)-a<1e-6)return Gt(n,s).end;var l=Gt(n,a,1);return s?Gt(l,s).end:l},Ie.getTotalLength=function(){var n=this.getPath();if(n)return this.node.getTotalLength?this.node.getTotalLength():s1(n)},Ie.getPointAtLength=function(n){var s=this.getPath();if(s)return o1(s,n)},Ie.getPath=function(){var n,s=f._getPath[this.type];if(this.type!="text"&&this.type!="set")return s&&(n=s(this)),n},Ie.getSubpath=function(n,s){var a=this.getPath();if(a)return f.getSubpath(a,n,s)};var Ue=f.easing_formulas={linear:function(n){return n},"<":function(n){return Se(n,1.7)},">":function(n){return Se(n,.48)},"<>":function(n){var s=.48-n/1.04,a=oe.sqrt(.1734+s*s),l=a-s,p=-a-s,x=Se(Ce(l),1/3)*(l<0?-1:1)+Se(Ce(p),1/3)*(p<0?-1:1)+.5;return 3*(1-x)*x*x+x*x*x},backIn:function(n){var s=1.70158;return n*n*((s+1)*n-s)},backOut:function(n){var s=1.70158;return(n-=1)*n*((s+1)*n+s)+1},elastic:function(n){return n==!!n?n:Se(2,-10*n)*oe.sin(2*Z*(n-.075)/.3)+1},bounce:function(n){var s=7.5625,a=2.75;return n<1/a?s*n*n:n<2/a?s*(n-=1.5/a)*n+.75:n<2.5/a?s*(n-=2.25/a)*n+.9375:s*(n-=2.625/a)*n+.984375}};Ue.easeIn=Ue["ease-in"]=Ue["<"],Ue.easeOut=Ue["ease-out"]=Ue[">"],Ue.easeInOut=Ue["ease-in-out"]=Ue["<>"],Ue["back-in"]=Ue.backIn,Ue["back-out"]=Ue.backOut;var Te=[],a1=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){setTimeout(n,16)},Wt=function(){for(var n=+new Date,s=0;s<Te.length;s++){var a=Te[s];if(!a.el.removed&&!a.paused){var l,p,x=n-a.start,S=a.ms,k=a.easing,P=a.from,q=a.diff,Y=a.to,ae=(a.t,a.el),K={},X={};if(a.initstatus?(x=(a.initstatus*a.anim.top-a.prev)/(a.percent-a.prev)*S,a.status=a.initstatus,delete a.initstatus,a.stop&&Te.splice(s--,1)):a.status=(a.prev+(a.percent-a.prev)*(x/S))/a.anim.top,!(x<0))if(x<S){var te=k(x/S);for(var ce in P)if(P[R](ce)){switch(g[ce]){case W:l=+P[ce]+te*S*q[ce];break;case"colour":l="rgb("+[Xt(i(P[ce].r+te*S*q[ce].r)),Xt(i(P[ce].g+te*S*q[ce].g)),Xt(i(P[ce].b+te*S*q[ce].b))].join(",")+")";break;case"path":l=[];for(var ne=0,Q=P[ce].length;ne<Q;ne++){l[ne]=[P[ce][ne][0]];for(var _e=1,ue=P[ce][ne].length;_e<ue;_e++)l[ne][_e]=+P[ce][ne][_e]+te*S*q[ce][ne][_e];l[ne]=l[ne].join(ye)}l=l.join(ye);break;case"transform":if(q[ce].real)for(l=[],ne=0,Q=P[ce].length;ne<Q;ne++)for(l[ne]=[P[ce][ne][0]],_e=1,ue=P[ce][ne].length;_e<ue;_e++)l[ne][_e]=P[ce][ne][_e]+te*S*q[ce][ne][_e];else{var ve=function(Le){return+P[ce][Le]+te*S*q[ce][Le]};l=[["m",ve(0),ve(1),ve(2),ve(3),ve(4),ve(5)]]}break;case"csv":if(ce=="clip-rect")for(l=[],ne=4;ne--;)l[ne]=+P[ce][ne]+te*S*q[ce][ne];break;default:var he=[][V](P[ce]);for(l=[],ne=ae.paper.customAttributes[ce].length;ne--;)l[ne]=+he[ne]+te*S*q[ce][ne]}K[ce]=l}ae.attr(K),function(Le,Ee,Be){setTimeout(function(){h("raphael.anim.frame."+Le,Ee,Be)})}(ae.id,ae,a.anim)}else{if(function(Le,Ee,Be){setTimeout(function(){h("raphael.anim.frame."+Ee.id,Ee,Be),h("raphael.anim.finish."+Ee.id,Ee,Be),f.is(Le,"function")&&Le.call(Ee)})}(a.callback,ae,a.anim),ae.attr(Y),Te.splice(s--,1),a.repeat>1&&!a.next){for(p in Y)Y[R](p)&&(X[p]=a.totalOrigin[p]);a.el.attr(X),At(a.anim,a.el,a.anim.percents[0],null,a.totalOrigin,a.repeat-1)}a.next&&!a.stop&&At(a.anim,a.el,a.next,null,a.totalOrigin,a.repeat)}}}Te.length&&a1(Wt)},Xt=function(n){return n>255?255:n<0?0:n};function H1(n,s,a,l,p,x){var S=3*s,k=3*(l-s)-S,P=1-S-k,q=3*a,Y=3*(p-a)-q,ae=1-q-Y;function K(X){return((P*X+k)*X+S)*X}return function(X,te){var ce=function(ne,Q){var _e,ue,ve,he,Le,Ee;for(ve=ne,Ee=0;Ee<8;Ee++){if(he=K(ve)-ne,Ce(he)<Q)return ve;if(Ce(Le=(3*P*ve+2*k)*ve+S)<1e-6)break;ve-=he/Le}if(ue=1,(ve=ne)<(_e=0))return _e;if(ve>ue)return ue;for(;_e<ue;){if(he=K(ve),Ce(he-ne)<Q)return ve;ne>he?_e=ve:ue=ve,ve=(ue-_e)/2+_e}return ve}(X,te);return((ae*ce+Y)*ce+q)*ce}(n,1/(200*x))}function Je(n,s){var a=[],l={};if(this.ms=s,this.times=1,n){for(var p in n)n[R](p)&&(l[o(p)]=n[p],a.push(o(p)));a.sort(ge)}this.anim=l,this.top=a[a.length-1],this.percents=a}function At(n,s,a,l,p,x){a=o(a);var S,k,P,q,Y,ae,K=n.ms,X={},te={},ce={};if(l)for(Q=0,_e=Te.length;Q<_e;Q++){var ne=Te[Q];if(ne.el.id==s.id&&ne.anim==n){ne.percent!=a?(Te.splice(Q,1),P=1):k=ne,s.attr(ne.totalOrigin);break}}else l=+te;for(var Q=0,_e=n.percents.length;Q<_e;Q++){if(n.percents[Q]==a||n.percents[Q]>l*n.top){a=n.percents[Q],Y=n.percents[Q-1]||0,K=K/n.top*(a-Y),q=n.percents[Q+1],S=n.anim[a];break}l&&s.attr(n.anim[n.percents[Q]])}if(S){if(k)k.initstatus=l,k.start=new Date-k.ms*l;else{for(var ue in S)if(S[R](ue)&&(g[R](ue)||s.paper.customAttributes[R](ue)))switch(X[ue]=s.attr(ue),X[ue]==null&&(X[ue]=b[ue]),te[ue]=S[ue],g[ue]){case W:ce[ue]=(te[ue]-X[ue])/K;break;case"colour":X[ue]=f.getRGB(X[ue]);var ve=f.getRGB(te[ue]);ce[ue]={r:(ve.r-X[ue].r)/K,g:(ve.g-X[ue].g)/K,b:(ve.b-X[ue].b)/K};break;case"path":var he=St(X[ue],te[ue]),Le=he[1];for(X[ue]=he[0],ce[ue]=[],Q=0,_e=X[ue].length;Q<_e;Q++){ce[ue][Q]=[0];for(var Ee=1,Be=X[ue][Q].length;Ee<Be;Ee++)ce[ue][Q][Ee]=(Le[Q][Ee]-X[ue][Q][Ee])/K}break;case"transform":var gt=s._,Et=I1(gt[ue],te[ue]);if(Et)for(X[ue]=Et.from,te[ue]=Et.to,ce[ue]=[],ce[ue].real=!0,Q=0,_e=X[ue].length;Q<_e;Q++)for(ce[ue][Q]=[X[ue][Q][0]],Ee=1,Be=X[ue][Q].length;Ee<Be;Ee++)ce[ue][Q][Ee]=(te[ue][Q][Ee]-X[ue][Q][Ee])/K;else{var je=s.matrix||new st,Ye={_:{transform:gt.transform},getBBox:function(){return s.getBBox(1)}};X[ue]=[je.a,je.b,je.c,je.d,je.e,je.f],e1(Ye,te[ue]),te[ue]=Ye._.transform,ce[ue]=[(Ye.matrix.a-je.a)/K,(Ye.matrix.b-je.b)/K,(Ye.matrix.c-je.c)/K,(Ye.matrix.d-je.d)/K,(Ye.matrix.e-je.e)/K,(Ye.matrix.f-je.f)/K]}break;case"csv":var vt=G(S[ue])[me](O),yt=G(X[ue])[me](O);if(ue=="clip-rect")for(X[ue]=yt,ce[ue]=[],Q=yt.length;Q--;)ce[ue][Q]=(vt[Q]-X[ue][Q])/K;te[ue]=vt;break;default:for(vt=[][V](S[ue]),yt=[][V](X[ue]),ce[ue]=[],Q=s.paper.customAttributes[ue].length;Q--;)ce[ue][Q]=((vt[Q]||0)-(yt[Q]||0))/K}var Dt=S.easing,Qe=f.easing_formulas[Dt];if(!Qe)if((Qe=G(Dt).match(t))&&Qe.length==5){var at=Qe;Qe=function(qt){return H1(qt,+at[1],+at[2],+at[3],+at[4],K)}}else Qe=we;if(ne={anim:n,percent:a,timestamp:ae=S.start||n.start||+new Date,start:ae+(n.del||0),status:0,initstatus:l||0,stop:!1,ms:K,easing:Qe,from:X,diff:ce,to:te,el:s,callback:S.callback,prev:Y,next:q,repeat:x||n.times,origin:s.attr(),totalOrigin:p},Te.push(ne),l&&!k&&!P&&(ne.stop=!0,ne.start=new Date-K*l,Te.length==1))return Wt();P&&(ne.start=new Date-ne.ms*l),Te.length==1&&a1(Wt)}h("raphael.anim.start."+s.id,s,n)}}function l1(n){for(var s=0;s<Te.length;s++)Te[s].el.paper==n&&Te.splice(s--,1)}Ie.animateWith=function(n,s,a,l,p,x){if(this.removed)return x&&x.call(this),this;var S=a instanceof Je?a:f.animation(a,l,p,x);At(S,this,S.percents[0],null,this.attr());for(var k=0,P=Te.length;k<P;k++)if(Te[k].anim==s&&Te[k].el==n){Te[P-1].start=Te[k].start;break}return this},Ie.onAnimation=function(n){return n?h.on("raphael.anim.frame."+this.id,n):h.unbind("raphael.anim.frame."+this.id),this},Je.prototype.delay=function(n){var s=new Je(this.anim,this.ms);return s.times=this.times,s.del=+n||0,s},Je.prototype.repeat=function(n){var s=new Je(this.anim,this.ms);return s.del=this.del,s.times=oe.floor(ke(n,0))||1,s},f.animation=function(n,s,a,l){if(n instanceof Je)return n;!f.is(a,"function")&&a||(l=l||a||null,a=null),n=Object(n),s=+s||0;var p,x,S={};for(x in n)n[R](x)&&o(x)!=x&&o(x)+"%"!=x&&(p=!0,S[x]=n[x]);if(p)return a&&(S.easing=a),l&&(S.callback=l),new Je({100:S},s);if(l){var k=0;for(var P in n){var q=u(P);n[R](P)&&q>k&&(k=q)}!n[k+="%"].callback&&(n[k].callback=l)}return new Je(n,s)},Ie.animate=function(n,s,a,l){if(this.removed)return l&&l.call(this),this;var p=n instanceof Je?n:f.animation(n,s,a,l);return At(p,this,p.percents[0],null,this.attr()),this},Ie.setTime=function(n,s){return n&&s!=null&&this.status(n,j(s,n.ms)/n.ms),this},Ie.status=function(n,s){var a,l,p=[],x=0;if(s!=null)return At(n,this,-1,j(s,1)),this;for(a=Te.length;x<a;x++)if((l=Te[x]).el.id==this.id&&(!n||l.anim==n)){if(n)return l.status;p.push({anim:l.anim,status:l.status})}return n?0:p},Ie.pause=function(n){for(var s=0;s<Te.length;s++)Te[s].el.id!=this.id||n&&Te[s].anim!=n||h("raphael.anim.pause."+this.id,this,Te[s].anim)!==!1&&(Te[s].paused=!0);return this},Ie.resume=function(n){for(var s=0;s<Te.length;s++)if(Te[s].el.id==this.id&&(!n||Te[s].anim==n)){var a=Te[s];h("raphael.anim.resume."+this.id,this,a.anim)!==!1&&(delete a.paused,this.status(a.anim,a.status))}return this},Ie.stop=function(n){for(var s=0;s<Te.length;s++)Te[s].el.id!=this.id||n&&Te[s].anim!=n||h("raphael.anim.stop."+this.id,this,Te[s].anim)!==!1&&Te.splice(s--,1);return this},h.on("raphael.remove",l1),h.on("raphael.clear",l1),Ie.toString=function(){return"RaphaÃ«lâ€™s object"};var c1,u1,ot,h1,Pt=function(n){if(this.items=[],this.length=0,this.type="set",n)for(var s=0,a=n.length;s<a;s++)!n[s]||n[s].constructor!=Ie.constructor&&n[s].constructor!=Pt||(this[this.items.length]=this.items[this.items.length]=n[s],this.length++)},He=Pt.prototype;for(var Yt in He.push=function(){for(var n,s,a=0,l=arguments.length;a<l;a++)!(n=arguments[a])||n.constructor!=Ie.constructor&&n.constructor!=Pt||(this[s=this.items.length]=this.items[s]=n,this.length++);return this},He.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},He.forEach=function(n,s){for(var a=0,l=this.items.length;a<l;a++)if(n.call(s,this.items[a],a)===!1)return this;return this},Ie)Ie[R](Yt)&&(He[Yt]=function(n){return function(){var s=arguments;return this.forEach(function(a){a[n][$](a,s)})}}(Yt));return He.attr=function(n,s){if(n&&f.is(n,ie)&&f.is(n[0],"object"))for(var a=0,l=n.length;a<l;a++)this.items[a].attr(n[a]);else for(var p=0,x=this.items.length;p<x;p++)this.items[p].attr(n,s);return this},He.clear=function(){for(;this.length;)this.pop()},He.splice=function(n,s,a){n=n<0?ke(this.length+n,0):n,s=ke(0,j(this.length-n,s));var l,p=[],x=[],S=[];for(l=2;l<arguments.length;l++)S.push(arguments[l]);for(l=0;l<s;l++)x.push(this[n+l]);for(;l<this.length-n;l++)p.push(this[n+l]);var k=S.length;for(l=0;l<k+p.length;l++)this.items[n+l]=this[n+l]=l<k?S[l]:p[l-k];for(l=this.items.length=this.length-=s-k;this[l];)delete this[l++];return new Pt(x)},He.exclude=function(n){for(var s=0,a=this.length;s<a;s++)if(this[s]==n)return this.splice(s,1),!0},He.animate=function(n,s,a,l){(f.is(a,"function")||!a)&&(l=a||null);var p,x,S=this.items.length,k=S,P=this;if(!S)return this;l&&(x=function(){!--S&&l.call(P)}),a=f.is(a,"string")?a:x;var q=f.animation(n,s,a,x);for(p=this.items[--k].animate(q);k--;)this.items[k]&&!this.items[k].removed&&this.items[k].animateWith(p,q,q),this.items[k]&&!this.items[k].removed||S--;return this},He.insertAfter=function(n){for(var s=this.items.length;s--;)this.items[s].insertAfter(n);return this},He.getBBox=function(){for(var n=[],s=[],a=[],l=[],p=this.items.length;p--;)if(!this.items[p].removed){var x=this.items[p].getBBox();n.push(x.x),s.push(x.y),a.push(x.x+x.width),l.push(x.y+x.height)}return{x:n=j[$](0,n),y:s=j[$](0,s),x2:a=ke[$](0,a),y2:l=ke[$](0,l),width:a-n,height:l-s}},He.clone=function(n){n=this.paper.set();for(var s=0,a=this.items.length;s<a;s++)n.push(this.items[s].clone());return n},He.toString=function(){return"RaphaÃ«lâ€˜s set"},He.glow=function(n){var s=this.paper.set();return this.forEach(function(a,l){var p=a.glow(n);p!=null&&p.forEach(function(x,S){s.push(x)})}),s},He.isPointInside=function(n,s){var a=!1;return this.forEach(function(l){if(l.isPointInside(n,s))return a=!0,!1}),a},f.registerFont=function(n){if(!n.face)return n;this.fonts=this.fonts||{};var s={w:n.w,face:{},glyphs:{}},a=n.face["font-family"];for(var l in n.face)n.face[R](l)&&(s.face[l]=n.face[l]);if(this.fonts[a]?this.fonts[a].push(s):this.fonts[a]=[s],!n.svg){for(var p in s.face["units-per-em"]=u(n.face["units-per-em"],10),n.glyphs)if(n.glyphs[R](p)){var x=n.glyphs[p];if(s.glyphs[p]={w:x.w,k:{},d:x.d&&"M"+x.d.replace(/[mlcxtrv]/g,function(k){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[k]||"M"})+"z"},x.k)for(var S in x.k)x[R](S)&&(s.glyphs[p].k[S]=x.k[S])}}return n},L.getFont=function(n,s,a,l){if(l=l||"normal",a=a||"normal",s=+s||{normal:400,bold:700,lighter:300,bolder:800}[s]||400,f.fonts){var p,x=f.fonts[n];if(!x){var S=new RegExp("(^|\\s)"+n.replace(/[^\w\d\s+!~.:_-]/g,fe)+"(\\s|$)","i");for(var k in f.fonts)if(f.fonts[R](k)&&S.test(k)){x=f.fonts[k];break}}if(x)for(var P=0,q=x.length;P<q&&((p=x[P]).face["font-weight"]!=s||p.face["font-style"]!=a&&p.face["font-style"]||p.face["font-stretch"]!=l);P++);return p}},L.print=function(n,s,a,l,p,x,S,k){x=x||"middle",S=ke(j(S||0,1),-1),k=ke(j(k||1,3),1);var P,q=G(a)[me](fe),Y=0,ae=0,K=fe;if(f.is(l,"string")&&(l=this.getFont(l)),l){P=(p||16)/l.face["units-per-em"];for(var X=l.face.bbox[me](O),te=+X[0],ce=X[3]-X[1],ne=0,Q=+X[1]+(x=="baseline"?ce+ +l.face.descent:ce/2),_e=0,ue=q.length;_e<ue;_e++){if(q[_e]==`
`)Y=0,he=0,ae=0,ne+=ce*k;else{var ve=ae&&l.glyphs[q[_e-1]]||{},he=l.glyphs[q[_e]];Y+=ae?(ve.w||l.w)+(ve.k&&ve.k[q[_e]]||0)+l.w*S:0,ae=1}he&&he.d&&(K+=f.transformPath(he.d,["t",Y*P,ne*P,"s",P,P,te,Q,"t",(n-te)/P,(s-Q)/P]))}}return this.path(K).attr({fill:"#000",stroke:"none"})},L.add=function(n){if(f.is(n,"array"))for(var s,a=this.set(),l=0,p=n.length;l<p;l++)s=n[l]||{},F[R](s.type)&&a.push(this[s.type]().attr(s));return a},f.format=function(n,s){var a=f.is(s,ie)?[0][V](s):arguments;return n&&f.is(n,"string")&&a.length-1&&(n=n.replace(D,function(l,p){return a[++p]==null?fe:a[p]})),n||fe},f.fullfill=(c1=/\{([^\}]+)\}/g,u1=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(n,s){return String(n).replace(c1,function(a,l){return function(p,x,S){var k=S;return x.replace(u1,function(P,q,Y,ae,K){q=q||ae,k&&(q in k&&(k=k[q]),typeof k=="function"&&K&&(k=k()))}),k=(k==null||k==S?p:k)+""}(a,l,s)})}),f.ninja=function(){if(J.was)z.win.Raphael=J.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(n){}}return f},f.st=He,h.on("raphael.DOMload",function(){w=!0}),(ot=document).readyState==null&&ot.addEventListener&&(ot.addEventListener("DOMContentLoaded",h1=function(){ot.removeEventListener("DOMContentLoaded",h1,!1),ot.readyState="complete"},!1),ot.readyState="loading"),function n(){/in/.test(ot.readyState)?setTimeout(n,9):f.eve("raphael.DOMload")}(),f}.apply(E,T))===void 0||(C.exports=M)},function(C,E,m){var T,M;T=[m(0),m(3),m(4)],(M=function(h){return h}.apply(E,T))===void 0||(C.exports=M)},function(C,E,m){var T,M,h,f,w,L,O,F,D,R,z,J,re,$;f="hasOwnProperty",w=/[\.\/]/,L=/\s*,\s*/,O=function(V,le){return V-le},F={n:{}},D=function(){for(var V=0,le=this.length;V<le;V++)if(this[V]!==void 0)return this[V]},R=function(){for(var V=this.length;--V;)if(this[V]!==void 0)return this[V]},z=Object.prototype.toString,J=String,re=Array.isArray||function(V){return V instanceof Array||z.call(V)=="[object Array]"},($=function(V,le){var fe,ye=h,G=Array.prototype.slice.call(arguments,2),me=$.listeners(V),pe=0,I=[],be={},oe=[],ke=M;oe.firstDefined=D,oe.lastDefined=R,M=V,h=0;for(var j=0,Ce=me.length;j<Ce;j++)"zIndex"in me[j]&&(I.push(me[j].zIndex),me[j].zIndex<0&&(be[me[j].zIndex]=me[j]));for(I.sort(O);I[pe]<0;)if(fe=be[I[pe++]],oe.push(fe.apply(le,G)),h)return h=ye,oe;for(j=0;j<Ce;j++)if("zIndex"in(fe=me[j]))if(fe.zIndex==I[pe]){if(oe.push(fe.apply(le,G)),h)break;do if((fe=be[I[++pe]])&&oe.push(fe.apply(le,G)),h)break;while(fe)}else be[fe.zIndex]=fe;else if(oe.push(fe.apply(le,G)),h)break;return h=ye,M=ke,oe})._events=F,$.listeners=function(V){var le,fe,ye,G,me,pe,I,be,oe=re(V)?V:V.split(w),ke=F,j=[ke],Ce=[];for(G=0,me=oe.length;G<me;G++){for(be=[],pe=0,I=j.length;pe<I;pe++)for(fe=[(ke=j[pe].n)[oe[G]],ke["*"]],ye=2;ye--;)(le=fe[ye])&&(be.push(le),Ce=Ce.concat(le.f||[]));j=be}return Ce},$.separator=function(V){V?(V="["+(V=J(V).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",w=new RegExp(V)):w=/[\.\/]/},$.on=function(V,le){if(typeof le!="function")return function(){};for(var fe=re(V)?re(V[0])?V:[V]:J(V).split(L),ye=0,G=fe.length;ye<G;ye++)(function(me){for(var pe,I=re(me)?me:J(me).split(w),be=F,oe=0,ke=I.length;oe<ke;oe++)be=(be=be.n).hasOwnProperty(I[oe])&&be[I[oe]]||(be[I[oe]]={n:{}});for(be.f=be.f||[],oe=0,ke=be.f.length;oe<ke;oe++)if(be.f[oe]==le){pe=!0;break}!pe&&be.f.push(le)})(fe[ye]);return function(me){+me==+me&&(le.zIndex=+me)}},$.f=function(V){var le=[].slice.call(arguments,1);return function(){$.apply(null,[V,null].concat(le).concat([].slice.call(arguments,0)))}},$.stop=function(){h=1},$.nt=function(V){var le=re(M)?M.join("."):M;return V?new RegExp("(?:\\.|\\/|^)"+V+"(?:\\.|\\/|$)").test(le):le},$.nts=function(){return re(M)?M:M.split(w)},$.off=$.unbind=function(V,le){if(V){var fe=re(V)?re(V[0])?V:[V]:J(V).split(L);if(fe.length>1)for(var ye=0,G=fe.length;ye<G;ye++)$.off(fe[ye],le);else{fe=re(V)?V:J(V).split(w);var me,pe,I,be,oe,ke=[F];for(ye=0,G=fe.length;ye<G;ye++)for(be=0;be<ke.length;be+=I.length-2){if(I=[be,1],me=ke[be].n,fe[ye]!="*")me[fe[ye]]&&I.push(me[fe[ye]]);else for(pe in me)me[f](pe)&&I.push(me[pe]);ke.splice.apply(ke,I)}for(ye=0,G=ke.length;ye<G;ye++)for(me=ke[ye];me.n;){if(le){if(me.f){for(be=0,oe=me.f.length;be<oe;be++)if(me.f[be]==le){me.f.splice(be,1);break}!me.f.length&&delete me.f}for(pe in me.n)if(me.n[f](pe)&&me.n[pe].f){var j=me.n[pe].f;for(be=0,oe=j.length;be<oe;be++)if(j[be]==le){j.splice(be,1);break}!j.length&&delete me.n[pe].f}}else for(pe in delete me.f,me.n)me.n[f](pe)&&me.n[pe].f&&delete me.n[pe].f;me=me.n}}}else $._events=F={n:{}}},$.once=function(V,le){var fe=function(){return $.off(V,fe),le.apply(this,arguments)};return $.on(V,fe)},$.version="0.5.0",$.toString=function(){return"You are running Eve 0.5.0"},C.exports?C.exports=$:(T=function(){return $}.apply(E,[]))===void 0||(C.exports=T)},function(C,E,m){var T,M;T=[m(0)],(M=function(h){if(!h||h.svg){var f="hasOwnProperty",w=String,L=parseFloat,O=parseInt,F=Math,D=F.max,R=F.abs,z=F.pow,J=/[, ]+/,re=h.eve,$="",V=" ",le="http://www.w3.org/1999/xlink",fe={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},ye={};h.toString=function(){return`Your browser supports SVG.
You are running RaphaÃ«l `+this.version};var G=function(r,e){if(e)for(var t in typeof r=="string"&&(r=G(r)),e)e[f](t)&&(t.substring(0,6)=="xlink:"?r.setAttributeNS(le,t.substring(6),w(e[t])):r.setAttribute(t,w(e[t])));else(r=h._g.doc.createElementNS("http://www.w3.org/2000/svg",r)).style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},me=function(r,e){var t="linear",i=r.id+e,o=.5,u=.5,d=r.node,b=r.paper,g=d.style,A=h._g.doc.getElementById(i);if(!A){if(e=(e=w(e).replace(h._radial_gradient,function(ge,we,xe){if(t="radial",we&&xe){o=L(we);var Ae=2*((u=L(xe))>.5)-1;z(o-.5,2)+z(u-.5,2)>.25&&(u=F.sqrt(.25-z(o-.5,2))*Ae+.5)&&u!=.5&&(u=u.toFixed(5)-1e-5*Ae)}return $})).split(/\s*\-\s*/),t=="linear"){var B=e.shift();if(B=-L(B),isNaN(B))return null;var H=[0,0,F.cos(h.rad(B)),F.sin(h.rad(B))],U=1/(D(R(H[2]),R(H[3]))||1);H[2]*=U,H[3]*=U,H[2]<0&&(H[0]=-H[2],H[2]=0),H[3]<0&&(H[1]=-H[3],H[3]=0)}var ee=h._parseDots(e);if(!ee)return null;if(i=i.replace(/[\(\)\s,\xb0#]/g,"_"),r.gradient&&i!=r.gradient.id&&(b.defs.removeChild(r.gradient),delete r.gradient),!r.gradient){A=G(t+"Gradient",{id:i}),r.gradient=A,G(A,t=="radial"?{fx:o,fy:u}:{x1:H[0],y1:H[1],x2:H[2],y2:H[3],gradientTransform:r.matrix.invert()}),b.defs.appendChild(A);for(var se=0,de=ee.length;se<de;se++)A.appendChild(G("stop",{offset:ee[se].offset?ee[se].offset:se?"100%":"0%","stop-color":ee[se].color||"#fff","stop-opacity":isFinite(ee[se].opacity)?ee[se].opacity:1}))}}return G(d,{fill:pe(i),opacity:1,"fill-opacity":1}),g.fill=$,g.opacity=1,g.fillOpacity=1,1},pe=function(r){if((e=document.documentMode)&&(e===9||e===10))return"url('#"+r+"')";var e,t=document.location;return"url('"+(t.protocol+"//"+t.host+t.pathname+t.search)+"#"+r+"')"},I=function(r){var e=r.getBBox(1);G(r.pattern,{patternTransform:r.matrix.invert()+" translate("+e.x+","+e.y+")"})},be=function(r,e,t){if(r.type=="path"){for(var i,o,u,d,b,g=w(e).toLowerCase().split("-"),A=r.paper,B=t?"end":"start",H=r.node,U=r.attrs,ee=U["stroke-width"],se=g.length,de="classic",ge=3,we=3,xe=5;se--;)switch(g[se]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":de=g[se];break;case"wide":we=5;break;case"narrow":we=2;break;case"long":ge=5;break;case"short":ge=2}if(de=="open"?(ge+=2,we+=2,xe+=2,u=1,d=t?4:1,b={fill:"none",stroke:U.stroke}):(d=u=ge/2,b={fill:U.stroke,stroke:"none"}),r._.arrows?t?(r._.arrows.endPath&&ye[r._.arrows.endPath]--,r._.arrows.endMarker&&ye[r._.arrows.endMarker]--):(r._.arrows.startPath&&ye[r._.arrows.startPath]--,r._.arrows.startMarker&&ye[r._.arrows.startMarker]--):r._.arrows={},de!="none"){var Ae="raphael-marker-"+de,Ne="raphael-marker-"+B+de+ge+we+"-obj"+r.id;h._g.doc.getElementById(Ae)?ye[Ae]++:(A.defs.appendChild(G(G("path"),{"stroke-linecap":"round",d:fe[de],id:Ae})),ye[Ae]=1);var Me,Re=h._g.doc.getElementById(Ne);Re?(ye[Ne]++,Me=Re.getElementsByTagName("use")[0]):(Re=G(G("marker"),{id:Ne,markerHeight:we,markerWidth:ge,orient:"auto",refX:d,refY:we/2}),Me=G(G("use"),{"xlink:href":"#"+Ae,transform:(t?"rotate(180 "+ge/2+" "+we/2+") ":$)+"scale("+ge/xe+","+we/xe+")","stroke-width":(1/((ge/xe+we/xe)/2)).toFixed(4)}),Re.appendChild(Me),A.defs.appendChild(Re),ye[Ne]=1),G(Me,b);var De=u*(de!="diamond"&&de!="oval");t?(i=r._.arrows.startdx*ee||0,o=h.getTotalLength(U.path)-De*ee):(i=De*ee,o=h.getTotalLength(U.path)-(r._.arrows.enddx*ee||0)),(b={})["marker-"+B]="url(#"+Ne+")",(o||i)&&(b.d=h.getSubpath(U.path,i,o)),G(H,b),r._.arrows[B+"Path"]=Ae,r._.arrows[B+"Marker"]=Ne,r._.arrows[B+"dx"]=De,r._.arrows[B+"Type"]=de,r._.arrows[B+"String"]=e}else t?(i=r._.arrows.startdx*ee||0,o=h.getTotalLength(U.path)-i):(i=0,o=h.getTotalLength(U.path)-(r._.arrows.enddx*ee||0)),r._.arrows[B+"Path"]&&G(H,{d:h.getSubpath(U.path,i,o)}),delete r._.arrows[B+"Path"],delete r._.arrows[B+"Marker"],delete r._.arrows[B+"dx"],delete r._.arrows[B+"Type"],delete r._.arrows[B+"String"];for(b in ye)if(ye[f](b)&&!ye[b]){var qe=h._g.doc.getElementById(b);qe&&qe.parentNode.removeChild(qe)}}},oe={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},ke=function(r,e,t){if(e=oe[w(e).toLowerCase()]){for(var i=r.attrs["stroke-width"]||"1",o={round:i,square:i,butt:0}[r.attrs["stroke-linecap"]||t["stroke-linecap"]]||0,u=[],d=e.length;d--;)u[d]=e[d]*i+(d%2?1:-1)*o;G(r.node,{"stroke-dasharray":u.join(",")})}else G(r.node,{"stroke-dasharray":"none"})},j=function(r,e){var t=r.node,i=r.attrs,o=t.style.visibility;for(var u in t.style.visibility="hidden",e)if(e[f](u)){if(!h._availableAttrs[f](u))continue;var d=e[u];switch(i[u]=d,u){case"blur":r.blur(d);break;case"title":var b=t.getElementsByTagName("title");if(b.length&&(b=b[0]))b.firstChild.nodeValue=d;else{b=G("title");var g=h._g.doc.createTextNode(d);b.appendChild(g),t.appendChild(b)}break;case"href":case"target":var A=t.parentNode;if(A.tagName.toLowerCase()!="a"){var B=G("a");A.insertBefore(B,t),B.appendChild(t),A=B}u=="target"?A.setAttributeNS(le,"show",d=="blank"?"new":d):A.setAttributeNS(le,u,d);break;case"cursor":t.style.cursor=d;break;case"transform":r.transform(d);break;case"arrow-start":be(r,d);break;case"arrow-end":be(r,d,1);break;case"clip-rect":var H=w(d).split(J);if(H.length==4){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var U=G("clipPath"),ee=G("rect");U.id=h.createUUID(),G(ee,{x:H[0],y:H[1],width:H[2],height:H[3]}),U.appendChild(ee),r.paper.defs.appendChild(U),G(t,{"clip-path":"url(#"+U.id+")"}),r.clip=ee}if(!d){var se=t.getAttribute("clip-path");if(se){var de=h._g.doc.getElementById(se.replace(/(^url\(#|\)$)/g,$));de&&de.parentNode.removeChild(de),G(t,{"clip-path":$}),delete r.clip}}break;case"path":r.type=="path"&&(G(t,{d:d?i.path=h._pathToAbsolute(d):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&be(r,r._.arrows.startString),"endString"in r._.arrows&&be(r,r._.arrows.endString,1)));break;case"width":if(t.setAttribute(u,d),r._.dirty=1,!i.fx)break;u="x",d=i.x;case"x":i.fx&&(d=-i.x-(i.width||0));case"rx":if(u=="rx"&&r.type=="rect")break;case"cx":t.setAttribute(u,d),r.pattern&&I(r),r._.dirty=1;break;case"height":if(t.setAttribute(u,d),r._.dirty=1,!i.fy)break;u="y",d=i.y;case"y":i.fy&&(d=-i.y-(i.height||0));case"ry":if(u=="ry"&&r.type=="rect")break;case"cy":t.setAttribute(u,d),r.pattern&&I(r),r._.dirty=1;break;case"r":r.type=="rect"?G(t,{rx:d,ry:d}):t.setAttribute(u,d),r._.dirty=1;break;case"src":r.type=="image"&&t.setAttributeNS(le,"href",d);break;case"stroke-width":r._.sx==1&&r._.sy==1||(d/=D(R(r._.sx),R(r._.sy))||1),t.setAttribute(u,d),i["stroke-dasharray"]&&ke(r,i["stroke-dasharray"],e),r._.arrows&&("startString"in r._.arrows&&be(r,r._.arrows.startString),"endString"in r._.arrows&&be(r,r._.arrows.endString,1));break;case"stroke-dasharray":ke(r,d,e);break;case"fill":var ge=w(d).match(h._ISURL);if(ge){U=G("pattern");var we=G("image");U.id=h.createUUID(),G(U,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),G(we,{x:0,y:0,"xlink:href":ge[1]}),U.appendChild(we),function(Re){h._preload(ge[1],function(){var De=this.offsetWidth,qe=this.offsetHeight;G(Re,{width:De,height:qe}),G(we,{width:De,height:qe})})}(U),r.paper.defs.appendChild(U),G(t,{fill:"url(#"+U.id+")"}),r.pattern=U,r.pattern&&I(r);break}var xe=h.getRGB(d);if(xe.error){if((r.type=="circle"||r.type=="ellipse"||w(d).charAt()!="r")&&me(r,d)){if("opacity"in i||"fill-opacity"in i){var Ae=h._g.doc.getElementById(t.getAttribute("fill").replace(/^url\(#|\)$/g,$));if(Ae){var Ne=Ae.getElementsByTagName("stop");G(Ne[Ne.length-1],{"stop-opacity":("opacity"in i?i.opacity:1)*("fill-opacity"in i?i["fill-opacity"]:1)})}}i.gradient=d,i.fill="none";break}}else delete e.gradient,delete i.gradient,!h.is(i.opacity,"undefined")&&h.is(e.opacity,"undefined")&&G(t,{opacity:i.opacity}),!h.is(i["fill-opacity"],"undefined")&&h.is(e["fill-opacity"],"undefined")&&G(t,{"fill-opacity":i["fill-opacity"]});xe[f]("opacity")&&G(t,{"fill-opacity":xe.opacity>1?xe.opacity/100:xe.opacity});case"stroke":xe=h.getRGB(d),t.setAttribute(u,xe.hex),u=="stroke"&&xe[f]("opacity")&&G(t,{"stroke-opacity":xe.opacity>1?xe.opacity/100:xe.opacity}),u=="stroke"&&r._.arrows&&("startString"in r._.arrows&&be(r,r._.arrows.startString),"endString"in r._.arrows&&be(r,r._.arrows.endString,1));break;case"gradient":(r.type=="circle"||r.type=="ellipse"||w(d).charAt()!="r")&&me(r,d);break;case"opacity":i.gradient&&!i[f]("stroke-opacity")&&G(t,{"stroke-opacity":d>1?d/100:d});case"fill-opacity":if(i.gradient){(Ae=h._g.doc.getElementById(t.getAttribute("fill").replace(/^url\(#|\)$/g,$)))&&(Ne=Ae.getElementsByTagName("stop"),G(Ne[Ne.length-1],{"stop-opacity":d}));break}default:u=="font-size"&&(d=O(d,10)+"px");var Me=u.replace(/(\-.)/g,function(Re){return Re.substring(1).toUpperCase()});t.style[Me]=d,r._.dirty=1,t.setAttribute(u,d)}}Ce(r,e),t.style.visibility=o},Ce=function(r,e){if(r.type=="text"&&(e[f]("text")||e[f]("font")||e[f]("font-size")||e[f]("x")||e[f]("y"))){var t=r.attrs,i=r.node,o=i.firstChild?O(h._g.doc.defaultView.getComputedStyle(i.firstChild,$).getPropertyValue("font-size"),10):10;if(e[f]("text")){for(t.text=e.text;i.firstChild;)i.removeChild(i.firstChild);for(var u,d=w(e.text).split(`
`),b=[],g=0,A=d.length;g<A;g++)u=G("tspan"),g&&G(u,{dy:1.2*o,x:t.x}),u.appendChild(h._g.doc.createTextNode(d[g])),i.appendChild(u),b[g]=u}else for(g=0,A=(b=i.getElementsByTagName("tspan")).length;g<A;g++)g?G(b[g],{dy:1.2*o,x:t.x}):G(b[0],{dy:0});G(i,{x:t.x,y:t.y}),r._.dirty=1;var B=r._getBBox(),H=t.y-(B.y+B.height/2);H&&h.is(H,"finite")&&G(b[0],{dy:H})}},Se=function(r){return r.parentNode&&r.parentNode.tagName.toLowerCase()==="a"?r.parentNode:r},Z=function(r,e){this[0]=this.node=r,r.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),r.raphaelid=this.id,this.matrix=h.matrix(),this.realPath=null,this.paper=e,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},W=h.el;Z.prototype=W,W.constructor=Z,h._engine.path=function(r,e){var t=G("path");e.canvas&&e.canvas.appendChild(t);var i=new Z(t,e);return i.type="path",j(i,{fill:"none",stroke:"#000",path:r}),i},W.rotate=function(r,e,t){if(this.removed)return this;if((r=w(r).split(J)).length-1&&(e=L(r[1]),t=L(r[2])),r=L(r[0]),t==null&&(e=t),e==null||t==null){var i=this.getBBox(1);e=i.x+i.width/2,t=i.y+i.height/2}return this.transform(this._.transform.concat([["r",r,e,t]])),this},W.scale=function(r,e,t,i){if(this.removed)return this;if((r=w(r).split(J)).length-1&&(e=L(r[1]),t=L(r[2]),i=L(r[3])),r=L(r[0]),e==null&&(e=r),i==null&&(t=i),t==null||i==null)var o=this.getBBox(1);return t=t==null?o.x+o.width/2:t,i=i==null?o.y+o.height/2:i,this.transform(this._.transform.concat([["s",r,e,t,i]])),this},W.translate=function(r,e){return this.removed?this:((r=w(r).split(J)).length-1&&(e=L(r[1])),r=L(r[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",r,e]])),this)},W.transform=function(r){var e=this._;if(r==null)return e.transform;if(h._extractTransform(this,r),this.clip&&G(this.clip,{transform:this.matrix.invert()}),this.pattern&&I(this),this.node&&G(this.node,{transform:this.matrix}),e.sx!=1||e.sy!=1){var t=this.attrs[f]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":t})}return this},W.hide=function(){return this.removed||(this.node.style.display="none"),this},W.show=function(){return this.removed||(this.node.style.display=""),this},W.remove=function(){var r=Se(this.node);if(!this.removed&&r.parentNode){var e=this.paper;for(var t in e.__set__&&e.__set__.exclude(this),re.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),h._tear(this,e),r.parentNode.removeChild(r),this.removeData(),this)this[t]=typeof this[t]=="function"?h._removedFactory(t):null;this.removed=!0}},W._getBBox=function(){if(this.node.style.display=="none"){this.show();var r=!0}var e,t=!1;this.paper.canvas.parentElement?e=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(e=this.paper.canvas.parentNode.style),e&&e.display=="none"&&(t=!0,e.display="");var i={};try{i=this.node.getBBox()}catch(o){i={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{i=i||{},t&&(e.display="none")}return r&&this.hide(),i},W.attr=function(r,e){if(this.removed)return this;if(r==null){var t={};for(var i in this.attrs)this.attrs[f](i)&&(t[i]=this.attrs[i]);return t.gradient&&t.fill=="none"&&(t.fill=t.gradient)&&delete t.gradient,t.transform=this._.transform,t}if(e==null&&h.is(r,"string")){if(r=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(r=="transform")return this._.transform;for(var o=r.split(J),u={},d=0,b=o.length;d<b;d++)(r=o[d])in this.attrs?u[r]=this.attrs[r]:h.is(this.paper.customAttributes[r],"function")?u[r]=this.paper.customAttributes[r].def:u[r]=h._availableAttrs[r];return b-1?u:u[o[0]]}if(e==null&&h.is(r,"array")){for(u={},d=0,b=r.length;d<b;d++)u[r[d]]=this.attr(r[d]);return u}if(e!=null){var g={};g[r]=e}else r!=null&&h.is(r,"object")&&(g=r);for(var A in g)re("raphael.attr."+A+"."+this.id,this,g[A]);for(A in this.paper.customAttributes)if(this.paper.customAttributes[f](A)&&g[f](A)&&h.is(this.paper.customAttributes[A],"function")){var B=this.paper.customAttributes[A].apply(this,[].concat(g[A]));for(var H in this.attrs[A]=g[A],B)B[f](H)&&(g[H]=B[H])}return j(this,g),this},W.toFront=function(){if(this.removed)return this;var r=Se(this.node);r.parentNode.appendChild(r);var e=this.paper;return e.top!=this&&h._tofront(this,e),this},W.toBack=function(){if(this.removed)return this;var r=Se(this.node),e=r.parentNode;return e.insertBefore(r,e.firstChild),h._toback(this,this.paper),this.paper,this},W.insertAfter=function(r){if(this.removed||!r)return this;var e=Se(this.node),t=Se(r.node||r[r.length-1].node);return t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),h._insertafter(this,r,this.paper),this},W.insertBefore=function(r){if(this.removed||!r)return this;var e=Se(this.node),t=Se(r.node||r[0].node);return t.parentNode.insertBefore(e,t),h._insertbefore(this,r,this.paper),this},W.blur=function(r){var e=this;if(+r!=0){var t=G("filter"),i=G("feGaussianBlur");e.attrs.blur=r,t.id=h.createUUID(),G(i,{stdDeviation:+r||1.5}),t.appendChild(i),e.paper.defs.appendChild(t),e._blur=t,G(e.node,{filter:"url(#"+t.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter");return e},h._engine.circle=function(r,e,t,i){var o=G("circle");r.canvas&&r.canvas.appendChild(o);var u=new Z(o,r);return u.attrs={cx:e,cy:t,r:i,fill:"none",stroke:"#000"},u.type="circle",G(o,u.attrs),u},h._engine.rect=function(r,e,t,i,o,u){var d=G("rect");r.canvas&&r.canvas.appendChild(d);var b=new Z(d,r);return b.attrs={x:e,y:t,width:i,height:o,rx:u||0,ry:u||0,fill:"none",stroke:"#000"},b.type="rect",G(d,b.attrs),b},h._engine.ellipse=function(r,e,t,i,o){var u=G("ellipse");r.canvas&&r.canvas.appendChild(u);var d=new Z(u,r);return d.attrs={cx:e,cy:t,rx:i,ry:o,fill:"none",stroke:"#000"},d.type="ellipse",G(u,d.attrs),d},h._engine.image=function(r,e,t,i,o,u){var d=G("image");G(d,{x:t,y:i,width:o,height:u,preserveAspectRatio:"none"}),d.setAttributeNS(le,"href",e),r.canvas&&r.canvas.appendChild(d);var b=new Z(d,r);return b.attrs={x:t,y:i,width:o,height:u,src:e},b.type="image",b},h._engine.text=function(r,e,t,i){var o=G("text");r.canvas&&r.canvas.appendChild(o);var u=new Z(o,r);return u.attrs={x:e,y:t,"text-anchor":"middle",text:i,"font-family":h._availableAttrs["font-family"],"font-size":h._availableAttrs["font-size"],stroke:"none",fill:"#000"},u.type="text",j(u,u.attrs),u},h._engine.setSize=function(r,e){return this.width=r||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},h._engine.create=function(){var r=h._getContainer.apply(0,arguments),e=r&&r.container;if(!e)throw new Error("SVG container not found.");var t,i=r.x,o=r.y,u=r.width,d=r.height,b=G("svg"),g="overflow:hidden;";return i=i||0,o=o||0,G(b,{height:d=d||342,version:1.1,width:u=u||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),e==1?(b.style.cssText=g+"position:absolute;left:"+i+"px;top:"+o+"px",h._g.doc.body.appendChild(b),t=1):(b.style.cssText=g+"position:relative",e.firstChild?e.insertBefore(b,e.firstChild):e.appendChild(b)),(e=new h._Paper).width=u,e.height=d,e.canvas=b,e.clear(),e._left=e._top=0,t&&(e.renderfix=function(){}),e.renderfix(),e},h._engine.setViewBox=function(r,e,t,i,o){re("raphael.setViewBox",this,this._viewBox,[r,e,t,i,o]);var u,d,b=this.getSize(),g=D(t/b.width,i/b.height),A=this.top,B=o?"xMidYMid meet":"xMinYMin";for(r==null?(this._vbSize&&(g=1),delete this._vbSize,u="0 0 "+this.width+V+this.height):(this._vbSize=g,u=r+V+e+V+t+V+i),G(this.canvas,{viewBox:u,preserveAspectRatio:B});g&&A;)d="stroke-width"in A.attrs?A.attrs["stroke-width"]:1,A.attr({"stroke-width":d}),A._.dirty=1,A._.dirtyT=1,A=A.prev;return this._viewBox=[r,e,t,i,!!o],this},h.prototype.renderfix=function(){var r,e=this.canvas,t=e.style;try{r=e.getScreenCTM()||e.createSVGMatrix()}catch(u){r=e.createSVGMatrix()}var i=-r.e%1,o=-r.f%1;(i||o)&&(i&&(this._left=(this._left+i)%1,t.left=this._left+"px"),o&&(this._top=(this._top+o)%1,t.top=this._top+"px"))},h.prototype.clear=function(){h.eve("raphael.clear",this);for(var r=this.canvas;r.firstChild;)r.removeChild(r.firstChild);this.bottom=this.top=null,(this.desc=G("desc")).appendChild(h._g.doc.createTextNode("Created with RaphaÃ«l "+h.version)),r.appendChild(this.desc),r.appendChild(this.defs=G("defs"))},h.prototype.remove=function(){for(var r in re("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[r]=typeof this[r]=="function"?h._removedFactory(r):null};var ie=h.st;for(var Pe in W)W[f](Pe)&&!ie[f](Pe)&&(ie[Pe]=function(r){return function(){var e=arguments;return this.forEach(function(t){t[r].apply(t,e)})}}(Pe))}}.apply(E,T))===void 0||(C.exports=M)},function(C,E,m){var T,M;T=[m(0)],(M=function(h){if(!h||h.vml){var f="hasOwnProperty",w=String,L=parseFloat,O=Math,F=O.round,D=O.max,R=O.min,z=O.abs,J=/[, ]+/,re=h.eve,$=" ",V="",le={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},fe=/([clmz]),?([^clmz]*)/gi,ye=/ progid:\S+Blur\([^\)]+\)/g,G=/-?[^,\s-]+/g,me="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",pe=21600,I={path:1,rect:1,image:1},be={circle:1,ellipse:1},oe=function(e,t,i){var o=h.matrix();return o.rotate(-e,.5,.5),{dx:o.x(t,i),dy:o.y(t,i)}},ke=function(e,t,i,o,u,d){var b=e._,g=e.matrix,A=b.fillpos,B=e.node,H=B.style,U=1,ee="",se=pe/t,de=pe/i;if(H.visibility="hidden",t&&i){if(B.coordsize=z(se)+$+z(de),H.rotation=d*(t*i<0?-1:1),d){var ge=oe(d,o,u);o=ge.dx,u=ge.dy}if(t<0&&(ee+="x"),i<0&&(ee+=" y")&&(U=-1),H.flip=ee,B.coordorigin=o*-se+$+u*-de,A||b.fillsize){var we=B.getElementsByTagName("fill");we=we&&we[0],B.removeChild(we),A&&(ge=oe(d,g.x(A[0],A[1]),g.y(A[0],A[1])),we.position=ge.dx*U+$+ge.dy*U),b.fillsize&&(we.size=b.fillsize[0]*z(t)+$+b.fillsize[1]*z(i)),B.appendChild(we)}H.visibility="visible"}};h.toString=function(){return`Your browser doesnâ€™t support SVG. Falling down to VML.
You are running RaphaÃ«l `+this.version};var j,Ce=function(e,t,i){for(var o=w(t).toLowerCase().split("-"),u=i?"end":"start",d=o.length,b="classic",g="medium",A="medium";d--;)switch(o[d]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":b=o[d];break;case"wide":case"narrow":A=o[d];break;case"long":case"short":g=o[d]}var B=e.node.getElementsByTagName("stroke")[0];B[u+"arrow"]=b,B[u+"arrowlength"]=g,B[u+"arrowwidth"]=A},Se=function(e,t){e.attrs=e.attrs||{};var i=e.node,o=e.attrs,u=i.style,d=I[e.type]&&(t.x!=o.x||t.y!=o.y||t.width!=o.width||t.height!=o.height||t.cx!=o.cx||t.cy!=o.cy||t.rx!=o.rx||t.ry!=o.ry||t.r!=o.r),b=be[e.type]&&(o.cx!=t.cx||o.cy!=t.cy||o.r!=t.r||o.rx!=t.rx||o.ry!=t.ry),g=e;for(var A in t)t[f](A)&&(o[A]=t[A]);if(d&&(o.path=h._getPath[e.type](e),e._.dirty=1),t.href&&(i.href=t.href),t.title&&(i.title=t.title),t.target&&(i.target=t.target),t.cursor&&(u.cursor=t.cursor),"blur"in t&&e.blur(t.blur),(t.path&&e.type=="path"||d)&&(i.path=function(Oe){var Ke=/[ahqstv]/gi,ut=h._pathToAbsolute;if(w(Oe).match(Ke)&&(ut=h._path2curve),Ke=/[clmz]/g,ut==h._pathToAbsolute&&!w(Oe).match(Ke)){var Ge=w(Oe).replace(fe,function(Zt,ft,pt){var et=[],Tt=ft.toLowerCase()=="m",it=le[ft];return pt.replace(G,function(Mt){Tt&&et.length==2&&(it+=et+le[ft=="m"?"l":"L"],et=[]),et.push(F(Mt*pe))}),it+et});return Ge}var ht,We,_t=ut(Oe);Ge=[];for(var dt=0,kt=_t.length;dt<kt;dt++){ht=_t[dt],(We=_t[dt][0].toLowerCase())=="z"&&(We="x");for(var Ze=1,$e=ht.length;Ze<$e;Ze++)We+=F(ht[Ze]*pe)+(Ze!=$e-1?",":V);Ge.push(We)}return Ge.join($)}(~w(o.path).toLowerCase().indexOf("r")?h._pathToAbsolute(o.path):o.path),e._.dirty=1,e.type=="image"&&(e._.fillpos=[o.x,o.y],e._.fillsize=[o.width,o.height],ke(e,1,1,0,0,0))),"transform"in t&&e.transform(t.transform),b){var B=+o.cx,H=+o.cy,U=+o.rx||+o.r||0,ee=+o.ry||+o.r||0;i.path=h.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",F((B-U)*pe),F((H-ee)*pe),F((B+U)*pe),F((H+ee)*pe),F(B*pe)),e._.dirty=1}if("clip-rect"in t){var se=w(t["clip-rect"]).split(J);if(se.length==4){se[2]=+se[2]+ +se[0],se[3]=+se[3]+ +se[1];var de=i.clipRect||h._g.doc.createElement("div"),ge=de.style;ge.clip=h.format("rect({1}px {2}px {3}px {0}px)",se),i.clipRect||(ge.position="absolute",ge.top=0,ge.left=0,ge.width=e.paper.width+"px",ge.height=e.paper.height+"px",i.parentNode.insertBefore(de,i),de.appendChild(i),i.clipRect=de)}t["clip-rect"]||i.clipRect&&(i.clipRect.style.clip="auto")}if(e.textpath){var we=e.textpath.style;t.font&&(we.font=t.font),t["font-family"]&&(we.fontFamily='"'+t["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,V)+'"'),t["font-size"]&&(we.fontSize=t["font-size"]),t["font-weight"]&&(we.fontWeight=t["font-weight"]),t["font-style"]&&(we.fontStyle=t["font-style"])}if("arrow-start"in t&&Ce(g,t["arrow-start"]),"arrow-end"in t&&Ce(g,t["arrow-end"],1),t.opacity!=null||t.fill!=null||t.src!=null||t.stroke!=null||t["stroke-width"]!=null||t["stroke-opacity"]!=null||t["fill-opacity"]!=null||t["stroke-dasharray"]!=null||t["stroke-miterlimit"]!=null||t["stroke-linejoin"]!=null||t["stroke-linecap"]!=null){var xe=i.getElementsByTagName("fill");if(!(xe=xe&&xe[0])&&(xe=j("fill")),e.type=="image"&&t.src&&(xe.src=t.src),t.fill&&(xe.on=!0),xe.on!=null&&t.fill!="none"&&t.fill!==null||(xe.on=!1),xe.on&&t.fill){var Ae=w(t.fill).match(h._ISURL);if(Ae){xe.parentNode==i&&i.removeChild(xe),xe.rotate=!0,xe.src=Ae[1],xe.type="tile";var Ne=e.getBBox(1);xe.position=Ne.x+$+Ne.y,e._.fillpos=[Ne.x,Ne.y],h._preload(Ae[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else xe.color=h.getRGB(t.fill).hex,xe.src=V,xe.type="solid",h.getRGB(t.fill).error&&(g.type in{circle:1,ellipse:1}||w(t.fill).charAt()!="r")&&Z(g,t.fill,xe)&&(o.fill="none",o.gradient=t.fill,xe.rotate=!1)}if("fill-opacity"in t||"opacity"in t){var Me=((+o["fill-opacity"]+1||2)-1)*((+o.opacity+1||2)-1)*((+h.getRGB(t.fill).o+1||2)-1);Me=R(D(Me,0),1),xe.opacity=Me,xe.src&&(xe.color="none")}i.appendChild(xe);var Re=i.getElementsByTagName("stroke")&&i.getElementsByTagName("stroke")[0],De=!1;!Re&&(De=Re=j("stroke")),(t.stroke&&t.stroke!="none"||t["stroke-width"]||t["stroke-opacity"]!=null||t["stroke-dasharray"]||t["stroke-miterlimit"]||t["stroke-linejoin"]||t["stroke-linecap"])&&(Re.on=!0),(t.stroke=="none"||t.stroke===null||Re.on==null||t.stroke==0||t["stroke-width"]==0)&&(Re.on=!1);var qe=h.getRGB(t.stroke);Re.on&&t.stroke&&(Re.color=qe.hex),Me=((+o["stroke-opacity"]+1||2)-1)*((+o.opacity+1||2)-1)*((+qe.o+1||2)-1);var Fe=.75*(L(t["stroke-width"])||1);if(Me=R(D(Me,0),1),t["stroke-width"]==null&&(Fe=o["stroke-width"]),t["stroke-width"]&&(Re.weight=Fe),Fe&&Fe<1&&(Me*=Fe)&&(Re.weight=1),Re.opacity=Me,t["stroke-linejoin"]&&(Re.joinstyle=t["stroke-linejoin"]||"miter"),Re.miterlimit=t["stroke-miterlimit"]||8,t["stroke-linecap"]&&(Re.endcap=t["stroke-linecap"]=="butt"?"flat":t["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in t){var rt={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Re.dashstyle=rt[f](t["stroke-dasharray"])?rt[t["stroke-dasharray"]]:V}De&&i.appendChild(Re)}if(g.type=="text"){g.paper.canvas.style.display=V;var Ve=g.paper.span,Xe=o.font&&o.font.match(/\d+(?:\.\d*)?(?=px)/);u=Ve.style,o.font&&(u.font=o.font),o["font-family"]&&(u.fontFamily=o["font-family"]),o["font-weight"]&&(u.fontWeight=o["font-weight"]),o["font-style"]&&(u.fontStyle=o["font-style"]),Xe=L(o["font-size"]||Xe&&Xe[0])||10,u.fontSize=100*Xe+"px",g.textpath.string&&(Ve.innerHTML=w(g.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var lt=Ve.getBoundingClientRect();g.W=o.w=(lt.right-lt.left)/100,g.H=o.h=(lt.bottom-lt.top)/100,g.X=o.x,g.Y=o.y+g.H/2,("x"in t||"y"in t)&&(g.path.v=h.format("m{0},{1}l{2},{1}",F(o.x*pe),F(o.y*pe),F(o.x*pe)+1));for(var Ct=["x","y","text","font","font-family","font-weight","font-style","font-size"],ct=0,Nt=Ct.length;ct<Nt;ct++)if(Ct[ct]in t){g._.dirty=1;break}switch(o["text-anchor"]){case"start":g.textpath.style["v-text-align"]="left",g.bbx=g.W/2;break;case"end":g.textpath.style["v-text-align"]="right",g.bbx=-g.W/2;break;default:g.textpath.style["v-text-align"]="center",g.bbx=0}g.textpath.style["v-text-kern"]=!0}},Z=function(e,t,i){e.attrs=e.attrs||{},e.attrs;var o=Math.pow,u="linear",d=".5 .5";if(e.attrs.gradient=t,t=(t=w(t).replace(h._radial_gradient,function(U,ee,se){return u="radial",ee&&se&&(ee=L(ee),se=L(se),o(ee-.5,2)+o(se-.5,2)>.25&&(se=O.sqrt(.25-o(ee-.5,2))*(2*(se>.5)-1)+.5),d=ee+$+se),V})).split(/\s*\-\s*/),u=="linear"){var b=t.shift();if(b=-L(b),isNaN(b))return null}var g=h._parseDots(t);if(!g)return null;if(e=e.shape||e.node,g.length){e.removeChild(i),i.on=!0,i.method="none",i.color=g[0].color,i.color2=g[g.length-1].color;for(var A=[],B=0,H=g.length;B<H;B++)g[B].offset&&A.push(g[B].offset+$+g[B].color);i.colors=A.length?A.join():"0% "+i.color,u=="radial"?(i.type="gradientTitle",i.focus="100%",i.focussize="0 0",i.focusposition=d,i.angle=0):(i.type="gradient",i.angle=(270-b)%360),e.appendChild(i)}return 1},W=function(e,t){this[0]=this.node=e,e.raphael=!0,this.id=h._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=t,this.matrix=h.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null},ie=h.el;W.prototype=ie,ie.constructor=W,ie.transform=function(e){if(e==null)return this._.transform;var t,i=this.paper._viewBoxShift,o=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:V;i&&(t=e=w(e).replace(/\.{3}|\u2026/g,this._.transform||V)),h._extractTransform(this,o+e);var u,d=this.matrix.clone(),b=this.skew,g=this.node,A=~w(this.attrs.fill).indexOf("-"),B=!w(this.attrs.fill).indexOf("url(");if(d.translate(1,1),B||A||this.type=="image")if(b.matrix="1 0 0 1",b.offset="0 0",u=d.split(),A&&u.noRotation||!u.isSimple){g.style.filter=d.toFilter();var H=this.getBBox(),U=this.getBBox(1),ee=H.x-U.x,se=H.y-U.y;g.coordorigin=ee*-pe+$+se*-pe,ke(this,1,1,ee,se,0)}else g.style.filter=V,ke(this,u.scalex,u.scaley,u.dx,u.dy,u.rotate);else g.style.filter=V,b.matrix=w(d),b.offset=d.offset();return t!==null&&(this._.transform=t,h._extractTransform(this,t)),this},ie.rotate=function(e,t,i){if(this.removed)return this;if(e!=null){if((e=w(e).split(J)).length-1&&(t=L(e[1]),i=L(e[2])),e=L(e[0]),i==null&&(t=i),t==null||i==null){var o=this.getBBox(1);t=o.x+o.width/2,i=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,i]])),this}},ie.translate=function(e,t){return this.removed?this:((e=w(e).split(J)).length-1&&(t=L(e[1])),e=L(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]])),this)},ie.scale=function(e,t,i,o){if(this.removed)return this;if((e=w(e).split(J)).length-1&&(t=L(e[1]),i=L(e[2]),o=L(e[3]),isNaN(i)&&(i=null),isNaN(o)&&(o=null)),e=L(e[0]),t==null&&(t=e),o==null&&(i=o),i==null||o==null)var u=this.getBBox(1);return i=i==null?u.x+u.width/2:i,o=o==null?u.y+u.height/2:o,this.transform(this._.transform.concat([["s",e,t,i,o]])),this._.dirtyT=1,this},ie.hide=function(){return!this.removed&&(this.node.style.display="none"),this},ie.show=function(){return!this.removed&&(this.node.style.display=V),this},ie.auxGetBBox=h.el.getBBox,ie.getBBox=function(){var e=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var t={},i=1/this.paper._viewBoxShift.scale;return t.x=e.x-this.paper._viewBoxShift.dx,t.x*=i,t.y=e.y-this.paper._viewBoxShift.dy,t.y*=i,t.width=e.width*i,t.height=e.height*i,t.x2=t.x+t.width,t.y2=t.y+t.height,t}return e},ie._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},ie.remove=function(){if(!this.removed&&this.node.parentNode){for(var e in this.paper.__set__&&this.paper.__set__.exclude(this),h.eve.unbind("raphael.*.*."+this.id),h._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[e]=typeof this[e]=="function"?h._removedFactory(e):null;this.removed=!0}},ie.attr=function(e,t){if(this.removed)return this;if(e==null){var i={};for(var o in this.attrs)this.attrs[f](o)&&(i[o]=this.attrs[o]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(t==null&&h.is(e,"string")){if(e=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var u=e.split(J),d={},b=0,g=u.length;b<g;b++)(e=u[b])in this.attrs?d[e]=this.attrs[e]:h.is(this.paper.customAttributes[e],"function")?d[e]=this.paper.customAttributes[e].def:d[e]=h._availableAttrs[e];return g-1?d:d[u[0]]}if(this.attrs&&t==null&&h.is(e,"array")){for(d={},b=0,g=e.length;b<g;b++)d[e[b]]=this.attr(e[b]);return d}var A;for(var B in t!=null&&((A={})[e]=t),t==null&&h.is(e,"object")&&(A=e),A)re("raphael.attr."+B+"."+this.id,this,A[B]);if(A){for(B in this.paper.customAttributes)if(this.paper.customAttributes[f](B)&&A[f](B)&&h.is(this.paper.customAttributes[B],"function")){var H=this.paper.customAttributes[B].apply(this,[].concat(A[B]));for(var U in this.attrs[B]=A[B],H)H[f](U)&&(A[U]=H[U])}A.text&&this.type=="text"&&(this.textpath.string=A.text),Se(this,A)}return this},ie.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&h._tofront(this,this.paper),this},ie.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),h._toback(this,this.paper)),this)},ie.insertAfter=function(e){return this.removed?this:(e.constructor==h.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),h._insertafter(this,e,this.paper),this)},ie.insertBefore=function(e){return this.removed?this:(e.constructor==h.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),h._insertbefore(this,e,this.paper),this)},ie.blur=function(e){var t=this.node.runtimeStyle,i=t.filter;return i=i.replace(ye,V),+e!=0?(this.attrs.blur=e,t.filter=i+$+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+e||1.5)+")",t.margin=h.format("-{0}px 0 0 -{0}px",F(+e||1.5))):(t.filter=i,t.margin=0,delete this.attrs.blur),this},h._engine.path=function(e,t){var i=j("shape");i.style.cssText=me,i.coordsize=pe+$+pe,i.coordorigin=t.coordorigin;var o=new W(i,t),u={fill:"none",stroke:"#000"};e&&(u.path=e),o.type="path",o.path=[],o.Path=V,Se(o,u),t.canvas&&t.canvas.appendChild(i);var d=j("skew");return d.on=!0,i.appendChild(d),o.skew=d,o.transform(V),o},h._engine.rect=function(e,t,i,o,u,d){var b=h._rectPath(t,i,o,u,d),g=e.path(b),A=g.attrs;return g.X=A.x=t,g.Y=A.y=i,g.W=A.width=o,g.H=A.height=u,A.r=d,A.path=b,g.type="rect",g},h._engine.ellipse=function(e,t,i,o,u){var d=e.path();return d.attrs,d.X=t-o,d.Y=i-u,d.W=2*o,d.H=2*u,d.type="ellipse",Se(d,{cx:t,cy:i,rx:o,ry:u}),d},h._engine.circle=function(e,t,i,o){var u=e.path();return u.attrs,u.X=t-o,u.Y=i-o,u.W=u.H=2*o,u.type="circle",Se(u,{cx:t,cy:i,r:o}),u},h._engine.image=function(e,t,i,o,u,d){var b=h._rectPath(i,o,u,d),g=e.path(b).attr({stroke:"none"}),A=g.attrs,B=g.node,H=B.getElementsByTagName("fill")[0];return A.src=t,g.X=A.x=i,g.Y=A.y=o,g.W=A.width=u,g.H=A.height=d,A.path=b,g.type="image",H.parentNode==B&&B.removeChild(H),H.rotate=!0,H.src=t,H.type="tile",g._.fillpos=[i,o],g._.fillsize=[u,d],B.appendChild(H),ke(g,1,1,0,0,0),g},h._engine.text=function(e,t,i,o){var u=j("shape"),d=j("path"),b=j("textpath");t=t||0,i=i||0,o=o||"",d.v=h.format("m{0},{1}l{2},{1}",F(t*pe),F(i*pe),F(t*pe)+1),d.textpathok=!0,b.string=w(o),b.on=!0,u.style.cssText=me,u.coordsize=pe+$+pe,u.coordorigin="0 0";var g=new W(u,e),A={fill:"#000",stroke:"none",font:h._availableAttrs.font,text:o};g.shape=u,g.path=d,g.textpath=b,g.type="text",g.attrs.text=w(o),g.attrs.x=t,g.attrs.y=i,g.attrs.w=1,g.attrs.h=1,Se(g,A),u.appendChild(b),u.appendChild(d),e.canvas.appendChild(u);var B=j("skew");return B.on=!0,u.appendChild(B),g.skew=B,g.transform(V),g},h._engine.setSize=function(e,t){var i=this.canvas.style;return this.width=e,this.height=t,e==+e&&(e+="px"),t==+t&&(t+="px"),i.width=e,i.height=t,i.clip="rect(0 "+e+" "+t+" 0)",this._viewBox&&h._engine.setViewBox.apply(this,this._viewBox),this},h._engine.setViewBox=function(e,t,i,o,u){h.eve("raphael.setViewBox",this,this._viewBox,[e,t,i,o,u]);var d,b,g=this.getSize(),A=g.width,B=g.height;return u&&(i*(d=B/o)<A&&(e-=(A-i*d)/2/d),o*(b=A/i)<B&&(t-=(B-o*b)/2/b)),this._viewBox=[e,t,i,o,!!u],this._viewBoxShift={dx:-e,dy:-t,scale:g},this.forEach(function(H){H.transform("...")}),this},h._engine.initWin=function(e){var t=e.document;t.styleSheets.length<31?t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):t.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),j=function(i){return t.createElement("<rvml:"+i+' class="rvml">')}}catch(i){j=function(o){return t.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},h._engine.initWin(h._g.win),h._engine.create=function(){var e=h._getContainer.apply(0,arguments),t=e.container,i=e.height,o=e.width,u=e.x,d=e.y;if(!t)throw new Error("VML container not found.");var b=new h._Paper,g=b.canvas=h._g.doc.createElement("div"),A=g.style;return u=u||0,d=d||0,o=o||512,i=i||342,b.width=o,b.height=i,o==+o&&(o+="px"),i==+i&&(i+="px"),b.coordsize=216e5+$+216e5,b.coordorigin="0 0",b.span=h._g.doc.createElement("span"),b.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",g.appendChild(b.span),A.cssText=h.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",o,i),t==1?(h._g.doc.body.appendChild(g),A.left=u+"px",A.top=d+"px",A.position="absolute"):t.firstChild?t.insertBefore(g,t.firstChild):t.appendChild(g),b.renderfix=function(){},b},h.prototype.clear=function(){h.eve("raphael.clear",this),this.canvas.innerHTML=V,this.span=h._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},h.prototype.remove=function(){for(var e in h.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[e]=typeof this[e]=="function"?h._removedFactory(e):null;return!0};var Pe=h.st;for(var r in ie)ie[f](r)&&!Pe[f](r)&&(Pe[r]=function(e){return function(){var t=arguments;return this.forEach(function(i){i[e].apply(i,t)})}}(r))}}.apply(E,T))===void 0||(C.exports=M)}])})}),J1=G1(Y1),Lt=J1;var N={};N.Common={nodeIdIncrement:0,activeNode:0,roundFloat:function(v,c){for(var C=0,E=1;C<c;)E*=10,C++;return Math.round(v*E)/E},apply:function(v,c){if(v&&typeof c=="object")for(var C in c)v[C]=c[C];return v},addRaphEventHandler:function(v,c,C,E){try{v[c](function(m,T){return function(M,h){var f=T;f.e=M,m(f)}}(C,E))}catch(m){}},isInteger:function(v){return!isNaN(parseInt(v))},isXMLSerializerAvailable:function(){return typeof XMLSerializer=="function"},createSvgEl:function(v,c){if(v=document.createElementNS("http://www.w3.org/2000/svg",v),c)for(var C in c)c.hasOwnProperty(C)&&v.setAttribute(C,String(c[C]));return v},createGradientEl:function(v,c,C){if(c.type!="radialGradient")return!1;var E=N.Common.createSvgEl("radialGradient",{id:v,gradientUnits:"userSpaceOnUse",cx:C[0],cy:C[1],r:C[2],fx:C[0],fy:C[1]});if(c.stop)for(var m=c.stop,T=0;T<m.length;T++){var M=m[T];M["@attributes"]?E.appendChild(N.Common.createSvgEl("stop",M["@attributes"])):(M._attributes&&delete M._attributes,M._children&&delete M._children,M.__proto__&&delete M.__proto__,E.appendChild(N.Common.createSvgEl("stop",M)))}return E},setCssStyle:function(v,c){var C=document.styleSheets[0];C.addRule?C.addRule(v,c):C.insertRule&&C.insertRule(v+" { "+c+" }",C.cssRules.length)}};N.PhyloCanvas=function(){var v,c,C,E,m;return function(T,M,h,f,w){if(this.getNewickObject=function(){return C},this.clear=function(){},this.scale=function(O){E.svg.scale(O)},this.getSvg=function(){return E},this.getPhylogram=function(){return v},this.getSvgSource=function(){if(Lt.svg&&N.Common.isXMLSerializerAvailable()){var O=new XMLSerializer;return O.serializeToString(E.svg.canvas)}else return!1},typeof T=="object")if(T.xml){if(T.fileSource)var L=T.xml;else var L=bt.textToXML(T.xml);L=bt.xmlToJSON(L),m=new N.PhyloCanvas.PhyloxmlParse(L)}else if(T.phyloxml){if(T.fileSource)var L=T.phyloxml;else var L=bt.textToXML(T.phyloxml);L=bt.xmlToJSON(L),m=new N.PhyloCanvas.PhyloxmlParse(L)}else if(T.nexml){if(T.fileSource)var L=T.nexml;else var L=bt.textToXML(T.nexml);L=bt.xmlToJSON(L),m=new N.PhyloCanvas.NexmlParse(L,T)}else T.json?m=new N.PhyloCanvas.PhyloxmlParse(T.json):T.newick?m=new N.PhyloCanvas.NewickParse(T.newick):T.nexmlJson?m=new N.PhyloCanvas.NexmlJsonParse(T):alert("Please set the format of input data");else m=new N.PhyloCanvas.NewickParse(T);c=M,E=new N.PhyloCanvas.Render.SVG(c,h,f),w=="circular"?v=new N.PhyloCanvas.Render.CircularPhylogram(E,m):v=new N.PhyloCanvas.Render.Phylogram(E,m)}}();N.PhyloCanvas.prototype={};N.PhyloCanvas.Node=function(){return function(v,c){this.id=N.Common.nodeIdIncrement+=1,this.level=0,this.len=0,this.newickLen=0,this.name="",this.type="",this.chart={},this.img=[],v&&N.Common.apply(this,v),this._countAllChildren=!1,this._countImmediateChildren=!1,this._midBranchPosition=!1,this.children=new Array,c&&c.children.push(this)}}();N.PhyloCanvas.Node.prototype={getCountAllChildren:function(){if(this._countAllChildren!==!1)return this._countAllChildren;var v=0;for(var c in this.children)if(N.Common.isInteger(c)){var C=this.children[c];C.children&&C.children.length>0?v+=C.getCountAllChildren():v++}return this._countAllChildren=v,v},getCountImmediateChildren:function(){if(this._countImmediateChildren!==!1)return this._countImmediateChildren;var v=0;for(var c in this.children){var C=this.children[c];v+=C.length}return this._countImmediateChildren=v,v},getMidbranchPosition:function(v){if(this._midBranchPosition!==!1)return this._midBranchPosition;for(var c=[0,0],C=0;C<this.children.length;C++){var E=this.children[C];E.children&&E.children.length>0?C==0&&v?(c[0]=E.getMidbranchPosition(!0),c[1]+=E.getCountAllChildren()-1):C==0?(c[0]=E.getMidbranchPosition(),c[1]+=E.getCountAllChildren()):C==this.children.length-1?c[1]+=E.getMidbranchPosition():c[1]+=E.getCountAllChildren():C==0&&v?c[0]=0:C==0?(c[0]=1,c[1]+=1):(C==this.children.length-1,c[1]+=1)}return this._midBranchPosition=c[1]>=c[0]?(c[1]+c[0])/2:c[0],this._midBranchPosition}};N.PhyloCanvas.NewickParse=function(){var v,c,C,E=0,m=0,T,M,h=function(D){for(var R=new N.PhyloCanvas.Node;c!==")"&&c!==",";)c===":"?(O(),R.len=N.Common.roundFloat(w(),4),R.len==0&&(R.len=1e-4)):c==="'"||c==='"'?(R.type="label",R.name=L(c)):(R.type="label",R.name=w());return R.level=D.level+1,R},f=function(D){var R=new N.PhyloCanvas.Node;for(D&&(R.level=D.level+1);c!==")";)O(),c==="("?R.children.push(f(R)):R.children.push(h(R));return O(),c!==":"&&c!==")"&&c!==","&&c!==";"&&(R.type="label",R.name=w()),c===":"&&(O(),R.len=N.Common.roundFloat(w(),4),R.len==0&&(R.len=1e-4),R.type="stem"),R},w=function(){for(var D="";c!==":"&&c!==")"&&c!==","&&c!==";";)D+=c,O();return D},L=function(D){for(var R="";c!==D;)R+=c,O();return R},O=function(){return c=v.charAt(C),C+=1,c},F=function(D,R){if(D.children&&D.children.length)for(var z=0;z<D.children.length;z++){var J=D.children[z];J.len===0&&(J.len=1),J.newickLen=N.Common.roundFloat(J.len+D.newickLen,4),J.level>E&&(E=J.level),J.newickLen>m&&(m=J.newickLen),J.children.length>0&&F(J,D)}return D};return function(D){this.getRoot=function(){return T},this.getLevels=function(){return E},this.getNewickLen=function(){return m},this.getValidate=function(){return M},E=0,m=0,v=D,C=0,O(),T=f(),T=F(T)}}();N.PhyloCanvas.NewickParse.prototype={};N.PhyloCanvas.PhyloxmlParse=function(){var v=0,c=0,C,E,m=function(h,f){var w=new N.PhyloCanvas.Node;if(f&&(w.level=f.level+1),h.clade&&h.clade.length)for(var L=0;L<h.clade.length;L++){var O=h.clade[L];w.children.push(m(O,w))}if(h.branch_length&&(typeof h.branch_length=="object"&&(h.branch_length=h.branch_length[0].Text),w.len=N.Common.roundFloat(h.branch_length,4),w.len==0&&(w.len=1e-4)),h.color?(w.red=h.color[0].red[0].Text,w.green=h.color[0].green[0].Text,w.blue=h.color[0].blue[0].Text):(w.red=0,w.green=0,w.blue=0),h.property&&h.property[0].applies_to=="node"&&h.property[0].ref=="style:font_color"&&(w.font_color_hex=h.property[0].Text),h.name?(w.type="label",w.name=h.name[0].Text,h.name[0]&&h.name[0].style&&(w.style=h.name[0].style),h.name[0]&&h.name[0].bgStyle&&(w.bgStyle=h.name[0].bgStyle)):h.confidence&&(w.name=h.confidence[0].Text),h.sequence&&h.sequence[0]&&h.sequence[0].name&&h.sequence[0].name[0]&&h.sequence[0].name[0].Text&&(w.sequenceName=h.sequence[0].name[0].Text),h.taxonomy&&h.taxonomy[0]&&(h.taxonomy[0].scientific_name&&h.taxonomy[0].scientific_name[0]&&h.taxonomy[0].scientific_name[0].Text&&(w.taxonomyScientificName=h.taxonomy[0].scientific_name[0].Text),h.taxonomy[0].common_name&&h.taxonomy[0].common_name[0]&&h.taxonomy[0].common_name[0].Text&&(w.taxonomyCommonName=h.taxonomy[0].common_name[0].Text)),h.sequence&&h.sequence[0]&&h.sequence[0].accession&&h.sequence[0].accession[0]&&h.sequence[0].accession[0].Text&&(w.sequenceAccession=h.sequence[0].accession[0].Text),h.point&&(w.LatLong=[h.point[0].lat[0].Text,h.point[0].long[0].Text]),w.name||(w.sequenceName?w.name=w.sequenceName:w.taxonomyScientificName?w.name=w.taxonomyScientificName:w.taxonomyCommonName?w.name=w.taxonomyCommonName:w.sequenceAccession&&(w.name=w.sequenceAccession),w.name&&(w.type="label")),h.annotation&&(h.annotation[0]&&h.annotation[0].desc&&h.annotation[0].desc[0]&&h.annotation[0].desc[0].Text&&(w.description=h.annotation[0].desc[0].Text),h.annotation[0]&&h.annotation[0].uri&&h.annotation[0].uri[0]&&h.annotation[0].uri[0].Text&&(w.uri=h.annotation[0].uri[0].Text),h.annotation[0]&&h.annotation[0].img))for(var L in h.annotation[0].img)N.Common.isInteger(L)&&(w.img[L]=h.annotation[0].img[L].Text);if(h.chart&&h.chart[0])for(var L in h.chart[0])L!="Text"&&L!="_children"&&(w.chart[L]=h.chart[0][L][0].Text);return w&&w.level>1&&(w.len||(E="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),w},T=function(h,f){if(h.children&&h.children.length)for(var w=0;w<h.children.length;w++){var L=h.children[w];L.newickLen=Math.round((L.len+h.newickLen)*1e4)/1e4,L.level>v&&(v=L.level),L.newickLen>c&&(c=L.newickLen),L.children.length>0&&T(L,h)}return h},M=function(h,f){for(var w in h)w!="_children"&&w!="Text"&&(w=="rectangular"||w=="circular"?M(h[w][0],w):(N.PhyloCanvas.Render.Parameters[w]||(N.PhyloCanvas.Render.Parameters[w]={}),N.PhyloCanvas.Render.Parameters.set(w,h[w][0].Text,f)))};return function(h){if(this.getRoot=function(){return C},this.getLevels=function(){return v},this.getNewickLen=function(){return c},this.getValidate=function(){return E},h.phylogeny&&h.phylogeny[0]&&h.phylogeny[0].clade&&(C=m(h.phylogeny[0].clade[0])),h.phylogeny&&h.phylogeny[0]&&h.phylogeny[0].render&&h.phylogeny[0].render[0]){var f=h.phylogeny[0].render[0];if(f&&f.styles){var w=f.styles[0];for(var L in w)if(L!="_children"&&L!="Text")if(w[L][0].type&&w[L][0].type=="radialGradient"&&Lt.svg)w[L][0].name=L,N.PhyloCanvas.Render.Style[L]=w[L][0],N.PhyloCanvas.Render.Style.jsphylosvgGradientList||(N.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),N.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(L);else{N.PhyloCanvas.Render.Style[L]||(N.PhyloCanvas.Render.Style[L]={});for(var O in w[L][0])O!="_attributes"&&O!="_children"&&O!="type"&&(N.PhyloCanvas.Render.Style[L][O.replace("_","-")]=w[L][0][O])}}if(f&&f.parameters&&M(f.parameters[0]),f&&f.charts){var F=f.charts[0];for(var L in F)if(L!="_children"&&L!="Text")for(var O in F[L])F[L][O].type=="binary"?(F[L][O].chart=L,N.PhyloCanvas.Render.Parameters.binaryCharts.push(F[L][O])):F[L][O].type=="integratedBinary"?(F[L][O].chart=L,N.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(F[L][O])):F[L][O].type=="bar"&&(F[L][O].chart=L,N.PhyloCanvas.Render.Parameters.barCharts.length==1&&N.PhyloCanvas.Render.Parameters.barCharts.shift(),N.PhyloCanvas.Render.Parameters.barCharts.push(F[L][O]))}}C=T(C)}}();N.PhyloCanvas.PhyloxmlParse.prototype={};N.PhyloCanvas.NexmlParse=function(){var v=0,c=0,C,E,m,T,M=function(w,L,O){var F=new N.PhyloCanvas.Node;O&&(F.level=O.level+1);for(var D=0;D<m.length;D++)if(m[D].source==w.id)for(var R=0;R<T.length;R++)m[D].target==T[R].id&&F.children.push(M(T[R],m[D].length,F));if(F&&F.level>0&&!F.len&&(F.len=1),L&&(F.len=N.Common.roundFloat(L,4),F.len==0&&(F.len=1e-4)),w.label&&(F.type="label",F.name=w.label,w.style&&(F.style=w.style)),w.color){let z=w.color.replace(/[a-z%\s\(\)]/g,"").split(",");F.red=z[0],F.green=z[1],F.blue=z[2]}else{let z=N.PhyloCanvas.Render.Style.line.stroke.replace(/[a-z%\s\(\)]/g,"").split(",");F.red=z[0],F.green=z[1],F.blue=z[2]}return F},h=function(w,L){if(w.children&&w.children.length)for(var O=0;O<w.children.length;O++){var F=w.children[O];F.newickLen=Math.round((F.len+w.newickLen)*1e4)/1e4,F.level>v&&(v=F.level),F.newickLen>c&&(c=F.newickLen),F.children.length>0&&h(F,w)}return w},f=function(w,L){for(var O in w)O!="_children"&&O!="Text"&&(O=="rectangular"||O=="circular"?f(w[O][0],O):(N.PhyloCanvas.Render.Parameters[O]||(N.PhyloCanvas.Render.Parameters[O]={}),N.PhyloCanvas.Render.Parameters.set(O,w[O][0].Text,L)))};return function(w,L){this.getRoot=function(){return C},this.getLevels=function(){return v},this.getNewickLen=function(){return c},this.getValidate=function(){return E},L.tree&&w.trees[0]&&w.trees[0].tree[L.tree-1]?(m=w.trees[0].tree[L.tree-1].edge,T=w.trees[0].tree[L.tree-1].node):(m=w.trees[0].tree[0].edge,T=w.trees[0].tree[0].node);for(var O=0;O<T.length;O++){var F=0;if(T[O].root&&T[O].root=="true"){C=T[O];break}for(var D=0;D<m.length;D++)m[D].target==T[O].id&&F++;if(F==0){C=T[O];break}}C?(C=M(C),C=h(C)):E="Error. Currently, only rooted NeXML trees are supported."}}();N.PhyloCanvas.NexmlParse.prototype={};N.PhyloCanvas.NexmlJsonParse=function(){var v=0,c=0,C,E,m=[],T=[],M=function(w,L,O){var F=new N.PhyloCanvas.Node;O&&(F.level=O.level+1);for(var D=0;D<m.length;D++)if(m[D].source==w.id)for(var R=0;R<T.length;R++)m[D].target==T[R].id&&F.children.push(M(T[R],m[D].length,F));return L&&(F.len=N.Common.roundFloat(L,4),F.len==0&&(F.len=1e-4)),w.label&&(F.type="label",F.name=w.label,w.accession&&(F.accession=w.accession),w.style&&(F.style=w.style),w.bgStyle&&(F.bgStyle=w.bgStyle)),w.chart&&(F.chart=w.chart),F&&F.level>1&&(F.len||(E="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),F},h=function(w,L){if(w.children&&w.children.length)for(var O=0;O<w.children.length;O++){var F=w.children[O];F.newickLen=Math.round((F.len+w.newickLen)*1e4)/1e4,F.level>v&&(v=F.level),F.newickLen>c&&(c=F.newickLen),F.children.length>0&&h(F,w)}return w},f=function(w,L){for(var O in w)O!="_children"&&O!="Text"&&(O=="rectangular"||O=="circular"?f(w[O],O):(N.PhyloCanvas.Render.Parameters[O]||(N.PhyloCanvas.Render.Parameters[O]={}),N.PhyloCanvas.Render.Parameters.set(O,w[O],L)))};return function(w){this.getRoot=function(){return C},this.getLevels=function(){return v},this.getNewickLen=function(){return c},this.getValidate=function(){return E};var L=w.nexmlJson.nexml,O=L.render;if(O&&O.styles){var F=O.styles;for(var D in F)if(D!="_children"&&D!="Text")if(F[D]["@attributes"].type&&F[D]["@attributes"].type=="radialGradient"&&Lt.svg)F[D].name=D,F[D].type=F[D]["@attributes"].type,N.PhyloCanvas.Render.Style[D]=F[D],N.PhyloCanvas.Render.Style.jsphylosvgGradientList||(N.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),N.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(D);else{N.PhyloCanvas.Render.Style[D]||(N.PhyloCanvas.Render.Style[D]={});for(var R in F[D]["@attributes"])R!="_attributes"&&R!="_children"&&R!="type"&&(N.PhyloCanvas.Render.Style[D][R.replace("_","-")]=F[D]["@attributes"][R])}}if(O&&O.parameters&&f(O.parameters),O&&O.charts){var z=O.charts;for(var D in z)z[D]["@attributes"].chart=D,z[D]["@attributes"].type=="binary"?N.PhyloCanvas.Render.Parameters.binaryCharts.push(z[D]["@attributes"]):z[D]["@attributes"].type=="integratedBinary"?N.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(z[D]["@attributes"]):z[D]["@attributes"].type=="bar"&&N.PhyloCanvas.Render.Parameters.barCharts.push(z[D]["@attributes"])}if(w.tree&&L.trees[0]&&L.trees[0].tree[w.tree-1])m=L.trees[0].tree[w.tree-1].edge,T=L.trees[0].tree[w.tree-1].node;else{for(var D=0;D<L.trees.tree.edge.length;D++)m.push(L.trees.tree.edge[D]["@attributes"]);for(var D=0;D<L.trees.tree.node.length;D++){var J=L.trees.tree.node[D]["@attributes"];J.label&&(J.chart=L.trees.tree.node[D].chart),T.push(J)}}for(var D=0;D<T.length;D++)T[D].root&&T[D].root=="true"&&(C=T[D]);C?(C=M(C),C=h(C)):E="Error. Currently, only rooted NeXML trees are supported."}}();N.PhyloCanvas.NexmlParse.prototype={};N.PhyloCanvas.Render={};N.PhyloCanvas.Render.Style={line:{stroke:"rgb(0,0,0)","stroke-width":1},text:{"font-family":"Verdana","font-size":12,"text-anchor":"start"},path:{stroke:"rgb(0,0,0)","stroke-width":1},connectedDash:{stroke:"rgb(200,200,200)","stroke-dasharray":". "},textSecantBg:{fill:"#EEE",stroke:"#DDD"},highlightedEdgeCircle:{fill:"black",stroke:"black"},barChart:{fill:"#003300",stroke:"#DDD"},getStyle:function(v,c){return this[v]?this[v]:this[c]}};N.PhyloCanvas.Render.Parameters={jsOverride:0,Rectangular:{bufferX:200,paddingX:10,paddingY:20,bufferInnerLabels:10,bufferOuterLabels:5,minHeightBetweenLeaves:10,alignPadding:0,alignRight:!1,showScaleBar:!1},Circular:{bufferRadius:.33,bufferAngle:20,initStartAngle:160,innerCircleRadius:0,minHeightBetweenLeaves:5,bufferInnerLabels:2,bufferOuterLabels:5},binaryCharts:[],integratedBinaryCharts:[],barCharts:[],binaryChartBufferInner:5,binaryChartBufferSiblings:.01,binaryChartThickness:15,binaryChartDisjointed:!1,barChartBufferInner:3,barChartHeight:50,barChartWidth:.5,set:function(v,c,C){this.jsOverride||(C?C=="circular"?this.Circular[v]=parseFloat(c):C=="rectangular"&&(this.Rectangular[v]=parseFloat(c)):this[v]=parseFloat(c))}};N.PhyloCanvas.Render.Line=function(){return function(v,c,C,E,m,T,M,h){this.type="line",this.attr=N.PhyloCanvas.Render.Style.line,this.attr.stroke=["rgb(",m,",",T,",",M,")"].join(""),this.x1=v,this.x2=c,this.y1=C,this.y2=E,h&&(N.Common.apply(this,h),h.attr&&(this.attr=h.attr))}}();N.PhyloCanvas.Render.Text=function(){return function(v,c,C,E){this.type="text",this.attr=N.PhyloCanvas.Render.Style.text,this.x=v,this.y=c,this.text=C,E&&(N.Common.apply(this,E),E.attr&&(this.attr=E.attr))}}();N.PhyloCanvas.Render.Path=function(){var v=N.PhyloCanvas.Render.Style.path;return function(c,C){this.type="path",this.attr=N.PhyloCanvas.Render.Style.path,this.path=c,C&&(N.Common.apply(this,C),C.attr&&(this.attr=C.attr))}}();N.PhyloCanvas.Render.Circle=function(){return function(v,c,C,E){this.type="circle",this.x=v,this.y=c,this.radius=C,E&&(N.Common.apply(this,E),E.attr&&(this.attr=E.attr))}}();N.PhyloCanvas.Render.SVG=function(){var v,c;return function(C,E,m){v=C,this.canvasSize=[E,m],this.svg=Lt(C,this.canvasSize[0],this.canvasSize[1])}}();N.PhyloCanvas.Render.SVG.prototype={render:function(){for(var v=this.phylogramObject.getDrawInstructs(),c=0;c<v.length;c++)if(v[c].type=="line")var C=this.svg.path(["M",v[c].x1,v[c].y1,"L",v[c].x2,v[c].y2]).attr(N.PhyloCanvas.Render.Style.line);else if(v[c].type=="path")var E=this.svg.path(v[c].path).attr(v[c].attr);else if(v[c].type=="circle")var E=this.svg.circle(v[c].x,v[c].y,v[c].radius).attr({stroke:"black",fill:"black"});else{var m=this.svg.text(v[c].x,v[c].y,v[c].text).attr(N.PhyloCanvas.Render.Style.text);v[c].attr&&m.attr(v[c].attr),v[c].rotate&&m.rotate(v[c].rotate);var T=m.getBBox(),M=Math.sqrt(T.height*T.height+T.width*T.width)}},draw:function(v){var c,C;if(v.type=="line")c=this.svg.path(["M",v.x1,v.y1,"L",v.x2,v.y2]).attr(N.PhyloCanvas.Render.Style.line);else if(v.type=="path")c=this.svg.path(v.path).attr(v.attr);else if(v.type=="circle")c=this.svg.circle(v.x,v.y,v.radius).attr({stroke:"black",fill:"black"});else if(v.type=="text"){c=this.svg.text(v.x,v.y,v.text).attr(N.PhyloCanvas.Render.Style.text),v.attr&&c.attr(v.attr),v.rotate&&c.rotate(v.rotate);var E=c.getBBox();C=Math.sqrt(E.height*E.height+E.width*E.width)}return[c,C]}};N.PhyloCanvas.Render.Phylogram=function(){var v,c=N.PhyloCanvas.Render.Parameters.Rectangular,C,E,m,T,M,h,f=!0,w=0,L=0,O,F,D,R,z,J,re,$,V,le,fe,ye,G=[],me=function(j){return j+Math.round(j/4)},pe=function(j,Ce,Se,Z){return["M",j,Ce,"L",Se,Ce,"L",Se,Z,"L",j,Z,"Z"]},I=function(j,Ce){if(j.len&&f==!1&&j.children.length==0&&(w=N.Common.roundFloat(w+T,4)),j.children.length>0){var Se=[],Z,W,ie,Pe,r,e,t;if(j.len&&(Z=Ce,W=Ce=N.Common.roundFloat(Ce+m*j.len,4),ie=w+j.getMidbranchPosition(f)*T,Pe=ie,r=j.red,e=j.green,t=j.blue,v.draw(new N.PhyloCanvas.Render.Line(Z,W,ie,Pe,r,e,t))),j.name){var i={};if(i=N.PhyloCanvas.Render.Style.getStyle("bootstrap","text"),j.font_color_hex?i.fill=j.font_color_hex:i.fill="#000000",j.uri&&(i.href=j.uri),j.description&&(i.title=j.description),j.level==0)var o=w+j.getMidbranchPosition(f)*T;else var o=Pe;v.draw(new N.PhyloCanvas.Render.Text((W||Ce)+5,o,j.name,{attr:i}))}if(j.children&&j.children.length)for(var u=0;u<j.children.length;u++){var d=j.children[u];Se.push(I(d,Ce))}for(var b=[],u=0;u<Se.length;u++)Se[u][0]&&b.push(Se[u][0]),Se[u][1]&&b.push(Se[u][1]);for(var g=Math.min.apply(null,b),A=Math.max.apply(null,b),B=(g+A)/2,H="",U="",ee="",se=0,u=0;u<j.children.length;++u){var de=j.children[u];if(u==0)H=de.red,U=de.green,ee=de.blue;else if(H==de.red&&U==de.green&&ee==de.blue)se=1;else{se=0;break}}se==0?N.PhyloCanvas.Render.Style.line.stroke="black":(r=j.children[0].red,e=j.children[0].green,t=j.children[0].blue,N.PhyloCanvas.Render.Style.line.stroke=["rgb(",r,",",e,",",t,")"].join("")),j.children.length==2?(r=j.children[0].red,e=j.children[0].green,t=j.children[0].blue,N.PhyloCanvas.Render.Style.line.stroke=["rgb(",r,",",e,",",t,")"].join(""),v.draw(new N.PhyloCanvas.Render.Path(["M",Ce+1e-4,g,"L",Ce,g,"L",Ce,B],{attr:N.PhyloCanvas.Render.Style.line})),r=j.children[1].red,e=j.children[1].green,t=j.children[1].blue,N.PhyloCanvas.Render.Style.line.stroke=["rgb(",r,",",e,",",t,")"].join(""),v.draw(new N.PhyloCanvas.Render.Path(["M",Ce,B,"L",Ce,A,"L",Ce+1e-4,A],{attr:N.PhyloCanvas.Render.Style.line}))):v.draw(new N.PhyloCanvas.Render.Path(["M",Ce+1e-4,g,"L",Ce,g,"L",Ce,A,"L",Ce+1e-4,A],{attr:N.PhyloCanvas.Render.Style.line}))}else{if(Z=Ce,W=N.Common.roundFloat(Ce+m*j.len,2),ie=w,Pe=w,r=j.red,e=j.green,t=j.blue,j.y=w,G.push(j),v.draw(new N.PhyloCanvas.Render.Line(Z,W,ie,Pe,r,e,t)),c.alignRight&&v.draw(new N.PhyloCanvas.Render.Path(["M",W,ie,"L",c.alignPadding+M,Pe],{attr:N.PhyloCanvas.Render.Style.connectedDash})),j.name){var i={};j.style&&(i=N.PhyloCanvas.Render.Style.getStyle(j.style,"text")),j.font_color_hex?i.fill=j.font_color_hex:i.fill="#000000",i["text-anchor"]="start",j.uri&&(i.href=j.uri),j.description&&(i.title=j.description);var ge=v.draw(new N.PhyloCanvas.Render.Text(c.alignRight?M+c.bufferInnerLabels+c.alignPadding:W+c.bufferInnerLabels,Pe,j.name,{attr:i}));L=Math.max(ge[1],L),N.PhyloCanvas.Render.Parameters.mouseRollOver&&N.Common.addRaphEventHandler(ge[0],"mouseover",N.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:v,node:j,x:W,y:Pe,textEl:ge[0]}),N.PhyloCanvas.Render.Parameters.mouseRollOut&&N.Common.addRaphEventHandler(ge[0],"mouseout",N.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:v,node:j,x:W,y:Pe,textEl:ge[0]}),N.PhyloCanvas.Render.Parameters.onClickAction&&N.Common.addRaphEventHandler(ge[0],"click",N.PhyloCanvas.Render.Parameters.onClickAction,{svg:v,node:j,x:W,y:Pe,textEl:ge[0]})}f&&(f=!1)}return[ie,Pe]},be=function(){y=w+T,R=0,z=c.showScaleBar*m,v.draw(new N.PhyloCanvas.Render.Line(R,z,y,y)),v.draw(new N.PhyloCanvas.Render.Text((R+z)/2,y-8,c.showScaleBar))},oe=function(j,Ce,Se){for(var Z=(Se&&Se.bufferInner?Se.bufferInner:0)|N.PhyloCanvas.Render.Parameters.binaryChartBufferInner,W=(Se&&Se.bufferSiblings?Se.bufferSiblings*T:0)|(N.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?T*N.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:N.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),ie=(Se&&Se.thickness?Se.thickness:0)|N.PhyloCanvas.Render.Parameters.binaryChartThickness,Pe,r=0;r<G.length;r++){var e=G[r];v.draw(new N.PhyloCanvas.Render.Path(pe(j+Z,e.y-T/2+W/2,j+Z+ie,e.y+T/2-W/2),{attr:N.PhyloCanvas.Render.Style.getStyle(e.chart[Ce],"textSecantBg")}))}return j+Z+ie},ke=function(j,Ce,Se){for(var Z=[],W,ie=Se&&Se.bufferInner?Se.bufferInner:0|N.PhyloCanvas.Render.Parameters.barChartBufferInner,Pe=Se&&Se.height?Se.height:0|N.PhyloCanvas.Render.Parameters.barChartHeight,r=Se&&Se.width?Se.width<1?T*Se.width:Se.width:0|(N.PhyloCanvas.Render.Parameters.barChartWidth<1?T*N.PhyloCanvas.Render.Parameters.barChartWidth:N.PhyloCanvas.Render.Parameters.barChartWidth),e=0,t=0;t<G.length;t++)Z.push(G[t].chart[Ce]);W=Math.max.apply(null,Z),e=N.Common.roundFloat(Pe/W,4);for(var t=0;t<G.length;t++){var i=G[t];v.draw(new N.PhyloCanvas.Render.Path(pe(j+ie,i.y-r/2,j+ie+e*i.chart[Ce],i.y+r/2),{attr:N.PhyloCanvas.Render.Style.getStyle(i.chart[Ce],"barChart")}))}return j+ie+Pe};return function(j,Ce){this.getCanvasSize=function(){return[C,E]},this.getRoot=function(){return Ce.getRoot()},Ce.getValidate()&&v.draw(0,0,Ce.getValidate()),f=!0,v=j;var Se=Ce.getRoot(),Z=Ce.getNewickLen();if(C=v.canvasSize[0],E=v.canvasSize[1],le=c.bufferX,fe=c.paddingX,ye=c.paddingY,h=c.minHeightBetweenLeaves,w=ye,m=Math.round((C-le-fe*2)/Z),T=Math.round((E-ye*2)/(c.showScaleBar?Se.getCountAllChildren():Se.getCountAllChildren()-1)),T<h&&(T=h),M=Math.round(C-le-fe*2),(N.PhyloCanvas.Render.Parameters.binaryCharts.length||N.PhyloCanvas.Render.Parameters.barCharts.length)&&(c.alignRight=!0),I(Se,fe),c.showScaleBar&&be(),O=M+L+c.bufferInnerLabels,N.PhyloCanvas.Render.Parameters.binaryCharts.length){var W=N.PhyloCanvas.Render.Parameters.binaryCharts;for(var ie in W)O=oe(O,W[ie].chart,W[ie])}if(N.PhyloCanvas.Render.Parameters.barCharts.length){var Pe=N.PhyloCanvas.Render.Parameters.barCharts;for(var ie in Pe)D=ke(O,Pe[ie].chart,Pe[ie])}G=[],typeof bgLabelsHold!="undefined"&&(bgLabelsHold=[])}}();N.PhyloCanvas.Render.Phylogram.prototype={};N.PhyloCanvas.Render.CircularPhylogram=function(){var v,c=N.PhyloCanvas.Render.Parameters.Circular,C,E,m,T,M,h,f,w=!0,L=0,O,F,D,R=[],z=[],J,re,$,V=0,le,fe=Math.PI/180;function ye(Z,W){return W+=le,[N.Common.roundFloat(O+Z*Math.sin(W*fe),4),N.Common.roundFloat(F+Z*Math.cos(W*fe),4)]}function G(Z){var W=I(90-Z-le);if(W>90&&W<270){W+=180;var ie="end"}else var ie="start";return[W,ie]}function me(Z,W,ie,Pe){var r=ye(Z,W),e=ye(Z,ie),t=[],i,o=0;return Math.abs(I(ie-W))>180?i=1:i=-1,Pe&&Pe.invertSecant&&(i*=-1,o=1),Pe&&Pe.noMove||t.push("M"),t.push(r[0],r[1],"A",Z,Z,0,i<1?0:1,o,e[0],e[1]),t}function pe(Z,W,ie,Pe){var r=[],e=ye(W,Z),t=ye(ie,Z);return Pe&&Pe.noMove||r.push("M"),r.push(e[0],e[1],"L",t[0],t[1]),r}function I(Z){for(;Z>360||Z<0;)Z>360?Z-=360:Z<0&&(Z+=360);return Z}function be(Z,W,ie,Pe){if(!W&&Z.length>1)var Pe=Z[3],ie=Z[2],W=Z[1],Z=Z[0];var r=ke("M",me(Z,ie,Pe,{noMove:1,invertSecant:0}),"L",me(W,Pe,ie,{noMove:1,invertSecant:1}),"Z");return r}function oe(Z,W){if(W=W,Z.len&&(w?L=re||1:Z.children.length==0&&(L=N.Common.roundFloat(L+M,4))),Z.children.length>0){var ie=[],Pe,r,e,t;if(Pe=W,r=W+=N.Common.roundFloat(T*Z.len,4),Z.name,Z.children&&Z.children.length)for(var i=0;i<Z.children.length;i++){var o=Z.children[i],u=oe(o,W);u>0&&ie.push(u)}var d=N.Common.roundFloat(Math.min.apply(null,ie),4),b=N.Common.roundFloat(Math.max.apply(null,ie),4);Z.level!=0&&v.draw(new N.PhyloCanvas.Render.Path(ke("M",ye(W+.01,d),"L",me(W,d,b,{noMove:!0}),"L",ye(W+.01,b)))),Z.len&&(e=N.Common.roundFloat(d+(b-d)/2,4),v.draw(new N.PhyloCanvas.Render.Path(pe(e,Pe,r))))}else if(Z.y=L,R.push(Z),Pe=W,r=W=N.Common.roundFloat(W+T*Z.len),e=L,v.draw(new N.PhyloCanvas.Render.Path(pe(e,Pe,r))),v.draw(new N.PhyloCanvas.Render.Path(pe(e,r,D),{attr:N.PhyloCanvas.Render.Style.connectedDash})),Z.name){var g=ye(D+c.bufferInnerLabels,e),A=G(e),B=A[0],H=A[1],U={};Z.style&&N.Common.apply(U,N.PhyloCanvas.Render.Style.getStyle(Z.style,"text")),Z.font_color_hex?U.fill=Z.font_color_hex:U.fill="#000000",U["text-anchor"]=H,Z.uri&&(U.href=Z.uri),Z.description&&(U.title=Z.description);var ee=v.draw(new N.PhyloCanvas.Render.Text(g[0],g[1],Z.name,{attr:U,rotate:[B,g[0],g[1]]}));Z.bgStyle&&z.push([Z.bgStyle,e]);var g=ye(r,e);N.PhyloCanvas.Render.Parameters.mouseRollOver&&N.Common.addRaphEventHandler(ee[0],"mouseover",N.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:v,node:Z,x:g[0],y:g[1],textEl:ee[0]}),N.PhyloCanvas.Render.Parameters.mouseRollOut&&N.Common.addRaphEventHandler(ee[0],"mouseout",N.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:v,node:Z,x:g[0],y:g[1],textEl:ee[0]}),N.PhyloCanvas.Render.Parameters.onClickAction&&N.Common.addRaphEventHandler(ee[0],"click",N.PhyloCanvas.Render.Parameters.onClickAction,{svg:v,node:Z,x:g[0],y:g[1],textEl:ee[0]}),V=Math.max(ee[1],V)}return w&&(w=!1),e}function ke(Z){for(var W=Z,ie=1;ie<arguments.length;ie++)W=W.concat(arguments[ie]);return W}function j(){var Z=[];if(z.length>0){if(N.PhyloCanvas.Render.Style.jsphylosvgGradientList)for(var W=0;W<N.PhyloCanvas.Render.Style.jsphylosvgGradientList.length;W++){var ie=N.PhyloCanvas.Render.Style.jsphylosvgGradientList[W],Pe=N.Common.createGradientEl(ie,N.PhyloCanvas.Render.Style[ie],[O,F,D+V+c.bufferOuterLabels]);v.svg.defs.appendChild(Pe)}for(var W=0;W<z.length;W++){if(W!=z.length-1&&z[W][0]==z[W+1][0]){z[W+1][2]=z[W][2]?z[W][2]:z[W][1];continue}var Z=be(D,D+V+c.bufferOuterLabels,z[W][2]?z[W][2]-M/2:z[W][1]-M/2,z[W][1]+M/2),r=N.PhyloCanvas.Render.Style.getStyle(z[W][0],"textSecantBg"),e=v.draw(new N.PhyloCanvas.Render.Path(Z,{attr:r.type?{}:r}));r.type&&r.type=="radialGradient"&&e[0].node.setAttribute("fill","url(#"+r.name+")"),r.type&&r.type=="radialGradient"&&e[0].node.setAttribute("stroke","none"),e[0].toBack()}}var Z=be(D,D+V+c.bufferOuterLabels,(re||1)-M/2,360-M/2),e=v.draw(new N.PhyloCanvas.Render.Path(Z,{attr:N.PhyloCanvas.Render.Style.textSecantBg}));return e[0].toBack(),D+V+c.bufferOuterLabels}function Ce(Z,W,ie){for(var Pe=ie&&ie.bufferInner?parseFloat(ie.bufferInner):N.PhyloCanvas.Render.Parameters.binaryChartBufferInner,r=(ie&&ie.bufferSiblings?ie.bufferSiblings*M:0)|(N.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?M*N.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:N.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),e=ie&&ie.thickness?parseFloat(ie.thickness):N.PhyloCanvas.Render.Parameters.binaryChartThickness,t=(ie&&ie.disjointed?ie.disjointed:!1)|N.PhyloCanvas.Render.Parameters.binaryChartDisjointed,i=ie&&ie.isInternal?ie.isInternal:!1,o=!0,u,d=0;d<R.length;d++){var b=R[d];if((!R[d+1]||b.chart[W]!==R[d+1].chart[W]||t)&&b.chart[W]!="none"){var g=N.PhyloCanvas.Render.Style.getStyle(b.chart[W],"textSecantBg");if(i)var A=[D-Pe-e,D-Pe,(u||b.y)-M/2+(o&&!t?0:r/2),b.y+M/2-(d==R.length-1&&!t?0:r/2)];else var A=[Z+Pe,Z+Pe+e,(u||b.y)-M/2+(o&&!t?0:r/2),b.y+M/2-(d==R.length-1&&!t?0:r/2)];if(g.label){var B=N.PhyloCanvas.Render.Style.getStyle(g.labelStyle,"text"),H=ye((A[0]+A[1])/2,(A[2]+A[3])/2),U=G((A[2]+A[3])/2),ee=I(U[0]+(B.rotate?parseFloat(B.rotate):0)),se=I(90-(A[2]+A[3])/2-le);se>90&&se<270&&(ee+=180),B["text-anchor"]||(B["text-anchor"]="middle"),b.font_color_hex?g.fill=b.font_color_hex:g.fill="#000000";var de=v.draw(new N.PhyloCanvas.Render.Text(H[0],H[1],g.label,{attr:B,rotate:ee}));de[0].toBack()}if(g.borderStyle){var ge=N.PhyloCanvas.Render.Style.getStyle(g.borderStyle,"textSecantBg"),we=[D,ge.fullsize?A[1]:A[0],A[2],A[3]],xe=v.draw(new N.PhyloCanvas.Render.Path(be(we),{attr:ge}));xe[0].toBack()}var Ae=v.draw(new N.PhyloCanvas.Render.Path(be(A),{attr:g}));Ae[0].toBack(),u=0,o=!1}else u||(u=b.y),b.chart[W]=="none"&&(u=0);o=!1}return i?Z:Z+Pe+e}function Se(Z,W,ie){for(var Pe=[],r,e=ie&&ie.bufferInner?parseFloat(ie.bufferInner):N.PhyloCanvas.Render.Parameters.barChartBufferInner,t=ie&&ie.height?parseFloat(ie.height):N.PhyloCanvas.Render.Parameters.barChartHeight?N.PhyloCanvas.Render.Parameters.barChartHeight:0,i=ie&&ie.width?parseFloat(ie.width)<1?M*parseFloat(ie.width):parseFloat(ie.width):0|(N.PhyloCanvas.Render.Parameters.barChartWidth<1?M*N.PhyloCanvas.Render.Parameters.barChartWidth:N.PhyloCanvas.Render.Parameters.barChartWidth),o=0,u=0;u<R.length;u++)Pe.push(R[u].chart[W]);r=Math.max.apply(null,Pe),o=N.Common.roundFloat(t/r,4);for(var u=0;u<R.length;u++){var d=R[u];d.chart[W]>0&&v.draw(new N.PhyloCanvas.Render.Path(be(Z+e,Z+e+o*d.chart[W],d.y-i/2,d.y+i/2),{attr:N.PhyloCanvas.Render.Style.getStyle(d.chart[W],"barChart")}))}return Z+e+t}return function(Z,W,ie){if(this.getCanvasSize=function(){return[C,E]},this.getRoot=function(){return W.getRoot()},W.getValidate()){Z.draw({type:"text",x:0,y:Z.canvasSize[1]/3,text:W.getValidate()});return}v=Z;var Pe=W.getRoot(),r=W.getNewickLen();if(C=v.canvasSize[0],E=v.canvasSize[1],O=C/2,F=E/2,m=Math.min.apply(null,[C,E]),ie=c.bufferRadius>1?c.bufferRadius:N.Common.roundFloat(m*c.bufferRadius,4),re=c.bufferAngle,f=c.innerCircleRadius,h=c.minHeightBetweenLeaves,le=c.initStartAngle,D=Math.round((m-ie-f)/2),T=(D-f)/r,M=N.Common.roundFloat((360-re)/Pe.getCountAllChildren(),4),oe(Pe,f),$=D+V+c.bufferOuterLabels,N.PhyloCanvas.Render.Parameters.integratedBinaryCharts.length){var e=N.PhyloCanvas.Render.Parameters.integratedBinaryCharts;for(var t in e){var i=e[t].bufferInner?e[t].bufferInner:N.PhyloCanvas.Render.Parameters.binaryChartBufferInner,o=e[t].thickness?e[t].thickness:N.PhyloCanvas.Render.Parameters.binaryChartThickness;$=Ce($-o-i,e[t].chart,e[t])}}if($=j(),N.PhyloCanvas.Render.Parameters.binaryCharts.length){var u=N.PhyloCanvas.Render.Parameters.binaryCharts;for(var t in u)$=Ce($,u[t].chart,u[t])}if(N.PhyloCanvas.Render.Parameters.barCharts.length){var d=N.PhyloCanvas.Render.Parameters.barCharts;for(var t in d)$=Se($,d[t].chart,d[t])}R=[],z=[]}}();N.PhyloCanvas.Render.CircularPhylogram.prototype={};var bt=function(){var v=function(E){if(!!E&&typeof E=="object"){let m=function(){};return m.prototype=E,new m}},c=function(E){var m="";!!E&&typeof E=="string"&&(m=E);var T=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return T.test(m)},C={xmlToJSON:function(E){try{let f=function(D){return D.replace(/^\s+|\s+$/gm,"")},w=function(D){var R=/-/g,z=String(D).replace(R,"_");return z},L=function(D,R){if(R.attributes.length>0){var z=R.attributes.length-1,J;D._attributes=[];do J=String(w(R.attributes[z].name)),D._attributes.push(J),D[J]=f(R.attributes[z].value);while(z--)}},O=function(D){D.getNodeByAttribute=function(R,z){if(this.length>0){var J,re=this.length-1;try{do if(J=this[re],J[R]==z)return J;while(re--)}catch($){return!1}return!1}},D.contains=function(R,z){if(this.length>0){var J=this.length-1;try{do if(this[J][R]==z)return!0;while(J--)}catch(re){return!1}return!1}},D.indexOf=function(R,z){var J=-1;if(this.length>0){var re=this.length-1;try{do this[re][R]==z&&(J=re);while(re--)}catch($){return-1}return J}},D.SortByAttribute=function(R,z){if(this.length){let J=function($,V){var le=$[V];return le=c(le)?parseFloat(le):le,le},re=function($,V){var le=0,fe,ye;return fe=J($,R),ye=J(V,R),fe<ye?le=-1:ye<fe&&(le=1),z&&(le=z.toUpperCase()=="DESC"?0-le:le),le};this.sort(re)}},D.SortByValue=function(R){if(this.length){let z=function(re){var $=re.Text;return $=c($)?parseFloat($):$,$},J=function(re,$){var V=0,le,fe;return le=z(re),fe=z($),le<fe?V=-1:fe<le&&(V=1),R&&(V=R.toUpperCase()=="DESC"?0-V:V),V};this.sort(J)}},D.SortByNode=function(R,z){if(this.length){let J=function($,V){var le=$[V][0].Text;return le=c(le)?parseFloat(le):le,le},re=function($,V){var le=0,fe,ye;return fe=J($,R),ye=J(V,R),fe<ye?le=-1:ye<fe&&(le=1),z&&(le=z.toUpperCase()=="DESC"?0-le:le),le};this.sort(re)}}},F=function(D,R){var z,J,re,$="";if(!R)return null;if(R.attributes.length>0&&L(D,R),D.Text="",R.hasChildNodes()){var V=R.childNodes.length-1,le=0;do switch(J=R.childNodes[le],J.nodeType){case 1:D._children=[],z=J.localName?J.localName:J.baseName,z=w(z),$!=z&&D._children.push(z),D[z]||(D[z]=[]),re={},D[z].push(re),J.attributes.length>0&&L(re,J),D[z].contains||O(D[z]),$=z,J.hasChildNodes()&&F(re,J);break;case 3:D.Text+=f(J.nodeValue);break;case 4:D.Text+=J.text?f(J.text):f(J.nodeValue);break}while(le++<V)}};if(!E)return null;var m={};m.typeOf="JSXBObject";var T=E.nodeType==9?E.documentElement:E;if(m.RootName=T.nodeName||"",E.nodeType==3||E.nodeType==4)return E.nodeValue;var M=function(){var D={activate:function(){var R=[];return R&&(R.getNodesByAttribute=function(z,J){if(!!R&&R.length>0){var re=[],$,V=R.length-1;try{do $=R[V],$[z]===J&&re.push($);while(V--);return re.reverse(),re}catch(le){return null}return null}},R.getNodeByAttribute=function(z,J){if(!!R&&R.length>0){var re,$=R.length-1;try{do if(re=R[$],re[z]===J)return re;while($--)}catch(V){return null}return null}},R.getNodesByValue=function(z){if(!!R&&R.length>0){var J=[],re,$=R.length-1;try{do re=R[$],!!re.Text&&re.Text===z&&J.push(re);while($--);return J}catch(V){return null}return null}},R.contains=function(z,J){if(!!R&&R.length>0){var re=R.length-1;try{do if(R[re][z]===J)return!0;while(re--)}catch($){return!1}return!1}},R.indexOf=function(z,J){var re=-1;if(!!R&&R.length>0){var $=R.length-1;try{do R[$][z]===J&&(re=$);while($--)}catch(V){return-1}return re}},R.SortByAttribute=function(z,J){if(!!R&&R.length>0){let re=function(V,le){var fe=V[le];return fe=bam.validation.isNumeric(fe)?parseFloat(fe):fe,fe},$=function(V,le){var fe,ye;fe=re(V,z),ye=re(le,z);var G=fe<ye?-1:ye<fe?1:0;return J&&(G=J.toUpperCase()==="DESC"?0-G:G),G};R.sort($)}},R.SortByValue=function(z){if(!!R&&R.length>0){let J=function($){var V=$.Text;return V=bam.validation.isNumeric(V)?parseFloat(V):V,V},re=function($,V){var le,fe;le=J($),fe=J(V);var ye=le<fe?-1:fe<le?1:0;return z&&(ye=z.toUpperCase()==="DESC"?0-ye:ye),ye};R.sort(re)}},R.SortByNode=function(z,J){if(!!R&&R.length>0){let re=function(V,le){var fe=V[le][0].Text;return fe=bam.validation.isNumeric(fe)?parseFloat(fe):fe,fe},$=function(V,le){var fe,ye;fe=re(V,z),ye=re(le,z);var G=fe<ye?-1:ye<fe?1:0;return J&&(G=J.toUpperCase()==="DESC"?0-G:G),G};R.sort($)}}),R}};return D}(),h=function(){var D=v(M);return D.activate()};return F(m,T),E=null,T=null,m}catch(f){return null}},textToXML:function(E){var m=null;try{m=document.all?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser,m.async=!1}catch(M){throw new Error("XML Parser could not be instantiated")}var T;try{document.all?T=m.loadXML(E)?m:!1:T=m.parseFromString(E,"text/xml")}catch(M){throw new Error("Error parsing XML string")}return T}};return C}();import{showSaveFilePicker as Kt}from"https://cdn.jsdelivr.net/npm/native-file-system-adapter/mod.js";var w1=function(){let v=[{name:"valapalagilaka",search:"á¹™",replace:()=>"r"},{name:"short e",search:"áº½",replace:()=>"e"},{name:"short o",search:"Ãµ",replace:()=>"o"},{name:"pá¹›á¹£á¹­hamÄtrÄ e",search:"Ãª",replace:()=>"e"},{name:"pá¹›á¹£á¹­hamÄtrÄ o",search:"Ã´",replace:()=>"o"},{name:"pá¹›á¹£á¹­hamÄtrÄ ai",search:"ÃŠ",replace:()=>"E"},{name:"pá¹›á¹£á¹­hamÄtrÄ au",search:"Ã”",replace:()=>"O"},{name:"candrabindu",search:"mÌ",replace:()=>"M"},{name:"oá¹ƒkÄras",search:"oá¹",replace:()=>"oM"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"(?:kK|gG|cC|jJ|wW|qQ|tT|dD|pP|bB)",replace:M=>M[0].slice(-1)},{name:"geminated m after h",search:"(?:Mhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rfi]|p[aA])tt|tt(?=[rvy]\\S)",replace:M=>`${M[1]}t`},{name:"geminated consonants after r",search:"([rf]\\s*)([kgcjwqdpbRnmyvl])\\2{1,2}",replace:M=>`${M[1]}${M[2]}`},{name:"final nasal variants",search:"(?:M[lSs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnNYR](?=[pPbBmdDtTnwWqQcCjJkKgG])",replace:()=>"M"},{name:"final anusvÄra variants",search:"M?[mN](?!\\S)|n(?=\\s+[tdn])|Y(?=\\s+[jc])",replace:()=>"M"},{name:"visarga aá¸¥ before voiced consonants",search:"(?<!\\sB)(?:a[Hr]|[o])(?=\\s+['gGjJqQdDnbBmrylvh])",replace:()=>"aH"},{name:"visarga aá¸¥ before vowels",search:"aH(?=\\s+[AiIeuUof])",replace:()=>"a"},{name:"visarga aá¸¥ before unvoiced consonants and space + anusvÄra",search:"o\\s+(?=[kKcCwWtTpPszSM])",replace:()=>"aH a"},{name:"visarga Äá¸¥ variants",search:"AH(?=\\s+[aAiIeEuUogGjJqQdDbBnmyrlvh])",replace:()=>"A"},{name:"other visarga variants",search:"H?[rszS](?!\\S)",replace:()=>"H"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"z(?=[kK])|s(?=s)",replace:()=>"H"},{name:"final au/Äv",search:"Av(?!\\S)",replace:()=>"O"},{name:"final su",search:"(?<=[sz])v(?=\\s+[aAiIuUoOeE])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aAuUoOeE])",replace:()=>"y"},{name:"kcch/kÅ›",search:"k(\\s*)(?:S|c?C)",replace:M=>`k${M[1]}S`},{name:"cÅ›/tÅ›",search:"[tc](\\s*)S",replace:M=>`c${M[1]}C`},{name:"cch/ch",search:"([aAiIuUeEoO])C",replace:M=>`${M[1]}cC`},{name:"final t + hi",search:"d(\\s+)D(?=[iy](?:\\s|$))",replace:M=>`t${M[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aAiIeEuUoOgGdDbByrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:M=>`${M[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aAuUeEoO])",replace:()=>"i"},{name:"bhd for bdh",search:"Bd",replace:()=>"bD"}],c=[{name:"valapalagilaka",search:"á¹™",replace:()=>"r"},{name:"short e",search:"áº½",replace:()=>"e"},{name:"short o",search:"Ãµ",replace:()=>"o"},{name:"pá¹›á¹£á¹­hamÄtrÄ e",search:"Ãª",replace:()=>"e"},{name:"pá¹›á¹£á¹­hamÄtrÄ o",search:"Ã´",replace:()=>"o"},{name:"pá¹›á¹£á¹­hamÄtrÄ ai",search:"aÃ®",replace:()=>"ai"},{name:"pá¹›á¹£á¹­hamÄtrÄ au",search:"aÃ»",replace:()=>"au"},{name:"candrabindu",search:"mÌ",replace:()=>"á¹ƒ"},{name:"oá¹ƒkÄras",search:"oá¹",replace:()=>"oá¹ƒ"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"([kgcjá¹­á¸tdpb]){2}h",replace:M=>`${M[1]}h`},{name:"geminated m after h",search:"(?:á¹ƒhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rá¹›i]|p[aÄ])tt|tt(?=[rvy]\\S)",replace:M=>`${M[1]}t`},{name:"geminated consonants after r",search:"([rá¹›]\\s*)([kgcjá¹­á¸á¹‡tdnpbmyvl])\\2{1,2}",replace:M=>`${M[1]}${M[2]}`},{name:"final nasal variants",search:"(?:á¹ƒ[lá¹£s]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mná¹…Ã±á¹‡](?=[pbmdtná¹­á¸cjkg])",replace:()=>"á¹ƒ"},{name:"final anusvÄra variants",search:"á¹ƒ?[má¹…](?!\\S)|n(?=\\s+[tdn])|Ã±(?=\\s+[jc])",replace:()=>"á¹ƒ"},{name:"visarga aá¸¥ before voiced consonants",search:"(?:a[á¸¥r]|[o])(?=\\s+['gjá¸dnbmyrlvh])",replace:()=>"aá¸¥"},{name:"visarga aá¸¥ before vowels",search:"aá¸¥(?=\\s+[ÄiÄ«euÅ«oá¹›])",replace:()=>"a"},{name:"visarga aá¸¥ before unvoiced consonants and space + anusvÄra",search:"o\\s+(?=[kcá¹­tpÅ›á¹£sá¹ƒ])",replace:()=>"aá¸¥ a"},{name:"visarga Äá¸¥ variants",search:"Äá¸¥(?=\\s+[aÄiÄ«euÅ«ogjá¸dnbmyrlvh])",replace:()=>"Ä"},{name:"other visarga variants",search:"á¸¥?[rÅ›á¹£s](?!\\S)",replace:()=>"á¸¥"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"á¹£(?=k)|s(?=s)",replace:()=>"s"},{name:"final au/Äv",search:"Äv(?!\\S)",replace:()=>"au"},{name:"final su",search:"(?<=[sá¹£])v(?=\\s+[aÄiÄ«uÅ«oe])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aÄuÅ«eo])",replace:()=>"y"},{name:"kcch/kÅ›",search:"k(\\s*)(?:Å›|c?ch)",replace:M=>`k${M[1]}Å›`},{name:"cÅ›/tÅ›",search:"[tc](\\s*)Å›",replace:M=>`c${M[1]}ch`},{name:"cch/ch",search:"([aÄiÄ«uÅ«eo])ch",replace:M=>`${M[1]}cch`},{name:"final t + hi",search:"d(\\s+)dh(?=[iy](?:\\s|$))",replace:M=>`t${M[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aÄiÄ«euÅ«ogdbyrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:M=>`${M[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aÄuÅ«eo])",replace:()=>"i"},{name:"bhd for bdh",search:"bhd",replace:()=>"bdh"}],C={none:{name:"remove spaces",search:"\\s",replace:()=>""},collapse:{name:"collapse spaces",search:"\\s+",replace:()=>" "}},E=function(M,h){let f=h.join(""),w=[],L=[...f.matchAll(M.search)],O=0,F=null;for(let D of h){let R=O+D.length,z=D,J=0;if(F)if(F.length<=D.length)z=m(D,0,F.length,F.text),J=F.text.length-F.length,F=null;else{z=F.text.slice(0,D.length);let $=F.text.slice(D.length);F={length:F.length-D.length,text:$};continue}for(;L.length>0&&L[0].index<R;){let re=L.shift(),$=re.index-O+J,V=M.replace(re);if(re.index+re[0].length<R)z=m(z,$,re[0].length,V),J=J+V.length-re[0].length;else{let le=D.length-$+J,fe=V.slice(0,le);z=z.slice(0,$)+fe;let ye=V.slice(le);F={length:re[0].length-le,text:ye}}}w.push(z),O=R}return w},m=function(M,h,f,w){return M.slice(0,h)+w+M.slice(h+f)};return function(M){let h=M.map(f=>ze.t(f,"iast","slp1"));for(let f of[...v,C.none])h=E(f,h);return h.map(f=>ze.t(f,"slp1","iast"))}}();var Bt={smush:function(v,c){return v.toLowerCase().replace(/([á¸drmvynhs]) ([aÄiÄ«uÅ«á¹›eoÃ©Ã³])/g,"$1$2"+c).replace(/([kgcjá¹­á¸tdpb]) h/g,"$1â€Œ"+c+"h").replace(/([kgcjÃ±á¸tdnpbmrlyvÅ›á¹£sá¹™]) ([kgcjá¹­á¸tdnpbmyrlvÅ›á¹£shá¸»])/g,"$1"+c+"$2").replace(/([oÃ³eÃ©Ä]) ([á¹ƒ'])/g,"$1"+c+"$2").replace(/^á¹ƒ/,"'â€á¹ƒ").replace(/^á¸¥/,"'â€á¸¥").replace(/^_y/,"'â€y").replace(/Ã¼/g,"â€Œu").replace(/Ã¯/g,"â€Œi").replace(/_{1,2}(?=\s*)/g,function(C){if(C==="__")return"â€";if(C==="_")return"â€Œ"})},iast:function(v,c){let C=c||"devanagari";return ze.t(v,C,"iast",{skip_sgml:!0})},devanagari:function(v,c){let C=c||"",E={skip_sgml:!0},m=v.replace(/á¹™/g,"r").replace(/^_Ä/,"à¤½â€à¤¾"),T=Bt.smush(m,C);return ze.t(T,"iast","devanagari",E).replace(/Â¯/g,"ê£»")},malayalam:function(v,c){let C=c||"",E={skip_sgml:!0},m={à´•:"àµ¿",à´¤:"àµ½",à´¨:"àµ»",à´®:"àµ”",à´°:"àµ¼"},T=v.replace(/^_Ä/,"à´½â€à´¾"),M=Bt.smush(T,C).replace(/e/g,"áº½").replace(/o/g,"Ãµ").replace(/á¹™/g,"r").replace(/á¹/g,"á¹ƒ").replace(/á¸¿/g,"á¹ƒ").replace(/Ã­/g,"i").replace(/Ãº/g,"u").replace(/Ã©/g,"e");return ze.t(M,"iast","malayalam",E).replace(/(^|[^àµ])à´°àµ(?=\S)/g,"$1àµ").replace(/([à´•à´¤à´¨à´®à´°])àµ(?![^\s\u200C,â€”â€™â€•])/g,function(f,w){return m[w]})},grantha:function(v,c){let C=c||"",E={skip_sgml:!0},m=new Map([["à´¸","î‡“"],["à´°","àµ¼"],["à´¯","î‡‹"],["à´š","î†¶"],["à´¦","î‡‚"],["à´¶","î‡’"]]),T=new RegExp("(["+[...m.keys()].join("")+"])àµ(?![^â€Œ ,â€”â€™â€•])","g"),M=v.replace(/^_Ä/,"à´½â€à´¾"),h=Bt.smush(M,C).replace(/e/g,"áº½").replace(/o/g,"Ãµ").replace(/á¹™/g,"r").replace(/á¹/g,"á¹ƒ").replace(/á¸¿/g,"á¹ƒ").replace(/Ã­/g,"i").replace(/Ãº/g,"u").replace(/Ã©/g,"e");return ze.t(h,"iast","malayalam",E).replace(/(^|[^àµ])à´°àµ(?=\S)/g,"$1àµ").replace(T,(w,L)=>m.get(L)).replace(/à´•àµà´·à´¿/g,"à®•à¯à®·à®¿")},telugu:function(v,c){var C=c||"";let E={skip_sgml:!0},m=v.replace(/^_Ä/,"à°½â€à°¾"),T=Bt.smush(m,C).replace(/e/g,"áº½").replace(/o/g,"Ãµ").replace(/á¹™/g,"râ€").replace(/á¹/g,"á¹ƒ").replace(/á¸¿/g,"á¹ƒ").replace(/Ã­/g,"i").replace(/Ãº/g,"u").replace(/Ã©/g,"e");return ze.t(T,"iast","telugu",E)}},Ot=function(v,c,C=!1,E="sa"){let m=Bt[c],T=v.cloneNode(!0),M=function(h,f){let w=h.childNodes;for(let L of w)if(L.nodeType!==8){if(L.nodeType===3){if(f!=="sa")continue;L.data=m(L.data,C)}else if(L.hasChildNodes()){let O=L.getAttribute("lang")||f;O==="sa"&&L.classList.contains("subst")&&Q1(L,c),M(L,O)}}};return M(T,E),T},C1=function(v,c=!1){if(v.nodeType===3)return v;let C=document.createTreeWalker(v,NodeFilter.SHOW_TEXT,null,!1);if(c){let E;for(;C.nextNode();)E=C.currentNode;return E}else return C.nextNode},Q1=function(v,c){if(v.firstChild.nodeType!==3&&v.lastChild.nodeType!==3)return;let C=v.childNodes,E=/^[aÄiÄ«uÅ«eoá¹›á¹á¸·á¹ƒá¸¥]/,m=/[kgá¹…cjÃ±á¹­á¸á¹‡tdnpbmyrlvá¹£Å›sh]$/,T=["Ä","i","Ä«","e","o","_","ai","au"],M=["h","k","Å›","y","g","gh","c","ch","jh","á¹­h","á¸","á¸h","t","th","d","dh","n","p","ph","bh","m","r","á¸»","v","á¹£","s"];var h=!1,f=[],w=[];let L=C[0].nodeType===3;for(let O of C){if(O.nodeType>3)continue;let F=O.textContent.trim();if(F!==""){if(F==="a"){O.textContent="";continue}if(F.match(m)){let D=C1(O,!0);D.textContent=D.textContent.replace(/\s+$/,"")+"a",c==="telugu"&&M.indexOf(F)>=0&&f.push(O)}if(O===v.lastChild&&O.nodeType===3){let D=document.createElement("span");D.appendChild(O.cloneNode(!1)),v.replaceChild(D,O),O=D,O.classList.add("aalt")}else L&&F.match(E)&&O.classList.add("aalt");switch(c){case"devanagari":(F==="i"||F==="Ã©")&&w.unshift(O);break;case"grantha":case"malayalam":if(F==="e"||F==="ai")w.unshift(O);else if(F==="o"){let D=O.cloneNode(!0);_1("o","e",D),w.unshift(D),_1("o","Ä",O)}break;case"telugu":!h&&T.indexOf(F)>=0&&(h=!0);break}}}for(let O of w)v.insertBefore(O,v.firstChild);if(h)for(let O of f){let F=C1(O,!0);F.textContent=F.textContent+"â€à±"}},_1=function(v,c,C){let E=document.createTreeWalker(C,NodeFilter.SHOW_TEXT,null,!1);for(;E.nextNode();)E.currentNode.textContent.match(v)&&(E.currentNode.textContent=c)};"use strict";var K1=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,115,116,114,105,112,45,115,112,97,99,101,32,101,108,101,109,101,110,116,115,61,34,42,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,47,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,97,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,45,45,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,33,45,45,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,45,45,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),k1=K1;"use strict";var Z1=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,32,32,32,32,60,120,115,108,58,111,117,116,112,117,116,32,105,110,100,101,110,116,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,72,101,97,100,101,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,120,101,110,111,68,97,116,97,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),S1=Z1;"use strict";var en=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,97,98,108,101,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,114,101,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,100,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,115,101,108,101,99,116,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,104,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,99,111,112,101,34,62,114,111,119,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,114,97,103,103,97,98,108,101,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,100,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,97,114,101,110,116,58,58,120,58,99,108,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,39,49,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,115,116,97,114,116,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,101,110,100,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,105,110,116,101,114,110,97,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,105,110,115,105,103,110,105,102,105,99,97,110,116,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,105,110,115,105,103,110,105,102,105,99,97,110,116,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,98,105,110,97,114,121,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,98,105,110,97,114,121,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),A1=en;"use strict";var tn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,116,114,101,101,45,118,101,114,115,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,108,97,110,103,34,62,101,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,91,118,101,114,115,101,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,93,60,47,120,115,108,58,116,101,120,116,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),P1=tn;"use strict";var nn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,101,109,101,110,100,101,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,110,111,116,40,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,105,110,118,105,115,105,98,108,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,48,48,65,48,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,55,51,59,60,47,120,115,108,58,116,101,120,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,99,108,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,114,111,117,112,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),E1=nn;"use strict";var rn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),R1=rn;var wt=function(v){let C=new DOMParser().parseFromString(v,"text/xml"),E=new XSLTProcessor;return E.importStylesheet(C),E},L1=function(v,c){this.transformString=function(C,E){let m=v.xml.createElementNS(c.teins,"ab");return m.innerHTML=C,E.transformToFragment(m,document)},this.sheets={csv:wt(k1),xml:wt(S1),matrix:wt(A1),lemma:wt(E1),lg:wt(R1),tree:wt(P1)}};var B1=function(v){this.basename=function(){return v.filename.split(/\.[^.]+$/)[0]},this.range=function(c,C){return Array.from(Array(parseInt(C)-parseInt(c)+1).keys(),E=>E+c)},this.maxlemma=function(){return[...this.firsttext().querySelectorAll("w[n]")].length-1},this.lemmata=function(c,C){let E=C||document.querySelector("#views");return c===!1?E.querySelectorAll(".lemma"):E.querySelectorAll(`.lemma[data-n="${c}"]`)},this.tds=function(c,C){let E=C||v.matrix.boxdiv;return c===!1?E.querySelectorAll("td[data-n]"):E.querySelectorAll(`td[data-n="${c}"]`)},this.firsttd=function(c,C){return(C||v.matrix.boxdiv).querySelector(`td[data-n="${c}"]`)},this.tr=function(c){return v.matrix.boxdiv.querySelector(`tr[data-n="${c}"]`)},this.trs=function(c){return(c||v.matrix.boxdiv).querySelectorAll("tr[data-n]")},this.firsttr=function(c){return(c||v.matrix.boxdiv).querySelector("tr[data-n]")},this.lasttr=function(c){return(c||v.matrix.boxdiv).querySelector("tr[data-n]:last-of-type")},this.trWalker=function(c){return document.createNodeIterator(c,NodeFilter.SHOW_ELEMENT,{acceptNode:function(C){if(C.tagName==="TD")return NodeFilter.FILTER_ACCEPT}},!1)},this.textWalker=function(c){return document.createNodeIterator(c,NodeFilter.SHOW_ELEMENT,{acceptNode:function(C){if(C.tagName.toLowerCase()==="w")return NodeFilter.FILTER_ACCEPT}},!1)},this.tei=function(c,C=v.xml){return C.querySelector(`TEI[n="${c}"]`)},this.teis=function(c=v.xml){return c.querySelectorAll("TEI")},this.texts=function(c){return(c||v.xml).querySelectorAll("text")},this.serializedtexts=function(c,C){let E=[...c.querySelectorAll("otu[label]")].map(T=>T.getAttribute("label")),m=[...this.teis()].filter(T=>E.indexOf(T.getAttribute("n"))!==-1);return new Map(m.map(T=>[c.querySelector(`node[label="${T.getAttribute("n")}"]`).getAttribute("id"),[...T.querySelectorAll("w")].map(M=>C&&M.hasAttribute("lemma")?M.getAttribute("lemma"):M.textContent)]))},this.serializedlevels=function(c){return c.map(C=>{if(C instanceof Map){let E=new Map;for(let[m,T]of C)E.set(m.getAttribute("id"),T.map(M=>M.getAttribute("id")));return E}else return C.map(E=>E.getAttribute("id"))})},this.firsttext=function(c){return c?v.xml.querySelector(`[n="${c}"] text`):v.xml.querySelector("text")},this.words=function(c,C){let E=C||v.xml;return c===!1?E.querySelectorAll("w[n]"):E.querySelectorAll(`w[n="${c}"]`)},this.firstword=function(c,C){return(C||v.xml).querySelector(`w[n="${c}"]`)},this.normal=function(c){return(c||document.getElementById("views")).querySelectorAll(".lemma[data-normal], .tree-lemma[data-normal]")},this.htmlreading=function(c,C){return C&&c.dataset.normal?c.dataset.normal:c.IAST.textContent},this.ths=function(){return v.matrix.boxdiv.querySelectorAll("th[data-ref]")},this.firstth=function(c){return v.matrix.boxdiv.querySelector(`th[data-ref="${c}"]`)},this.checkbox=function(c,C){return v.matrix.boxdiv.querySelector(`th[data-ref="${c}"] input.${C}`)},this.highlit=function(){let C=this.firsttr().querySelectorAll(".highlit"),E=new Set;for(let m of C)E.add(m.dataset.n);return E},this.highlitcell=function(){return v.matrix.boxdiv.querySelector("td.highlitcell")},this.highlitrow=function(){let c=this.highlitcell();return c?c.closest("tr"):!1},this.lowhigh=function(c){let C=[...c].sort((T,M)=>parseInt(T)-parseInt(M)),E=parseInt(C[0]),m=C.length>1?parseInt(C[C.length-1]):void 0;return[E,m]},this.readings=function(c,C){let E=C||v.matrix.boxdiv,m=this.tds(c,E);var T=0;let M=new Set;for(let h of m){let f=h.textContent;f!==""&&(T++,M.add(f))}return[T,M.size]},this.attr=function(c,C){let E=this.firsttr();var m=[];for(let T of C)this.firsttd(T,E).dataset[c]==="true"?m.push([T,!0]):m.push([T,!1]);return new Map(m)},this.whichattr=function(c){return c.hasAttribute("n")?"n":c.hasAttribute("data-n")?"data-n":c.hasAttribute("data-ref")?"data-ref":!1},this.clauses=function(c,C=!1){let E=this.firsttext();var m=!1;let T=new Set;for(let M of c){let f=this.firstword(M,E).closest("cl");f?T.add(f):C&&(m=!0)}if(T.size===0)return!1;{let M=[...T].map(h=>{let f=h.querySelectorAll("w");return new Set([...f].map(w=>w.getAttribute("n")))});return m?[null].concat(M):M}},this.clausesToRemove=function(c,C,E=0){let m=new Set;for(let T of c){let M=new Set(T);for(let h of C)M.delete(h);M.size<=E&&m.add(T)}return[...m]},this.empty=function(){let c=new Set,C=[...this.trs()],E=C.map(M=>this.trWalker(M)),m=C[0].querySelector("td:last-of-type").dataset.n;for(let M=0;M<=m;M++){var T=!0;for(let h of E){let f=h.nextNode();T&&f.textContent!==""&&(T=!1)}T&&c.add(M)}return c},this.prevNonempty=function(c,C){for(let E=c;E>=0;E--)if(C[E].textContent!=="")return E;return!1},this.nextNonempty=function(c,C){for(let E=c;E<C.length;E++)if(C[E].textContent!=="")return E;return!1},this.setIntersection=function(...c){let C=c[0];return new Set([...C].filter(E=>{for(let m=1;m<c.length;m++)if(!c[m].has(E))return!1;return!0}))},this.setUnion=function(...c){return new Set(c.reduce((C,E)=>(C=[...C,...E],C),[]))},this.cursorPos=function(c){let C=window.getSelection().getRangeAt(0),E=C.cloneRange();E.selectNodeContents(c);let m=E.toString().length;return E.setEnd(C.endContainer,C.endOffset),[E.toString().length,m]}};function Ht(v){var c=[],C=0;if(this.trie=this.createTrie(v.patterns),this.leftMin=v.leftmin,this.rightMin=v.rightmin,this.exceptions={},v.exceptions)for(c=v.exceptions.split(/,\s?/g);C<c.length;C+=1)this.exceptions[c[C].replace(/\u2027/g,"").toLowerCase()]=new RegExp("("+c[C].split("â€§").join(")(")+")","i")}Ht.prototype.createTrie=function(v){var c=0,C=0,E=0,m=0,T=null,M=null,h=null,f=null,w={_points:[]},L;for(c in v)if(v.hasOwnProperty(c))for(L=v[c].match(new RegExp(".{1,"+ +c+"}","g")),C=0;C<L.length;C+=1){for(T=L[C].replace(/[0-9]/g,"").split(""),M=L[C].split(/\D/),f=w,E=0;E<T.length;E+=1)h=T[E].charCodeAt(0),f[h]||(f[h]={}),f=f[h];for(f._points=[],m=0;m<M.length;m+=1)f._points[m]=M[m]||0}return w};Ht.prototype.hyphenateText=function(v,c){c=c||4;for(var C=v.split(/([a-zA-Z0-9_\u0027\u00AD\u00DF-\u00EA\u00EB\u00EC-\u00EF\u00F1-\u00F6\u00F8-\u00FD\u0101\u0103\u0105\u0107\u0109\u010D\u010F\u0111\u0113\u0117\u0119\u011B\u011D\u011F\u0123\u0125\u012B\u012F\u0131\u0135\u0137\u013C\u013E\u0142\u0144\u0146\u0148\u0151\u0153\u0155\u0159\u015B\u015D\u015F\u0161\u0165\u016B\u016D\u016F\u0171\u0173\u017A\u017C\u017E\u017F\u0219\u021B\u02BC\u0390\u03AC-\u03CE\u03F2\u0401\u0410-\u044F\u0451\u0454\u0456\u0457\u045E\u0491\u0531-\u0556\u0561-\u0587\u0902\u0903\u0905-\u090B\u090E-\u0910\u0912\u0914-\u0928\u092A-\u0939\u093E-\u0943\u0946-\u0948\u094A-\u094D\u0982\u0983\u0985-\u098B\u098F\u0990\u0994-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BE-\u09C3\u09C7\u09C8\u09CB-\u09CD\u09D7\u0A02\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A14-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A82\u0A83\u0A85-\u0A8B\u0A8F\u0A90\u0A94-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABE-\u0AC3\u0AC7\u0AC8\u0ACB-\u0ACD\u0B02\u0B03\u0B05-\u0B0B\u0B0F\u0B10\u0B14-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3E-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B57\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C02\u0C03\u0C05-\u0C0B\u0C0E-\u0C10\u0C12\u0C14-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C43\u0C46-\u0C48\u0C4A-\u0C4D\u0C82\u0C83\u0C85-\u0C8B\u0C8E-\u0C90\u0C92\u0C94-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBE-\u0CC3\u0CC6-\u0CC8\u0CCA-\u0CCD\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D7A-\u0D7F\u1F00-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB2-\u1FB4\u1FB6\u1FB7\u1FBD\u1FBF\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD2\u1FD3\u1FD6\u1FD7\u1FE2-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u200D\u2019]+)/gi),E=0;E<C.length;E+=1)C[E].indexOf("/")!==-1?E!==0&&E!==C.length-1&&!/\s+\/|\/\s+/.test(C[E])&&(C[E]+="â€‹"):C[E].length>c&&(C[E]=this.hyphenate(C[E]).join("Â­"));return C.join("")};Ht.prototype.hyphenate=function(v){var c,C=[],E,m,T,M,h,f=[],w,L=v.toLowerCase(),O,F,D=Math.max,R=this.trie,z=[""];if(this.exceptions.hasOwnProperty(L))return v.match(this.exceptions[L]).slice(1);if(v.indexOf("Â­")!==-1)return[v];for(v="_"+v+"_",c=v.toLowerCase().split(""),E=v.split(""),w=c.length,m=0;m<w;m+=1)f[m]=0,C[m]=c[m].charCodeAt(0);for(m=0;m<w;m+=1)for(h=R,T=m;T<w&&(h=h[C[T]],h);T+=1)if(O=h._points,O)for(M=0,F=O.length;M<F;M+=1)f[m+M]=D(f[m+M],O[M]);for(m=1;m<w-1;m+=1)m>this.leftMin&&m<w-this.rightMin&&f[m]%2?z.push(E[m]):z[z.length-1]+=E[m];return z};var sn=Ht,N1=sn;var T1={id:"sa",leftmin:2,rightmin:2,patterns:{2:"a1e1i1o1u1Ã©1Ã­1Ã¯1Ã³1Ãº1Ã¼1Ä1Ä«1Å«1á¸·1á¸¹1á¹›1á¹1",3:"2b_2c_2d_2g_2h_2j_2k_2l_2m_2n_2p_2r_2s_2t_2v_2y_2Ã±_2Å›_2á¸_2á¸¥12á¸«12á¸·_2á¹12á¹ƒ12á¹…_2á¹‡_2á¹­_2áº–1lÌ¥1rÌ¥1",4:"2bh_2ch_2dh_2gh_2jh_2kh_2mÌ12ph_2rb_2rd_2rg_2rk_2rp_2rt_2rá¸_2rá¹­_2th_2á¸h_2á¹­h_a2i1a2u1a3Ã¯1a3Ã¼1lÌ¥Ì„1rÌ¥Ì„1"}};window.comboView=function(){let v={teins:"http://www.tei-c.org/ns/1.0",scripts:["iast","devanagari","telugu","grantha","malayalam"]},c={filename:null,xml:null,treelist:new Map,trees:[],textboxes:[],matrix:null,viewdiv:null,descs:null,maxlemma:null,windows:[window],dragged:null,undo:[],redo:[],editing:!1},C=new N1(T1),E=new L1(c,v),m=new B1(c),T=function(r,e,t,i){var o=e,u=t,d=r;i&&(d=d*2,d>=1&&(d-=1,o=t,u=i));let b=u.red-o.red,g=u.green-o.green,A=u.blue-o.blue,B={red:parseInt(Math.floor(o.red+b*d),10),green:parseInt(Math.floor(o.green+g*d),10),blue:parseInt(Math.floor(o.blue+A*d),10)};return"rgb("+B.red+","+B.green+","+B.blue+")"},M=function(){let r=window.getSelection();if(r.isCollapsed)return!1;let e=r.rangeCount>1?r.getRangeAt(1).cloneContents():r.getRangeAt(0).cloneContents();if(!e)return!1;let t=new Set,i=e.querySelectorAll(".lemma");for(let o of i)t.add(o.dataset.n);return t},h=function(){let r=document.getElementById("tooltip");r&&r.remove()},f=function(){let r=document.getElementById("left_menu");r.innerHTML=`<div id="matrixmenu" class="menubox">
    <div class="heading">Matrix</div>
      <ul>
        <li>select CSV/XML file(s): <input type="file" id="file" name="file" accept=".xml,.csv" multiple/></li>
      </ul>
</div>
<div style="display: none" id="mssmenu" class="menubox">
    <div class="heading">Texts</div>
    <ul class="ms">
    </ul>
</div>
<div style="display: none" id="treemenu" class="menubox">
    <div class="heading">Trees</div>
        <ul class="tree">
            <li>select NeXML file: <input type="file" id="treefile" name="treefile" accept=".xml"/></li>
        </ul>
    </div>
`;let e=document.getElementById("menu");e.addEventListener("mouseover",pe.menuMouseover),e.addEventListener("mouseout",pe.menuMouseout),e.addEventListener("click",pe.menuClick),e.querySelector("#file").addEventListener("change",z.bind(null,J),!1),e.querySelector("#treefile").addEventListener("change",z.bind(null,re),!1)},w={matrix:function(){return c.matrix=new ie,c.matrix.init(),c.matrix.show(),document.getElementById("matrixmenu").style.display="none",L(),R.rehighlight(),c.matrix},text:function(r){let e=new W(r);return c.textboxes.push(e),e.init(),e.show(),L(),R.rehighlight(),document.querySelector(".highlit")||pe.textClick({target:e.boxdiv.querySelector(".lemma:not(.invisible)")}),e},tree:function(r,e){let t=new Z(r,e);return c.trees.push(t),t.init(),t.show(),L(),R.rehighlight(),t}},L=function(){for(let r of c.trees)r.draw()},O=function(){let r=window.getSelection?window.getSelection():document.selection;r&&(r.removeAllRanges?r.removeAllRanges():r.empty&&r.empty())},F=function(r){let e=document.createTreeWalker(r,NodeFilter.SHOW_TEXT);for(;e.nextNode();){let t=D(e.currentNode.nodeValue);e.currentNode.nodeValue=t}},D=function(r){return C.hyphenateText(r.replace(/ \|/g,"Â |").replace(/\| (?=\d)/g,"|Â ").replace(/\|\|/g,"à¥¥").replace(/\|/g,"à¥¤"))},R={getAllWindows:function(){return window.mainWindow?window.mainWindow.comboView.getWindows():c.windows},forEachWindow:function(r){let e=R.getAllWindows();for(let t of e)if(!t.closed&&r(t)===!1)break},highlightLemma:function(r,e){var t=!!e;R.forEachWindow(i=>{let o=i.comboView.getViewdiv().querySelectorAll('[data-n="'+r+'"]');for(let d of o)(!t||!d.classList.contains("invisible"))&&d.classList.add("highlit");let u=i.comboView.getViewdiv().querySelectorAll('[data-n-trans="'+r+'"]');for(let d of u)d.classList.add("translit")})},highlightRange:function(r){if(!r||r.size===0)return;R.unHighlightAll();let[e,t]=m.lowhigh(r);if(t!==void 0)for(let i=e;i<=t;i++)R.highlightLemma(i,!0);else R.highlightLemma(e);R.repopulateTrees(e,t);for(let i of c.viewdiv.querySelectorAll(".text-box"))i.querySelector(".highlit")||i.querySelector('[data-n="'+e+'"]').classList.add("highlit");be.xScroll(e)},highlightAll:function(){oe.anyhighlit()?R.unHighlightAll():R.highlightRange(new Set([0,m.maxlemma()]))},unHighlightAll:function(){R.forEachWindow(r=>{let e=r.comboView.getViewdiv().querySelectorAll(".highlit");for(let i of e)i.classList.remove("highlit");let t=r.comboView.getViewdiv().querySelectorAll(".translit");for(let i of t)i.classList.remove("translit");R.unCelllightAll()})},unCelllightAll:function(){R.forEachWindow(r=>{let e=r.comboView.getViewdiv().querySelectorAll(".highlitcell");for(let t of e)t.classList.remove("highlitcell")})},rehighlight:function(){var r;if(R.forEachWindow(t=>{if(r=t.document.querySelectorAll(".highlit"),r.length>0)return!1}),r.length>0){var e=new Set;for(let t of r)e.add(t.dataset.n);R.highlightRange(e)}},clearTrees:function(){R.forEachWindow(r=>{let e=r.comboView.getTrees();for(let t of e)t.clearlemmata()})},repopulateTrees:function(r,e){R.forEachWindow(t=>{let i=t.comboView.getTrees();for(let o of i)o.populate(r,e),o.colourizeVariants(r,e),o.updatescript()})},highlightTreeLemma:function(r){R.forEachWindow(e=>{let t=e.comboView.getTrees();for(let i of t){let o=i.boxdiv.querySelector('.tree-lemma[data-id="'+r+'"]'),u=i.boxdiv.querySelectorAll(".tree-lemma");for(let d of u)(o.dataset.nodes&&d.dataset.nodes===o.dataset.nodes||!o.dataset.nodes&&d.dataset.id===o.dataset.id)&&d.classList.add("highlit");i.clearLabels()}})},unhighlightTrees:function(){R.forEachWindow(r=>{let e=r.comboView.getViewdiv().querySelectorAll(".tree-lemma.highlit");for(let i of e)i.classList.remove("highlit");let t=r.comboView.getTrees();for(let i of t)i.clearLabels()})}},z=function(r,e){let t=e.target.files[0],i=[...e.target.files].slice(1),o=new FileReader;o.onload=r.bind(null,t,i),o.readAsText(t)},J=function(r,e,t){c.filename=r.name,document.title=document.title+`: ${c.filename}`,c.filename.split(".").pop()==="csv"?V(r,e,t):le(r,e,t)},re=function(r,e,t){let i=t.target.result,u=new DOMParser().parseFromString(i,"text/xml"),d=c.xml.querySelector("teiHeader > xenoData")||function(){let g=c.xml.querySelector("teiHeader")||function(){let B=c.xml.createElementNS(v.teins,"teiHeader");return c.xml.documentElement.appendChild(B),B}(),A=c.xml.createElementNS(v.teins,"xenoData");return g.appendChild(A),A}(),b=c.xml.createElementNS(v.teins,"stemma");b.setAttribute("format","nexml"),b.id="stemma"+[...d.querySelectorAll("stemma")].length,b.appendChild(u.firstChild.cloneNode(!0)),d.appendChild(b),$(u,b.id)},$=function(r,e,t=!0){let i=r.querySelectorAll("tree"),o=document.querySelector("#treemenu ul");for(let u of i){let d=u.id,b=r.cloneNode(!0);for(let B of b.querySelectorAll("tree"))B.id!==d&&B.parentNode.removeChild(B);let g=u.getAttribute("label")||"New Tree "+c.treelist.size;c.treelist.set(`#${e} #${d}`,b);let A=document.createElement("li");A.dataset.name=g,A.dataset.treeid=d,A.dataset.stemmaid=e,A.appendChild(document.createTextNode(g)),o.insertBefore(A,o.lastElementChild),t&&w.tree(e,d)}},V=function(r,e,t){let i=Qt.parse(t.target.result,{delimiter:","});c.xml=document.implementation.createDocument(v.teins,"",null);let o=c.xml.createElementNS(v.teins,"teiCorpus"),u=c.xml.createElementNS(v.teins,"teiHeader");o.appendChild(u),c.xml.appendChild(o);for(let d of i){let b=d[0],g=d.slice(1),A=c.xml.createElementNS(v.teins,"TEI");A.setAttribute("n",b);let B=c.xml.createElementNS(v.teins,"text");for(let H=0;H<g.length;H++){let U=g[H],ee=c.xml.createElementNS(v.teins,"w");U&&ee.appendChild(document.createTextNode(U)),ee.setAttribute("n",H),B.appendChild(ee)}A.appendChild(B),o.appendChild(A)}c.xml.normalize(),c.maxlemma=m.maxlemma(),G()},le=function(r,e,t){let i=new DOMParser;c.xml=i.parseFromString(t.target.result,"text/xml");let o=c.xml.querySelectorAll("teiHeader xenoData stemma nexml");for(let u of o){let d=document.implementation.createDocument("http://www.nexml.org/2009","",null);d.appendChild(u.cloneNode(!0)),$(d,u.closest("stemma").id,!1)}c.maxlemma=m.maxlemma(),e.length>0?fe(e):G()},fe=function(r){let e=r[0],t=r.slice(1),i=function(d,b){let g=new Set(d);for(let A of b)g.delete(A);return g},o=function(d,b){let A=new DOMParser().parseFromString(b.target.result,"text/xml"),B=new Map;for(let Ae of m.teis()){let Ne=Ae.getAttribute("n");B.set(Ne,Ae)}let H=new Set(B.keys()),U=new Map;for(let Ae of A.querySelectorAll("TEI")){let Ne=Ae.getAttribute("n");U.set(Ne,Ae)}let ee=new Set(U.keys()),se=i(H,ee),de=i(ee,H);for(let Ae of de)ke.tei(Ae);let ge=[...A.querySelector("text").querySelectorAll("w[n]")].length,we=c.maxlemma+ge;for(let[Ae,Ne]of U)if(B.has(Ae)){let Me=B.get(Ae).querySelector("text"),De=Ne.querySelector("text").querySelectorAll("w[n]");var xe=c.maxlemma+1;for(let qe of De)qe.setAttribute("n",xe),Me.appendChild(qe),xe=xe+1}else{let Me=c.xml.createElementNS(v.teins,"TEI");Me.setAttribute("n",Ae);let Re=c.xml.createElementNS(v.teins,"text");ke.emptywords(Re,we,0),Me.appendChild(Re),c.xml.documentElement.appendChild(Me)}for(let Ae of se){let Ne=B.get(Ae).querySelector("text");ke.emptywords(Ne,we,c.maxlemma+1)}c.maxlemma=m.maxlemma(),d.length>0?fe(d):G()},u=new FileReader;u.onload=o.bind(null,t),u.readAsText(e)},ye=function(){var r="";let e=[...m.teis()].map(t=>t.getAttribute("n"));for(let t of e)r+=`<li data-name="${t}">${t}</li>`;document.getElementById("menu").querySelector(".ms").innerHTML=r},G=function(){ye();let r=new Ce("Export");r.populate([{text:"TEI corpus",func:me.showOptions.bind(null,me.xml,me.options)},{text:"TEI apparatus",func:me.showOptions.bind(null,me.xml,me.appOptions)},{text:"CSV",func:me.showOptions.bind(null,me.csv,me.options)},{text:"NEXUS",func:me.showOptions.bind(null,me.nexus,me.options)}]);let e=new Ce("Edit");e.populate([{text:"Undo",greyout:oe.undo,func:I.undo},{text:"Redo",greyout:oe.redo,func:I.redo},{text:"Select all",alt:"Deselect all",toggle:oe.anyhighlit,func:R.highlightAll},{text:"(Re)normalize columns",greyout:oe.anyhighlit,func:I.startRenormalize.bind(null,!1)},{text:"Delete column",greyout:oe.anyhighlit,func:I.startRemoveCol.bind(null,!1)},{text:"Delete empty columns",func:I.startRemoveEmpty},{text:"Merge columns",greyout:oe.manyhighlit,func:I.startMerge.bind(null,!1)},{text:"Group columns",alt:"Ungroup columns",greyout:oe.oneGrouped,toggle:oe.grouped,func:I.startGroup.bind(null,!1)},{text:"Group words",func:I.doGroupWords},{text:"Edit cell",greyout:oe.highlitcell,func:I.startEditCell.bind(null,!1)},{text:"Insert row",func:I.startNewRow},{text:"Insert column",greyout:oe.anyhighlit,func:I.startInsertCol},{text:"Mark insignificant",checkbox:oe.checkbox.bind(null,"insignificant",!1),greyout:oe.anyhighlit,func:I.startMarkAs.bind(null,"insignificant",!1)},{text:"Mark binary",checkbox:oe.checkbox.bind(null,"binary",!1),greyout:oe.anyhighlit,func:I.startMarkAs.bind(null,"binary",!1)}]);let t=new Ce("View");t.populate([{text:"Header",checkbox:oe.headerView,func:be.toggleHeader},{text:"Normalized",checkbox:oe.normalizedView,greyout:oe.anyNormalized,func:be.toggleNormalize}]);let i=document.getElementById("left_menu");i.appendChild(t.box),i.appendChild(e.box),i.appendChild(r.box);let o=document.getElementById("views");o.style.justifyContent="flex-start",o.removeChild(o.querySelector("#splash")),w.matrix();let u=document.getElementById("matrixmenu");u.addEventListener("click",w.matrix),u.removeChild(u.querySelector("ul")),document.getElementById("mssmenu").style.display="block",document.getElementById("treemenu").style.display="block"},me={write:async function(r,e){let t=await e.createWritable();t.write(r),t.close()},xml:async function(r){let e=new XMLSerializer().serializeToString(E.sheets.xml.transformToDocument(r)),t=new Blob([e],{type:"text/xml;charset=utf-8"}),i=m.basename()+".xml",o=await Kt({_preferPolyfill:!1,suggestedName:i,types:[{description:"TEI XML",accept:{"text/xml":[".xml"]}}]});me.write(t,o)},csv:async function(r){let e=E.sheets.csv.transformToDocument(r).documentElement.textContent,t=new Blob([e],{type:"text/csv;charset=utf-8"}),i=m.basename()+".csv",o=await Kt({_preferPolyfill:!1,suggestedName:i,types:[{description:"CSV file",accept:{"text/csv":[".csv"]}}]});me.write(t,o)},nexus:async function(r){let e=[...m.texts(r)],t=e.length,i="0 1 2 3 4 5 6 7 8 9 A B C D E F G H K L M N P Q R S T U V W X Y Z a b c d e f g h k l m n p q r s t u v w x y z",[o,...u]=i.split(" "),d="-",b=e.map(xe=>"'"+xe.parentElement.getAttribute("n")+"'"),g=e.map(xe=>m.textWalker(xe)),A=e[0].querySelectorAll("w").length,B=[],H=b.map(xe=>[xe+" "]);for(let xe=0;xe<A;xe++){let Ae=new Set,Ne=[];for(let Re=0;Re<g.length;Re++){let qe=g[Re].nextNode(),Fe=ze.t(qe.textContent.trim().toLowerCase(),"iast","hk").replace(/'/g,"()");Ne.push(Fe),Fe!==""&&Fe!=="[]"&&Ae.add(Fe)}B.push(["[]",...Ae]);let Me=new Map([...Ae].map((Re,De)=>[Re,u[De]]));for(let Re=0;Re<Ne.length;Re++){let De=(qe=>{switch(Ne[qe]){case"":return d;case"[]":return o;default:return Me.get(Ne[qe])}})(Re);H[Re].push(De)}}let U=B.map((xe,Ae)=>Ae+1+" / "+[...xe].map(Ne=>`'${Ne}'`).join(" ")).join(`,
`),ee=H.map(xe=>xe.join("")).map(xe=>xe.replace(/0{8,}/g,Ae=>Ae.replace(/0/g,"-"))).reduce((xe,Ae)=>xe+`
`+Ae),se=`#NEXUS

BEGIN TAXA;
  DIMENSIONS NTAX=${t};
  TAXLABELS ${b.join(" ")};
END;

BEGIN CHARACTERS;
  DIMENSIONS
    NCHAR=${A};
  FORMAT 
    DATATYPE=STANDARD 
    RESPECTCASE 
    GAP=${d} 
    MISSING=? 
    SYMBOLS="${i}";
  CHARSTATELABELS
${U}
;
MATRIX
${ee}
;
END;
`,de=new Blob([se],{type:"text/nexus;charset=iso8859-1"}),ge=m.basename()+".nex",we=await Kt({_preferPolyfill:!1,suggestedName:ge,types:[{description:"NEXUS file",accept:{"text/nexus":[".nex"]}}]});me.write(de,we)},processOptions:function(r){let e=c.xml.cloneNode(!0);if(r.get("option_normalize")){let t=e.querySelectorAll("w[lemma]");for(let i of t)i.textContent=i.getAttribute("lemma")}if(r.get("option_mergegroups")){let t=e.querySelectorAll("cl");for(let i of t){let o=i.removeChild(i.firstChild);for(;i.firstChild;){let u=o.getAttribute("lemma")||o.textContent,d=i.firstChild.getAttribute("lemma")||i.firstChild.textContent;for(o.setAttribute("lemma",u+d);i.firstChild.firstChild;)o.appendChild(i.firstChild.firstChild);i.firstChild.remove()}o.getAttribute("lemma")===o.textContent&&o.removeAttribute("lemma"),i.parentNode.insertBefore(o,i),i.parentNode.removeChild(i)}}if(r.get("option_insignificant")){let t=e.querySelectorAll('w[insignificant="true"]');for(let i of t)i.parentNode.removeChild(i)}if(r.get("option_binary")){let i=[...m.firsttext().querySelectorAll('w[binary="true"]')].map(o=>o.getAttribute("n"));for(let o of i){let u=e.querySelectorAll(`w[n="${o}"]:not(:empty)`);if(u.length===0)continue;let d=`[${u[0].textContent}]`;for(let b of u)b.textContent=d}}if(r.get("option_noempty")){let t=e.querySelectorAll("w:empty");for(let i of t)i.textContent="[]"}return r.get("option_basetext")?me.makeApp(r,e):e},makeHeader(r,e){let t=r.createElementNS(v.teins,"teiHeader"),i=r.createElementNS(v.teins,"fileDesc"),o=r.createElementNS(v.teins,"sourceDesc"),u=r.createElementNS(v.teins,"listWit");for(let d of m.teis(e)){let b=d.getAttribute("n"),g=r.createElementNS(v.teins,"witness");g.setAttribute("xml:id",b);let A=r.createElementNS(v.teins,"idno");A.setAttribute("type","siglum"),A.append(b),g.appendChild(A),u.appendChild(g)}return o.appendChild(u),i.appendChild(o),t.appendChild(i),t},makeApp(r,e){let t=r.get("option_basetext"),i=m.tei(t,e),o=r.get("option_app_normalize"),u=document.implementation.createDocument(v.teins,"",null);u.appendChild(i);let d=me.makeHeader(u,e);i.insertBefore(d,i.firstChild);let b=m.words(!1,i);for(let g of b){let A=g.getAttribute("n"),B=o&&g.getAttribute("lemma")||g.textContent,H=[],U=new Map,ee=m.words(A,e);for(let se of ee){let de=se.closest("TEI").getAttribute("n");if(o&&se.getAttribute("lemma")===B)H.push(de);else if(se.textContent===B)H.push(de);else{let ge=se.textContent===""?"[om.]":se.textContent,we=U.get(ge)||[];we.push(de),U.set(ge,we)}}if(U.size===0)for(;g.firstChild;)g.parentElement.insertBefore(g.firstChild,g);else{let se=u.createElementNS(v.teins,"app");se.setAttribute("n",A);let de=u.createElementNS(v.teins,"lem"),ge=H.map(we=>`#${we}`).join(" ");for(ge!==""&&de.setAttribute("wit",ge);g.firstChild;)de.appendChild(g.firstChild);se.appendChild(de);for(let[we,xe]of U){let Ae=u.createElementNS(v.teins,"rdg"),Ne=xe.map(Me=>`#${Me}`).join(" ");Ae.setAttribute("wit",Ne),Ae.append(we),se.appendChild(Ae)}g.parentElement.insertBefore(se,g),de.textContent.match(/\s$/)&&g.parentElement.insertBefore(u.createTextNode(" "),g)}g.remove()}return u},options(){return document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <input type="checkbox" id="option_insignificant" name="option_insignificant"><label for="option_insignificant">Remove insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_binary" name="option_binary"><label for="option_binary">Binarize marked lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_noempty" name="option_noempty"><label for="option_noempty">Gaps are significant</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups"><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`)},appOptions(){let r=document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <label for="option__basetext">Base text</label>
        <select id="option__basetext" name="option_basetext"></select>
      </div>
      <div>
        <input type="checkbox" id="option__app_insignificant" name="option_app_insignificant"><label for="option_app_insignificant">Ignore insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups" checked><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_app_normalize" name="option_app_normalize" checked><label for="option_app_normalize">Normalized spellings in positive apparatus</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings in negative apparatus</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`),e=r.getElementById("option__basetext"),t=[...m.trs()].map(i=>i.dataset.n);for(let i of t){let o=document.createElement("option");o.value=i,o.append(i),e.appendChild(o)}return r},showOptions:function(r,e){let t=e(),i=document.createElement("div");i.id="blackout",i.appendChild(t),document.body.appendChild(i);let o=function(d){d.preventDefault();var b=[];let g=document.getElementById("exportform").elements;for(let B of g)B.type==="checkbox"?b.push([B.name,B.checked]):b.push([B.name,B.value]);let A=me.processOptions(new Map(b));r(A),document.body.removeChild(i)};return i.querySelector("button").addEventListener("click",o),i.addEventListener("click",me.blackoutClick),i},blackoutClick:function(r){if(!r.target.closest(".popup")){let t=document.querySelector("#blackout");t.parentNode.removeChild(t)}}},pe={selectAll(r){let e=document.createRange();e.selectNodeContents(r);let t=window.getSelection();t.removeAllRanges(),t.addRange(e)},deselect(){let r=window.getSelection();r.removeAllRanges?r.removeAllRanges():r.empty&&r.empty()},treeMouseover(r){let e=r.target.classList.contains("tree-lemma")?r.target:r.target.closest(".tree-lemma");e&&(R.highlightTreeLemma(e.dataset.id),e.addEventListener("mouseout",R.unhighlightTrees));let t=r.target.dataset.reconstructed;if(!t)return;let i=document.createElement("div");i.id="tooltip",i.style.top=r.pageY+"px",i.style.left=r.pageX+"px",i.style.opacity=0,i.style.transition="opacity 0.2s ease-in",c.viewdiv.parentElement.appendChild(i);let o=document.createElement("div");if(o.appendChild(document.createTextNode(t)),this.script!==0?i.appendChild(Ot(o,v.scripts[this.script])):i.appendChild(o),r.target.classList.contains("reconstructed")){let u=r.target.parentNode.querySelector("span.tree-lemma");if(u&&u.dataset.hasOwnProperty("emended")){let d=document.createElement("div");d.classList.add("emphasis"),d.appendChild(document.createTextNode(u.textContent)),this.script!==0?i.prepend(Ot(d,v.scripts[this.script])):i.prepend(d)}}window.getComputedStyle(i).opacity,i.style.opacity=1,r.target.addEventListener("mouseout",h)},treeClick(r){r.target.classList.contains("witness")?w.text(r.target.dataset.key):r.target.classList.contains("reconstructed")?w.text(r.target.dataset.label):r.target.classList.contains("internal")&&I.startReconstruction(r),h()},keyDown(r){if(!c.editing&&r.key.substring(0,5)==="Arrow")pe.cycleVariant(r);else if(r.ctrlKey||r.metaKey)r.key==="Z"?I.redo():r.key==="z"&&I.undo();else if(!c.editing&&c.matrix&&!c.matrix.closed&r.key==="Enter"){let e=m.highlitcell();e&&(r.preventDefault(),I.startEditCell(e))}},cycleVariant(r){let e=m.highlitcell()||c.viewdiv.querySelector("td.highlit")||c.viewdiv.querySelector('td[data-n="0"]');switch(r.key){case"ArrowRight":{if(!c.matrix.closed&&e){let t=e.nextElementSibling;t&&pe.textClick({target:t})}else{let t=c.viewdiv.querySelector(".highlit"),i=t?t.dataset.n:0,o=parseInt(i)+1;for(;o<=c.maxlemma;){let u=c.viewdiv.querySelectorAll('[data-n="'+o+'"]');for(let d of u)if(d&&!d.classList.contains("invisible")){pe.textClick({target:d});return}o++}}break}case"ArrowLeft":{if(!c.matrix.closed&&e){let t=e.previousElementSibling;t&&pe.textClick({target:t})}else{let t=c.viewdiv.querySelector(".highlit"),i=t?t.dataset.n:0,o=parseInt(i)-1;for(;o>=0;){let u=c.viewdiv.querySelectorAll('[data-n="'+o+'"]');for(let d of u)if(d&&!d.classList.contains("invisible")){pe.textClick({target:d});return}if(o--,e){pe.textClick({target:e.previousElementSibling});return}}}break}case"ArrowUp":{if(c.matrix.closed||!e)return;let i=e.closest("tr").previousElementSibling;if(!i||!i.dataset.n)return;let o=i.querySelector(`td[data-n="${e.dataset.n}"]`);pe.textClick({target:o});break}case"ArrowDown":{if(c.matrix.closed||!e)return;let i=e.closest("tr").nextElementSibling;if(!i||i.tagName!=="TR")return;let o=i.querySelector(`td[data-n="${e.dataset.n}"]`);pe.textClick({target:o})}}},textClick(r,e=!1){if(r.target.closest("tr.header")){pe.matrixHeaderClick(r);return}let t=r.target.classList.contains("lemma")?r.target:r.target.closest(".lemma");if(t){if(!e&&r.ctrlKey){pe.rightClick(r);return}let i=t.dataset.n,o=m.highlitrow();if(R.unHighlightAll(),R.highlightLemma(i),R.repopulateTrees(i),be.xScroll(i,o),t.tagName==="TD")t.classList.add("highlitcell");else{let u=t.closest(".text-box");if(u){let d=u.dataset.id;m.tr(d).querySelector(`td[data-n="${i}"]`).classList.add("highlitcell")}}}},textMouseup(){let r=M();R.highlightRange(r),O()},menuMouseover(r){let e=r.target.classList.contains("menubox")?r.target:r.target.closest(".menubox");if(e){let t=e.querySelector("ul");t&&(t.style.display="block"),e.classList.add("open")}},menuMouseout(r){let e=r.target.classList.contains("menubox")?r.target:r.target.closest(".menubox");if(e){let t=e.querySelector("ul");t&&(t.style.display="none"),e.classList.remove("open")}},menuClick(r){!r.target.parentElement||(r.target.parentElement.className==="ms"&&(pe.menuMouseout(r),w.text(r.target.dataset.name)),r.target.parentElement.className==="tree"&&(pe.menuMouseout(r),r.target.closest("li[data-name]")&&w.tree(r.target.dataset.stemmaid,r.target.dataset.treeid)))},thDragStart(r){r.dataTransfer.setData("text/plain",r.target.textContent),I.startMoveRow(r.target.parentNode,r)},trDragEnter(r){let e=r.target.nodeType===1?r.target.closest("tr"):r.target.parentElement.closest("tr");e&&e.classList.add("dragenter")},trDragLeave(r){let e=r.target.nodeType===1?r.target.closest("tr"):r.target.parentElement.closest("tr");e&&e.classList.remove("dragenter")},trDragDrop(r){r.preventDefault(),I.finishMoveRow(r)},matrixMousedown(r){if(r.button!==0)return;if(r.ctrlKey){pe.rightClick(r);return}let e=r.target.nodeType===1?r.target.closest(".lemma"):r.target.parentElement.closest(".lemma");if(e){if(e.isContentEditable)return;R.unHighlightAll(),R.highlightLemma(e.dataset.n);let t=c.matrix.boxdiv.querySelector("table");t.addEventListener("mouseover",pe.matrixMouseover),t.addEventListener("mouseup",pe.matrixMouseup)}},matrixMouseup(){let r=m.highlit();R.highlightRange(r);let e=c.matrix.boxdiv.querySelector("table");e.removeEventListener("mouseover",pe.matrixMouseover),e.removeEventListener("mouseup",pe.matrixMouseup)},matrixMouseover(r){let e=r.target.nodeType===1?r.target.closest(".lemma"):r.target.parentElement.closest(".lemma");e&&R.highlightLemma(e.dataset.n)},matrixHeaderClick(r){if(r.target.tagName!=="INPUT")return;let e=r.target.className;if(e!=="insignificant"&&e!=="binary")return;let t=r.target.closest("th").dataset.ref,i=m.firsttd(t).dataset[e]!=="true",o=new Map([[t,i]]);I.doMarkAs(e,o)},rightClick(r){let e=r.target.nodeType===1?r.target.closest("tr[data-n] th"):r.target.parentElement.closest("tr[data-n] th");if(e){r.preventDefault(),j.remove();let i=j.create(r),o=[{text:"move row",func:I.startMoveRow.bind(null,e.parentNode)},{text:"delete row",func:I.doDeleteRow.bind(null,e.parentNode.dataset.n)}];j.populate(i,o),j.show(i);return}let t=r.target.nodeType===1?r.target.closest("td.lemma"):r.target.parentElement.closest("td.lemma");if(t){r.preventDefault();let i=t.classList.contains("highlit")?function(){let d=m.highlit();return d.size===1&&!t.classList.contains("highlitcell")&&(R.unCelllightAll(),t.classList.add("highlitcell")),d}():(pe.textClick(r,!0),new Set([t.dataset.n])),o=i.size>1?[{text:"merge columns",func:I.startMerge.bind(null,i)},{text:"ungroup columns",alt:"group columns",toggle:oe.grouped,func:I.startGroup.bind(null,!1)},{text:"delete columns",func:I.startRemoveCol.bind(null,i)}]:[{text:"edit cell",func:I.startEditCell.bind(null,t)},{text:"delete column",func:I.startRemoveCol.bind(null,i)},{text:"insert column",func:I.startInsertCol}];j.remove();let u=j.create(r);j.populate(u,o),j.show(u)}}},I={undo:function(){let r=c.undo.pop();r&&r[0](...r[1])},redo:function(){let r=c.redo.pop();r&&r[0](...r[1])},doStack:function(r,e="do"){e==="undo"?(r[1].push("redo"),c.redo.push(r)):e==="redo"?(r[1].push("undo"),c.undo.push(r)):(r[1].push("undo"),c.undo.push(r),c.redo=[])},doMulti:function(r,e){let t=[];for(let i of r){let o=i[0](...i[1],"multido");t.unshift(o)}I.doStack([I.doMulti,[t]],e)},startMoveRow:function(r,e){if(c.dragged=r,c.dragged.classList.add("dragging"),e.type!=="dragstart"){for(let t of m.trs())t.classList.add("moveinprogress");c.matrix.boxdiv.querySelector("table").addEventListener("mousedown",I.finishMoveRow)}},startMerge:function(r){let e=r===!1?m.highlit():r,t=m.clauses(e,!0);if(!t)I.doMerge(e,"do");else if(t[0]===null){let i=t.filter(o=>o!==null).map(o=>[I.doUngroup,[o]]).concat([[I.doMerge,[e]]]);I.doMulti(i,"do")}else{let i=m.clausesToRemove(t,e);if(!i)I.doMerge(e,"do");else{let o=i.map(u=>[I.doUngroup,[u]]).concat([[I.doMerge,[e]]]);I.doMulti(o,"do")}}},startGroup:function(r){let e=r===!1?m.highlit():r;oe.grouped()?I.startUngroup(e):I.doGroup(e,"do")},startUngroup:function(r){let t=[...m.clauses(r)].map(i=>[I.doUngroup,[i]]);I.doMulti(t,"do")},startInsertCol:function(){let r=Math.max([...m.highlit()])||c.maxlemma;I.doInsertCol(r)},startRemoveCol:function(r){let e=r===!1?m.highlit():r,t=m.clauses(e);if(!t)I.doRemoveCol(e,"do");else{let i=m.clausesToRemove(t,e,1);if(!i)I.doRemoveCol(e,"do");else{let o=i.map(u=>[I.doUngroup,[u]]).concat([[I.doRemoveCol,[e]]]);I.doMulti(o,"do")}}},startRemoveEmpty:function(){let r=m.empty(),e=m.clauses(r);if(!e)I.doRemoveCol(r,"do");else{let t=m.clausesToRemove(e,r,1);if(!t)I.doRemoveCol(r,"do");else{let i=t.map(o=>[I.doUngroup,[o]]).concat([[I.doRemoveCol,[r]]]);I.doMulti(i,"do")}}},startEditCell:function(r){let e=r||m.highlitcell();!e||(I.unnormalize(e),e.dataset.oldContent=e.textContent,e.contentEditable="true",e.focus(),c.editing=!0,pe.selectAll(e),e.addEventListener("blur",I.finishEditCell),e.addEventListener("keydown",I.cellKeyDown))},cellKeyDown:function(r){switch(r.key){case"Enter":I.finishEditCell(r);break;case"Escape":I.finishEditCell(r,!0);break;case"ArrowRight":{let e=m.cursorPos(r.target);e[0]===e[1]&&(r.preventDefault(),I.finishEditCell(r),pe.cycleVariant({key:"ArrowRight"}),I.startEditCell(m.highlitcell()));break}case"ArrowLeft":{m.cursorPos(r.target)[0]===0&&(r.preventDefault(),I.finishEditCell(r),pe.cycleVariant({key:"ArrowLeft"}),I.startEditCell(m.highlitcell()));break}}},startMarkAs:function(r,e,t){let i=t.target.tagName==="INPUT"?t.target:t.target.querySelector("input"),o=e===!1?m.highlit():e,u=new Map([...o].map(d=>[d,!i.checked]));I.doMarkAs(r,u)},startNewRow:function(){let r=ke.row("new row"),e=r.querySelector("th");e.contentEditable=!0,e.addEventListener("blur",I.finishNewRow),e.addEventListener("keydown",I.thKeyDown),c.matrix.boxdiv.querySelector("tbody").appendChild(r),e.scrollIntoView(),e.focus(),document.execCommand("selectAll",!1,null),c.editing=!0},startRenameRow:function(){},startReconstruction:function(r){let e=r.target.dataset.key,t=r.target.closest(".tree-box").myTree,i=t.desc,o=document.createElement("div");o.id="blackout";let u=document.createRange().createContextualFragment(`<div id="reconstructionoptions" class="popup">
    <form id="reconstructionform">
      <div>
        <label for="reconstructed_node_name">Label for node:</label>
        <input type="text" id="reconstructed_node_name" name="reconstructed_node_name" placeholder="${i}-${e}" size="15">
      </div>
      <div style="width: 100%; display: flex; justify-content: center;padding-top: 1em;">
        <button type="submit">Add to matrix</button>
      </div>
    </form>
</div>`);o.appendChild(u),document.body.appendChild(o);let d=function(g){g.preventDefault();let A=o.querySelector("input"),B=A.value?A.value:A.placeholder;I.doReconstruction(t,e,B),document.body.removeChild(o)};o.querySelector("button").addEventListener("click",d),o.addEventListener("click",me.blackoutClick)},thKeyDown:function(r){r.key==="Enter"&&I.finishNewRow(r)},finishNewRow:function(r){let e=r.target,t=e.textContent;e.closest("tr").dataset.n=t;let i=ke.tei(t);c.xml.documentElement.appendChild(i),c.editing=!1,e.contentEditable=!1,e.removeEventListener("blur",I.finishNewRow),e.removeEventListener("keydown",I.thKeyDown),I.doStack([I.doDeleteRow,[t]],"do")},finishEditCell:function(r,e=!1){let t=r.target;c.editing=!1,t.contentEditable="false",t.removeEventListener("blur",I.finishEditCell),t.removeEventListener("keydown",I.cellKeyDown),t.blur(),pe.deselect();let i=t.textContent;if(i===""){let b=t.querySelector("br");b&&b.remove()}if(e||i===t.dataset.oldContent)return;t.hasOwnProperty("IAST")||(t.IAST=t.cloneNode(!0)),t.IAST.textContent=i;let o=parseInt(t.dataset.n),u=t.closest("tr"),d=u.dataset.n;if(I.xmlChangeCell(o,d,i),u.dataset.hasOwnProperty("treename")&&!t.dataset.hasOwnProperty("emended")){let b=I.doEmend(o,d,"multido"),g=[];g.push([I.doChangeCell,[o,d,t.dataset.oldContent]]),g.push(b),I.doStack([I.doMulti,[g]],"do")}else I.doStack([I.doChangeCell,[o,d,t.dataset.oldContent]],"do");delete t.dataset.oldContent,I.refresh(),be.updateAllHeaders(!0),t.classList.add("highlitcell")},finishMoveRow:function(r){let e=r.target.nodeType===1?r.target.closest("tr"):r.target.parentElement.closest("tr");if(e&&I.doMoveRow(c.dragged,e,"do"),r.type!=="drop"){for(let t of m.trs())t.classList.remove("moveinprogress");c.matrix.boxdiv.querySelector("table").removeEventListener("mousedown",I.finishMoveRow)}else for(let t of m.trs())t.classList.remove("dragenter");c.dragged.classList.remove("dragging"),c.dragged=null},doReconstruction:function(r,e,t){let i=ke.row(t,"pending");i.dataset.treename=r.name,i.dataset.nodename=e;let o=i.querySelector("th"),u=document.createElement("div");u.id="spinner",o.prepend(u);let d=ke.tei(t);d.setAttribute("type","reconstructed"),d.setAttribute("corresp",r.name),d.setAttribute("select",`#${e}`);let b=[...m.tds(!1,i)],g=[...m.words(!1,d)];c.matrix.boxdiv.querySelector("tbody").appendChild(i),o.scrollIntoView();let A=new Blob(["("+Pe.fitch.toString()+")()"],{type:"application/javascript"}),B=new Worker(window.URL.createObjectURL(A)),H=oe.normalizedView(),U=m.serializedtexts(r.nexml,H),ee=m.serializedlevels(r.levels,H);B.postMessage({readings:U,levels:ee,num:0,id:e}),B.onmessage=function(se){let de=se.data.n,ge=se.data.result;if(b[de].textContent=ge,b[de].IAST=b[de].cloneNode(!0),b[de].classList.remove("pending"),g[de].textContent=ge,de<c.maxlemma)B.postMessage({readings:U,levels:ee,num:de+1,id:e});else{o.removeChild(u),c.xml.documentElement.appendChild(d),be.updateAllHeaders(),r.draw();let we=m.highlit();we.size>0&&R.repopulateTrees(...m.lowhigh(we));let xe=document.getElementById("menu").querySelector(".ms"),Ae=document.createElement("li");Ae.setAttribute("data-name",t),Ae.appendChild(document.createTextNode(t)),xe.appendChild(Ae),I.doStack([I.doDeleteRow,[t]],"do")}}},doDeleteRow:function(r,e="do"){let t=m.tr(r),i=m.tei(r),u=[...m.teis()].indexOf(i);t.parentNode.removeChild(t),i.parentNode.removeChild(i),be.updateAllHeaders(),ye(),L(),I.doStack([I.doUndeleteRow,[t,i,u]],e)},doUndeleteRow:function(r,e,t,i="do"){let o=e.getAttribute("n"),u=[...m.teis()];if(t===u.length)c.xml.documentElement.appendChild(e),c.matrix.boxdiv.querySelector("tbody").appendChild(r);else{let d=[...m.trs()];c.xml.documentElement.insertBefore(e,u[t]),d[t].parentNode.insertBefore(r,d[t])}be.updateAllHeaders(),ye(),L(),I.doStack([I.doDeleteRow,[o]],i)},doMoveRow:function(r,e,t="do"){let i=r.parentNode,o=[...m.trs()],u=r.previousElementSibling,d=o.indexOf(r),b=e!==null?o.indexOf(e):null,g=function(){e===null?i.insertBefore(r,i.firstChild):e.nextElementSibling?i.insertBefore(r,e.nextElementSibling):i.appendChild(r)},A=function(){let B=c.xml.documentElement,H=[...m.teis()],U=H[d];if(b===null)B.insertBefore(U,H[0]);else{let ee=H[b];ee.nextElementSibling?B.insertBefore(U,ee.nextElementSibling):B.appendChild(U)}};if(g(),A(),t==="multido")return[I.doMoveRow,[r,u]];I.doStack([I.doMoveRow,[r,u]],t)},doMerge:function(r,e="do"){let t=function(d,b,g){let A=d();var B=[];for(let H of A){let U=[...g].map(de=>b(de,H)),ee=U.map(de=>de.cloneNode(!0));B.push(ee);for(let de of U)I.unnormalize(de);let se=U.reduce(function(de,ge){if(ge.hasChildNodes())for(;ge.firstChild;)de.appendChild(ge.firstChild);return ge.parentNode.removeChild(ge),de});se.normalize(),se.dataset?(delete se.dataset.normal,se.IAST=se.cloneNode(!0)):se.removeAttribute("lemma")}return[d,b,B]},i=t(m.trs,m.firsttd,r),o=t(m.texts,m.firstword,r),u=parseInt([...r][0]);if(I.renumber(u),I.restyleGroups(r),I.refresh(),be.updateAllHeaders(),e==="multido")return[I.doUnmerge,[i,o]];I.doStack([I.doUnmerge,[i,o]],e)},doUnmerge:function(r,e,t="undo"){let i=function(b,g,A){let B=m.whichattr(A[0][0]),H=A[0].map(de=>de.getAttribute(B)),U=H[0],ee=b();for(var se=0;se<ee.length;se++){let de=A[se].pop(),ge=g(U,ee[se]);ge.parentNode.replaceChild(de,ge);for(let we of A[se])de.parentNode.insertBefore(we,de)}return H};i(...r);let o=i(...e),d=[...o].sort((b,g)=>parseInt(b)-parseInt(g))[0];if(I.renumber(d),I.reIAST(o),I.refresh(),I.restyleGroups(o),be.updateAllHeaders(),t==="multido")return[I.doMerge,[o]];I.doStack([I.doMerge,[o]],t)},doGroup:function(r,e="do"){let t=[...r],i=t.shift(),o=m.texts();for(let d of o){let b=document.createElementNS("http://www.tei-c.org/ns/1.0","cl"),g=m.firstword(i,d);g.parentNode.insertBefore(b,g),b.appendChild(g);for(let A of r)b.appendChild(m.firstword(A,d))}let u=t.pop();for(let d of m.tds(i))d.classList.add("group-start");for(let d of m.tds(u))d.classList.add("group-end");for(let d of t)for(let b of m.tds(d))b.classList.add("group-internal");for(let d of c.textboxes)d.refresh();if(e==="multido")return[I.doUngroup,[r]];I.doStack([I.doUngroup,[r]],e)},doUngroup:function(r,e="do"){let t=m.texts();for(let o of t){let u;for(let d of r){let b=m.firstword(d,o);u||(u=b.closest("cl")),u.parentNode.insertBefore(b,u)}u.parentNode.removeChild(u)}let i=[...r].map(o=>[...m.tds(o)]).reduce((o,u)=>o.concat(u),[]);for(let o of i)o.classList.remove("group-start","group-internal","group-end");for(let o of c.textboxes)o.refresh();if(e==="multido")return[I.doGroup,[r]];I.doStack([I.doGroup,[r]],e)},doGroupWords:function(){let r=0,e=[];for(let t=0;t<=c.maxlemma;t++){let i=m.tds(t),o=i[0].classList;if(o.contains("group-start")||o.contains("group-internal")||o.contains("group-end")){r=t+1;continue}let u=i.length,d=0;if(t===c.maxlemma)d=u;else for(let b of i)(b.IAST?b.IAST.textContent:b.textContent).slice(-1)===" "&&d++;if(d/u>=.5)if(r===t){r++;continue}else{let b=m.range(r,t);e.push([I.doGroup,[b]]),r=t+1}}I.doMulti(e)},doRemoveCol:function(r,e="do"){let t=function(b,g,A){let B=b();var H=[];for(let U of B){let ee=[...A].map(de=>{let ge=g(de,U);return I.unnormalize(ge),ge}),se=ee.map(de=>de.cloneNode(!0));H.push(se);for(let de of ee)de.parentNode.removeChild(de)}return[b,g,H]},i=t(m.trs,m.firsttd,r),o=t(m.texts,m.firstword,r),u=[...r].sort((b,g)=>parseInt(b)-parseInt(g)),d=parseInt([...u][0])-1;if(I.renumber(d),I.refresh(),I.restyleGroups(r,!0),be.updateAllHeaders(),e==="multido")return[I.doUnremoveCol,[i,o]];I.doStack([I.doUnremoveCol,[i,o]],e)},doUnremoveCol:function(r,e,t){let i=function(g,A,B){let H=m.whichattr(B[0][0]),U=B[0].map(ge=>ge.getAttribute(H)),ee=U[0],se=g();for(var de=0;de<se.length;de++){let ge=A(ee,se[de]);for(let we of B[de])ge.parentNode.insertBefore(we,ge)}return U};i(...r);let o=i(...e),u=[...o].sort((g,A)=>parseInt(g)-parseInt(A)),d=parseInt(u[0])-1;I.renumber(d);let b=document.querySelectorAll(".highlitcell");for(let g of b)g.classList.remove("highlitcell");if(I.reIAST(o),I.refresh(),I.restyleGroups(o,!0),be.updateAllHeaders(),t==="multido")return[I.doRemoveCol,[o]];I.doStack([I.doRemoveCol,[o]],t)},doInsertCol:function(r,e="do"){let t=function(o,u,d,b){let g=o();for(let A of g){let B=u(b,A),H=d(b+1);B.insertAdjacentElement("afterend",H)}};t(m.trs,m.firsttd,ke.emptycell,r),t(m.texts,m.firstword,ke.emptyword,r),I.renumber(r),I.refresh(),I.restyleGroups([r,r+1],!0),be.updateAllHeaders();let i=[r+1];if(e==="multido")return[I.doRemoveCol,[i]];I.doStack([I.doRemoveCol,[i]],e)},doEmend:function(r,e,t="do"){let i=[...m.trs()][e],o=m.firsttd(r,i);o.dataset.emended=!0;let u=m.tei(e).querySelector("text");if(m.firstword(r,u).setAttribute("emended","true"),t==="multido")return[I.doUnemend,[r,e]];I.doStack([I.doUnemend,[r,e]],t)},doUnemend:function(r,e,t="do"){let i=[...m.trs()][e],o=m.firsttd(r,i);delete o.dataset.emended;let u=m.tei(e).querySelector("text");if(m.firstword(r,u).removeAttribute("emended"),t==="multido")return[I.doEmend,[r,e]];I.doStack([I.doEmend,[r,e]],t)},doChangeCell:function(r,e,t,i="do"){let o=I.xmlChangeCell(r,e,t),u=I.htmlChangeCell(r,e,t);if(I.refresh(),be.updateAllHeaders(!0),pe.textClick({target:u}),i==="multido")return[I.doChangeCell,[r,e,o]];I.doStack([I.doChangeCell,[r,e,o]],i)},htmlChangeCell:function(r,e,t){let i=m.tr(e),o=m.firsttd(r,i);return I.unnormalize(o),o.textContent=t,o.IAST&&(o.IAST=o.cloneNode(!0)),o},xmlChangeCell:function(r,e,t){let i=m.tei(e).querySelector("text"),o=m.firstword(r,i);I.unnormalize(o);let u=o.textContent;return o.childNodes.length===0?o.appendChild(document.createTextNode(t)):o.textContent=t,u},doMarkAs:function(r,e,t="do"){let i=[...e.keys()],o=m.attr(r,i);for(let u of i){let d=m.tds(u),b=m.words(u);if(e.get(u)===!0){for(let A of d)A.dataset[r]="true";for(let A of b)A.setAttribute(r,"true")}else{for(let A of d)delete A.dataset[r];for(let A of b)A.removeAttribute(r)}let g=m.checkbox(u,r);g.checked=e.get(u)}if(t==="multido")return[I.doMarkAs,[r,o]];I.doStack([I.doMarkAs,[r,o]],t)},refresh:function(){for(let r of c.textboxes)r.refresh();R.rehighlight(),oe.anyhighlit()?R.repopulateTrees(...m.lowhigh(m.highlit())):R.clearTrees()},renumber:function(r=0){let e=function(t,i,o){let u=t();for(let b of u){let g=[...i(!1,b)],A=m.whichattr(g[0]);for(var d=parseInt(o)+1;d<g.length;d++)g[d].setAttribute(A,d)}};e(m.trs,m.tds,r),e(()=>[!0],m.ths,r),e(m.texts,m.words,r),c.maxlemma=m.maxlemma()},reIAST:function(r){let e=[...r].map(t=>[...m.lemmata(t)]).flat();for(let t of e)t.IAST=t.cloneNode(!0)},restyleGroups:function(r,e=!1){let i=e?function(u){var d=[...u];let b=parseInt(r[0])-1,g=parseInt(r[r.length-1])+1;return d.unshift(b),d.push(g),d}(r):r,o=function(u,d=!1){let b=new Set(["group-start","group-internal","group-end"]);d&&b.delete(d);for(let g of u){for(let A of b)g.classList.remove(A);d&&g.classList.add(d)}};for(let u of i){let d=m.firstword(u),b=m.tds(u);if(b.length===0)continue;let g=d.closest("cl");g?d===g.firstElementChild?o(b,"group-start"):d===g.lastElementChild?o(b,"group-end"):o(b,"group-internal"):o(b)}},startRenormalize:function(r){let e=r===!1?m.highlit():r;I.doRenormalize(Math.min(...e),Math.max(...e))},doRenormalize:function(r,e,t=!1,i="do"){let o=oe.normalizedView(),u=new Map,d=[...m.trs()],b=[...m.texts()],g=t?[t]:[...d.keys()];for(let A of g){let B=new Map,H=b[A],U=[...m.words(!1,H)],ee=m.firstword(r,H),se=m.firstword(e,H),de=U.indexOf(ee),ge=U.indexOf(se),we=U.slice(de,ge+1),xe=d[A],Ne=[...m.tds(!1,xe)].slice(de,ge+1),Me=we.map(De=>De.textContent),Re=w1(Me);for(let De=0;De<Re.length;De++){let qe=we[De],Fe=Re[De],rt=Me[De],Ve=Ne[De],Xe=qe.hasAttribute("lemma")?qe.getAttribute("lemma"):!1;if(Xe!==!1){if(Xe===Fe)continue;B.set(Ve.dataset.n,Xe),I.unnormalize(qe),I.unnormalize(Ve)}else B.set(Ve.dataset.n,null);Fe!==rt&&(qe.setAttribute("lemma",Fe),Ve.dataset.normal=Fe,o&&(Ve.textContent=Fe))}u.set(A,B)}be.updateAllHeaders(!0),be.xScrollToHighlit(),I.doStack([I.doUnrenormalize,[u]],i)},doUnrenormalize:function(r,e="undo"){let t=oe.normalizedView(),i=new Map,o=[...m.trs()],u=[...m.texts()];for(let[d,b]of r.entries()){let g=o[d],A=u[d],B=new Map;for(let[H,U]of b.entries()){let ee=m.firsttd(H,g),se=m.firstword(H,A),de=se.hasAttribute("lemma")?se.getAttribute("lemma"):null;B.set(H,de),U===null?(I.unnormalize(ee),I.unnormalize(se)):(ee.dataset.normal=U,se.setAttribute("lemma",U),t&&(ee.textContent=U))}i.set(d,B)}I.doStack([I.doUnrenormalize,[i]],e)},unnormalize:function(r){r.hasOwnProperty("IAST")&&(r.textContent=r.IAST.textContent),r.dataset&&r.dataset.hasOwnProperty("normal")&&delete r.dataset.normal,r.getAttribute("lemma")&&r.removeAttribute("lemma")}},be={toggleNormalize:function(){oe.normalizedView()?be.showUnnormalized():be.showNormalized()},showNormalized:function(r){if(r)r.updatescript();else{document.getElementById("views").classList.add("normalized");for(let t of c.textboxes)t.updatescript();c.matrix.updatescript(),oe.anyhighlit()?R.repopulateTrees(...m.lowhigh(m.highlit())):R.clearTrees()}be.updateAllHeaders(!0),be.xScrollToHighlit()},showUnnormalized:function(){document.getElementById("views").classList.remove("normalized"),c.matrix.updatescript();for(let r of c.textboxes)r.updatescript();oe.anyhighlit()?R.repopulateTrees(...m.lowhigh(m.highlit())):R.clearTrees(),be.updateAllHeaders(!0),be.xScrollToHighlit()},toggleHeader:function(){let r=c.matrix.boxdiv.querySelector("tr.header");r.style.display==="none"?r.style.display="table-row":r.style.display="none"},updateHeaders(r){for(let e of r){let t=m.firstth(e),[i,o]=m.readings(e),u=t.querySelector("span.readings"),d=i<2?i:`${i}(${o.size})`;u.textContent=d}},updateAllHeaders(r=!1){let e=[...m.trs()],t=e.map(b=>m.trWalker(b)),i=[...m.tds(!1,e[0])],o=[...m.ths()],u=c.matrix.boxdiv.querySelector("tr.header"),d=function(){let b=document.createElement("th"),g=document.createElement("span");g.classList.add("readings"),b.appendChild(g);let A=document.createElement("form");return A.innerHTML='<div><input class="insignificant" type="checkbox">Insignificant</div><div><input class="binary" type="checkbox">Binary</div>',b.appendChild(A),u.appendChild(b),b};for(let b=0;b<i.length;b++){let g=b>=o.length?d():o[b],A=i[b];g.dataset.ref=A.dataset.n;let B=0,H=new Set;for(let ee of t){let se=ee.nextNode().textContent;se!==""&&(B++,H.add(se))}let U=B<2?B:`${B}(${H.size})`;g.querySelector("span.readings").textContent=U,r||(g.querySelector("input.insignificant").checked=!!A.dataset.insignificant,g.querySelector("input.binary").checked=!!A.dataset.binary)}if(o.length>i.length)for(let b=i.length;b<o.length;b++)u.removeChild(o[b])},xScrollToHighlit:function(){let r=m.highlit();r.size>0&&be.xScroll([...r][0])},xScroll:function(r,e){if(!r)return;let t=e||m.firsttr(),i=m.firsttd(r,t),o=i.getBoundingClientRect(),u=c.matrix.boxdiv,b=u.getBoundingClientRect().right,g=t.querySelector("th").getBoundingClientRect(),A=g.right,B=o.right>b,H=o.left+.1<A;B&&i.scrollIntoView({inline:"end",block:"nearest"}),H&&(i.scrollIntoView({inline:"start",block:"nearest"}),u.scroll({left:u.scrollLeft-g.width}))}},oe={undo:function(){return c.undo.length>0},redo:function(){return c.redo.length>0},checkbox:function(r,e){if(!oe.anyhighlit())return!1;let t=e===!1?m.highlit():e,i=m.attr(r,t);for(let o of i.values())if(o===!1)return!1;return!0},grouped:function(){let r=m.highlit();if(!r)return!1;let e=m.firsttr();for(let t of r){let i=m.firsttd(t,e);if(i.classList.contains("group-start")||i.classList.contains("group-internal")||i.classList.contains("group-end"))return!0}return!1},oneGrouped:function(){let r=m.highlit();if(r.size===0)return!1;if(r.size===1){let e=m.firsttr(),t=m.firsttd([...r][0],e);return!!(t.classList.contains("group-start")||t.classList.contains("group-end")||t.classList.contains("group-internal"))}return!0},anyhighlit:function(){return!!c.matrix.boxdiv.querySelector("td.highlit")},manyhighlit:function(){return m.highlit().size>1},highlitcell:function(){return!!c.matrix.boxdiv.querySelector("td.highlitcell")},normalizedView:function(){return document.getElementById("views").classList.contains("normalized")},anyNormalized:function(){return c.matrix.boxdiv.querySelector(".lemma[data-normal]")},headerView:function(){return c.matrix.boxdiv.querySelector("tr.header").style.display!=="none"}},ke={tei:function(r){let e=c.xml.createElementNS(v.teins,"TEI");e.setAttribute("n",r);let t=m.firsttext().cloneNode(!0);e.appendChild(t);for(let i of m.words(!1,t))for(i.removeAttribute("lemma");i.firstChild;)i.firstChild.remove();return e},emptycell:function(r){let e=document.createElement("td");return e.className="lemma",e.dataset.n=r,e},emptyword:function(r,e=c.xml){let t=e.createElementNS(v.teins,"w");return t.setAttribute("n",r),t},emptywords:function(r,e,t){let i=e||c.maxlemma,o=t||0;for(let u=o;u<=i;u++){let d=ke.emptyword(u);r.appendChild(d)}},row:function(r,e){let t=document.createElement("tr"),i=document.createElement("th");i.scope="row",i.draggable=!0,i.appendChild(document.createTextNode(r)),i.addEventListener("dragstart",pe.thDragStart),t.dataset.n=r,t.appendChild(i);let o=m.firsttr();for(let u of o.querySelectorAll("td")){let d=document.createElement("td");d.dataset.n=u.dataset.n,d.className=u.className,e&&d.classList.add(e),t.appendChild(d)}return t}},j={create:function(r){let e=document.createElement("div");return e.classList.add("contextmenu"),e.style.left=r.clientX-12+"px",e.style.top=r.clientY-22+"px",e},remove:function(){for(let r of document.querySelectorAll(".contextmenu"))r.parentNode.removeChild(r)},show:function(r){document.body.appendChild(r)},populate:function(r,e){let t=document.createElement("ul");for(let i of e){let o=document.createElement("li");if(i.hasOwnProperty("cond")){let u=document.createRange().createContextualFragment('<form><input type="checkbox"'+(i.cond()?" checked":"")+"></form>");o.appendChild(u)}if(i.hasOwnProperty("toggle")){let u=i.toggle()?i.text:i.alt;o.appendChild(document.createTextNode(u))}else o.appendChild(document.createTextNode(i.text));o.addEventListener("mouseup",i.func),t.appendChild(o)}r.appendChild(t)}};class Ce{constructor(e){this.name=e,this.box=document.createElement("div"),this.box.classList.add("menubox");let t=document.createElement("div");t.classList.add("heading"),t.appendChild(document.createTextNode(e)),this.box.appendChild(t),t.addEventListener("mouseover",this.checkConditions.bind(this)),this.box.addEventListener("mouseup",this.click.bind(this)),this.items=new Map,this.conditions=new Map}populate(e){let t=this.box.querySelector("ul")||function(i){let o=document.createElement("ul");return i.box.appendChild(o),o}(this);for(let i of e){let o=document.createElement("li");if(i.hasOwnProperty("checkbox")){let u=document.createElement("form"),d=document.createElement("input");d.type="checkbox",d.addEventListener("click",b=>b.preventDefault()),u.appendChild(d),o.appendChild(u),o.appendChild(document.createTextNode(i.text)),this.conditions.set(d,i.checkbox)}else if(i.hasOwnProperty("toggle")){let u=document.createElement("span");u.appendChild(document.createTextNode(i.text)),u.dataset.text=i.text,u.dataset.alt=i.alt,this.conditions.set(u,i.toggle),o.appendChild(u)}else o.appendChild(document.createTextNode(i.text));i.hasOwnProperty("greyout")&&this.conditions.set(o,i.greyout),this.items.set(o,i.func),t.appendChild(o)}}click(e){let t=e.target.tagName==="LI"?e.target:e.target.closest("li");if(t&&!t.classList.contains("greyedout")){let i=this.items.get(t);i&&(i(e),this.checkConditions())}}checkConditions(){let e=new Map;for(let[t,i]of this.conditions){let o=e.get(i)||function(){let u=i();return e.set(i,u),u}();t.tagName==="INPUT"?t.checked=o:t.tagName==="SPAN"?o?t.textContent=t.dataset.alt:t.textContent=t.dataset.text:t.tagName==="LI"&&(o?t.classList.remove("greyedout"):t.classList.add("greyedout"))}}}class Se{constructor(e){this.name=e,this.script=0}show(){c.descs.appendChild(this.descbox),oe.normalizedView()&&be.showNormalized(this),c.viewdiv.appendChild(this.boxdiv),this.closed=!1}clear(){for(;this.boxdiv.firstChild;)this.boxdiv.removeChild(this.boxdiv.firstChild);this.svgcontainer&&(this.clearsvg(),this.boxdiv.appendChild(this.svgcontainer))}destroy(){c.viewdiv.removeChild(this.boxdiv),c.descs.removeChild(this.descbox);let e=c.trees.indexOf(this);e>-1&&c.trees.splice(e,1);let t=c.textboxes.indexOf(this);t>-1&&c.textboxes.splice(t,1),this.closed=!0,this.name==="Matrix"&&(document.getElementById("matrixmenu").style.display="block"),L(),R.rehighlight()}pullout(){this.destroy();let e="menubar=no,location=no,status=no,height=620,width=620,scrollbars=yes,centerscreen=yes",t=window.mainWindow?window.mainWindow.comboView.getWindows().length:c.windows.length,i=window.open("slave.html","slave"+t,e);i.mainWindow=window.mainWindow?window.mainWindow:window,i.startbox=this.text?{text:{name:this.name}}:{tree:this.name},i.mainWindow.comboView.addWindow(i)}makeDescBox(){let e=document.createElement("div"),t=document.createElement("div");t.classList.add("closer"),t.innerHTML="x",t.title="close";let i=document.createElement("div");i.classList.add("scripter"),i.innerHTML="A",i.title="change script",e.appendChild(t),e.appendChild(i),e.appendChild(document.createTextNode(this.desc)),this.descbox=e,t.addEventListener("click",this.destroy.bind(this)),i.addEventListener("click",this.cyclescript.bind(this))}cyclescript(){this.script=this.script+1,this.script===v.scripts.length&&(this.script=0);let e=this.descbox.querySelector(".scripter");this.script===0?e.innerHTML="A":e.innerHTML=to[v.scripts[this.script]]("a"),v.scripts[this.script]==="grantha"?e.classList.add("grantha"):e.classList.remove("grantha"),this.updatescript()}updatescript(){let e=this.boxdiv.querySelectorAll(".lemma,.tree-lemma");for(let t of e){let i=t.dataset.hasOwnProperty("normal");if(!i&&t.textContent.trim()==="")continue;let o=function(){if(oe.normalizedView()&&i){let d=document.createElement("span");return d.appendChild(document.createTextNode(t.dataset.normal)),d}else return t.IAST.cloneNode(!0)}(),u=this.script===0?o:Ot(o,v.scripts[this.script]);for(t.innerHTML="";u.firstChild;)t.appendChild(u.firstChild)}v.scripts[this.script]==="grantha"?this.boxdiv.classList.add("grantha"):this.boxdiv.classList.remove("grantha"),this.boxdiv.classList.contains("matrix")&&be.xScrollToHighlit()}}class Z extends Se{constructor(e,t){super(`#${e} #${t}`);this.stemmaid=e,this.id=t,this.nexml=c.treelist.get(this.name).cloneNode(!0),this.desc=this.nexml.querySelector("tree").getAttribute("label")}init(){this.makeDescBox();let e=document.createElement("div");e.classList.add("tree-box");var t,i=0;do t="tree"+i,i++;while(document.getElementById(t));e.id=t,this.boxdiv=e,this.boxdiv.addEventListener("mouseover",pe.treeMouseover.bind(this)),this.boxdiv.addEventListener("click",pe.treeClick),this.svgcontainer=document.createElement("div"),this.svgcontainer.id=this.boxdiv.id+"container",this.boxdiv.appendChild(this.svgcontainer),this.boxdiv.myTree=this,this.calcPaths(),this.jiggleroot(),this.findLevels(),this.labelInternal()}show(){c.descs.appendChild(this.descbox),c.viewdiv.appendChild(this.boxdiv)}jiggleroot(){let e=this.nexml.evaluate('//nex:node[@root="true"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,t=this.nexml.evaluate('//nex:edge[@source="'+e.id+'"]|//nex:edge[@target="'+e.id+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);if(t.snapshotLength===3){var i,o;for(let u=0;u<t.snapshotLength;u++){let d=t.snapshotItem(u),b=d.getAttribute("source"),g=d.getAttribute("target"),A=this.nexml.evaluate('//nex:node[@id="'+b+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,B=this.nexml.evaluate('//nex:node[@id="'+g+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!A.hasAttribute("otu")&&!B.hasAttribute("otu")){i=d,o=g===e.id?"target":"source";break}}if(i){let u=this.nexml.createElementNS(e.namespaceURI,"node");u.id="fakeroot",u.setAttribute("root","true"),e.removeAttribute("root"),e.parentElement.insertBefore(u,e);let d=this.nexml.createElementNS(e.namespaceURI,"edge");d.id="newrootedge",d.setAttribute("length","0"),d.setAttribute("source","fakeroot"),d.setAttribute("target",e.id),e.parentElement.insertBefore(d,i),i.setAttribute(o,u.id)}}}findLevels(){let e=this.nexml.querySelectorAll("edge"),t=[...this.nexml.querySelectorAll("node[otu]")],i=this.nexml;this.levels=[t];let o=function(b,g){let A=b.map(ge=>ge.id),B=new Map,H=new Map,U=[];for(let ge of g){let we=ge.getAttribute("target"),xe=ge.getAttribute("source"),Ae=(()=>A.indexOf(we)!==-1?{ancestor:i.getElementById(xe),child:i.getElementById(we)}:A.indexOf(xe)!==-1?{ancestor:i.getElementById(we),child:i.getElementById(xe)}:null)();if(Ae!==null)if(H.has(Ae.ancestor)){let Ne=H.get(Ae.ancestor);B.set(Ae.ancestor,[Ne.child,Ae.child]),U.push(ge),U.push(Ne.edge)}else H.set(Ae.ancestor,{child:Ae.child,edge:ge})}let ee=[...B.keys()],se=[...H.keys()].reduce((ge,we)=>(ee.indexOf(we)===-1&&ge.push(H.get(we).child),ge),[]),de=[...g].reduce((ge,we)=>(U.indexOf(we)===-1&&ge.push(we),ge),[]);return{match:B,remainder:[...new Set(se)],edges:de}};var u=t,d=e;do{let b=o(u,d);this.levels.push(b.match),u=[...b.match.keys(),...b.remainder],d=b.edges}while(d.length>0)}labelInternal(){for(let e of this.nexml.querySelectorAll("node:not([label])"))e.setAttribute("label",e.id)}fitch1(){let e=new Map;for(let t of this.levels[0]){let i=t.getAttribute("label"),o=this.boxdiv.querySelector(`span.tree-lemma[data-id="${i}"]`),u=o?[m.htmlreading(o,oe.normalizedView())]:[];e.set(t,new Set(u))}for(let t=1;t<this.levels.length;t++)for(let[i,o]of this.levels[t]){let u=o.map(g=>e.get(g)),d=m.setIntersection(...u),b=d.size>0?d:m.setUnion(...u);e.set(i,b)}return e}fitch2(e){let t=[...this.nexml.querySelectorAll("node[otu]")],i=new Map;for(let[o]of this.levels[this.levels.length-1])i.set(o,e.get(o));for(let o=this.levels.length-1;o>1;o--)for(let[u,d]of this.levels[o]){let b=i.get(u);for(let g of d){if(t.indexOf(g)!==-1)continue;let A=e.get(g);if(A.size===1)i.set(g,A);else{let B=m.setIntersection(b,A),H=B.size>0?B:A;i.set(g,H)}}}return i}fitch(){let e=this.fitch1(),t=function(o){let u=[...o].map(d=>d.trim()===""?"_":d);return u.length===1?u[0]:"{"+u.join(", ")+"}"},i=this.fitch2(e);for(let[o,u]of i){let d=this.boxdiv.querySelector(`span.internal[data-key="${o.id}"]`);d.dataset.reconstructed=t(u)}}clearsvg(){for(;this.svgcontainer.firstChild;)this.svgcontainer.removeChild(this.svgcontainer.firstChild)}removecolors(){let e=this.nexml.querySelectorAll("node[color]");for(let t=0;t<e.snapshotLength;t++)e.snapshotItem(t).removeAttribute("color")}drawlines(e,t){if(this.removecolors(),e){let b=this.getPath(...e.split(";")).path,g=new Set;for(let A of b)g.add(A.getAttribute("target")),g.add(A.getAttribute("source"));for(let A of g){let B=this.nexml.evaluate('//nex:node[@id="'+A+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;B.getAttribute("root")||B.setAttribute("color",t)}}let i=parseInt(window.getComputedStyle(this.svgcontainer,null).width)-15,o=parseInt(window.getComputedStyle(this.boxdiv,null).height)-10,u=function(){return o<600?600:o}();N.PhyloCanvas.Render.Style.line.stroke="rgb(162,164,170)",this.phylocanvas=new N.PhyloCanvas({nexml:this.nexml,fileSource:!0},this.svgcontainer.id,i,u);let d=this.svgcontainer.querySelectorAll('path:not([stroke="#a2a4aa"])');for(let b of d)b.style.strokeWidth="2"}draw(){this.clear(),this.drawlines(),this.makeLabels()}clearLabels(){for(let e of this.boxdiv.firstChild.querySelectorAll("text"))e.parentElement.removeChild(e)}makeLabels(){let e=[...m.texts()],t=new Set(e.map(o=>o.parentNode.getAttribute("n"))),i=new Map(e.filter(o=>o.parentNode.hasAttribute("corresp")&&o.parentNode.getAttribute("corresp")===this.name).map(o=>[o.parentNode.getAttribute("select").replace(/^#/,""),o.parentNode.getAttribute("n")]));for(let o of this.boxdiv.firstChild.querySelectorAll("text")){let u=document.createElement("div");u.setAttribute("class","tree-div");let d=parseInt(o.getAttribute("x")-5),b=parseInt(o.getAttribute("y"))-15;u.style.left=d+"px",u.style.top=b+"px";let g=o.textContent.trim();t.has(g)?u.innerHTML=`<span class="witness inactive" data-key="${g}">${g}</span><span class="tree-lemma ${g}" data-id="${g}"></span>`:g!=="fakeroot"?i.has(g)?u.innerHTML=`<span class="internal reconstructed" data-key="${g}" data-label="${i.get(g)}">${i.get(g)}</span><span class="tree-lemma invisible ${g}" data-id="${g}" data-label="${i.get(g)}"></span>`:u.innerHTML=`<span class="internal" data-key="${g}">0</span>`:u.innerHTML=`<span class="internal" data-key="${g}"></span>`,o.parentElement.removeChild(o),this.boxdiv.appendChild(u)}}clearlemmata(){for(let e of this.boxdiv.querySelectorAll("span.tree-lemma"))e.innerHTML="",e.dataset.hasOwnProperty("normal")&&delete e.dataset.normal,e.IAST=e.cloneNode(!0)}populate(e,t){let i=m.texts();for(let d of i){let b=d.parentNode.getAttribute("n"),g=this.boxdiv.querySelector(`span.tree-lemma[data-id="${b}"]`)||this.boxdiv.querySelector(`span.tree-lemma[data-label="${b}"]`);if(!!g){if(g.hasOwnProperty("IAST")||(g.IAST=g.cloneNode(!0)),g.IAST.innerHTML="",t){let A=[],B=[];var o=!1;for(let H=e;H<=t;H++){let U=m.firstword(H,d);A.push(U.innerHTML),U.hasAttribute("lemma")&&(B[H-e]=U.getAttribute("lemma")),U.hasAttribute("emended")&&(o=!0)}if(g.IAST.appendChild(E.transformString(A.join(" ").replace(/\s+/g," ").trim(),E.sheets.tree)),B.length!==0){let H=A.slice(0).map((ee,se)=>B.hasOwnProperty(se)?B[se]:ee),U=document.createElement("span");U.appendChild(E.transformString(H.join(" ").replace(/\s+/g," ").trim(),E.sheets.tree)),g.dataset.normal=U.innerHTML}o?g.dataset.emended=!0:g.dataset.hasOwnProperty("emended")&&delete g.dataset.emended}else{let A=m.firstword(e,d);g.IAST.appendChild(E.transformString(A.innerHTML,E.sheets.tree)),A.hasAttribute("lemma")?g.dataset.normal=A.getAttribute("lemma"):delete g.dataset.normal,A.hasAttribute("emended")?g.dataset.emended=!0:g.dataset.hasOwnProperty("emended")&&delete g.dataset.emended}oe.normalizedView()&&g.dataset.hasOwnProperty("normal")?g.innerHTML=g.dataset.normal:g.innerHTML=g.IAST.innerHTML}}let u=this.boxdiv.querySelectorAll(".inactive");for(let d of u)d.classList.remove("inactive");this.fitch()}calcPaths(){this.nodes=[],this.paths=[],this.longest={path:[]},this.nsResolver=this.nexml.createNSResolver(this.nexml.ownerDocument==null?this.nexml.documentElement:this.nexml.ownerDocument.documentElement);let e=this.nexml.evaluate("//nex:node[@label]",this.nexml,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);for(let t=0;t<e.snapshotLength;t++)this.nodes.push(e.snapshotItem(t));for(let t=0;t<this.nodes.length;t++){let i=this.nodes[t],o=i.getAttribute("label"),u=i.id;for(let d=t+1;d<this.nodes.length;d++){let b=this.nodes[d],g=b.getAttribute("label"),A=b.id;this.paths.push({nodes:[o,g],path:this.pathFind(u,A)})}}for(let t of Object.keys(this.paths))this.paths[t].path.length>this.longest.path.length&&(this.longest=this.paths[t])}pathFind(e,t,i){i||(i=[]);let o=this.nexml.evaluate('//nex:edge[@source="'+e+'"]|//nex:edge[@target="'+e+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);var u;for(let d=0;d<o.snapshotLength;d++){let b=o.snapshotItem(d);if(u=[b],i.indexOf(b.id)!=-1)continue;i.push(b.id);let g=b.getAttribute("source")!==e?b.getAttribute("source"):b.getAttribute("target");if(g===t)return u;if(!this.nexml.evaluate('//nex:node[@id="'+g+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.hasAttribute("otu")){let B=this.pathFind(g,t,i);if(B)return u.concat(B);continue}}return!1}analyzeVariants(e,t){let i=[],o=[],u=function(B){return B.startsWith("<lg")?E.transformString(B,E.sheets.lg).firstChild.data.slice(1):B},d=function(B){return B.map(H=>u(H)).join(" ").replace(/\s+/g," ").trim()},b=oe.normalizedView()?function(B,H){let U=m.firstword(B,H);return U.hasAttribute("lemma")?U.getAttribute("lemma"):U.textContent}:function(B,H){return m.firstword(B,H).textContent};for(let B of m.texts()){let H=B.parentNode.getAttribute("n");if(!this.nexml.querySelector(`otu[label="${H}"]`))continue;let U=t?d(m.range(e,t).map(ee=>b(ee,B))):u(b(e,B));U===""?i.hasOwnProperty("")?i[""].push(H):i[""]=[H]:i.hasOwnProperty(U)?i[U].push(H):i[U]=[H]}let g={};for(let B of Object.keys(i)){var A={length:0,branch_length:0,paths:[]};if(i[B].length===1)A=!1;else for(let H=0;H<i[B].length;H++)for(let U=H+1;U<i[B].length;U++){let ee=this.getPath(i[B][H],i[B][U]);if(ee.hasOwnProperty("path")||alert(ee),ee.path.length===A.length){let se=this.calcBranchLength(ee.path);se===A.branch_length?A.paths.push(ee):se>A.branch_length&&(A={length:ee.path.length,branch_length:se,paths:[ee]})}else ee.path.length>A.length&&(A={length:ee.path.length,branch_length:this.calcBranchLength(ee.path),paths:[ee]})}g[B]=A}for(let B of Object.keys(o))g[B]=o[B];return g}getPath(e,t){for(let i of this.paths)if(i.nodes.indexOf(e)>-1&&i.nodes.indexOf(t)>-1)return i;return!1}calcBranchLength(e){return e.map(t=>t.getAttribute("length")).reduce((t,i)=>parseFloat(t)+parseFloat(i))}colourizeVariants(e,t){let i=this.analyzeVariants(e,t);for(let o of this.boxdiv.querySelectorAll("span.tree-lemma")){let u=i.hasOwnProperty(o.dataset.id)?i[i[o.dataset.id]]:i[o.textContent],d={red:252,green:70,blue:107},b={red:63,green:94,blue:251};u?(o.style.color=T(u.length/this.longest.path.length,b,d),o.dataset.length=u.length,o.dataset.branch_length=u.branch_length,o.dataset.nodes=u.paths[0].nodes.join(";")):(o.style.color=T(1/this.longest.path.length,b,d),o.dataset.length=0,o.dataset.branch_length=0,o.dataset.nodes=""),o.textContent.trim()===""?(o.innerHTML='<span lang="en">Â Â Â </span>',o.style.backgroundColor=o.style.color):o.style.backgroundColor=""}}}class W extends Se{constructor(e){super(e);this.desc=e,this.text=m.firsttext(e)}init(){this.makeTextBox(),this.makeDescBox(),this.descbox.style.maxWidth="595px",this.descbox.style.paddingLeft="5px",this.boxdiv.addEventListener("mouseup",pe.textMouseup)}refresh(){this.boxdiv.innerHTML="",this.boxdiv.appendChild(E.sheets.lemma.transformToFragment(this.text,document)),F(this.boxdiv);for(let e of m.lemmata(!1,this.boxdiv))e.IAST=e.cloneNode(!0);this.updatescript()}makeTextBox(){let e=document.createElement("div");e.dataset.id=this.name,e.classList.add("text-box"),e.appendChild(E.sheets.lemma.transformToFragment(this.text,document)),F(e);for(let t of m.lemmata(!1,e))t.IAST=t.cloneNode(!0);this.boxdiv=e}}class ie extends Se{constructor(){super(name);this.desc="Matrix",this.name="Matrix",this.makeDescBox(),this.makeViewBox(),this.descbox.style.maxWidth="100vw",this.descbox.style.paddingLeft="5px"}init(){this.makeTable()}makeViewBox(){let e=document.createElement("div");e.classList.add("matrix"),e.dataset.id=this.name,this.boxdiv=e}makeTable(){let e=document.createElement("div");e.classList.add("scroller"),e.append(E.sheets.matrix.transformToFragment(c.xml,document));for(let g of e.getElementsByTagName("th"))g.addEventListener("dragstart",pe.thDragStart);e.addEventListener("dragenter",pe.trDragEnter),e.addEventListener("dragleave",pe.trDragLeave),e.addEventListener("dragover",g=>g.preventDefault()),e.addEventListener("drop",pe.trDragDrop),e.addEventListener("mousedown",pe.matrixMousedown);let t=document.createElement("tr");t.classList.add("header");let i=document.createElement("td");i.classList.add("anchor"),t.appendChild(i);let o=[...m.trs(e)],u=o.map(g=>m.trWalker(g)),d=m.tds(!1,o[0]);for(let g of d){let A=document.createElement("th");A.dataset.ref=g.dataset.n;let B=0,H=new Set;for(let de of u){let ge=de.nextNode();ge.IAST=ge.cloneNode(!0);let we=ge.textContent;we!==""&&(B++,H.add(we))}let U=B<2?B:`${B}(${H.size})`,ee=document.createElement("span");ee.classList.add("readings"),ee.appendChild(document.createTextNode(U)),A.appendChild(ee);let se=document.createElement("form");se.innerHTML='<div><input class="insignificant" title="insignificant" type="checkbox"'+(g.dataset.insignificant?"checked":"")+'></div><div><input class="binary" title="binary" type="checkbox"'+(g.dataset.binary?"checked":"")+"></div>",A.appendChild(se),t.appendChild(A)}let b=e.querySelector("tbody");b.insertBefore(t,b.firstChild),this.boxdiv.append(e)}}let Pe={fitch:function(){var r,e,t,i;let o={setIntersection:function(...g){let A=g[0];return new Set([...A].filter(B=>{for(let H=1;H<g.length;H++)if(!g[H].has(B))return!1;return!0}))},setUnion:function(...g){return new Set(g.reduce((A,B)=>(A=[...A,...B],A),[]))}},u=function(g,A){let B=new Map;for(let H of e[0]){let U=r.get(H),ee=U?[U[g]]:[];B.set(H,new Set(ee))}for(let H=1;H<e.length;H++)for(let[U,ee]of e[H]){let se=ee.map(we=>B.get(we)),de=o.setIntersection(...se);if(U===A&&de.size===1)return[...de][0];let ge=de.size>0?de:o.setUnion(...se);B.set(U,ge)}return B},d=function(g,A){let B=e[0],H=new Map;for(let U of e[e.length-1])H.set(U[0],g.get(U[0]));for(let U=e.length-1;U>1;U--)for(let[ee,se]of e[U]){let de=H.get(ee);for(let ge of se){if(B.indexOf(ge)!==-1)continue;let we=g.get(ge),xe=o.setIntersection(de,we),Ae=xe.size>0?xe:we;if(ge===A)return Ae;H.set(ge,Ae)}}return H.get(A)},b=function(g,A){let B=u(A,g);return typeof B=="string"?B:function(U){if(U.size===1)return[...U][0].trim();let ee=[...U].map(se=>se.trim()===""?"_":se);return ee.length===1?ee[0]:"{"+ee.join(", ")+"}"}(d(B,g))};onmessage=function(g){r=g.data.readings,e=g.data.levels,t=g.data.num,i=g.data.id,postMessage({n:t,result:b(i,t)})}}};return{slaveinit:function(){comboView.init(),window.startbox!==void 0&&(window.startbox.tree?w.tree(window.startbox.tree.stemmaid,window.startbox.tree.id):window.startbox.text&&w.text(window.startbox.text.name,window.startbox.text.map))},maininit:function(){document.getElementById("comboview").style.display="block",comboView.init(),f()},init:function(){c.viewdiv=document.getElementById("views"),c.descs=document.getElementById("descs"),c.viewdiv.addEventListener("click",pe.textClick),document.addEventListener("keydown",pe.keyDown,{capture:!0}),document.addEventListener("contextmenu",pe.rightClick),document.addEventListener("mouseup",j.remove)},getWindows:function(){return c.windows},addWindow:function(r){c.windows.push(r)},getViewdiv:function(){return c.viewdiv},getTrees:function(){return c.trees}}}();window.addEventListener("load",window.comboView.maininit);
//# sourceMappingURL=script.js.map
