"use strict";var De={};De.defaults={skip_sgml:!1,syncope:!1};var Ft=De.schemes={balinese:{vowels:"смЕ смЖ смЗ смИ смЙ смК смЛ смМ смН смО  смП смР  смС смТ".split(" "),vowel_marks:"см╡ см╢ см╖ см╕ см╣ см║ см╗ см╝ см╜ снВ см╛ см┐ снГ снА снБ".split(" "),other_marks:["смВ","смД","смБ",""],virama:["снД"],consonants:"смУ смФ смХ смЦ смЧ смШ смЩ смЪ смЫ смЬ смЭ смЮ смЯ сма смб смв смг смд сме смж смз сми смй смк смл смм смн смо смп см░ см▒ см▓ см│".split(" "),symbols:"снР снС снТ снУ снФ снХ снЦ снЧ снШ снЩ   снЮ снЯ".split(" "),zwj:["тАН"],skip:[""]},bengali:{vowels:"ржЕ ржЖ ржЗ ржИ ржЙ ржК ржЛ рза ржМ рзб  ржП ржР  ржУ ржФ".split(" "),vowel_marks:"рж╛ рж┐ рзА рзБ рзВ рзГ рзД рзв рзг  рзЗ рзИ  рзЛ рзМ".split(" "),other_marks:"ржВ ржГ ржБ".split(" "),virama:["рзН"],consonants:"ржХ ржЦ ржЧ ржШ ржЩ ржЪ ржЫ ржЬ ржЭ ржЮ ржЯ ржа ржб ржв ржг ржд рже ржж ржз ржи ржк ржл ржм ржн ржо ржп рж░ рж▓ ржм рж╢ рж╖ рж╕ рж╣ рд│ ржХрзНрж╖ ржЬрзНржЮ".split(" "),symbols:"рзж рзз рзи рзй рзк рзл рзм рзн рзо рзп реР рж╜ ред рее".split(" "),other:"    ржб ржв  ржп ".split(" ")},newa:{vowels:["ЁСРА","ЁСРБ","ЁСРВ","ЁСРГ","ЁСРД","ЁСРЕ","ЁСРЖ","ЁСРЗ","ЁСРИ","ЁСРЙ","","ЁСРК","ЁСРЛ","","ЁСРМ","ЁСРН"],vowel_marks:["ЁСР╡","ЁСР╢","ЁСР╖","ЁСР╕","ЁСР╣","ЁСР║","ЁСР╗","ЁСР╝","ЁСР╜","","ЁСР╛","ЁСР┐","","ЁССА","ЁССБ"],other_marks:["ЁССД","ЁССЕ","ЁССГ","ЁССа","ЁССб",""],virama:["ЁССВ"],consonants:["ЁСРО","ЁСРП","ЁСРР","ЁСРС","ЁСРТ","ЁСРФ","ЁСРХ","ЁСРЦ","ЁСРЧ","ЁСРШ","ЁСРЪ","ЁСРЫ","ЁСРЬ","ЁСРЭ","ЁСРЮ","ЁСРЯ","ЁСРа","ЁСРб","ЁСРв","ЁСРг","ЁСРе","ЁСРж","ЁСРз","ЁСРи","ЁСРй","ЁСРл","ЁСРм","ЁСРо","ЁСР░","ЁСР▒","ЁСР▓","ЁСР│","ЁСР┤"],symbols:["ЁССР","ЁССС","ЁССТ","ЁССУ","ЁССФ","ЁССХ","ЁССЦ","ЁССЧ","ЁССШ","ЁССЩ","ЁССЙ","ЁССЗ","ЁССЛ","ЁССМ"]},sarada:{vowels:["ЁСЖГ","ЁСЖД","ЁСЖЕ","ЁСЖЖ","ЁСЖЗ","ЁСЖИ","ЁСЖЙ","ЁСЖК","ЁСЖЛ","ЁСЖМ","","ЁСЖН","ЁСЖО","","ЁСЖП","ЁСЖР"],vowel_marks:["ЁСЖ│","ЁСЖ┤","ЁСЖ╡","ЁСЖ╢","ЁСЖ╖","ЁСЖ╕","ЁСЖ╣","ЁСЖ║","ЁСЖ╗","","ЁСЖ╝","ЁСЖ╜","","ЁСЖ╛","ЁСЖ┐"],other_marks:["ЁСЖБ","ЁСЖВ","ЁСЖА","ЁСЗВ","ЁСЗГ"],virama:["ЁСЗА"],consonants:["ЁСЖС","ЁСЖТ","ЁСЖУ","ЁСЖФ","ЁСЖХ","ЁСЖЦ","ЁСЖЧ","ЁСЖШ","ЁСЖЩ","ЁСЖЪ","ЁСЖЫ","ЁСЖЬ","ЁСЖЭ","ЁСЖЮ","ЁСЖЯ","ЁСЖа","ЁСЖб","ЁСЖв","ЁСЖг","ЁСЖд","ЁСЖе","ЁСЖж","ЁСЖз","ЁСЖи","ЁСЖй","ЁСЖк","ЁСЖл","ЁСЖм","ЁСЖо","ЁСЖп","ЁСЖ░","ЁСЖ▒","ЁСЖ▓","ЁСЖн"],symbols:["ЁСЗР","ЁСЗС","ЁСЗТ","ЁСЗУ","ЁСЗФ","ЁСЗХ","ЁСЗЦ","ЁСЗЧ","ЁСЗШ","ЁСЗЩ","ЁСЗД","ЁСЗБ","ЁСЗЕ","ЁСЗЖ"]},devanagari:{vowels:"рдЕ рдЖ рдЗ рдИ рдЙ рдК рдЛ реа рдМ реб рдО рдП рдР рдТ рдУ рдФ рдП рдР рдУ".split(" "),vowel_marks:"рд╛ рд┐ реА реБ реВ реГ реД рев рег реЖ реЗ реИ реК реЛ реМ реО реОреЗ реОрд╛ реОреЛ реЖ реП".split(" "),other_marks:"рдВ рдГ рдБ с│╡ с│╢ ъг╜".split(" "),virama:["реН"],consonants:"рдХ рдЦ рдЧ рдШ рдЩ рдЪ рдЫ рдЬ рдЭ рдЮ рдЯ рда рдб рдв рдг рдд рде рдж рдз рди рдк рдл рдм рдн рдо рдп рд░ рд▓ рд╡ рд╢ рд╖ рд╕ рд╣ рд│".split(" "),symbols:"реж рез реи рей рек рел рем рен рео реп реР рд╜ ред рее".split(" "),zwj:["тАН"],skip:[""],accent:["реС","реТ"],combo_accent:"рдГреС рдГреТ рдВреС рдВреТ".split(" "),candra:["реЕ"],other:"рдХрд╝ рдЦрд╝ рдЧрд╝ рдЬрд╝ рдбрд╝ рдврд╝ рдлрд╝ рдпрд╝ рд▒".split(" ")},gujarati:{vowels:"ркЕ ркЖ ркЗ ркИ ркЙ ркК ркЛ рла ркМ рлб  ркП ркР  ркУ ркФ".split(" "),vowel_marks:"рк╛ рк┐ рлА рлБ рлВ рлГ рлД рлв рлг  рлЗ рлИ  рлЛ рлМ".split(" "),other_marks:"ркВ ркГ ркБ".split(" "),virama:["рлН"],consonants:"ркХ ркЦ ркЧ ркШ ркЩ ркЪ ркЫ ркЬ ркЭ ркЮ ркЯ рка ркб ркв ркг ркд рке ркж ркз рки ркк ркл ркм ркн рко ркп рк░ рк▓ рк╡ рк╢ рк╖ рк╕ рк╣ рк│".split(" "),symbols:"рлж рлз рли рлй рлк рлл рлм рлн рло рлп рлР рк╜ рлд рле".split(" "),candra:["рлЕ"]},gurmukhi:{vowels:"риЕ риЖ риЗ риИ риЙ риК      риП риР  риУ риФ".split(" "),vowel_marks:"ри╛ ри┐ рйА рйБ рйВ      рйЗ рйИ  рйЛ рйМ".split(" "),other_marks:"риВ риГ риБ".split(" "),virama:["рйН"],consonants:"риХ риЦ риЧ риШ риЩ риЪ риЫ риЬ риЭ риЮ риЯ риа риб рив риг рид рие риж риз рии рик рил рим рин рио рип ри░ ри▓ ри╡ ри╢ ри╢ ри╕ ри╣ ри│".split(" "),symbols:"рйж рйз рйи рйй рйк рйл рйм рйн рйо рйп реР рд╜ ред рее".split(" "),other:" риЦ риЧ риЬ риб  рил  ".split(" ")},kannada:{vowels:"р▓Е р▓Ж р▓З р▓И р▓Й р▓К р▓Л р│а р▓М р│б р▓О р▓П р▓Р р▓Т р▓У р▓Ф".split(" "),vowel_marks:"р▓╛ р▓┐ р│А р│Б р│В р│Г р│Д р│в р│г р│Ж р│З р│И р│К р│Л р│М".split(" "),other_marks:"р▓В р▓Г рдБ".split(" "),virama:["р│Н"],consonants:"р▓Х р▓Ц р▓Ч р▓Ш р▓Щ р▓Ъ р▓Ы р▓Ь р▓Э р▓Ю р▓Я р▓а р▓б р▓в р▓г р▓д р▓е р▓ж р▓з р▓и р▓к р▓л р▓м р▓н р▓о р▓п р▓░ р▓▓ р▓╡ р▓╢ р▓╖ р▓╕ р▓╣ р▓│".split(" "),symbols:"р│ж р│з р│и р│й р│к р│л р│м р│н р│о р│п р▓Ур▓В р▓╜ ред рее".split(" "),other:"      р▓л  р▓▒".split(" ")},malayalam:{vowels:"р┤Е р┤Ж р┤З р┤И р┤Й р┤К р┤Л р╡а р┤М р╡б р┤О р┤П р┤Р р┤Т р┤У р┤Ф".split(" "),vowel_marks:"р┤╛ р┤┐ р╡А р╡Б р╡В р╡Г р╡Д р╡в р╡г р╡Ж р╡З р╡И р╡К р╡Л р╡М".split(" "),other_marks:"р┤В р┤Г рдБ".split(" "),virama:["р╡Н"],consonants:"р┤Х р┤Ц р┤Ч р┤Ш р┤Щ р┤Ъ р┤Ы р┤Ь р┤Э р┤Ю р┤Я р┤а р┤б р┤в р┤г р┤д р┤е р┤ж р┤з р┤и р┤к р┤л р┤м р┤н р┤о р┤п р┤░ р┤▓ р┤╡ р┤╢ р┤╖ р┤╕ р┤╣ р┤│".split(" "),symbols:"р╡ж р╡з р╡и р╡й р╡к р╡л р╡м р╡н р╡о р╡п р┤Ур┤В р┤╜ ред рее".split(" "),other:"        р┤▒".split(" ")},oriya:{vowels:"рмЕ рмЖ рмЗ рмИ рмЙ рмК рмЛ рна рмМ рнб  рмП рмР  рмУ рмФ".split(" "),vowel_marks:"рм╛ рм┐ рнА рнБ рнВ рнГ рнД рнв рнг  рнЗ рнИ  рнЛ рнМ".split(" "),other_marks:"рмВ рмГ рмБ".split(" "),virama:["рнН"],consonants:"рмХ рмЦ рмЧ рмШ рмЩ рмЪ рмЫ рмЬ рмЭ рмЮ рмЯ рма рмб рмв рмг рмд рме рмж рмз рми рмк рмл рмм рмн рмо рмп рм░ рм▓ рм╡ рм╢ рм╖ рм╕ рм╣ рм│".split(" "),symbols:"рнж рнз рни рнй рнк рнл рнм рнн рно рнп рмУрмВ рм╜ ред рее".split(" "),other:"    рмб рмв  рмп ".split(" ")},tamil:{vowels:"роЕ роЖ роЗ роИ роЙ роК     роО роП роР роТ роУ роФ".split(" "),vowel_marks:"ро╛ ро┐ рпА рпБ рпВ     рпЖ рпЗ рпИ рпК рпЛ рпМ".split(" "),other_marks:"роВ роГ ".split(" "),virama:["рпН"],consonants:"роХ роХ роХ роХ роЩ роЪ роЪ роЬ роЪ роЮ роЯ роЯ роЯ роЯ рог род род род род рои рок рок рок рок роо роп ро░ ро▓ ро╡ ро╢ ро╖ ро╕ ро╣ ро│".split(" "),symbols:"рпж рпз рпи рпй рпк рпл рпм рпн рпо рпп рпР рд╜ ред рее".split(" "),other:"        ро▒".split(" ")},telugu:{vowels:"р░Е р░Ж р░З р░И р░Й р░К р░Л р▒а р░М р▒б р░О р░П р░Р р░Т р░У р░Ф".split(" "),vowel_marks:"р░╛ р░┐ р▒А р▒Б р▒В р▒Г р▒Д р▒в р▒г р▒Ж р▒З р▒И р▒К р▒Л р▒М".split(" "),other_marks:"р░В р░Г р░Б с│▓ с│▓".split(" "),virama:["р▒Н"],consonants:"р░Х р░Ц р░Ч р░Ш р░Щ р░Ъ р░Ы р░Ь р░Э р░Ю р░Я р░а р░б р░в р░г р░д р░е р░ж р░з р░и р░к р░л р░м р░н р░о р░п р░░ р░▓ р░╡ р░╢ р░╖ р░╕ р░╣ р░│".split(" "),symbols:"р▒ж р▒з р▒и р▒й р▒к р▒л р▒м р▒н р▒о р▒п р░Ур░В р░╜ ред рее".split(" "),other:"        р░▒".split(" ")},iast:{vowels:"a ─Б i ─л u ┼л с╣Ы с╣Э с╕╖ с╕╣ с║╜ e ai ├╡ o au ├к a├о ├┤ a├╗".split(" "),other_marks:["с╣Г","с╕е","m╠Р","с║Ц","с╕л","oс╕┐"],virama:[""],consonants:"k kh g gh с╣Е c ch j jh ├▒ с╣н с╣нh с╕Н с╕Нh с╣З t th d dh n p ph b bh m y r l v ┼Ы с╣г s h с╕╗".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oс╣Б ' | ||".split(" ")},iso:{vowels:"a ─Б i ─л u ┼л r╠е r╠е╠Д l╠е l╠е╠Д с║╜ e ai ├╡ o au ├к a├о ├┤ a├╗".split(" "),other_marks:["с╣Б","с╕е","m╠Р","oс╕┐"],virama:[""],consonants:"k kh g gh с╣Е c ch j jh ├▒ с╣н с╣нh с╕Н с╕Нh с╣З t th d dh n p ph b bh m y r l v ┼Ы с╣г s h с╕╖ kс╣г j├▒".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 om╠Р ' | ||".split(" ")},itrans:{vowels:"a A i I u U RRi RRI LLi LLI  e ai  o au".split(" "),other_marks:["M","H",".N"],virama:[""],consonants:"k kh g gh ~N ch Ch j jh ~n T Th D Dh N t th d dh n p ph b bh m y r l v sh Sh s h L kSh j~n".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM .a | ||".split(" "),candra:[".c"],zwj:["{}"],skip:"_",accent:["\\'","\\_"],combo_accent:"\\'H \\_H \\'M \\_M".split(" "),other:"q K G z .D .Dh f Y R".split(" ")},hk:{vowels:"a A i I u U R RR lR lRR  e ai  o au".split(" "),other_marks:"M H ~".split(" "),virama:[""],consonants:"k kh g gh G c ch j jh J T Th D Dh N t th d dh n p ph b bh m y r l v z S s h L kS jJ".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM ' | ||".split(" ")},slp1:{vowels:"a A i I u U f F x X с║╜ e E ├╡ o O ├к ├К ├┤ ├Ф".split(" "),other_marks:"M H m╠Р с║Ц с╕л oс╕┐".split(" "),virama:[""],consonants:"k K g G N c C j J Y w W q Q R t T d D n p P b B m y r l v S z s h L".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oс╣Б ' | ||".split(" ")},velthuis:{vowels:"a aa i ii u uu .r .rr .li .ll  e ai  o au".split(" "),other_marks:".m .h ".split(" "),virama:[""],consonants:'k kh g gh "n c ch j jh ~n .t .th .d .d .n t th d dh n p ph b bh m y r l v ~s .s s h L k.s j~n'.split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 o.m ' | ||".split(" ")},wx:{vowels:"a A i I u U q Q L   e E  o O".split(" "),other_marks:"M H z".split(" "),virama:[""],consonants:"k K g G f c C j J F t T d D N w W x X n p P b B m y r l v S R s h  kR jF".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oM ' | ||".split(" ")}},x1={},Jt={iast:{с╣Ы:["r╠е"],с╣Г:["с╣Б"]},itrans:{A:["aa"],I:["ii","ee"],U:["uu","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],"j~n":["GY","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":"\\_.m \\_.n \\`M \\`.m \\`.n".split(" "),".a":["~"],"|":["."],"||":[".."],z:["J"]}},Rt={};De.isRomanScheme=function(d){return x1.hasOwnProperty(d)};De.addBrahmicScheme=function(d,A){De.schemes[d]=A};De.addRomanScheme=function(d,A){"vowel_marks"in A||(A.vowel_marks=A.vowels.slice(1)),De.schemes[d]=A,x1[d]=!0};var b1=function(d){var A={};for(var N in d)!d.hasOwnProperty(N)||(A[N]=d[N].slice(0));return A};(function(){var d=Ft.kolkata=b1(Ft.iast),A="iast itrans hk kolkata slp1 velthuis wx".split(" ");d.vowels="a ─Б i ─л u ┼л с╣Ы с╣Э с╕╖ с╕╣ e ─У ai o ┼Н au".split(" ");for(var N=0,H;H=A[N];N++)De.addRomanScheme(H,Ft[H]);var f=b1(Ft.itrans);f.vowels="a A i I u U Ri RRI LLi LLi e E ai o O au".split(" "),f.vowel_marks=f.vowels.slice(1),Jt.itrans_dravidian=Jt.itrans,De.addRomanScheme("itrans_dravidian",f)})();var U1=function(d,A){var N=Jt[d]||{},H={},f=De.schemes[d],b={},C=[],o={},h=De.schemes[A];for(var v in f)if(!!f.hasOwnProperty(v)){var w=f[v],M=h[v];if(M!==void 0)for(var F=0;F<w.length;F++){var q=w[F],B=M[F],L=N[q]||[],W=L.length,Z=0;for(C.push(q.length),Z=0;Z<W;Z++)C.push(L[Z].length);if(v==="vowel_marks"||v==="virama")for(o[q]=B,Z=0;Z<W;Z++)o[L[Z]]=B;else{for(b[q]=B,Z=0;Z<W;Z++)b[L[Z]]=B;if(v==="consonants"||v==="other")for(H[q]=B,Z=0;Z<W;Z++)H[L[Z]]=B}}}return{consonants:H,fromRoman:De.isRomanScheme(d),letters:b,marks:o,maxTokenLength:Math.max.apply(Math,C),toRoman:De.isRomanScheme(A),virama:h.virama}},G1=function(d,A,N){for(var H=[],f=A.consonants,b=d.length,C=!1,o=A.letters,h=A.marks,v=A.maxTokenLength,w=N.skip_sgml,M=N.syncope,F,q,B="",L=A.toRoman,W=A.virama,Z=!1,$=!1,j=!1,te=0,oe;(oe=d.charAt(te))||B;te++){var me=v-B.length;if(!(me>0&&te<b&&(B+=oe,me>1)))for(var G=0;G<v;G++){var he=B.substr(0,v-G);if(Z===!0)Z=he!==">";else if(he==="<")Z=w;else if(he==="##"){j=!j,B=B.substr(2);break}if($=Z||j,(F=o[he])!==void 0&&!$){L?H.push(F):(C?(q=h[he])?H.push(q):he!=="a"&&(H.push(W),H.push(F)):H.push(F),C=he in f),B=B.substr(v-G);break}else G===v-1&&(C&&(C=!1,M||H.push(W)),H.push(he),B=B.substr(1))}}return C&&!M&&H.push(W),H.join("")},W1=function(d,A){for(var N=[],H=A.consonants,f=!1,b=!1,C=A.letters,o=A.marks,h,v=A.toRoman,w=!1,M=0,F;F=d.charAt(M);M++){if(F==="#"){f?(w=!w,f=!1):f=!0,b&&(N.push("a"),b=!1);continue}else if(w){N.push(F);continue}(h=o[F])!==void 0?(N.push(h),b=!1):(f&&(N.push("#"),f=!1),b&&(N.push("a"),b=!1),(h=C[F])?(N.push(h),b=v&&F in H):N.push(F))}return b&&N.push("a"),N.join("")};De.t=function(d,A,N,H){H=H||{};var f=Rt.options||{},b=De.defaults,C=Rt.from===A&&Rt.to===N,o;for(var h in b)if(b.hasOwnProperty(h)){var v=b[h];h in H&&(v=H[h]),H[h]=v,v!==f[h]&&(C=!1)}return C?o=Rt.map:(o=U1(A,N,H),Rt={from:A,map:o,options:H,to:N}),A==="itrans"&&(d=d.replace(/\{\\m\+\}/g,".h.N"),d=d.replace(/\.h/g,""),d=d.replace(/\\([^'`_]|$)/g,"##$1##")),o.fromRoman?G1(d,o,H):W1(d,o,H)};var Qt={};(function(d){"use strict";d.__type__="csv";var A=typeof jQuery!="undefined"&&jQuery.Deferred||typeof _!="undefined"&&_.Deferred||function(){var o,h,v=new Promise(function(w,M){o=w,h=M});return{resolve:o,reject:h,promise:function(){return v}}};d.fetch=function(o){var h=new A;if(o.file){var v=new FileReader,w=o.encoding||"UTF-8";v.onload=function(q){var B=d.extractFields(d.parse(q.target.result,o),o);B.useMemoryStore=!0,B.metadata={filename:o.file.name},h.resolve(B)},v.onerror=function(q){h.reject({error:{message:"Failed to load file. Code: "+q.target.error.code}})},v.readAsText(o.file,w)}else if(o.data){var M=d.extractFields(d.parse(o.data,o),o);M.useMemoryStore=!0,h.resolve(M)}else if(o.url){var F=window.fetch||function(q){var B=jQuery.get(q),L={then:function(W){return B.done(W),L},catch:function(W){return B.fail(W),L}};return L};F(o.url).then(function(q){return q.text?q.text():q}).then(function(q){var B=d.extractFields(d.parse(q,o),o);B.useMemoryStore=!0,h.resolve(B)}).catch(function(q,B){h.reject({error:{message:"Failed to load file. "+q.statusText+". Code: "+q.status,request:q}})})}return h.promise()},d.extractFields=function(o,h){return h.noHeaderRow!==!0&&o.length>0?{fields:o[0],records:o.slice(1)}:{records:o}},d.normalizeDialectOptions=function(o){var h={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var v in o)v==="trim"?h.skipinitialspace=o.trim:h[v.toLowerCase()]=o[v];return h},d.parse=function(o,h){(!h||h&&!h.lineterminator)&&(o=d.normalizeLineTerminator(o,h));var v=d.normalizeDialectOptions(h);o=C(o,v.lineterminator);var w="",M=!1,F=!1,q="",B=[],L=[],W,Z;for(Z=function($){return F!==!0&&($===""?$=null:v.skipinitialspace===!0&&($=b($)),N.test($)?$=parseInt($,10):H.test($)&&($=parseFloat($,10))),$},W=0;W<o.length;W+=1)w=o.charAt(W),M===!1&&(w===v.delimiter||w===v.lineterminator)?(q=Z(q),B.push(q),w===v.lineterminator&&(L.push(B),B=[]),q="",F=!1):w!==v.quotechar?q+=w:M?o.charAt(W+1)===v.quotechar?(q+=v.quotechar,W+=1):M=!1:(M=!0,F=!0);return q=Z(q),B.push(q),L.push(B),v.skipinitialrows&&(L=L.slice(v.skipinitialrows)),L},d.normalizeLineTerminator=function(o,h){return h=h||{},h.lineterminator?o:o.replace(/(\r\n|\n|\r)/gm,`
`)},d.objectToArray=function(o){for(var h=[],v=[],w=[],M=0;M<o.fields.length;M++){var F=o.fields[M].id;w.push(F);var q=o.fields[M].label?o.fields[M].label:F;v.push(q)}h.push(v);for(var M=0;M<o.records.length;M++){for(var B=[],L=o.records[M],W=0;W<w.length;W++)B.push(L[w[W]]);h.push(B)}return h},d.serialize=function(o,h){var v=null;o instanceof Array?v=o:v=d.objectToArray(o);var w=d.normalizeDialectOptions(h),M="",F="",q="",B="",L,W,Z;for(Z=function($){return $===null?$="":typeof $=="string"&&f.test($)?(w.doublequote&&($=$.replace(/"/g,'""')),$=w.quotechar+$+w.quotechar):typeof $=="number"&&($=$.toString(10)),$},L=0;L<v.length;L+=1)for(M=v[L],W=0;W<M.length;W+=1)F=Z(M[W]),W===M.length-1?(q+=F,B+=q+w.lineterminator,q=""):q+=F+w.delimiter,F="";return B};var N=/^\d+$/,H=/^\d*\.\d+$|^\d+\.\d*$/,f=/^\s|\s$|,|"|\n/,b=function(){return String.prototype.trim?function(o){return o.trim()}:function(o){return o.replace(/^\s*/,"").replace(/\s*$/,"")}}();function C(o,h){return o.charAt(o.length-h.length)!==h?o:o.substring(0,o.length-h.length)}})(Qt);function X1(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function J1(d,A,N){return N={path:A,exports:{},require:function(H,f){return Y1(H,f==null?N.path:f)}},d(N,N.exports),N.exports}function Y1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Q1=J1(function(d,A){(function(N,H){d.exports=H()})(window,function(){return function(N){var H={};function f(b){if(H[b])return H[b].exports;var C=H[b]={i:b,l:!1,exports:{}};return N[b].call(C.exports,C,C.exports,f),C.l=!0,C.exports}return f.m=N,f.c=H,f.d=function(b,C,o){f.o(b,C)||Object.defineProperty(b,C,{enumerable:!0,get:o})},f.r=function(b){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})},f.t=function(b,C){if(1&C&&(b=f(b)),8&C||4&C&&typeof b=="object"&&b&&b.__esModule)return b;var o=Object.create(null);if(f.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:b}),2&C&&typeof b!="string")for(var h in b)f.d(o,h,function(v){return b[v]}.bind(null,h));return o},f.n=function(b){var C=b&&b.__esModule?function(){return b.default}:function(){return b};return f.d(C,"a",C),C},f.o=function(b,C){return Object.prototype.hasOwnProperty.call(b,C)},f.p="",f(f.s=1)}([function(N,H,f){var b,C;b=[f(2)],(C=function(o){function h(e){if(h.is(e,"function"))return v?e():o.on("raphael.DOMload",e);if(h.is(e,l))return h._engine.create[$](h,e.splice(0,3+h.is(e[0],s))).add(e);var t=Array.prototype.slice.call(arguments,0);if(h.is(t[t.length-1],"function")){var a=t.pop();return v?a.call(h._engine.create[$](h,t)):o.on("raphael.DOMload",function(){a.call(h._engine.create[$](h,t))})}return h._engine.create[$](h,arguments)}h.version="2.3.0",h.eve=o;var v,w,M=/[, ]+/,F={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},q=/\{(\d+)\}/g,B="hasOwnProperty",L={doc:document,win:window},W={was:Object.prototype[B].call(L.win,"Raphael"),is:L.win.Raphael},Z=function(){this.ca=this.customAttributes={}},$="apply",j="concat",te="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,oe="",me=" ",G=String,he="split",se="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[he](me),z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},ge=G.prototype.toLowerCase,de=Math,we=de.max,X=de.min,xe=de.abs,Ce=de.pow,ee=de.PI,s="number",l="array",p=Object.prototype.toString,r=(h._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),n={NaN:1,Infinity:1,"-Infinity":1},i=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,u=de.round,m=parseFloat,x=parseInt,S=G.prototype.toUpperCase,I=h._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},T=h._availableAnimAttrs={blur:s,"clip-rect":"csv",cx:s,cy:s,fill:"colour","fill-opacity":s,"font-size":s,height:s,opacity:s,path:"path",r:s,rx:s,ry:s,stroke:"colour","stroke-opacity":s,"stroke-width":s,transform:"transform",width:s,x:s,y:s},V=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,U={hs:1,rg:1},ne=/,?([achlmqrstvxz]),?/gi,fe=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ve=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ye=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,_e=(h._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),Se=function(e,t){return m(e)-m(t)},Ae=function(e){return e},ke=h._rectPath=function(e,t,a,c,g){return g?[["M",e+g,t],["l",a-2*g,0],["a",g,g,0,0,1,g,g],["l",0,c-2*g],["a",g,g,0,0,1,-g,g],["l",2*g-a,0],["a",g,g,0,0,1,-g,-g],["l",0,2*g-c],["a",g,g,0,0,1,g,-g],["z"]]:[["M",e,t],["l",a,0],["l",0,c],["l",-a,0],["z"]]},Me=function(e,t,a,c){return c==null&&(c=a),[["M",e,t],["m",0,-c],["a",a,c,0,1,1,0,2*c],["a",a,c,0,1,1,0,-2*c],["z"]]},Ne=h._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return Me(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return Me(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return ke(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return ke(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return ke(t.x,t.y,t.width,t.height)},set:function(e){var t=e._getBBox();return ke(t.x,t.y,t.width,t.height)}},Ie=h.mapPath=function(e,t){if(!t)return e;var a,c,g,k,E,P,R;for(g=0,E=(e=St(e)).length;g<E;g++)for(k=1,P=(R=e[g]).length;k<P;k+=2)a=t.x(R[k],R[k+1]),c=t.y(R[k],R[k+1]),R[k]=a,R[k+1]=c;return e};if(h._g=L,h.type=L.win.SVGAngle||L.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",h.type=="VML"){var Le,Oe=L.doc.createElement("div");if(Oe.innerHTML='<v:shape adj="1"/>',(Le=Oe.firstChild).style.behavior="url(#default#VML)",!Le||typeof Le.adj!="object")return h.type=oe;Oe=null}function qe(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var a in e)e[B](a)&&(t[a]=qe(e[a]));return t}h.svg=!(h.vml=h.type=="VML"),h._Paper=Z,h.fn=w=Z.prototype=h.prototype,h._id=0,h.is=function(e,t){return(t=ge.call(t))=="finite"?!n[B](+e):t=="array"?e instanceof Array:t=="null"&&e===null||t==typeof e&&e!==null||t=="object"&&e===Object(e)||t=="array"&&Array.isArray&&Array.isArray(e)||p.call(e).slice(8,-1).toLowerCase()==t},h.angle=function(e,t,a,c,g,k){if(g==null){var E=e-a,P=t-c;return E||P?(180+180*de.atan2(-P,-E)/ee+360)%360:0}return h.angle(e,t,g,k)-h.angle(a,c,g,k)},h.rad=function(e){return e%360*ee/180},h.deg=function(e){return Math.round(180*e/ee%360*1e3)/1e3},h.snapTo=function(e,t,a){if(a=h.is(a,"finite")?a:10,h.is(e,l)){for(var c=e.length;c--;)if(xe(e[c]-t)<=a)return e[c]}else{var g=t%(e=+e);if(g<a)return t-g;if(g>e-a)return t-g+e}return t};var je,wt;h.createUUID=(je=/[xy]/g,wt=function(e){var t=16*de.random()|0;return(e=="x"?t:3&t|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(je,wt).toUpperCase()}),h.setWindow=function(e){o("raphael.setWindow",h,L.win,e),L.win=e,L.doc=L.win.document,h._engine.initWin&&h._engine.initWin(L.win)};var Je=function(e){if(h.vml){var t,a=/^\s+|\s+$/g;try{var c=new ActiveXObject("htmlfile");c.write("<body>"),c.close(),t=c.body}catch(E){t=createPopup().document.body}var g=t.createTextRange();Je=ze(function(E){try{t.style.color=G(E).replace(a,oe);var P=g.queryCommandValue("ForeColor");return"#"+("000000"+(P=(255&P)<<16|65280&P|(16711680&P)>>>16).toString(16)).slice(-6)}catch(R){return"none"}})}else{var k=L.doc.createElement("i");k.title="Rapha├лl Colour Picker",k.style.display="none",L.doc.body.appendChild(k),Je=ze(function(E){return k.style.color=E,L.doc.defaultView.getComputedStyle(k,oe).getPropertyValue("color")})}return Je(e)},ot=function(){return"hsb("+[this.h,this.s,this.b]+")"},at=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ct=function(){return this.hex},lt=function(e,t,a){if(t==null&&h.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(a=e.b,t=e.g,e=e.r),t==null&&h.is(e,"string")){var c=h.getRGB(e);e=c.r,t=c.g,a=c.b}return(e>1||t>1||a>1)&&(e/=255,t/=255,a/=255),[e,t,a]},Nt=function(e,t,a,c){var g={r:e*=255,g:t*=255,b:a*=255,hex:h.rgb(e,t,a),toString:Ct};return h.is(c,"finite")&&(g.opacity=c),g};function ze(e,t,a){return function c(){var g=Array.prototype.slice.call(arguments,0),k=g.join("тРА"),E=c.cache=c.cache||{},P=c.count=c.count||[];return E[B](k)?(function(R,O){for(var J=0,ae=R.length;J<ae;J++)if(R[J]===O)return R.push(R.splice(J,1)[0])}(P,k),a?a(E[k]):E[k]):(P.length>=1e3&&delete E[P.shift()],P.push(k),E[k]=e[$](t,g),a?a(E[k]):E[k])}}h.color=function(e){var t;return h.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=h.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):h.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=h.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):(h.is(e,"string")&&(e=h.getRGB(e)),h.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(t=h.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=h.rgb2hsb(e),e.v=t.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=Ct,e},h.hsb2rgb=function(e,t,a,c){var g,k,E,P,R;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(a=e.b,t=e.s,c=e.o,e=e.h),P=(R=a*t)*(1-xe((e=(e*=360)%360/60)%2-1)),g=k=E=a-R,Nt(g+=[R,P,0,0,P,R][e=~~e],k+=[P,R,R,P,0,0][e],E+=[0,0,P,R,R,P][e],c)},h.hsl2rgb=function(e,t,a,c){var g,k,E,P,R;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(a=e.l,t=e.s,e=e.h),(e>1||t>1||a>1)&&(e/=360,t/=100,a/=100),P=(R=2*t*(a<.5?a:1-a))*(1-xe((e=(e*=360)%360/60)%2-1)),g=k=E=a-R/2,Nt(g+=[R,P,0,0,P,R][e=~~e],k+=[P,R,R,P,0,0][e],E+=[0,0,P,R,R,P][e],c)},h.rgb2hsb=function(e,t,a){var c,g;return e=(a=lt(e,t,a))[0],t=a[1],a=a[2],{h:(((g=(c=we(e,t,a))-X(e,t,a))==0?null:c==e?(t-a)/g:c==t?(a-e)/g+2:(e-t)/g+4)+360)%6*60/360,s:g==0?0:g/c,b:c,toString:ot}},h.rgb2hsl=function(e,t,a){var c,g,k,E;return e=(a=lt(e,t,a))[0],t=a[1],a=a[2],c=((g=we(e,t,a))+(k=X(e,t,a)))/2,{h:(((E=g-k)==0?null:g==e?(t-a)/E:g==t?(a-e)/E+2:(e-t)/E+4)+360)%6*60/360,s:E==0?0:c<.5?E/(2*c):E/(2-2*c),l:c,toString:at}},h._path2string=function(){return this.join(",").replace(ne,"$1")},h._preload=function(e,t){var a=L.doc.createElement("img");a.style.cssText="position:absolute;left:-9999em;top:-9999em",a.onload=function(){t.call(this),this.onload=null,L.doc.body.removeChild(this)},a.onerror=function(){L.doc.body.removeChild(this)},L.doc.body.appendChild(a),a.src=e};function Qe(){return this.hex}function ct(e,t){for(var a=[],c=0,g=e.length;g-2*!t>c;c+=2){var k=[{x:+e[c-2],y:+e[c-1]},{x:+e[c],y:+e[c+1]},{x:+e[c+2],y:+e[c+3]},{x:+e[c+4],y:+e[c+5]}];t?c?g-4==c?k[3]={x:+e[0],y:+e[1]}:g-2==c&&(k[2]={x:+e[0],y:+e[1]},k[3]={x:+e[2],y:+e[3]}):k[0]={x:+e[g-2],y:+e[g-1]}:g-4==c?k[3]=k[2]:c||(k[0]={x:+e[c],y:+e[c+1]}),a.push(["C",(-k[0].x+6*k[1].x+k[2].x)/6,(-k[0].y+6*k[1].y+k[2].y)/6,(k[1].x+6*k[2].x-k[3].x)/6,(k[1].y+6*k[2].y-k[3].y)/6,k[2].x,k[2].y])}return a}h.getRGB=ze(function(e){if(!e||(e=G(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Qe};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Qe};!U[B](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=Je(e));var t,a,c,g,k,E,P=e.match(r);return P?(P[2]&&(c=x(P[2].substring(5),16),a=x(P[2].substring(3,5),16),t=x(P[2].substring(1,3),16)),P[3]&&(c=x((k=P[3].charAt(3))+k,16),a=x((k=P[3].charAt(2))+k,16),t=x((k=P[3].charAt(1))+k,16)),P[4]&&(E=P[4][he](V),t=m(E[0]),E[0].slice(-1)=="%"&&(t*=2.55),a=m(E[1]),E[1].slice(-1)=="%"&&(a*=2.55),c=m(E[2]),E[2].slice(-1)=="%"&&(c*=2.55),P[1].toLowerCase().slice(0,4)=="rgba"&&(g=m(E[3])),E[3]&&E[3].slice(-1)=="%"&&(g/=100)),P[5]?(E=P[5][he](V),t=m(E[0]),E[0].slice(-1)=="%"&&(t*=2.55),a=m(E[1]),E[1].slice(-1)=="%"&&(a*=2.55),c=m(E[2]),E[2].slice(-1)=="%"&&(c*=2.55),(E[0].slice(-3)=="deg"||E[0].slice(-1)=="┬░")&&(t/=360),P[1].toLowerCase().slice(0,4)=="hsba"&&(g=m(E[3])),E[3]&&E[3].slice(-1)=="%"&&(g/=100),h.hsb2rgb(t,a,c,g)):P[6]?(E=P[6][he](V),t=m(E[0]),E[0].slice(-1)=="%"&&(t*=2.55),a=m(E[1]),E[1].slice(-1)=="%"&&(a*=2.55),c=m(E[2]),E[2].slice(-1)=="%"&&(c*=2.55),(E[0].slice(-3)=="deg"||E[0].slice(-1)=="┬░")&&(t/=360),P[1].toLowerCase().slice(0,4)=="hsla"&&(g=m(E[3])),E[3]&&E[3].slice(-1)=="%"&&(g/=100),h.hsl2rgb(t,a,c,g)):((P={r:t,g:a,b:c,toString:Qe}).hex="#"+(16777216|c|a<<8|t<<16).toString(16).slice(1),h.is(g,"finite")&&(P.opacity=g),P)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Qe}},h),h.hsb=ze(function(e,t,a){return h.hsb2rgb(e,t,a).hex}),h.hsl=ze(function(e,t,a){return h.hsl2rgb(e,t,a).hex}),h.rgb=ze(function(e,t,a){function c(g){return g+.5|0}return"#"+(16777216|c(a)|c(t)<<8|c(e)<<16).toString(16).slice(1)}),h.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},a=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),a.hex},h.getColor.reset=function(){delete this.start},h.parsePathString=function(e){if(!e)return null;var t=Ue(e);if(t.arr)return He(t.arr);var a={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},c=[];return h.is(e,l)&&h.is(e[0],l)&&(c=He(e)),c.length||G(e).replace(fe,function(g,k,E){var P=[],R=k.toLowerCase();if(E.replace(ye,function(O,J){J&&P.push(+J)}),R=="m"&&P.length>2&&(c.push([k][j](P.splice(0,2))),R="l",k=k=="m"?"l":"L"),R=="r")c.push([k][j](P));else for(;P.length>=a[R]&&(c.push([k][j](P.splice(0,a[R]))),a[R]););}),c.toString=h._path2string,t.arr=He(c),c},h.parseTransformString=ze(function(e){if(!e)return null;var t=[];return h.is(e,l)&&h.is(e[0],l)&&(t=He(e)),t.length||G(e).replace(ve,function(a,c,g){var k=[];ge.call(c),g.replace(ye,function(E,P){P&&k.push(+P)}),t.push([c][j](k))}),t.toString=h._path2string,t},this,function(e){if(!e)return e;for(var t=[],a=0;a<e.length;a++){for(var c=[],g=0;g<e[a].length;g++)c.push(e[a][g]);t.push(c)}return t});var Ue=function(e){var t=Ue.ps=Ue.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var a in t)t[B](a)&&a!=e&&(t[a].sleep--,!t[a].sleep&&delete t[a])}),t[e]};function ut(e,t,a,c,g){return e*(e*(-3*t+9*a-9*c+3*g)+6*t-12*a+6*c)-3*t+3*a}function Ge(e,t,a,c,g,k,E,P,R){R==null&&(R=1);for(var O=(R=R>1?1:R<0?0:R)/2,J=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ae=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],K=0,Y=0;Y<12;Y++){var re=O*J[Y]+O,le=ut(re,e,a,g,E),ie=ut(re,t,c,k,P),Q=le*le+ie*ie;K+=ae[Y]*de.sqrt(Q)}return O*K}function kt(e,t,a,c,g,k,E,P){if(!(we(e,a)<X(g,E)||X(e,a)>we(g,E)||we(t,c)<X(k,P)||X(t,c)>we(k,P))){var R=(e-a)*(k-P)-(t-c)*(g-E);if(R){var O=((e*c-t*a)*(g-E)-(e-a)*(g*P-k*E))/R,J=((e*c-t*a)*(k-P)-(t-c)*(g*P-k*E))/R,ae=+O.toFixed(2),K=+J.toFixed(2);if(!(ae<+X(e,a).toFixed(2)||ae>+we(e,a).toFixed(2)||ae<+X(g,E).toFixed(2)||ae>+we(g,E).toFixed(2)||K<+X(t,c).toFixed(2)||K>+we(t,c).toFixed(2)||K<+X(k,P).toFixed(2)||K>+we(k,P).toFixed(2)))return{x:O,y:J}}}}function ht(e,t,a){var c=h.bezierBBox(e),g=h.bezierBBox(t);if(!h.isBBoxIntersect(c,g))return a?0:[];for(var k=Ge.apply(0,e),E=Ge.apply(0,t),P=we(~~(k/5),1),R=we(~~(E/5),1),O=[],J=[],ae={},K=a?0:[],Y=0;Y<P+1;Y++){var re=h.findDotsAtSegment.apply(h,e.concat(Y/P));O.push({x:re.x,y:re.y,t:Y/P})}for(Y=0;Y<R+1;Y++)re=h.findDotsAtSegment.apply(h,t.concat(Y/R)),J.push({x:re.x,y:re.y,t:Y/R});for(Y=0;Y<P;Y++)for(var le=0;le<R;le++){var ie=O[Y],Q=O[Y+1],be=J[le],ce=J[le+1],pe=xe(Q.x-ie.x)<.001?"y":"x",ue=xe(ce.x-be.x)<.001?"y":"x",Ee=kt(ie.x,ie.y,Q.x,Q.y,be.x,be.y,ce.x,ce.y);if(Ee){if(ae[Ee.x.toFixed(4)]==Ee.y.toFixed(4))continue;ae[Ee.x.toFixed(4)]=Ee.y.toFixed(4);var Pe=ie.t+xe((Ee[pe]-ie[pe])/(Q[pe]-ie[pe]))*(Q.t-ie.t),Re=be.t+xe((Ee[ue]-be[ue])/(ce[ue]-be[ue]))*(ce.t-be.t);Pe>=0&&Pe<=1.001&&Re>=0&&Re<=1.001&&(a?K++:K.push({x:Ee.x,y:Ee.y,t1:X(Pe,1),t2:X(Re,1)}))}}return K}function _t(e,t,a){e=h._path2curve(e),t=h._path2curve(t);for(var c,g,k,E,P,R,O,J,ae,K,Y=a?0:[],re=0,le=e.length;re<le;re++){var ie=e[re];if(ie[0]=="M")c=P=ie[1],g=R=ie[2];else{ie[0]=="C"?(ae=[c,g].concat(ie.slice(1)),c=ae[6],g=ae[7]):(ae=[c,g,c,g,P,R,P,R],c=P,g=R);for(var Q=0,be=t.length;Q<be;Q++){var ce=t[Q];if(ce[0]=="M")k=O=ce[1],E=J=ce[2];else{ce[0]=="C"?(K=[k,E].concat(ce.slice(1)),k=K[6],E=K[7]):(K=[k,E,k,E,O,J,O,J],k=O,E=J);var pe=ht(ae,K,a);if(a)Y+=pe;else{for(var ue=0,Ee=pe.length;ue<Ee;ue++)pe[ue].segment1=re,pe[ue].segment2=Q,pe[ue].bez1=ae,pe[ue].bez2=K;Y=Y.concat(pe)}}}}}return Y}h.findDotsAtSegment=function(e,t,a,c,g,k,E,P,R){var O=1-R,J=Ce(O,3),ae=Ce(O,2),K=R*R,Y=K*R,re=J*e+3*ae*R*a+3*O*R*R*g+Y*E,le=J*t+3*ae*R*c+3*O*R*R*k+Y*P,ie=e+2*R*(a-e)+K*(g-2*a+e),Q=t+2*R*(c-t)+K*(k-2*c+t),be=a+2*R*(g-a)+K*(E-2*g+a),ce=c+2*R*(k-c)+K*(P-2*k+c),pe=O*e+R*a,ue=O*t+R*c,Ee=O*g+R*E,Pe=O*k+R*P,Re=90-180*de.atan2(ie-be,Q-ce)/ee;return(ie>be||Q<ce)&&(Re+=180),{x:re,y:le,m:{x:ie,y:Q},n:{x:be,y:ce},start:{x:pe,y:ue},end:{x:Ee,y:Pe},alpha:Re}},h.bezierBBox=function(e,t,a,c,g,k,E,P){h.is(e,"array")||(e=[e,t,a,c,g,k,E,P]);var R=Mt.apply(null,e);return{x:R.min.x,y:R.min.y,x2:R.max.x,y2:R.max.y,width:R.max.x-R.min.x,height:R.max.y-R.min.y}},h.isPointInsideBBox=function(e,t,a){return t>=e.x&&t<=e.x2&&a>=e.y&&a<=e.y2},h.isBBoxIntersect=function(e,t){var a=h.isPointInsideBBox;return a(t,e.x,e.y)||a(t,e.x2,e.y)||a(t,e.x,e.y2)||a(t,e.x2,e.y2)||a(e,t.x,t.y)||a(e,t.x2,t.y)||a(e,t.x,t.y2)||a(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)},h.pathIntersection=function(e,t){return _t(e,t)},h.pathIntersectionNumber=function(e,t){return _t(e,t,1)},h.isPointInsidePath=function(e,t,a){var c=h.pathBBox(e);return h.isPointInsideBBox(c,t,a)&&_t(e,[["M",t,a],["H",c.x2+10]],1)%2==1},h._removedFactory=function(e){return function(){o("raphael.log",null,"Rapha├лl: you are calling to method тАЬ"+e+"тАЭ of removed object",e)}};var Ke=h.pathBBox=function(e){var t=Ue(e);if(t.bbox)return qe(t.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var a,c=0,g=0,k=[],E=[],P=0,R=(e=St(e)).length;P<R;P++)if((a=e[P])[0]=="M")c=a[1],g=a[2],k.push(c),E.push(g);else{var O=Mt(c,g,a[1],a[2],a[3],a[4],a[5],a[6]);k=k[j](O.min.x,O.max.x),E=E[j](O.min.y,O.max.y),c=a[5],g=a[6]}var J=X[$](0,k),ae=X[$](0,E),K=we[$](0,k),Y=we[$](0,E),re=K-J,le=Y-ae,ie={x:J,y:ae,x2:K,y2:Y,width:re,height:le,cx:J+re/2,cy:ae+le/2};return t.bbox=qe(ie),ie},He=function(e){var t=qe(e);return t.toString=h._path2string,t},Zt=h._pathToRelative=function(e){var t=Ue(e);if(t.rel)return He(t.rel);h.is(e,l)&&h.is(e&&e[0],l)||(e=h.parsePathString(e));var a=[],c=0,g=0,k=0,E=0,P=0;e[0][0]=="M"&&(k=c=e[0][1],E=g=e[0][2],P++,a.push(["M",c,g]));for(var R=P,O=e.length;R<O;R++){var J=a[R]=[],ae=e[R];if(ae[0]!=ge.call(ae[0]))switch(J[0]=ge.call(ae[0]),J[0]){case"a":J[1]=ae[1],J[2]=ae[2],J[3]=ae[3],J[4]=ae[4],J[5]=ae[5],J[6]=+(ae[6]-c).toFixed(3),J[7]=+(ae[7]-g).toFixed(3);break;case"v":J[1]=+(ae[1]-g).toFixed(3);break;case"m":k=ae[1],E=ae[2];default:for(var K=1,Y=ae.length;K<Y;K++)J[K]=+(ae[K]-(K%2?c:g)).toFixed(3)}else{J=a[R]=[],ae[0]=="m"&&(k=ae[1]+c,E=ae[2]+g);for(var re=0,le=ae.length;re<le;re++)a[R][re]=ae[re]}var ie=a[R].length;switch(a[R][0]){case"z":c=k,g=E;break;case"h":c+=+a[R][ie-1];break;case"v":g+=+a[R][ie-1];break;default:c+=+a[R][ie-2],g+=+a[R][ie-1]}}return a.toString=h._path2string,t.rel=He(a),a},dt=h._pathToAbsolute=function(e){var t=Ue(e);if(t.abs)return He(t.abs);if(h.is(e,l)&&h.is(e&&e[0],l)||(e=h.parsePathString(e)),!e||!e.length)return[["M",0,0]];var a=[],c=0,g=0,k=0,E=0,P=0;e[0][0]=="M"&&(k=c=+e[0][1],E=g=+e[0][2],P++,a[0]=["M",c,g]);for(var R,O,J=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z",ae=P,K=e.length;ae<K;ae++){if(a.push(R=[]),(O=e[ae])[0]!=S.call(O[0]))switch(R[0]=S.call(O[0]),R[0]){case"A":R[1]=O[1],R[2]=O[2],R[3]=O[3],R[4]=O[4],R[5]=O[5],R[6]=+(O[6]+c),R[7]=+(O[7]+g);break;case"V":R[1]=+O[1]+g;break;case"H":R[1]=+O[1]+c;break;case"R":for(var Y=[c,g][j](O.slice(1)),re=2,le=Y.length;re<le;re++)Y[re]=+Y[re]+c,Y[++re]=+Y[re]+g;a.pop(),a=a[j](ct(Y,J));break;case"M":k=+O[1]+c,E=+O[2]+g;default:for(re=1,le=O.length;re<le;re++)R[re]=+O[re]+(re%2?c:g)}else if(O[0]=="R")Y=[c,g][j](O.slice(1)),a.pop(),a=a[j](ct(Y,J)),R=["R"][j](O.slice(-2));else for(var ie=0,Q=O.length;ie<Q;ie++)R[ie]=O[ie];switch(R[0]){case"Z":c=k,g=E;break;case"H":c=R[1];break;case"V":g=R[1];break;case"M":k=R[R.length-2],E=R[R.length-1];default:c=R[R.length-2],g=R[R.length-1]}}return a.toString=h._path2string,t.abs=He(a),a},ft=function(e,t,a,c){return[e,t,a,c,a,c]},Ze=function(e,t,a,c,g,k){return[1/3*e+2/3*a,1/3*t+2/3*c,1/3*g+2/3*a,1/3*k+2/3*c,g,k]},Tt=function(e,t,a,c,g,k,E,P,R,O){var J,ae=120*ee/180,K=ee/180*(+g||0),Y=[],re=ze(function(v1,y1,zt){return{x:v1*de.cos(zt)-y1*de.sin(zt),y:v1*de.sin(zt)+y1*de.cos(zt)}});if(O)Pe=O[0],Re=O[1],ue=O[2],Ee=O[3];else{e=(J=re(e,t,-K)).x,t=J.y,P=(J=re(P,R,-K)).x,R=J.y;var le=(e-P)/2,ie=(t-R)/2,Q=le*le/(a*a)+ie*ie/(c*c);Q>1&&(a*=Q=de.sqrt(Q),c*=Q);var be=a*a,ce=c*c,pe=(k==E?-1:1)*de.sqrt(xe((be*ce-be*ie*ie-ce*le*le)/(be*ie*ie+ce*le*le))),ue=pe*a*ie/c+(e+P)/2,Ee=pe*-c*le/a+(t+R)/2,Pe=de.asin(((t-Ee)/c).toFixed(9)),Re=de.asin(((R-Ee)/c).toFixed(9));(Pe=e<ue?ee-Pe:Pe)<0&&(Pe=2*ee+Pe),(Re=P<ue?ee-Re:Re)<0&&(Re=2*ee+Re),E&&Pe>Re&&(Pe-=2*ee),!E&&Re>Pe&&(Re-=2*ee)}var mt=Re-Pe;if(xe(mt)>ae){var Et=Re,Ve=P,We=R;Re=Pe+ae*(E&&Re>Pe?1:-1),P=ue+a*de.cos(Re),R=Ee+c*de.sin(Re),Y=Tt(P,R,a,c,g,0,E,Ve,We,[Re,Et,ue,Ee])}mt=Re-Pe;var gt=de.cos(Pe),vt=de.sin(Pe),Dt=de.cos(Re),Ye=de.sin(Re),st=de.tan(mt/4),qt=4/3*a*st,d1=4/3*c*st,f1=[e,t],yt=[e+qt*vt,t-d1*gt],p1=[P+qt*Ye,R-d1*Dt],m1=[P,R];if(yt[0]=2*f1[0]-yt[0],yt[1]=2*f1[1]-yt[1],O)return[yt,p1,m1][j](Y);for(var g1=[],tt=0,j1=(Y=[yt,p1,m1][j](Y).join()[he](",")).length;tt<j1;tt++)g1[tt]=tt%2?re(Y[tt-1],Y[tt],K).y:re(Y[tt],Y[tt+1],K).x;return g1},nt=function(e,t,a,c,g,k,E,P,R){var O=1-R;return{x:Ce(O,3)*e+3*Ce(O,2)*R*a+3*O*R*R*g+Ce(R,3)*E,y:Ce(O,3)*t+3*Ce(O,2)*R*c+3*O*R*R*k+Ce(R,3)*P}},Mt=ze(function(e,t,a,c,g,k,E,P){var R,O=g-2*a+e-(E-2*g+a),J=2*(a-e)-2*(g-a),ae=e-a,K=(-J+de.sqrt(J*J-4*O*ae))/2/O,Y=(-J-de.sqrt(J*J-4*O*ae))/2/O,re=[t,P],le=[e,E];return xe(K)>"1e12"&&(K=.5),xe(Y)>"1e12"&&(Y=.5),K>0&&K<1&&(R=nt(e,t,a,c,g,k,E,P,K),le.push(R.x),re.push(R.y)),Y>0&&Y<1&&(R=nt(e,t,a,c,g,k,E,P,Y),le.push(R.x),re.push(R.y)),O=k-2*c+t-(P-2*k+c),ae=t-c,K=(-(J=2*(c-t)-2*(k-c))+de.sqrt(J*J-4*O*ae))/2/O,Y=(-J-de.sqrt(J*J-4*O*ae))/2/O,xe(K)>"1e12"&&(K=.5),xe(Y)>"1e12"&&(Y=.5),K>0&&K<1&&(R=nt(e,t,a,c,g,k,E,P,K),le.push(R.x),re.push(R.y)),Y>0&&Y<1&&(R=nt(e,t,a,c,g,k,E,P,Y),le.push(R.x),re.push(R.y)),{min:{x:X[$](0,le),y:X[$](0,re)},max:{x:we[$](0,le),y:we[$](0,re)}}}),St=h._path2curve=ze(function(e,t){var a=!t&&Ue(e);if(!t&&a.curve)return He(a.curve);for(var c=dt(e),g=t&&dt(t),k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},E={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},P=function(pe,ue,Ee){var Pe,Re;if(!pe)return["C",ue.x,ue.y,ue.x,ue.y,ue.x,ue.y];switch(!(pe[0]in{T:1,Q:1})&&(ue.qx=ue.qy=null),pe[0]){case"M":ue.X=pe[1],ue.Y=pe[2];break;case"A":pe=["C"][j](Tt[$](0,[ue.x,ue.y][j](pe.slice(1))));break;case"S":Ee=="C"||Ee=="S"?(Pe=2*ue.x-ue.bx,Re=2*ue.y-ue.by):(Pe=ue.x,Re=ue.y),pe=["C",Pe,Re][j](pe.slice(1));break;case"T":Ee=="Q"||Ee=="T"?(ue.qx=2*ue.x-ue.qx,ue.qy=2*ue.y-ue.qy):(ue.qx=ue.x,ue.qy=ue.y),pe=["C"][j](Ze(ue.x,ue.y,ue.qx,ue.qy,pe[1],pe[2]));break;case"Q":ue.qx=pe[1],ue.qy=pe[2],pe=["C"][j](Ze(ue.x,ue.y,pe[1],pe[2],pe[3],pe[4]));break;case"L":pe=["C"][j](ft(ue.x,ue.y,pe[1],pe[2]));break;case"H":pe=["C"][j](ft(ue.x,ue.y,pe[1],ue.y));break;case"V":pe=["C"][j](ft(ue.x,ue.y,ue.x,pe[1]));break;case"Z":pe=["C"][j](ft(ue.x,ue.y,ue.X,ue.Y))}return pe},R=function(pe,ue){if(pe[ue].length>7){pe[ue].shift();for(var Ee=pe[ue];Ee.length;)J[ue]="A",g&&(ae[ue]="A"),pe.splice(ue++,0,["C"][j](Ee.splice(0,6)));pe.splice(ue,1),le=we(c.length,g&&g.length||0)}},O=function(pe,ue,Ee,Pe,Re){pe&&ue&&pe[Re][0]=="M"&&ue[Re][0]!="M"&&(ue.splice(Re,0,["M",Pe.x,Pe.y]),Ee.bx=0,Ee.by=0,Ee.x=pe[Re][1],Ee.y=pe[Re][2],le=we(c.length,g&&g.length||0))},J=[],ae=[],K="",Y="",re=0,le=we(c.length,g&&g.length||0);re<le;re++){c[re]&&(K=c[re][0]),K!="C"&&(J[re]=K,re&&(Y=J[re-1])),c[re]=P(c[re],k,Y),J[re]!="A"&&K=="C"&&(J[re]="C"),R(c,re),g&&(g[re]&&(K=g[re][0]),K!="C"&&(ae[re]=K,re&&(Y=ae[re-1])),g[re]=P(g[re],E,Y),ae[re]!="A"&&K=="C"&&(ae[re]="C"),R(g,re)),O(c,g,k,E,re),O(g,c,E,k,re);var ie=c[re],Q=g&&g[re],be=ie.length,ce=g&&Q.length;k.x=ie[be-2],k.y=ie[be-1],k.bx=m(ie[be-4])||k.x,k.by=m(ie[be-3])||k.y,E.bx=g&&(m(Q[ce-4])||E.x),E.by=g&&(m(Q[ce-3])||E.y),E.x=g&&Q[ce-2],E.y=g&&Q[ce-1]}return g||(a.curve=He(c)),g?[c,g]:c},null,He),It=(h._parseDots=ze(function(e){for(var t=[],a=0,c=e.length;a<c;a++){var g={},k=e[a].match(/^([^:]*):?([\d\.]*)/);if(g.color=h.getRGB(k[1]),g.color.error)return null;g.opacity=g.color.opacity,g.color=g.color.hex,k[2]&&(g.offset=k[2]+"%"),t.push(g)}for(a=1,c=t.length-1;a<c;a++)if(!t[a].offset){for(var E=m(t[a-1].offset||0),P=0,R=a+1;R<c;R++)if(t[R].offset){P=t[R].offset;break}P||(P=100,R=c);for(var O=((P=m(P))-E)/(R-a+1);a<R;a++)E+=O,t[a].offset=E+"%"}return t}),h._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),D1=(h._tofront=function(e,t){t.top!==e&&(It(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},h._toback=function(e,t){t.bottom!==e&&(It(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},h._insertafter=function(e,t,a){It(e,a),t==a.top&&(a.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},h._insertbefore=function(e,t,a){It(e,a),t==a.bottom&&(a.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},h.toMatrix=function(e,t){var a=Ke(e),c={_:{transform:oe},getBBox:function(){return a}};return e1(c,t),c.matrix}),e1=(h.transformPath=function(e,t){return Ie(e,D1(e,t))},h._extractTransform=function(e,t){if(t==null)return e._.transform;t=G(t).replace(/\.{3}|\u2026/g,e._.transform||oe);var a,c,g=h.parseTransformString(t),k=0,E=1,P=1,R=e._,O=new rt;if(R.transform=g||[],g)for(var J=0,ae=g.length;J<ae;J++){var K,Y,re,le,ie,Q=g[J],be=Q.length,ce=G(Q[0]).toLowerCase(),pe=Q[0]!=ce,ue=pe?O.invert():0;ce=="t"&&be==3?pe?(K=ue.x(0,0),Y=ue.y(0,0),re=ue.x(Q[1],Q[2]),le=ue.y(Q[1],Q[2]),O.translate(re-K,le-Y)):O.translate(Q[1],Q[2]):ce=="r"?be==2?(ie=ie||e.getBBox(1),O.rotate(Q[1],ie.x+ie.width/2,ie.y+ie.height/2),k+=Q[1]):be==4&&(pe?(re=ue.x(Q[2],Q[3]),le=ue.y(Q[2],Q[3]),O.rotate(Q[1],re,le)):O.rotate(Q[1],Q[2],Q[3]),k+=Q[1]):ce=="s"?be==2||be==3?(ie=ie||e.getBBox(1),O.scale(Q[1],Q[be-1],ie.x+ie.width/2,ie.y+ie.height/2),E*=Q[1],P*=Q[be-1]):be==5&&(pe?(re=ue.x(Q[3],Q[4]),le=ue.y(Q[3],Q[4]),O.scale(Q[1],Q[2],re,le)):O.scale(Q[1],Q[2],Q[3],Q[4]),E*=Q[1],P*=Q[2]):ce=="m"&&be==7&&O.add(Q[1],Q[2],Q[3],Q[4],Q[5],Q[6]),R.dirtyT=1,e.matrix=O}e.matrix=O,R.sx=E,R.sy=P,R.deg=k,R.dx=a=O.e,R.dy=c=O.f,E==1&&P==1&&!k&&R.bbox?(R.bbox.x+=+a,R.bbox.y+=+c):R.dirtyT=1}),t1=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return e.length==4?[t,0,e[2],e[3]]:[t,0];case"s":return e.length==5?[t,1,1,e[3],e[4]]:e.length==3?[t,1,1]:[t,1]}},q1=h._equaliseTransform=function(e,t){t=G(t).replace(/\.{3}|\u2026/g,e),e=h.parseTransformString(e)||[],t=h.parseTransformString(t)||[];for(var a,c,g,k,E=we(e.length,t.length),P=[],R=[],O=0;O<E;O++){if(g=e[O]||t1(t[O]),k=t[O]||t1(g),g[0]!=k[0]||g[0].toLowerCase()=="r"&&(g[2]!=k[2]||g[3]!=k[3])||g[0].toLowerCase()=="s"&&(g[3]!=k[3]||g[4]!=k[4]))return;for(P[O]=[],R[O]=[],a=0,c=we(g.length,k.length);a<c;a++)a in g&&(P[O][a]=g[a]),a in k&&(R[O][a]=k[a])}return{from:P,to:R}};function rt(e,t,a,c,g,k){e!=null?(this.a=+e,this.b=+t,this.c=+a,this.d=+c,this.e=+g,this.f=+k):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}h._getContainer=function(e,t,a,c){var g;if((g=c!=null||h.is(e,"object")?e:L.doc.getElementById(e))!=null)return g.tagName?t==null?{container:g,width:g.style.pixelWidth||g.offsetWidth,height:g.style.pixelHeight||g.offsetHeight}:{container:g,width:t,height:a}:{container:1,x:e,y:t,width:a,height:c}},h.pathToRelative=Zt,h._engine={},h.path2curve=St,h.matrix=function(e,t,a,c,g,k){return new rt(e,t,a,c,g,k)},function(e){function t(c){return c[0]*c[0]+c[1]*c[1]}function a(c){var g=de.sqrt(t(c));c[0]&&(c[0]/=g),c[1]&&(c[1]/=g)}e.add=function(c,g,k,E,P,R){var O,J,ae,K,Y=[[],[],[]],re=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],le=[[c,k,P],[g,E,R],[0,0,1]];for(c&&c instanceof rt&&(le=[[c.a,c.c,c.e],[c.b,c.d,c.f],[0,0,1]]),O=0;O<3;O++)for(J=0;J<3;J++){for(K=0,ae=0;ae<3;ae++)K+=re[O][ae]*le[ae][J];Y[O][J]=K}this.a=Y[0][0],this.b=Y[1][0],this.c=Y[0][1],this.d=Y[1][1],this.e=Y[0][2],this.f=Y[1][2]},e.invert=function(){var c=this,g=c.a*c.d-c.b*c.c;return new rt(c.d/g,-c.b/g,-c.c/g,c.a/g,(c.c*c.f-c.d*c.e)/g,(c.b*c.e-c.a*c.f)/g)},e.clone=function(){return new rt(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(c,g){this.add(1,0,0,1,c,g)},e.scale=function(c,g,k,E){g==null&&(g=c),(k||E)&&this.add(1,0,0,1,k,E),this.add(c,0,0,g,0,0),(k||E)&&this.add(1,0,0,1,-k,-E)},e.rotate=function(c,g,k){c=h.rad(c),g=g||0,k=k||0;var E=+de.cos(c).toFixed(9),P=+de.sin(c).toFixed(9);this.add(E,P,-P,E,g,k),this.add(1,0,0,1,-g,-k)},e.x=function(c,g){return c*this.a+g*this.c+this.e},e.y=function(c,g){return c*this.b+g*this.d+this.f},e.get=function(c){return+this[G.fromCharCode(97+c)].toFixed(4)},e.toString=function(){return h.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var c={};c.dx=this.e,c.dy=this.f;var g=[[this.a,this.c],[this.b,this.d]];c.scalex=de.sqrt(t(g[0])),a(g[0]),c.shear=g[0][0]*g[1][0]+g[0][1]*g[1][1],g[1]=[g[1][0]-g[0][0]*c.shear,g[1][1]-g[0][1]*c.shear],c.scaley=de.sqrt(t(g[1])),a(g[1]),c.shear/=c.scaley;var k=-g[0][1],E=g[1][1];return E<0?(c.rotate=h.deg(de.acos(E)),k<0&&(c.rotate=360-c.rotate)):c.rotate=h.deg(de.asin(k)),c.isSimple=!(+c.shear.toFixed(9)||c.scalex.toFixed(9)!=c.scaley.toFixed(9)&&c.rotate),c.isSuperSimple=!+c.shear.toFixed(9)&&c.scalex.toFixed(9)==c.scaley.toFixed(9)&&!c.rotate,c.noRotation=!+c.shear.toFixed(9)&&!c.rotate,c},e.toTransformString=function(c){var g=c||this[he]();return g.isSimple?(g.scalex=+g.scalex.toFixed(4),g.scaley=+g.scaley.toFixed(4),g.rotate=+g.rotate.toFixed(4),(g.dx||g.dy?"t"+[g.dx,g.dy]:oe)+(g.scalex!=1||g.scaley!=1?"s"+[g.scalex,g.scaley,0,0]:oe)+(g.rotate?"r"+[g.rotate,0,0]:oe)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(rt.prototype);for(var z1=function(){this.returnValue=!1},F1=function(){return this.originalEvent.preventDefault()},O1=function(){this.cancelBubble=!0},H1=function(){return this.originalEvent.stopPropagation()},n1=function(e){var t=L.doc.documentElement.scrollTop||L.doc.body.scrollTop,a=L.doc.documentElement.scrollLeft||L.doc.body.scrollLeft;return{x:e.clientX+a,y:e.clientY+t}},V1=L.doc.addEventListener?function(e,t,a,c){var g=function(E){var P=n1(E);return a.call(c,E,P.x,P.y)};if(e.addEventListener(t,g,!1),te&&z[t]){var k=function(E){for(var P=n1(E),R=E,O=0,J=E.targetTouches&&E.targetTouches.length;O<J;O++)if(E.targetTouches[O].target==e){(E=E.targetTouches[O]).originalEvent=R,E.preventDefault=F1,E.stopPropagation=H1;break}return a.call(c,E,P.x,P.y)};e.addEventListener(z[t],k,!1)}return function(){return e.removeEventListener(t,g,!1),te&&z[t]&&e.removeEventListener(z[t],k,!1),!0}}:L.doc.attachEvent?function(e,t,a,c){var g=function(k){k=k||L.win.event;var E=L.doc.documentElement.scrollTop||L.doc.body.scrollTop,P=L.doc.documentElement.scrollLeft||L.doc.body.scrollLeft,R=k.clientX+P,O=k.clientY+E;return k.preventDefault=k.preventDefault||z1,k.stopPropagation=k.stopPropagation||O1,a.call(c,k,R,O)};return e.attachEvent("on"+t,g),function(){return e.detachEvent("on"+t,g),!0}}:void 0,et=[],Vt=function(e){for(var t,a=e.clientX,c=e.clientY,g=L.doc.documentElement.scrollTop||L.doc.body.scrollTop,k=L.doc.documentElement.scrollLeft||L.doc.body.scrollLeft,E=et.length;E--;){if(t=et[E],te&&e.touches){for(var P,R=e.touches.length;R--;)if((P=e.touches[R]).identifier==t.el._drag.id){a=P.clientX,c=P.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var O,J=t.el.node,ae=J.nextSibling,K=J.parentNode,Y=J.style.display;L.win.opera&&K.removeChild(J),J.style.display="none",O=t.el.paper.getElementByPoint(a,c),J.style.display=Y,L.win.opera&&(ae?K.insertBefore(J,ae):K.appendChild(J)),O&&o("raphael.drag.over."+t.el.id,t.el,O),a+=k,c+=g,o("raphael.drag.move."+t.el.id,t.move_scope||t.el,a-t.el._drag.x,c-t.el._drag.y,a,c,e)}},$t=function(e){h.unmousemove(Vt).unmouseup($t);for(var t,a=et.length;a--;)(t=et[a]).el._drag={},o("raphael.drag.end."+t.el.id,t.end_scope||t.start_scope||t.move_scope||t.el,e);et=[]},Te=h.el={},r1=se.length;r1--;)(function(e){h[e]=Te[e]=function(t,a){return h.is(t,"function")&&(this.events=this.events||[],this.events.push({name:e,f:t,unbind:V1(this.shape||this.node||L.doc,e,t,a||this)})),this},h["un"+e]=Te["un"+e]=function(t){for(var a=this.events||[],c=a.length;c--;)a[c].name!=e||!h.is(t,"undefined")&&a[c].f!=t||(a[c].unbind(),a.splice(c,1),!a.length&&delete this.events);return this}})(se[r1]);Te.data=function(e,t){var a=_e[this.id]=_e[this.id]||{};if(arguments.length==0)return a;if(arguments.length==1){if(h.is(e,"object")){for(var c in e)e[B](c)&&this.data(c,e[c]);return this}return o("raphael.data.get."+this.id,this,a[e],e),a[e]}return a[e]=t,o("raphael.data.set."+this.id,this,t,e),this},Te.removeData=function(e){return e==null?delete _e[this.id]:_e[this.id]&&delete _e[this.id][e],this},Te.getData=function(){return qe(_e[this.id]||{})},Te.hover=function(e,t,a,c){return this.mouseover(e,a).mouseout(t,c||a)},Te.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var pt=[];Te.drag=function(e,t,a,c,g,k){function E(P){(P.originalEvent||P).preventDefault();var R=P.clientX,O=P.clientY,J=L.doc.documentElement.scrollTop||L.doc.body.scrollTop,ae=L.doc.documentElement.scrollLeft||L.doc.body.scrollLeft;if(this._drag.id=P.identifier,te&&P.touches){for(var K,Y=P.touches.length;Y--;)if(K=P.touches[Y],this._drag.id=K.identifier,K.identifier==this._drag.id){R=K.clientX,O=K.clientY;break}}this._drag.x=R+ae,this._drag.y=O+J,!et.length&&h.mousemove(Vt).mouseup($t),et.push({el:this,move_scope:c,start_scope:g,end_scope:k}),t&&o.on("raphael.drag.start."+this.id,t),e&&o.on("raphael.drag.move."+this.id,e),a&&o.on("raphael.drag.end."+this.id,a),o("raphael.drag.start."+this.id,g||c||this,this._drag.x,this._drag.y,P)}return this._drag={},pt.push({el:this,start:E}),this.mousedown(E),this},Te.onDragOver=function(e){e?o.on("raphael.drag.over."+this.id,e):o.unbind("raphael.drag.over."+this.id)},Te.undrag=function(){for(var e=pt.length;e--;)pt[e].el==this&&(this.unmousedown(pt[e].start),pt.splice(e,1),o.unbind("raphael.drag.*."+this.id));!pt.length&&h.unmousemove(Vt).unmouseup($t),et=[]},w.circle=function(e,t,a){var c=h._engine.circle(this,e||0,t||0,a||0);return this.__set__&&this.__set__.push(c),c},w.rect=function(e,t,a,c,g){var k=h._engine.rect(this,e||0,t||0,a||0,c||0,g||0);return this.__set__&&this.__set__.push(k),k},w.ellipse=function(e,t,a,c){var g=h._engine.ellipse(this,e||0,t||0,a||0,c||0);return this.__set__&&this.__set__.push(g),g},w.path=function(e){e&&!h.is(e,"string")&&!h.is(e[0],l)&&(e+=oe);var t=h._engine.path(h.format[$](h,arguments),this);return this.__set__&&this.__set__.push(t),t},w.image=function(e,t,a,c,g){var k=h._engine.image(this,e||"about:blank",t||0,a||0,c||0,g||0);return this.__set__&&this.__set__.push(k),k},w.text=function(e,t,a){var c=h._engine.text(this,e||0,t||0,G(a));return this.__set__&&this.__set__.push(c),c},w.set=function(e){!h.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var t=new Pt(e);return this.__set__&&this.__set__.push(t),t.paper=this,t.type="set",t},w.setStart=function(e){this.__set__=e||this.set()},w.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},w.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},w.setSize=function(e,t){return h._engine.setSize.call(this,e,t)},w.setViewBox=function(e,t,a,c,g){return h._engine.setViewBox.call(this,e,t,a,c,g)},w.top=w.bottom=null,w.raphael=h;function i1(){return this.x+me+this.y+me+this.width+" ├Ч "+this.height}w.getElementByPoint=function(e,t){var a,c,g,k,E,P,R,O=this.canvas,J=L.doc.elementFromPoint(e,t);if(L.win.opera&&J.tagName=="svg"){var ae=(c=(a=O).getBoundingClientRect(),g=a.ownerDocument,k=g.body,E=g.documentElement,P=E.clientTop||k.clientTop||0,R=E.clientLeft||k.clientLeft||0,{y:c.top+(L.win.pageYOffset||E.scrollTop||k.scrollTop)-P,x:c.left+(L.win.pageXOffset||E.scrollLeft||k.scrollLeft)-R}),K=O.createSVGRect();K.x=e-ae.x,K.y=t-ae.y,K.width=K.height=1;var Y=O.getIntersectionList(K,null);Y.length&&(J=Y[Y.length-1])}if(!J)return null;for(;J.parentNode&&J!=O.parentNode&&!J.raphael;)J=J.parentNode;return J==this.canvas.parentNode&&(J=O),J=J&&J.raphael?this.getById(J.raphaelid):null},w.getElementsByBBox=function(e){var t=this.set();return this.forEach(function(a){h.isBBoxIntersect(a.getBBox(),e)&&t.push(a)}),t},w.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},w.forEach=function(e,t){for(var a=this.bottom;a;){if(e.call(t,a)===!1)return this;a=a.next}return this},w.getElementsByPoint=function(e,t){var a=this.set();return this.forEach(function(c){c.isPointInside(e,t)&&a.push(c)}),a},Te.isPointInside=function(e,t){var a=this.realPath=Ne[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(a=h.transformPath(a,this.attr("transform"))),h.isPointInsidePath(a,e,t)},Te.getBBox=function(e){if(this.removed)return{};var t=this._;return e?(!t.dirty&&t.bboxwt||(this.realPath=Ne[this.type](this),t.bboxwt=Ke(this.realPath),t.bboxwt.toString=i1,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&(!t.dirty&&this.realPath||(t.bboxwt=0,this.realPath=Ne[this.type](this)),t.bbox=Ke(Ie(this.realPath,this.matrix)),t.bbox.toString=i1,t.dirty=t.dirtyT=0),t.bbox)},Te.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Te.glow=function(e){if(this.type=="text")return null;var t={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity==null?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},a=t.width/2,c=this.paper,g=c.set(),k=this.realPath||Ne[this.type](this);k=this.matrix?Ie(k,this.matrix):k;for(var E=1;E<a+1;E++)g.push(c.path(k).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/a*E).toFixed(3),opacity:+(t.opacity/a).toFixed(3)}));return g.insertBefore(this).translate(t.offsetx,t.offsety)};var jt=function(e,t,a,c,g,k,E,P,R){return R==null?Ge(e,t,a,c,g,k,E,P):h.findDotsAtSegment(e,t,a,c,g,k,E,P,function(O,J,ae,K,Y,re,le,ie,Q){if(!(Q<0||Ge(O,J,ae,K,Y,re,le,ie)<Q)){var be,ce=.5,pe=1-ce;for(be=Ge(O,J,ae,K,Y,re,le,ie,pe);xe(be-Q)>.01;)be=Ge(O,J,ae,K,Y,re,le,ie,pe+=(be<Q?1:-1)*(ce/=2));return pe}}(e,t,a,c,g,k,E,P,R))},Ut=function(e,t){return function(a,c,g){for(var k,E,P,R,O,J="",ae={},K=0,Y=0,re=(a=St(a)).length;Y<re;Y++){if((P=a[Y])[0]=="M")k=+P[1],E=+P[2];else{if(K+(R=jt(k,E,P[1],P[2],P[3],P[4],P[5],P[6]))>c){if(t&&!ae.start){if(J+=["C"+(O=jt(k,E,P[1],P[2],P[3],P[4],P[5],P[6],c-K)).start.x,O.start.y,O.m.x,O.m.y,O.x,O.y],g)return J;ae.start=J,J=["M"+O.x,O.y+"C"+O.n.x,O.n.y,O.end.x,O.end.y,P[5],P[6]].join(),K+=R,k=+P[5],E=+P[6];continue}if(!e&&!t)return{x:(O=jt(k,E,P[1],P[2],P[3],P[4],P[5],P[6],c-K)).x,y:O.y,alpha:O.alpha}}K+=R,k=+P[5],E=+P[6]}J+=P.shift()+P}return ae.end=J,(O=e?K:t?ae:h.findDotsAtSegment(k,E,P[0],P[1],P[2],P[3],P[4],P[5],1)).alpha&&(O={x:O.x,y:O.y,alpha:O.alpha}),O}},s1=Ut(1),o1=Ut(),Gt=Ut(0,1);h.getTotalLength=s1,h.getPointAtLength=o1,h.getSubpath=function(e,t,a){if(this.getTotalLength(e)-a<1e-6)return Gt(e,t).end;var c=Gt(e,a,1);return t?Gt(c,t).end:c},Te.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():s1(e)},Te.getPointAtLength=function(e){var t=this.getPath();if(t)return o1(t,e)},Te.getPath=function(){var e,t=h._getPath[this.type];if(this.type!="text"&&this.type!="set")return t&&(e=t(this)),e},Te.getSubpath=function(e,t){var a=this.getPath();if(a)return h.getSubpath(a,e,t)};var $e=h.easing_formulas={linear:function(e){return e},"<":function(e){return Ce(e,1.7)},">":function(e){return Ce(e,.48)},"<>":function(e){var t=.48-e/1.04,a=de.sqrt(.1734+t*t),c=a-t,g=-a-t,k=Ce(xe(c),1/3)*(c<0?-1:1)+Ce(xe(g),1/3)*(g<0?-1:1)+.5;return 3*(1-k)*k*k+k*k*k},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:Ce(2,-10*e)*de.sin(2*ee*(e-.075)/.3)+1},bounce:function(e){var t=7.5625,a=2.75;return e<1/a?t*e*e:e<2/a?t*(e-=1.5/a)*e+.75:e<2.5/a?t*(e-=2.25/a)*e+.9375:t*(e-=2.625/a)*e+.984375}};$e.easeIn=$e["ease-in"]=$e["<"],$e.easeOut=$e["ease-out"]=$e[">"],$e.easeInOut=$e["ease-in-out"]=$e["<>"],$e["back-in"]=$e.backIn,$e["back-out"]=$e.backOut;var Be=[],a1=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},Wt=function(){for(var e=+new Date,t=0;t<Be.length;t++){var a=Be[t];if(!a.el.removed&&!a.paused){var c,g,k=e-a.start,E=a.ms,P=a.easing,R=a.from,O=a.diff,J=a.to,ae=(a.t,a.el),K={},Y={};if(a.initstatus?(k=(a.initstatus*a.anim.top-a.prev)/(a.percent-a.prev)*E,a.status=a.initstatus,delete a.initstatus,a.stop&&Be.splice(t--,1)):a.status=(a.prev+(a.percent-a.prev)*(k/E))/a.anim.top,!(k<0))if(k<E){var re=P(k/E);for(var le in R)if(R[B](le)){switch(T[le]){case s:c=+R[le]+re*E*O[le];break;case"colour":c="rgb("+[Xt(u(R[le].r+re*E*O[le].r)),Xt(u(R[le].g+re*E*O[le].g)),Xt(u(R[le].b+re*E*O[le].b))].join(",")+")";break;case"path":c=[];for(var ie=0,Q=R[le].length;ie<Q;ie++){c[ie]=[R[le][ie][0]];for(var be=1,ce=R[le][ie].length;be<ce;be++)c[ie][be]=+R[le][ie][be]+re*E*O[le][ie][be];c[ie]=c[ie].join(me)}c=c.join(me);break;case"transform":if(O[le].real)for(c=[],ie=0,Q=R[le].length;ie<Q;ie++)for(c[ie]=[R[le][ie][0]],be=1,ce=R[le][ie].length;be<ce;be++)c[ie][be]=R[le][ie][be]+re*E*O[le][ie][be];else{var pe=function(Ee){return+R[le][Ee]+re*E*O[le][Ee]};c=[["m",pe(0),pe(1),pe(2),pe(3),pe(4),pe(5)]]}break;case"csv":if(le=="clip-rect")for(c=[],ie=4;ie--;)c[ie]=+R[le][ie]+re*E*O[le][ie];break;default:var ue=[][j](R[le]);for(c=[],ie=ae.paper.customAttributes[le].length;ie--;)c[ie]=+ue[ie]+re*E*O[le][ie]}K[le]=c}ae.attr(K),function(Ee,Pe,Re){setTimeout(function(){o("raphael.anim.frame."+Ee,Pe,Re)})}(ae.id,ae,a.anim)}else{if(function(Ee,Pe,Re){setTimeout(function(){o("raphael.anim.frame."+Pe.id,Pe,Re),o("raphael.anim.finish."+Pe.id,Pe,Re),h.is(Ee,"function")&&Ee.call(Pe)})}(a.callback,ae,a.anim),ae.attr(J),Be.splice(t--,1),a.repeat>1&&!a.next){for(g in J)J[B](g)&&(Y[g]=a.totalOrigin[g]);a.el.attr(Y),At(a.anim,a.el,a.anim.percents[0],null,a.totalOrigin,a.repeat-1)}a.next&&!a.stop&&At(a.anim,a.el,a.next,null,a.totalOrigin,a.repeat)}}}Be.length&&a1(Wt)},Xt=function(e){return e>255?255:e<0?0:e};function $1(e,t,a,c,g,k){var E=3*t,P=3*(c-t)-E,R=1-E-P,O=3*a,J=3*(g-a)-O,ae=1-O-J;function K(Y){return((R*Y+P)*Y+E)*Y}return function(Y,re){var le=function(ie,Q){var be,ce,pe,ue,Ee,Pe;for(pe=ie,Pe=0;Pe<8;Pe++){if(ue=K(pe)-ie,xe(ue)<Q)return pe;if(xe(Ee=(3*R*pe+2*P)*pe+E)<1e-6)break;pe-=ue/Ee}if(ce=1,(pe=ie)<(be=0))return be;if(pe>ce)return ce;for(;be<ce;){if(ue=K(pe),xe(ue-ie)<Q)return pe;ie>ue?be=pe:ce=pe,pe=(ce-be)/2+be}return pe}(Y,re);return((ae*le+J)*le+O)*le}(e,1/(200*k))}function Xe(e,t){var a=[],c={};if(this.ms=t,this.times=1,e){for(var g in e)e[B](g)&&(c[m(g)]=e[g],a.push(m(g)));a.sort(Se)}this.anim=c,this.top=a[a.length-1],this.percents=a}function At(e,t,a,c,g,k){a=m(a);var E,P,R,O,J,ae,K=e.ms,Y={},re={},le={};if(c)for(Q=0,be=Be.length;Q<be;Q++){var ie=Be[Q];if(ie.el.id==t.id&&ie.anim==e){ie.percent!=a?(Be.splice(Q,1),R=1):P=ie,t.attr(ie.totalOrigin);break}}else c=+re;for(var Q=0,be=e.percents.length;Q<be;Q++){if(e.percents[Q]==a||e.percents[Q]>c*e.top){a=e.percents[Q],J=e.percents[Q-1]||0,K=K/e.top*(a-J),O=e.percents[Q+1],E=e.anim[a];break}c&&t.attr(e.anim[e.percents[Q]])}if(E){if(P)P.initstatus=c,P.start=new Date-P.ms*c;else{for(var ce in E)if(E[B](ce)&&(T[B](ce)||t.paper.customAttributes[B](ce)))switch(Y[ce]=t.attr(ce),Y[ce]==null&&(Y[ce]=I[ce]),re[ce]=E[ce],T[ce]){case s:le[ce]=(re[ce]-Y[ce])/K;break;case"colour":Y[ce]=h.getRGB(Y[ce]);var pe=h.getRGB(re[ce]);le[ce]={r:(pe.r-Y[ce].r)/K,g:(pe.g-Y[ce].g)/K,b:(pe.b-Y[ce].b)/K};break;case"path":var ue=St(Y[ce],re[ce]),Ee=ue[1];for(Y[ce]=ue[0],le[ce]=[],Q=0,be=Y[ce].length;Q<be;Q++){le[ce][Q]=[0];for(var Pe=1,Re=Y[ce][Q].length;Pe<Re;Pe++)le[ce][Q][Pe]=(Ee[Q][Pe]-Y[ce][Q][Pe])/K}break;case"transform":var mt=t._,Et=q1(mt[ce],re[ce]);if(Et)for(Y[ce]=Et.from,re[ce]=Et.to,le[ce]=[],le[ce].real=!0,Q=0,be=Y[ce].length;Q<be;Q++)for(le[ce][Q]=[Y[ce][Q][0]],Pe=1,Re=Y[ce][Q].length;Pe<Re;Pe++)le[ce][Q][Pe]=(re[ce][Q][Pe]-Y[ce][Q][Pe])/K;else{var Ve=t.matrix||new rt,We={_:{transform:mt.transform},getBBox:function(){return t.getBBox(1)}};Y[ce]=[Ve.a,Ve.b,Ve.c,Ve.d,Ve.e,Ve.f],e1(We,re[ce]),re[ce]=We._.transform,le[ce]=[(We.matrix.a-Ve.a)/K,(We.matrix.b-Ve.b)/K,(We.matrix.c-Ve.c)/K,(We.matrix.d-Ve.d)/K,(We.matrix.e-Ve.e)/K,(We.matrix.f-Ve.f)/K]}break;case"csv":var gt=G(E[ce])[he](M),vt=G(Y[ce])[he](M);if(ce=="clip-rect")for(Y[ce]=vt,le[ce]=[],Q=vt.length;Q--;)le[ce][Q]=(gt[Q]-Y[ce][Q])/K;re[ce]=gt;break;default:for(gt=[][j](E[ce]),vt=[][j](Y[ce]),le[ce]=[],Q=t.paper.customAttributes[ce].length;Q--;)le[ce][Q]=((gt[Q]||0)-(vt[Q]||0))/K}var Dt=E.easing,Ye=h.easing_formulas[Dt];if(!Ye)if((Ye=G(Dt).match(i))&&Ye.length==5){var st=Ye;Ye=function(qt){return $1(qt,+st[1],+st[2],+st[3],+st[4],K)}}else Ye=Ae;if(ie={anim:e,percent:a,timestamp:ae=E.start||e.start||+new Date,start:ae+(e.del||0),status:0,initstatus:c||0,stop:!1,ms:K,easing:Ye,from:Y,diff:le,to:re,el:t,callback:E.callback,prev:J,next:O,repeat:k||e.times,origin:t.attr(),totalOrigin:g},Be.push(ie),c&&!P&&!R&&(ie.stop=!0,ie.start=new Date-K*c,Be.length==1))return Wt();R&&(ie.start=new Date-ie.ms*c),Be.length==1&&a1(Wt)}o("raphael.anim.start."+t.id,t,e)}}function l1(e){for(var t=0;t<Be.length;t++)Be[t].el.paper==e&&Be.splice(t--,1)}Te.animateWith=function(e,t,a,c,g,k){if(this.removed)return k&&k.call(this),this;var E=a instanceof Xe?a:h.animation(a,c,g,k);At(E,this,E.percents[0],null,this.attr());for(var P=0,R=Be.length;P<R;P++)if(Be[P].anim==t&&Be[P].el==e){Be[R-1].start=Be[P].start;break}return this},Te.onAnimation=function(e){return e?o.on("raphael.anim.frame."+this.id,e):o.unbind("raphael.anim.frame."+this.id),this},Xe.prototype.delay=function(e){var t=new Xe(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},Xe.prototype.repeat=function(e){var t=new Xe(this.anim,this.ms);return t.del=this.del,t.times=de.floor(we(e,0))||1,t},h.animation=function(e,t,a,c){if(e instanceof Xe)return e;!h.is(a,"function")&&a||(c=c||a||null,a=null),e=Object(e),t=+t||0;var g,k,E={};for(k in e)e[B](k)&&m(k)!=k&&m(k)+"%"!=k&&(g=!0,E[k]=e[k]);if(g)return a&&(E.easing=a),c&&(E.callback=c),new Xe({100:E},t);if(c){var P=0;for(var R in e){var O=x(R);e[B](R)&&O>P&&(P=O)}!e[P+="%"].callback&&(e[P].callback=c)}return new Xe(e,t)},Te.animate=function(e,t,a,c){if(this.removed)return c&&c.call(this),this;var g=e instanceof Xe?e:h.animation(e,t,a,c);return At(g,this,g.percents[0],null,this.attr()),this},Te.setTime=function(e,t){return e&&t!=null&&this.status(e,X(t,e.ms)/e.ms),this},Te.status=function(e,t){var a,c,g=[],k=0;if(t!=null)return At(e,this,-1,X(t,1)),this;for(a=Be.length;k<a;k++)if((c=Be[k]).el.id==this.id&&(!e||c.anim==e)){if(e)return c.status;g.push({anim:c.anim,status:c.status})}return e?0:g},Te.pause=function(e){for(var t=0;t<Be.length;t++)Be[t].el.id!=this.id||e&&Be[t].anim!=e||o("raphael.anim.pause."+this.id,this,Be[t].anim)!==!1&&(Be[t].paused=!0);return this},Te.resume=function(e){for(var t=0;t<Be.length;t++)if(Be[t].el.id==this.id&&(!e||Be[t].anim==e)){var a=Be[t];o("raphael.anim.resume."+this.id,this,a.anim)!==!1&&(delete a.paused,this.status(a.anim,a.status))}return this},Te.stop=function(e){for(var t=0;t<Be.length;t++)Be[t].el.id!=this.id||e&&Be[t].anim!=e||o("raphael.anim.stop."+this.id,this,Be[t].anim)!==!1&&Be.splice(t--,1);return this},o.on("raphael.remove",l1),o.on("raphael.clear",l1),Te.toString=function(){return"Rapha├лlтАЩs object"};var c1,u1,it,h1,Pt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,a=e.length;t<a;t++)!e[t]||e[t].constructor!=Te.constructor&&e[t].constructor!=Pt||(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},Fe=Pt.prototype;for(var Yt in Fe.push=function(){for(var e,t,a=0,c=arguments.length;a<c;a++)!(e=arguments[a])||e.constructor!=Te.constructor&&e.constructor!=Pt||(this[t=this.items.length]=this.items[t]=e,this.length++);return this},Fe.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Fe.forEach=function(e,t){for(var a=0,c=this.items.length;a<c;a++)if(e.call(t,this.items[a],a)===!1)return this;return this},Te)Te[B](Yt)&&(Fe[Yt]=function(e){return function(){var t=arguments;return this.forEach(function(a){a[e][$](a,t)})}}(Yt));return Fe.attr=function(e,t){if(e&&h.is(e,l)&&h.is(e[0],"object"))for(var a=0,c=e.length;a<c;a++)this.items[a].attr(e[a]);else for(var g=0,k=this.items.length;g<k;g++)this.items[g].attr(e,t);return this},Fe.clear=function(){for(;this.length;)this.pop()},Fe.splice=function(e,t,a){e=e<0?we(this.length+e,0):e,t=we(0,X(this.length-e,t));var c,g=[],k=[],E=[];for(c=2;c<arguments.length;c++)E.push(arguments[c]);for(c=0;c<t;c++)k.push(this[e+c]);for(;c<this.length-e;c++)g.push(this[e+c]);var P=E.length;for(c=0;c<P+g.length;c++)this.items[e+c]=this[e+c]=c<P?E[c]:g[c-P];for(c=this.items.length=this.length-=t-P;this[c];)delete this[c++];return new Pt(k)},Fe.exclude=function(e){for(var t=0,a=this.length;t<a;t++)if(this[t]==e)return this.splice(t,1),!0},Fe.animate=function(e,t,a,c){(h.is(a,"function")||!a)&&(c=a||null);var g,k,E=this.items.length,P=E,R=this;if(!E)return this;c&&(k=function(){!--E&&c.call(R)}),a=h.is(a,"string")?a:k;var O=h.animation(e,t,a,k);for(g=this.items[--P].animate(O);P--;)this.items[P]&&!this.items[P].removed&&this.items[P].animateWith(g,O,O),this.items[P]&&!this.items[P].removed||E--;return this},Fe.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},Fe.getBBox=function(){for(var e=[],t=[],a=[],c=[],g=this.items.length;g--;)if(!this.items[g].removed){var k=this.items[g].getBBox();e.push(k.x),t.push(k.y),a.push(k.x+k.width),c.push(k.y+k.height)}return{x:e=X[$](0,e),y:t=X[$](0,t),x2:a=we[$](0,a),y2:c=we[$](0,c),width:a-e,height:c-t}},Fe.clone=function(e){e=this.paper.set();for(var t=0,a=this.items.length;t<a;t++)e.push(this.items[t].clone());return e},Fe.toString=function(){return"Rapha├лlтАШs set"},Fe.glow=function(e){var t=this.paper.set();return this.forEach(function(a,c){var g=a.glow(e);g!=null&&g.forEach(function(k,E){t.push(k)})}),t},Fe.isPointInside=function(e,t){var a=!1;return this.forEach(function(c){if(c.isPointInside(e,t))return a=!0,!1}),a},h.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},a=e.face["font-family"];for(var c in e.face)e.face[B](c)&&(t.face[c]=e.face[c]);if(this.fonts[a]?this.fonts[a].push(t):this.fonts[a]=[t],!e.svg){for(var g in t.face["units-per-em"]=x(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[B](g)){var k=e.glyphs[g];if(t.glyphs[g]={w:k.w,k:{},d:k.d&&"M"+k.d.replace(/[mlcxtrv]/g,function(P){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[P]||"M"})+"z"},k.k)for(var E in k.k)k[B](E)&&(t.glyphs[g].k[E]=k.k[E])}}return e},w.getFont=function(e,t,a,c){if(c=c||"normal",a=a||"normal",t=+t||{normal:400,bold:700,lighter:300,bolder:800}[t]||400,h.fonts){var g,k=h.fonts[e];if(!k){var E=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,oe)+"(\\s|$)","i");for(var P in h.fonts)if(h.fonts[B](P)&&E.test(P)){k=h.fonts[P];break}}if(k)for(var R=0,O=k.length;R<O&&((g=k[R]).face["font-weight"]!=t||g.face["font-style"]!=a&&g.face["font-style"]||g.face["font-stretch"]!=c);R++);return g}},w.print=function(e,t,a,c,g,k,E,P){k=k||"middle",E=we(X(E||0,1),-1),P=we(X(P||1,3),1);var R,O=G(a)[he](oe),J=0,ae=0,K=oe;if(h.is(c,"string")&&(c=this.getFont(c)),c){R=(g||16)/c.face["units-per-em"];for(var Y=c.face.bbox[he](M),re=+Y[0],le=Y[3]-Y[1],ie=0,Q=+Y[1]+(k=="baseline"?le+ +c.face.descent:le/2),be=0,ce=O.length;be<ce;be++){if(O[be]==`
`)J=0,ue=0,ae=0,ie+=le*P;else{var pe=ae&&c.glyphs[O[be-1]]||{},ue=c.glyphs[O[be]];J+=ae?(pe.w||c.w)+(pe.k&&pe.k[O[be]]||0)+c.w*E:0,ae=1}ue&&ue.d&&(K+=h.transformPath(ue.d,["t",J*R,ie*R,"s",R,R,re,Q,"t",(e-re)/R,(t-Q)/R]))}}return this.path(K).attr({fill:"#000",stroke:"none"})},w.add=function(e){if(h.is(e,"array"))for(var t,a=this.set(),c=0,g=e.length;c<g;c++)t=e[c]||{},F[B](t.type)&&a.push(this[t.type]().attr(t));return a},h.format=function(e,t){var a=h.is(t,l)?[0][j](t):arguments;return e&&h.is(e,"string")&&a.length-1&&(e=e.replace(q,function(c,g){return a[++g]==null?oe:a[g]})),e||oe},h.fullfill=(c1=/\{([^\}]+)\}/g,u1=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,t){return String(e).replace(c1,function(a,c){return function(g,k,E){var P=E;return k.replace(u1,function(R,O,J,ae,K){O=O||ae,P&&(O in P&&(P=P[O]),typeof P=="function"&&K&&(P=P()))}),P=(P==null||P==E?g:P)+""}(a,c,t)})}),h.ninja=function(){if(W.was)L.win.Raphael=W.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return h},h.st=Fe,o.on("raphael.DOMload",function(){v=!0}),(it=document).readyState==null&&it.addEventListener&&(it.addEventListener("DOMContentLoaded",h1=function(){it.removeEventListener("DOMContentLoaded",h1,!1),it.readyState="complete"},!1),it.readyState="loading"),function e(){/in/.test(it.readyState)?setTimeout(e,9):h.eve("raphael.DOMload")}(),h}.apply(H,b))===void 0||(N.exports=C)},function(N,H,f){var b,C;b=[f(0),f(3),f(4)],(C=function(o){return o}.apply(H,b))===void 0||(N.exports=C)},function(N,H,f){var b,C,o,h,v,w,M,F,q,B,L,W,Z,$;h="hasOwnProperty",v=/[\.\/]/,w=/\s*,\s*/,M=function(j,te){return j-te},F={n:{}},q=function(){for(var j=0,te=this.length;j<te;j++)if(this[j]!==void 0)return this[j]},B=function(){for(var j=this.length;--j;)if(this[j]!==void 0)return this[j]},L=Object.prototype.toString,W=String,Z=Array.isArray||function(j){return j instanceof Array||L.call(j)=="[object Array]"},($=function(j,te){var oe,me=o,G=Array.prototype.slice.call(arguments,2),he=$.listeners(j),se=0,z=[],ge={},de=[],we=C;de.firstDefined=q,de.lastDefined=B,C=j,o=0;for(var X=0,xe=he.length;X<xe;X++)"zIndex"in he[X]&&(z.push(he[X].zIndex),he[X].zIndex<0&&(ge[he[X].zIndex]=he[X]));for(z.sort(M);z[se]<0;)if(oe=ge[z[se++]],de.push(oe.apply(te,G)),o)return o=me,de;for(X=0;X<xe;X++)if("zIndex"in(oe=he[X]))if(oe.zIndex==z[se]){if(de.push(oe.apply(te,G)),o)break;do if((oe=ge[z[++se]])&&de.push(oe.apply(te,G)),o)break;while(oe)}else ge[oe.zIndex]=oe;else if(de.push(oe.apply(te,G)),o)break;return o=me,C=we,de})._events=F,$.listeners=function(j){var te,oe,me,G,he,se,z,ge,de=Z(j)?j:j.split(v),we=F,X=[we],xe=[];for(G=0,he=de.length;G<he;G++){for(ge=[],se=0,z=X.length;se<z;se++)for(oe=[(we=X[se].n)[de[G]],we["*"]],me=2;me--;)(te=oe[me])&&(ge.push(te),xe=xe.concat(te.f||[]));X=ge}return xe},$.separator=function(j){j?(j="["+(j=W(j).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",v=new RegExp(j)):v=/[\.\/]/},$.on=function(j,te){if(typeof te!="function")return function(){};for(var oe=Z(j)?Z(j[0])?j:[j]:W(j).split(w),me=0,G=oe.length;me<G;me++)(function(he){for(var se,z=Z(he)?he:W(he).split(v),ge=F,de=0,we=z.length;de<we;de++)ge=(ge=ge.n).hasOwnProperty(z[de])&&ge[z[de]]||(ge[z[de]]={n:{}});for(ge.f=ge.f||[],de=0,we=ge.f.length;de<we;de++)if(ge.f[de]==te){se=!0;break}!se&&ge.f.push(te)})(oe[me]);return function(he){+he==+he&&(te.zIndex=+he)}},$.f=function(j){var te=[].slice.call(arguments,1);return function(){$.apply(null,[j,null].concat(te).concat([].slice.call(arguments,0)))}},$.stop=function(){o=1},$.nt=function(j){var te=Z(C)?C.join("."):C;return j?new RegExp("(?:\\.|\\/|^)"+j+"(?:\\.|\\/|$)").test(te):te},$.nts=function(){return Z(C)?C:C.split(v)},$.off=$.unbind=function(j,te){if(j){var oe=Z(j)?Z(j[0])?j:[j]:W(j).split(w);if(oe.length>1)for(var me=0,G=oe.length;me<G;me++)$.off(oe[me],te);else{oe=Z(j)?j:W(j).split(v);var he,se,z,ge,de,we=[F];for(me=0,G=oe.length;me<G;me++)for(ge=0;ge<we.length;ge+=z.length-2){if(z=[ge,1],he=we[ge].n,oe[me]!="*")he[oe[me]]&&z.push(he[oe[me]]);else for(se in he)he[h](se)&&z.push(he[se]);we.splice.apply(we,z)}for(me=0,G=we.length;me<G;me++)for(he=we[me];he.n;){if(te){if(he.f){for(ge=0,de=he.f.length;ge<de;ge++)if(he.f[ge]==te){he.f.splice(ge,1);break}!he.f.length&&delete he.f}for(se in he.n)if(he.n[h](se)&&he.n[se].f){var X=he.n[se].f;for(ge=0,de=X.length;ge<de;ge++)if(X[ge]==te){X.splice(ge,1);break}!X.length&&delete he.n[se].f}}else for(se in delete he.f,he.n)he.n[h](se)&&he.n[se].f&&delete he.n[se].f;he=he.n}}}else $._events=F={n:{}}},$.once=function(j,te){var oe=function(){return $.off(j,oe),te.apply(this,arguments)};return $.on(j,oe)},$.version="0.5.0",$.toString=function(){return"You are running Eve 0.5.0"},N.exports?N.exports=$:(b=function(){return $}.apply(H,[]))===void 0||(N.exports=b)},function(N,H,f){var b,C;b=[f(0)],(C=function(o){if(!o||o.svg){var h="hasOwnProperty",v=String,w=parseFloat,M=parseInt,F=Math,q=F.max,B=F.abs,L=F.pow,W=/[, ]+/,Z=o.eve,$="",j=" ",te="http://www.w3.org/1999/xlink",oe={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},me={};o.toString=function(){return`Your browser supports SVG.
You are running Rapha├лl `+this.version};var G=function(r,n){if(n)for(var i in typeof r=="string"&&(r=G(r)),n)n[h](i)&&(i.substring(0,6)=="xlink:"?r.setAttributeNS(te,i.substring(6),v(n[i])):r.setAttribute(i,v(n[i])));else(r=o._g.doc.createElementNS("http://www.w3.org/2000/svg",r)).style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},he=function(r,n){var i="linear",u=r.id+n,m=.5,x=.5,S=r.node,I=r.paper,T=S.style,V=o._g.doc.getElementById(u);if(!V){if(n=(n=v(n).replace(o._radial_gradient,function(Se,Ae,ke){if(i="radial",Ae&&ke){m=w(Ae);var Me=2*((x=w(ke))>.5)-1;L(m-.5,2)+L(x-.5,2)>.25&&(x=F.sqrt(.25-L(m-.5,2))*Me+.5)&&x!=.5&&(x=x.toFixed(5)-1e-5*Me)}return $})).split(/\s*\-\s*/),i=="linear"){var U=n.shift();if(U=-w(U),isNaN(U))return null;var ne=[0,0,F.cos(o.rad(U)),F.sin(o.rad(U))],fe=1/(q(B(ne[2]),B(ne[3]))||1);ne[2]*=fe,ne[3]*=fe,ne[2]<0&&(ne[0]=-ne[2],ne[2]=0),ne[3]<0&&(ne[1]=-ne[3],ne[3]=0)}var ve=o._parseDots(n);if(!ve)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),r.gradient&&u!=r.gradient.id&&(I.defs.removeChild(r.gradient),delete r.gradient),!r.gradient){V=G(i+"Gradient",{id:u}),r.gradient=V,G(V,i=="radial"?{fx:m,fy:x}:{x1:ne[0],y1:ne[1],x2:ne[2],y2:ne[3],gradientTransform:r.matrix.invert()}),I.defs.appendChild(V);for(var ye=0,_e=ve.length;ye<_e;ye++)V.appendChild(G("stop",{offset:ve[ye].offset?ve[ye].offset:ye?"100%":"0%","stop-color":ve[ye].color||"#fff","stop-opacity":isFinite(ve[ye].opacity)?ve[ye].opacity:1}))}}return G(S,{fill:se(u),opacity:1,"fill-opacity":1}),T.fill=$,T.opacity=1,T.fillOpacity=1,1},se=function(r){if((n=document.documentMode)&&(n===9||n===10))return"url('#"+r+"')";var n,i=document.location;return"url('"+(i.protocol+"//"+i.host+i.pathname+i.search)+"#"+r+"')"},z=function(r){var n=r.getBBox(1);G(r.pattern,{patternTransform:r.matrix.invert()+" translate("+n.x+","+n.y+")"})},ge=function(r,n,i){if(r.type=="path"){for(var u,m,x,S,I,T=v(n).toLowerCase().split("-"),V=r.paper,U=i?"end":"start",ne=r.node,fe=r.attrs,ve=fe["stroke-width"],ye=T.length,_e="classic",Se=3,Ae=3,ke=5;ye--;)switch(T[ye]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_e=T[ye];break;case"wide":Ae=5;break;case"narrow":Ae=2;break;case"long":Se=5;break;case"short":Se=2}if(_e=="open"?(Se+=2,Ae+=2,ke+=2,x=1,S=i?4:1,I={fill:"none",stroke:fe.stroke}):(S=x=Se/2,I={fill:fe.stroke,stroke:"none"}),r._.arrows?i?(r._.arrows.endPath&&me[r._.arrows.endPath]--,r._.arrows.endMarker&&me[r._.arrows.endMarker]--):(r._.arrows.startPath&&me[r._.arrows.startPath]--,r._.arrows.startMarker&&me[r._.arrows.startMarker]--):r._.arrows={},_e!="none"){var Me="raphael-marker-"+_e,Ne="raphael-marker-"+U+_e+Se+Ae+"-obj"+r.id;o._g.doc.getElementById(Me)?me[Me]++:(V.defs.appendChild(G(G("path"),{"stroke-linecap":"round",d:oe[_e],id:Me})),me[Me]=1);var Ie,Le=o._g.doc.getElementById(Ne);Le?(me[Ne]++,Ie=Le.getElementsByTagName("use")[0]):(Le=G(G("marker"),{id:Ne,markerHeight:Ae,markerWidth:Se,orient:"auto",refX:S,refY:Ae/2}),Ie=G(G("use"),{"xlink:href":"#"+Me,transform:(i?"rotate(180 "+Se/2+" "+Ae/2+") ":$)+"scale("+Se/ke+","+Ae/ke+")","stroke-width":(1/((Se/ke+Ae/ke)/2)).toFixed(4)}),Le.appendChild(Ie),V.defs.appendChild(Le),me[Ne]=1),G(Ie,I);var Oe=x*(_e!="diamond"&&_e!="oval");i?(u=r._.arrows.startdx*ve||0,m=o.getTotalLength(fe.path)-Oe*ve):(u=Oe*ve,m=o.getTotalLength(fe.path)-(r._.arrows.enddx*ve||0)),(I={})["marker-"+U]="url(#"+Ne+")",(m||u)&&(I.d=o.getSubpath(fe.path,u,m)),G(ne,I),r._.arrows[U+"Path"]=Me,r._.arrows[U+"Marker"]=Ne,r._.arrows[U+"dx"]=Oe,r._.arrows[U+"Type"]=_e,r._.arrows[U+"String"]=n}else i?(u=r._.arrows.startdx*ve||0,m=o.getTotalLength(fe.path)-u):(u=0,m=o.getTotalLength(fe.path)-(r._.arrows.enddx*ve||0)),r._.arrows[U+"Path"]&&G(ne,{d:o.getSubpath(fe.path,u,m)}),delete r._.arrows[U+"Path"],delete r._.arrows[U+"Marker"],delete r._.arrows[U+"dx"],delete r._.arrows[U+"Type"],delete r._.arrows[U+"String"];for(I in me)if(me[h](I)&&!me[I]){var qe=o._g.doc.getElementById(I);qe&&qe.parentNode.removeChild(qe)}}},de={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},we=function(r,n,i){if(n=de[v(n).toLowerCase()]){for(var u=r.attrs["stroke-width"]||"1",m={round:u,square:u,butt:0}[r.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,x=[],S=n.length;S--;)x[S]=n[S]*u+(S%2?1:-1)*m;G(r.node,{"stroke-dasharray":x.join(",")})}else G(r.node,{"stroke-dasharray":"none"})},X=function(r,n){var i=r.node,u=r.attrs,m=i.style.visibility;for(var x in i.style.visibility="hidden",n)if(n[h](x)){if(!o._availableAttrs[h](x))continue;var S=n[x];switch(u[x]=S,x){case"blur":r.blur(S);break;case"title":var I=i.getElementsByTagName("title");if(I.length&&(I=I[0]))I.firstChild.nodeValue=S;else{I=G("title");var T=o._g.doc.createTextNode(S);I.appendChild(T),i.appendChild(I)}break;case"href":case"target":var V=i.parentNode;if(V.tagName.toLowerCase()!="a"){var U=G("a");V.insertBefore(U,i),U.appendChild(i),V=U}x=="target"?V.setAttributeNS(te,"show",S=="blank"?"new":S):V.setAttributeNS(te,x,S);break;case"cursor":i.style.cursor=S;break;case"transform":r.transform(S);break;case"arrow-start":ge(r,S);break;case"arrow-end":ge(r,S,1);break;case"clip-rect":var ne=v(S).split(W);if(ne.length==4){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var fe=G("clipPath"),ve=G("rect");fe.id=o.createUUID(),G(ve,{x:ne[0],y:ne[1],width:ne[2],height:ne[3]}),fe.appendChild(ve),r.paper.defs.appendChild(fe),G(i,{"clip-path":"url(#"+fe.id+")"}),r.clip=ve}if(!S){var ye=i.getAttribute("clip-path");if(ye){var _e=o._g.doc.getElementById(ye.replace(/(^url\(#|\)$)/g,$));_e&&_e.parentNode.removeChild(_e),G(i,{"clip-path":$}),delete r.clip}}break;case"path":r.type=="path"&&(G(i,{d:S?u.path=o._pathToAbsolute(S):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&ge(r,r._.arrows.startString),"endString"in r._.arrows&&ge(r,r._.arrows.endString,1)));break;case"width":if(i.setAttribute(x,S),r._.dirty=1,!u.fx)break;x="x",S=u.x;case"x":u.fx&&(S=-u.x-(u.width||0));case"rx":if(x=="rx"&&r.type=="rect")break;case"cx":i.setAttribute(x,S),r.pattern&&z(r),r._.dirty=1;break;case"height":if(i.setAttribute(x,S),r._.dirty=1,!u.fy)break;x="y",S=u.y;case"y":u.fy&&(S=-u.y-(u.height||0));case"ry":if(x=="ry"&&r.type=="rect")break;case"cy":i.setAttribute(x,S),r.pattern&&z(r),r._.dirty=1;break;case"r":r.type=="rect"?G(i,{rx:S,ry:S}):i.setAttribute(x,S),r._.dirty=1;break;case"src":r.type=="image"&&i.setAttributeNS(te,"href",S);break;case"stroke-width":r._.sx==1&&r._.sy==1||(S/=q(B(r._.sx),B(r._.sy))||1),i.setAttribute(x,S),u["stroke-dasharray"]&&we(r,u["stroke-dasharray"],n),r._.arrows&&("startString"in r._.arrows&&ge(r,r._.arrows.startString),"endString"in r._.arrows&&ge(r,r._.arrows.endString,1));break;case"stroke-dasharray":we(r,S,n);break;case"fill":var Se=v(S).match(o._ISURL);if(Se){fe=G("pattern");var Ae=G("image");fe.id=o.createUUID(),G(fe,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),G(Ae,{x:0,y:0,"xlink:href":Se[1]}),fe.appendChild(Ae),function(Le){o._preload(Se[1],function(){var Oe=this.offsetWidth,qe=this.offsetHeight;G(Le,{width:Oe,height:qe}),G(Ae,{width:Oe,height:qe})})}(fe),r.paper.defs.appendChild(fe),G(i,{fill:"url(#"+fe.id+")"}),r.pattern=fe,r.pattern&&z(r);break}var ke=o.getRGB(S);if(ke.error){if((r.type=="circle"||r.type=="ellipse"||v(S).charAt()!="r")&&he(r,S)){if("opacity"in u||"fill-opacity"in u){var Me=o._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,$));if(Me){var Ne=Me.getElementsByTagName("stop");G(Ne[Ne.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=S,u.fill="none";break}}else delete n.gradient,delete u.gradient,!o.is(u.opacity,"undefined")&&o.is(n.opacity,"undefined")&&G(i,{opacity:u.opacity}),!o.is(u["fill-opacity"],"undefined")&&o.is(n["fill-opacity"],"undefined")&&G(i,{"fill-opacity":u["fill-opacity"]});ke[h]("opacity")&&G(i,{"fill-opacity":ke.opacity>1?ke.opacity/100:ke.opacity});case"stroke":ke=o.getRGB(S),i.setAttribute(x,ke.hex),x=="stroke"&&ke[h]("opacity")&&G(i,{"stroke-opacity":ke.opacity>1?ke.opacity/100:ke.opacity}),x=="stroke"&&r._.arrows&&("startString"in r._.arrows&&ge(r,r._.arrows.startString),"endString"in r._.arrows&&ge(r,r._.arrows.endString,1));break;case"gradient":(r.type=="circle"||r.type=="ellipse"||v(S).charAt()!="r")&&he(r,S);break;case"opacity":u.gradient&&!u[h]("stroke-opacity")&&G(i,{"stroke-opacity":S>1?S/100:S});case"fill-opacity":if(u.gradient){(Me=o._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,$)))&&(Ne=Me.getElementsByTagName("stop"),G(Ne[Ne.length-1],{"stop-opacity":S}));break}default:x=="font-size"&&(S=M(S,10)+"px");var Ie=x.replace(/(\-.)/g,function(Le){return Le.substring(1).toUpperCase()});i.style[Ie]=S,r._.dirty=1,i.setAttribute(x,S)}}xe(r,n),i.style.visibility=m},xe=function(r,n){if(r.type=="text"&&(n[h]("text")||n[h]("font")||n[h]("font-size")||n[h]("x")||n[h]("y"))){var i=r.attrs,u=r.node,m=u.firstChild?M(o._g.doc.defaultView.getComputedStyle(u.firstChild,$).getPropertyValue("font-size"),10):10;if(n[h]("text")){for(i.text=n.text;u.firstChild;)u.removeChild(u.firstChild);for(var x,S=v(n.text).split(`
`),I=[],T=0,V=S.length;T<V;T++)x=G("tspan"),T&&G(x,{dy:1.2*m,x:i.x}),x.appendChild(o._g.doc.createTextNode(S[T])),u.appendChild(x),I[T]=x}else for(T=0,V=(I=u.getElementsByTagName("tspan")).length;T<V;T++)T?G(I[T],{dy:1.2*m,x:i.x}):G(I[0],{dy:0});G(u,{x:i.x,y:i.y}),r._.dirty=1;var U=r._getBBox(),ne=i.y-(U.y+U.height/2);ne&&o.is(ne,"finite")&&G(I[0],{dy:ne})}},Ce=function(r){return r.parentNode&&r.parentNode.tagName.toLowerCase()==="a"?r.parentNode:r},ee=function(r,n){this[0]=this.node=r,r.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),r.raphaelid=this.id,this.matrix=o.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},s=o.el;ee.prototype=s,s.constructor=ee,o._engine.path=function(r,n){var i=G("path");n.canvas&&n.canvas.appendChild(i);var u=new ee(i,n);return u.type="path",X(u,{fill:"none",stroke:"#000",path:r}),u},s.rotate=function(r,n,i){if(this.removed)return this;if((r=v(r).split(W)).length-1&&(n=w(r[1]),i=w(r[2])),r=w(r[0]),i==null&&(n=i),n==null||i==null){var u=this.getBBox(1);n=u.x+u.width/2,i=u.y+u.height/2}return this.transform(this._.transform.concat([["r",r,n,i]])),this},s.scale=function(r,n,i,u){if(this.removed)return this;if((r=v(r).split(W)).length-1&&(n=w(r[1]),i=w(r[2]),u=w(r[3])),r=w(r[0]),n==null&&(n=r),u==null&&(i=u),i==null||u==null)var m=this.getBBox(1);return i=i==null?m.x+m.width/2:i,u=u==null?m.y+m.height/2:u,this.transform(this._.transform.concat([["s",r,n,i,u]])),this},s.translate=function(r,n){return this.removed?this:((r=v(r).split(W)).length-1&&(n=w(r[1])),r=w(r[0])||0,n=+n||0,this.transform(this._.transform.concat([["t",r,n]])),this)},s.transform=function(r){var n=this._;if(r==null)return n.transform;if(o._extractTransform(this,r),this.clip&&G(this.clip,{transform:this.matrix.invert()}),this.pattern&&z(this),this.node&&G(this.node,{transform:this.matrix}),n.sx!=1||n.sy!=1){var i=this.attrs[h]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},s.hide=function(){return this.removed||(this.node.style.display="none"),this},s.show=function(){return this.removed||(this.node.style.display=""),this},s.remove=function(){var r=Ce(this.node);if(!this.removed&&r.parentNode){var n=this.paper;for(var i in n.__set__&&n.__set__.exclude(this),Z.unbind("raphael.*.*."+this.id),this.gradient&&n.defs.removeChild(this.gradient),o._tear(this,n),r.parentNode.removeChild(r),this.removeData(),this)this[i]=typeof this[i]=="function"?o._removedFactory(i):null;this.removed=!0}},s._getBBox=function(){if(this.node.style.display=="none"){this.show();var r=!0}var n,i=!1;this.paper.canvas.parentElement?n=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(n=this.paper.canvas.parentNode.style),n&&n.display=="none"&&(i=!0,n.display="");var u={};try{u=this.node.getBBox()}catch(m){u={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{u=u||{},i&&(n.display="none")}return r&&this.hide(),u},s.attr=function(r,n){if(this.removed)return this;if(r==null){var i={};for(var u in this.attrs)this.attrs[h](u)&&(i[u]=this.attrs[u]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(n==null&&o.is(r,"string")){if(r=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(r=="transform")return this._.transform;for(var m=r.split(W),x={},S=0,I=m.length;S<I;S++)(r=m[S])in this.attrs?x[r]=this.attrs[r]:o.is(this.paper.customAttributes[r],"function")?x[r]=this.paper.customAttributes[r].def:x[r]=o._availableAttrs[r];return I-1?x:x[m[0]]}if(n==null&&o.is(r,"array")){for(x={},S=0,I=r.length;S<I;S++)x[r[S]]=this.attr(r[S]);return x}if(n!=null){var T={};T[r]=n}else r!=null&&o.is(r,"object")&&(T=r);for(var V in T)Z("raphael.attr."+V+"."+this.id,this,T[V]);for(V in this.paper.customAttributes)if(this.paper.customAttributes[h](V)&&T[h](V)&&o.is(this.paper.customAttributes[V],"function")){var U=this.paper.customAttributes[V].apply(this,[].concat(T[V]));for(var ne in this.attrs[V]=T[V],U)U[h](ne)&&(T[ne]=U[ne])}return X(this,T),this},s.toFront=function(){if(this.removed)return this;var r=Ce(this.node);r.parentNode.appendChild(r);var n=this.paper;return n.top!=this&&o._tofront(this,n),this},s.toBack=function(){if(this.removed)return this;var r=Ce(this.node),n=r.parentNode;return n.insertBefore(r,n.firstChild),o._toback(this,this.paper),this.paper,this},s.insertAfter=function(r){if(this.removed||!r)return this;var n=Ce(this.node),i=Ce(r.node||r[r.length-1].node);return i.nextSibling?i.parentNode.insertBefore(n,i.nextSibling):i.parentNode.appendChild(n),o._insertafter(this,r,this.paper),this},s.insertBefore=function(r){if(this.removed||!r)return this;var n=Ce(this.node),i=Ce(r.node||r[0].node);return i.parentNode.insertBefore(n,i),o._insertbefore(this,r,this.paper),this},s.blur=function(r){var n=this;if(+r!=0){var i=G("filter"),u=G("feGaussianBlur");n.attrs.blur=r,i.id=o.createUUID(),G(u,{stdDeviation:+r||1.5}),i.appendChild(u),n.paper.defs.appendChild(i),n._blur=i,G(n.node,{filter:"url(#"+i.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter");return n},o._engine.circle=function(r,n,i,u){var m=G("circle");r.canvas&&r.canvas.appendChild(m);var x=new ee(m,r);return x.attrs={cx:n,cy:i,r:u,fill:"none",stroke:"#000"},x.type="circle",G(m,x.attrs),x},o._engine.rect=function(r,n,i,u,m,x){var S=G("rect");r.canvas&&r.canvas.appendChild(S);var I=new ee(S,r);return I.attrs={x:n,y:i,width:u,height:m,rx:x||0,ry:x||0,fill:"none",stroke:"#000"},I.type="rect",G(S,I.attrs),I},o._engine.ellipse=function(r,n,i,u,m){var x=G("ellipse");r.canvas&&r.canvas.appendChild(x);var S=new ee(x,r);return S.attrs={cx:n,cy:i,rx:u,ry:m,fill:"none",stroke:"#000"},S.type="ellipse",G(x,S.attrs),S},o._engine.image=function(r,n,i,u,m,x){var S=G("image");G(S,{x:i,y:u,width:m,height:x,preserveAspectRatio:"none"}),S.setAttributeNS(te,"href",n),r.canvas&&r.canvas.appendChild(S);var I=new ee(S,r);return I.attrs={x:i,y:u,width:m,height:x,src:n},I.type="image",I},o._engine.text=function(r,n,i,u){var m=G("text");r.canvas&&r.canvas.appendChild(m);var x=new ee(m,r);return x.attrs={x:n,y:i,"text-anchor":"middle",text:u,"font-family":o._availableAttrs["font-family"],"font-size":o._availableAttrs["font-size"],stroke:"none",fill:"#000"},x.type="text",X(x,x.attrs),x},o._engine.setSize=function(r,n){return this.width=r||this.width,this.height=n||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},o._engine.create=function(){var r=o._getContainer.apply(0,arguments),n=r&&r.container;if(!n)throw new Error("SVG container not found.");var i,u=r.x,m=r.y,x=r.width,S=r.height,I=G("svg"),T="overflow:hidden;";return u=u||0,m=m||0,G(I,{height:S=S||342,version:1.1,width:x=x||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),n==1?(I.style.cssText=T+"position:absolute;left:"+u+"px;top:"+m+"px",o._g.doc.body.appendChild(I),i=1):(I.style.cssText=T+"position:relative",n.firstChild?n.insertBefore(I,n.firstChild):n.appendChild(I)),(n=new o._Paper).width=x,n.height=S,n.canvas=I,n.clear(),n._left=n._top=0,i&&(n.renderfix=function(){}),n.renderfix(),n},o._engine.setViewBox=function(r,n,i,u,m){Z("raphael.setViewBox",this,this._viewBox,[r,n,i,u,m]);var x,S,I=this.getSize(),T=q(i/I.width,u/I.height),V=this.top,U=m?"xMidYMid meet":"xMinYMin";for(r==null?(this._vbSize&&(T=1),delete this._vbSize,x="0 0 "+this.width+j+this.height):(this._vbSize=T,x=r+j+n+j+i+j+u),G(this.canvas,{viewBox:x,preserveAspectRatio:U});T&&V;)S="stroke-width"in V.attrs?V.attrs["stroke-width"]:1,V.attr({"stroke-width":S}),V._.dirty=1,V._.dirtyT=1,V=V.prev;return this._viewBox=[r,n,i,u,!!m],this},o.prototype.renderfix=function(){var r,n=this.canvas,i=n.style;try{r=n.getScreenCTM()||n.createSVGMatrix()}catch(x){r=n.createSVGMatrix()}var u=-r.e%1,m=-r.f%1;(u||m)&&(u&&(this._left=(this._left+u)%1,i.left=this._left+"px"),m&&(this._top=(this._top+m)%1,i.top=this._top+"px"))},o.prototype.clear=function(){o.eve("raphael.clear",this);for(var r=this.canvas;r.firstChild;)r.removeChild(r.firstChild);this.bottom=this.top=null,(this.desc=G("desc")).appendChild(o._g.doc.createTextNode("Created with Rapha├лl "+o.version)),r.appendChild(this.desc),r.appendChild(this.defs=G("defs"))},o.prototype.remove=function(){for(var r in Z("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[r]=typeof this[r]=="function"?o._removedFactory(r):null};var l=o.st;for(var p in s)s[h](p)&&!l[h](p)&&(l[p]=function(r){return function(){var n=arguments;return this.forEach(function(i){i[r].apply(i,n)})}}(p))}}.apply(H,b))===void 0||(N.exports=C)},function(N,H,f){var b,C;b=[f(0)],(C=function(o){if(!o||o.vml){var h="hasOwnProperty",v=String,w=parseFloat,M=Math,F=M.round,q=M.max,B=M.min,L=M.abs,W=/[, ]+/,Z=o.eve,$=" ",j="",te={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},oe=/([clmz]),?([^clmz]*)/gi,me=/ progid:\S+Blur\([^\)]+\)/g,G=/-?[^,\s-]+/g,he="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",se=21600,z={path:1,rect:1,image:1},ge={circle:1,ellipse:1},de=function(n,i,u){var m=o.matrix();return m.rotate(-n,.5,.5),{dx:m.x(i,u),dy:m.y(i,u)}},we=function(n,i,u,m,x,S){var I=n._,T=n.matrix,V=I.fillpos,U=n.node,ne=U.style,fe=1,ve="",ye=se/i,_e=se/u;if(ne.visibility="hidden",i&&u){if(U.coordsize=L(ye)+$+L(_e),ne.rotation=S*(i*u<0?-1:1),S){var Se=de(S,m,x);m=Se.dx,x=Se.dy}if(i<0&&(ve+="x"),u<0&&(ve+=" y")&&(fe=-1),ne.flip=ve,U.coordorigin=m*-ye+$+x*-_e,V||I.fillsize){var Ae=U.getElementsByTagName("fill");Ae=Ae&&Ae[0],U.removeChild(Ae),V&&(Se=de(S,T.x(V[0],V[1]),T.y(V[0],V[1])),Ae.position=Se.dx*fe+$+Se.dy*fe),I.fillsize&&(Ae.size=I.fillsize[0]*L(i)+$+I.fillsize[1]*L(u)),U.appendChild(Ae)}ne.visibility="visible"}};o.toString=function(){return`Your browser doesnтАЩt support SVG. Falling down to VML.
You are running Rapha├лl `+this.version};var X,xe=function(n,i,u){for(var m=v(i).toLowerCase().split("-"),x=u?"end":"start",S=m.length,I="classic",T="medium",V="medium";S--;)switch(m[S]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":I=m[S];break;case"wide":case"narrow":V=m[S];break;case"long":case"short":T=m[S]}var U=n.node.getElementsByTagName("stroke")[0];U[x+"arrow"]=I,U[x+"arrowlength"]=T,U[x+"arrowwidth"]=V},Ce=function(n,i){n.attrs=n.attrs||{};var u=n.node,m=n.attrs,x=u.style,S=z[n.type]&&(i.x!=m.x||i.y!=m.y||i.width!=m.width||i.height!=m.height||i.cx!=m.cx||i.cy!=m.cy||i.rx!=m.rx||i.ry!=m.ry||i.r!=m.r),I=ge[n.type]&&(m.cx!=i.cx||m.cy!=i.cy||m.r!=i.r||m.rx!=i.rx||m.ry!=i.ry),T=n;for(var V in i)i[h](V)&&(m[V]=i[V]);if(S&&(m.path=o._getPath[n.type](n),n._.dirty=1),i.href&&(u.href=i.href),i.title&&(u.title=i.title),i.target&&(u.target=i.target),i.cursor&&(x.cursor=i.cursor),"blur"in i&&n.blur(i.blur),(i.path&&n.type=="path"||S)&&(u.path=function(ze){var Qe=/[ahqstv]/gi,ct=o._pathToAbsolute;if(v(ze).match(Qe)&&(ct=o._path2curve),Qe=/[clmz]/g,ct==o._pathToAbsolute&&!v(ze).match(Qe)){var Ue=v(ze).replace(oe,function(Zt,dt,ft){var Ze=[],Tt=dt.toLowerCase()=="m",nt=te[dt];return ft.replace(G,function(Mt){Tt&&Ze.length==2&&(nt+=Ze+te[dt=="m"?"l":"L"],Ze=[]),Ze.push(F(Mt*se))}),nt+Ze});return Ue}var ut,Ge,kt=ct(ze);Ue=[];for(var ht=0,_t=kt.length;ht<_t;ht++){ut=kt[ht],(Ge=kt[ht][0].toLowerCase())=="z"&&(Ge="x");for(var Ke=1,He=ut.length;Ke<He;Ke++)Ge+=F(ut[Ke]*se)+(Ke!=He-1?",":j);Ue.push(Ge)}return Ue.join($)}(~v(m.path).toLowerCase().indexOf("r")?o._pathToAbsolute(m.path):m.path),n._.dirty=1,n.type=="image"&&(n._.fillpos=[m.x,m.y],n._.fillsize=[m.width,m.height],we(n,1,1,0,0,0))),"transform"in i&&n.transform(i.transform),I){var U=+m.cx,ne=+m.cy,fe=+m.rx||+m.r||0,ve=+m.ry||+m.r||0;u.path=o.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",F((U-fe)*se),F((ne-ve)*se),F((U+fe)*se),F((ne+ve)*se),F(U*se)),n._.dirty=1}if("clip-rect"in i){var ye=v(i["clip-rect"]).split(W);if(ye.length==4){ye[2]=+ye[2]+ +ye[0],ye[3]=+ye[3]+ +ye[1];var _e=u.clipRect||o._g.doc.createElement("div"),Se=_e.style;Se.clip=o.format("rect({1}px {2}px {3}px {0}px)",ye),u.clipRect||(Se.position="absolute",Se.top=0,Se.left=0,Se.width=n.paper.width+"px",Se.height=n.paper.height+"px",u.parentNode.insertBefore(_e,u),_e.appendChild(u),u.clipRect=_e)}i["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto")}if(n.textpath){var Ae=n.textpath.style;i.font&&(Ae.font=i.font),i["font-family"]&&(Ae.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,j)+'"'),i["font-size"]&&(Ae.fontSize=i["font-size"]),i["font-weight"]&&(Ae.fontWeight=i["font-weight"]),i["font-style"]&&(Ae.fontStyle=i["font-style"])}if("arrow-start"in i&&xe(T,i["arrow-start"]),"arrow-end"in i&&xe(T,i["arrow-end"],1),i.opacity!=null||i.fill!=null||i.src!=null||i.stroke!=null||i["stroke-width"]!=null||i["stroke-opacity"]!=null||i["fill-opacity"]!=null||i["stroke-dasharray"]!=null||i["stroke-miterlimit"]!=null||i["stroke-linejoin"]!=null||i["stroke-linecap"]!=null){var ke=u.getElementsByTagName("fill");if(!(ke=ke&&ke[0])&&(ke=X("fill")),n.type=="image"&&i.src&&(ke.src=i.src),i.fill&&(ke.on=!0),ke.on!=null&&i.fill!="none"&&i.fill!==null||(ke.on=!1),ke.on&&i.fill){var Me=v(i.fill).match(o._ISURL);if(Me){ke.parentNode==u&&u.removeChild(ke),ke.rotate=!0,ke.src=Me[1],ke.type="tile";var Ne=n.getBBox(1);ke.position=Ne.x+$+Ne.y,n._.fillpos=[Ne.x,Ne.y],o._preload(Me[1],function(){n._.fillsize=[this.offsetWidth,this.offsetHeight]})}else ke.color=o.getRGB(i.fill).hex,ke.src=j,ke.type="solid",o.getRGB(i.fill).error&&(T.type in{circle:1,ellipse:1}||v(i.fill).charAt()!="r")&&ee(T,i.fill,ke)&&(m.fill="none",m.gradient=i.fill,ke.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var Ie=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+o.getRGB(i.fill).o+1||2)-1);Ie=B(q(Ie,0),1),ke.opacity=Ie,ke.src&&(ke.color="none")}u.appendChild(ke);var Le=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0],Oe=!1;!Le&&(Oe=Le=X("stroke")),(i.stroke&&i.stroke!="none"||i["stroke-width"]||i["stroke-opacity"]!=null||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])&&(Le.on=!0),(i.stroke=="none"||i.stroke===null||Le.on==null||i.stroke==0||i["stroke-width"]==0)&&(Le.on=!1);var qe=o.getRGB(i.stroke);Le.on&&i.stroke&&(Le.color=qe.hex),Ie=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+qe.o+1||2)-1);var je=.75*(w(i["stroke-width"])||1);if(Ie=B(q(Ie,0),1),i["stroke-width"]==null&&(je=m["stroke-width"]),i["stroke-width"]&&(Le.weight=je),je&&je<1&&(Ie*=je)&&(Le.weight=1),Le.opacity=Ie,i["stroke-linejoin"]&&(Le.joinstyle=i["stroke-linejoin"]||"miter"),Le.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(Le.endcap=i["stroke-linecap"]=="butt"?"flat":i["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in i){var wt={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Le.dashstyle=wt[h](i["stroke-dasharray"])?wt[i["stroke-dasharray"]]:j}Oe&&u.appendChild(Le)}if(T.type=="text"){T.paper.canvas.style.display=j;var Je=T.paper.span,ot=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);x=Je.style,m.font&&(x.font=m.font),m["font-family"]&&(x.fontFamily=m["font-family"]),m["font-weight"]&&(x.fontWeight=m["font-weight"]),m["font-style"]&&(x.fontStyle=m["font-style"]),ot=w(m["font-size"]||ot&&ot[0])||10,x.fontSize=100*ot+"px",T.textpath.string&&(Je.innerHTML=v(T.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var at=Je.getBoundingClientRect();T.W=m.w=(at.right-at.left)/100,T.H=m.h=(at.bottom-at.top)/100,T.X=m.x,T.Y=m.y+T.H/2,("x"in i||"y"in i)&&(T.path.v=o.format("m{0},{1}l{2},{1}",F(m.x*se),F(m.y*se),F(m.x*se)+1));for(var Ct=["x","y","text","font","font-family","font-weight","font-style","font-size"],lt=0,Nt=Ct.length;lt<Nt;lt++)if(Ct[lt]in i){T._.dirty=1;break}switch(m["text-anchor"]){case"start":T.textpath.style["v-text-align"]="left",T.bbx=T.W/2;break;case"end":T.textpath.style["v-text-align"]="right",T.bbx=-T.W/2;break;default:T.textpath.style["v-text-align"]="center",T.bbx=0}T.textpath.style["v-text-kern"]=!0}},ee=function(n,i,u){n.attrs=n.attrs||{},n.attrs;var m=Math.pow,x="linear",S=".5 .5";if(n.attrs.gradient=i,i=(i=v(i).replace(o._radial_gradient,function(fe,ve,ye){return x="radial",ve&&ye&&(ve=w(ve),ye=w(ye),m(ve-.5,2)+m(ye-.5,2)>.25&&(ye=M.sqrt(.25-m(ve-.5,2))*(2*(ye>.5)-1)+.5),S=ve+$+ye),j})).split(/\s*\-\s*/),x=="linear"){var I=i.shift();if(I=-w(I),isNaN(I))return null}var T=o._parseDots(i);if(!T)return null;if(n=n.shape||n.node,T.length){n.removeChild(u),u.on=!0,u.method="none",u.color=T[0].color,u.color2=T[T.length-1].color;for(var V=[],U=0,ne=T.length;U<ne;U++)T[U].offset&&V.push(T[U].offset+$+T[U].color);u.colors=V.length?V.join():"0% "+u.color,x=="radial"?(u.type="gradientTitle",u.focus="100%",u.focussize="0 0",u.focusposition=S,u.angle=0):(u.type="gradient",u.angle=(270-I)%360),n.appendChild(u)}return 1},s=function(n,i){this[0]=this.node=n,n.raphael=!0,this.id=o._oid++,n.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=i,this.matrix=o.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},l=o.el;s.prototype=l,l.constructor=s,l.transform=function(n){if(n==null)return this._.transform;var i,u=this.paper._viewBoxShift,m=u?"s"+[u.scale,u.scale]+"-1-1t"+[u.dx,u.dy]:j;u&&(i=n=v(n).replace(/\.{3}|\u2026/g,this._.transform||j)),o._extractTransform(this,m+n);var x,S=this.matrix.clone(),I=this.skew,T=this.node,V=~v(this.attrs.fill).indexOf("-"),U=!v(this.attrs.fill).indexOf("url(");if(S.translate(1,1),U||V||this.type=="image")if(I.matrix="1 0 0 1",I.offset="0 0",x=S.split(),V&&x.noRotation||!x.isSimple){T.style.filter=S.toFilter();var ne=this.getBBox(),fe=this.getBBox(1),ve=ne.x-fe.x,ye=ne.y-fe.y;T.coordorigin=ve*-se+$+ye*-se,we(this,1,1,ve,ye,0)}else T.style.filter=j,we(this,x.scalex,x.scaley,x.dx,x.dy,x.rotate);else T.style.filter=j,I.matrix=v(S),I.offset=S.offset();return i!==null&&(this._.transform=i,o._extractTransform(this,i)),this},l.rotate=function(n,i,u){if(this.removed)return this;if(n!=null){if((n=v(n).split(W)).length-1&&(i=w(n[1]),u=w(n[2])),n=w(n[0]),u==null&&(i=u),i==null||u==null){var m=this.getBBox(1);i=m.x+m.width/2,u=m.y+m.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",n,i,u]])),this}},l.translate=function(n,i){return this.removed?this:((n=v(n).split(W)).length-1&&(i=w(n[1])),n=w(n[0])||0,i=+i||0,this._.bbox&&(this._.bbox.x+=n,this._.bbox.y+=i),this.transform(this._.transform.concat([["t",n,i]])),this)},l.scale=function(n,i,u,m){if(this.removed)return this;if((n=v(n).split(W)).length-1&&(i=w(n[1]),u=w(n[2]),m=w(n[3]),isNaN(u)&&(u=null),isNaN(m)&&(m=null)),n=w(n[0]),i==null&&(i=n),m==null&&(u=m),u==null||m==null)var x=this.getBBox(1);return u=u==null?x.x+x.width/2:u,m=m==null?x.y+x.height/2:m,this.transform(this._.transform.concat([["s",n,i,u,m]])),this._.dirtyT=1,this},l.hide=function(){return!this.removed&&(this.node.style.display="none"),this},l.show=function(){return!this.removed&&(this.node.style.display=j),this},l.auxGetBBox=o.el.getBBox,l.getBBox=function(){var n=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var i={},u=1/this.paper._viewBoxShift.scale;return i.x=n.x-this.paper._viewBoxShift.dx,i.x*=u,i.y=n.y-this.paper._viewBoxShift.dy,i.y*=u,i.width=n.width*u,i.height=n.height*u,i.x2=i.x+i.width,i.y2=i.y+i.height,i}return n},l._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},l.remove=function(){if(!this.removed&&this.node.parentNode){for(var n in this.paper.__set__&&this.paper.__set__.exclude(this),o.eve.unbind("raphael.*.*."+this.id),o._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[n]=typeof this[n]=="function"?o._removedFactory(n):null;this.removed=!0}},l.attr=function(n,i){if(this.removed)return this;if(n==null){var u={};for(var m in this.attrs)this.attrs[h](m)&&(u[m]=this.attrs[m]);return u.gradient&&u.fill=="none"&&(u.fill=u.gradient)&&delete u.gradient,u.transform=this._.transform,u}if(i==null&&o.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var x=n.split(W),S={},I=0,T=x.length;I<T;I++)(n=x[I])in this.attrs?S[n]=this.attrs[n]:o.is(this.paper.customAttributes[n],"function")?S[n]=this.paper.customAttributes[n].def:S[n]=o._availableAttrs[n];return T-1?S:S[x[0]]}if(this.attrs&&i==null&&o.is(n,"array")){for(S={},I=0,T=n.length;I<T;I++)S[n[I]]=this.attr(n[I]);return S}var V;for(var U in i!=null&&((V={})[n]=i),i==null&&o.is(n,"object")&&(V=n),V)Z("raphael.attr."+U+"."+this.id,this,V[U]);if(V){for(U in this.paper.customAttributes)if(this.paper.customAttributes[h](U)&&V[h](U)&&o.is(this.paper.customAttributes[U],"function")){var ne=this.paper.customAttributes[U].apply(this,[].concat(V[U]));for(var fe in this.attrs[U]=V[U],ne)ne[h](fe)&&(V[fe]=ne[fe])}V.text&&this.type=="text"&&(this.textpath.string=V.text),Ce(this,V)}return this},l.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&o._tofront(this,this.paper),this},l.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),o._toback(this,this.paper)),this)},l.insertAfter=function(n){return this.removed?this:(n.constructor==o.st.constructor&&(n=n[n.length-1]),n.node.nextSibling?n.node.parentNode.insertBefore(this.node,n.node.nextSibling):n.node.parentNode.appendChild(this.node),o._insertafter(this,n,this.paper),this)},l.insertBefore=function(n){return this.removed?this:(n.constructor==o.st.constructor&&(n=n[0]),n.node.parentNode.insertBefore(this.node,n.node),o._insertbefore(this,n,this.paper),this)},l.blur=function(n){var i=this.node.runtimeStyle,u=i.filter;return u=u.replace(me,j),+n!=0?(this.attrs.blur=n,i.filter=u+$+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+n||1.5)+")",i.margin=o.format("-{0}px 0 0 -{0}px",F(+n||1.5))):(i.filter=u,i.margin=0,delete this.attrs.blur),this},o._engine.path=function(n,i){var u=X("shape");u.style.cssText=he,u.coordsize=se+$+se,u.coordorigin=i.coordorigin;var m=new s(u,i),x={fill:"none",stroke:"#000"};n&&(x.path=n),m.type="path",m.path=[],m.Path=j,Ce(m,x),i.canvas&&i.canvas.appendChild(u);var S=X("skew");return S.on=!0,u.appendChild(S),m.skew=S,m.transform(j),m},o._engine.rect=function(n,i,u,m,x,S){var I=o._rectPath(i,u,m,x,S),T=n.path(I),V=T.attrs;return T.X=V.x=i,T.Y=V.y=u,T.W=V.width=m,T.H=V.height=x,V.r=S,V.path=I,T.type="rect",T},o._engine.ellipse=function(n,i,u,m,x){var S=n.path();return S.attrs,S.X=i-m,S.Y=u-x,S.W=2*m,S.H=2*x,S.type="ellipse",Ce(S,{cx:i,cy:u,rx:m,ry:x}),S},o._engine.circle=function(n,i,u,m){var x=n.path();return x.attrs,x.X=i-m,x.Y=u-m,x.W=x.H=2*m,x.type="circle",Ce(x,{cx:i,cy:u,r:m}),x},o._engine.image=function(n,i,u,m,x,S){var I=o._rectPath(u,m,x,S),T=n.path(I).attr({stroke:"none"}),V=T.attrs,U=T.node,ne=U.getElementsByTagName("fill")[0];return V.src=i,T.X=V.x=u,T.Y=V.y=m,T.W=V.width=x,T.H=V.height=S,V.path=I,T.type="image",ne.parentNode==U&&U.removeChild(ne),ne.rotate=!0,ne.src=i,ne.type="tile",T._.fillpos=[u,m],T._.fillsize=[x,S],U.appendChild(ne),we(T,1,1,0,0,0),T},o._engine.text=function(n,i,u,m){var x=X("shape"),S=X("path"),I=X("textpath");i=i||0,u=u||0,m=m||"",S.v=o.format("m{0},{1}l{2},{1}",F(i*se),F(u*se),F(i*se)+1),S.textpathok=!0,I.string=v(m),I.on=!0,x.style.cssText=he,x.coordsize=se+$+se,x.coordorigin="0 0";var T=new s(x,n),V={fill:"#000",stroke:"none",font:o._availableAttrs.font,text:m};T.shape=x,T.path=S,T.textpath=I,T.type="text",T.attrs.text=v(m),T.attrs.x=i,T.attrs.y=u,T.attrs.w=1,T.attrs.h=1,Ce(T,V),x.appendChild(I),x.appendChild(S),n.canvas.appendChild(x);var U=X("skew");return U.on=!0,x.appendChild(U),T.skew=U,T.transform(j),T},o._engine.setSize=function(n,i){var u=this.canvas.style;return this.width=n,this.height=i,n==+n&&(n+="px"),i==+i&&(i+="px"),u.width=n,u.height=i,u.clip="rect(0 "+n+" "+i+" 0)",this._viewBox&&o._engine.setViewBox.apply(this,this._viewBox),this},o._engine.setViewBox=function(n,i,u,m,x){o.eve("raphael.setViewBox",this,this._viewBox,[n,i,u,m,x]);var S,I,T=this.getSize(),V=T.width,U=T.height;return x&&(u*(S=U/m)<V&&(n-=(V-u*S)/2/S),m*(I=V/u)<U&&(i-=(U-m*I)/2/I)),this._viewBox=[n,i,u,m,!!x],this._viewBoxShift={dx:-n,dy:-i,scale:T},this.forEach(function(ne){ne.transform("...")}),this},o._engine.initWin=function(n){var i=n.document;i.styleSheets.length<31?i.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):i.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!i.namespaces.rvml&&i.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),X=function(u){return i.createElement("<rvml:"+u+' class="rvml">')}}catch(u){X=function(m){return i.createElement("<"+m+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},o._engine.initWin(o._g.win),o._engine.create=function(){var n=o._getContainer.apply(0,arguments),i=n.container,u=n.height,m=n.width,x=n.x,S=n.y;if(!i)throw new Error("VML container not found.");var I=new o._Paper,T=I.canvas=o._g.doc.createElement("div"),V=T.style;return x=x||0,S=S||0,m=m||512,u=u||342,I.width=m,I.height=u,m==+m&&(m+="px"),u==+u&&(u+="px"),I.coordsize=216e5+$+216e5,I.coordorigin="0 0",I.span=o._g.doc.createElement("span"),I.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",T.appendChild(I.span),V.cssText=o.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",m,u),i==1?(o._g.doc.body.appendChild(T),V.left=x+"px",V.top=S+"px",V.position="absolute"):i.firstChild?i.insertBefore(T,i.firstChild):i.appendChild(T),I.renderfix=function(){},I},o.prototype.clear=function(){o.eve("raphael.clear",this),this.canvas.innerHTML=j,this.span=o._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},o.prototype.remove=function(){for(var n in o.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[n]=typeof this[n]=="function"?o._removedFactory(n):null;return!0};var p=o.st;for(var r in l)l[h](r)&&!p[h](r)&&(p[r]=function(n){return function(){var i=arguments;return this.forEach(function(u){u[n].apply(u,i)})}}(r))}}.apply(H,b))===void 0||(N.exports=C)}])})}),K1=X1(Q1),Lt=K1;var D={};D.Common={nodeIdIncrement:0,activeNode:0,roundFloat:function(d,A){for(var N=0,H=1;N<A;)H*=10,N++;return Math.round(d*H)/H},apply:function(d,A){if(d&&typeof A=="object")for(var N in A)d[N]=A[N];return d},addRaphEventHandler:function(d,A,N,H){try{d[A](function(f,b){return function(C,o){var h=b;h.e=C,f(h)}}(N,H))}catch(f){}},isInteger:function(d){return!isNaN(parseInt(d))},isXMLSerializerAvailable:function(){return typeof XMLSerializer=="function"},createSvgEl:function(d,A){if(d=document.createElementNS("http://www.w3.org/2000/svg",d),A)for(var N in A)A.hasOwnProperty(N)&&d.setAttribute(N,String(A[N]));return d},createGradientEl:function(d,A,N){if(A.type!="radialGradient")return!1;var H=D.Common.createSvgEl("radialGradient",{id:d,gradientUnits:"userSpaceOnUse",cx:N[0],cy:N[1],r:N[2],fx:N[0],fy:N[1]});if(A.stop)for(var f=A.stop,b=0;b<f.length;b++){var C=f[b];C["@attributes"]?H.appendChild(D.Common.createSvgEl("stop",C["@attributes"])):(C._attributes&&delete C._attributes,C._children&&delete C._children,C.__proto__&&delete C.__proto__,H.appendChild(D.Common.createSvgEl("stop",C)))}return H},setCssStyle:function(d,A){var N=document.styleSheets[0];N.addRule?N.addRule(d,A):N.insertRule&&N.insertRule(d+" { "+A+" }",N.cssRules.length)}};D.PhyloCanvas=function(){var d,A,N,H,f;return function(b,C,o,h,v){if(this.getNewickObject=function(){return N},this.clear=function(){},this.scale=function(M){H.svg.scale(M)},this.getSvg=function(){return H},this.getPhylogram=function(){return d},this.getSvgSource=function(){if(Lt.svg&&D.Common.isXMLSerializerAvailable()){var M=new XMLSerializer;return M.serializeToString(H.svg.canvas)}else return!1},typeof b=="object")if(b.xml){if(b.fileSource)var w=b.xml;else var w=xt.textToXML(b.xml);w=xt.xmlToJSON(w),f=new D.PhyloCanvas.PhyloxmlParse(w)}else if(b.phyloxml){if(b.fileSource)var w=b.phyloxml;else var w=xt.textToXML(b.phyloxml);w=xt.xmlToJSON(w),f=new D.PhyloCanvas.PhyloxmlParse(w)}else if(b.nexml){if(b.fileSource)var w=b.nexml;else var w=xt.textToXML(b.nexml);w=xt.xmlToJSON(w),f=new D.PhyloCanvas.NexmlParse(w,b)}else b.json?f=new D.PhyloCanvas.PhyloxmlParse(b.json):b.newick?f=new D.PhyloCanvas.NewickParse(b.newick):b.nexmlJson?f=new D.PhyloCanvas.NexmlJsonParse(b):alert("Please set the format of input data");else f=new D.PhyloCanvas.NewickParse(b);A=C,H=new D.PhyloCanvas.Render.SVG(A,o,h),v=="circular"?d=new D.PhyloCanvas.Render.CircularPhylogram(H,f):d=new D.PhyloCanvas.Render.Phylogram(H,f)}}();D.PhyloCanvas.prototype={};D.PhyloCanvas.Node=function(){return function(d,A){this.id=D.Common.nodeIdIncrement+=1,this.level=0,this.len=0,this.newickLen=0,this.name="",this.type="",this.chart={},this.img=[],d&&D.Common.apply(this,d),this._countAllChildren=!1,this._countImmediateChildren=!1,this._midBranchPosition=!1,this.children=new Array,A&&A.children.push(this)}}();D.PhyloCanvas.Node.prototype={getCountAllChildren:function(){if(this._countAllChildren!==!1)return this._countAllChildren;var d=0;for(var A in this.children)if(D.Common.isInteger(A)){var N=this.children[A];N.children&&N.children.length>0?d+=N.getCountAllChildren():d++}return this._countAllChildren=d,d},getCountImmediateChildren:function(){if(this._countImmediateChildren!==!1)return this._countImmediateChildren;var d=0;for(var A in this.children){var N=this.children[A];d+=N.length}return this._countImmediateChildren=d,d},getMidbranchPosition:function(d){if(this._midBranchPosition!==!1)return this._midBranchPosition;for(var A=[0,0],N=0;N<this.children.length;N++){var H=this.children[N];H.children&&H.children.length>0?N==0&&d?(A[0]=H.getMidbranchPosition(!0),A[1]+=H.getCountAllChildren()-1):N==0?(A[0]=H.getMidbranchPosition(),A[1]+=H.getCountAllChildren()):N==this.children.length-1?A[1]+=H.getMidbranchPosition():A[1]+=H.getCountAllChildren():N==0&&d?A[0]=0:N==0?(A[0]=1,A[1]+=1):(N==this.children.length-1,A[1]+=1)}return this._midBranchPosition=A[1]>=A[0]?(A[1]+A[0])/2:A[0],this._midBranchPosition}};D.PhyloCanvas.NewickParse=function(){var d,A,N,H=0,f=0,b,C,o=function(q){for(var B=new D.PhyloCanvas.Node;A!==")"&&A!==",";)A===":"?(M(),B.len=D.Common.roundFloat(v(),4),B.len==0&&(B.len=1e-4)):A==="'"||A==='"'?(B.type="label",B.name=w(A)):(B.type="label",B.name=v());return B.level=q.level+1,B},h=function(q){var B=new D.PhyloCanvas.Node;for(q&&(B.level=q.level+1);A!==")";)M(),A==="("?B.children.push(h(B)):B.children.push(o(B));return M(),A!==":"&&A!==")"&&A!==","&&A!==";"&&(B.type="label",B.name=v()),A===":"&&(M(),B.len=D.Common.roundFloat(v(),4),B.len==0&&(B.len=1e-4),B.type="stem"),B},v=function(){for(var q="";A!==":"&&A!==")"&&A!==","&&A!==";";)q+=A,M();return q},w=function(q){for(var B="";A!==q;)B+=A,M();return B},M=function(){return A=d.charAt(N),N+=1,A},F=function(q,B){if(q.children&&q.children.length)for(var L=0;L<q.children.length;L++){var W=q.children[L];W.len===0&&(W.len=1),W.newickLen=D.Common.roundFloat(W.len+q.newickLen,4),W.level>H&&(H=W.level),W.newickLen>f&&(f=W.newickLen),W.children.length>0&&F(W,q)}return q};return function(q){this.getRoot=function(){return b},this.getLevels=function(){return H},this.getNewickLen=function(){return f},this.getValidate=function(){return C},H=0,f=0,d=q,N=0,M(),b=h(),b=F(b)}}();D.PhyloCanvas.NewickParse.prototype={};D.PhyloCanvas.PhyloxmlParse=function(){var d=0,A=0,N,H,f=function(o,h){var v=new D.PhyloCanvas.Node;if(h&&(v.level=h.level+1),o.clade&&o.clade.length)for(var w=0;w<o.clade.length;w++){var M=o.clade[w];v.children.push(f(M,v))}if(o.branch_length&&(typeof o.branch_length=="object"&&(o.branch_length=o.branch_length[0].Text),v.len=D.Common.roundFloat(o.branch_length,4),v.len==0&&(v.len=1e-4)),o.color?(v.red=o.color[0].red[0].Text,v.green=o.color[0].green[0].Text,v.blue=o.color[0].blue[0].Text):(v.red=0,v.green=0,v.blue=0),o.property&&o.property[0].applies_to=="node"&&o.property[0].ref=="style:font_color"&&(v.font_color_hex=o.property[0].Text),o.name?(v.type="label",v.name=o.name[0].Text,o.name[0]&&o.name[0].style&&(v.style=o.name[0].style),o.name[0]&&o.name[0].bgStyle&&(v.bgStyle=o.name[0].bgStyle)):o.confidence&&(v.name=o.confidence[0].Text),o.sequence&&o.sequence[0]&&o.sequence[0].name&&o.sequence[0].name[0]&&o.sequence[0].name[0].Text&&(v.sequenceName=o.sequence[0].name[0].Text),o.taxonomy&&o.taxonomy[0]&&(o.taxonomy[0].scientific_name&&o.taxonomy[0].scientific_name[0]&&o.taxonomy[0].scientific_name[0].Text&&(v.taxonomyScientificName=o.taxonomy[0].scientific_name[0].Text),o.taxonomy[0].common_name&&o.taxonomy[0].common_name[0]&&o.taxonomy[0].common_name[0].Text&&(v.taxonomyCommonName=o.taxonomy[0].common_name[0].Text)),o.sequence&&o.sequence[0]&&o.sequence[0].accession&&o.sequence[0].accession[0]&&o.sequence[0].accession[0].Text&&(v.sequenceAccession=o.sequence[0].accession[0].Text),o.point&&(v.LatLong=[o.point[0].lat[0].Text,o.point[0].long[0].Text]),v.name||(v.sequenceName?v.name=v.sequenceName:v.taxonomyScientificName?v.name=v.taxonomyScientificName:v.taxonomyCommonName?v.name=v.taxonomyCommonName:v.sequenceAccession&&(v.name=v.sequenceAccession),v.name&&(v.type="label")),o.annotation&&(o.annotation[0]&&o.annotation[0].desc&&o.annotation[0].desc[0]&&o.annotation[0].desc[0].Text&&(v.description=o.annotation[0].desc[0].Text),o.annotation[0]&&o.annotation[0].uri&&o.annotation[0].uri[0]&&o.annotation[0].uri[0].Text&&(v.uri=o.annotation[0].uri[0].Text),o.annotation[0]&&o.annotation[0].img))for(var w in o.annotation[0].img)D.Common.isInteger(w)&&(v.img[w]=o.annotation[0].img[w].Text);if(o.chart&&o.chart[0])for(var w in o.chart[0])w!="Text"&&w!="_children"&&(v.chart[w]=o.chart[0][w][0].Text);return v&&v.level>1&&(v.len||(H="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),v},b=function(o,h){if(o.children&&o.children.length)for(var v=0;v<o.children.length;v++){var w=o.children[v];w.newickLen=Math.round((w.len+o.newickLen)*1e4)/1e4,w.level>d&&(d=w.level),w.newickLen>A&&(A=w.newickLen),w.children.length>0&&b(w,o)}return o},C=function(o,h){for(var v in o)v!="_children"&&v!="Text"&&(v=="rectangular"||v=="circular"?C(o[v][0],v):(D.PhyloCanvas.Render.Parameters[v]||(D.PhyloCanvas.Render.Parameters[v]={}),D.PhyloCanvas.Render.Parameters.set(v,o[v][0].Text,h)))};return function(o){if(this.getRoot=function(){return N},this.getLevels=function(){return d},this.getNewickLen=function(){return A},this.getValidate=function(){return H},o.phylogeny&&o.phylogeny[0]&&o.phylogeny[0].clade&&(N=f(o.phylogeny[0].clade[0])),o.phylogeny&&o.phylogeny[0]&&o.phylogeny[0].render&&o.phylogeny[0].render[0]){var h=o.phylogeny[0].render[0];if(h&&h.styles){var v=h.styles[0];for(var w in v)if(w!="_children"&&w!="Text")if(v[w][0].type&&v[w][0].type=="radialGradient"&&Lt.svg)v[w][0].name=w,D.PhyloCanvas.Render.Style[w]=v[w][0],D.PhyloCanvas.Render.Style.jsphylosvgGradientList||(D.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),D.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(w);else{D.PhyloCanvas.Render.Style[w]||(D.PhyloCanvas.Render.Style[w]={});for(var M in v[w][0])M!="_attributes"&&M!="_children"&&M!="type"&&(D.PhyloCanvas.Render.Style[w][M.replace("_","-")]=v[w][0][M])}}if(h&&h.parameters&&C(h.parameters[0]),h&&h.charts){var F=h.charts[0];for(var w in F)if(w!="_children"&&w!="Text")for(var M in F[w])F[w][M].type=="binary"?(F[w][M].chart=w,D.PhyloCanvas.Render.Parameters.binaryCharts.push(F[w][M])):F[w][M].type=="integratedBinary"?(F[w][M].chart=w,D.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(F[w][M])):F[w][M].type=="bar"&&(F[w][M].chart=w,D.PhyloCanvas.Render.Parameters.barCharts.length==1&&D.PhyloCanvas.Render.Parameters.barCharts.shift(),D.PhyloCanvas.Render.Parameters.barCharts.push(F[w][M]))}}N=b(N)}}();D.PhyloCanvas.PhyloxmlParse.prototype={};D.PhyloCanvas.NexmlParse=function(){var d=0,A=0,N,H,f,b,C=function(v,w,M){var F=new D.PhyloCanvas.Node;M&&(F.level=M.level+1);for(var q=0;q<f.length;q++)if(f[q].source==v.id)for(var B=0;B<b.length;B++)f[q].target==b[B].id&&F.children.push(C(b[B],f[q].length,F));if(F&&F.level>0&&!F.len&&(F.len=1),w&&(F.len=D.Common.roundFloat(w,4),F.len==0&&(F.len=1e-4)),v.label&&(F.type="label",F.name=v.label,v.style&&(F.style=v.style)),v.color){let L=v.color.replace(/[a-z%\s\(\)]/g,"").split(",");F.red=L[0],F.green=L[1],F.blue=L[2]}else{let L=D.PhyloCanvas.Render.Style.line.stroke.replace(/[a-z%\s\(\)]/g,"").split(",");F.red=L[0],F.green=L[1],F.blue=L[2]}return F},o=function(v,w){if(v.children&&v.children.length)for(var M=0;M<v.children.length;M++){var F=v.children[M];F.newickLen=Math.round((F.len+v.newickLen)*1e4)/1e4,F.level>d&&(d=F.level),F.newickLen>A&&(A=F.newickLen),F.children.length>0&&o(F,v)}return v},h=function(v,w){for(var M in v)M!="_children"&&M!="Text"&&(M=="rectangular"||M=="circular"?h(v[M][0],M):(D.PhyloCanvas.Render.Parameters[M]||(D.PhyloCanvas.Render.Parameters[M]={}),D.PhyloCanvas.Render.Parameters.set(M,v[M][0].Text,w)))};return function(v,w){this.getRoot=function(){return N},this.getLevels=function(){return d},this.getNewickLen=function(){return A},this.getValidate=function(){return H},w.tree&&v.trees[0]&&v.trees[0].tree[w.tree-1]?(f=v.trees[0].tree[w.tree-1].edge,b=v.trees[0].tree[w.tree-1].node):(f=v.trees[0].tree[0].edge,b=v.trees[0].tree[0].node);for(var M=0;M<b.length;M++){var F=0;if(b[M].root&&b[M].root=="true"){N=b[M];break}for(var q=0;q<f.length;q++)f[q].target==b[M].id&&F++;if(F==0){N=b[M];break}}N?(N=C(N),N=o(N)):H="Error. Currently, only rooted NeXML trees are supported."}}();D.PhyloCanvas.NexmlParse.prototype={};D.PhyloCanvas.NexmlJsonParse=function(){var d=0,A=0,N,H,f=[],b=[],C=function(v,w,M){var F=new D.PhyloCanvas.Node;M&&(F.level=M.level+1);for(var q=0;q<f.length;q++)if(f[q].source==v.id)for(var B=0;B<b.length;B++)f[q].target==b[B].id&&F.children.push(C(b[B],f[q].length,F));return w&&(F.len=D.Common.roundFloat(w,4),F.len==0&&(F.len=1e-4)),v.label&&(F.type="label",F.name=v.label,v.accession&&(F.accession=v.accession),v.style&&(F.style=v.style),v.bgStyle&&(F.bgStyle=v.bgStyle)),v.chart&&(F.chart=v.chart),F&&F.level>1&&(F.len||(H="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),F},o=function(v,w){if(v.children&&v.children.length)for(var M=0;M<v.children.length;M++){var F=v.children[M];F.newickLen=Math.round((F.len+v.newickLen)*1e4)/1e4,F.level>d&&(d=F.level),F.newickLen>A&&(A=F.newickLen),F.children.length>0&&o(F,v)}return v},h=function(v,w){for(var M in v)M!="_children"&&M!="Text"&&(M=="rectangular"||M=="circular"?h(v[M],M):(D.PhyloCanvas.Render.Parameters[M]||(D.PhyloCanvas.Render.Parameters[M]={}),D.PhyloCanvas.Render.Parameters.set(M,v[M],w)))};return function(v){this.getRoot=function(){return N},this.getLevels=function(){return d},this.getNewickLen=function(){return A},this.getValidate=function(){return H};var w=v.nexmlJson.nexml,M=w.render;if(M&&M.styles){var F=M.styles;for(var q in F)if(q!="_children"&&q!="Text")if(F[q]["@attributes"].type&&F[q]["@attributes"].type=="radialGradient"&&Lt.svg)F[q].name=q,F[q].type=F[q]["@attributes"].type,D.PhyloCanvas.Render.Style[q]=F[q],D.PhyloCanvas.Render.Style.jsphylosvgGradientList||(D.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),D.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(q);else{D.PhyloCanvas.Render.Style[q]||(D.PhyloCanvas.Render.Style[q]={});for(var B in F[q]["@attributes"])B!="_attributes"&&B!="_children"&&B!="type"&&(D.PhyloCanvas.Render.Style[q][B.replace("_","-")]=F[q]["@attributes"][B])}}if(M&&M.parameters&&h(M.parameters),M&&M.charts){var L=M.charts;for(var q in L)L[q]["@attributes"].chart=q,L[q]["@attributes"].type=="binary"?D.PhyloCanvas.Render.Parameters.binaryCharts.push(L[q]["@attributes"]):L[q]["@attributes"].type=="integratedBinary"?D.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(L[q]["@attributes"]):L[q]["@attributes"].type=="bar"&&D.PhyloCanvas.Render.Parameters.barCharts.push(L[q]["@attributes"])}if(v.tree&&w.trees[0]&&w.trees[0].tree[v.tree-1])f=w.trees[0].tree[v.tree-1].edge,b=w.trees[0].tree[v.tree-1].node;else{for(var q=0;q<w.trees.tree.edge.length;q++)f.push(w.trees.tree.edge[q]["@attributes"]);for(var q=0;q<w.trees.tree.node.length;q++){var W=w.trees.tree.node[q]["@attributes"];W.label&&(W.chart=w.trees.tree.node[q].chart),b.push(W)}}for(var q=0;q<b.length;q++)b[q].root&&b[q].root=="true"&&(N=b[q]);N?(N=C(N),N=o(N)):H="Error. Currently, only rooted NeXML trees are supported."}}();D.PhyloCanvas.NexmlParse.prototype={};D.PhyloCanvas.Render={};D.PhyloCanvas.Render.Style={line:{stroke:"rgb(0,0,0)","stroke-width":1},text:{"font-family":"Verdana","font-size":12,"text-anchor":"start"},path:{stroke:"rgb(0,0,0)","stroke-width":1},connectedDash:{stroke:"rgb(200,200,200)","stroke-dasharray":". "},textSecantBg:{fill:"#EEE",stroke:"#DDD"},highlightedEdgeCircle:{fill:"black",stroke:"black"},barChart:{fill:"#003300",stroke:"#DDD"},getStyle:function(d,A){return this[d]?this[d]:this[A]}};D.PhyloCanvas.Render.Parameters={jsOverride:0,Rectangular:{bufferX:200,paddingX:10,paddingY:20,bufferInnerLabels:10,bufferOuterLabels:5,minHeightBetweenLeaves:10,alignPadding:0,alignRight:!1,showScaleBar:!1},Circular:{bufferRadius:.33,bufferAngle:20,initStartAngle:160,innerCircleRadius:0,minHeightBetweenLeaves:5,bufferInnerLabels:2,bufferOuterLabels:5},binaryCharts:[],integratedBinaryCharts:[],barCharts:[],binaryChartBufferInner:5,binaryChartBufferSiblings:.01,binaryChartThickness:15,binaryChartDisjointed:!1,barChartBufferInner:3,barChartHeight:50,barChartWidth:.5,set:function(d,A,N){this.jsOverride||(N?N=="circular"?this.Circular[d]=parseFloat(A):N=="rectangular"&&(this.Rectangular[d]=parseFloat(A)):this[d]=parseFloat(A))}};D.PhyloCanvas.Render.Line=function(){return function(d,A,N,H,f,b,C,o){this.type="line",this.attr=D.PhyloCanvas.Render.Style.line,this.attr.stroke=["rgb(",f,",",b,",",C,")"].join(""),this.x1=d,this.x2=A,this.y1=N,this.y2=H,o&&(D.Common.apply(this,o),o.attr&&(this.attr=o.attr))}}();D.PhyloCanvas.Render.Text=function(){return function(d,A,N,H){this.type="text",this.attr=D.PhyloCanvas.Render.Style.text,this.x=d,this.y=A,this.text=N,H&&(D.Common.apply(this,H),H.attr&&(this.attr=H.attr))}}();D.PhyloCanvas.Render.Path=function(){var d=D.PhyloCanvas.Render.Style.path;return function(A,N){this.type="path",this.attr=D.PhyloCanvas.Render.Style.path,this.path=A,N&&(D.Common.apply(this,N),N.attr&&(this.attr=N.attr))}}();D.PhyloCanvas.Render.Circle=function(){return function(d,A,N,H){this.type="circle",this.x=d,this.y=A,this.radius=N,H&&(D.Common.apply(this,H),H.attr&&(this.attr=H.attr))}}();D.PhyloCanvas.Render.SVG=function(){var d,A;return function(N,H,f){d=N,this.canvasSize=[H,f],this.svg=Lt(N,this.canvasSize[0],this.canvasSize[1])}}();D.PhyloCanvas.Render.SVG.prototype={render:function(){for(var d=this.phylogramObject.getDrawInstructs(),A=0;A<d.length;A++)if(d[A].type=="line")var N=this.svg.path(["M",d[A].x1,d[A].y1,"L",d[A].x2,d[A].y2]).attr(D.PhyloCanvas.Render.Style.line);else if(d[A].type=="path")var H=this.svg.path(d[A].path).attr(d[A].attr);else if(d[A].type=="circle")var H=this.svg.circle(d[A].x,d[A].y,d[A].radius).attr({stroke:"black",fill:"black"});else{var f=this.svg.text(d[A].x,d[A].y,d[A].text).attr(D.PhyloCanvas.Render.Style.text);d[A].attr&&f.attr(d[A].attr),d[A].rotate&&f.rotate(d[A].rotate);var b=f.getBBox(),C=Math.sqrt(b.height*b.height+b.width*b.width)}},draw:function(d){var A,N;if(d.type=="line")A=this.svg.path(["M",d.x1,d.y1,"L",d.x2,d.y2]).attr(D.PhyloCanvas.Render.Style.line);else if(d.type=="path")A=this.svg.path(d.path).attr(d.attr);else if(d.type=="circle")A=this.svg.circle(d.x,d.y,d.radius).attr({stroke:"black",fill:"black"});else if(d.type=="text"){A=this.svg.text(d.x,d.y,d.text).attr(D.PhyloCanvas.Render.Style.text),d.attr&&A.attr(d.attr),d.rotate&&A.rotate(d.rotate);var H=A.getBBox();N=Math.sqrt(H.height*H.height+H.width*H.width)}return[A,N]}};D.PhyloCanvas.Render.Phylogram=function(){var d,A=D.PhyloCanvas.Render.Parameters.Rectangular,N,H,f,b,C,o,h=!0,v=0,w=0,M,F,q,B,L,W,Z,$,j,te,oe,me,G=[],he=function(X){return X+Math.round(X/4)},se=function(X,xe,Ce,ee){return["M",X,xe,"L",Ce,xe,"L",Ce,ee,"L",X,ee,"Z"]},z=function(X,xe){if(X.len&&h==!1&&X.children.length==0&&(v=D.Common.roundFloat(v+b,4)),X.children.length>0){var Ce=[],ee,s,l,p,r,n,i;if(X.len&&(ee=xe,s=xe=D.Common.roundFloat(xe+f*X.len,4),l=v+X.getMidbranchPosition(h)*b,p=l,r=X.red,n=X.green,i=X.blue,d.draw(new D.PhyloCanvas.Render.Line(ee,s,l,p,r,n,i))),X.name){var u={};if(u=D.PhyloCanvas.Render.Style.getStyle("bootstrap","text"),X.font_color_hex?u.fill=X.font_color_hex:u.fill="#000000",X.uri&&(u.href=X.uri),X.description&&(u.title=X.description),X.level==0)var m=v+X.getMidbranchPosition(h)*b;else var m=p;d.draw(new D.PhyloCanvas.Render.Text((s||xe)+5,m,X.name,{attr:u}))}if(X.children&&X.children.length)for(var x=0;x<X.children.length;x++){var S=X.children[x];Ce.push(z(S,xe))}for(var I=[],x=0;x<Ce.length;x++)Ce[x][0]&&I.push(Ce[x][0]),Ce[x][1]&&I.push(Ce[x][1]);for(var T=Math.min.apply(null,I),V=Math.max.apply(null,I),U=(T+V)/2,ne="",fe="",ve="",ye=0,x=0;x<X.children.length;++x){var _e=X.children[x];if(x==0)ne=_e.red,fe=_e.green,ve=_e.blue;else if(ne==_e.red&&fe==_e.green&&ve==_e.blue)ye=1;else{ye=0;break}}ye==0?D.PhyloCanvas.Render.Style.line.stroke="black":(r=X.children[0].red,n=X.children[0].green,i=X.children[0].blue,D.PhyloCanvas.Render.Style.line.stroke=["rgb(",r,",",n,",",i,")"].join("")),X.children.length==2?(r=X.children[0].red,n=X.children[0].green,i=X.children[0].blue,D.PhyloCanvas.Render.Style.line.stroke=["rgb(",r,",",n,",",i,")"].join(""),d.draw(new D.PhyloCanvas.Render.Path(["M",xe+1e-4,T,"L",xe,T,"L",xe,U],{attr:D.PhyloCanvas.Render.Style.line})),r=X.children[1].red,n=X.children[1].green,i=X.children[1].blue,D.PhyloCanvas.Render.Style.line.stroke=["rgb(",r,",",n,",",i,")"].join(""),d.draw(new D.PhyloCanvas.Render.Path(["M",xe,U,"L",xe,V,"L",xe+1e-4,V],{attr:D.PhyloCanvas.Render.Style.line}))):d.draw(new D.PhyloCanvas.Render.Path(["M",xe+1e-4,T,"L",xe,T,"L",xe,V,"L",xe+1e-4,V],{attr:D.PhyloCanvas.Render.Style.line}))}else{if(ee=xe,s=D.Common.roundFloat(xe+f*X.len,2),l=v,p=v,r=X.red,n=X.green,i=X.blue,X.y=v,G.push(X),d.draw(new D.PhyloCanvas.Render.Line(ee,s,l,p,r,n,i)),A.alignRight&&d.draw(new D.PhyloCanvas.Render.Path(["M",s,l,"L",A.alignPadding+C,p],{attr:D.PhyloCanvas.Render.Style.connectedDash})),X.name){var u={};X.style&&(u=D.PhyloCanvas.Render.Style.getStyle(X.style,"text")),X.font_color_hex?u.fill=X.font_color_hex:u.fill="#000000",u["text-anchor"]="start",X.uri&&(u.href=X.uri),X.description&&(u.title=X.description);var Se=d.draw(new D.PhyloCanvas.Render.Text(A.alignRight?C+A.bufferInnerLabels+A.alignPadding:s+A.bufferInnerLabels,p,X.name,{attr:u}));w=Math.max(Se[1],w),D.PhyloCanvas.Render.Parameters.mouseRollOver&&D.Common.addRaphEventHandler(Se[0],"mouseover",D.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:d,node:X,x:s,y:p,textEl:Se[0]}),D.PhyloCanvas.Render.Parameters.mouseRollOut&&D.Common.addRaphEventHandler(Se[0],"mouseout",D.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:d,node:X,x:s,y:p,textEl:Se[0]}),D.PhyloCanvas.Render.Parameters.onClickAction&&D.Common.addRaphEventHandler(Se[0],"click",D.PhyloCanvas.Render.Parameters.onClickAction,{svg:d,node:X,x:s,y:p,textEl:Se[0]})}h&&(h=!1)}return[l,p]},ge=function(){y=v+b,B=0,L=A.showScaleBar*f,d.draw(new D.PhyloCanvas.Render.Line(B,L,y,y)),d.draw(new D.PhyloCanvas.Render.Text((B+L)/2,y-8,A.showScaleBar))},de=function(X,xe,Ce){for(var ee=(Ce&&Ce.bufferInner?Ce.bufferInner:0)|D.PhyloCanvas.Render.Parameters.binaryChartBufferInner,s=(Ce&&Ce.bufferSiblings?Ce.bufferSiblings*b:0)|(D.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?b*D.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:D.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),l=(Ce&&Ce.thickness?Ce.thickness:0)|D.PhyloCanvas.Render.Parameters.binaryChartThickness,p,r=0;r<G.length;r++){var n=G[r];d.draw(new D.PhyloCanvas.Render.Path(se(X+ee,n.y-b/2+s/2,X+ee+l,n.y+b/2-s/2),{attr:D.PhyloCanvas.Render.Style.getStyle(n.chart[xe],"textSecantBg")}))}return X+ee+l},we=function(X,xe,Ce){for(var ee=[],s,l=Ce&&Ce.bufferInner?Ce.bufferInner:0|D.PhyloCanvas.Render.Parameters.barChartBufferInner,p=Ce&&Ce.height?Ce.height:0|D.PhyloCanvas.Render.Parameters.barChartHeight,r=Ce&&Ce.width?Ce.width<1?b*Ce.width:Ce.width:0|(D.PhyloCanvas.Render.Parameters.barChartWidth<1?b*D.PhyloCanvas.Render.Parameters.barChartWidth:D.PhyloCanvas.Render.Parameters.barChartWidth),n=0,i=0;i<G.length;i++)ee.push(G[i].chart[xe]);s=Math.max.apply(null,ee),n=D.Common.roundFloat(p/s,4);for(var i=0;i<G.length;i++){var u=G[i];d.draw(new D.PhyloCanvas.Render.Path(se(X+l,u.y-r/2,X+l+n*u.chart[xe],u.y+r/2),{attr:D.PhyloCanvas.Render.Style.getStyle(u.chart[xe],"barChart")}))}return X+l+p};return function(X,xe){this.getCanvasSize=function(){return[N,H]},this.getRoot=function(){return xe.getRoot()},xe.getValidate()&&d.draw(0,0,xe.getValidate()),h=!0,d=X;var Ce=xe.getRoot(),ee=xe.getNewickLen();if(N=d.canvasSize[0],H=d.canvasSize[1],te=A.bufferX,oe=A.paddingX,me=A.paddingY,o=A.minHeightBetweenLeaves,v=me,f=Math.round((N-te-oe*2)/ee),b=Math.round((H-me*2)/(A.showScaleBar?Ce.getCountAllChildren():Ce.getCountAllChildren()-1)),b<o&&(b=o),C=Math.round(N-te-oe*2),(D.PhyloCanvas.Render.Parameters.binaryCharts.length||D.PhyloCanvas.Render.Parameters.barCharts.length)&&(A.alignRight=!0),z(Ce,oe),A.showScaleBar&&ge(),M=C+w+A.bufferInnerLabels,D.PhyloCanvas.Render.Parameters.binaryCharts.length){var s=D.PhyloCanvas.Render.Parameters.binaryCharts;for(var l in s)M=de(M,s[l].chart,s[l])}if(D.PhyloCanvas.Render.Parameters.barCharts.length){var p=D.PhyloCanvas.Render.Parameters.barCharts;for(var l in p)q=we(M,p[l].chart,p[l])}G=[],typeof bgLabelsHold!="undefined"&&(bgLabelsHold=[])}}();D.PhyloCanvas.Render.Phylogram.prototype={};D.PhyloCanvas.Render.CircularPhylogram=function(){var d,A=D.PhyloCanvas.Render.Parameters.Circular,N,H,f,b,C,o,h,v=!0,w=0,M,F,q,B=[],L=[],W,Z,$,j=0,te,oe=Math.PI/180;function me(ee,s){return s+=te,[D.Common.roundFloat(M+ee*Math.sin(s*oe),4),D.Common.roundFloat(F+ee*Math.cos(s*oe),4)]}function G(ee){var s=z(90-ee-te);if(s>90&&s<270){s+=180;var l="end"}else var l="start";return[s,l]}function he(ee,s,l,p){var r=me(ee,s),n=me(ee,l),i=[],u,m=0;return Math.abs(z(l-s))>180?u=1:u=-1,p&&p.invertSecant&&(u*=-1,m=1),p&&p.noMove||i.push("M"),i.push(r[0],r[1],"A",ee,ee,0,u<1?0:1,m,n[0],n[1]),i}function se(ee,s,l,p){var r=[],n=me(s,ee),i=me(l,ee);return p&&p.noMove||r.push("M"),r.push(n[0],n[1],"L",i[0],i[1]),r}function z(ee){for(;ee>360||ee<0;)ee>360?ee-=360:ee<0&&(ee+=360);return ee}function ge(ee,s,l,p){if(!s&&ee.length>1)var p=ee[3],l=ee[2],s=ee[1],ee=ee[0];var r=we("M",he(ee,l,p,{noMove:1,invertSecant:0}),"L",he(s,p,l,{noMove:1,invertSecant:1}),"Z");return r}function de(ee,s){if(s=s,ee.len&&(v?w=Z||1:ee.children.length==0&&(w=D.Common.roundFloat(w+C,4))),ee.children.length>0){var l=[],p,r,n,i;if(p=s,r=s+=D.Common.roundFloat(b*ee.len,4),ee.name,ee.children&&ee.children.length)for(var u=0;u<ee.children.length;u++){var m=ee.children[u],x=de(m,s);x>0&&l.push(x)}var S=D.Common.roundFloat(Math.min.apply(null,l),4),I=D.Common.roundFloat(Math.max.apply(null,l),4);ee.level!=0&&d.draw(new D.PhyloCanvas.Render.Path(we("M",me(s+.01,S),"L",he(s,S,I,{noMove:!0}),"L",me(s+.01,I)))),ee.len&&(n=D.Common.roundFloat(S+(I-S)/2,4),d.draw(new D.PhyloCanvas.Render.Path(se(n,p,r))))}else if(ee.y=w,B.push(ee),p=s,r=s=D.Common.roundFloat(s+b*ee.len),n=w,d.draw(new D.PhyloCanvas.Render.Path(se(n,p,r))),d.draw(new D.PhyloCanvas.Render.Path(se(n,r,q),{attr:D.PhyloCanvas.Render.Style.connectedDash})),ee.name){var T=me(q+A.bufferInnerLabels,n),V=G(n),U=V[0],ne=V[1],fe={};ee.style&&D.Common.apply(fe,D.PhyloCanvas.Render.Style.getStyle(ee.style,"text")),ee.font_color_hex?fe.fill=ee.font_color_hex:fe.fill="#000000",fe["text-anchor"]=ne,ee.uri&&(fe.href=ee.uri),ee.description&&(fe.title=ee.description);var ve=d.draw(new D.PhyloCanvas.Render.Text(T[0],T[1],ee.name,{attr:fe,rotate:[U,T[0],T[1]]}));ee.bgStyle&&L.push([ee.bgStyle,n]);var T=me(r,n);D.PhyloCanvas.Render.Parameters.mouseRollOver&&D.Common.addRaphEventHandler(ve[0],"mouseover",D.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:d,node:ee,x:T[0],y:T[1],textEl:ve[0]}),D.PhyloCanvas.Render.Parameters.mouseRollOut&&D.Common.addRaphEventHandler(ve[0],"mouseout",D.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:d,node:ee,x:T[0],y:T[1],textEl:ve[0]}),D.PhyloCanvas.Render.Parameters.onClickAction&&D.Common.addRaphEventHandler(ve[0],"click",D.PhyloCanvas.Render.Parameters.onClickAction,{svg:d,node:ee,x:T[0],y:T[1],textEl:ve[0]}),j=Math.max(ve[1],j)}return v&&(v=!1),n}function we(ee){for(var s=ee,l=1;l<arguments.length;l++)s=s.concat(arguments[l]);return s}function X(){var ee=[];if(L.length>0){if(D.PhyloCanvas.Render.Style.jsphylosvgGradientList)for(var s=0;s<D.PhyloCanvas.Render.Style.jsphylosvgGradientList.length;s++){var l=D.PhyloCanvas.Render.Style.jsphylosvgGradientList[s],p=D.Common.createGradientEl(l,D.PhyloCanvas.Render.Style[l],[M,F,q+j+A.bufferOuterLabels]);d.svg.defs.appendChild(p)}for(var s=0;s<L.length;s++){if(s!=L.length-1&&L[s][0]==L[s+1][0]){L[s+1][2]=L[s][2]?L[s][2]:L[s][1];continue}var ee=ge(q,q+j+A.bufferOuterLabels,L[s][2]?L[s][2]-C/2:L[s][1]-C/2,L[s][1]+C/2),r=D.PhyloCanvas.Render.Style.getStyle(L[s][0],"textSecantBg"),n=d.draw(new D.PhyloCanvas.Render.Path(ee,{attr:r.type?{}:r}));r.type&&r.type=="radialGradient"&&n[0].node.setAttribute("fill","url(#"+r.name+")"),r.type&&r.type=="radialGradient"&&n[0].node.setAttribute("stroke","none"),n[0].toBack()}}var ee=ge(q,q+j+A.bufferOuterLabels,(Z||1)-C/2,360-C/2),n=d.draw(new D.PhyloCanvas.Render.Path(ee,{attr:D.PhyloCanvas.Render.Style.textSecantBg}));return n[0].toBack(),q+j+A.bufferOuterLabels}function xe(ee,s,l){for(var p=l&&l.bufferInner?parseFloat(l.bufferInner):D.PhyloCanvas.Render.Parameters.binaryChartBufferInner,r=(l&&l.bufferSiblings?l.bufferSiblings*C:0)|(D.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?C*D.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:D.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),n=l&&l.thickness?parseFloat(l.thickness):D.PhyloCanvas.Render.Parameters.binaryChartThickness,i=(l&&l.disjointed?l.disjointed:!1)|D.PhyloCanvas.Render.Parameters.binaryChartDisjointed,u=l&&l.isInternal?l.isInternal:!1,m=!0,x,S=0;S<B.length;S++){var I=B[S];if((!B[S+1]||I.chart[s]!==B[S+1].chart[s]||i)&&I.chart[s]!="none"){var T=D.PhyloCanvas.Render.Style.getStyle(I.chart[s],"textSecantBg");if(u)var V=[q-p-n,q-p,(x||I.y)-C/2+(m&&!i?0:r/2),I.y+C/2-(S==B.length-1&&!i?0:r/2)];else var V=[ee+p,ee+p+n,(x||I.y)-C/2+(m&&!i?0:r/2),I.y+C/2-(S==B.length-1&&!i?0:r/2)];if(T.label){var U=D.PhyloCanvas.Render.Style.getStyle(T.labelStyle,"text"),ne=me((V[0]+V[1])/2,(V[2]+V[3])/2),fe=G((V[2]+V[3])/2),ve=z(fe[0]+(U.rotate?parseFloat(U.rotate):0)),ye=z(90-(V[2]+V[3])/2-te);ye>90&&ye<270&&(ve+=180),U["text-anchor"]||(U["text-anchor"]="middle"),I.font_color_hex?T.fill=I.font_color_hex:T.fill="#000000";var _e=d.draw(new D.PhyloCanvas.Render.Text(ne[0],ne[1],T.label,{attr:U,rotate:ve}));_e[0].toBack()}if(T.borderStyle){var Se=D.PhyloCanvas.Render.Style.getStyle(T.borderStyle,"textSecantBg"),Ae=[q,Se.fullsize?V[1]:V[0],V[2],V[3]],ke=d.draw(new D.PhyloCanvas.Render.Path(ge(Ae),{attr:Se}));ke[0].toBack()}var Me=d.draw(new D.PhyloCanvas.Render.Path(ge(V),{attr:T}));Me[0].toBack(),x=0,m=!1}else x||(x=I.y),I.chart[s]=="none"&&(x=0);m=!1}return u?ee:ee+p+n}function Ce(ee,s,l){for(var p=[],r,n=l&&l.bufferInner?parseFloat(l.bufferInner):D.PhyloCanvas.Render.Parameters.barChartBufferInner,i=l&&l.height?parseFloat(l.height):D.PhyloCanvas.Render.Parameters.barChartHeight?D.PhyloCanvas.Render.Parameters.barChartHeight:0,u=l&&l.width?parseFloat(l.width)<1?C*parseFloat(l.width):parseFloat(l.width):0|(D.PhyloCanvas.Render.Parameters.barChartWidth<1?C*D.PhyloCanvas.Render.Parameters.barChartWidth:D.PhyloCanvas.Render.Parameters.barChartWidth),m=0,x=0;x<B.length;x++)p.push(B[x].chart[s]);r=Math.max.apply(null,p),m=D.Common.roundFloat(i/r,4);for(var x=0;x<B.length;x++){var S=B[x];S.chart[s]>0&&d.draw(new D.PhyloCanvas.Render.Path(ge(ee+n,ee+n+m*S.chart[s],S.y-u/2,S.y+u/2),{attr:D.PhyloCanvas.Render.Style.getStyle(S.chart[s],"barChart")}))}return ee+n+i}return function(ee,s,l){if(this.getCanvasSize=function(){return[N,H]},this.getRoot=function(){return s.getRoot()},s.getValidate()){ee.draw({type:"text",x:0,y:ee.canvasSize[1]/3,text:s.getValidate()});return}d=ee;var p=s.getRoot(),r=s.getNewickLen();if(N=d.canvasSize[0],H=d.canvasSize[1],M=N/2,F=H/2,f=Math.min.apply(null,[N,H]),l=A.bufferRadius>1?A.bufferRadius:D.Common.roundFloat(f*A.bufferRadius,4),Z=A.bufferAngle,h=A.innerCircleRadius,o=A.minHeightBetweenLeaves,te=A.initStartAngle,q=Math.round((f-l-h)/2),b=(q-h)/r,C=D.Common.roundFloat((360-Z)/p.getCountAllChildren(),4),de(p,h),$=q+j+A.bufferOuterLabels,D.PhyloCanvas.Render.Parameters.integratedBinaryCharts.length){var n=D.PhyloCanvas.Render.Parameters.integratedBinaryCharts;for(var i in n){var u=n[i].bufferInner?n[i].bufferInner:D.PhyloCanvas.Render.Parameters.binaryChartBufferInner,m=n[i].thickness?n[i].thickness:D.PhyloCanvas.Render.Parameters.binaryChartThickness;$=xe($-m-u,n[i].chart,n[i])}}if($=X(),D.PhyloCanvas.Render.Parameters.binaryCharts.length){var x=D.PhyloCanvas.Render.Parameters.binaryCharts;for(var i in x)$=xe($,x[i].chart,x[i])}if(D.PhyloCanvas.Render.Parameters.barCharts.length){var S=D.PhyloCanvas.Render.Parameters.barCharts;for(var i in S)$=Ce($,S[i].chart,S[i])}B=[],L=[]}}();D.PhyloCanvas.Render.CircularPhylogram.prototype={};var xt=function(){var d=function(H){if(!!H&&typeof H=="object"){let f=function(){};return f.prototype=H,new f}},A=function(H){var f="";!!H&&typeof H=="string"&&(f=H);var b=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return b.test(f)},N={xmlToJSON:function(H){try{let h=function(q){return q.replace(/^\s+|\s+$/gm,"")},v=function(q){var B=/-/g,L=String(q).replace(B,"_");return L},w=function(q,B){if(B.attributes.length>0){var L=B.attributes.length-1,W;q._attributes=[];do W=String(v(B.attributes[L].name)),q._attributes.push(W),q[W]=h(B.attributes[L].value);while(L--)}},M=function(q){q.getNodeByAttribute=function(B,L){if(this.length>0){var W,Z=this.length-1;try{do if(W=this[Z],W[B]==L)return W;while(Z--)}catch($){return!1}return!1}},q.contains=function(B,L){if(this.length>0){var W=this.length-1;try{do if(this[W][B]==L)return!0;while(W--)}catch(Z){return!1}return!1}},q.indexOf=function(B,L){var W=-1;if(this.length>0){var Z=this.length-1;try{do this[Z][B]==L&&(W=Z);while(Z--)}catch($){return-1}return W}},q.SortByAttribute=function(B,L){if(this.length){let W=function($,j){var te=$[j];return te=A(te)?parseFloat(te):te,te},Z=function($,j){var te=0,oe,me;return oe=W($,B),me=W(j,B),oe<me?te=-1:me<oe&&(te=1),L&&(te=L.toUpperCase()=="DESC"?0-te:te),te};this.sort(Z)}},q.SortByValue=function(B){if(this.length){let L=function(Z){var $=Z.Text;return $=A($)?parseFloat($):$,$},W=function(Z,$){var j=0,te,oe;return te=L(Z),oe=L($),te<oe?j=-1:oe<te&&(j=1),B&&(j=B.toUpperCase()=="DESC"?0-j:j),j};this.sort(W)}},q.SortByNode=function(B,L){if(this.length){let W=function($,j){var te=$[j][0].Text;return te=A(te)?parseFloat(te):te,te},Z=function($,j){var te=0,oe,me;return oe=W($,B),me=W(j,B),oe<me?te=-1:me<oe&&(te=1),L&&(te=L.toUpperCase()=="DESC"?0-te:te),te};this.sort(Z)}}},F=function(q,B){var L,W,Z,$="";if(!B)return null;if(B.attributes.length>0&&w(q,B),q.Text="",B.hasChildNodes()){var j=B.childNodes.length-1,te=0;do switch(W=B.childNodes[te],W.nodeType){case 1:q._children=[],L=W.localName?W.localName:W.baseName,L=v(L),$!=L&&q._children.push(L),q[L]||(q[L]=[]),Z={},q[L].push(Z),W.attributes.length>0&&w(Z,W),q[L].contains||M(q[L]),$=L,W.hasChildNodes()&&F(Z,W);break;case 3:q.Text+=h(W.nodeValue);break;case 4:q.Text+=W.text?h(W.text):h(W.nodeValue);break}while(te++<j)}};if(!H)return null;var f={};f.typeOf="JSXBObject";var b=H.nodeType==9?H.documentElement:H;if(f.RootName=b.nodeName||"",H.nodeType==3||H.nodeType==4)return H.nodeValue;var C=function(){var q={activate:function(){var B=[];return B&&(B.getNodesByAttribute=function(L,W){if(!!B&&B.length>0){var Z=[],$,j=B.length-1;try{do $=B[j],$[L]===W&&Z.push($);while(j--);return Z.reverse(),Z}catch(te){return null}return null}},B.getNodeByAttribute=function(L,W){if(!!B&&B.length>0){var Z,$=B.length-1;try{do if(Z=B[$],Z[L]===W)return Z;while($--)}catch(j){return null}return null}},B.getNodesByValue=function(L){if(!!B&&B.length>0){var W=[],Z,$=B.length-1;try{do Z=B[$],!!Z.Text&&Z.Text===L&&W.push(Z);while($--);return W}catch(j){return null}return null}},B.contains=function(L,W){if(!!B&&B.length>0){var Z=B.length-1;try{do if(B[Z][L]===W)return!0;while(Z--)}catch($){return!1}return!1}},B.indexOf=function(L,W){var Z=-1;if(!!B&&B.length>0){var $=B.length-1;try{do B[$][L]===W&&(Z=$);while($--)}catch(j){return-1}return Z}},B.SortByAttribute=function(L,W){if(!!B&&B.length>0){let Z=function(j,te){var oe=j[te];return oe=bam.validation.isNumeric(oe)?parseFloat(oe):oe,oe},$=function(j,te){var oe,me;oe=Z(j,L),me=Z(te,L);var G=oe<me?-1:me<oe?1:0;return W&&(G=W.toUpperCase()==="DESC"?0-G:G),G};B.sort($)}},B.SortByValue=function(L){if(!!B&&B.length>0){let W=function($){var j=$.Text;return j=bam.validation.isNumeric(j)?parseFloat(j):j,j},Z=function($,j){var te,oe;te=W($),oe=W(j);var me=te<oe?-1:oe<te?1:0;return L&&(me=L.toUpperCase()==="DESC"?0-me:me),me};B.sort(Z)}},B.SortByNode=function(L,W){if(!!B&&B.length>0){let Z=function(j,te){var oe=j[te][0].Text;return oe=bam.validation.isNumeric(oe)?parseFloat(oe):oe,oe},$=function(j,te){var oe,me;oe=Z(j,L),me=Z(te,L);var G=oe<me?-1:me<oe?1:0;return W&&(G=W.toUpperCase()==="DESC"?0-G:G),G};B.sort($)}}),B}};return q}(),o=function(){var q=d(C);return q.activate()};return F(f,b),H=null,b=null,f}catch(h){return null}},textToXML:function(H){var f=null;try{f=document.all?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser,f.async=!1}catch(C){throw new Error("XML Parser could not be instantiated")}var b;try{document.all?b=f.loadXML(H)?f:!1:b=f.parseFromString(H,"text/xml")}catch(C){throw new Error("Error parsing XML string")}return b}};return N}();var w1=function(){let d=[{name:"valapalagilaka",search:"с╣Щ",replace:()=>"r"},{name:"short e",search:"с║╜",replace:()=>"e"},{name:"short o",search:"├╡",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б e",search:"├к",replace:()=>"e"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б o",search:"├┤",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б ai",search:"├К",replace:()=>"E"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б au",search:"├Ф",replace:()=>"O"},{name:"candrabindu",search:"m╠Р",replace:()=>"M"},{name:"oс╣Гk─Бras",search:"oс╣Б",replace:()=>"oM"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"(?:kK|gG|cC|jJ|wW|qQ|tT|dD|pP|bB)",replace:C=>C[0].slice(-1)},{name:"geminated m after h",search:"(?:Mhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rfi]|p[aA])tt|tt(?=[rvy]\\S)",replace:C=>`${C[1]}t`},{name:"geminated consonants after r",search:"([rf]\\s*)([kgcjwqdpbRnmyvl])\\2{1,2}",replace:C=>`${C[1]}${C[2]}`},{name:"final nasal variants",search:"(?:M[lSs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnNYR](?=[pPbBmdDtTnwWqQcCjJkKgG])",replace:()=>"M"},{name:"final anusv─Бra variants",search:"M?[mN](?!\\S)|n(?=\\s+[tdn])|Y(?=\\s+[jc])",replace:()=>"M"},{name:"visarga aс╕е before voiced consonants",search:"(?<!\\sB)(?:a[Hr]|[o])(?=\\s+['gGjJqQdDnbBmrylvh])",replace:()=>"aH"},{name:"visarga aс╕е before vowels",search:"aH(?=\\s+[AiIeuUof])",replace:()=>"a"},{name:"visarga aс╕е before unvoiced consonants and space + anusv─Бra",search:"o\\s+(?=[kKcCwWtTpPszSM])",replace:()=>"aH a"},{name:"visarga ─Бс╕е variants",search:"AH(?=\\s+[aAiIeEuUogGjJqQdDbBnmyrlvh])",replace:()=>"A"},{name:"other visarga variants",search:"H?[rszS](?!\\S)",replace:()=>"H"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"z(?=[kK])|s(?=s)",replace:()=>"H"},{name:"final au/─Бv",search:"Av(?!\\S)",replace:()=>"O"},{name:"final su",search:"(?<=[sz])v(?=\\s+[aAiIuUoOeE])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aAuUoOeE])",replace:()=>"y"},{name:"kcch/k┼Ы",search:"k(\\s*)(?:S|c?C)",replace:C=>`k${C[1]}S`},{name:"c┼Ы/t┼Ы",search:"[tc](\\s*)S",replace:C=>`c${C[1]}C`},{name:"cch/ch",search:"([aAiIuUeEoO])C",replace:C=>`${C[1]}cC`},{name:"final t + hi",search:"d(\\s+)D(?=[iy](?:\\s|$))",replace:C=>`t${C[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aAiIeEuUoOgGdDbByrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:C=>`${C[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aAuUeEoO])",replace:()=>"i"},{name:"bhd for bdh",search:"Bd",replace:()=>"bD"}],A=[{name:"valapalagilaka",search:"с╣Щ",replace:()=>"r"},{name:"short e",search:"с║╜",replace:()=>"e"},{name:"short o",search:"├╡",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б e",search:"├к",replace:()=>"e"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б o",search:"├┤",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б ai",search:"a├о",replace:()=>"ai"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б au",search:"a├╗",replace:()=>"au"},{name:"candrabindu",search:"m╠Р",replace:()=>"с╣Г"},{name:"oс╣Гk─Бras",search:"oс╣Б",replace:()=>"oс╣Г"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"([kgcjс╣нс╕Нtdpb]){2}h",replace:C=>`${C[1]}h`},{name:"geminated m after h",search:"(?:с╣Гhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rс╣Ыi]|p[a─Б])tt|tt(?=[rvy]\\S)",replace:C=>`${C[1]}t`},{name:"geminated consonants after r",search:"([rс╣Ы]\\s*)([kgcjс╣нс╕Нс╣Зtdnpbmyvl])\\2{1,2}",replace:C=>`${C[1]}${C[2]}`},{name:"final nasal variants",search:"(?:с╣Г[lс╣гs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnс╣Е├▒с╣З](?=[pbmdtnс╣нс╕Нcjkg])",replace:()=>"с╣Г"},{name:"final anusv─Бra variants",search:"с╣Г?[mс╣Е](?!\\S)|n(?=\\s+[tdn])|├▒(?=\\s+[jc])",replace:()=>"с╣Г"},{name:"visarga aс╕е before voiced consonants",search:"(?:a[с╕еr]|[o])(?=\\s+['gjс╕Нdnbmyrlvh])",replace:()=>"aс╕е"},{name:"visarga aс╕е before vowels",search:"aс╕е(?=\\s+[─Бi─лeu┼лoс╣Ы])",replace:()=>"a"},{name:"visarga aс╕е before unvoiced consonants and space + anusv─Бra",search:"o\\s+(?=[kcс╣нtp┼Ыс╣гsс╣Г])",replace:()=>"aс╕е a"},{name:"visarga ─Бс╕е variants",search:"─Бс╕е(?=\\s+[a─Бi─лeu┼лogjс╕Нdnbmyrlvh])",replace:()=>"─Б"},{name:"other visarga variants",search:"с╕е?[r┼Ыс╣гs](?!\\S)",replace:()=>"с╕е"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"с╣г(?=k)|s(?=s)",replace:()=>"s"},{name:"final au/─Бv",search:"─Бv(?!\\S)",replace:()=>"au"},{name:"final su",search:"(?<=[sс╣г])v(?=\\s+[a─Бi─лu┼лoe])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[a─Бu┼лeo])",replace:()=>"y"},{name:"kcch/k┼Ы",search:"k(\\s*)(?:┼Ы|c?ch)",replace:C=>`k${C[1]}┼Ы`},{name:"c┼Ы/t┼Ы",search:"[tc](\\s*)┼Ы",replace:C=>`c${C[1]}ch`},{name:"cch/ch",search:"([a─Бi─лu┼лeo])ch",replace:C=>`${C[1]}cch`},{name:"final t + hi",search:"d(\\s+)dh(?=[iy](?:\\s|$))",replace:C=>`t${C[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[a─Бi─лeu┼лogdbyrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:C=>`${C[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[a─Бu┼лeo])",replace:()=>"i"},{name:"bhd for bdh",search:"bhd",replace:()=>"bdh"}],N={none:{name:"remove spaces",search:"\\s",replace:()=>""},collapse:{name:"collapse spaces",search:"\\s+",replace:()=>" "}},H=function(C,o){let h=o.join(""),v=[],w=[...h.matchAll(C.search)],M=0,F=null;for(let q of o){let B=M+q.length,L=q,W=0;if(F)if(F.length<=q.length)L=f(q,0,F.length,F.text),W=F.text.length-F.length,F=null;else{L=F.text.slice(0,q.length);let $=F.text.slice(q.length);F={length:F.length-q.length,text:$};continue}for(;w.length>0&&w[0].index<B;){let Z=w.shift(),$=Z.index-M+W,j=C.replace(Z);if(Z.index+Z[0].length<B)L=f(L,$,Z[0].length,j),W=W+j.length-Z[0].length;else{let te=q.length-$+W,oe=j.slice(0,te);L=L.slice(0,$)+oe;let me=j.slice(te);F={length:Z[0].length-te,text:me}}}v.push(L),M=B}return v},f=function(C,o,h,v){return C.slice(0,o)+v+C.slice(o+h)};return function(C){let o=C.map(h=>De.t(h,"iast","slp1"));for(let h of[...d,N.none])o=H(h,o);return o.map(h=>De.t(h,"slp1","iast"))}}();var Bt={smush:function(d,A){return d.toLowerCase().replace(/([с╕Нdrmvynhs]) ([a─Бi─лu┼лс╣Ыeo├й├│])/g,"$1$2"+A).replace(/([kgcjс╣нс╕Нtdpb]) h/g,"$1тАМ"+A+"h").replace(/([kgcj├▒с╕Нtdnpbmrlyv┼Ыс╣гsс╣Щ]) ([kgcjс╣нс╕Нtdnpbmyrlv┼Ыс╣гshс╕╗])/g,"$1"+A+"$2").replace(/([o├│e├й─Б]) ([с╣Г'])/g,"$1"+A+"$2").replace(/^с╣Г/,"'тАНс╣Г").replace(/^с╕е/,"'тАНс╕е").replace(/^_y/,"'тАНy").replace(/├╝/g,"тАМu").replace(/├п/g,"тАМi").replace(/_{1,2}(?=\s*)/g,function(N){if(N==="__")return"тАН";if(N==="_")return"тАМ"})},iast:function(d,A){let N=A||"devanagari";return De.t(d,N,"iast",{skip_sgml:!0})},devanagari:function(d,A){let N=A||"",H={skip_sgml:!0},f=d.replace(/с╣Щ/g,"r").replace(/^_─Б/,"рд╜тАНрд╛"),b=Bt.smush(f,N);return De.t(b,"iast","devanagari",H).replace(/┬п/g,"ъг╗")},malayalam:function(d,A){let N=A||"",H={skip_sgml:!0},f={р┤Х:"р╡┐",р┤д:"р╡╜",р┤и:"р╡╗",р┤о:"р╡Ф",р┤░:"р╡╝"},b=d.replace(/^_─Б/,"р┤╜тАНр┤╛"),C=Bt.smush(b,N).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"r").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return De.t(C,"iast","malayalam",H).replace(/(^|[^р╡Н])р┤░р╡Н(?=\S)/g,"$1р╡О").replace(/([р┤Хр┤др┤ир┤ор┤░])р╡Н(?![^\s\u200C,тАФтАЩтАХ])/g,function(h,v){return f[v]})},grantha:function(d,A){let N=A||"",H={skip_sgml:!0},f=new Map([["р┤╕","юЗУ"],["р┤░","р╡╝"],["р┤п","юЗЛ"],["р┤Ъ","юЖ╢"],["р┤ж","юЗВ"],["р┤╢","юЗТ"]]),b=new RegExp("(["+[...f.keys()].join("")+"])р╡Н(?![^тАМ ,тАФтАЩтАХ])","g"),C=d.replace(/^_─Б/,"р┤╜тАНр┤╛"),o=Bt.smush(C,N).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"r").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return De.t(o,"iast","malayalam",H).replace(/(^|[^р╡Н])р┤░р╡Н(?=\S)/g,"$1р╡О").replace(b,(v,w)=>f.get(w)).replace(/р┤Хр╡Нр┤╖р┤┐/g,"роХрпНро╖ро┐")},telugu:function(d,A){var N=A||"";let H={skip_sgml:!0},f=d.replace(/^_─Б/,"р░╜тАНр░╛"),b=Bt.smush(f,N).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"rтАН").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return De.t(b,"iast","telugu",H)}},Ot=function(d,A,N=!1,H="sa"){let f=Bt[A],b=d.cloneNode(!0),C=function(o,h){let v=o.childNodes;for(let w of v)if(w.nodeType!==8){if(w.nodeType===3){if(h!=="sa")continue;w.data=f(w.data,N)}else if(w.hasChildNodes()){let M=w.getAttribute("lang")||h;M==="sa"&&w.classList.contains("subst")&&Z1(w,A),C(w,M)}}};return C(b,H),b},C1=function(d,A=!1){if(d.nodeType===3)return d;let N=document.createTreeWalker(d,NodeFilter.SHOW_TEXT,null,!1);if(A){let H;for(;N.nextNode();)H=N.currentNode;return H}else return N.nextNode},Z1=function(d,A){if(d.firstChild.nodeType!==3&&d.lastChild.nodeType!==3)return;let N=d.childNodes,H=/^[a─Бi─лu┼лeoс╣Ыс╣Эс╕╖с╣Гс╕е]/,f=/[kgс╣Еcj├▒с╣нс╕Нс╣Зtdnpbmyrlvс╣г┼Ыsh]$/,b=["─Б","i","─л","e","o","_","ai","au"],C=["h","k","┼Ы","y","g","gh","c","ch","jh","с╣нh","с╕Н","с╕Нh","t","th","d","dh","n","p","ph","bh","m","r","с╕╗","v","с╣г","s"];var o=!1,h=[],v=[];let w=N[0].nodeType===3;for(let M of N){if(M.nodeType>3)continue;let F=M.textContent.trim();if(F!==""){if(F==="a"){M.textContent="";continue}if(F.match(f)){let q=C1(M,!0);q.textContent=q.textContent.replace(/\s+$/,"")+"a",A==="telugu"&&C.indexOf(F)>=0&&h.push(M)}if(M===d.lastChild&&M.nodeType===3){let q=document.createElement("span");q.appendChild(M.cloneNode(!1)),d.replaceChild(q,M),M=q,M.classList.add("aalt")}else w&&F.match(H)&&M.classList.add("aalt");switch(A){case"devanagari":(F==="i"||F==="├й")&&v.unshift(M);break;case"grantha":case"malayalam":if(F==="e"||F==="ai")v.unshift(M);else if(F==="o"){let q=M.cloneNode(!0);k1("o","e",q),v.unshift(q),k1("o","─Б",M)}break;case"telugu":!o&&b.indexOf(F)>=0&&(o=!0);break}}}for(let M of v)d.insertBefore(M,d.firstChild);if(o)for(let M of h){let F=C1(M,!0);F.textContent=F.textContent+"тАНр▒Н"}},k1=function(d,A,N){let H=document.createTreeWalker(N,NodeFilter.SHOW_TEXT,null,!1);for(;H.nextNode();)H.currentNode.textContent.match(d)&&(H.currentNode.textContent=A)};"use strict";var en=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,115,116,114,105,112,45,115,112,97,99,101,32,101,108,101,109,101,110,116,115,61,34,42,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,47,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,97,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,45,45,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,33,45,45,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,45,45,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),_1=en;"use strict";var tn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,32,32,32,32,60,120,115,108,58,111,117,116,112,117,116,32,105,110,100,101,110,116,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,72,101,97,100,101,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,120,101,110,111,68,97,116,97,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),S1=tn;"use strict";var nn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,97,98,108,101,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,114,101,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,100,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,115,101,108,101,99,116,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,104,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,99,111,112,101,34,62,114,111,119,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,114,97,103,103,97,98,108,101,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,100,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,97,114,101,110,116,58,58,120,58,99,108,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,39,49,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,115,116,97,114,116,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,101,110,100,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,105,110,116,101,114,110,97,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,105,110,115,105,103,110,105,102,105,99,97,110,116,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,105,110,115,105,103,110,105,102,105,99,97,110,116,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,98,105,110,97,114,121,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,98,105,110,97,114,121,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),A1=nn;"use strict";var rn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,116,114,101,101,45,118,101,114,115,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,108,97,110,103,34,62,101,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,91,118,101,114,115,101,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,93,60,47,120,115,108,58,116,101,120,116,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),P1=rn;"use strict";var sn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,101,109,101,110,100,101,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,110,111,116,40,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,105,110,118,105,115,105,98,108,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,48,48,65,48,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,55,51,59,60,47,120,115,108,58,116,101,120,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,99,108,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,114,111,117,112,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),E1=sn;"use strict";var on=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),R1=on;var bt=function(d){let N=new DOMParser().parseFromString(d,"text/xml"),H=new XSLTProcessor;return H.importStylesheet(N),H},L1=function(d){this.transformString=function(A,N){let H=d.xml.createElementNS(d.teins,"ab");return H.innerHTML=A,N.transformToFragment(H,document)},this.sheets={csv:bt(_1),xml:bt(S1),matrix:bt(A1),lemma:bt(E1),lg:bt(R1),tree:bt(P1)}};var B1=function(d){let A={curxml(){return d.xml},teins(){return d.teins},basename(){return d.filename.split(/\.[^.]+$/)[0]},range(f,b){return Array.from(Array(parseInt(b)-parseInt(f)+1).keys(),C=>C+f)},maxlemma(){return[...A.firsttext().querySelectorAll("w[n]")].length-1},lemmata(f,b){let C=b||document.querySelector("#views");return f===!1?C.querySelectorAll(".lemma"):C.querySelectorAll(`.lemma[data-n="${f}"]`)},tds(f,b){let C=b||d.matrix.boxdiv;return f===!1?C.querySelectorAll("td[data-n]"):C.querySelectorAll(`td[data-n="${f}"]`)},firsttd(f,b){return(b||d.matrix.boxdiv).querySelector(`td[data-n="${f}"]`)},tr(f){return d.matrix.boxdiv.querySelector(`tr[data-n="${f}"]`)},trs(f){return(f||d.matrix.boxdiv).querySelectorAll("tr[data-n]")},firsttr(f){return(f||d.matrix.boxdiv).querySelector("tr[data-n]")},lasttr(f){return(f||d.matrix.boxdiv).querySelector("tr[data-n]:last-of-type")},trWalker(f){return document.createNodeIterator(f,NodeFilter.SHOW_ELEMENT,{acceptNode:function(b){if(b.tagName==="TD")return NodeFilter.FILTER_ACCEPT}},!1)},textWalker(f){return document.createNodeIterator(f,NodeFilter.SHOW_ELEMENT,{acceptNode:function(b){if(b.tagName.toLowerCase()==="w")return NodeFilter.FILTER_ACCEPT}},!1)},tei(f,b=d.xml){return b.querySelector(`TEI[n="${f}"]`)},teis(f=d.xml){return f.querySelectorAll("TEI")},texts(f){return(f||d.xml).querySelectorAll("text")},serializedtexts(f,b){let C=[...f.querySelectorAll("otu[label]")].map(h=>h.getAttribute("label"));return[...A.teis()].filter(h=>C.indexOf(h.getAttribute("n"))!==-1).map(h=>[f.querySelector(`node[label="${h.getAttribute("n")}"]`).getAttribute("id"),[...h.querySelectorAll("w")].map(v=>b&&v.hasAttribute("lemma")?v.getAttribute("lemma"):v.textContent)])},serializedlevels(f){return f.map(b=>{if(b instanceof Map){let C=new Map;for(let[o,h]of b)C.set(o.getAttribute("id"),h.map(v=>v.getAttribute("id")));return C}else return b.map(C=>C.getAttribute("id"))})},firsttext(f){return f?d.xml.querySelector(`[n="${f}"] text`):d.xml.querySelector("text")},words(f,b){let C=b||d.xml;return f===!1?C.querySelectorAll("w[n]"):C.querySelectorAll(`w[n="${f}"]`)},firstword(f,b){return(b||d.xml).querySelector(`w[n="${f}"]`)},normal(f){return(f||document.getElementById("views")).querySelectorAll(".lemma[data-normal], .tree-lemma[data-normal]")},htmlreading(f,b){return b&&f.dataset.normal?f.dataset.normal:f.IAST.textContent},ths(){return d.matrix.boxdiv.querySelectorAll("th[data-ref]")},firstth(f){return d.matrix.boxdiv.querySelector(`th[data-ref="${f}"]`)},checkbox(f,b){return d.matrix.boxdiv.querySelector(`th[data-ref="${f}"] input.${b}`)},highlit(){let b=A.firsttr().querySelectorAll(".highlit"),C=new Set;for(let o of b)C.add(o.dataset.n);return C},highlitcell(){return d.matrix.boxdiv.querySelector("td.highlitcell")},highlitrow(){let f=A.highlitcell();return f?f.closest("tr"):!1},lowhigh(f){let b=[...f].sort((h,v)=>parseInt(h)-parseInt(v)),C=parseInt(b[0]),o=b.length>1?parseInt(b[b.length-1]):void 0;return[C,o]},readings(f,b){let C=b||d.matrix.boxdiv,o=A.tds(f,C);var h=0;let v=new Set;for(let w of o){let M=w.textContent;M!==""&&(h++,v.add(M))}return[h,v.size]},attr(f,b){let C=A.firsttr();var o=[];for(let h of b)A.firsttd(h,C).dataset[f]==="true"?o.push([h,!0]):o.push([h,!1]);return new Map(o)},whichattr(f){return f.hasAttribute("n")?"n":f.hasAttribute("data-n")?"data-n":f.hasAttribute("data-ref")?"data-ref":!1},clauses(f,b=!1){let C=A.firsttext();var o=!1;let h=new Set;for(let v of f){let M=A.firstword(v,C).closest("cl");M?h.add(M):b&&(o=!0)}if(h.size===0)return!1;{let v=[...h].map(w=>{let M=w.querySelectorAll("w");return new Set([...M].map(F=>F.getAttribute("n")))});return o?[null].concat(v):v}},clausesToRemove(f,b,C=0){let o=new Set;for(let h of f){let v=new Set(h);for(let w of b)v.delete(w);v.size<=C&&o.add(h)}return[...o]},empty(){let f=new Set,b=[...A.trs()],C=b.map(v=>A.trWalker(v)),o=b[0].querySelector("td:last-of-type").dataset.n;for(let v=0;v<=o;v++){var h=!0;for(let w of C){let M=w.nextNode();h&&M.textContent!==""&&(h=!1)}h&&f.add(v)}return f},prevNonempty(f,b){for(let C=f;C>=0;C--)if(b[C].textContent!=="")return C;return!1},nextNonempty(f,b){for(let C=f;C<b.length;C++)if(b[C].textContent!=="")return C;return!1},cursorPos(f){let b=window.getSelection().getRangeAt(0),C=b.cloneRange();C.selectNodeContents(f);let o=C.toString().length;return C.setEnd(b.endContainer,b.endOffset),[C.toString().length,o]},selection(){let f=window.getSelection();if(f.isCollapsed)return!1;let b=f.rangeCount>1?f.getRangeAt(1).cloneContents():f.getRangeAt(0).cloneContents();if(!b)return!1;let C=new Set,o=b.querySelectorAll(".lemma");for(let h of o)C.add(h.dataset.n);return C}},N={undo(){return d.undo.length>0},redo(){return d.redo.length>0},checkbox(f,b=null){if(!N.anyhighlit())return!1;let C=b===null?A.highlit():b,o=A.attr(f,C);for(let h of o.values())if(h===!1)return!1;return!0},grouped(){let f=A.highlit();if(!f)return!1;let b=A.firsttr();for(let C of f){let o=A.firsttd(C,b);if(o.classList.contains("group-start")||o.classList.contains("group-internal")||o.classList.contains("group-end"))return!0}return!1},oneGrouped(){let f=A.highlit();if(f.size===0)return!1;if(f.size===1){let b=A.firsttr(),C=A.firsttd([...f][0],b);return!!(C.classList.contains("group-start")||C.classList.contains("group-end")||C.classList.contains("group-internal"))}return!0},anyhighlit(){return!!d.matrix.boxdiv.querySelector("td.highlit")},manyhighlit(){return A.highlit().size>1},highlitcell(){return!!d.matrix.boxdiv.querySelector("td.highlitcell")},normalizedView(){return document.getElementById("views").classList.contains("normalized")},anyNormalized(){return d.matrix.boxdiv.querySelector(".lemma[data-normal]")},headerView(){return d.matrix.boxdiv.querySelector("tr.header").style.display!=="none"}},H={tei:function(f){let b=d.xml.createElementNS(d.teins,"TEI");b.setAttribute("n",f);let C=A.firsttext().cloneNode(!0);b.appendChild(C);for(let o of A.words(!1,C))for(o.removeAttribute("lemma");o.firstChild;)o.firstChild.remove();return b},emptycell:function(f){let b=document.createElement("td");return b.className="lemma",b.dataset.n=f,b},emptyword:function(f,b=d.xml){let C=b.createElementNS(d.teins,"w");return C.setAttribute("n",f),C},emptywords:function(f,b,C){let o=b||d.maxlemma,h=C||0;for(let v=h;v<=o;v++){let w=H.emptyword(v);f.appendChild(w)}},row:function(f,b){let C=document.createElement("tr"),o=document.createElement("th");o.scope="row",o.draggable=!0,o.appendChild(document.createTextNode(f)),C.dataset.n=f,C.appendChild(o);let h=A.firsttr();for(let v of h.querySelectorAll("td")){let w=document.createElement("td");w.dataset.n=v.dataset.n,w.className=v.className,b&&w.classList.add(b),C.appendChild(w)}return C},blackout(f,b){let C=document.createElement("div");C.id="blackout",C.appendChild(f),document.body.appendChild(C);let o=function(w){b(w),C.parentNode.removeChild(C)},h=function(w){if(!w.target.closest(".popup")){let F=document.querySelector("#blackout");F.parentNode.removeChild(F)}};C.querySelector("button").addEventListener("click",o),C.addEventListener("click",h)}};return{find:A,check:N,make:H}};var N1=function(d,A){let N={Intersection:function(...o){let h=o[0];return new Set([...h].filter(v=>{for(let w=1;w<o.length;w++)if(!o[w].has(v))return!1;return!0}))},Union:function(...o){return new Set(o.reduce((h,v)=>(h=[...h,...v],h),[]))}},H=function(o){let h=new Map;for(let v of A[0]){let w=d.get(v),M=w!==void 0?[w]:[];h.set(v,new Set(M))}for(let v=1;v<A.length;v++)for(let[w,M]of A[v]){let F=M.map(L=>h.get(L)),q=N.Intersection(...F);if(o&&w===o&&q.size===1)return[...q][0];let B=q.size>0?q:N.Union(...F);h.set(w,B)}return h},f=function(o,h){let v=A[0],w=new Map;for(let M of A[A.length-1])w.set(M[0],o.get(M[0]));for(let M=A.length-1;M>1;M--)for(let[F,q]of A[M]){let B=w.get(F);for(let L of q){if(v.indexOf(L)!==-1)continue;let W=o.get(L),Z=(()=>{if(W.size===1)return W;let $=N.Intersection(B,W);return $.size>0?$:W})();if(h&&L===h)return Z;w.set(L,Z)}}return h?w.get(h):w},b=function(o=null){let h=H(o);if(typeof h=="string")return h;let v=f(h,o);return o?C(v):new Map(Array.from(v,([w,M])=>[w,C(M,!0)]))},C=function(o,h=!1){if(!h&&o.size===1)return[...o][0].trim();let v=[...o].map(w=>w.trim()===""?"_":w);return v.length===1?v[0]:"{"+v.join(", ")+"}"};return{run:b}};import{showSaveFilePicker as Kt}from"https://cdn.jsdelivr.net/npm/native-file-system-adapter/mod.js";var T1=function(d,A){let N=d.find,H=d.make,f=N.teins(),b={write:async function(C,o){let h=await o.createWritable();h.write(C),h.close()},xml:async function(C){let o=new XMLSerializer().serializeToString(A.sheets.xml.transformToDocument(C)),h=new Blob([o],{type:"text/xml;charset=utf-8"}),v=N.basename()+".xml",w=await Kt({_preferPolyfill:!1,suggestedName:v,types:[{description:"TEI XML",accept:{"text/xml":[".xml"]}}]});b.write(h,w)},csv:async function(C){let o=A.sheets.csv.transformToDocument(C).documentElement.textContent,h=new Blob([o],{type:"text/csv;charset=utf-8"}),v=N.basename()+".csv",w=await Kt({_preferPolyfill:!1,suggestedName:v,types:[{description:"CSV file",accept:{"text/csv":[".csv"]}}]});b.write(h,w)},nexus:async function(C){let o=[...N.texts(C)],h=o.length,v="0 1 2 3 4 5 6 7 8 9 A B C D E F G H K L M N P Q R S T U V W X Y Z a b c d e f g h k l m n p q r s t u v w x y z",[w,...M]=v.split(" "),F="-",q=o.map(he=>"'"+he.parentElement.getAttribute("n")+"'"),B=o.map(he=>N.textWalker(he)),L=o[0].querySelectorAll("w").length,W=[],Z=q.map(he=>[he+" "]);for(let he=0;he<L;he++){let se=new Set,z=[];for(let de=0;de<B.length;de++){let X=B[de].nextNode(),xe=De.t(X.textContent.trim().toLowerCase(),"iast","hk").replace(/'/g,"()");z.push(xe),xe!==""&&xe!=="[]"&&se.add(xe)}W.push(["[]",...se]);let ge=new Map([...se].map((de,we)=>[de,M[we]]));for(let de=0;de<z.length;de++){let we=(X=>{switch(z[X]){case"":return F;case"[]":return w;default:return ge.get(z[X])}})(de);Z[de].push(we)}}let $=W.map((he,se)=>se+1+" / "+[...he].map(z=>`'${z}'`).join(" ")).join(`,
`),j=Z.map(he=>he.join("")).map(he=>he.replace(/0{8,}/g,se=>se.replace(/0/g,"-"))).reduce((he,se)=>he+`
`+se),te=`#NEXUS

BEGIN TAXA;
  DIMENSIONS NTAX=${h};
  TAXLABELS ${q.join(" ")};
END;

BEGIN CHARACTERS;
  DIMENSIONS
    NCHAR=${L};
  FORMAT 
    DATATYPE=STANDARD 
    RESPECTCASE 
    GAP=${F} 
    MISSING=? 
    SYMBOLS="${v}";
  CHARSTATELABELS
${$}
;
MATRIX
${j}
;
END;
`,oe=new Blob([te],{type:"text/nexus;charset=iso8859-1"}),me=N.basename()+".nex",G=await Kt({_preferPolyfill:!1,suggestedName:me,types:[{description:"NEXUS file",accept:{"text/nexus":[".nex"]}}]});b.write(oe,G)},processOptions:function(C){let o=N.curxml().cloneNode(!0);if(C.get("option_normalize")){let h=o.querySelectorAll("w[lemma]");for(let v of h)v.textContent=v.getAttribute("lemma")}if(C.get("option_mergegroups")){let h=o.querySelectorAll("cl");for(let v of h){let w=v.removeChild(v.firstChild);for(;v.firstChild;){let M=w.getAttribute("lemma")||w.textContent,F=v.firstChild.getAttribute("lemma")||v.firstChild.textContent;for(w.setAttribute("lemma",M+F);v.firstChild.firstChild;)w.appendChild(v.firstChild.firstChild);v.firstChild.remove()}w.getAttribute("lemma")===w.textContent&&w.removeAttribute("lemma"),v.parentNode.insertBefore(w,v),v.parentNode.removeChild(v)}}if(C.get("option_insignificant")){let h=o.querySelectorAll('w[insignificant="true"]');for(let v of h)v.parentNode.removeChild(v)}if(C.get("option_binary")){let v=[...N.firsttext().querySelectorAll('w[binary="true"]')].map(w=>w.getAttribute("n"));for(let w of v){let M=o.querySelectorAll(`w[n="${w}"]:not(:empty)`);if(M.length===0)continue;let F=`[${M[0].textContent}]`;for(let q of M)q.textContent=F}}if(C.get("option_noempty")){let h=o.querySelectorAll("w:empty");for(let v of h)v.textContent="[]"}return C.get("option_basetext")?b.makeApp(C,o):o},makeHeader(C,o){let h=C.createElementNS(f,"teiHeader"),v=C.createElementNS(f,"fileDesc"),w=C.createElementNS(f,"sourceDesc"),M=C.createElementNS(f,"listWit");for(let F of N.teis(o)){let q=F.getAttribute("n"),B=C.createElementNS(f,"witness");B.setAttribute("xml:id",q);let L=C.createElementNS(f,"idno");L.setAttribute("type","siglum"),L.append(q),B.appendChild(L),M.appendChild(B)}return w.appendChild(M),v.appendChild(w),h.appendChild(v),h},makeApp(C,o){let h=C.get("option_basetext"),v=N.tei(h,o),w=C.get("option_app_normalize"),M=document.implementation.createDocument(f,"",null);M.appendChild(v);let F=b.makeHeader(M,o);v.insertBefore(F,v.firstChild);let q=N.words(!1,v);for(let B of q){let L=B.getAttribute("n"),W=w&&B.getAttribute("lemma")||B.textContent,Z=[],$=new Map,j=N.words(L,o);for(let te of j){let oe=te.closest("TEI").getAttribute("n");if(w&&te.getAttribute("lemma")===W)Z.push(oe);else if(te.textContent===W)Z.push(oe);else{let me=te.textContent===""?"[om.]":te.textContent,G=$.get(me)||[];G.push(oe),$.set(me,G)}}if($.size===0)for(;B.firstChild;)B.parentElement.insertBefore(B.firstChild,B);else{let te=M.createElementNS(f,"app");te.setAttribute("n",L);let oe=M.createElementNS(f,"lem"),me=Z.map(G=>`#${G}`).join(" ");for(me!==""&&oe.setAttribute("wit",me);B.firstChild;)oe.appendChild(B.firstChild);te.appendChild(oe);for(let[G,he]of $){let se=M.createElementNS(f,"rdg"),z=he.map(ge=>`#${ge}`).join(" ");se.setAttribute("wit",z),se.append(G),te.appendChild(se)}B.parentElement.insertBefore(te,B),oe.textContent.match(/\s$/)&&B.parentElement.insertBefore(M.createTextNode(" "),B)}B.remove()}return M},options(){return document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <input type="checkbox" id="option_insignificant" name="option_insignificant"><label for="option_insignificant">Remove insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_binary" name="option_binary"><label for="option_binary">Binarize marked lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_noempty" name="option_noempty"><label for="option_noempty">Gaps are significant</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups"><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`)},appOptions(){let C=document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <label for="option__basetext">Base text</label>
        <select id="option__basetext" name="option_basetext"></select>
      </div>
      <div>
        <input type="checkbox" id="option__app_insignificant" name="option_app_insignificant"><label for="option_app_insignificant">Ignore insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups" checked><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_app_normalize" name="option_app_normalize" checked><label for="option_app_normalize">Normalized spellings in positive apparatus</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings in negative apparatus</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`),o=C.getElementById("option__basetext"),h=[...N.trs()].map(v=>v.dataset.n);for(let v of h){let w=document.createElement("option");w.value=v,w.append(v),o.appendChild(w)}return C},showOptions:function(C,o){let h=o(),v=function(w){w.preventDefault();var M=[];let F=document.getElementById("exportform").elements;for(let B of F)B.type==="checkbox"?M.push([B.name,B.checked]):M.push([B.name,B.value]);let q=b.processOptions(new Map(M));C(q)};H.blackout(h,v)}};return b};function Ht(d){var A=[],N=0;if(this.trie=this.createTrie(d.patterns),this.leftMin=d.leftmin,this.rightMin=d.rightmin,this.exceptions={},d.exceptions)for(A=d.exceptions.split(/,\s?/g);N<A.length;N+=1)this.exceptions[A[N].replace(/\u2027/g,"").toLowerCase()]=new RegExp("("+A[N].split("тАз").join(")(")+")","i")}Ht.prototype.createTrie=function(d){var A=0,N=0,H=0,f=0,b=null,C=null,o=null,h=null,v={_points:[]},w;for(A in d)if(d.hasOwnProperty(A))for(w=d[A].match(new RegExp(".{1,"+ +A+"}","g")),N=0;N<w.length;N+=1){for(b=w[N].replace(/[0-9]/g,"").split(""),C=w[N].split(/\D/),h=v,H=0;H<b.length;H+=1)o=b[H].charCodeAt(0),h[o]||(h[o]={}),h=h[o];for(h._points=[],f=0;f<C.length;f+=1)h._points[f]=C[f]||0}return v};Ht.prototype.hyphenateText=function(d,A){A=A||4;for(var N=d.split(/([a-zA-Z0-9_\u0027\u00AD\u00DF-\u00EA\u00EB\u00EC-\u00EF\u00F1-\u00F6\u00F8-\u00FD\u0101\u0103\u0105\u0107\u0109\u010D\u010F\u0111\u0113\u0117\u0119\u011B\u011D\u011F\u0123\u0125\u012B\u012F\u0131\u0135\u0137\u013C\u013E\u0142\u0144\u0146\u0148\u0151\u0153\u0155\u0159\u015B\u015D\u015F\u0161\u0165\u016B\u016D\u016F\u0171\u0173\u017A\u017C\u017E\u017F\u0219\u021B\u02BC\u0390\u03AC-\u03CE\u03F2\u0401\u0410-\u044F\u0451\u0454\u0456\u0457\u045E\u0491\u0531-\u0556\u0561-\u0587\u0902\u0903\u0905-\u090B\u090E-\u0910\u0912\u0914-\u0928\u092A-\u0939\u093E-\u0943\u0946-\u0948\u094A-\u094D\u0982\u0983\u0985-\u098B\u098F\u0990\u0994-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BE-\u09C3\u09C7\u09C8\u09CB-\u09CD\u09D7\u0A02\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A14-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A82\u0A83\u0A85-\u0A8B\u0A8F\u0A90\u0A94-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABE-\u0AC3\u0AC7\u0AC8\u0ACB-\u0ACD\u0B02\u0B03\u0B05-\u0B0B\u0B0F\u0B10\u0B14-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3E-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B57\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C02\u0C03\u0C05-\u0C0B\u0C0E-\u0C10\u0C12\u0C14-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C43\u0C46-\u0C48\u0C4A-\u0C4D\u0C82\u0C83\u0C85-\u0C8B\u0C8E-\u0C90\u0C92\u0C94-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBE-\u0CC3\u0CC6-\u0CC8\u0CCA-\u0CCD\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D7A-\u0D7F\u1F00-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB2-\u1FB4\u1FB6\u1FB7\u1FBD\u1FBF\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD2\u1FD3\u1FD6\u1FD7\u1FE2-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u200D\u2019]+)/gi),H=0;H<N.length;H+=1)N[H].indexOf("/")!==-1?H!==0&&H!==N.length-1&&!/\s+\/|\/\s+/.test(N[H])&&(N[H]+="тАЛ"):N[H].length>A&&(N[H]=this.hyphenate(N[H]).join("┬н"));return N.join("")};Ht.prototype.hyphenate=function(d){var A,N=[],H,f,b,C,o,h=[],v,w=d.toLowerCase(),M,F,q=Math.max,B=this.trie,L=[""];if(this.exceptions.hasOwnProperty(w))return d.match(this.exceptions[w]).slice(1);if(d.indexOf("┬н")!==-1)return[d];for(d="_"+d+"_",A=d.toLowerCase().split(""),H=d.split(""),v=A.length,f=0;f<v;f+=1)h[f]=0,N[f]=A[f].charCodeAt(0);for(f=0;f<v;f+=1)for(o=B,b=f;b<v&&(o=o[N[b]],o);b+=1)if(M=o._points,M)for(C=0,F=M.length;C<F;C+=1)h[f+C]=q(h[f+C],M[C]);for(f=1;f<v-1;f+=1)f>this.leftMin&&f<v-this.rightMin&&h[f]%2?L.push(H[f]):L[L.length-1]+=H[f];return L};var an=Ht,M1=an;var I1={id:"sa",leftmin:2,rightmin:2,patterns:{2:"a1e1i1o1u1├й1├н1├п1├│1├║1├╝1─Б1─л1┼л1с╕╖1с╕╣1с╣Ы1с╣Э1",3:"2b_2c_2d_2g_2h_2j_2k_2l_2m_2n_2p_2r_2s_2t_2v_2y_2├▒_2┼Ы_2с╕Н_2с╕е12с╕л12с╕╖_2с╣Б12с╣Г12с╣Е_2с╣З_2с╣н_2с║Ц1l╠е1r╠е1",4:"2bh_2ch_2dh_2gh_2jh_2kh_2m╠Р12ph_2rb_2rd_2rg_2rk_2rp_2rt_2rс╕Н_2rс╣н_2th_2с╕Нh_2с╣нh_a2i1a2u1a3├п1a3├╝1l╠е╠Д1r╠е╠Д1"}};window.comboView=function(){let d={teins:"http://www.tei-c.org/ns/1.0",scripts:["iast","devanagari","telugu","grantha","malayalam"],filename:null,xml:null,treelist:new Map,trees:[],textboxes:[],matrix:null,viewdiv:null,descs:null,maxlemma:null,windows:[window],dragged:null,undo:[],redo:[],editing:!1},A=new M1(I1),N=new L1(d),H=new B1(d),f=H.find,b=H.check,C=H.make,o=new T1(H,N),h=function(){let s=document.getElementById("tooltip");s&&s.remove()},v=function(){let s=document.getElementById("left_menu");s.innerHTML=`<div id="matrixmenu" class="menubox">
    <div class="heading">Matrix</div>
      <ul>
        <li>select CSV/XML file(s): <input type="file" id="file" name="file" accept=".xml,.csv" multiple/></li>
      </ul>
</div>
<div style="display: none" id="mssmenu" class="menubox">
    <div class="heading">Texts</div>
    <ul class="ms">
    </ul>
</div>
<div style="display: none" id="treemenu" class="menubox">
    <div class="heading">Trees</div>
        <ul class="tree">
            <li>select NeXML file: <input type="file" id="treefile" name="treefile" accept=".xml"/></li>
        </ul>
    </div>
`;let l=document.getElementById("menu");l.addEventListener("mouseover",se.menuMouseover),l.addEventListener("mouseout",se.menuMouseout),l.addEventListener("click",se.menuClick),l.querySelector("#file").addEventListener("change",W.bind(null,Z),!1),l.querySelector("#treefile").addEventListener("change",W.bind(null,$),!1)},w={matrix:function(){return d.matrix=new ee,d.matrix.init(),d.matrix.show(),document.getElementById("matrixmenu").style.display="none",M(),L.rehighlight(),d.matrix},text:function(s){let l=new Ce(s);return d.textboxes.push(l),l.init(),l.show(),M(),L.rehighlight(),document.querySelector(".highlit")||se.textClick({target:l.boxdiv.querySelector(".lemma:not(.invisible)")}),l},tree:function(s,l){let p=new xe(s,l);return d.trees.push(p),p.init(),p.show(),M(),L.rehighlight(),p}},M=function(){for(let s of d.trees)s.draw()},F=function(){let s=window.getSelection?window.getSelection():document.selection;s&&(s.removeAllRanges?s.removeAllRanges():s.empty&&s.empty())},q=function(s){let l=document.createTreeWalker(s,NodeFilter.SHOW_TEXT);for(;l.nextNode();){let p=B(l.currentNode.nodeValue);l.currentNode.nodeValue=p}},B=function(s){return A.hyphenateText(s.replace(/ \|/g,"┬а|").replace(/\| (?=\d)/g,"|┬а").replace(/\|\|/g,"рее").replace(/\|/g,"ред"))},L={getAllWindows:function(){return window.mainWindow?window.mainWindow.comboView.getWindows():d.windows},forEachWindow:function(s){let l=L.getAllWindows();for(let p of l)if(!p.closed&&s(p)===!1)break},highlightLemma:function(s,l){var p=!!l;L.forEachWindow(r=>{let n=r.comboView.getViewdiv().querySelectorAll('[data-n="'+s+'"]');for(let u of n)(!p||!u.classList.contains("invisible"))&&u.classList.add("highlit");let i=r.comboView.getViewdiv().querySelectorAll('[data-n-trans="'+s+'"]');for(let u of i)u.classList.add("translit")})},highlightRange:function(s){if(!s||s.size===0)return;L.unHighlightAll();let[l,p]=f.lowhigh(s);if(p!==void 0)for(let r=l;r<=p;r++)L.highlightLemma(r,!0);else L.highlightLemma(l);L.repopulateTrees(l,p);for(let r of d.viewdiv.querySelectorAll(".text-box"))r.querySelector(".highlit")||r.querySelector('[data-n="'+l+'"]').classList.add("highlit");ge.xScroll(l)},highlightAll:function(){b.anyhighlit()?L.unHighlightAll():L.highlightRange(new Set([0,f.maxlemma()]))},unHighlightAll:function(){L.forEachWindow(s=>{let l=s.comboView.getViewdiv().querySelectorAll(".highlit");for(let r of l)r.classList.remove("highlit");let p=s.comboView.getViewdiv().querySelectorAll(".translit");for(let r of p)r.classList.remove("translit");L.unCelllightAll()})},unCelllightAll:function(){L.forEachWindow(s=>{let l=s.comboView.getViewdiv().querySelectorAll(".highlitcell");for(let p of l)p.classList.remove("highlitcell")})},rehighlight:function(){var s;if(L.forEachWindow(p=>{if(s=p.document.querySelectorAll(".highlit"),s.length>0)return!1}),s.length>0){var l=new Set;for(let p of s)l.add(p.dataset.n);L.highlightRange(l)}},clearTrees:function(){L.forEachWindow(s=>{let l=s.comboView.getTrees();for(let p of l)p.clearlemmata()})},repopulateTrees:function(s,l){L.forEachWindow(p=>{let r=p.comboView.getTrees();for(let n of r)n.populate(s,l),n.colourizeVariants(s,l),n.updatescript()})},highlightTreeLemma:function(s){L.forEachWindow(l=>{let p=l.comboView.getTrees();for(let r of p){let n=r.boxdiv.querySelector('.tree-lemma[data-id="'+s+'"]'),i=r.boxdiv.querySelectorAll(".tree-lemma");for(let u of i)(n.dataset.nodes&&u.dataset.nodes===n.dataset.nodes||!n.dataset.nodes&&u.dataset.id===n.dataset.id)&&u.classList.add("highlit");r.clearLabels()}})},unhighlightTrees:function(){L.forEachWindow(s=>{let l=s.comboView.getViewdiv().querySelectorAll(".tree-lemma.highlit");for(let r of l)r.classList.remove("highlit");let p=s.comboView.getTrees();for(let r of p)r.clearLabels()})}},W=function(s,l){let p=l.target.files[0],r=[...l.target.files].slice(1),n=new FileReader;n.onload=s.bind(null,p,r),n.readAsText(p)},Z=function(s,l,p){d.filename=s.name,document.title=document.title+`: ${d.filename}`,d.filename.split(".").pop()==="csv"?te(s,l,p):oe(s,l,p)},$=function(s,l,p){let r=p.target.result,i=new DOMParser().parseFromString(r,"text/xml"),u=d.xml.querySelector("teiHeader > xenoData")||function(){let x=d.xml.querySelector("teiHeader")||function(){let I=d.xml.createElementNS(d.teins,"teiHeader");return d.xml.documentElement.appendChild(I),I}(),S=d.xml.createElementNS(d.teins,"xenoData");return x.appendChild(S),S}(),m=d.xml.createElementNS(d.teins,"stemma");m.setAttribute("format","nexml"),m.id="stemma"+[...u.querySelectorAll("stemma")].length,m.appendChild(i.firstChild.cloneNode(!0)),u.appendChild(m),j(i,m.id)},j=function(s,l,p=!0){let r=s.querySelectorAll("tree"),n=document.querySelector("#treemenu ul");for(let i of r){let u=i.id,m=s.cloneNode(!0);for(let I of m.querySelectorAll("tree"))I.id!==u&&I.parentNode.removeChild(I);let x=i.getAttribute("label")||"New Tree "+d.treelist.size;d.treelist.set(`#${l} #${u}`,m);let S=document.createElement("li");S.dataset.name=x,S.dataset.treeid=u,S.dataset.stemmaid=l,S.appendChild(document.createTextNode(x)),n.insertBefore(S,n.lastElementChild),p&&w.tree(l,u)}},te=function(s,l,p){let r=Qt.parse(p.target.result,{delimiter:","});d.xml=document.implementation.createDocument(d.teins,"",null);let n=d.xml.createElementNS(d.teins,"teiCorpus"),i=d.xml.createElementNS(d.teins,"teiHeader");n.appendChild(i),d.xml.appendChild(n);for(let u of r){let m=u[0],x=u.slice(1),S=d.xml.createElementNS(d.teins,"TEI");S.setAttribute("n",m);let I=d.xml.createElementNS(d.teins,"text");for(let T=0;T<x.length;T++){let V=x[T],U=d.xml.createElementNS(d.teins,"w");V&&U.appendChild(document.createTextNode(V)),U.setAttribute("n",T),I.appendChild(U)}S.appendChild(I),n.appendChild(S)}d.xml.normalize(),d.maxlemma=f.maxlemma(),he()},oe=function(s,l,p){let r=new DOMParser;d.xml=r.parseFromString(p.target.result,"text/xml");let n=d.xml.querySelectorAll("teiHeader xenoData stemma nexml");for(let i of n){let u=document.implementation.createDocument("http://www.nexml.org/2009","",null);u.appendChild(i.cloneNode(!0)),j(u,i.closest("stemma").id,!1)}d.maxlemma=f.maxlemma(),l.length>0?me(l):he()},me=function(s){let l=s[0],p=s.slice(1),r=function(u,m){let x=new Set(u);for(let S of m)x.delete(S);return x},n=function(u,m){let S=new DOMParser().parseFromString(m.target.result,"text/xml"),I=new Map;for(let Se of f.teis()){let Ae=Se.getAttribute("n");I.set(Ae,Se)}let T=new Set(I.keys()),V=new Map;for(let Se of S.querySelectorAll("TEI")){let Ae=Se.getAttribute("n");V.set(Ae,Se)}let U=new Set(V.keys()),ne=r(T,U),fe=r(U,T);for(let Se of fe)C.tei(Se);let ve=[...S.querySelector("text").querySelectorAll("w[n]")].length,ye=d.maxlemma+ve;for(let[Se,Ae]of V)if(I.has(Se)){let ke=I.get(Se).querySelector("text"),Ne=Ae.querySelector("text").querySelectorAll("w[n]");var _e=d.maxlemma+1;for(let Ie of Ne)Ie.setAttribute("n",_e),ke.appendChild(Ie),_e=_e+1}else{let ke=d.xml.createElementNS(d.teins,"TEI");ke.setAttribute("n",Se);let Me=d.xml.createElementNS(d.teins,"text");C.emptywords(Me,ye,0),ke.appendChild(Me),d.xml.documentElement.appendChild(ke)}for(let Se of ne){let Ae=I.get(Se).querySelector("text");C.emptywords(Ae,ye,d.maxlemma+1)}d.maxlemma=f.maxlemma(),u.length>0?me(u):he()},i=new FileReader;i.onload=n.bind(null,p),i.readAsText(l)},G=function(){var s="";let l=[...f.teis()].map(p=>p.getAttribute("n"));for(let p of l)s+=`<li data-name="${p}">${p}</li>`;document.getElementById("menu").querySelector(".ms").innerHTML=s},he=function(){G();let s=new we("Export");s.populate([{text:"TEI corpus",func:o.showOptions.bind(null,o.xml,o.options)},{text:"TEI apparatus",func:o.showOptions.bind(null,o.xml,o.appOptions)},{text:"CSV",func:o.showOptions.bind(null,o.csv,o.options)},{text:"NEXUS",func:o.showOptions.bind(null,o.nexus,o.options)}]);let l=new we("Edit");l.populate([{text:"Undo",greyout:b.undo,func:z.undo},{text:"Redo",greyout:b.redo,func:z.redo},{text:"Select all",alt:"Deselect all",toggle:b.anyhighlit,func:L.highlightAll},{text:"(Re)normalize columns",greyout:b.anyhighlit,func:z.startRenormalize.bind(null,!1)},{text:"Delete column",greyout:b.anyhighlit,func:z.startRemoveCol.bind(null,!1)},{text:"Delete empty columns",func:z.startRemoveEmpty},{text:"Merge columns",greyout:b.manyhighlit,func:z.startMerge.bind(null,!1)},{text:"Group columns",alt:"Ungroup columns",greyout:b.oneGrouped,toggle:b.grouped,func:z.startGroup.bind(null,!1)},{text:"Group words",func:z.doGroupWords},{text:"Edit cell",greyout:b.highlitcell,func:z.startEditCell.bind(null,!1)},{text:"Insert row",func:z.startNewRow},{text:"Insert column",greyout:b.anyhighlit,func:z.startInsertCol},{text:"Mark insignificant",checkbox:b.checkbox.bind(null,"insignificant"),greyout:b.anyhighlit,func:z.startMarkAs.bind(null,"insignificant",!1)},{text:"Mark binary",checkbox:b.checkbox.bind(null,"binary"),greyout:b.anyhighlit,func:z.startMarkAs.bind(null,"binary",!1)}]);let p=new we("View");p.populate([{text:"Header",checkbox:b.headerView,func:ge.toggleHeader},{text:"Normalized",checkbox:b.normalizedView,greyout:b.anyNormalized,func:ge.toggleNormalize}]);let r=document.getElementById("left_menu");r.appendChild(p.box),r.appendChild(l.box),r.appendChild(s.box);let n=document.getElementById("views");n.style.justifyContent="flex-start",n.removeChild(n.querySelector("#splash")),w.matrix();let i=document.getElementById("matrixmenu");i.addEventListener("click",w.matrix),i.removeChild(i.querySelector("ul")),document.getElementById("mssmenu").style.display="block",document.getElementById("treemenu").style.display="block"},se={selectAll(s){let l=document.createRange();l.selectNodeContents(s);let p=window.getSelection();p.removeAllRanges(),p.addRange(l)},deselect(){let s=window.getSelection();s.removeAllRanges?s.removeAllRanges():s.empty&&s.empty()},treeMouseover(s){let l=s.target.classList.contains("tree-lemma")?s.target:s.target.closest(".tree-lemma");l&&(L.highlightTreeLemma(l.dataset.id),l.addEventListener("mouseout",L.unhighlightTrees));let p=s.target.dataset.reconstructed;if(!p)return;let r=document.createElement("div");r.id="tooltip",r.style.top=s.pageY+"px",r.style.left=s.pageX+"px",r.style.opacity=0,r.style.transition="opacity 0.2s ease-in",d.viewdiv.parentElement.appendChild(r);let n=document.createElement("div");if(n.appendChild(document.createTextNode(p)),this.script!==0?r.appendChild(Ot(n,d.scripts[this.script])):r.appendChild(n),s.target.classList.contains("reconstructed")){let i=s.target.parentNode.querySelector("span.tree-lemma");if(i&&i.dataset.hasOwnProperty("emended")){let u=document.createElement("div");u.classList.add("emphasis"),u.appendChild(document.createTextNode(i.textContent)),this.script!==0?r.prepend(Ot(u,d.scripts[this.script])):r.prepend(u)}}window.getComputedStyle(r).opacity,r.style.opacity=1,s.target.addEventListener("mouseout",h)},treeClick(s){s.target.classList.contains("witness")?w.text(s.target.dataset.key):s.target.classList.contains("reconstructed")?w.text(s.target.dataset.label):s.target.classList.contains("internal")&&z.startReconstruction(s),h()},keyDown(s){if(!d.editing&&s.key.substring(0,5)==="Arrow")se.cycleVariant(s);else if(s.ctrlKey||s.metaKey)s.key==="Z"?z.redo():s.key==="z"&&z.undo();else if(!d.editing&&d.matrix&&!d.matrix.closed&s.key==="Enter"){let l=f.highlitcell();l&&(s.preventDefault(),z.startEditCell(l))}},cycleVariant(s){let l=f.highlitcell()||d.viewdiv.querySelector("td.highlit")||d.viewdiv.querySelector('td[data-n="0"]');switch(s.key){case"ArrowRight":{if(!d.matrix.closed&&l){let p=l.nextElementSibling;p&&se.textClick({target:p})}else{let p=d.viewdiv.querySelector(".highlit"),r=p?p.dataset.n:0,n=parseInt(r)+1;for(;n<=d.maxlemma;){let i=d.viewdiv.querySelectorAll('[data-n="'+n+'"]');for(let u of i)if(u&&!u.classList.contains("invisible")){se.textClick({target:u});return}n++}}break}case"ArrowLeft":{if(!d.matrix.closed&&l){let p=l.previousElementSibling;p&&se.textClick({target:p})}else{let p=d.viewdiv.querySelector(".highlit"),r=p?p.dataset.n:0,n=parseInt(r)-1;for(;n>=0;){let i=d.viewdiv.querySelectorAll('[data-n="'+n+'"]');for(let u of i)if(u&&!u.classList.contains("invisible")){se.textClick({target:u});return}if(n--,l){se.textClick({target:l.previousElementSibling});return}}}break}case"ArrowUp":{if(d.matrix.closed||!l)return;let r=l.closest("tr").previousElementSibling;if(!r||!r.dataset.n)return;let n=r.querySelector(`td[data-n="${l.dataset.n}"]`);se.textClick({target:n});break}case"ArrowDown":{if(d.matrix.closed||!l)return;let r=l.closest("tr").nextElementSibling;if(!r||r.tagName!=="TR")return;let n=r.querySelector(`td[data-n="${l.dataset.n}"]`);se.textClick({target:n})}}},textClick(s,l=!1){if(s.target.closest("tr.header")){se.matrixHeaderClick(s);return}let p=s.target.classList.contains("lemma")?s.target:s.target.closest(".lemma");if(p){if(!l&&s.ctrlKey){se.rightClick(s);return}let r=p.dataset.n,n=f.highlitrow();if(L.unHighlightAll(),L.highlightLemma(r),L.repopulateTrees(r),ge.xScroll(r,n),p.tagName==="TD")p.classList.add("highlitcell");else{let i=p.closest(".text-box");if(i){let u=i.dataset.id;f.tr(u).querySelector(`td[data-n="${r}"]`).classList.add("highlitcell")}}}},textMouseup(){let s=f.selection();!s||(L.highlightRange(s),F())},menuMouseover(s){let l=s.target.classList.contains("menubox")?s.target:s.target.closest(".menubox");if(l){let p=l.querySelector("ul");p&&(p.style.display="block"),l.classList.add("open")}},menuMouseout(s){let l=s.target.classList.contains("menubox")?s.target:s.target.closest(".menubox");if(l){let p=l.querySelector("ul");p&&(p.style.display="none"),l.classList.remove("open")}},menuClick(s){!s.target.parentElement||(s.target.parentElement.className==="ms"&&(se.menuMouseout(s),w.text(s.target.dataset.name)),s.target.parentElement.className==="tree"&&(se.menuMouseout(s),s.target.closest("li[data-name]")&&w.tree(s.target.dataset.stemmaid,s.target.dataset.treeid)))},thDragStart(s){!s.target.closest('th[scope="row"]')||(s.dataTransfer.setData("text/plain",s.target.textContent),z.startMoveRow(s.target.parentNode,s))},trDragEnter(s){let l=s.target.nodeType===1?s.target.closest("tr"):s.target.parentElement.closest("tr");l&&l.classList.add("dragenter")},trDragLeave(s){let l=s.target.nodeType===1?s.target.closest("tr"):s.target.parentElement.closest("tr");l&&l.classList.remove("dragenter")},trDragDrop(s){s.preventDefault(),z.finishMoveRow(s)},matrixMousedown(s){if(s.button!==0)return;if(s.ctrlKey){se.rightClick(s);return}let l=s.target.nodeType===1?s.target.closest(".lemma"):s.target.parentElement.closest(".lemma");if(l){if(l.isContentEditable)return;L.unHighlightAll(),L.highlightLemma(l.dataset.n);let p=d.matrix.boxdiv.querySelector("table");p.addEventListener("mouseover",se.matrixMouseover),p.addEventListener("mouseup",se.matrixMouseup)}},matrixMouseup(s){let l=f.highlit();l.size===1?se.textClick(s):L.highlightRange(l);let p=d.matrix.boxdiv.querySelector("table");p.removeEventListener("mouseover",se.matrixMouseover),p.removeEventListener("mouseup",se.matrixMouseup)},matrixMouseover(s){let l=s.target.nodeType===1?s.target.closest(".lemma"):s.target.parentElement.closest(".lemma");l&&L.highlightLemma(l.dataset.n)},matrixHeaderClick(s){if(s.target.tagName!=="INPUT")return;let l=s.target.className;if(l!=="insignificant"&&l!=="binary")return;let p=s.target.closest("th").dataset.ref,r=f.firsttd(p).dataset[l]!=="true",n=new Map([[p,r]]);z.doMarkAs(l,n)},rightClick(s){let l=s.target.nodeType===1?s.target.closest("tr[data-n] th"):s.target.parentElement.closest("tr[data-n] th");if(l){s.preventDefault(),de.remove();let r=de.create(s),n=[{text:"move row",func:z.startMoveRow.bind(null,l.parentNode)},{text:"delete row",func:z.doDeleteRow.bind(null,l.parentNode.dataset.n)}];de.populate(r,n),de.show(r);return}let p=s.target.nodeType===1?s.target.closest("td.lemma"):s.target.parentElement.closest("td.lemma");if(p){s.preventDefault();let r=p.classList.contains("highlit")?function(){let u=f.highlit();return u.size===1&&!p.classList.contains("highlitcell")&&(L.unCelllightAll(),p.classList.add("highlitcell")),u}():(se.textClick(s,!0),new Set([p.dataset.n])),n=r.size>1?[{text:"merge columns",func:z.startMerge.bind(null,r)},{text:"ungroup columns",alt:"group columns",toggle:b.grouped,func:z.startGroup.bind(null,!1)},{text:"delete columns",func:z.startRemoveCol.bind(null,r)}]:[{text:"edit cell",func:z.startEditCell.bind(null,p)},{text:"delete column",func:z.startRemoveCol.bind(null,r)},{text:"insert column",func:z.startInsertCol}];de.remove();let i=de.create(s);de.populate(i,n),de.show(i)}}},z={undo:function(){let s=d.undo.pop();s&&s[0](...s[1])},redo:function(){let s=d.redo.pop();s&&s[0](...s[1])},doStack:function(s,l="do"){l==="undo"?(s[1].push("redo"),d.redo.push(s)):l==="redo"?(s[1].push("undo"),d.undo.push(s)):(s[1].push("undo"),d.undo.push(s),d.redo=[])},doMulti:function(s,l){let p=[];for(let r of s){let n=r[0](...r[1],"multido");p.unshift(n)}z.doStack([z.doMulti,[p]],l)},startMoveRow:function(s,l){if(d.dragged=s,d.dragged.classList.add("dragging"),l.type!=="dragstart"){for(let p of f.trs())p.classList.add("moveinprogress");d.matrix.boxdiv.querySelector("table").addEventListener("mousedown",z.finishMoveRow)}},startMerge:function(s){let l=s===!1?f.highlit():s,p=f.clauses(l,!0);if(!p)z.doMerge(l,"do");else if(p[0]===null){let r=p.filter(n=>n!==null).map(n=>[z.doUngroup,[n]]).concat([[z.doMerge,[l]]]);z.doMulti(r,"do")}else{let r=f.clausesToRemove(p,l);if(!r)z.doMerge(l,"do");else{let n=r.map(i=>[z.doUngroup,[i]]).concat([[z.doMerge,[l]]]);z.doMulti(n,"do")}}},startGroup:function(s){let l=s===!1?f.highlit():s;b.grouped()?z.startUngroup(l):z.doGroup(l,"do")},startUngroup:function(s){let p=[...f.clauses(s)].map(r=>[z.doUngroup,[r]]);z.doMulti(p,"do")},startInsertCol:function(){let s=Math.max([...f.highlit()])||d.maxlemma;z.doInsertCol(s)},startRemoveCol:function(s){let l=s===!1?f.highlit():s,p=f.clauses(l);if(!p)z.doRemoveCol(l,"do");else{let r=f.clausesToRemove(p,l,1);if(!r)z.doRemoveCol(l,"do");else{let n=r.map(i=>[z.doUngroup,[i]]).concat([[z.doRemoveCol,[l]]]);z.doMulti(n,"do")}}},startRemoveEmpty:function(){let s=f.empty(),l=f.clauses(s);if(!l)z.doRemoveCol(s,"do");else{let p=f.clausesToRemove(l,s,1);if(!p)z.doRemoveCol(s,"do");else{let r=p.map(n=>[z.doUngroup,[n]]).concat([[z.doRemoveCol,[s]]]);z.doMulti(r,"do")}}},startEditCell:function(s){let l=s||f.highlitcell();!l||(z.unnormalize(l),l.dataset.oldContent=l.textContent,l.contentEditable="true",l.focus(),d.editing=!0,se.selectAll(l),l.addEventListener("blur",z.finishEditCell),l.addEventListener("keydown",z.cellKeyDown))},cellKeyDown:function(s){switch(s.key){case"Enter":z.finishEditCell(s);break;case"Escape":z.finishEditCell(s,!0);break;case"ArrowRight":{let l=f.cursorPos(s.target);l[0]===l[1]&&(s.preventDefault(),z.finishEditCell(s),se.cycleVariant({key:"ArrowRight"}),z.startEditCell(f.highlitcell()));break}case"ArrowLeft":{f.cursorPos(s.target)[0]===0&&(s.preventDefault(),z.finishEditCell(s),se.cycleVariant({key:"ArrowLeft"}),z.startEditCell(f.highlitcell()));break}}},startMarkAs:function(s,l,p){let r=p.target.tagName==="INPUT"?p.target:p.target.querySelector("input"),n=l===!1?f.highlit():l,i=new Map([...n].map(u=>[u,!r.checked]));z.doMarkAs(s,i)},startNewRow:function(){let s=C.row("new row"),l=s.querySelector("th");l.contentEditable=!0,l.addEventListener("blur",z.finishNewRow),l.addEventListener("keydown",z.thKeyDown),d.matrix.boxdiv.querySelector("tbody").appendChild(s),l.scrollIntoView(),l.focus(),document.execCommand("selectAll",!1,null),d.editing=!0},startRenameRow:function(){},startReconstruction:function(s){let l=s.target.dataset.key,p=s.target.closest(".tree-box").myTree,r=p.desc,n=document.createRange().createContextualFragment(`<div id="reconstructionoptions" class="popup">
    <form id="reconstructionform">
      <div>
        <label for="reconstructed_node_name">Label for node:</label>
        <input type="text" id="reconstructed_node_name" name="reconstructed_node_name" placeholder="${r}-${l}" size="15">
      </div>
      <div style="width: 100%; display: flex; justify-content: center;padding-top: 1em;">
        <button type="submit">Add to matrix</button>
      </div>
    </form>
</div>`),i=function(u){u.preventDefault();let m=blackout.querySelector("input"),x=m.value?m.value:m.placeholder;z.doReconstruction(p,l,x)};C.blackout(n,i)},thKeyDown:function(s){s.key==="Enter"&&z.finishNewRow(s)},finishNewRow:function(s){let l=s.target,p=l.textContent;l.closest("tr").dataset.n=p;let r=C.tei(p);d.xml.documentElement.appendChild(r),d.editing=!1,l.contentEditable=!1,l.removeEventListener("blur",z.finishNewRow),l.removeEventListener("keydown",z.thKeyDown),z.doStack([z.doDeleteRow,[p]],"do")},finishEditCell:function(s,l=!1){let p=s.target;d.editing=!1,p.contentEditable="false",p.removeEventListener("blur",z.finishEditCell),p.removeEventListener("keydown",z.cellKeyDown),p.blur(),se.deselect();let r=p.textContent;if(r===""){let m=p.querySelector("br");m&&m.remove()}if(l||r===p.dataset.oldContent)return;p.hasOwnProperty("IAST")||(p.IAST=p.cloneNode(!0)),p.IAST.textContent=r;let n=parseInt(p.dataset.n),i=p.closest("tr"),u=i.dataset.n;if(z.xmlChangeCell(n,u,r),i.dataset.hasOwnProperty("treename")&&!p.dataset.hasOwnProperty("emended")){let m=z.doEmend(n,u,"multido"),x=[];x.push([z.doChangeCell,[n,u,p.dataset.oldContent]]),x.push(m),z.doStack([z.doMulti,[x]],"do")}else z.doStack([z.doChangeCell,[n,u,p.dataset.oldContent]],"do");delete p.dataset.oldContent,z.refresh(),ge.updateAllHeaders(!0),p.classList.add("highlitcell")},finishMoveRow:function(s){let l=s.target.nodeType===1?s.target.closest("tr"):s.target.parentElement.closest("tr");if(l&&z.doMoveRow(d.dragged,l,"do"),s.type!=="drop"){for(let p of f.trs())p.classList.remove("moveinprogress");d.matrix.boxdiv.querySelector("table").removeEventListener("mousedown",z.finishMoveRow)}else for(let p of f.trs())p.classList.remove("dragenter");d.dragged.classList.remove("dragging"),d.dragged=null},doReconstruction:function(s,l,p){let r=C.row(p,"pending");r.dataset.treename=s.name,r.dataset.nodename=l;let n=r.querySelector("th"),i=document.createElement("div");i.id="spinner",n.prepend(i);let u=C.tei(p);u.setAttribute("type","reconstructed"),u.setAttribute("corresp",s.name),u.setAttribute("select",`#${l}`);let m=[...f.tds(!1,r)],x=[...f.words(!1,u)];d.matrix.boxdiv.querySelector("tbody").appendChild(r),n.scrollIntoView();let S=new Worker("./worker.js"),I=b.normalizedView(),T=f.serializedtexts(s.nexml,I),V=new Map(T.map(U=>[U[0],U[1][0]]));S.postMessage({readings:V,levels:s.levels,num:0,id:l}),S.onmessage=function(U){let ne=U.data.n,fe=U.data.result;if(m[ne].textContent=fe,m[ne].IAST=m[ne].cloneNode(!0),m[ne].classList.remove("pending"),x[ne].textContent=fe,ne<d.maxlemma){let ve=new Map(T.map(ye=>[ye[0],ye[1][ne+1]]));S.postMessage({readings:ve,levels:s.levels,num:ne+1,id:l})}else{n.removeChild(i),d.xml.documentElement.appendChild(u),ge.updateAllHeaders(),s.draw();let ve=f.highlit();ve.size>0&&L.repopulateTrees(...f.lowhigh(ve));let ye=document.getElementById("menu").querySelector(".ms"),_e=document.createElement("li");_e.setAttribute("data-name",p),_e.appendChild(document.createTextNode(p)),ye.appendChild(_e),z.doStack([z.doDeleteRow,[p]],"do")}}},doDeleteRow:function(s,l="do"){let p=f.tr(s),r=f.tei(s),i=[...f.teis()].indexOf(r);p.parentNode.removeChild(p),r.parentNode.removeChild(r),ge.updateAllHeaders(),G(),M(),z.doStack([z.doUndeleteRow,[p,r,i]],l)},doUndeleteRow:function(s,l,p,r="do"){let n=l.getAttribute("n"),i=[...f.teis()];if(p===i.length)d.xml.documentElement.appendChild(l),d.matrix.boxdiv.querySelector("tbody").appendChild(s);else{let u=[...f.trs()];d.xml.documentElement.insertBefore(l,i[p]),u[p].parentNode.insertBefore(s,u[p])}ge.updateAllHeaders(),G(),M(),z.doStack([z.doDeleteRow,[n]],r)},doMoveRow:function(s,l,p="do"){let r=s.parentNode,n=[...f.trs()],i=s.previousElementSibling,u=n.indexOf(s),m=l!==null?n.indexOf(l):null,x=function(){l===null?r.insertBefore(s,r.firstChild):l.nextElementSibling?r.insertBefore(s,l.nextElementSibling):r.appendChild(s)},S=function(){let I=d.xml.documentElement,T=[...f.teis()],V=T[u];if(m===null)I.insertBefore(V,T[0]);else{let U=T[m];U.nextElementSibling?I.insertBefore(V,U.nextElementSibling):I.appendChild(V)}};if(x(),S(),p==="multido")return[z.doMoveRow,[s,i]];z.doStack([z.doMoveRow,[s,i]],p)},doMerge:function(s,l="do"){let p=function(u,m,x){let S=u();var I=[];for(let T of S){let V=[...x].map(fe=>m(fe,T)),U=V.map(fe=>fe.cloneNode(!0));I.push(U);for(let fe of V)z.unnormalize(fe);let ne=V.reduce(function(fe,ve){if(ve.hasChildNodes())for(;ve.firstChild;)fe.appendChild(ve.firstChild);return ve.parentNode.removeChild(ve),fe});ne.normalize(),ne.dataset?(delete ne.dataset.normal,ne.IAST=ne.cloneNode(!0)):ne.removeAttribute("lemma")}return[u,m,I]},r=p(f.trs,f.firsttd,s),n=p(f.texts,f.firstword,s),i=parseInt([...s][0]);if(z.renumber(i),z.restyleGroups(s),z.refresh(),ge.updateAllHeaders(),l==="multido")return[z.doUnmerge,[r,n]];z.doStack([z.doUnmerge,[r,n]],l)},doUnmerge:function(s,l,p="undo"){let r=function(m,x,S){let I=f.whichattr(S[0][0]),T=S[0].map(fe=>fe.getAttribute(I)),V=T[0],U=m();for(var ne=0;ne<U.length;ne++){let fe=S[ne].pop(),ve=x(V,U[ne]);ve.parentNode.replaceChild(fe,ve);for(let ye of S[ne])fe.parentNode.insertBefore(ye,fe)}return T};r(...s);let n=r(...l),u=[...n].sort((m,x)=>parseInt(m)-parseInt(x))[0];if(z.renumber(u),z.reIAST(n),z.refresh(),z.restyleGroups(n),ge.updateAllHeaders(),p==="multido")return[z.doMerge,[n]];z.doStack([z.doMerge,[n]],p)},doGroup:function(s,l="do"){let p=[...s],r=p.shift(),n=f.texts();for(let u of n){let m=document.createElementNS("http://www.tei-c.org/ns/1.0","cl"),x=f.firstword(r,u);x.parentNode.insertBefore(m,x),m.appendChild(x);for(let S of s)m.appendChild(f.firstword(S,u))}let i=p.pop();for(let u of f.tds(r))u.classList.add("group-start");for(let u of f.tds(i))u.classList.add("group-end");for(let u of p)for(let m of f.tds(u))m.classList.add("group-internal");for(let u of d.textboxes)u.refresh();if(l==="multido")return[z.doUngroup,[s]];z.doStack([z.doUngroup,[s]],l)},doUngroup:function(s,l="do"){let p=f.texts();for(let n of p){let i;for(let u of s){let m=f.firstword(u,n);i||(i=m.closest("cl")),i.parentNode.insertBefore(m,i)}i.parentNode.removeChild(i)}let r=[...s].map(n=>[...f.tds(n)]).reduce((n,i)=>n.concat(i),[]);for(let n of r)n.classList.remove("group-start","group-internal","group-end");for(let n of d.textboxes)n.refresh();if(l==="multido")return[z.doGroup,[s]];z.doStack([z.doGroup,[s]],l)},doGroupWords:function(){let s=0,l=[];for(let p=0;p<=d.maxlemma;p++){let r=f.tds(p),n=r[0].classList;if(n.contains("group-start")||n.contains("group-internal")||n.contains("group-end")){s=p+1;continue}let i=r.length,u=0;if(p===d.maxlemma)u=i;else for(let m of r)(m.IAST?m.IAST.textContent:m.textContent).slice(-1)===" "&&u++;if(u/i>=.5)if(s===p){s++;continue}else{let m=f.range(s,p);l.push([z.doGroup,[m]]),s=p+1}}z.doMulti(l)},doRemoveCol:function(s,l="do"){let p=function(m,x,S){let I=m();var T=[];for(let V of I){let U=[...S].map(fe=>{let ve=x(fe,V);return z.unnormalize(ve),ve}),ne=U.map(fe=>fe.cloneNode(!0));T.push(ne);for(let fe of U)fe.parentNode.removeChild(fe)}return[m,x,T]},r=p(f.trs,f.firsttd,s),n=p(f.texts,f.firstword,s),i=[...s].sort((m,x)=>parseInt(m)-parseInt(x)),u=parseInt([...i][0])-1;if(z.renumber(u),z.refresh(),z.restyleGroups(s,!0),ge.updateAllHeaders(),l==="multido")return[z.doUnremoveCol,[r,n]];z.doStack([z.doUnremoveCol,[r,n]],l)},doUnremoveCol:function(s,l,p){let r=function(x,S,I){let T=f.whichattr(I[0][0]),V=I[0].map(ve=>ve.getAttribute(T)),U=V[0],ne=x();for(var fe=0;fe<ne.length;fe++){let ve=S(U,ne[fe]);for(let ye of I[fe])ve.parentNode.insertBefore(ye,ve)}return V};r(...s);let n=r(...l),i=[...n].sort((x,S)=>parseInt(x)-parseInt(S)),u=parseInt(i[0])-1;z.renumber(u);let m=document.querySelectorAll(".highlitcell");for(let x of m)x.classList.remove("highlitcell");if(z.reIAST(n),z.refresh(),z.restyleGroups(n,!0),ge.updateAllHeaders(),p==="multido")return[z.doRemoveCol,[n]];z.doStack([z.doRemoveCol,[n]],p)},doInsertCol:function(s,l="do"){let p=function(n,i,u,m){let x=n();for(let S of x){let I=i(m,S),T=u(m+1);I.insertAdjacentElement("afterend",T)}};p(f.trs,f.firsttd,C.emptycell,s),p(f.texts,f.firstword,C.emptyword,s),z.renumber(s),z.refresh(),z.restyleGroups([s,s+1],!0),ge.updateAllHeaders();let r=[s+1];if(l==="multido")return[z.doRemoveCol,[r]];z.doStack([z.doRemoveCol,[r]],l)},doEmend:function(s,l,p="do"){let r=[...f.trs()][l],n=f.firsttd(s,r);n.dataset.emended=!0;let i=f.tei(l).querySelector("text");if(f.firstword(s,i).setAttribute("emended","true"),p==="multido")return[z.doUnemend,[s,l]];z.doStack([z.doUnemend,[s,l]],p)},doUnemend:function(s,l,p="do"){let r=[...f.trs()][l],n=f.firsttd(s,r);delete n.dataset.emended;let i=f.tei(l).querySelector("text");if(f.firstword(s,i).removeAttribute("emended"),p==="multido")return[z.doEmend,[s,l]];z.doStack([z.doEmend,[s,l]],p)},doChangeCell:function(s,l,p,r="do"){let n=z.xmlChangeCell(s,l,p),i=z.htmlChangeCell(s,l,p);if(z.refresh(),ge.updateAllHeaders(!0),se.textClick({target:i}),r==="multido")return[z.doChangeCell,[s,l,n]];z.doStack([z.doChangeCell,[s,l,n]],r)},htmlChangeCell:function(s,l,p){let r=f.tr(l),n=f.firsttd(s,r);return z.unnormalize(n),n.textContent=p,n.IAST&&(n.IAST=n.cloneNode(!0)),n},xmlChangeCell:function(s,l,p){let r=f.tei(l).querySelector("text"),n=f.firstword(s,r);z.unnormalize(n);let i=n.textContent;return n.childNodes.length===0?n.appendChild(document.createTextNode(p)):n.textContent=p,i},doMarkAs:function(s,l,p="do"){let r=[...l.keys()],n=f.attr(s,r);for(let i of r){let u=f.tds(i),m=f.words(i);if(l.get(i)===!0){for(let S of u)S.dataset[s]="true";for(let S of m)S.setAttribute(s,"true")}else{for(let S of u)delete S.dataset[s];for(let S of m)S.removeAttribute(s)}let x=f.checkbox(i,s);x.checked=l.get(i)}if(p==="multido")return[z.doMarkAs,[s,n]];z.doStack([z.doMarkAs,[s,n]],p)},refresh:function(){for(let s of d.textboxes)s.refresh();L.rehighlight(),b.anyhighlit()?L.repopulateTrees(...f.lowhigh(f.highlit())):L.clearTrees()},renumber:function(s=0){let l=function(p,r,n){let i=p();for(let m of i){let x=[...r(!1,m)],S=f.whichattr(x[0]);for(var u=parseInt(n)+1;u<x.length;u++)x[u].setAttribute(S,u)}};l(f.trs,f.tds,s),l(()=>[!0],f.ths,s),l(f.texts,f.words,s),d.maxlemma=f.maxlemma()},reIAST:function(s){let l=[...s].map(p=>[...f.lemmata(p)]).flat();for(let p of l)p.IAST=p.cloneNode(!0)},restyleGroups:function(s,l=!1){let r=l?function(i){var u=[...i];let m=parseInt(s[0])-1,x=parseInt(s[s.length-1])+1;return u.unshift(m),u.push(x),u}(s):s,n=function(i,u=!1){let m=new Set(["group-start","group-internal","group-end"]);u&&m.delete(u);for(let x of i){for(let S of m)x.classList.remove(S);u&&x.classList.add(u)}};for(let i of r){let u=f.firstword(i),m=f.tds(i);if(m.length===0)continue;let x=u.closest("cl");x?u===x.firstElementChild?n(m,"group-start"):u===x.lastElementChild?n(m,"group-end"):n(m,"group-internal"):n(m)}},startRenormalize:function(s){let l=s===!1?f.highlit():s;z.doRenormalize(Math.min(...l),Math.max(...l))},doRenormalize:function(s,l,p=!1,r="do"){let n=b.normalizedView(),i=new Map,u=[...f.trs()],m=[...f.texts()],x=p?[p]:[...u.keys()];for(let S of x){let I=new Map,T=m[S],V=[...f.words(!1,T)],U=f.firstword(s,T),ne=f.firstword(l,T),fe=V.indexOf(U),ve=V.indexOf(ne),ye=V.slice(fe,ve+1),_e=u[S],Ae=[...f.tds(!1,_e)].slice(fe,ve+1),ke=ye.map(Ne=>Ne.textContent),Me=w1(ke);for(let Ne=0;Ne<Me.length;Ne++){let Ie=ye[Ne],Le=Me[Ne],Oe=ke[Ne],qe=Ae[Ne],je=Ie.hasAttribute("lemma")?Ie.getAttribute("lemma"):!1;if(je!==!1){if(je===Le)continue;I.set(qe.dataset.n,je),z.unnormalize(Ie),z.unnormalize(qe)}else I.set(qe.dataset.n,null);Le!==Oe&&(Ie.setAttribute("lemma",Le),qe.dataset.normal=Le,n&&(qe.textContent=Le))}i.set(S,I)}ge.updateAllHeaders(!0),ge.xScrollToHighlit(),z.doStack([z.doUnrenormalize,[i]],r)},doUnrenormalize:function(s,l="undo"){let p=b.normalizedView(),r=new Map,n=[...f.trs()],i=[...f.texts()];for(let[u,m]of s.entries()){let x=n[u],S=i[u],I=new Map;for(let[T,V]of m.entries()){let U=f.firsttd(T,x),ne=f.firstword(T,S),fe=ne.hasAttribute("lemma")?ne.getAttribute("lemma"):null;I.set(T,fe),V===null?(z.unnormalize(U),z.unnormalize(ne)):(U.dataset.normal=V,ne.setAttribute("lemma",V),p&&(U.textContent=V))}r.set(u,I)}z.doStack([z.doUnrenormalize,[r]],l)},unnormalize:function(s){s.hasOwnProperty("IAST")&&(s.textContent=s.IAST.textContent),s.dataset&&s.dataset.hasOwnProperty("normal")&&delete s.dataset.normal,s.getAttribute("lemma")&&s.removeAttribute("lemma")}},ge={toggleNormalize:function(){b.normalizedView()?ge.showUnnormalized():ge.showNormalized()},showNormalized:function(s){if(s)s.updatescript();else{document.getElementById("views").classList.add("normalized");for(let p of d.textboxes)p.updatescript();d.matrix.updatescript(),b.anyhighlit()?L.repopulateTrees(...f.lowhigh(f.highlit())):L.clearTrees()}ge.updateAllHeaders(!0),ge.xScrollToHighlit()},showUnnormalized:function(){document.getElementById("views").classList.remove("normalized"),d.matrix.updatescript();for(let s of d.textboxes)s.updatescript();b.anyhighlit()?L.repopulateTrees(...f.lowhigh(f.highlit())):L.clearTrees(),ge.updateAllHeaders(!0),ge.xScrollToHighlit()},toggleHeader:function(){let s=d.matrix.boxdiv.querySelector("tr.header");s.style.display==="none"?s.style.display="table-row":s.style.display="none"},updateHeaders(s){for(let l of s){let p=f.firstth(l),[r,n]=f.readings(l),i=p.querySelector("span.readings"),u=r<2?r:`${r}(${n.size})`;i.textContent=u}},updateAllHeaders(s=!1){let l=[...f.trs()],p=l.map(m=>f.trWalker(m)),r=[...f.tds(!1,l[0])],n=[...f.ths()],i=d.matrix.boxdiv.querySelector("tr.header"),u=function(){let m=document.createElement("th"),x=document.createElement("span");x.classList.add("readings"),m.appendChild(x);let S=document.createElement("form");return S.innerHTML='<div><input class="insignificant" type="checkbox">Insignificant</div><div><input class="binary" type="checkbox">Binary</div>',m.appendChild(S),i.appendChild(m),m};for(let m=0;m<r.length;m++){let x=m>=n.length?u():n[m],S=r[m];x.dataset.ref=S.dataset.n;let I=0,T=new Set;for(let U of p){let ne=U.nextNode().textContent;ne!==""&&(I++,T.add(ne))}let V=I<2?I:`${I}(${T.size})`;x.querySelector("span.readings").textContent=V,s||(x.querySelector("input.insignificant").checked=!!S.dataset.insignificant,x.querySelector("input.binary").checked=!!S.dataset.binary)}if(n.length>r.length)for(let m=r.length;m<n.length;m++)i.removeChild(n[m])},xScrollToHighlit:function(){let s=f.highlit();s.size>0&&ge.xScroll([...s][0])},xScroll:function(s,l){if(!s)return;let p=l||f.firsttr(),r=f.firsttd(s,p),n=r.getBoundingClientRect(),i=d.matrix.boxdiv,m=i.getBoundingClientRect().right,x=p.querySelector("th").getBoundingClientRect(),S=x.right,I=n.right>m,T=n.left+.1<S;I&&r.scrollIntoView({inline:"end",block:"nearest"}),T&&(r.scrollIntoView({inline:"start",block:"nearest"}),i.scroll({left:i.scrollLeft-x.width}))}},de={create:function(s){let l=document.createElement("div");return l.classList.add("contextmenu"),l.style.left=s.clientX-12+"px",l.style.top=s.clientY-22+"px",l},remove:function(){for(let s of document.querySelectorAll(".contextmenu"))s.parentNode.removeChild(s)},show:function(s){document.body.appendChild(s)},populate:function(s,l){let p=document.createElement("ul");for(let r of l){let n=document.createElement("li");if(r.hasOwnProperty("cond")){let i=document.createRange().createContextualFragment('<form><input type="checkbox"'+(r.cond()?" checked":"")+"></form>");n.appendChild(i)}if(r.hasOwnProperty("toggle")){let i=r.toggle()?r.text:r.alt;n.appendChild(document.createTextNode(i))}else n.appendChild(document.createTextNode(r.text));n.addEventListener("mouseup",r.func),p.appendChild(n)}s.appendChild(p)}};class we{constructor(l){this.name=l,this.box=document.createElement("div"),this.box.classList.add("menubox");let p=document.createElement("div");p.classList.add("heading"),p.appendChild(document.createTextNode(l)),this.box.appendChild(p),p.addEventListener("mouseover",this.checkConditions.bind(this)),this.box.addEventListener("mouseup",this.click.bind(this)),this.items=new Map,this.conditions=new Map}populate(l){let p=this.box.querySelector("ul")||function(r){let n=document.createElement("ul");return r.box.appendChild(n),n}(this);for(let r of l){let n=document.createElement("li");if(r.hasOwnProperty("checkbox")){let i=document.createElement("form"),u=document.createElement("input");u.type="checkbox",u.addEventListener("click",m=>m.preventDefault()),i.appendChild(u),n.appendChild(i),n.appendChild(document.createTextNode(r.text)),this.conditions.set(u,r.checkbox)}else if(r.hasOwnProperty("toggle")){let i=document.createElement("span");i.appendChild(document.createTextNode(r.text)),i.dataset.text=r.text,i.dataset.alt=r.alt,this.conditions.set(i,r.toggle),n.appendChild(i)}else n.appendChild(document.createTextNode(r.text));r.hasOwnProperty("greyout")&&this.conditions.set(n,r.greyout),this.items.set(n,r.func),p.appendChild(n)}}click(l){let p=l.target.tagName==="LI"?l.target:l.target.closest("li");if(p&&!p.classList.contains("greyedout")){let r=this.items.get(p);r&&(r(l),this.checkConditions())}}checkConditions(){let l=new Map;for(let[p,r]of this.conditions){let n=l.get(r)||function(){let i=r();return l.set(r,i),i}();p.tagName==="INPUT"?p.checked=n:p.tagName==="SPAN"?n?p.textContent=p.dataset.alt:p.textContent=p.dataset.text:p.tagName==="LI"&&(n?p.classList.remove("greyedout"):p.classList.add("greyedout"))}}}class X{constructor(l){this.name=l,this.script=0}show(){d.descs.appendChild(this.descbox),b.normalizedView()&&ge.showNormalized(this),d.viewdiv.appendChild(this.boxdiv),this.closed=!1}clear(){for(;this.boxdiv.firstChild;)this.boxdiv.removeChild(this.boxdiv.firstChild);this.svgcontainer&&(this.clearsvg(),this.boxdiv.appendChild(this.svgcontainer))}destroy(){d.viewdiv.removeChild(this.boxdiv),d.descs.removeChild(this.descbox);let l=d.trees.indexOf(this);l>-1&&d.trees.splice(l,1);let p=d.textboxes.indexOf(this);p>-1&&d.textboxes.splice(p,1),this.closed=!0,this.name==="Matrix"&&(document.getElementById("matrixmenu").style.display="block"),M(),L.rehighlight()}pullout(){this.destroy();let l="menubar=no,location=no,status=no,height=620,width=620,scrollbars=yes,centerscreen=yes",p=window.mainWindow?window.mainWindow.comboView.getWindows().length:d.windows.length,r=window.open("slave.html","slave"+p,l);r.mainWindow=window.mainWindow?window.mainWindow:window,r.startbox=this.text?{text:{name:this.name}}:{tree:this.name},r.mainWindow.comboView.addWindow(r)}makeDescBox(){let l=document.createElement("div"),p=document.createElement("div");p.classList.add("closer"),p.innerHTML="x",p.title="close";let r=document.createElement("div");r.classList.add("scripter"),r.innerHTML="A",r.title="change script",l.appendChild(p),l.appendChild(r),l.appendChild(document.createTextNode(this.desc)),this.descbox=l,p.addEventListener("click",this.destroy.bind(this)),r.addEventListener("click",this.cyclescript.bind(this))}cyclescript(){this.script=this.script+1,this.script===d.scripts.length&&(this.script=0);let l=this.descbox.querySelector(".scripter");this.script===0?l.innerHTML="A":l.innerHTML=to[d.scripts[this.script]]("a"),d.scripts[this.script]==="grantha"?l.classList.add("grantha"):l.classList.remove("grantha"),this.updatescript()}updatescript(){let l=this.boxdiv.querySelectorAll(".lemma,.tree-lemma");for(let p of l){let r=p.dataset.hasOwnProperty("normal");if(!r&&p.textContent.trim()==="")continue;let n=function(){if(b.normalizedView()&&r){let u=document.createElement("span");return u.appendChild(document.createTextNode(p.dataset.normal)),u}else return p.IAST.cloneNode(!0)}(),i=this.script===0?n:Ot(n,d.scripts[this.script]);for(p.innerHTML="";i.firstChild;)p.appendChild(i.firstChild)}d.scripts[this.script]==="grantha"?this.boxdiv.classList.add("grantha"):this.boxdiv.classList.remove("grantha"),this.boxdiv.classList.contains("matrix")&&ge.xScrollToHighlit()}}class xe extends X{constructor(l,p){super(`#${l} #${p}`);this.stemmaid=l,this.id=p,this.nexml=d.treelist.get(this.name).cloneNode(!0),this.desc=this.nexml.querySelector("tree").getAttribute("label")}init(){this.makeDescBox();let l=document.createElement("div");l.classList.add("tree-box");var p,r=0;do p="tree"+r,r++;while(document.getElementById(p));l.id=p,this.boxdiv=l,this.boxdiv.addEventListener("mouseover",se.treeMouseover.bind(this)),this.boxdiv.addEventListener("click",se.treeClick),this.svgcontainer=document.createElement("div"),this.svgcontainer.id=this.boxdiv.id+"container",this.boxdiv.appendChild(this.svgcontainer),this.boxdiv.myTree=this,this.calcPaths(),this.jiggleroot(),this.findLevels(),this.labelInternal()}show(){d.descs.appendChild(this.descbox),d.viewdiv.appendChild(this.boxdiv)}jiggleroot(){let l=this.nexml.evaluate('//nex:node[@root="true"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,p=this.nexml.evaluate('//nex:edge[@source="'+l.id+'"]|//nex:edge[@target="'+l.id+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);if(p.snapshotLength===3){var r,n;for(let i=0;i<p.snapshotLength;i++){let u=p.snapshotItem(i),m=u.getAttribute("source"),x=u.getAttribute("target"),S=this.nexml.evaluate('//nex:node[@id="'+m+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,I=this.nexml.evaluate('//nex:node[@id="'+x+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!S.hasAttribute("otu")&&!I.hasAttribute("otu")){r=u,n=x===l.id?"target":"source";break}}if(r){let i=this.nexml.createElementNS(l.namespaceURI,"node");i.id="fakeroot",i.setAttribute("root","true"),l.removeAttribute("root"),l.parentElement.insertBefore(i,l);let u=this.nexml.createElementNS(l.namespaceURI,"edge");u.id="newrootedge",u.setAttribute("length","0"),u.setAttribute("source","fakeroot"),u.setAttribute("target",l.id),l.parentElement.insertBefore(u,r),r.setAttribute(n,i.id)}}}findLevels(){let l=this.nexml.querySelectorAll("edge"),p=[...this.nexml.querySelectorAll("node[otu]")],r=this.nexml,n=[p],i=function(x,S){let I=x.map(ye=>ye.id),T=new Map,V=new Map,U=[];for(let ye of S){let _e=ye.getAttribute("target"),Se=ye.getAttribute("source"),Ae=(()=>I.indexOf(_e)!==-1?{ancestor:r.getElementById(Se),child:r.getElementById(_e)}:I.indexOf(Se)!==-1?{ancestor:r.getElementById(_e),child:r.getElementById(Se)}:null)();if(Ae!==null)if(V.has(Ae.ancestor)){let ke=V.get(Ae.ancestor);T.set(Ae.ancestor,[ke.child,Ae.child]),U.push(ye),U.push(ke.edge)}else V.set(Ae.ancestor,{child:Ae.child,edge:ye})}let ne=[...T.keys()],fe=[...V.keys()].reduce((ye,_e)=>(ne.indexOf(_e)===-1&&ye.push(V.get(_e).child),ye),[]),ve=[...S].reduce((ye,_e)=>(U.indexOf(_e)===-1&&ye.push(_e),ye),[]);return{match:T,remainder:[...new Set(fe)],edges:ve}};var u=p,m=l;do{let x=i(u,m);n.push(x.match),u=[...x.match.keys(),...x.remainder],m=x.edges}while(m.length>0);this.levels=f.serializedlevels(n)}labelInternal(){for(let l of this.nexml.querySelectorAll("node:not([label])"))l.setAttribute("label",l.id)}fitch(){let l=new Map(this.levels[0].map(r=>{let n=b.normalizedView(),i=this.nexml.querySelector(`node[id="${r}"]`).getAttribute("label"),u=this.boxdiv.querySelector(`span.tree-lemma[data-id="${i}"]`),m=u?f.htmlreading(u,n):void 0;return[r,m]})),p=new N1(l,this.levels).run();for(let[r,n]of p){let i=this.boxdiv.querySelector(`span.internal[data-key="${r}"]`);i.dataset.reconstructed=n}}clearsvg(){for(;this.svgcontainer.firstChild;)this.svgcontainer.removeChild(this.svgcontainer.firstChild)}removecolors(){let l=this.nexml.querySelectorAll("node[color]");for(let p=0;p<l.snapshotLength;p++)l.snapshotItem(p).removeAttribute("color")}drawlines(l,p){if(this.removecolors(),l){let m=this.getPath(...l.split(";")).path,x=new Set;for(let S of m)x.add(S.getAttribute("target")),x.add(S.getAttribute("source"));for(let S of x){let I=this.nexml.evaluate('//nex:node[@id="'+S+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;I.getAttribute("root")||I.setAttribute("color",p)}}let r=parseInt(window.getComputedStyle(this.svgcontainer,null).width)-15,n=parseInt(window.getComputedStyle(this.boxdiv,null).height)-10,i=function(){return n<600?600:n}();D.PhyloCanvas.Render.Style.line.stroke="rgb(162,164,170)",this.phylocanvas=new D.PhyloCanvas({nexml:this.nexml,fileSource:!0},this.svgcontainer.id,r,i);let u=this.svgcontainer.querySelectorAll('path:not([stroke="#a2a4aa"])');for(let m of u)m.style.strokeWidth="2"}draw(){this.clear(),this.drawlines(),this.makeLabels()}clearLabels(){for(let l of this.boxdiv.firstChild.querySelectorAll("text"))l.parentElement.removeChild(l)}makeLabels(){let l=[...f.texts()],p=new Set(l.map(n=>n.parentNode.getAttribute("n"))),r=new Map(l.filter(n=>n.parentNode.hasAttribute("corresp")&&n.parentNode.getAttribute("corresp")===this.name).map(n=>[n.parentNode.getAttribute("select").replace(/^#/,""),n.parentNode.getAttribute("n")]));for(let n of this.boxdiv.firstChild.querySelectorAll("text")){let i=document.createElement("div");i.setAttribute("class","tree-div");let u=parseInt(n.getAttribute("x")-5),m=parseInt(n.getAttribute("y"))-15;i.style.left=u+"px",i.style.top=m+"px";let x=n.textContent.trim();p.has(x)?i.innerHTML=`<span class="witness inactive" data-key="${x}">${x}</span><span class="tree-lemma ${x}" data-id="${x}"></span>`:x!=="fakeroot"?r.has(x)?i.innerHTML=`<span class="internal reconstructed" data-key="${x}" data-label="${r.get(x)}">${r.get(x)}</span><span class="tree-lemma invisible ${x}" data-id="${x}" data-label="${r.get(x)}"></span>`:i.innerHTML=`<span class="internal" data-key="${x}">0</span>`:i.innerHTML=`<span class="internal" data-key="${x}"></span>`,n.parentElement.removeChild(n),this.boxdiv.appendChild(i)}}clearlemmata(){for(let l of this.boxdiv.querySelectorAll("span.tree-lemma"))l.innerHTML="",l.dataset.hasOwnProperty("normal")&&delete l.dataset.normal,l.IAST=l.cloneNode(!0)}populate(l,p){let r=f.texts();for(let u of r){let m=u.parentNode.getAttribute("n"),x=this.boxdiv.querySelector(`span.tree-lemma[data-id="${m}"]`)||this.boxdiv.querySelector(`span.tree-lemma[data-label="${m}"]`);if(!!x){if(x.hasOwnProperty("IAST")||(x.IAST=x.cloneNode(!0)),x.IAST.innerHTML="",p){let S=[],I=[];var n=!1;for(let T=l;T<=p;T++){let V=f.firstword(T,u);S.push(V.innerHTML),V.hasAttribute("lemma")&&(I[T-l]=V.getAttribute("lemma")),V.hasAttribute("emended")&&(n=!0)}if(x.IAST.appendChild(N.transformString(S.join(" ").replace(/\s+/g," ").trim(),N.sheets.tree)),I.length!==0){let T=S.slice(0).map((U,ne)=>I.hasOwnProperty(ne)?I[ne]:U),V=document.createElement("span");V.appendChild(N.transformString(T.join(" ").replace(/\s+/g," ").trim(),N.sheets.tree)),x.dataset.normal=V.innerHTML}n?x.dataset.emended=!0:x.dataset.hasOwnProperty("emended")&&delete x.dataset.emended}else{let S=f.firstword(l,u);x.IAST.appendChild(N.transformString(S.innerHTML,N.sheets.tree)),S.hasAttribute("lemma")?x.dataset.normal=S.getAttribute("lemma"):delete x.dataset.normal,S.hasAttribute("emended")?x.dataset.emended=!0:x.dataset.hasOwnProperty("emended")&&delete x.dataset.emended}b.normalizedView()&&x.dataset.hasOwnProperty("normal")?x.innerHTML=x.dataset.normal:x.innerHTML=x.IAST.innerHTML}}let i=this.boxdiv.querySelectorAll(".inactive");for(let u of i)u.classList.remove("inactive");this.fitch()}calcPaths(){this.nodes=[],this.paths=[],this.longest={path:[]},this.nsResolver=this.nexml.createNSResolver(this.nexml.ownerDocument==null?this.nexml.documentElement:this.nexml.ownerDocument.documentElement);let l=this.nexml.evaluate("//nex:node[@label]",this.nexml,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);for(let p=0;p<l.snapshotLength;p++)this.nodes.push(l.snapshotItem(p));for(let p=0;p<this.nodes.length;p++){let r=this.nodes[p],n=r.getAttribute("label"),i=r.id;for(let u=p+1;u<this.nodes.length;u++){let m=this.nodes[u],x=m.getAttribute("label"),S=m.id;this.paths.push({nodes:[n,x],path:this.pathFind(i,S)})}}for(let p of Object.keys(this.paths))this.paths[p].path.length>this.longest.path.length&&(this.longest=this.paths[p])}pathFind(l,p,r){r||(r=[]);let n=this.nexml.evaluate('//nex:edge[@source="'+l+'"]|//nex:edge[@target="'+l+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);var i;for(let u=0;u<n.snapshotLength;u++){let m=n.snapshotItem(u);if(i=[m],r.indexOf(m.id)!=-1)continue;r.push(m.id);let x=m.getAttribute("source")!==l?m.getAttribute("source"):m.getAttribute("target");if(x===p)return i;if(!this.nexml.evaluate('//nex:node[@id="'+x+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.hasAttribute("otu")){let I=this.pathFind(x,p,r);if(I)return i.concat(I);continue}}return!1}analyzeVariants(l,p){let r=[],n=[],i=function(I){return I.startsWith("<lg")?N.transformString(I,N.sheets.lg).firstChild.data.slice(1):I},u=function(I){return I.map(T=>i(T)).join(" ").replace(/\s+/g," ").trim()},m=b.normalizedView()?function(I,T){let V=f.firstword(I,T);return V.hasAttribute("lemma")?V.getAttribute("lemma"):V.textContent}:function(I,T){return f.firstword(I,T).textContent};for(let I of f.texts()){let T=I.parentNode.getAttribute("n");if(!this.nexml.querySelector(`otu[label="${T}"]`))continue;let V=p?u(f.range(l,p).map(U=>m(U,I))):i(m(l,I));V===""?r.hasOwnProperty("")?r[""].push(T):r[""]=[T]:r.hasOwnProperty(V)?r[V].push(T):r[V]=[T]}let x={};for(let I of Object.keys(r)){var S={length:0,branch_length:0,paths:[]};if(r[I].length===1)S=!1;else for(let T=0;T<r[I].length;T++)for(let V=T+1;V<r[I].length;V++){let U=this.getPath(r[I][T],r[I][V]);if(U.hasOwnProperty("path")||alert(U),U.path.length===S.length){let ne=this.calcBranchLength(U.path);ne===S.branch_length?S.paths.push(U):ne>S.branch_length&&(S={length:U.path.length,branch_length:ne,paths:[U]})}else U.path.length>S.length&&(S={length:U.path.length,branch_length:this.calcBranchLength(U.path),paths:[U]})}x[I]=S}for(let I of Object.keys(n))x[I]=n[I];return x}getPath(l,p){for(let r of this.paths)if(r.nodes.indexOf(l)>-1&&r.nodes.indexOf(p)>-1)return r;return!1}calcBranchLength(l){return l.map(p=>p.getAttribute("length")).reduce((p,r)=>parseFloat(p)+parseFloat(r))}pickColour(l,p,r,n){var i=p,u=r,m=l;n&&(m=m*2,m>=1&&(m-=1,i=r,u=n));let x=u.red-i.red,S=u.green-i.green,I=u.blue-i.blue,T={red:parseInt(Math.floor(i.red+x*m),10),green:parseInt(Math.floor(i.green+S*m),10),blue:parseInt(Math.floor(i.blue+I*m),10)};return"rgb("+T.red+","+T.green+","+T.blue+")"}colourizeVariants(l,p){let r=this.analyzeVariants(l,p);for(let n of this.boxdiv.querySelectorAll("span.tree-lemma")){let i=r.hasOwnProperty(n.dataset.id)?r[r[n.dataset.id]]:r[n.textContent],u={red:252,green:70,blue:107},m={red:63,green:94,blue:251};i?(n.style.color=this.pickColour(i.length/this.longest.path.length,m,u),n.dataset.length=i.length,n.dataset.branch_length=i.branch_length,n.dataset.nodes=i.paths[0].nodes.join(";")):(n.style.color=this.pickColour(1/this.longest.path.length,m,u),n.dataset.length=0,n.dataset.branch_length=0,n.dataset.nodes=""),n.textContent.trim()===""?(n.innerHTML='<span lang="en">┬а┬а┬а</span>',n.style.backgroundColor=n.style.color):n.style.backgroundColor=""}}}class Ce extends X{constructor(l){super(l);this.desc=l,this.text=f.firsttext(l)}init(){this.makeTextBox(),this.makeDescBox(),this.descbox.style.maxWidth="595px",this.descbox.style.paddingLeft="5px",this.boxdiv.addEventListener("mouseup",se.textMouseup)}refresh(){this.boxdiv.innerHTML="",this.boxdiv.appendChild(N.sheets.lemma.transformToFragment(this.text,document)),q(this.boxdiv);for(let l of f.lemmata(!1,this.boxdiv))l.IAST=l.cloneNode(!0);this.updatescript()}makeTextBox(){let l=document.createElement("div");l.dataset.id=this.name,l.classList.add("text-box"),l.appendChild(N.sheets.lemma.transformToFragment(this.text,document)),q(l);for(let p of f.lemmata(!1,l))p.IAST=p.cloneNode(!0);this.boxdiv=l}}class ee extends X{constructor(){super(name);this.desc="Matrix",this.name="Matrix",this.makeDescBox(),this.makeViewBox(),this.descbox.style.maxWidth="100vw",this.descbox.style.paddingLeft="5px"}init(){this.makeTable()}makeViewBox(){let l=document.createElement("div");l.classList.add("matrix"),l.dataset.id=this.name,this.boxdiv=l}makeTable(){let l=document.createElement("div");l.classList.add("scroller"),l.append(N.sheets.matrix.transformToFragment(d.xml,document)),l.addEventListener("dragstart",se.thDragStart),l.addEventListener("dragenter",se.trDragEnter),l.addEventListener("dragleave",se.trDragLeave),l.addEventListener("dragover",x=>x.preventDefault()),l.addEventListener("drop",se.trDragDrop),l.addEventListener("mousedown",se.matrixMousedown);let p=document.createElement("tr");p.classList.add("header");let r=document.createElement("td");r.classList.add("anchor"),p.appendChild(r);let n=[...f.trs(l)],i=n.map(x=>f.trWalker(x)),u=f.tds(!1,n[0]);for(let x of u){let S=document.createElement("th");S.dataset.ref=x.dataset.n;let I=0,T=new Set;for(let fe of i){let ve=fe.nextNode();ve.IAST=ve.cloneNode(!0);let ye=ve.textContent;ye!==""&&(I++,T.add(ye))}let V=I<2?I:`${I}(${T.size})`,U=document.createElement("span");U.classList.add("readings"),U.appendChild(document.createTextNode(V)),S.appendChild(U);let ne=document.createElement("form");ne.innerHTML='<div><input class="insignificant" title="insignificant" type="checkbox"'+(x.dataset.insignificant?"checked":"")+'></div><div><input class="binary" title="binary" type="checkbox"'+(x.dataset.binary?"checked":"")+"></div>",S.appendChild(ne),p.appendChild(S)}let m=l.querySelector("tbody");m.insertBefore(p,m.firstChild),this.boxdiv.append(l)}}return{slaveinit:function(){comboView.init(),window.startbox!==void 0&&(window.startbox.tree?w.tree(window.startbox.tree.stemmaid,window.startbox.tree.id):window.startbox.text&&w.text(window.startbox.text.name,window.startbox.text.map))},maininit:function(){document.getElementById("comboview").style.display="block",comboView.init(),v()},init:function(){d.viewdiv=document.getElementById("views"),d.descs=document.getElementById("descs"),d.viewdiv.addEventListener("click",se.textClick),document.addEventListener("keydown",se.keyDown,{capture:!0}),document.addEventListener("contextmenu",se.rightClick),document.addEventListener("mouseup",de.remove)},getWindows:function(){return d.windows},addWindow:function(s){d.windows.push(s)},getViewdiv:function(){return d.viewdiv},getTrees:function(){return d.trees}}}();window.addEventListener("load",window.comboView.maininit);
//# sourceMappingURL=script.js.map
