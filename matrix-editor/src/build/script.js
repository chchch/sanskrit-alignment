"use strict";var ze={};ze.defaults={skip_sgml:!1,syncope:!1};var Ft=ze.schemes={balinese:{vowels:"смЕ смЖ смЗ смИ смЙ смК смЛ смМ смН смО  смП смР  смС смТ".split(" "),vowel_marks:"см╡ см╢ см╖ см╕ см╣ см║ см╗ см╝ см╜ снВ см╛ см┐ снГ снА снБ".split(" "),other_marks:["смВ","смД","смБ",""],virama:["снД"],consonants:"смУ смФ смХ смЦ смЧ смШ смЩ смЪ смЫ смЬ смЭ смЮ смЯ сма смб смв смг смд сме смж смз сми смй смк смл смм смн смо смп см░ см▒ см▓ см│".split(" "),symbols:"снР снС снТ снУ снФ снХ снЦ снЧ снШ снЩ   снЮ снЯ".split(" "),zwj:["тАН"],skip:[""]},bengali:{vowels:"ржЕ ржЖ ржЗ ржИ ржЙ ржК ржЛ рза ржМ рзб  ржП ржР  ржУ ржФ".split(" "),vowel_marks:"рж╛ рж┐ рзА рзБ рзВ рзГ рзД рзв рзг  рзЗ рзИ  рзЛ рзМ".split(" "),other_marks:"ржВ ржГ ржБ".split(" "),virama:["рзН"],consonants:"ржХ ржЦ ржЧ ржШ ржЩ ржЪ ржЫ ржЬ ржЭ ржЮ ржЯ ржа ржб ржв ржг ржд рже ржж ржз ржи ржк ржл ржм ржн ржо ржп рж░ рж▓ ржм рж╢ рж╖ рж╕ рж╣ рд│ ржХрзНрж╖ ржЬрзНржЮ".split(" "),symbols:"рзж рзз рзи рзй рзк рзл рзм рзн рзо рзп реР рж╜ ред рее".split(" "),other:"    ржб ржв  ржп ".split(" ")},newa:{vowels:["ЁСРА","ЁСРБ","ЁСРВ","ЁСРГ","ЁСРД","ЁСРЕ","ЁСРЖ","ЁСРЗ","ЁСРИ","ЁСРЙ","","ЁСРК","ЁСРЛ","","ЁСРМ","ЁСРН"],vowel_marks:["ЁСР╡","ЁСР╢","ЁСР╖","ЁСР╕","ЁСР╣","ЁСР║","ЁСР╗","ЁСР╝","ЁСР╜","","ЁСР╛","ЁСР┐","","ЁССА","ЁССБ"],other_marks:["ЁССД","ЁССЕ","ЁССГ","ЁССа","ЁССб",""],virama:["ЁССВ"],consonants:["ЁСРО","ЁСРП","ЁСРР","ЁСРС","ЁСРТ","ЁСРФ","ЁСРХ","ЁСРЦ","ЁСРЧ","ЁСРШ","ЁСРЪ","ЁСРЫ","ЁСРЬ","ЁСРЭ","ЁСРЮ","ЁСРЯ","ЁСРа","ЁСРб","ЁСРв","ЁСРг","ЁСРе","ЁСРж","ЁСРз","ЁСРи","ЁСРй","ЁСРл","ЁСРм","ЁСРо","ЁСР░","ЁСР▒","ЁСР▓","ЁСР│","ЁСР┤"],symbols:["ЁССР","ЁССС","ЁССТ","ЁССУ","ЁССФ","ЁССХ","ЁССЦ","ЁССЧ","ЁССШ","ЁССЩ","ЁССЙ","ЁССЗ","ЁССЛ","ЁССМ"]},sarada:{vowels:["ЁСЖГ","ЁСЖД","ЁСЖЕ","ЁСЖЖ","ЁСЖЗ","ЁСЖИ","ЁСЖЙ","ЁСЖК","ЁСЖЛ","ЁСЖМ","","ЁСЖН","ЁСЖО","","ЁСЖП","ЁСЖР"],vowel_marks:["ЁСЖ│","ЁСЖ┤","ЁСЖ╡","ЁСЖ╢","ЁСЖ╖","ЁСЖ╕","ЁСЖ╣","ЁСЖ║","ЁСЖ╗","","ЁСЖ╝","ЁСЖ╜","","ЁСЖ╛","ЁСЖ┐"],other_marks:["ЁСЖБ","ЁСЖВ","ЁСЖА","ЁСЗВ","ЁСЗГ"],virama:["ЁСЗА"],consonants:["ЁСЖС","ЁСЖТ","ЁСЖУ","ЁСЖФ","ЁСЖХ","ЁСЖЦ","ЁСЖЧ","ЁСЖШ","ЁСЖЩ","ЁСЖЪ","ЁСЖЫ","ЁСЖЬ","ЁСЖЭ","ЁСЖЮ","ЁСЖЯ","ЁСЖа","ЁСЖб","ЁСЖв","ЁСЖг","ЁСЖд","ЁСЖе","ЁСЖж","ЁСЖз","ЁСЖи","ЁСЖй","ЁСЖк","ЁСЖл","ЁСЖм","ЁСЖо","ЁСЖп","ЁСЖ░","ЁСЖ▒","ЁСЖ▓","ЁСЖн"],symbols:["ЁСЗР","ЁСЗС","ЁСЗТ","ЁСЗУ","ЁСЗФ","ЁСЗХ","ЁСЗЦ","ЁСЗЧ","ЁСЗШ","ЁСЗЩ","ЁСЗД","ЁСЗБ","ЁСЗЕ","ЁСЗЖ"]},devanagari:{vowels:"рдЕ рдЖ рдЗ рдИ рдЙ рдК рдЛ реа рдМ реб рдО рдП рдР рдТ рдУ рдФ рдП рдР рдУ".split(" "),vowel_marks:"рд╛ рд┐ реА реБ реВ реГ реД рев рег реЖ реЗ реИ реК реЛ реМ реО реОреЗ реОрд╛ реОреЛ реЖ реП".split(" "),other_marks:"рдВ рдГ рдБ с│╡ с│╢ ъг╜".split(" "),virama:["реН"],consonants:"рдХ рдЦ рдЧ рдШ рдЩ рдЪ рдЫ рдЬ рдЭ рдЮ рдЯ рда рдб рдв рдг рдд рде рдж рдз рди рдк рдл рдм рдн рдо рдп рд░ рд▓ рд╡ рд╢ рд╖ рд╕ рд╣ рд│".split(" "),symbols:"реж рез реи рей рек рел рем рен рео реп реР рд╜ ред рее".split(" "),zwj:["тАН"],skip:[""],accent:["реС","реТ"],combo_accent:"рдГреС рдГреТ рдВреС рдВреТ".split(" "),candra:["реЕ"],other:"рдХрд╝ рдЦрд╝ рдЧрд╝ рдЬрд╝ рдбрд╝ рдврд╝ рдлрд╝ рдпрд╝ рд▒".split(" ")},gujarati:{vowels:"ркЕ ркЖ ркЗ ркИ ркЙ ркК ркЛ рла ркМ рлб  ркП ркР  ркУ ркФ".split(" "),vowel_marks:"рк╛ рк┐ рлА рлБ рлВ рлГ рлД рлв рлг  рлЗ рлИ  рлЛ рлМ".split(" "),other_marks:"ркВ ркГ ркБ".split(" "),virama:["рлН"],consonants:"ркХ ркЦ ркЧ ркШ ркЩ ркЪ ркЫ ркЬ ркЭ ркЮ ркЯ рка ркб ркв ркг ркд рке ркж ркз рки ркк ркл ркм ркн рко ркп рк░ рк▓ рк╡ рк╢ рк╖ рк╕ рк╣ рк│".split(" "),symbols:"рлж рлз рли рлй рлк рлл рлм рлн рло рлп рлР рк╜ рлд рле".split(" "),candra:["рлЕ"]},gurmukhi:{vowels:"риЕ риЖ риЗ риИ риЙ риК      риП риР  риУ риФ".split(" "),vowel_marks:"ри╛ ри┐ рйА рйБ рйВ      рйЗ рйИ  рйЛ рйМ".split(" "),other_marks:"риВ риГ риБ".split(" "),virama:["рйН"],consonants:"риХ риЦ риЧ риШ риЩ риЪ риЫ риЬ риЭ риЮ риЯ риа риб рив риг рид рие риж риз рии рик рил рим рин рио рип ри░ ри▓ ри╡ ри╢ ри╢ ри╕ ри╣ ри│".split(" "),symbols:"рйж рйз рйи рйй рйк рйл рйм рйн рйо рйп реР рд╜ ред рее".split(" "),other:" риЦ риЧ риЬ риб  рил  ".split(" ")},kannada:{vowels:"р▓Е р▓Ж р▓З р▓И р▓Й р▓К р▓Л р│а р▓М р│б р▓О р▓П р▓Р р▓Т р▓У р▓Ф".split(" "),vowel_marks:"р▓╛ р▓┐ р│А р│Б р│В р│Г р│Д р│в р│г р│Ж р│З р│И р│К р│Л р│М".split(" "),other_marks:"р▓В р▓Г рдБ".split(" "),virama:["р│Н"],consonants:"р▓Х р▓Ц р▓Ч р▓Ш р▓Щ р▓Ъ р▓Ы р▓Ь р▓Э р▓Ю р▓Я р▓а р▓б р▓в р▓г р▓д р▓е р▓ж р▓з р▓и р▓к р▓л р▓м р▓н р▓о р▓п р▓░ р▓▓ р▓╡ р▓╢ р▓╖ р▓╕ р▓╣ р▓│".split(" "),symbols:"р│ж р│з р│и р│й р│к р│л р│м р│н р│о р│п р▓Ур▓В р▓╜ ред рее".split(" "),other:"      р▓л  р▓▒".split(" ")},malayalam:{vowels:"р┤Е р┤Ж р┤З р┤И р┤Й р┤К р┤Л р╡а р┤М р╡б р┤О р┤П р┤Р р┤Т р┤У р┤Ф".split(" "),vowel_marks:"р┤╛ р┤┐ р╡А р╡Б р╡В р╡Г р╡Д р╡в р╡г р╡Ж р╡З р╡И р╡К р╡Л р╡М".split(" "),other_marks:"р┤В р┤Г рдБ".split(" "),virama:["р╡Н"],consonants:"р┤Х р┤Ц р┤Ч р┤Ш р┤Щ р┤Ъ р┤Ы р┤Ь р┤Э р┤Ю р┤Я р┤а р┤б р┤в р┤г р┤д р┤е р┤ж р┤з р┤и р┤к р┤л р┤м р┤н р┤о р┤п р┤░ р┤▓ р┤╡ р┤╢ р┤╖ р┤╕ р┤╣ р┤│".split(" "),symbols:"р╡ж р╡з р╡и р╡й р╡к р╡л р╡м р╡н р╡о р╡п р┤Ур┤В р┤╜ ред рее".split(" "),other:"        р┤▒".split(" ")},oriya:{vowels:"рмЕ рмЖ рмЗ рмИ рмЙ рмК рмЛ рна рмМ рнб  рмП рмР  рмУ рмФ".split(" "),vowel_marks:"рм╛ рм┐ рнА рнБ рнВ рнГ рнД рнв рнг  рнЗ рнИ  рнЛ рнМ".split(" "),other_marks:"рмВ рмГ рмБ".split(" "),virama:["рнН"],consonants:"рмХ рмЦ рмЧ рмШ рмЩ рмЪ рмЫ рмЬ рмЭ рмЮ рмЯ рма рмб рмв рмг рмд рме рмж рмз рми рмк рмл рмм рмн рмо рмп рм░ рм▓ рм╡ рм╢ рм╖ рм╕ рм╣ рм│".split(" "),symbols:"рнж рнз рни рнй рнк рнл рнм рнн рно рнп рмУрмВ рм╜ ред рее".split(" "),other:"    рмб рмв  рмп ".split(" ")},tamil:{vowels:"роЕ роЖ роЗ роИ роЙ роК     роО роП роР роТ роУ роФ".split(" "),vowel_marks:"ро╛ ро┐ рпА рпБ рпВ     рпЖ рпЗ рпИ рпК рпЛ рпМ".split(" "),other_marks:"роВ роГ ".split(" "),virama:["рпН"],consonants:"роХ роХ роХ роХ роЩ роЪ роЪ роЬ роЪ роЮ роЯ роЯ роЯ роЯ рог род род род род рои рок рок рок рок роо роп ро░ ро▓ ро╡ ро╢ ро╖ ро╕ ро╣ ро│".split(" "),symbols:"рпж рпз рпи рпй рпк рпл рпм рпн рпо рпп рпР рд╜ ред рее".split(" "),other:"        ро▒".split(" ")},telugu:{vowels:"р░Е р░Ж р░З р░И р░Й р░К р░Л р▒а р░М р▒б р░О р░П р░Р р░Т р░У р░Ф".split(" "),vowel_marks:"р░╛ р░┐ р▒А р▒Б р▒В р▒Г р▒Д р▒в р▒г р▒Ж р▒З р▒И р▒К р▒Л р▒М".split(" "),other_marks:"р░В р░Г р░Б с│▓ с│▓".split(" "),virama:["р▒Н"],consonants:"р░Х р░Ц р░Ч р░Ш р░Щ р░Ъ р░Ы р░Ь р░Э р░Ю р░Я р░а р░б р░в р░г р░д р░е р░ж р░з р░и р░к р░л р░м р░н р░о р░п р░░ р░▓ р░╡ р░╢ р░╖ р░╕ р░╣ р░│".split(" "),symbols:"р▒ж р▒з р▒и р▒й р▒к р▒л р▒м р▒н р▒о р▒п р░Ур░В р░╜ ред рее".split(" "),other:"        р░▒".split(" ")},iast:{vowels:"a ─Б i ─л u ┼л с╣Ы с╣Э с╕╖ с╕╣ с║╜ e ai ├╡ o au ├к a├о ├┤ a├╗".split(" "),other_marks:["с╣Г","с╕е","m╠Р","с║Ц","с╕л","oс╕┐"],virama:[""],consonants:"k kh g gh с╣Е c ch j jh ├▒ с╣н с╣нh с╕Н с╕Нh с╣З t th d dh n p ph b bh m y r l v ┼Ы с╣г s h с╕╗".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oс╣Б ' | ||".split(" ")},iso:{vowels:"a ─Б i ─л u ┼л r╠е r╠е╠Д l╠е l╠е╠Д с║╜ e ai ├╡ o au ├к a├о ├┤ a├╗".split(" "),other_marks:["с╣Б","с╕е","m╠Р","oс╕┐"],virama:[""],consonants:"k kh g gh с╣Е c ch j jh ├▒ с╣н с╣нh с╕Н с╕Нh с╣З t th d dh n p ph b bh m y r l v ┼Ы с╣г s h с╕╖ kс╣г j├▒".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 om╠Р ' | ||".split(" ")},itrans:{vowels:"a A i I u U RRi RRI LLi LLI  e ai  o au".split(" "),other_marks:["M","H",".N"],virama:[""],consonants:"k kh g gh ~N ch Ch j jh ~n T Th D Dh N t th d dh n p ph b bh m y r l v sh Sh s h L kSh j~n".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM .a | ||".split(" "),candra:[".c"],zwj:["{}"],skip:"_",accent:["\\'","\\_"],combo_accent:"\\'H \\_H \\'M \\_M".split(" "),other:"q K G z .D .Dh f Y R".split(" ")},hk:{vowels:"a A i I u U R RR lR lRR  e ai  o au".split(" "),other_marks:"M H ~".split(" "),virama:[""],consonants:"k kh g gh G c ch j jh J T Th D Dh N t th d dh n p ph b bh m y r l v z S s h L kS jJ".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM ' | ||".split(" ")},slp1:{vowels:"a A i I u U f F x X с║╜ e E ├╡ o O ├к ├К ├┤ ├Ф".split(" "),other_marks:"M H m╠Р с║Ц с╕л oс╕┐".split(" "),virama:[""],consonants:"k K g G N c C j J Y w W q Q R t T d D n p P b B m y r l v S z s h L".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oс╣Б ' | ||".split(" ")},velthuis:{vowels:"a aa i ii u uu .r .rr .li .ll  e ai  o au".split(" "),other_marks:".m .h ".split(" "),virama:[""],consonants:'k kh g gh "n c ch j jh ~n .t .th .d .d .n t th d dh n p ph b bh m y r l v ~s .s s h L k.s j~n'.split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 o.m ' | ||".split(" ")},wx:{vowels:"a A i I u U q Q L   e E  o O".split(" "),other_marks:"M H z".split(" "),virama:[""],consonants:"k K g G f c C j J F t T d D N w W x X n p P b B m y r l v S R s h  kR jF".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oM ' | ||".split(" ")}},x1={},Jt={iast:{с╣Ы:["r╠е"],с╣Г:["с╣Б"]},itrans:{A:["aa"],I:["ii","ee"],U:["uu","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],"j~n":["GY","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":"\\_.m \\_.n \\`M \\`.m \\`.n".split(" "),".a":["~"],"|":["."],"||":[".."],z:["J"]}},Rt={};ze.isRomanScheme=function(v){return x1.hasOwnProperty(v)};ze.addBrahmicScheme=function(v,c){ze.schemes[v]=c};ze.addRomanScheme=function(v,c){"vowel_marks"in c||(c.vowel_marks=c.vowels.slice(1)),ze.schemes[v]=c,x1[v]=!0};var b1=function(v){var c={};for(var k in v)!v.hasOwnProperty(k)||(c[k]=v[k].slice(0));return c};(function(){var v=Ft.kolkata=b1(Ft.iast),c="iast itrans hk kolkata slp1 velthuis wx".split(" ");v.vowels="a ─Б i ─л u ┼л с╣Ы с╣Э с╕╖ с╕╣ e ─У ai o ┼Н au".split(" ");for(var k=0,P;P=c[k];k++)ze.addRomanScheme(P,Ft[P]);var m=b1(Ft.itrans);m.vowels="a A i I u U Ri RRI LLi LLi e E ai o O au".split(" "),m.vowel_marks=m.vowels.slice(1),Jt.itrans_dravidian=Jt.itrans,ze.addRomanScheme("itrans_dravidian",m)})();var j1=function(v,c){var k=Jt[v]||{},P={},m=ze.schemes[v],T={},D=[],h={},f=ze.schemes[c];for(var w in m)if(!!m.hasOwnProperty(w)){var L=m[w],O=f[w];if(O!==void 0)for(var I=0;I<L.length;I++){var M=L[I],E=O[I],F=k[M]||[],U=F.length,ee=0;for(D.push(M.length),ee=0;ee<U;ee++)D.push(F[ee].length);if(w==="vowel_marks"||w==="virama")for(h[M]=E,ee=0;ee<U;ee++)h[F[ee]]=E;else{for(T[M]=E,ee=0;ee<U;ee++)T[F[ee]]=E;if(w==="consonants"||w==="other")for(P[M]=E,ee=0;ee<U;ee++)P[F[ee]]=E}}}return{consonants:P,fromRoman:ze.isRomanScheme(v),letters:T,marks:h,maxTokenLength:Math.max.apply(Math,D),toRoman:ze.isRomanScheme(c),virama:f.virama}},U1=function(v,c,k){for(var P=[],m=c.consonants,T=v.length,D=!1,h=c.letters,f=c.marks,w=c.maxTokenLength,L=k.skip_sgml,O=k.syncope,I,M,E="",F=c.toRoman,U=c.virama,ee=!1,$=!1,V=!1,le=0,fe;(fe=v.charAt(le))||E;le++){var xe=w-E.length;if(!(xe>0&&le<T&&(E+=fe,xe>1)))for(var W=0;W<w;W++){var me=E.substr(0,w-W);if(ee===!0)ee=me!==">";else if(me==="<")ee=L;else if(me==="##"){V=!V,E=E.substr(2);break}if($=ee||V,(I=h[me])!==void 0&&!$){F?P.push(I):(D?(M=f[me])?P.push(M):me!=="a"&&(P.push(U),P.push(I)):P.push(I),D=me in m),E=E.substr(w-W);break}else W===w-1&&(D&&(D=!1,O||P.push(U)),P.push(me),E=E.substr(1))}}return D&&!O&&P.push(U),P.join("")},G1=function(v,c){for(var k=[],P=c.consonants,m=!1,T=!1,D=c.letters,h=c.marks,f,w=c.toRoman,L=!1,O=0,I;I=v.charAt(O);O++){if(I==="#"){m?(L=!L,m=!1):m=!0,T&&(k.push("a"),T=!1);continue}else if(L){k.push(I);continue}(f=h[I])!==void 0?(k.push(f),T=!1):(m&&(k.push("#"),m=!1),T&&(k.push("a"),T=!1),(f=D[I])?(k.push(f),T=w&&I in P):k.push(I))}return T&&k.push("a"),k.join("")};ze.t=function(v,c,k,P){P=P||{};var m=Rt.options||{},T=ze.defaults,D=Rt.from===c&&Rt.to===k,h;for(var f in T)if(T.hasOwnProperty(f)){var w=T[f];f in P&&(w=P[f]),P[f]=w,w!==m[f]&&(D=!1)}return D?h=Rt.map:(h=j1(c,k,P),Rt={from:c,map:h,options:P,to:k}),c==="itrans"&&(v=v.replace(/\{\\m\+\}/g,".h.N"),v=v.replace(/\.h/g,""),v=v.replace(/\\([^'`_]|$)/g,"##$1##")),h.fromRoman?U1(v,h,P):G1(v,h,P)};var Qt={};(function(v){"use strict";v.__type__="csv";var c=typeof jQuery!="undefined"&&jQuery.Deferred||typeof _!="undefined"&&_.Deferred||function(){var h,f,w=new Promise(function(L,O){h=L,f=O});return{resolve:h,reject:f,promise:function(){return w}}};v.fetch=function(h){var f=new c;if(h.file){var w=new FileReader,L=h.encoding||"UTF-8";w.onload=function(M){var E=v.extractFields(v.parse(M.target.result,h),h);E.useMemoryStore=!0,E.metadata={filename:h.file.name},f.resolve(E)},w.onerror=function(M){f.reject({error:{message:"Failed to load file. Code: "+M.target.error.code}})},w.readAsText(h.file,L)}else if(h.data){var O=v.extractFields(v.parse(h.data,h),h);O.useMemoryStore=!0,f.resolve(O)}else if(h.url){var I=window.fetch||function(M){var E=jQuery.get(M),F={then:function(U){return E.done(U),F},catch:function(U){return E.fail(U),F}};return F};I(h.url).then(function(M){return M.text?M.text():M}).then(function(M){var E=v.extractFields(v.parse(M,h),h);E.useMemoryStore=!0,f.resolve(E)}).catch(function(M,E){f.reject({error:{message:"Failed to load file. "+M.statusText+". Code: "+M.status,request:M}})})}return f.promise()},v.extractFields=function(h,f){return f.noHeaderRow!==!0&&h.length>0?{fields:h[0],records:h.slice(1)}:{records:h}},v.normalizeDialectOptions=function(h){var f={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var w in h)w==="trim"?f.skipinitialspace=h.trim:f[w.toLowerCase()]=h[w];return f},v.parse=function(h,f){(!f||f&&!f.lineterminator)&&(h=v.normalizeLineTerminator(h,f));var w=v.normalizeDialectOptions(f);h=D(h,w.lineterminator);var L="",O=!1,I=!1,M="",E=[],F=[],U,ee;for(ee=function($){return I!==!0&&($===""?$=null:w.skipinitialspace===!0&&($=T($)),k.test($)?$=parseInt($,10):P.test($)&&($=parseFloat($,10))),$},U=0;U<h.length;U+=1)L=h.charAt(U),O===!1&&(L===w.delimiter||L===w.lineterminator)?(M=ee(M),E.push(M),L===w.lineterminator&&(F.push(E),E=[]),M="",I=!1):L!==w.quotechar?M+=L:O?h.charAt(U+1)===w.quotechar?(M+=w.quotechar,U+=1):O=!1:(O=!0,I=!0);return M=ee(M),E.push(M),F.push(E),w.skipinitialrows&&(F=F.slice(w.skipinitialrows)),F},v.normalizeLineTerminator=function(h,f){return f=f||{},f.lineterminator?h:h.replace(/(\r\n|\n|\r)/gm,`
`)},v.objectToArray=function(h){for(var f=[],w=[],L=[],O=0;O<h.fields.length;O++){var I=h.fields[O].id;L.push(I);var M=h.fields[O].label?h.fields[O].label:I;w.push(M)}f.push(w);for(var O=0;O<h.records.length;O++){for(var E=[],F=h.records[O],U=0;U<L.length;U++)E.push(F[L[U]]);f.push(E)}return f},v.serialize=function(h,f){var w=null;h instanceof Array?w=h:w=v.objectToArray(h);var L=v.normalizeDialectOptions(f),O="",I="",M="",E="",F,U,ee;for(ee=function($){return $===null?$="":typeof $=="string"&&m.test($)?(L.doublequote&&($=$.replace(/"/g,'""')),$=L.quotechar+$+L.quotechar):typeof $=="number"&&($=$.toString(10)),$},F=0;F<w.length;F+=1)for(O=w[F],U=0;U<O.length;U+=1)I=ee(O[U]),U===O.length-1?(M+=I,E+=M+L.lineterminator,M=""):M+=I+L.delimiter,I="";return E};var k=/^\d+$/,P=/^\d*\.\d+$|^\d+\.\d*$/,m=/^\s|\s$|,|"|\n/,T=function(){return String.prototype.trim?function(h){return h.trim()}:function(h){return h.replace(/^\s*/,"").replace(/\s*$/,"")}}();function D(h,f){return h.charAt(h.length-f.length)!==f?h:h.substring(0,h.length-f.length)}})(Qt);function W1(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}function Y1(v,c,k){return k={path:c,exports:{},require:function(P,m){return X1(P,m==null?k.path:m)}},v(k,k.exports),k.exports}function X1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var J1=Y1(function(v,c){(function(k,P){v.exports=P()})(window,function(){return function(k){var P={};function m(T){if(P[T])return P[T].exports;var D=P[T]={i:T,l:!1,exports:{}};return k[T].call(D.exports,D,D.exports,m),D.l=!0,D.exports}return m.m=k,m.c=P,m.d=function(T,D,h){m.o(T,D)||Object.defineProperty(T,D,{enumerable:!0,get:h})},m.r=function(T){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})},m.t=function(T,D){if(1&D&&(T=m(T)),8&D||4&D&&typeof T=="object"&&T&&T.__esModule)return T;var h=Object.create(null);if(m.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:T}),2&D&&typeof T!="string")for(var f in T)m.d(h,f,function(w){return T[w]}.bind(null,f));return h},m.n=function(T){var D=T&&T.__esModule?function(){return T.default}:function(){return T};return m.d(D,"a",D),D},m.o=function(T,D){return Object.prototype.hasOwnProperty.call(T,D)},m.p="",m(m.s=1)}([function(k,P,m){var T,D;T=[m(2)],(D=function(h){function f(e){if(f.is(e,"function"))return w?e():h.on("raphael.DOMload",e);if(f.is(e,re))return f._engine.create[$](f,e.splice(0,3+f.is(e[0],X))).add(e);var i=Array.prototype.slice.call(arguments,0);if(f.is(i[i.length-1],"function")){var o=i.pop();return w?o.call(f._engine.create[$](f,i)):h.on("raphael.DOMload",function(){o.call(f._engine.create[$](f,i))})}return f._engine.create[$](f,arguments)}f.version="2.3.0",f.eve=h;var w,L,O=/[, ]+/,I={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},M=/\{(\d+)\}/g,E="hasOwnProperty",F={doc:document,win:window},U={was:Object.prototype[E].call(F.win,"Raphael"),is:F.win.Raphael},ee=function(){this.ca=this.customAttributes={}},$="apply",V="concat",le="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,fe="",xe=" ",W=String,me="split",pe="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[me](xe),q={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},be=W.prototype.toLowerCase,se=Math,ke=se.max,j=se.min,Ce=se.abs,Se=se.pow,Z=se.PI,X="number",re="array",a=Object.prototype.toString,t=(f._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),n={NaN:1,Infinity:1,"-Infinity":1},r=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,s=se.round,u=parseFloat,d=parseInt,g=W.prototype.toUpperCase,x=f._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},C=f._availableAnimAttrs={blur:X,"clip-rect":"csv",cx:X,cy:X,fill:"colour","fill-opacity":X,"font-size":X,height:X,opacity:X,path:"path",r:X,rx:X,ry:X,stroke:"colour","stroke-opacity":X,"stroke-width":X,transform:"transform",width:X,x:X,y:X},B=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,H={hs:1,rg:1},G=/,?([achlmqrstvxz]),?/gi,ie=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,oe=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,de=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ye=(f._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),we=function(e,i){return u(e)-u(i)},Ae=function(e){return e},ve=f._rectPath=function(e,i,o,l,p){return p?[["M",e+p,i],["l",o-2*p,0],["a",p,p,0,0,1,p,p],["l",0,l-2*p],["a",p,p,0,0,1,-p,p],["l",2*p-o,0],["a",p,p,0,0,1,-p,-p],["l",0,2*p-l],["a",p,p,0,0,1,p,-p],["z"]]:[["M",e,i],["l",o,0],["l",0,l],["l",-o,0],["z"]]},Ee=function(e,i,o,l){return l==null&&(l=o),[["M",e,i],["m",0,-l],["a",o,l,0,1,1,0,2*l],["a",o,l,0,1,1,0,-2*l],["z"]]},Te=f._getPath={path:function(e){return e.attr("path")},circle:function(e){var i=e.attrs;return Ee(i.cx,i.cy,i.r)},ellipse:function(e){var i=e.attrs;return Ee(i.cx,i.cy,i.rx,i.ry)},rect:function(e){var i=e.attrs;return ve(i.x,i.y,i.width,i.height,i.r)},image:function(e){var i=e.attrs;return ve(i.x,i.y,i.width,i.height)},text:function(e){var i=e._getBBox();return ve(i.x,i.y,i.width,i.height)},set:function(e){var i=e._getBBox();return ve(i.x,i.y,i.width,i.height)}},Ne=f.mapPath=function(e,i){if(!i)return e;var o,l,p,b,A,S,R;for(p=0,A=(e=St(e)).length;p<A;p++)for(b=1,S=(R=e[p]).length;b<S;b+=2)o=i.x(R[b],R[b+1]),l=i.y(R[b],R[b+1]),R[b]=o,R[b+1]=l;return e};if(f._g=F,f.type=F.win.SVGAngle||F.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",f.type=="VML"){var Re,De=F.doc.createElement("div");if(De.innerHTML='<v:shape adj="1"/>',(Re=De.firstChild).style.behavior="url(#default#VML)",!Re||typeof Re.adj!="object")return f.type=fe;De=null}function qe(e){if(typeof e=="function"||Object(e)!==e)return e;var i=new e.constructor;for(var o in e)e[E](o)&&(i[o]=qe(e[o]));return i}f.svg=!(f.vml=f.type=="VML"),f._Paper=ee,f.fn=L=ee.prototype=f.prototype,f._id=0,f.is=function(e,i){return(i=be.call(i))=="finite"?!n[E](+e):i=="array"?e instanceof Array:i=="null"&&e===null||i==typeof e&&e!==null||i=="object"&&e===Object(e)||i=="array"&&Array.isArray&&Array.isArray(e)||a.call(e).slice(8,-1).toLowerCase()==i},f.angle=function(e,i,o,l,p,b){if(p==null){var A=e-o,S=i-l;return A||S?(180+180*se.atan2(-S,-A)/Z+360)%360:0}return f.angle(e,i,p,b)-f.angle(o,l,p,b)},f.rad=function(e){return e%360*Z/180},f.deg=function(e){return Math.round(180*e/Z%360*1e3)/1e3},f.snapTo=function(e,i,o){if(o=f.is(o,"finite")?o:10,f.is(e,re)){for(var l=e.length;l--;)if(Ce(e[l]-i)<=o)return e[l]}else{var p=i%(e=+e);if(p<o)return i-p;if(p>e-o)return i-p+e}return i};var Xe,Ge;f.createUUID=(Xe=/[xy]/g,Ge=function(e){var i=16*se.random()|0;return(e=="x"?i:3&i|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Xe,Ge).toUpperCase()}),f.setWindow=function(e){h("raphael.setWindow",f,F.win,e),F.win=e,F.doc=F.win.document,f._engine.initWin&&f._engine.initWin(F.win)};var je=function(e){if(f.vml){var i,o=/^\s+|\s+$/g;try{var l=new ActiveXObject("htmlfile");l.write("<body>"),l.close(),i=l.body}catch(A){i=createPopup().document.body}var p=i.createTextRange();je=Fe(function(A){try{i.style.color=W(A).replace(o,fe);var S=p.queryCommandValue("ForeColor");return"#"+("000000"+(S=(255&S)<<16|65280&S|(16711680&S)>>>16).toString(16)).slice(-6)}catch(R){return"none"}})}else{var b=F.doc.createElement("i");b.title="Rapha├лl Colour Picker",b.style.display="none",F.doc.body.appendChild(b),je=Fe(function(A){return b.style.color=A,F.doc.defaultView.getComputedStyle(b,fe).getPropertyValue("color")})}return je(e)},at=function(){return"hsb("+[this.h,this.s,this.b]+")"},lt=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ct=function(){return this.hex},ct=function(e,i,o){if(i==null&&f.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(o=e.b,i=e.g,e=e.r),i==null&&f.is(e,"string")){var l=f.getRGB(e);e=l.r,i=l.g,o=l.b}return(e>1||i>1||o>1)&&(e/=255,i/=255,o/=255),[e,i,o]},Nt=function(e,i,o,l){var p={r:e*=255,g:i*=255,b:o*=255,hex:f.rgb(e,i,o),toString:Ct};return f.is(l,"finite")&&(p.opacity=l),p};function Fe(e,i,o){return function l(){var p=Array.prototype.slice.call(arguments,0),b=p.join("тРА"),A=l.cache=l.cache||{},S=l.count=l.count||[];return A[E](b)?(function(R,z){for(var J=0,ae=R.length;J<ae;J++)if(R[J]===z)return R.push(R.splice(J,1)[0])}(S,b),o?o(A[b]):A[b]):(S.length>=1e3&&delete A[S.shift()],S.push(b),A[b]=e[$](i,p),o?o(A[b]):A[b])}}f.color=function(e){var i;return f.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(i=f.hsb2rgb(e),e.r=i.r,e.g=i.g,e.b=i.b,e.hex=i.hex):f.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(i=f.hsl2rgb(e),e.r=i.r,e.g=i.g,e.b=i.b,e.hex=i.hex):(f.is(e,"string")&&(e=f.getRGB(e)),f.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(i=f.rgb2hsl(e),e.h=i.h,e.s=i.s,e.l=i.l,i=f.rgb2hsb(e),e.v=i.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=Ct,e},f.hsb2rgb=function(e,i,o,l){var p,b,A,S,R;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(o=e.b,i=e.s,l=e.o,e=e.h),S=(R=o*i)*(1-Ce((e=(e*=360)%360/60)%2-1)),p=b=A=o-R,Nt(p+=[R,S,0,0,S,R][e=~~e],b+=[S,R,R,S,0,0][e],A+=[0,0,S,R,R,S][e],l)},f.hsl2rgb=function(e,i,o,l){var p,b,A,S,R;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(o=e.l,i=e.s,e=e.h),(e>1||i>1||o>1)&&(e/=360,i/=100,o/=100),S=(R=2*i*(o<.5?o:1-o))*(1-Ce((e=(e*=360)%360/60)%2-1)),p=b=A=o-R/2,Nt(p+=[R,S,0,0,S,R][e=~~e],b+=[S,R,R,S,0,0][e],A+=[0,0,S,R,R,S][e],l)},f.rgb2hsb=function(e,i,o){var l,p;return e=(o=ct(e,i,o))[0],i=o[1],o=o[2],{h:(((p=(l=ke(e,i,o))-j(e,i,o))==0?null:l==e?(i-o)/p:l==i?(o-e)/p+2:(e-i)/p+4)+360)%6*60/360,s:p==0?0:p/l,b:l,toString:at}},f.rgb2hsl=function(e,i,o){var l,p,b,A;return e=(o=ct(e,i,o))[0],i=o[1],o=o[2],l=((p=ke(e,i,o))+(b=j(e,i,o)))/2,{h:(((A=p-b)==0?null:p==e?(i-o)/A:p==i?(o-e)/A+2:(e-i)/A+4)+360)%6*60/360,s:A==0?0:l<.5?A/(2*l):A/(2-2*l),l,toString:lt}},f._path2string=function(){return this.join(",").replace(G,"$1")},f._preload=function(e,i){var o=F.doc.createElement("img");o.style.cssText="position:absolute;left:-9999em;top:-9999em",o.onload=function(){i.call(this),this.onload=null,F.doc.body.removeChild(this)},o.onerror=function(){F.doc.body.removeChild(this)},F.doc.body.appendChild(o),o.src=e};function Ke(){return this.hex}function ut(e,i){for(var o=[],l=0,p=e.length;p-2*!i>l;l+=2){var b=[{x:+e[l-2],y:+e[l-1]},{x:+e[l],y:+e[l+1]},{x:+e[l+2],y:+e[l+3]},{x:+e[l+4],y:+e[l+5]}];i?l?p-4==l?b[3]={x:+e[0],y:+e[1]}:p-2==l&&(b[2]={x:+e[0],y:+e[1]},b[3]={x:+e[2],y:+e[3]}):b[0]={x:+e[p-2],y:+e[p-1]}:p-4==l?b[3]=b[2]:l||(b[0]={x:+e[l],y:+e[l+1]}),o.push(["C",(-b[0].x+6*b[1].x+b[2].x)/6,(-b[0].y+6*b[1].y+b[2].y)/6,(b[1].x+6*b[2].x-b[3].x)/6,(b[1].y+6*b[2].y-b[3].y)/6,b[2].x,b[2].y])}return o}f.getRGB=Fe(function(e){if(!e||(e=W(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ke};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Ke};!H[E](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=je(e));var i,o,l,p,b,A,S=e.match(t);return S?(S[2]&&(l=d(S[2].substring(5),16),o=d(S[2].substring(3,5),16),i=d(S[2].substring(1,3),16)),S[3]&&(l=d((b=S[3].charAt(3))+b,16),o=d((b=S[3].charAt(2))+b,16),i=d((b=S[3].charAt(1))+b,16)),S[4]&&(A=S[4][me](B),i=u(A[0]),A[0].slice(-1)=="%"&&(i*=2.55),o=u(A[1]),A[1].slice(-1)=="%"&&(o*=2.55),l=u(A[2]),A[2].slice(-1)=="%"&&(l*=2.55),S[1].toLowerCase().slice(0,4)=="rgba"&&(p=u(A[3])),A[3]&&A[3].slice(-1)=="%"&&(p/=100)),S[5]?(A=S[5][me](B),i=u(A[0]),A[0].slice(-1)=="%"&&(i*=2.55),o=u(A[1]),A[1].slice(-1)=="%"&&(o*=2.55),l=u(A[2]),A[2].slice(-1)=="%"&&(l*=2.55),(A[0].slice(-3)=="deg"||A[0].slice(-1)=="┬░")&&(i/=360),S[1].toLowerCase().slice(0,4)=="hsba"&&(p=u(A[3])),A[3]&&A[3].slice(-1)=="%"&&(p/=100),f.hsb2rgb(i,o,l,p)):S[6]?(A=S[6][me](B),i=u(A[0]),A[0].slice(-1)=="%"&&(i*=2.55),o=u(A[1]),A[1].slice(-1)=="%"&&(o*=2.55),l=u(A[2]),A[2].slice(-1)=="%"&&(l*=2.55),(A[0].slice(-3)=="deg"||A[0].slice(-1)=="┬░")&&(i/=360),S[1].toLowerCase().slice(0,4)=="hsla"&&(p=u(A[3])),A[3]&&A[3].slice(-1)=="%"&&(p/=100),f.hsl2rgb(i,o,l,p)):((S={r:i,g:o,b:l,toString:Ke}).hex="#"+(16777216|l|o<<8|i<<16).toString(16).slice(1),f.is(p,"finite")&&(S.opacity=p),S)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ke}},f),f.hsb=Fe(function(e,i,o){return f.hsb2rgb(e,i,o).hex}),f.hsl=Fe(function(e,i,o){return f.hsl2rgb(e,i,o).hex}),f.rgb=Fe(function(e,i,o){function l(p){return p+.5|0}return"#"+(16777216|l(o)|l(i)<<8|l(e)<<16).toString(16).slice(1)}),f.getColor=function(e){var i=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},o=this.hsb2rgb(i.h,i.s,i.b);return i.h+=.075,i.h>1&&(i.h=0,i.s-=.2,i.s<=0&&(this.getColor.start={h:0,s:1,b:i.b})),o.hex},f.getColor.reset=function(){delete this.start},f.parsePathString=function(e){if(!e)return null;var i=Ue(e);if(i.arr)return He(i.arr);var o={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},l=[];return f.is(e,re)&&f.is(e[0],re)&&(l=He(e)),l.length||W(e).replace(ie,function(p,b,A){var S=[],R=b.toLowerCase();if(A.replace(de,function(z,J){J&&S.push(+J)}),R=="m"&&S.length>2&&(l.push([b][V](S.splice(0,2))),R="l",b=b=="m"?"l":"L"),R=="r")l.push([b][V](S));else for(;S.length>=o[R]&&(l.push([b][V](S.splice(0,o[R]))),o[R]););}),l.toString=f._path2string,i.arr=He(l),l},f.parseTransformString=Fe(function(e){if(!e)return null;var i=[];return f.is(e,re)&&f.is(e[0],re)&&(i=He(e)),i.length||W(e).replace(oe,function(o,l,p){var b=[];be.call(l),p.replace(de,function(A,S){S&&b.push(+S)}),i.push([l][V](b))}),i.toString=f._path2string,i},this,function(e){if(!e)return e;for(var i=[],o=0;o<e.length;o++){for(var l=[],p=0;p<e[o].length;p++)l.push(e[o][p]);i.push(l)}return i});var Ue=function(e){var i=Ue.ps=Ue.ps||{};return i[e]?i[e].sleep=100:i[e]={sleep:100},setTimeout(function(){for(var o in i)i[E](o)&&o!=e&&(i[o].sleep--,!i[o].sleep&&delete i[o])}),i[e]};function ht(e,i,o,l,p){return e*(e*(-3*i+9*o-9*l+3*p)+6*i-12*o+6*l)-3*i+3*o}function We(e,i,o,l,p,b,A,S,R){R==null&&(R=1);for(var z=(R=R>1?1:R<0?0:R)/2,J=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ae=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],K=0,Y=0;Y<12;Y++){var te=z*J[Y]+z,ce=ht(te,e,o,p,A),ne=ht(te,i,l,b,S),Q=ce*ce+ne*ne;K+=ae[Y]*se.sqrt(Q)}return z*K}function _t(e,i,o,l,p,b,A,S){if(!(ke(e,o)<j(p,A)||j(e,o)>ke(p,A)||ke(i,l)<j(b,S)||j(i,l)>ke(b,S))){var R=(e-o)*(b-S)-(i-l)*(p-A);if(R){var z=((e*l-i*o)*(p-A)-(e-o)*(p*S-b*A))/R,J=((e*l-i*o)*(b-S)-(i-l)*(p*S-b*A))/R,ae=+z.toFixed(2),K=+J.toFixed(2);if(!(ae<+j(e,o).toFixed(2)||ae>+ke(e,o).toFixed(2)||ae<+j(p,A).toFixed(2)||ae>+ke(p,A).toFixed(2)||K<+j(i,l).toFixed(2)||K>+ke(i,l).toFixed(2)||K<+j(b,S).toFixed(2)||K>+ke(b,S).toFixed(2)))return{x:z,y:J}}}}function dt(e,i,o){var l=f.bezierBBox(e),p=f.bezierBBox(i);if(!f.isBBoxIntersect(l,p))return o?0:[];for(var b=We.apply(0,e),A=We.apply(0,i),S=ke(~~(b/5),1),R=ke(~~(A/5),1),z=[],J=[],ae={},K=o?0:[],Y=0;Y<S+1;Y++){var te=f.findDotsAtSegment.apply(f,e.concat(Y/S));z.push({x:te.x,y:te.y,t:Y/S})}for(Y=0;Y<R+1;Y++)te=f.findDotsAtSegment.apply(f,i.concat(Y/R)),J.push({x:te.x,y:te.y,t:Y/R});for(Y=0;Y<S;Y++)for(var ce=0;ce<R;ce++){var ne=z[Y],Q=z[Y+1],_e=J[ce],ue=J[ce+1],ge=Ce(Q.x-ne.x)<.001?"y":"x",he=Ce(ue.x-_e.x)<.001?"y":"x",Le=_t(ne.x,ne.y,Q.x,Q.y,_e.x,_e.y,ue.x,ue.y);if(Le){if(ae[Le.x.toFixed(4)]==Le.y.toFixed(4))continue;ae[Le.x.toFixed(4)]=Le.y.toFixed(4);var Pe=ne.t+Ce((Le[ge]-ne[ge])/(Q[ge]-ne[ge]))*(Q.t-ne.t),Be=_e.t+Ce((Le[he]-_e[he])/(ue[he]-_e[he]))*(ue.t-_e.t);Pe>=0&&Pe<=1.001&&Be>=0&&Be<=1.001&&(o?K++:K.push({x:Le.x,y:Le.y,t1:j(Pe,1),t2:j(Be,1)}))}}return K}function kt(e,i,o){e=f._path2curve(e),i=f._path2curve(i);for(var l,p,b,A,S,R,z,J,ae,K,Y=o?0:[],te=0,ce=e.length;te<ce;te++){var ne=e[te];if(ne[0]=="M")l=S=ne[1],p=R=ne[2];else{ne[0]=="C"?(ae=[l,p].concat(ne.slice(1)),l=ae[6],p=ae[7]):(ae=[l,p,l,p,S,R,S,R],l=S,p=R);for(var Q=0,_e=i.length;Q<_e;Q++){var ue=i[Q];if(ue[0]=="M")b=z=ue[1],A=J=ue[2];else{ue[0]=="C"?(K=[b,A].concat(ue.slice(1)),b=K[6],A=K[7]):(K=[b,A,b,A,z,J,z,J],b=z,A=J);var ge=dt(ae,K,o);if(o)Y+=ge;else{for(var he=0,Le=ge.length;he<Le;he++)ge[he].segment1=te,ge[he].segment2=Q,ge[he].bez1=ae,ge[he].bez2=K;Y=Y.concat(ge)}}}}}return Y}f.findDotsAtSegment=function(e,i,o,l,p,b,A,S,R){var z=1-R,J=Se(z,3),ae=Se(z,2),K=R*R,Y=K*R,te=J*e+3*ae*R*o+3*z*R*R*p+Y*A,ce=J*i+3*ae*R*l+3*z*R*R*b+Y*S,ne=e+2*R*(o-e)+K*(p-2*o+e),Q=i+2*R*(l-i)+K*(b-2*l+i),_e=o+2*R*(p-o)+K*(A-2*p+o),ue=l+2*R*(b-l)+K*(S-2*b+l),ge=z*e+R*o,he=z*i+R*l,Le=z*p+R*A,Pe=z*b+R*S,Be=90-180*se.atan2(ne-_e,Q-ue)/Z;return(ne>_e||Q<ue)&&(Be+=180),{x:te,y:ce,m:{x:ne,y:Q},n:{x:_e,y:ue},start:{x:ge,y:he},end:{x:Le,y:Pe},alpha:Be}},f.bezierBBox=function(e,i,o,l,p,b,A,S){f.is(e,"array")||(e=[e,i,o,l,p,b,A,S]);var R=Mt.apply(null,e);return{x:R.min.x,y:R.min.y,x2:R.max.x,y2:R.max.y,width:R.max.x-R.min.x,height:R.max.y-R.min.y}},f.isPointInsideBBox=function(e,i,o){return i>=e.x&&i<=e.x2&&o>=e.y&&o<=e.y2},f.isBBoxIntersect=function(e,i){var o=f.isPointInsideBBox;return o(i,e.x,e.y)||o(i,e.x2,e.y)||o(i,e.x,e.y2)||o(i,e.x2,e.y2)||o(e,i.x,i.y)||o(e,i.x2,i.y)||o(e,i.x,i.y2)||o(e,i.x2,i.y2)||(e.x<i.x2&&e.x>i.x||i.x<e.x2&&i.x>e.x)&&(e.y<i.y2&&e.y>i.y||i.y<e.y2&&i.y>e.y)},f.pathIntersection=function(e,i){return kt(e,i)},f.pathIntersectionNumber=function(e,i){return kt(e,i,1)},f.isPointInsidePath=function(e,i,o){var l=f.pathBBox(e);return f.isPointInsideBBox(l,i,o)&&kt(e,[["M",i,o],["H",l.x2+10]],1)%2==1},f._removedFactory=function(e){return function(){h("raphael.log",null,"Rapha├лl: you are calling to method тАЬ"+e+"тАЭ of removed object",e)}};var Ze=f.pathBBox=function(e){var i=Ue(e);if(i.bbox)return qe(i.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var o,l=0,p=0,b=[],A=[],S=0,R=(e=St(e)).length;S<R;S++)if((o=e[S])[0]=="M")l=o[1],p=o[2],b.push(l),A.push(p);else{var z=Mt(l,p,o[1],o[2],o[3],o[4],o[5],o[6]);b=b[V](z.min.x,z.max.x),A=A[V](z.min.y,z.max.y),l=o[5],p=o[6]}var J=j[$](0,b),ae=j[$](0,A),K=ke[$](0,b),Y=ke[$](0,A),te=K-J,ce=Y-ae,ne={x:J,y:ae,x2:K,y2:Y,width:te,height:ce,cx:J+te/2,cy:ae+ce/2};return i.bbox=qe(ne),ne},He=function(e){var i=qe(e);return i.toString=f._path2string,i},Zt=f._pathToRelative=function(e){var i=Ue(e);if(i.rel)return He(i.rel);f.is(e,re)&&f.is(e&&e[0],re)||(e=f.parsePathString(e));var o=[],l=0,p=0,b=0,A=0,S=0;e[0][0]=="M"&&(b=l=e[0][1],A=p=e[0][2],S++,o.push(["M",l,p]));for(var R=S,z=e.length;R<z;R++){var J=o[R]=[],ae=e[R];if(ae[0]!=be.call(ae[0]))switch(J[0]=be.call(ae[0]),J[0]){case"a":J[1]=ae[1],J[2]=ae[2],J[3]=ae[3],J[4]=ae[4],J[5]=ae[5],J[6]=+(ae[6]-l).toFixed(3),J[7]=+(ae[7]-p).toFixed(3);break;case"v":J[1]=+(ae[1]-p).toFixed(3);break;case"m":b=ae[1],A=ae[2];default:for(var K=1,Y=ae.length;K<Y;K++)J[K]=+(ae[K]-(K%2?l:p)).toFixed(3)}else{J=o[R]=[],ae[0]=="m"&&(b=ae[1]+l,A=ae[2]+p);for(var te=0,ce=ae.length;te<ce;te++)o[R][te]=ae[te]}var ne=o[R].length;switch(o[R][0]){case"z":l=b,p=A;break;case"h":l+=+o[R][ne-1];break;case"v":p+=+o[R][ne-1];break;default:l+=+o[R][ne-2],p+=+o[R][ne-1]}}return o.toString=f._path2string,i.rel=He(o),o},ft=f._pathToAbsolute=function(e){var i=Ue(e);if(i.abs)return He(i.abs);if(f.is(e,re)&&f.is(e&&e[0],re)||(e=f.parsePathString(e)),!e||!e.length)return[["M",0,0]];var o=[],l=0,p=0,b=0,A=0,S=0;e[0][0]=="M"&&(b=l=+e[0][1],A=p=+e[0][2],S++,o[0]=["M",l,p]);for(var R,z,J=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z",ae=S,K=e.length;ae<K;ae++){if(o.push(R=[]),(z=e[ae])[0]!=g.call(z[0]))switch(R[0]=g.call(z[0]),R[0]){case"A":R[1]=z[1],R[2]=z[2],R[3]=z[3],R[4]=z[4],R[5]=z[5],R[6]=+(z[6]+l),R[7]=+(z[7]+p);break;case"V":R[1]=+z[1]+p;break;case"H":R[1]=+z[1]+l;break;case"R":for(var Y=[l,p][V](z.slice(1)),te=2,ce=Y.length;te<ce;te++)Y[te]=+Y[te]+l,Y[++te]=+Y[te]+p;o.pop(),o=o[V](ut(Y,J));break;case"M":b=+z[1]+l,A=+z[2]+p;default:for(te=1,ce=z.length;te<ce;te++)R[te]=+z[te]+(te%2?l:p)}else if(z[0]=="R")Y=[l,p][V](z.slice(1)),o.pop(),o=o[V](ut(Y,J)),R=["R"][V](z.slice(-2));else for(var ne=0,Q=z.length;ne<Q;ne++)R[ne]=z[ne];switch(R[0]){case"Z":l=b,p=A;break;case"H":l=R[1];break;case"V":p=R[1];break;case"M":b=R[R.length-2],A=R[R.length-1];default:l=R[R.length-2],p=R[R.length-1]}}return o.toString=f._path2string,i.abs=He(o),o},pt=function(e,i,o,l){return[e,i,o,l,o,l]},et=function(e,i,o,l,p,b){return[1/3*e+2/3*o,1/3*i+2/3*l,1/3*p+2/3*o,1/3*b+2/3*l,p,b]},Tt=function(e,i,o,l,p,b,A,S,R,z){var J,ae=120*Z/180,K=Z/180*(+p||0),Y=[],te=Fe(function(v1,y1,zt){return{x:v1*se.cos(zt)-y1*se.sin(zt),y:v1*se.sin(zt)+y1*se.cos(zt)}});if(z)Pe=z[0],Be=z[1],he=z[2],Le=z[3];else{e=(J=te(e,i,-K)).x,i=J.y,S=(J=te(S,R,-K)).x,R=J.y;var ce=(e-S)/2,ne=(i-R)/2,Q=ce*ce/(o*o)+ne*ne/(l*l);Q>1&&(o*=Q=se.sqrt(Q),l*=Q);var _e=o*o,ue=l*l,ge=(b==A?-1:1)*se.sqrt(Ce((_e*ue-_e*ne*ne-ue*ce*ce)/(_e*ne*ne+ue*ce*ce))),he=ge*o*ne/l+(e+S)/2,Le=ge*-l*ce/o+(i+R)/2,Pe=se.asin(((i-Le)/l).toFixed(9)),Be=se.asin(((R-Le)/l).toFixed(9));(Pe=e<he?Z-Pe:Pe)<0&&(Pe=2*Z+Pe),(Be=S<he?Z-Be:Be)<0&&(Be=2*Z+Be),A&&Pe>Be&&(Pe-=2*Z),!A&&Be>Pe&&(Be-=2*Z)}var gt=Be-Pe;if(Ce(gt)>ae){var Et=Be,Ve=S,Ye=R;Be=Pe+ae*(A&&Be>Pe?1:-1),S=he+o*se.cos(Be),R=Le+l*se.sin(Be),Y=Tt(S,R,o,l,p,0,A,Ve,Ye,[Be,Et,he,Le])}gt=Be-Pe;var vt=se.cos(Pe),yt=se.sin(Pe),Dt=se.cos(Be),Qe=se.sin(Be),ot=se.tan(gt/4),qt=4/3*o*ot,d1=4/3*l*ot,f1=[e,i],xt=[e+qt*yt,i-d1*vt],p1=[S+qt*Qe,R-d1*Dt],m1=[S,R];if(xt[0]=2*f1[0]-xt[0],xt[1]=2*f1[1]-xt[1],z)return[xt,p1,m1][V](Y);for(var g1=[],nt=0,$1=(Y=[xt,p1,m1][V](Y).join()[me](",")).length;nt<$1;nt++)g1[nt]=nt%2?te(Y[nt-1],Y[nt],K).y:te(Y[nt],Y[nt+1],K).x;return g1},rt=function(e,i,o,l,p,b,A,S,R){var z=1-R;return{x:Se(z,3)*e+3*Se(z,2)*R*o+3*z*R*R*p+Se(R,3)*A,y:Se(z,3)*i+3*Se(z,2)*R*l+3*z*R*R*b+Se(R,3)*S}},Mt=Fe(function(e,i,o,l,p,b,A,S){var R,z=p-2*o+e-(A-2*p+o),J=2*(o-e)-2*(p-o),ae=e-o,K=(-J+se.sqrt(J*J-4*z*ae))/2/z,Y=(-J-se.sqrt(J*J-4*z*ae))/2/z,te=[i,S],ce=[e,A];return Ce(K)>"1e12"&&(K=.5),Ce(Y)>"1e12"&&(Y=.5),K>0&&K<1&&(R=rt(e,i,o,l,p,b,A,S,K),ce.push(R.x),te.push(R.y)),Y>0&&Y<1&&(R=rt(e,i,o,l,p,b,A,S,Y),ce.push(R.x),te.push(R.y)),z=b-2*l+i-(S-2*b+l),ae=i-l,K=(-(J=2*(l-i)-2*(b-l))+se.sqrt(J*J-4*z*ae))/2/z,Y=(-J-se.sqrt(J*J-4*z*ae))/2/z,Ce(K)>"1e12"&&(K=.5),Ce(Y)>"1e12"&&(Y=.5),K>0&&K<1&&(R=rt(e,i,o,l,p,b,A,S,K),ce.push(R.x),te.push(R.y)),Y>0&&Y<1&&(R=rt(e,i,o,l,p,b,A,S,Y),ce.push(R.x),te.push(R.y)),{min:{x:j[$](0,ce),y:j[$](0,te)},max:{x:ke[$](0,ce),y:ke[$](0,te)}}}),St=f._path2curve=Fe(function(e,i){var o=!i&&Ue(e);if(!i&&o.curve)return He(o.curve);for(var l=ft(e),p=i&&ft(i),b={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},A={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},S=function(ge,he,Le){var Pe,Be;if(!ge)return["C",he.x,he.y,he.x,he.y,he.x,he.y];switch(!(ge[0]in{T:1,Q:1})&&(he.qx=he.qy=null),ge[0]){case"M":he.X=ge[1],he.Y=ge[2];break;case"A":ge=["C"][V](Tt[$](0,[he.x,he.y][V](ge.slice(1))));break;case"S":Le=="C"||Le=="S"?(Pe=2*he.x-he.bx,Be=2*he.y-he.by):(Pe=he.x,Be=he.y),ge=["C",Pe,Be][V](ge.slice(1));break;case"T":Le=="Q"||Le=="T"?(he.qx=2*he.x-he.qx,he.qy=2*he.y-he.qy):(he.qx=he.x,he.qy=he.y),ge=["C"][V](et(he.x,he.y,he.qx,he.qy,ge[1],ge[2]));break;case"Q":he.qx=ge[1],he.qy=ge[2],ge=["C"][V](et(he.x,he.y,ge[1],ge[2],ge[3],ge[4]));break;case"L":ge=["C"][V](pt(he.x,he.y,ge[1],ge[2]));break;case"H":ge=["C"][V](pt(he.x,he.y,ge[1],he.y));break;case"V":ge=["C"][V](pt(he.x,he.y,he.x,ge[1]));break;case"Z":ge=["C"][V](pt(he.x,he.y,he.X,he.Y))}return ge},R=function(ge,he){if(ge[he].length>7){ge[he].shift();for(var Le=ge[he];Le.length;)J[he]="A",p&&(ae[he]="A"),ge.splice(he++,0,["C"][V](Le.splice(0,6)));ge.splice(he,1),ce=ke(l.length,p&&p.length||0)}},z=function(ge,he,Le,Pe,Be){ge&&he&&ge[Be][0]=="M"&&he[Be][0]!="M"&&(he.splice(Be,0,["M",Pe.x,Pe.y]),Le.bx=0,Le.by=0,Le.x=ge[Be][1],Le.y=ge[Be][2],ce=ke(l.length,p&&p.length||0))},J=[],ae=[],K="",Y="",te=0,ce=ke(l.length,p&&p.length||0);te<ce;te++){l[te]&&(K=l[te][0]),K!="C"&&(J[te]=K,te&&(Y=J[te-1])),l[te]=S(l[te],b,Y),J[te]!="A"&&K=="C"&&(J[te]="C"),R(l,te),p&&(p[te]&&(K=p[te][0]),K!="C"&&(ae[te]=K,te&&(Y=ae[te-1])),p[te]=S(p[te],A,Y),ae[te]!="A"&&K=="C"&&(ae[te]="C"),R(p,te)),z(l,p,b,A,te),z(p,l,A,b,te);var ne=l[te],Q=p&&p[te],_e=ne.length,ue=p&&Q.length;b.x=ne[_e-2],b.y=ne[_e-1],b.bx=u(ne[_e-4])||b.x,b.by=u(ne[_e-3])||b.y,A.bx=p&&(u(Q[ue-4])||A.x),A.by=p&&(u(Q[ue-3])||A.y),A.x=p&&Q[ue-2],A.y=p&&Q[ue-1]}return p||(o.curve=He(l)),p?[l,p]:l},null,He),It=(f._parseDots=Fe(function(e){for(var i=[],o=0,l=e.length;o<l;o++){var p={},b=e[o].match(/^([^:]*):?([\d\.]*)/);if(p.color=f.getRGB(b[1]),p.color.error)return null;p.opacity=p.color.opacity,p.color=p.color.hex,b[2]&&(p.offset=b[2]+"%"),i.push(p)}for(o=1,l=i.length-1;o<l;o++)if(!i[o].offset){for(var A=u(i[o-1].offset||0),S=0,R=o+1;R<l;R++)if(i[R].offset){S=i[R].offset;break}S||(S=100,R=l);for(var z=((S=u(S))-A)/(R-o+1);o<R;o++)A+=z,i[o].offset=A+"%"}return i}),f._tear=function(e,i){e==i.top&&(i.top=e.prev),e==i.bottom&&(i.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),I1=(f._tofront=function(e,i){i.top!==e&&(It(e,i),e.next=null,e.prev=i.top,i.top.next=e,i.top=e)},f._toback=function(e,i){i.bottom!==e&&(It(e,i),e.next=i.bottom,e.prev=null,i.bottom.prev=e,i.bottom=e)},f._insertafter=function(e,i,o){It(e,o),i==o.top&&(o.top=e),i.next&&(i.next.prev=e),e.next=i.next,e.prev=i,i.next=e},f._insertbefore=function(e,i,o){It(e,o),i==o.bottom&&(o.bottom=e),i.prev&&(i.prev.next=e),e.prev=i.prev,i.prev=e,e.next=i},f.toMatrix=function(e,i){var o=Ze(e),l={_:{transform:fe},getBBox:function(){return o}};return e1(l,i),l.matrix}),e1=(f.transformPath=function(e,i){return Ne(e,I1(e,i))},f._extractTransform=function(e,i){if(i==null)return e._.transform;i=W(i).replace(/\.{3}|\u2026/g,e._.transform||fe);var o,l,p=f.parseTransformString(i),b=0,A=1,S=1,R=e._,z=new it;if(R.transform=p||[],p)for(var J=0,ae=p.length;J<ae;J++){var K,Y,te,ce,ne,Q=p[J],_e=Q.length,ue=W(Q[0]).toLowerCase(),ge=Q[0]!=ue,he=ge?z.invert():0;ue=="t"&&_e==3?ge?(K=he.x(0,0),Y=he.y(0,0),te=he.x(Q[1],Q[2]),ce=he.y(Q[1],Q[2]),z.translate(te-K,ce-Y)):z.translate(Q[1],Q[2]):ue=="r"?_e==2?(ne=ne||e.getBBox(1),z.rotate(Q[1],ne.x+ne.width/2,ne.y+ne.height/2),b+=Q[1]):_e==4&&(ge?(te=he.x(Q[2],Q[3]),ce=he.y(Q[2],Q[3]),z.rotate(Q[1],te,ce)):z.rotate(Q[1],Q[2],Q[3]),b+=Q[1]):ue=="s"?_e==2||_e==3?(ne=ne||e.getBBox(1),z.scale(Q[1],Q[_e-1],ne.x+ne.width/2,ne.y+ne.height/2),A*=Q[1],S*=Q[_e-1]):_e==5&&(ge?(te=he.x(Q[3],Q[4]),ce=he.y(Q[3],Q[4]),z.scale(Q[1],Q[2],te,ce)):z.scale(Q[1],Q[2],Q[3],Q[4]),A*=Q[1],S*=Q[2]):ue=="m"&&_e==7&&z.add(Q[1],Q[2],Q[3],Q[4],Q[5],Q[6]),R.dirtyT=1,e.matrix=z}e.matrix=z,R.sx=A,R.sy=S,R.deg=b,R.dx=o=z.e,R.dy=l=z.f,A==1&&S==1&&!b&&R.bbox?(R.bbox.x+=+o,R.bbox.y+=+l):R.dirtyT=1}),t1=function(e){var i=e[0];switch(i.toLowerCase()){case"t":return[i,0,0];case"m":return[i,1,0,0,1,0,0];case"r":return e.length==4?[i,0,e[2],e[3]]:[i,0];case"s":return e.length==5?[i,1,1,e[3],e[4]]:e.length==3?[i,1,1]:[i,1]}},D1=f._equaliseTransform=function(e,i){i=W(i).replace(/\.{3}|\u2026/g,e),e=f.parseTransformString(e)||[],i=f.parseTransformString(i)||[];for(var o,l,p,b,A=ke(e.length,i.length),S=[],R=[],z=0;z<A;z++){if(p=e[z]||t1(i[z]),b=i[z]||t1(p),p[0]!=b[0]||p[0].toLowerCase()=="r"&&(p[2]!=b[2]||p[3]!=b[3])||p[0].toLowerCase()=="s"&&(p[3]!=b[3]||p[4]!=b[4]))return;for(S[z]=[],R[z]=[],o=0,l=ke(p.length,b.length);o<l;o++)o in p&&(S[z][o]=p[o]),o in b&&(R[z][o]=b[o])}return{from:S,to:R}};function it(e,i,o,l,p,b){e!=null?(this.a=+e,this.b=+i,this.c=+o,this.d=+l,this.e=+p,this.f=+b):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}f._getContainer=function(e,i,o,l){var p;if((p=l!=null||f.is(e,"object")?e:F.doc.getElementById(e))!=null)return p.tagName?i==null?{container:p,width:p.style.pixelWidth||p.offsetWidth,height:p.style.pixelHeight||p.offsetHeight}:{container:p,width:i,height:o}:{container:1,x:e,y:i,width:o,height:l}},f.pathToRelative=Zt,f._engine={},f.path2curve=St,f.matrix=function(e,i,o,l,p,b){return new it(e,i,o,l,p,b)},function(e){function i(l){return l[0]*l[0]+l[1]*l[1]}function o(l){var p=se.sqrt(i(l));l[0]&&(l[0]/=p),l[1]&&(l[1]/=p)}e.add=function(l,p,b,A,S,R){var z,J,ae,K,Y=[[],[],[]],te=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],ce=[[l,b,S],[p,A,R],[0,0,1]];for(l&&l instanceof it&&(ce=[[l.a,l.c,l.e],[l.b,l.d,l.f],[0,0,1]]),z=0;z<3;z++)for(J=0;J<3;J++){for(K=0,ae=0;ae<3;ae++)K+=te[z][ae]*ce[ae][J];Y[z][J]=K}this.a=Y[0][0],this.b=Y[1][0],this.c=Y[0][1],this.d=Y[1][1],this.e=Y[0][2],this.f=Y[1][2]},e.invert=function(){var l=this,p=l.a*l.d-l.b*l.c;return new it(l.d/p,-l.b/p,-l.c/p,l.a/p,(l.c*l.f-l.d*l.e)/p,(l.b*l.e-l.a*l.f)/p)},e.clone=function(){return new it(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(l,p){this.add(1,0,0,1,l,p)},e.scale=function(l,p,b,A){p==null&&(p=l),(b||A)&&this.add(1,0,0,1,b,A),this.add(l,0,0,p,0,0),(b||A)&&this.add(1,0,0,1,-b,-A)},e.rotate=function(l,p,b){l=f.rad(l),p=p||0,b=b||0;var A=+se.cos(l).toFixed(9),S=+se.sin(l).toFixed(9);this.add(A,S,-S,A,p,b),this.add(1,0,0,1,-p,-b)},e.x=function(l,p){return l*this.a+p*this.c+this.e},e.y=function(l,p){return l*this.b+p*this.d+this.f},e.get=function(l){return+this[W.fromCharCode(97+l)].toFixed(4)},e.toString=function(){return f.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var l={};l.dx=this.e,l.dy=this.f;var p=[[this.a,this.c],[this.b,this.d]];l.scalex=se.sqrt(i(p[0])),o(p[0]),l.shear=p[0][0]*p[1][0]+p[0][1]*p[1][1],p[1]=[p[1][0]-p[0][0]*l.shear,p[1][1]-p[0][1]*l.shear],l.scaley=se.sqrt(i(p[1])),o(p[1]),l.shear/=l.scaley;var b=-p[0][1],A=p[1][1];return A<0?(l.rotate=f.deg(se.acos(A)),b<0&&(l.rotate=360-l.rotate)):l.rotate=f.deg(se.asin(b)),l.isSimple=!(+l.shear.toFixed(9)||l.scalex.toFixed(9)!=l.scaley.toFixed(9)&&l.rotate),l.isSuperSimple=!+l.shear.toFixed(9)&&l.scalex.toFixed(9)==l.scaley.toFixed(9)&&!l.rotate,l.noRotation=!+l.shear.toFixed(9)&&!l.rotate,l},e.toTransformString=function(l){var p=l||this[me]();return p.isSimple?(p.scalex=+p.scalex.toFixed(4),p.scaley=+p.scaley.toFixed(4),p.rotate=+p.rotate.toFixed(4),(p.dx||p.dy?"t"+[p.dx,p.dy]:fe)+(p.scalex!=1||p.scaley!=1?"s"+[p.scalex,p.scaley,0,0]:fe)+(p.rotate?"r"+[p.rotate,0,0]:fe)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(it.prototype);for(var q1=function(){this.returnValue=!1},z1=function(){return this.originalEvent.preventDefault()},F1=function(){this.cancelBubble=!0},O1=function(){return this.originalEvent.stopPropagation()},n1=function(e){var i=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,o=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft;return{x:e.clientX+o,y:e.clientY+i}},H1=F.doc.addEventListener?function(e,i,o,l){var p=function(A){var S=n1(A);return o.call(l,A,S.x,S.y)};if(e.addEventListener(i,p,!1),le&&q[i]){var b=function(A){for(var S=n1(A),R=A,z=0,J=A.targetTouches&&A.targetTouches.length;z<J;z++)if(A.targetTouches[z].target==e){(A=A.targetTouches[z]).originalEvent=R,A.preventDefault=z1,A.stopPropagation=O1;break}return o.call(l,A,S.x,S.y)};e.addEventListener(q[i],b,!1)}return function(){return e.removeEventListener(i,p,!1),le&&q[i]&&e.removeEventListener(q[i],b,!1),!0}}:F.doc.attachEvent?function(e,i,o,l){var p=function(b){b=b||F.win.event;var A=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,S=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft,R=b.clientX+S,z=b.clientY+A;return b.preventDefault=b.preventDefault||q1,b.stopPropagation=b.stopPropagation||F1,o.call(l,b,R,z)};return e.attachEvent("on"+i,p),function(){return e.detachEvent("on"+i,p),!0}}:void 0,tt=[],Vt=function(e){for(var i,o=e.clientX,l=e.clientY,p=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,b=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft,A=tt.length;A--;){if(i=tt[A],le&&e.touches){for(var S,R=e.touches.length;R--;)if((S=e.touches[R]).identifier==i.el._drag.id){o=S.clientX,l=S.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var z,J=i.el.node,ae=J.nextSibling,K=J.parentNode,Y=J.style.display;F.win.opera&&K.removeChild(J),J.style.display="none",z=i.el.paper.getElementByPoint(o,l),J.style.display=Y,F.win.opera&&(ae?K.insertBefore(J,ae):K.appendChild(J)),z&&h("raphael.drag.over."+i.el.id,i.el,z),o+=b,l+=p,h("raphael.drag.move."+i.el.id,i.move_scope||i.el,o-i.el._drag.x,l-i.el._drag.y,o,l,e)}},$t=function(e){f.unmousemove(Vt).unmouseup($t);for(var i,o=tt.length;o--;)(i=tt[o]).el._drag={},h("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,e);tt=[]},Ie=f.el={},r1=pe.length;r1--;)(function(e){f[e]=Ie[e]=function(i,o){return f.is(i,"function")&&(this.events=this.events||[],this.events.push({name:e,f:i,unbind:H1(this.shape||this.node||F.doc,e,i,o||this)})),this},f["un"+e]=Ie["un"+e]=function(i){for(var o=this.events||[],l=o.length;l--;)o[l].name!=e||!f.is(i,"undefined")&&o[l].f!=i||(o[l].unbind(),o.splice(l,1),!o.length&&delete this.events);return this}})(pe[r1]);Ie.data=function(e,i){var o=ye[this.id]=ye[this.id]||{};if(arguments.length==0)return o;if(arguments.length==1){if(f.is(e,"object")){for(var l in e)e[E](l)&&this.data(l,e[l]);return this}return h("raphael.data.get."+this.id,this,o[e],e),o[e]}return o[e]=i,h("raphael.data.set."+this.id,this,i,e),this},Ie.removeData=function(e){return e==null?delete ye[this.id]:ye[this.id]&&delete ye[this.id][e],this},Ie.getData=function(){return qe(ye[this.id]||{})},Ie.hover=function(e,i,o,l){return this.mouseover(e,o).mouseout(i,l||o)},Ie.unhover=function(e,i){return this.unmouseover(e).unmouseout(i)};var mt=[];Ie.drag=function(e,i,o,l,p,b){function A(S){(S.originalEvent||S).preventDefault();var R=S.clientX,z=S.clientY,J=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,ae=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft;if(this._drag.id=S.identifier,le&&S.touches){for(var K,Y=S.touches.length;Y--;)if(K=S.touches[Y],this._drag.id=K.identifier,K.identifier==this._drag.id){R=K.clientX,z=K.clientY;break}}this._drag.x=R+ae,this._drag.y=z+J,!tt.length&&f.mousemove(Vt).mouseup($t),tt.push({el:this,move_scope:l,start_scope:p,end_scope:b}),i&&h.on("raphael.drag.start."+this.id,i),e&&h.on("raphael.drag.move."+this.id,e),o&&h.on("raphael.drag.end."+this.id,o),h("raphael.drag.start."+this.id,p||l||this,this._drag.x,this._drag.y,S)}return this._drag={},mt.push({el:this,start:A}),this.mousedown(A),this},Ie.onDragOver=function(e){e?h.on("raphael.drag.over."+this.id,e):h.unbind("raphael.drag.over."+this.id)},Ie.undrag=function(){for(var e=mt.length;e--;)mt[e].el==this&&(this.unmousedown(mt[e].start),mt.splice(e,1),h.unbind("raphael.drag.*."+this.id));!mt.length&&f.unmousemove(Vt).unmouseup($t),tt=[]},L.circle=function(e,i,o){var l=f._engine.circle(this,e||0,i||0,o||0);return this.__set__&&this.__set__.push(l),l},L.rect=function(e,i,o,l,p){var b=f._engine.rect(this,e||0,i||0,o||0,l||0,p||0);return this.__set__&&this.__set__.push(b),b},L.ellipse=function(e,i,o,l){var p=f._engine.ellipse(this,e||0,i||0,o||0,l||0);return this.__set__&&this.__set__.push(p),p},L.path=function(e){e&&!f.is(e,"string")&&!f.is(e[0],re)&&(e+=fe);var i=f._engine.path(f.format[$](f,arguments),this);return this.__set__&&this.__set__.push(i),i},L.image=function(e,i,o,l,p){var b=f._engine.image(this,e||"about:blank",i||0,o||0,l||0,p||0);return this.__set__&&this.__set__.push(b),b},L.text=function(e,i,o){var l=f._engine.text(this,e||0,i||0,W(o));return this.__set__&&this.__set__.push(l),l},L.set=function(e){!f.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var i=new Pt(e);return this.__set__&&this.__set__.push(i),i.paper=this,i.type="set",i},L.setStart=function(e){this.__set__=e||this.set()},L.setFinish=function(e){var i=this.__set__;return delete this.__set__,i},L.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},L.setSize=function(e,i){return f._engine.setSize.call(this,e,i)},L.setViewBox=function(e,i,o,l,p){return f._engine.setViewBox.call(this,e,i,o,l,p)},L.top=L.bottom=null,L.raphael=f;function i1(){return this.x+xe+this.y+xe+this.width+" ├Ч "+this.height}L.getElementByPoint=function(e,i){var o,l,p,b,A,S,R,z=this.canvas,J=F.doc.elementFromPoint(e,i);if(F.win.opera&&J.tagName=="svg"){var ae=(l=(o=z).getBoundingClientRect(),p=o.ownerDocument,b=p.body,A=p.documentElement,S=A.clientTop||b.clientTop||0,R=A.clientLeft||b.clientLeft||0,{y:l.top+(F.win.pageYOffset||A.scrollTop||b.scrollTop)-S,x:l.left+(F.win.pageXOffset||A.scrollLeft||b.scrollLeft)-R}),K=z.createSVGRect();K.x=e-ae.x,K.y=i-ae.y,K.width=K.height=1;var Y=z.getIntersectionList(K,null);Y.length&&(J=Y[Y.length-1])}if(!J)return null;for(;J.parentNode&&J!=z.parentNode&&!J.raphael;)J=J.parentNode;return J==this.canvas.parentNode&&(J=z),J=J&&J.raphael?this.getById(J.raphaelid):null},L.getElementsByBBox=function(e){var i=this.set();return this.forEach(function(o){f.isBBoxIntersect(o.getBBox(),e)&&i.push(o)}),i},L.getById=function(e){for(var i=this.bottom;i;){if(i.id==e)return i;i=i.next}return null},L.forEach=function(e,i){for(var o=this.bottom;o;){if(e.call(i,o)===!1)return this;o=o.next}return this},L.getElementsByPoint=function(e,i){var o=this.set();return this.forEach(function(l){l.isPointInside(e,i)&&o.push(l)}),o},Ie.isPointInside=function(e,i){var o=this.realPath=Te[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(o=f.transformPath(o,this.attr("transform"))),f.isPointInsidePath(o,e,i)},Ie.getBBox=function(e){if(this.removed)return{};var i=this._;return e?(!i.dirty&&i.bboxwt||(this.realPath=Te[this.type](this),i.bboxwt=Ze(this.realPath),i.bboxwt.toString=i1,i.dirty=0),i.bboxwt):((i.dirty||i.dirtyT||!i.bbox)&&(!i.dirty&&this.realPath||(i.bboxwt=0,this.realPath=Te[this.type](this)),i.bbox=Ze(Ne(this.realPath,this.matrix)),i.bbox.toString=i1,i.dirty=i.dirtyT=0),i.bbox)},Ie.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Ie.glow=function(e){if(this.type=="text")return null;var i={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity==null?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},o=i.width/2,l=this.paper,p=l.set(),b=this.realPath||Te[this.type](this);b=this.matrix?Ne(b,this.matrix):b;for(var A=1;A<o+1;A++)p.push(l.path(b).attr({stroke:i.color,fill:i.fill?i.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(i.width/o*A).toFixed(3),opacity:+(i.opacity/o).toFixed(3)}));return p.insertBefore(this).translate(i.offsetx,i.offsety)};var jt=function(e,i,o,l,p,b,A,S,R){return R==null?We(e,i,o,l,p,b,A,S):f.findDotsAtSegment(e,i,o,l,p,b,A,S,function(z,J,ae,K,Y,te,ce,ne,Q){if(!(Q<0||We(z,J,ae,K,Y,te,ce,ne)<Q)){var _e,ue=.5,ge=1-ue;for(_e=We(z,J,ae,K,Y,te,ce,ne,ge);Ce(_e-Q)>.01;)_e=We(z,J,ae,K,Y,te,ce,ne,ge+=(_e<Q?1:-1)*(ue/=2));return ge}}(e,i,o,l,p,b,A,S,R))},Ut=function(e,i){return function(o,l,p){for(var b,A,S,R,z,J="",ae={},K=0,Y=0,te=(o=St(o)).length;Y<te;Y++){if((S=o[Y])[0]=="M")b=+S[1],A=+S[2];else{if(K+(R=jt(b,A,S[1],S[2],S[3],S[4],S[5],S[6]))>l){if(i&&!ae.start){if(J+=["C"+(z=jt(b,A,S[1],S[2],S[3],S[4],S[5],S[6],l-K)).start.x,z.start.y,z.m.x,z.m.y,z.x,z.y],p)return J;ae.start=J,J=["M"+z.x,z.y+"C"+z.n.x,z.n.y,z.end.x,z.end.y,S[5],S[6]].join(),K+=R,b=+S[5],A=+S[6];continue}if(!e&&!i)return{x:(z=jt(b,A,S[1],S[2],S[3],S[4],S[5],S[6],l-K)).x,y:z.y,alpha:z.alpha}}K+=R,b=+S[5],A=+S[6]}J+=S.shift()+S}return ae.end=J,(z=e?K:i?ae:f.findDotsAtSegment(b,A,S[0],S[1],S[2],S[3],S[4],S[5],1)).alpha&&(z={x:z.x,y:z.y,alpha:z.alpha}),z}},s1=Ut(1),o1=Ut(),Gt=Ut(0,1);f.getTotalLength=s1,f.getPointAtLength=o1,f.getSubpath=function(e,i,o){if(this.getTotalLength(e)-o<1e-6)return Gt(e,i).end;var l=Gt(e,o,1);return i?Gt(l,i).end:l},Ie.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():s1(e)},Ie.getPointAtLength=function(e){var i=this.getPath();if(i)return o1(i,e)},Ie.getPath=function(){var e,i=f._getPath[this.type];if(this.type!="text"&&this.type!="set")return i&&(e=i(this)),e},Ie.getSubpath=function(e,i){var o=this.getPath();if(o)return f.getSubpath(o,e,i)};var $e=f.easing_formulas={linear:function(e){return e},"<":function(e){return Se(e,1.7)},">":function(e){return Se(e,.48)},"<>":function(e){var i=.48-e/1.04,o=se.sqrt(.1734+i*i),l=o-i,p=-o-i,b=Se(Ce(l),1/3)*(l<0?-1:1)+Se(Ce(p),1/3)*(p<0?-1:1)+.5;return 3*(1-b)*b*b+b*b*b},backIn:function(e){var i=1.70158;return e*e*((i+1)*e-i)},backOut:function(e){var i=1.70158;return(e-=1)*e*((i+1)*e+i)+1},elastic:function(e){return e==!!e?e:Se(2,-10*e)*se.sin(2*Z*(e-.075)/.3)+1},bounce:function(e){var i=7.5625,o=2.75;return e<1/o?i*e*e:e<2/o?i*(e-=1.5/o)*e+.75:e<2.5/o?i*(e-=2.25/o)*e+.9375:i*(e-=2.625/o)*e+.984375}};$e.easeIn=$e["ease-in"]=$e["<"],$e.easeOut=$e["ease-out"]=$e[">"],$e.easeInOut=$e["ease-in-out"]=$e["<>"],$e["back-in"]=$e.backIn,$e["back-out"]=$e.backOut;var Me=[],a1=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},Wt=function(){for(var e=+new Date,i=0;i<Me.length;i++){var o=Me[i];if(!o.el.removed&&!o.paused){var l,p,b=e-o.start,A=o.ms,S=o.easing,R=o.from,z=o.diff,J=o.to,ae=(o.t,o.el),K={},Y={};if(o.initstatus?(b=(o.initstatus*o.anim.top-o.prev)/(o.percent-o.prev)*A,o.status=o.initstatus,delete o.initstatus,o.stop&&Me.splice(i--,1)):o.status=(o.prev+(o.percent-o.prev)*(b/A))/o.anim.top,!(b<0))if(b<A){var te=S(b/A);for(var ce in R)if(R[E](ce)){switch(C[ce]){case X:l=+R[ce]+te*A*z[ce];break;case"colour":l="rgb("+[Xt(s(R[ce].r+te*A*z[ce].r)),Xt(s(R[ce].g+te*A*z[ce].g)),Xt(s(R[ce].b+te*A*z[ce].b))].join(",")+")";break;case"path":l=[];for(var ne=0,Q=R[ce].length;ne<Q;ne++){l[ne]=[R[ce][ne][0]];for(var _e=1,ue=R[ce][ne].length;_e<ue;_e++)l[ne][_e]=+R[ce][ne][_e]+te*A*z[ce][ne][_e];l[ne]=l[ne].join(xe)}l=l.join(xe);break;case"transform":if(z[ce].real)for(l=[],ne=0,Q=R[ce].length;ne<Q;ne++)for(l[ne]=[R[ce][ne][0]],_e=1,ue=R[ce][ne].length;_e<ue;_e++)l[ne][_e]=R[ce][ne][_e]+te*A*z[ce][ne][_e];else{var ge=function(Le){return+R[ce][Le]+te*A*z[ce][Le]};l=[["m",ge(0),ge(1),ge(2),ge(3),ge(4),ge(5)]]}break;case"csv":if(ce=="clip-rect")for(l=[],ne=4;ne--;)l[ne]=+R[ce][ne]+te*A*z[ce][ne];break;default:var he=[][V](R[ce]);for(l=[],ne=ae.paper.customAttributes[ce].length;ne--;)l[ne]=+he[ne]+te*A*z[ce][ne]}K[ce]=l}ae.attr(K),function(Le,Pe,Be){setTimeout(function(){h("raphael.anim.frame."+Le,Pe,Be)})}(ae.id,ae,o.anim)}else{if(function(Le,Pe,Be){setTimeout(function(){h("raphael.anim.frame."+Pe.id,Pe,Be),h("raphael.anim.finish."+Pe.id,Pe,Be),f.is(Le,"function")&&Le.call(Pe)})}(o.callback,ae,o.anim),ae.attr(J),Me.splice(i--,1),o.repeat>1&&!o.next){for(p in J)J[E](p)&&(Y[p]=o.totalOrigin[p]);o.el.attr(Y),At(o.anim,o.el,o.anim.percents[0],null,o.totalOrigin,o.repeat-1)}o.next&&!o.stop&&At(o.anim,o.el,o.next,null,o.totalOrigin,o.repeat)}}}Me.length&&a1(Wt)},Xt=function(e){return e>255?255:e<0?0:e};function V1(e,i,o,l,p,b){var A=3*i,S=3*(l-i)-A,R=1-A-S,z=3*o,J=3*(p-o)-z,ae=1-z-J;function K(Y){return((R*Y+S)*Y+A)*Y}return function(Y,te){var ce=function(ne,Q){var _e,ue,ge,he,Le,Pe;for(ge=ne,Pe=0;Pe<8;Pe++){if(he=K(ge)-ne,Ce(he)<Q)return ge;if(Ce(Le=(3*R*ge+2*S)*ge+A)<1e-6)break;ge-=he/Le}if(ue=1,(ge=ne)<(_e=0))return _e;if(ge>ue)return ue;for(;_e<ue;){if(he=K(ge),Ce(he-ne)<Q)return ge;ne>he?_e=ge:ue=ge,ge=(ue-_e)/2+_e}return ge}(Y,te);return((ae*ce+J)*ce+z)*ce}(e,1/(200*b))}function Je(e,i){var o=[],l={};if(this.ms=i,this.times=1,e){for(var p in e)e[E](p)&&(l[u(p)]=e[p],o.push(u(p)));o.sort(we)}this.anim=l,this.top=o[o.length-1],this.percents=o}function At(e,i,o,l,p,b){o=u(o);var A,S,R,z,J,ae,K=e.ms,Y={},te={},ce={};if(l)for(Q=0,_e=Me.length;Q<_e;Q++){var ne=Me[Q];if(ne.el.id==i.id&&ne.anim==e){ne.percent!=o?(Me.splice(Q,1),R=1):S=ne,i.attr(ne.totalOrigin);break}}else l=+te;for(var Q=0,_e=e.percents.length;Q<_e;Q++){if(e.percents[Q]==o||e.percents[Q]>l*e.top){o=e.percents[Q],J=e.percents[Q-1]||0,K=K/e.top*(o-J),z=e.percents[Q+1],A=e.anim[o];break}l&&i.attr(e.anim[e.percents[Q]])}if(A){if(S)S.initstatus=l,S.start=new Date-S.ms*l;else{for(var ue in A)if(A[E](ue)&&(C[E](ue)||i.paper.customAttributes[E](ue)))switch(Y[ue]=i.attr(ue),Y[ue]==null&&(Y[ue]=x[ue]),te[ue]=A[ue],C[ue]){case X:ce[ue]=(te[ue]-Y[ue])/K;break;case"colour":Y[ue]=f.getRGB(Y[ue]);var ge=f.getRGB(te[ue]);ce[ue]={r:(ge.r-Y[ue].r)/K,g:(ge.g-Y[ue].g)/K,b:(ge.b-Y[ue].b)/K};break;case"path":var he=St(Y[ue],te[ue]),Le=he[1];for(Y[ue]=he[0],ce[ue]=[],Q=0,_e=Y[ue].length;Q<_e;Q++){ce[ue][Q]=[0];for(var Pe=1,Be=Y[ue][Q].length;Pe<Be;Pe++)ce[ue][Q][Pe]=(Le[Q][Pe]-Y[ue][Q][Pe])/K}break;case"transform":var gt=i._,Et=D1(gt[ue],te[ue]);if(Et)for(Y[ue]=Et.from,te[ue]=Et.to,ce[ue]=[],ce[ue].real=!0,Q=0,_e=Y[ue].length;Q<_e;Q++)for(ce[ue][Q]=[Y[ue][Q][0]],Pe=1,Be=Y[ue][Q].length;Pe<Be;Pe++)ce[ue][Q][Pe]=(te[ue][Q][Pe]-Y[ue][Q][Pe])/K;else{var Ve=i.matrix||new it,Ye={_:{transform:gt.transform},getBBox:function(){return i.getBBox(1)}};Y[ue]=[Ve.a,Ve.b,Ve.c,Ve.d,Ve.e,Ve.f],e1(Ye,te[ue]),te[ue]=Ye._.transform,ce[ue]=[(Ye.matrix.a-Ve.a)/K,(Ye.matrix.b-Ve.b)/K,(Ye.matrix.c-Ve.c)/K,(Ye.matrix.d-Ve.d)/K,(Ye.matrix.e-Ve.e)/K,(Ye.matrix.f-Ve.f)/K]}break;case"csv":var vt=W(A[ue])[me](O),yt=W(Y[ue])[me](O);if(ue=="clip-rect")for(Y[ue]=yt,ce[ue]=[],Q=yt.length;Q--;)ce[ue][Q]=(vt[Q]-Y[ue][Q])/K;te[ue]=vt;break;default:for(vt=[][V](A[ue]),yt=[][V](Y[ue]),ce[ue]=[],Q=i.paper.customAttributes[ue].length;Q--;)ce[ue][Q]=((vt[Q]||0)-(yt[Q]||0))/K}var Dt=A.easing,Qe=f.easing_formulas[Dt];if(!Qe)if((Qe=W(Dt).match(r))&&Qe.length==5){var ot=Qe;Qe=function(qt){return V1(qt,+ot[1],+ot[2],+ot[3],+ot[4],K)}}else Qe=Ae;if(ne={anim:e,percent:o,timestamp:ae=A.start||e.start||+new Date,start:ae+(e.del||0),status:0,initstatus:l||0,stop:!1,ms:K,easing:Qe,from:Y,diff:ce,to:te,el:i,callback:A.callback,prev:J,next:z,repeat:b||e.times,origin:i.attr(),totalOrigin:p},Me.push(ne),l&&!S&&!R&&(ne.stop=!0,ne.start=new Date-K*l,Me.length==1))return Wt();R&&(ne.start=new Date-ne.ms*l),Me.length==1&&a1(Wt)}h("raphael.anim.start."+i.id,i,e)}}function l1(e){for(var i=0;i<Me.length;i++)Me[i].el.paper==e&&Me.splice(i--,1)}Ie.animateWith=function(e,i,o,l,p,b){if(this.removed)return b&&b.call(this),this;var A=o instanceof Je?o:f.animation(o,l,p,b);At(A,this,A.percents[0],null,this.attr());for(var S=0,R=Me.length;S<R;S++)if(Me[S].anim==i&&Me[S].el==e){Me[R-1].start=Me[S].start;break}return this},Ie.onAnimation=function(e){return e?h.on("raphael.anim.frame."+this.id,e):h.unbind("raphael.anim.frame."+this.id),this},Je.prototype.delay=function(e){var i=new Je(this.anim,this.ms);return i.times=this.times,i.del=+e||0,i},Je.prototype.repeat=function(e){var i=new Je(this.anim,this.ms);return i.del=this.del,i.times=se.floor(ke(e,0))||1,i},f.animation=function(e,i,o,l){if(e instanceof Je)return e;!f.is(o,"function")&&o||(l=l||o||null,o=null),e=Object(e),i=+i||0;var p,b,A={};for(b in e)e[E](b)&&u(b)!=b&&u(b)+"%"!=b&&(p=!0,A[b]=e[b]);if(p)return o&&(A.easing=o),l&&(A.callback=l),new Je({100:A},i);if(l){var S=0;for(var R in e){var z=d(R);e[E](R)&&z>S&&(S=z)}!e[S+="%"].callback&&(e[S].callback=l)}return new Je(e,i)},Ie.animate=function(e,i,o,l){if(this.removed)return l&&l.call(this),this;var p=e instanceof Je?e:f.animation(e,i,o,l);return At(p,this,p.percents[0],null,this.attr()),this},Ie.setTime=function(e,i){return e&&i!=null&&this.status(e,j(i,e.ms)/e.ms),this},Ie.status=function(e,i){var o,l,p=[],b=0;if(i!=null)return At(e,this,-1,j(i,1)),this;for(o=Me.length;b<o;b++)if((l=Me[b]).el.id==this.id&&(!e||l.anim==e)){if(e)return l.status;p.push({anim:l.anim,status:l.status})}return e?0:p},Ie.pause=function(e){for(var i=0;i<Me.length;i++)Me[i].el.id!=this.id||e&&Me[i].anim!=e||h("raphael.anim.pause."+this.id,this,Me[i].anim)!==!1&&(Me[i].paused=!0);return this},Ie.resume=function(e){for(var i=0;i<Me.length;i++)if(Me[i].el.id==this.id&&(!e||Me[i].anim==e)){var o=Me[i];h("raphael.anim.resume."+this.id,this,o.anim)!==!1&&(delete o.paused,this.status(o.anim,o.status))}return this},Ie.stop=function(e){for(var i=0;i<Me.length;i++)Me[i].el.id!=this.id||e&&Me[i].anim!=e||h("raphael.anim.stop."+this.id,this,Me[i].anim)!==!1&&Me.splice(i--,1);return this},h.on("raphael.remove",l1),h.on("raphael.clear",l1),Ie.toString=function(){return"Rapha├лlтАЩs object"};var c1,u1,st,h1,Pt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var i=0,o=e.length;i<o;i++)!e[i]||e[i].constructor!=Ie.constructor&&e[i].constructor!=Pt||(this[this.items.length]=this.items[this.items.length]=e[i],this.length++)},Oe=Pt.prototype;for(var Yt in Oe.push=function(){for(var e,i,o=0,l=arguments.length;o<l;o++)!(e=arguments[o])||e.constructor!=Ie.constructor&&e.constructor!=Pt||(this[i=this.items.length]=this.items[i]=e,this.length++);return this},Oe.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Oe.forEach=function(e,i){for(var o=0,l=this.items.length;o<l;o++)if(e.call(i,this.items[o],o)===!1)return this;return this},Ie)Ie[E](Yt)&&(Oe[Yt]=function(e){return function(){var i=arguments;return this.forEach(function(o){o[e][$](o,i)})}}(Yt));return Oe.attr=function(e,i){if(e&&f.is(e,re)&&f.is(e[0],"object"))for(var o=0,l=e.length;o<l;o++)this.items[o].attr(e[o]);else for(var p=0,b=this.items.length;p<b;p++)this.items[p].attr(e,i);return this},Oe.clear=function(){for(;this.length;)this.pop()},Oe.splice=function(e,i,o){e=e<0?ke(this.length+e,0):e,i=ke(0,j(this.length-e,i));var l,p=[],b=[],A=[];for(l=2;l<arguments.length;l++)A.push(arguments[l]);for(l=0;l<i;l++)b.push(this[e+l]);for(;l<this.length-e;l++)p.push(this[e+l]);var S=A.length;for(l=0;l<S+p.length;l++)this.items[e+l]=this[e+l]=l<S?A[l]:p[l-S];for(l=this.items.length=this.length-=i-S;this[l];)delete this[l++];return new Pt(b)},Oe.exclude=function(e){for(var i=0,o=this.length;i<o;i++)if(this[i]==e)return this.splice(i,1),!0},Oe.animate=function(e,i,o,l){(f.is(o,"function")||!o)&&(l=o||null);var p,b,A=this.items.length,S=A,R=this;if(!A)return this;l&&(b=function(){!--A&&l.call(R)}),o=f.is(o,"string")?o:b;var z=f.animation(e,i,o,b);for(p=this.items[--S].animate(z);S--;)this.items[S]&&!this.items[S].removed&&this.items[S].animateWith(p,z,z),this.items[S]&&!this.items[S].removed||A--;return this},Oe.insertAfter=function(e){for(var i=this.items.length;i--;)this.items[i].insertAfter(e);return this},Oe.getBBox=function(){for(var e=[],i=[],o=[],l=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();e.push(b.x),i.push(b.y),o.push(b.x+b.width),l.push(b.y+b.height)}return{x:e=j[$](0,e),y:i=j[$](0,i),x2:o=ke[$](0,o),y2:l=ke[$](0,l),width:o-e,height:l-i}},Oe.clone=function(e){e=this.paper.set();for(var i=0,o=this.items.length;i<o;i++)e.push(this.items[i].clone());return e},Oe.toString=function(){return"Rapha├лlтАШs set"},Oe.glow=function(e){var i=this.paper.set();return this.forEach(function(o,l){var p=o.glow(e);p!=null&&p.forEach(function(b,A){i.push(b)})}),i},Oe.isPointInside=function(e,i){var o=!1;return this.forEach(function(l){if(l.isPointInside(e,i))return o=!0,!1}),o},f.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var i={w:e.w,face:{},glyphs:{}},o=e.face["font-family"];for(var l in e.face)e.face[E](l)&&(i.face[l]=e.face[l]);if(this.fonts[o]?this.fonts[o].push(i):this.fonts[o]=[i],!e.svg){for(var p in i.face["units-per-em"]=d(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[E](p)){var b=e.glyphs[p];if(i.glyphs[p]={w:b.w,k:{},d:b.d&&"M"+b.d.replace(/[mlcxtrv]/g,function(S){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[S]||"M"})+"z"},b.k)for(var A in b.k)b[E](A)&&(i.glyphs[p].k[A]=b.k[A])}}return e},L.getFont=function(e,i,o,l){if(l=l||"normal",o=o||"normal",i=+i||{normal:400,bold:700,lighter:300,bolder:800}[i]||400,f.fonts){var p,b=f.fonts[e];if(!b){var A=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,fe)+"(\\s|$)","i");for(var S in f.fonts)if(f.fonts[E](S)&&A.test(S)){b=f.fonts[S];break}}if(b)for(var R=0,z=b.length;R<z&&((p=b[R]).face["font-weight"]!=i||p.face["font-style"]!=o&&p.face["font-style"]||p.face["font-stretch"]!=l);R++);return p}},L.print=function(e,i,o,l,p,b,A,S){b=b||"middle",A=ke(j(A||0,1),-1),S=ke(j(S||1,3),1);var R,z=W(o)[me](fe),J=0,ae=0,K=fe;if(f.is(l,"string")&&(l=this.getFont(l)),l){R=(p||16)/l.face["units-per-em"];for(var Y=l.face.bbox[me](O),te=+Y[0],ce=Y[3]-Y[1],ne=0,Q=+Y[1]+(b=="baseline"?ce+ +l.face.descent:ce/2),_e=0,ue=z.length;_e<ue;_e++){if(z[_e]==`
`)J=0,he=0,ae=0,ne+=ce*S;else{var ge=ae&&l.glyphs[z[_e-1]]||{},he=l.glyphs[z[_e]];J+=ae?(ge.w||l.w)+(ge.k&&ge.k[z[_e]]||0)+l.w*A:0,ae=1}he&&he.d&&(K+=f.transformPath(he.d,["t",J*R,ne*R,"s",R,R,te,Q,"t",(e-te)/R,(i-Q)/R]))}}return this.path(K).attr({fill:"#000",stroke:"none"})},L.add=function(e){if(f.is(e,"array"))for(var i,o=this.set(),l=0,p=e.length;l<p;l++)i=e[l]||{},I[E](i.type)&&o.push(this[i.type]().attr(i));return o},f.format=function(e,i){var o=f.is(i,re)?[0][V](i):arguments;return e&&f.is(e,"string")&&o.length-1&&(e=e.replace(M,function(l,p){return o[++p]==null?fe:o[p]})),e||fe},f.fullfill=(c1=/\{([^\}]+)\}/g,u1=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,i){return String(e).replace(c1,function(o,l){return function(p,b,A){var S=A;return b.replace(u1,function(R,z,J,ae,K){z=z||ae,S&&(z in S&&(S=S[z]),typeof S=="function"&&K&&(S=S()))}),S=(S==null||S==A?p:S)+""}(o,l,i)})}),f.ninja=function(){if(U.was)F.win.Raphael=U.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return f},f.st=Oe,h.on("raphael.DOMload",function(){w=!0}),(st=document).readyState==null&&st.addEventListener&&(st.addEventListener("DOMContentLoaded",h1=function(){st.removeEventListener("DOMContentLoaded",h1,!1),st.readyState="complete"},!1),st.readyState="loading"),function e(){/in/.test(st.readyState)?setTimeout(e,9):f.eve("raphael.DOMload")}(),f}.apply(P,T))===void 0||(k.exports=D)},function(k,P,m){var T,D;T=[m(0),m(3),m(4)],(D=function(h){return h}.apply(P,T))===void 0||(k.exports=D)},function(k,P,m){var T,D,h,f,w,L,O,I,M,E,F,U,ee,$;f="hasOwnProperty",w=/[\.\/]/,L=/\s*,\s*/,O=function(V,le){return V-le},I={n:{}},M=function(){for(var V=0,le=this.length;V<le;V++)if(this[V]!==void 0)return this[V]},E=function(){for(var V=this.length;--V;)if(this[V]!==void 0)return this[V]},F=Object.prototype.toString,U=String,ee=Array.isArray||function(V){return V instanceof Array||F.call(V)=="[object Array]"},($=function(V,le){var fe,xe=h,W=Array.prototype.slice.call(arguments,2),me=$.listeners(V),pe=0,q=[],be={},se=[],ke=D;se.firstDefined=M,se.lastDefined=E,D=V,h=0;for(var j=0,Ce=me.length;j<Ce;j++)"zIndex"in me[j]&&(q.push(me[j].zIndex),me[j].zIndex<0&&(be[me[j].zIndex]=me[j]));for(q.sort(O);q[pe]<0;)if(fe=be[q[pe++]],se.push(fe.apply(le,W)),h)return h=xe,se;for(j=0;j<Ce;j++)if("zIndex"in(fe=me[j]))if(fe.zIndex==q[pe]){if(se.push(fe.apply(le,W)),h)break;do if((fe=be[q[++pe]])&&se.push(fe.apply(le,W)),h)break;while(fe)}else be[fe.zIndex]=fe;else if(se.push(fe.apply(le,W)),h)break;return h=xe,D=ke,se})._events=I,$.listeners=function(V){var le,fe,xe,W,me,pe,q,be,se=ee(V)?V:V.split(w),ke=I,j=[ke],Ce=[];for(W=0,me=se.length;W<me;W++){for(be=[],pe=0,q=j.length;pe<q;pe++)for(fe=[(ke=j[pe].n)[se[W]],ke["*"]],xe=2;xe--;)(le=fe[xe])&&(be.push(le),Ce=Ce.concat(le.f||[]));j=be}return Ce},$.separator=function(V){V?(V="["+(V=U(V).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",w=new RegExp(V)):w=/[\.\/]/},$.on=function(V,le){if(typeof le!="function")return function(){};for(var fe=ee(V)?ee(V[0])?V:[V]:U(V).split(L),xe=0,W=fe.length;xe<W;xe++)(function(me){for(var pe,q=ee(me)?me:U(me).split(w),be=I,se=0,ke=q.length;se<ke;se++)be=(be=be.n).hasOwnProperty(q[se])&&be[q[se]]||(be[q[se]]={n:{}});for(be.f=be.f||[],se=0,ke=be.f.length;se<ke;se++)if(be.f[se]==le){pe=!0;break}!pe&&be.f.push(le)})(fe[xe]);return function(me){+me==+me&&(le.zIndex=+me)}},$.f=function(V){var le=[].slice.call(arguments,1);return function(){$.apply(null,[V,null].concat(le).concat([].slice.call(arguments,0)))}},$.stop=function(){h=1},$.nt=function(V){var le=ee(D)?D.join("."):D;return V?new RegExp("(?:\\.|\\/|^)"+V+"(?:\\.|\\/|$)").test(le):le},$.nts=function(){return ee(D)?D:D.split(w)},$.off=$.unbind=function(V,le){if(V){var fe=ee(V)?ee(V[0])?V:[V]:U(V).split(L);if(fe.length>1)for(var xe=0,W=fe.length;xe<W;xe++)$.off(fe[xe],le);else{fe=ee(V)?V:U(V).split(w);var me,pe,q,be,se,ke=[I];for(xe=0,W=fe.length;xe<W;xe++)for(be=0;be<ke.length;be+=q.length-2){if(q=[be,1],me=ke[be].n,fe[xe]!="*")me[fe[xe]]&&q.push(me[fe[xe]]);else for(pe in me)me[f](pe)&&q.push(me[pe]);ke.splice.apply(ke,q)}for(xe=0,W=ke.length;xe<W;xe++)for(me=ke[xe];me.n;){if(le){if(me.f){for(be=0,se=me.f.length;be<se;be++)if(me.f[be]==le){me.f.splice(be,1);break}!me.f.length&&delete me.f}for(pe in me.n)if(me.n[f](pe)&&me.n[pe].f){var j=me.n[pe].f;for(be=0,se=j.length;be<se;be++)if(j[be]==le){j.splice(be,1);break}!j.length&&delete me.n[pe].f}}else for(pe in delete me.f,me.n)me.n[f](pe)&&me.n[pe].f&&delete me.n[pe].f;me=me.n}}}else $._events=I={n:{}}},$.once=function(V,le){var fe=function(){return $.off(V,fe),le.apply(this,arguments)};return $.on(V,fe)},$.version="0.5.0",$.toString=function(){return"You are running Eve 0.5.0"},k.exports?k.exports=$:(T=function(){return $}.apply(P,[]))===void 0||(k.exports=T)},function(k,P,m){var T,D;T=[m(0)],(D=function(h){if(!h||h.svg){var f="hasOwnProperty",w=String,L=parseFloat,O=parseInt,I=Math,M=I.max,E=I.abs,F=I.pow,U=/[, ]+/,ee=h.eve,$="",V=" ",le="http://www.w3.org/1999/xlink",fe={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},xe={};h.toString=function(){return`Your browser supports SVG.
You are running Rapha├лl `+this.version};var W=function(t,n){if(n)for(var r in typeof t=="string"&&(t=W(t)),n)n[f](r)&&(r.substring(0,6)=="xlink:"?t.setAttributeNS(le,r.substring(6),w(n[r])):t.setAttribute(r,w(n[r])));else(t=h._g.doc.createElementNS("http://www.w3.org/2000/svg",t)).style&&(t.style.webkitTapHighlightColor="rgba(0,0,0,0)");return t},me=function(t,n){var r="linear",s=t.id+n,u=.5,d=.5,g=t.node,x=t.paper,C=g.style,B=h._g.doc.getElementById(s);if(!B){if(n=(n=w(n).replace(h._radial_gradient,function(we,Ae,ve){if(r="radial",Ae&&ve){u=L(Ae);var Ee=2*((d=L(ve))>.5)-1;F(u-.5,2)+F(d-.5,2)>.25&&(d=I.sqrt(.25-F(u-.5,2))*Ee+.5)&&d!=.5&&(d=d.toFixed(5)-1e-5*Ee)}return $})).split(/\s*\-\s*/),r=="linear"){var H=n.shift();if(H=-L(H),isNaN(H))return null;var G=[0,0,I.cos(h.rad(H)),I.sin(h.rad(H))],ie=1/(M(E(G[2]),E(G[3]))||1);G[2]*=ie,G[3]*=ie,G[2]<0&&(G[0]=-G[2],G[2]=0),G[3]<0&&(G[1]=-G[3],G[3]=0)}var oe=h._parseDots(n);if(!oe)return null;if(s=s.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&s!=t.gradient.id&&(x.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){B=W(r+"Gradient",{id:s}),t.gradient=B,W(B,r=="radial"?{fx:u,fy:d}:{x1:G[0],y1:G[1],x2:G[2],y2:G[3],gradientTransform:t.matrix.invert()}),x.defs.appendChild(B);for(var de=0,ye=oe.length;de<ye;de++)B.appendChild(W("stop",{offset:oe[de].offset?oe[de].offset:de?"100%":"0%","stop-color":oe[de].color||"#fff","stop-opacity":isFinite(oe[de].opacity)?oe[de].opacity:1}))}}return W(g,{fill:pe(s),opacity:1,"fill-opacity":1}),C.fill=$,C.opacity=1,C.fillOpacity=1,1},pe=function(t){if((n=document.documentMode)&&(n===9||n===10))return"url('#"+t+"')";var n,r=document.location;return"url('"+(r.protocol+"//"+r.host+r.pathname+r.search)+"#"+t+"')"},q=function(t){var n=t.getBBox(1);W(t.pattern,{patternTransform:t.matrix.invert()+" translate("+n.x+","+n.y+")"})},be=function(t,n,r){if(t.type=="path"){for(var s,u,d,g,x,C=w(n).toLowerCase().split("-"),B=t.paper,H=r?"end":"start",G=t.node,ie=t.attrs,oe=ie["stroke-width"],de=C.length,ye="classic",we=3,Ae=3,ve=5;de--;)switch(C[de]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":ye=C[de];break;case"wide":Ae=5;break;case"narrow":Ae=2;break;case"long":we=5;break;case"short":we=2}if(ye=="open"?(we+=2,Ae+=2,ve+=2,d=1,g=r?4:1,x={fill:"none",stroke:ie.stroke}):(g=d=we/2,x={fill:ie.stroke,stroke:"none"}),t._.arrows?r?(t._.arrows.endPath&&xe[t._.arrows.endPath]--,t._.arrows.endMarker&&xe[t._.arrows.endMarker]--):(t._.arrows.startPath&&xe[t._.arrows.startPath]--,t._.arrows.startMarker&&xe[t._.arrows.startMarker]--):t._.arrows={},ye!="none"){var Ee="raphael-marker-"+ye,Te="raphael-marker-"+H+ye+we+Ae+"-obj"+t.id;h._g.doc.getElementById(Ee)?xe[Ee]++:(B.defs.appendChild(W(W("path"),{"stroke-linecap":"round",d:fe[ye],id:Ee})),xe[Ee]=1);var Ne,Re=h._g.doc.getElementById(Te);Re?(xe[Te]++,Ne=Re.getElementsByTagName("use")[0]):(Re=W(W("marker"),{id:Te,markerHeight:Ae,markerWidth:we,orient:"auto",refX:g,refY:Ae/2}),Ne=W(W("use"),{"xlink:href":"#"+Ee,transform:(r?"rotate(180 "+we/2+" "+Ae/2+") ":$)+"scale("+we/ve+","+Ae/ve+")","stroke-width":(1/((we/ve+Ae/ve)/2)).toFixed(4)}),Re.appendChild(Ne),B.defs.appendChild(Re),xe[Te]=1),W(Ne,x);var De=d*(ye!="diamond"&&ye!="oval");r?(s=t._.arrows.startdx*oe||0,u=h.getTotalLength(ie.path)-De*oe):(s=De*oe,u=h.getTotalLength(ie.path)-(t._.arrows.enddx*oe||0)),(x={})["marker-"+H]="url(#"+Te+")",(u||s)&&(x.d=h.getSubpath(ie.path,s,u)),W(G,x),t._.arrows[H+"Path"]=Ee,t._.arrows[H+"Marker"]=Te,t._.arrows[H+"dx"]=De,t._.arrows[H+"Type"]=ye,t._.arrows[H+"String"]=n}else r?(s=t._.arrows.startdx*oe||0,u=h.getTotalLength(ie.path)-s):(s=0,u=h.getTotalLength(ie.path)-(t._.arrows.enddx*oe||0)),t._.arrows[H+"Path"]&&W(G,{d:h.getSubpath(ie.path,s,u)}),delete t._.arrows[H+"Path"],delete t._.arrows[H+"Marker"],delete t._.arrows[H+"dx"],delete t._.arrows[H+"Type"],delete t._.arrows[H+"String"];for(x in xe)if(xe[f](x)&&!xe[x]){var qe=h._g.doc.getElementById(x);qe&&qe.parentNode.removeChild(qe)}}},se={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},ke=function(t,n,r){if(n=se[w(n).toLowerCase()]){for(var s=t.attrs["stroke-width"]||"1",u={round:s,square:s,butt:0}[t.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,d=[],g=n.length;g--;)d[g]=n[g]*s+(g%2?1:-1)*u;W(t.node,{"stroke-dasharray":d.join(",")})}else W(t.node,{"stroke-dasharray":"none"})},j=function(t,n){var r=t.node,s=t.attrs,u=r.style.visibility;for(var d in r.style.visibility="hidden",n)if(n[f](d)){if(!h._availableAttrs[f](d))continue;var g=n[d];switch(s[d]=g,d){case"blur":t.blur(g);break;case"title":var x=r.getElementsByTagName("title");if(x.length&&(x=x[0]))x.firstChild.nodeValue=g;else{x=W("title");var C=h._g.doc.createTextNode(g);x.appendChild(C),r.appendChild(x)}break;case"href":case"target":var B=r.parentNode;if(B.tagName.toLowerCase()!="a"){var H=W("a");B.insertBefore(H,r),H.appendChild(r),B=H}d=="target"?B.setAttributeNS(le,"show",g=="blank"?"new":g):B.setAttributeNS(le,d,g);break;case"cursor":r.style.cursor=g;break;case"transform":t.transform(g);break;case"arrow-start":be(t,g);break;case"arrow-end":be(t,g,1);break;case"clip-rect":var G=w(g).split(U);if(G.length==4){t.clip&&t.clip.parentNode.parentNode.removeChild(t.clip.parentNode);var ie=W("clipPath"),oe=W("rect");ie.id=h.createUUID(),W(oe,{x:G[0],y:G[1],width:G[2],height:G[3]}),ie.appendChild(oe),t.paper.defs.appendChild(ie),W(r,{"clip-path":"url(#"+ie.id+")"}),t.clip=oe}if(!g){var de=r.getAttribute("clip-path");if(de){var ye=h._g.doc.getElementById(de.replace(/(^url\(#|\)$)/g,$));ye&&ye.parentNode.removeChild(ye),W(r,{"clip-path":$}),delete t.clip}}break;case"path":t.type=="path"&&(W(r,{d:g?s.path=h._pathToAbsolute(g):"M0,0"}),t._.dirty=1,t._.arrows&&("startString"in t._.arrows&&be(t,t._.arrows.startString),"endString"in t._.arrows&&be(t,t._.arrows.endString,1)));break;case"width":if(r.setAttribute(d,g),t._.dirty=1,!s.fx)break;d="x",g=s.x;case"x":s.fx&&(g=-s.x-(s.width||0));case"rx":if(d=="rx"&&t.type=="rect")break;case"cx":r.setAttribute(d,g),t.pattern&&q(t),t._.dirty=1;break;case"height":if(r.setAttribute(d,g),t._.dirty=1,!s.fy)break;d="y",g=s.y;case"y":s.fy&&(g=-s.y-(s.height||0));case"ry":if(d=="ry"&&t.type=="rect")break;case"cy":r.setAttribute(d,g),t.pattern&&q(t),t._.dirty=1;break;case"r":t.type=="rect"?W(r,{rx:g,ry:g}):r.setAttribute(d,g),t._.dirty=1;break;case"src":t.type=="image"&&r.setAttributeNS(le,"href",g);break;case"stroke-width":t._.sx==1&&t._.sy==1||(g/=M(E(t._.sx),E(t._.sy))||1),r.setAttribute(d,g),s["stroke-dasharray"]&&ke(t,s["stroke-dasharray"],n),t._.arrows&&("startString"in t._.arrows&&be(t,t._.arrows.startString),"endString"in t._.arrows&&be(t,t._.arrows.endString,1));break;case"stroke-dasharray":ke(t,g,n);break;case"fill":var we=w(g).match(h._ISURL);if(we){ie=W("pattern");var Ae=W("image");ie.id=h.createUUID(),W(ie,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),W(Ae,{x:0,y:0,"xlink:href":we[1]}),ie.appendChild(Ae),function(Re){h._preload(we[1],function(){var De=this.offsetWidth,qe=this.offsetHeight;W(Re,{width:De,height:qe}),W(Ae,{width:De,height:qe})})}(ie),t.paper.defs.appendChild(ie),W(r,{fill:"url(#"+ie.id+")"}),t.pattern=ie,t.pattern&&q(t);break}var ve=h.getRGB(g);if(ve.error){if((t.type=="circle"||t.type=="ellipse"||w(g).charAt()!="r")&&me(t,g)){if("opacity"in s||"fill-opacity"in s){var Ee=h._g.doc.getElementById(r.getAttribute("fill").replace(/^url\(#|\)$/g,$));if(Ee){var Te=Ee.getElementsByTagName("stop");W(Te[Te.length-1],{"stop-opacity":("opacity"in s?s.opacity:1)*("fill-opacity"in s?s["fill-opacity"]:1)})}}s.gradient=g,s.fill="none";break}}else delete n.gradient,delete s.gradient,!h.is(s.opacity,"undefined")&&h.is(n.opacity,"undefined")&&W(r,{opacity:s.opacity}),!h.is(s["fill-opacity"],"undefined")&&h.is(n["fill-opacity"],"undefined")&&W(r,{"fill-opacity":s["fill-opacity"]});ve[f]("opacity")&&W(r,{"fill-opacity":ve.opacity>1?ve.opacity/100:ve.opacity});case"stroke":ve=h.getRGB(g),r.setAttribute(d,ve.hex),d=="stroke"&&ve[f]("opacity")&&W(r,{"stroke-opacity":ve.opacity>1?ve.opacity/100:ve.opacity}),d=="stroke"&&t._.arrows&&("startString"in t._.arrows&&be(t,t._.arrows.startString),"endString"in t._.arrows&&be(t,t._.arrows.endString,1));break;case"gradient":(t.type=="circle"||t.type=="ellipse"||w(g).charAt()!="r")&&me(t,g);break;case"opacity":s.gradient&&!s[f]("stroke-opacity")&&W(r,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(s.gradient){(Ee=h._g.doc.getElementById(r.getAttribute("fill").replace(/^url\(#|\)$/g,$)))&&(Te=Ee.getElementsByTagName("stop"),W(Te[Te.length-1],{"stop-opacity":g}));break}default:d=="font-size"&&(g=O(g,10)+"px");var Ne=d.replace(/(\-.)/g,function(Re){return Re.substring(1).toUpperCase()});r.style[Ne]=g,t._.dirty=1,r.setAttribute(d,g)}}Ce(t,n),r.style.visibility=u},Ce=function(t,n){if(t.type=="text"&&(n[f]("text")||n[f]("font")||n[f]("font-size")||n[f]("x")||n[f]("y"))){var r=t.attrs,s=t.node,u=s.firstChild?O(h._g.doc.defaultView.getComputedStyle(s.firstChild,$).getPropertyValue("font-size"),10):10;if(n[f]("text")){for(r.text=n.text;s.firstChild;)s.removeChild(s.firstChild);for(var d,g=w(n.text).split(`
`),x=[],C=0,B=g.length;C<B;C++)d=W("tspan"),C&&W(d,{dy:1.2*u,x:r.x}),d.appendChild(h._g.doc.createTextNode(g[C])),s.appendChild(d),x[C]=d}else for(C=0,B=(x=s.getElementsByTagName("tspan")).length;C<B;C++)C?W(x[C],{dy:1.2*u,x:r.x}):W(x[0],{dy:0});W(s,{x:r.x,y:r.y}),t._.dirty=1;var H=t._getBBox(),G=r.y-(H.y+H.height/2);G&&h.is(G,"finite")&&W(x[0],{dy:G})}},Se=function(t){return t.parentNode&&t.parentNode.tagName.toLowerCase()==="a"?t.parentNode:t},Z=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),t.raphaelid=this.id,this.matrix=h.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},X=h.el;Z.prototype=X,X.constructor=Z,h._engine.path=function(t,n){var r=W("path");n.canvas&&n.canvas.appendChild(r);var s=new Z(r,n);return s.type="path",j(s,{fill:"none",stroke:"#000",path:t}),s},X.rotate=function(t,n,r){if(this.removed)return this;if((t=w(t).split(U)).length-1&&(n=L(t[1]),r=L(t[2])),t=L(t[0]),r==null&&(n=r),n==null||r==null){var s=this.getBBox(1);n=s.x+s.width/2,r=s.y+s.height/2}return this.transform(this._.transform.concat([["r",t,n,r]])),this},X.scale=function(t,n,r,s){if(this.removed)return this;if((t=w(t).split(U)).length-1&&(n=L(t[1]),r=L(t[2]),s=L(t[3])),t=L(t[0]),n==null&&(n=t),s==null&&(r=s),r==null||s==null)var u=this.getBBox(1);return r=r==null?u.x+u.width/2:r,s=s==null?u.y+u.height/2:s,this.transform(this._.transform.concat([["s",t,n,r,s]])),this},X.translate=function(t,n){return this.removed?this:((t=w(t).split(U)).length-1&&(n=L(t[1])),t=L(t[0])||0,n=+n||0,this.transform(this._.transform.concat([["t",t,n]])),this)},X.transform=function(t){var n=this._;if(t==null)return n.transform;if(h._extractTransform(this,t),this.clip&&W(this.clip,{transform:this.matrix.invert()}),this.pattern&&q(this),this.node&&W(this.node,{transform:this.matrix}),n.sx!=1||n.sy!=1){var r=this.attrs[f]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},X.hide=function(){return this.removed||(this.node.style.display="none"),this},X.show=function(){return this.removed||(this.node.style.display=""),this},X.remove=function(){var t=Se(this.node);if(!this.removed&&t.parentNode){var n=this.paper;for(var r in n.__set__&&n.__set__.exclude(this),ee.unbind("raphael.*.*."+this.id),this.gradient&&n.defs.removeChild(this.gradient),h._tear(this,n),t.parentNode.removeChild(t),this.removeData(),this)this[r]=typeof this[r]=="function"?h._removedFactory(r):null;this.removed=!0}},X._getBBox=function(){if(this.node.style.display=="none"){this.show();var t=!0}var n,r=!1;this.paper.canvas.parentElement?n=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(n=this.paper.canvas.parentNode.style),n&&n.display=="none"&&(r=!0,n.display="");var s={};try{s=this.node.getBBox()}catch(u){s={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{s=s||{},r&&(n.display="none")}return t&&this.hide(),s},X.attr=function(t,n){if(this.removed)return this;if(t==null){var r={};for(var s in this.attrs)this.attrs[f](s)&&(r[s]=this.attrs[s]);return r.gradient&&r.fill=="none"&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(n==null&&h.is(t,"string")){if(t=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(t=="transform")return this._.transform;for(var u=t.split(U),d={},g=0,x=u.length;g<x;g++)(t=u[g])in this.attrs?d[t]=this.attrs[t]:h.is(this.paper.customAttributes[t],"function")?d[t]=this.paper.customAttributes[t].def:d[t]=h._availableAttrs[t];return x-1?d:d[u[0]]}if(n==null&&h.is(t,"array")){for(d={},g=0,x=t.length;g<x;g++)d[t[g]]=this.attr(t[g]);return d}if(n!=null){var C={};C[t]=n}else t!=null&&h.is(t,"object")&&(C=t);for(var B in C)ee("raphael.attr."+B+"."+this.id,this,C[B]);for(B in this.paper.customAttributes)if(this.paper.customAttributes[f](B)&&C[f](B)&&h.is(this.paper.customAttributes[B],"function")){var H=this.paper.customAttributes[B].apply(this,[].concat(C[B]));for(var G in this.attrs[B]=C[B],H)H[f](G)&&(C[G]=H[G])}return j(this,C),this},X.toFront=function(){if(this.removed)return this;var t=Se(this.node);t.parentNode.appendChild(t);var n=this.paper;return n.top!=this&&h._tofront(this,n),this},X.toBack=function(){if(this.removed)return this;var t=Se(this.node),n=t.parentNode;return n.insertBefore(t,n.firstChild),h._toback(this,this.paper),this.paper,this},X.insertAfter=function(t){if(this.removed||!t)return this;var n=Se(this.node),r=Se(t.node||t[t.length-1].node);return r.nextSibling?r.parentNode.insertBefore(n,r.nextSibling):r.parentNode.appendChild(n),h._insertafter(this,t,this.paper),this},X.insertBefore=function(t){if(this.removed||!t)return this;var n=Se(this.node),r=Se(t.node||t[0].node);return r.parentNode.insertBefore(n,r),h._insertbefore(this,t,this.paper),this},X.blur=function(t){var n=this;if(+t!=0){var r=W("filter"),s=W("feGaussianBlur");n.attrs.blur=t,r.id=h.createUUID(),W(s,{stdDeviation:+t||1.5}),r.appendChild(s),n.paper.defs.appendChild(r),n._blur=r,W(n.node,{filter:"url(#"+r.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter");return n},h._engine.circle=function(t,n,r,s){var u=W("circle");t.canvas&&t.canvas.appendChild(u);var d=new Z(u,t);return d.attrs={cx:n,cy:r,r:s,fill:"none",stroke:"#000"},d.type="circle",W(u,d.attrs),d},h._engine.rect=function(t,n,r,s,u,d){var g=W("rect");t.canvas&&t.canvas.appendChild(g);var x=new Z(g,t);return x.attrs={x:n,y:r,width:s,height:u,rx:d||0,ry:d||0,fill:"none",stroke:"#000"},x.type="rect",W(g,x.attrs),x},h._engine.ellipse=function(t,n,r,s,u){var d=W("ellipse");t.canvas&&t.canvas.appendChild(d);var g=new Z(d,t);return g.attrs={cx:n,cy:r,rx:s,ry:u,fill:"none",stroke:"#000"},g.type="ellipse",W(d,g.attrs),g},h._engine.image=function(t,n,r,s,u,d){var g=W("image");W(g,{x:r,y:s,width:u,height:d,preserveAspectRatio:"none"}),g.setAttributeNS(le,"href",n),t.canvas&&t.canvas.appendChild(g);var x=new Z(g,t);return x.attrs={x:r,y:s,width:u,height:d,src:n},x.type="image",x},h._engine.text=function(t,n,r,s){var u=W("text");t.canvas&&t.canvas.appendChild(u);var d=new Z(u,t);return d.attrs={x:n,y:r,"text-anchor":"middle",text:s,"font-family":h._availableAttrs["font-family"],"font-size":h._availableAttrs["font-size"],stroke:"none",fill:"#000"},d.type="text",j(d,d.attrs),d},h._engine.setSize=function(t,n){return this.width=t||this.width,this.height=n||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},h._engine.create=function(){var t=h._getContainer.apply(0,arguments),n=t&&t.container;if(!n)throw new Error("SVG container not found.");var r,s=t.x,u=t.y,d=t.width,g=t.height,x=W("svg"),C="overflow:hidden;";return s=s||0,u=u||0,W(x,{height:g=g||342,version:1.1,width:d=d||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),n==1?(x.style.cssText=C+"position:absolute;left:"+s+"px;top:"+u+"px",h._g.doc.body.appendChild(x),r=1):(x.style.cssText=C+"position:relative",n.firstChild?n.insertBefore(x,n.firstChild):n.appendChild(x)),(n=new h._Paper).width=d,n.height=g,n.canvas=x,n.clear(),n._left=n._top=0,r&&(n.renderfix=function(){}),n.renderfix(),n},h._engine.setViewBox=function(t,n,r,s,u){ee("raphael.setViewBox",this,this._viewBox,[t,n,r,s,u]);var d,g,x=this.getSize(),C=M(r/x.width,s/x.height),B=this.top,H=u?"xMidYMid meet":"xMinYMin";for(t==null?(this._vbSize&&(C=1),delete this._vbSize,d="0 0 "+this.width+V+this.height):(this._vbSize=C,d=t+V+n+V+r+V+s),W(this.canvas,{viewBox:d,preserveAspectRatio:H});C&&B;)g="stroke-width"in B.attrs?B.attrs["stroke-width"]:1,B.attr({"stroke-width":g}),B._.dirty=1,B._.dirtyT=1,B=B.prev;return this._viewBox=[t,n,r,s,!!u],this},h.prototype.renderfix=function(){var t,n=this.canvas,r=n.style;try{t=n.getScreenCTM()||n.createSVGMatrix()}catch(d){t=n.createSVGMatrix()}var s=-t.e%1,u=-t.f%1;(s||u)&&(s&&(this._left=(this._left+s)%1,r.left=this._left+"px"),u&&(this._top=(this._top+u)%1,r.top=this._top+"px"))},h.prototype.clear=function(){h.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=W("desc")).appendChild(h._g.doc.createTextNode("Created with Rapha├лl "+h.version)),t.appendChild(this.desc),t.appendChild(this.defs=W("defs"))},h.prototype.remove=function(){for(var t in ee("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]=typeof this[t]=="function"?h._removedFactory(t):null};var re=h.st;for(var a in X)X[f](a)&&!re[f](a)&&(re[a]=function(t){return function(){var n=arguments;return this.forEach(function(r){r[t].apply(r,n)})}}(a))}}.apply(P,T))===void 0||(k.exports=D)},function(k,P,m){var T,D;T=[m(0)],(D=function(h){if(!h||h.vml){var f="hasOwnProperty",w=String,L=parseFloat,O=Math,I=O.round,M=O.max,E=O.min,F=O.abs,U=/[, ]+/,ee=h.eve,$=" ",V="",le={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},fe=/([clmz]),?([^clmz]*)/gi,xe=/ progid:\S+Blur\([^\)]+\)/g,W=/-?[^,\s-]+/g,me="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",pe=21600,q={path:1,rect:1,image:1},be={circle:1,ellipse:1},se=function(n,r,s){var u=h.matrix();return u.rotate(-n,.5,.5),{dx:u.x(r,s),dy:u.y(r,s)}},ke=function(n,r,s,u,d,g){var x=n._,C=n.matrix,B=x.fillpos,H=n.node,G=H.style,ie=1,oe="",de=pe/r,ye=pe/s;if(G.visibility="hidden",r&&s){if(H.coordsize=F(de)+$+F(ye),G.rotation=g*(r*s<0?-1:1),g){var we=se(g,u,d);u=we.dx,d=we.dy}if(r<0&&(oe+="x"),s<0&&(oe+=" y")&&(ie=-1),G.flip=oe,H.coordorigin=u*-de+$+d*-ye,B||x.fillsize){var Ae=H.getElementsByTagName("fill");Ae=Ae&&Ae[0],H.removeChild(Ae),B&&(we=se(g,C.x(B[0],B[1]),C.y(B[0],B[1])),Ae.position=we.dx*ie+$+we.dy*ie),x.fillsize&&(Ae.size=x.fillsize[0]*F(r)+$+x.fillsize[1]*F(s)),H.appendChild(Ae)}G.visibility="visible"}};h.toString=function(){return`Your browser doesnтАЩt support SVG. Falling down to VML.
You are running Rapha├лl `+this.version};var j,Ce=function(n,r,s){for(var u=w(r).toLowerCase().split("-"),d=s?"end":"start",g=u.length,x="classic",C="medium",B="medium";g--;)switch(u[g]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":x=u[g];break;case"wide":case"narrow":B=u[g];break;case"long":case"short":C=u[g]}var H=n.node.getElementsByTagName("stroke")[0];H[d+"arrow"]=x,H[d+"arrowlength"]=C,H[d+"arrowwidth"]=B},Se=function(n,r){n.attrs=n.attrs||{};var s=n.node,u=n.attrs,d=s.style,g=q[n.type]&&(r.x!=u.x||r.y!=u.y||r.width!=u.width||r.height!=u.height||r.cx!=u.cx||r.cy!=u.cy||r.rx!=u.rx||r.ry!=u.ry||r.r!=u.r),x=be[n.type]&&(u.cx!=r.cx||u.cy!=r.cy||u.r!=r.r||u.rx!=r.rx||u.ry!=r.ry),C=n;for(var B in r)r[f](B)&&(u[B]=r[B]);if(g&&(u.path=h._getPath[n.type](n),n._.dirty=1),r.href&&(s.href=r.href),r.title&&(s.title=r.title),r.target&&(s.target=r.target),r.cursor&&(d.cursor=r.cursor),"blur"in r&&n.blur(r.blur),(r.path&&n.type=="path"||g)&&(s.path=function(Fe){var Ke=/[ahqstv]/gi,ut=h._pathToAbsolute;if(w(Fe).match(Ke)&&(ut=h._path2curve),Ke=/[clmz]/g,ut==h._pathToAbsolute&&!w(Fe).match(Ke)){var Ue=w(Fe).replace(fe,function(Zt,ft,pt){var et=[],Tt=ft.toLowerCase()=="m",rt=le[ft];return pt.replace(W,function(Mt){Tt&&et.length==2&&(rt+=et+le[ft=="m"?"l":"L"],et=[]),et.push(I(Mt*pe))}),rt+et});return Ue}var ht,We,_t=ut(Fe);Ue=[];for(var dt=0,kt=_t.length;dt<kt;dt++){ht=_t[dt],(We=_t[dt][0].toLowerCase())=="z"&&(We="x");for(var Ze=1,He=ht.length;Ze<He;Ze++)We+=I(ht[Ze]*pe)+(Ze!=He-1?",":V);Ue.push(We)}return Ue.join($)}(~w(u.path).toLowerCase().indexOf("r")?h._pathToAbsolute(u.path):u.path),n._.dirty=1,n.type=="image"&&(n._.fillpos=[u.x,u.y],n._.fillsize=[u.width,u.height],ke(n,1,1,0,0,0))),"transform"in r&&n.transform(r.transform),x){var H=+u.cx,G=+u.cy,ie=+u.rx||+u.r||0,oe=+u.ry||+u.r||0;s.path=h.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",I((H-ie)*pe),I((G-oe)*pe),I((H+ie)*pe),I((G+oe)*pe),I(H*pe)),n._.dirty=1}if("clip-rect"in r){var de=w(r["clip-rect"]).split(U);if(de.length==4){de[2]=+de[2]+ +de[0],de[3]=+de[3]+ +de[1];var ye=s.clipRect||h._g.doc.createElement("div"),we=ye.style;we.clip=h.format("rect({1}px {2}px {3}px {0}px)",de),s.clipRect||(we.position="absolute",we.top=0,we.left=0,we.width=n.paper.width+"px",we.height=n.paper.height+"px",s.parentNode.insertBefore(ye,s),ye.appendChild(s),s.clipRect=ye)}r["clip-rect"]||s.clipRect&&(s.clipRect.style.clip="auto")}if(n.textpath){var Ae=n.textpath.style;r.font&&(Ae.font=r.font),r["font-family"]&&(Ae.fontFamily='"'+r["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,V)+'"'),r["font-size"]&&(Ae.fontSize=r["font-size"]),r["font-weight"]&&(Ae.fontWeight=r["font-weight"]),r["font-style"]&&(Ae.fontStyle=r["font-style"])}if("arrow-start"in r&&Ce(C,r["arrow-start"]),"arrow-end"in r&&Ce(C,r["arrow-end"],1),r.opacity!=null||r.fill!=null||r.src!=null||r.stroke!=null||r["stroke-width"]!=null||r["stroke-opacity"]!=null||r["fill-opacity"]!=null||r["stroke-dasharray"]!=null||r["stroke-miterlimit"]!=null||r["stroke-linejoin"]!=null||r["stroke-linecap"]!=null){var ve=s.getElementsByTagName("fill");if(!(ve=ve&&ve[0])&&(ve=j("fill")),n.type=="image"&&r.src&&(ve.src=r.src),r.fill&&(ve.on=!0),ve.on!=null&&r.fill!="none"&&r.fill!==null||(ve.on=!1),ve.on&&r.fill){var Ee=w(r.fill).match(h._ISURL);if(Ee){ve.parentNode==s&&s.removeChild(ve),ve.rotate=!0,ve.src=Ee[1],ve.type="tile";var Te=n.getBBox(1);ve.position=Te.x+$+Te.y,n._.fillpos=[Te.x,Te.y],h._preload(Ee[1],function(){n._.fillsize=[this.offsetWidth,this.offsetHeight]})}else ve.color=h.getRGB(r.fill).hex,ve.src=V,ve.type="solid",h.getRGB(r.fill).error&&(C.type in{circle:1,ellipse:1}||w(r.fill).charAt()!="r")&&Z(C,r.fill,ve)&&(u.fill="none",u.gradient=r.fill,ve.rotate=!1)}if("fill-opacity"in r||"opacity"in r){var Ne=((+u["fill-opacity"]+1||2)-1)*((+u.opacity+1||2)-1)*((+h.getRGB(r.fill).o+1||2)-1);Ne=E(M(Ne,0),1),ve.opacity=Ne,ve.src&&(ve.color="none")}s.appendChild(ve);var Re=s.getElementsByTagName("stroke")&&s.getElementsByTagName("stroke")[0],De=!1;!Re&&(De=Re=j("stroke")),(r.stroke&&r.stroke!="none"||r["stroke-width"]||r["stroke-opacity"]!=null||r["stroke-dasharray"]||r["stroke-miterlimit"]||r["stroke-linejoin"]||r["stroke-linecap"])&&(Re.on=!0),(r.stroke=="none"||r.stroke===null||Re.on==null||r.stroke==0||r["stroke-width"]==0)&&(Re.on=!1);var qe=h.getRGB(r.stroke);Re.on&&r.stroke&&(Re.color=qe.hex),Ne=((+u["stroke-opacity"]+1||2)-1)*((+u.opacity+1||2)-1)*((+qe.o+1||2)-1);var Xe=.75*(L(r["stroke-width"])||1);if(Ne=E(M(Ne,0),1),r["stroke-width"]==null&&(Xe=u["stroke-width"]),r["stroke-width"]&&(Re.weight=Xe),Xe&&Xe<1&&(Ne*=Xe)&&(Re.weight=1),Re.opacity=Ne,r["stroke-linejoin"]&&(Re.joinstyle=r["stroke-linejoin"]||"miter"),Re.miterlimit=r["stroke-miterlimit"]||8,r["stroke-linecap"]&&(Re.endcap=r["stroke-linecap"]=="butt"?"flat":r["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in r){var Ge={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Re.dashstyle=Ge[f](r["stroke-dasharray"])?Ge[r["stroke-dasharray"]]:V}De&&s.appendChild(Re)}if(C.type=="text"){C.paper.canvas.style.display=V;var je=C.paper.span,at=u.font&&u.font.match(/\d+(?:\.\d*)?(?=px)/);d=je.style,u.font&&(d.font=u.font),u["font-family"]&&(d.fontFamily=u["font-family"]),u["font-weight"]&&(d.fontWeight=u["font-weight"]),u["font-style"]&&(d.fontStyle=u["font-style"]),at=L(u["font-size"]||at&&at[0])||10,d.fontSize=100*at+"px",C.textpath.string&&(je.innerHTML=w(C.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var lt=je.getBoundingClientRect();C.W=u.w=(lt.right-lt.left)/100,C.H=u.h=(lt.bottom-lt.top)/100,C.X=u.x,C.Y=u.y+C.H/2,("x"in r||"y"in r)&&(C.path.v=h.format("m{0},{1}l{2},{1}",I(u.x*pe),I(u.y*pe),I(u.x*pe)+1));for(var Ct=["x","y","text","font","font-family","font-weight","font-style","font-size"],ct=0,Nt=Ct.length;ct<Nt;ct++)if(Ct[ct]in r){C._.dirty=1;break}switch(u["text-anchor"]){case"start":C.textpath.style["v-text-align"]="left",C.bbx=C.W/2;break;case"end":C.textpath.style["v-text-align"]="right",C.bbx=-C.W/2;break;default:C.textpath.style["v-text-align"]="center",C.bbx=0}C.textpath.style["v-text-kern"]=!0}},Z=function(n,r,s){n.attrs=n.attrs||{},n.attrs;var u=Math.pow,d="linear",g=".5 .5";if(n.attrs.gradient=r,r=(r=w(r).replace(h._radial_gradient,function(ie,oe,de){return d="radial",oe&&de&&(oe=L(oe),de=L(de),u(oe-.5,2)+u(de-.5,2)>.25&&(de=O.sqrt(.25-u(oe-.5,2))*(2*(de>.5)-1)+.5),g=oe+$+de),V})).split(/\s*\-\s*/),d=="linear"){var x=r.shift();if(x=-L(x),isNaN(x))return null}var C=h._parseDots(r);if(!C)return null;if(n=n.shape||n.node,C.length){n.removeChild(s),s.on=!0,s.method="none",s.color=C[0].color,s.color2=C[C.length-1].color;for(var B=[],H=0,G=C.length;H<G;H++)C[H].offset&&B.push(C[H].offset+$+C[H].color);s.colors=B.length?B.join():"0% "+s.color,d=="radial"?(s.type="gradientTitle",s.focus="100%",s.focussize="0 0",s.focusposition=g,s.angle=0):(s.type="gradient",s.angle=(270-x)%360),n.appendChild(s)}return 1},X=function(n,r){this[0]=this.node=n,n.raphael=!0,this.id=h._oid++,n.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=r,this.matrix=h.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},re=h.el;X.prototype=re,re.constructor=X,re.transform=function(n){if(n==null)return this._.transform;var r,s=this.paper._viewBoxShift,u=s?"s"+[s.scale,s.scale]+"-1-1t"+[s.dx,s.dy]:V;s&&(r=n=w(n).replace(/\.{3}|\u2026/g,this._.transform||V)),h._extractTransform(this,u+n);var d,g=this.matrix.clone(),x=this.skew,C=this.node,B=~w(this.attrs.fill).indexOf("-"),H=!w(this.attrs.fill).indexOf("url(");if(g.translate(1,1),H||B||this.type=="image")if(x.matrix="1 0 0 1",x.offset="0 0",d=g.split(),B&&d.noRotation||!d.isSimple){C.style.filter=g.toFilter();var G=this.getBBox(),ie=this.getBBox(1),oe=G.x-ie.x,de=G.y-ie.y;C.coordorigin=oe*-pe+$+de*-pe,ke(this,1,1,oe,de,0)}else C.style.filter=V,ke(this,d.scalex,d.scaley,d.dx,d.dy,d.rotate);else C.style.filter=V,x.matrix=w(g),x.offset=g.offset();return r!==null&&(this._.transform=r,h._extractTransform(this,r)),this},re.rotate=function(n,r,s){if(this.removed)return this;if(n!=null){if((n=w(n).split(U)).length-1&&(r=L(n[1]),s=L(n[2])),n=L(n[0]),s==null&&(r=s),r==null||s==null){var u=this.getBBox(1);r=u.x+u.width/2,s=u.y+u.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",n,r,s]])),this}},re.translate=function(n,r){return this.removed?this:((n=w(n).split(U)).length-1&&(r=L(n[1])),n=L(n[0])||0,r=+r||0,this._.bbox&&(this._.bbox.x+=n,this._.bbox.y+=r),this.transform(this._.transform.concat([["t",n,r]])),this)},re.scale=function(n,r,s,u){if(this.removed)return this;if((n=w(n).split(U)).length-1&&(r=L(n[1]),s=L(n[2]),u=L(n[3]),isNaN(s)&&(s=null),isNaN(u)&&(u=null)),n=L(n[0]),r==null&&(r=n),u==null&&(s=u),s==null||u==null)var d=this.getBBox(1);return s=s==null?d.x+d.width/2:s,u=u==null?d.y+d.height/2:u,this.transform(this._.transform.concat([["s",n,r,s,u]])),this._.dirtyT=1,this},re.hide=function(){return!this.removed&&(this.node.style.display="none"),this},re.show=function(){return!this.removed&&(this.node.style.display=V),this},re.auxGetBBox=h.el.getBBox,re.getBBox=function(){var n=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var r={},s=1/this.paper._viewBoxShift.scale;return r.x=n.x-this.paper._viewBoxShift.dx,r.x*=s,r.y=n.y-this.paper._viewBoxShift.dy,r.y*=s,r.width=n.width*s,r.height=n.height*s,r.x2=r.x+r.width,r.y2=r.y+r.height,r}return n},re._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},re.remove=function(){if(!this.removed&&this.node.parentNode){for(var n in this.paper.__set__&&this.paper.__set__.exclude(this),h.eve.unbind("raphael.*.*."+this.id),h._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[n]=typeof this[n]=="function"?h._removedFactory(n):null;this.removed=!0}},re.attr=function(n,r){if(this.removed)return this;if(n==null){var s={};for(var u in this.attrs)this.attrs[f](u)&&(s[u]=this.attrs[u]);return s.gradient&&s.fill=="none"&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform,s}if(r==null&&h.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var d=n.split(U),g={},x=0,C=d.length;x<C;x++)(n=d[x])in this.attrs?g[n]=this.attrs[n]:h.is(this.paper.customAttributes[n],"function")?g[n]=this.paper.customAttributes[n].def:g[n]=h._availableAttrs[n];return C-1?g:g[d[0]]}if(this.attrs&&r==null&&h.is(n,"array")){for(g={},x=0,C=n.length;x<C;x++)g[n[x]]=this.attr(n[x]);return g}var B;for(var H in r!=null&&((B={})[n]=r),r==null&&h.is(n,"object")&&(B=n),B)ee("raphael.attr."+H+"."+this.id,this,B[H]);if(B){for(H in this.paper.customAttributes)if(this.paper.customAttributes[f](H)&&B[f](H)&&h.is(this.paper.customAttributes[H],"function")){var G=this.paper.customAttributes[H].apply(this,[].concat(B[H]));for(var ie in this.attrs[H]=B[H],G)G[f](ie)&&(B[ie]=G[ie])}B.text&&this.type=="text"&&(this.textpath.string=B.text),Se(this,B)}return this},re.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&h._tofront(this,this.paper),this},re.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),h._toback(this,this.paper)),this)},re.insertAfter=function(n){return this.removed?this:(n.constructor==h.st.constructor&&(n=n[n.length-1]),n.node.nextSibling?n.node.parentNode.insertBefore(this.node,n.node.nextSibling):n.node.parentNode.appendChild(this.node),h._insertafter(this,n,this.paper),this)},re.insertBefore=function(n){return this.removed?this:(n.constructor==h.st.constructor&&(n=n[0]),n.node.parentNode.insertBefore(this.node,n.node),h._insertbefore(this,n,this.paper),this)},re.blur=function(n){var r=this.node.runtimeStyle,s=r.filter;return s=s.replace(xe,V),+n!=0?(this.attrs.blur=n,r.filter=s+$+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+n||1.5)+")",r.margin=h.format("-{0}px 0 0 -{0}px",I(+n||1.5))):(r.filter=s,r.margin=0,delete this.attrs.blur),this},h._engine.path=function(n,r){var s=j("shape");s.style.cssText=me,s.coordsize=pe+$+pe,s.coordorigin=r.coordorigin;var u=new X(s,r),d={fill:"none",stroke:"#000"};n&&(d.path=n),u.type="path",u.path=[],u.Path=V,Se(u,d),r.canvas&&r.canvas.appendChild(s);var g=j("skew");return g.on=!0,s.appendChild(g),u.skew=g,u.transform(V),u},h._engine.rect=function(n,r,s,u,d,g){var x=h._rectPath(r,s,u,d,g),C=n.path(x),B=C.attrs;return C.X=B.x=r,C.Y=B.y=s,C.W=B.width=u,C.H=B.height=d,B.r=g,B.path=x,C.type="rect",C},h._engine.ellipse=function(n,r,s,u,d){var g=n.path();return g.attrs,g.X=r-u,g.Y=s-d,g.W=2*u,g.H=2*d,g.type="ellipse",Se(g,{cx:r,cy:s,rx:u,ry:d}),g},h._engine.circle=function(n,r,s,u){var d=n.path();return d.attrs,d.X=r-u,d.Y=s-u,d.W=d.H=2*u,d.type="circle",Se(d,{cx:r,cy:s,r:u}),d},h._engine.image=function(n,r,s,u,d,g){var x=h._rectPath(s,u,d,g),C=n.path(x).attr({stroke:"none"}),B=C.attrs,H=C.node,G=H.getElementsByTagName("fill")[0];return B.src=r,C.X=B.x=s,C.Y=B.y=u,C.W=B.width=d,C.H=B.height=g,B.path=x,C.type="image",G.parentNode==H&&H.removeChild(G),G.rotate=!0,G.src=r,G.type="tile",C._.fillpos=[s,u],C._.fillsize=[d,g],H.appendChild(G),ke(C,1,1,0,0,0),C},h._engine.text=function(n,r,s,u){var d=j("shape"),g=j("path"),x=j("textpath");r=r||0,s=s||0,u=u||"",g.v=h.format("m{0},{1}l{2},{1}",I(r*pe),I(s*pe),I(r*pe)+1),g.textpathok=!0,x.string=w(u),x.on=!0,d.style.cssText=me,d.coordsize=pe+$+pe,d.coordorigin="0 0";var C=new X(d,n),B={fill:"#000",stroke:"none",font:h._availableAttrs.font,text:u};C.shape=d,C.path=g,C.textpath=x,C.type="text",C.attrs.text=w(u),C.attrs.x=r,C.attrs.y=s,C.attrs.w=1,C.attrs.h=1,Se(C,B),d.appendChild(x),d.appendChild(g),n.canvas.appendChild(d);var H=j("skew");return H.on=!0,d.appendChild(H),C.skew=H,C.transform(V),C},h._engine.setSize=function(n,r){var s=this.canvas.style;return this.width=n,this.height=r,n==+n&&(n+="px"),r==+r&&(r+="px"),s.width=n,s.height=r,s.clip="rect(0 "+n+" "+r+" 0)",this._viewBox&&h._engine.setViewBox.apply(this,this._viewBox),this},h._engine.setViewBox=function(n,r,s,u,d){h.eve("raphael.setViewBox",this,this._viewBox,[n,r,s,u,d]);var g,x,C=this.getSize(),B=C.width,H=C.height;return d&&(s*(g=H/u)<B&&(n-=(B-s*g)/2/g),u*(x=B/s)<H&&(r-=(H-u*x)/2/x)),this._viewBox=[n,r,s,u,!!d],this._viewBoxShift={dx:-n,dy:-r,scale:C},this.forEach(function(G){G.transform("...")}),this},h._engine.initWin=function(n){var r=n.document;r.styleSheets.length<31?r.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):r.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!r.namespaces.rvml&&r.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),j=function(s){return r.createElement("<rvml:"+s+' class="rvml">')}}catch(s){j=function(u){return r.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},h._engine.initWin(h._g.win),h._engine.create=function(){var n=h._getContainer.apply(0,arguments),r=n.container,s=n.height,u=n.width,d=n.x,g=n.y;if(!r)throw new Error("VML container not found.");var x=new h._Paper,C=x.canvas=h._g.doc.createElement("div"),B=C.style;return d=d||0,g=g||0,u=u||512,s=s||342,x.width=u,x.height=s,u==+u&&(u+="px"),s==+s&&(s+="px"),x.coordsize=216e5+$+216e5,x.coordorigin="0 0",x.span=h._g.doc.createElement("span"),x.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",C.appendChild(x.span),B.cssText=h.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",u,s),r==1?(h._g.doc.body.appendChild(C),B.left=d+"px",B.top=g+"px",B.position="absolute"):r.firstChild?r.insertBefore(C,r.firstChild):r.appendChild(C),x.renderfix=function(){},x},h.prototype.clear=function(){h.eve("raphael.clear",this),this.canvas.innerHTML=V,this.span=h._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},h.prototype.remove=function(){for(var n in h.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[n]=typeof this[n]=="function"?h._removedFactory(n):null;return!0};var a=h.st;for(var t in re)re[f](t)&&!a[f](t)&&(a[t]=function(n){return function(){var r=arguments;return this.forEach(function(s){s[n].apply(s,r)})}}(t))}}.apply(P,T))===void 0||(k.exports=D)}])})}),Q1=W1(J1),Lt=Q1;var N={};N.Common={nodeIdIncrement:0,activeNode:0,roundFloat:function(v,c){for(var k=0,P=1;k<c;)P*=10,k++;return Math.round(v*P)/P},apply:function(v,c){if(v&&typeof c=="object")for(var k in c)v[k]=c[k];return v},addRaphEventHandler:function(v,c,k,P){try{v[c](function(m,T){return function(D,h){var f=T;f.e=D,m(f)}}(k,P))}catch(m){}},isInteger:function(v){return!isNaN(parseInt(v))},isXMLSerializerAvailable:function(){return typeof XMLSerializer=="function"},createSvgEl:function(v,c){if(v=document.createElementNS("http://www.w3.org/2000/svg",v),c)for(var k in c)c.hasOwnProperty(k)&&v.setAttribute(k,String(c[k]));return v},createGradientEl:function(v,c,k){if(c.type!="radialGradient")return!1;var P=N.Common.createSvgEl("radialGradient",{id:v,gradientUnits:"userSpaceOnUse",cx:k[0],cy:k[1],r:k[2],fx:k[0],fy:k[1]});if(c.stop)for(var m=c.stop,T=0;T<m.length;T++){var D=m[T];D["@attributes"]?P.appendChild(N.Common.createSvgEl("stop",D["@attributes"])):(D._attributes&&delete D._attributes,D._children&&delete D._children,D.__proto__&&delete D.__proto__,P.appendChild(N.Common.createSvgEl("stop",D)))}return P},setCssStyle:function(v,c){var k=document.styleSheets[0];k.addRule?k.addRule(v,c):k.insertRule&&k.insertRule(v+" { "+c+" }",k.cssRules.length)}};N.PhyloCanvas=function(){var v,c,k,P,m;return function(T,D,h,f,w){if(this.getNewickObject=function(){return k},this.clear=function(){},this.scale=function(O){P.svg.scale(O)},this.getSvg=function(){return P},this.getPhylogram=function(){return v},this.getSvgSource=function(){if(Lt.svg&&N.Common.isXMLSerializerAvailable()){var O=new XMLSerializer;return O.serializeToString(P.svg.canvas)}else return!1},typeof T=="object")if(T.xml){if(T.fileSource)var L=T.xml;else var L=bt.textToXML(T.xml);L=bt.xmlToJSON(L),m=new N.PhyloCanvas.PhyloxmlParse(L)}else if(T.phyloxml){if(T.fileSource)var L=T.phyloxml;else var L=bt.textToXML(T.phyloxml);L=bt.xmlToJSON(L),m=new N.PhyloCanvas.PhyloxmlParse(L)}else if(T.nexml){if(T.fileSource)var L=T.nexml;else var L=bt.textToXML(T.nexml);L=bt.xmlToJSON(L),m=new N.PhyloCanvas.NexmlParse(L,T)}else T.json?m=new N.PhyloCanvas.PhyloxmlParse(T.json):T.newick?m=new N.PhyloCanvas.NewickParse(T.newick):T.nexmlJson?m=new N.PhyloCanvas.NexmlJsonParse(T):alert("Please set the format of input data");else m=new N.PhyloCanvas.NewickParse(T);c=D,P=new N.PhyloCanvas.Render.SVG(c,h,f),w=="circular"?v=new N.PhyloCanvas.Render.CircularPhylogram(P,m):v=new N.PhyloCanvas.Render.Phylogram(P,m)}}();N.PhyloCanvas.prototype={};N.PhyloCanvas.Node=function(){return function(v,c){this.id=N.Common.nodeIdIncrement+=1,this.level=0,this.len=0,this.newickLen=0,this.name="",this.type="",this.chart={},this.img=[],v&&N.Common.apply(this,v),this._countAllChildren=!1,this._countImmediateChildren=!1,this._midBranchPosition=!1,this.children=new Array,c&&c.children.push(this)}}();N.PhyloCanvas.Node.prototype={getCountAllChildren:function(){if(this._countAllChildren!==!1)return this._countAllChildren;var v=0;for(var c in this.children)if(N.Common.isInteger(c)){var k=this.children[c];k.children&&k.children.length>0?v+=k.getCountAllChildren():v++}return this._countAllChildren=v,v},getCountImmediateChildren:function(){if(this._countImmediateChildren!==!1)return this._countImmediateChildren;var v=0;for(var c in this.children){var k=this.children[c];v+=k.length}return this._countImmediateChildren=v,v},getMidbranchPosition:function(v){if(this._midBranchPosition!==!1)return this._midBranchPosition;for(var c=[0,0],k=0;k<this.children.length;k++){var P=this.children[k];P.children&&P.children.length>0?k==0&&v?(c[0]=P.getMidbranchPosition(!0),c[1]+=P.getCountAllChildren()-1):k==0?(c[0]=P.getMidbranchPosition(),c[1]+=P.getCountAllChildren()):k==this.children.length-1?c[1]+=P.getMidbranchPosition():c[1]+=P.getCountAllChildren():k==0&&v?c[0]=0:k==0?(c[0]=1,c[1]+=1):(k==this.children.length-1,c[1]+=1)}return this._midBranchPosition=c[1]>=c[0]?(c[1]+c[0])/2:c[0],this._midBranchPosition}};N.PhyloCanvas.NewickParse=function(){var v,c,k,P=0,m=0,T,D,h=function(M){for(var E=new N.PhyloCanvas.Node;c!==")"&&c!==",";)c===":"?(O(),E.len=N.Common.roundFloat(w(),4),E.len==0&&(E.len=1e-4)):c==="'"||c==='"'?(E.type="label",E.name=L(c)):(E.type="label",E.name=w());return E.level=M.level+1,E},f=function(M){var E=new N.PhyloCanvas.Node;for(M&&(E.level=M.level+1);c!==")";)O(),c==="("?E.children.push(f(E)):E.children.push(h(E));return O(),c!==":"&&c!==")"&&c!==","&&c!==";"&&(E.type="label",E.name=w()),c===":"&&(O(),E.len=N.Common.roundFloat(w(),4),E.len==0&&(E.len=1e-4),E.type="stem"),E},w=function(){for(var M="";c!==":"&&c!==")"&&c!==","&&c!==";";)M+=c,O();return M},L=function(M){for(var E="";c!==M;)E+=c,O();return E},O=function(){return c=v.charAt(k),k+=1,c},I=function(M,E){if(M.children&&M.children.length)for(var F=0;F<M.children.length;F++){var U=M.children[F];U.len===0&&(U.len=1),U.newickLen=N.Common.roundFloat(U.len+M.newickLen,4),U.level>P&&(P=U.level),U.newickLen>m&&(m=U.newickLen),U.children.length>0&&I(U,M)}return M};return function(M){this.getRoot=function(){return T},this.getLevels=function(){return P},this.getNewickLen=function(){return m},this.getValidate=function(){return D},P=0,m=0,v=M,k=0,O(),T=f(),T=I(T)}}();N.PhyloCanvas.NewickParse.prototype={};N.PhyloCanvas.PhyloxmlParse=function(){var v=0,c=0,k,P,m=function(h,f){var w=new N.PhyloCanvas.Node;if(f&&(w.level=f.level+1),h.clade&&h.clade.length)for(var L=0;L<h.clade.length;L++){var O=h.clade[L];w.children.push(m(O,w))}if(h.branch_length&&(typeof h.branch_length=="object"&&(h.branch_length=h.branch_length[0].Text),w.len=N.Common.roundFloat(h.branch_length,4),w.len==0&&(w.len=1e-4)),h.color?(w.red=h.color[0].red[0].Text,w.green=h.color[0].green[0].Text,w.blue=h.color[0].blue[0].Text):(w.red=0,w.green=0,w.blue=0),h.property&&h.property[0].applies_to=="node"&&h.property[0].ref=="style:font_color"&&(w.font_color_hex=h.property[0].Text),h.name?(w.type="label",w.name=h.name[0].Text,h.name[0]&&h.name[0].style&&(w.style=h.name[0].style),h.name[0]&&h.name[0].bgStyle&&(w.bgStyle=h.name[0].bgStyle)):h.confidence&&(w.name=h.confidence[0].Text),h.sequence&&h.sequence[0]&&h.sequence[0].name&&h.sequence[0].name[0]&&h.sequence[0].name[0].Text&&(w.sequenceName=h.sequence[0].name[0].Text),h.taxonomy&&h.taxonomy[0]&&(h.taxonomy[0].scientific_name&&h.taxonomy[0].scientific_name[0]&&h.taxonomy[0].scientific_name[0].Text&&(w.taxonomyScientificName=h.taxonomy[0].scientific_name[0].Text),h.taxonomy[0].common_name&&h.taxonomy[0].common_name[0]&&h.taxonomy[0].common_name[0].Text&&(w.taxonomyCommonName=h.taxonomy[0].common_name[0].Text)),h.sequence&&h.sequence[0]&&h.sequence[0].accession&&h.sequence[0].accession[0]&&h.sequence[0].accession[0].Text&&(w.sequenceAccession=h.sequence[0].accession[0].Text),h.point&&(w.LatLong=[h.point[0].lat[0].Text,h.point[0].long[0].Text]),w.name||(w.sequenceName?w.name=w.sequenceName:w.taxonomyScientificName?w.name=w.taxonomyScientificName:w.taxonomyCommonName?w.name=w.taxonomyCommonName:w.sequenceAccession&&(w.name=w.sequenceAccession),w.name&&(w.type="label")),h.annotation&&(h.annotation[0]&&h.annotation[0].desc&&h.annotation[0].desc[0]&&h.annotation[0].desc[0].Text&&(w.description=h.annotation[0].desc[0].Text),h.annotation[0]&&h.annotation[0].uri&&h.annotation[0].uri[0]&&h.annotation[0].uri[0].Text&&(w.uri=h.annotation[0].uri[0].Text),h.annotation[0]&&h.annotation[0].img))for(var L in h.annotation[0].img)N.Common.isInteger(L)&&(w.img[L]=h.annotation[0].img[L].Text);if(h.chart&&h.chart[0])for(var L in h.chart[0])L!="Text"&&L!="_children"&&(w.chart[L]=h.chart[0][L][0].Text);return w&&w.level>1&&(w.len||(P="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),w},T=function(h,f){if(h.children&&h.children.length)for(var w=0;w<h.children.length;w++){var L=h.children[w];L.newickLen=Math.round((L.len+h.newickLen)*1e4)/1e4,L.level>v&&(v=L.level),L.newickLen>c&&(c=L.newickLen),L.children.length>0&&T(L,h)}return h},D=function(h,f){for(var w in h)w!="_children"&&w!="Text"&&(w=="rectangular"||w=="circular"?D(h[w][0],w):(N.PhyloCanvas.Render.Parameters[w]||(N.PhyloCanvas.Render.Parameters[w]={}),N.PhyloCanvas.Render.Parameters.set(w,h[w][0].Text,f)))};return function(h){if(this.getRoot=function(){return k},this.getLevels=function(){return v},this.getNewickLen=function(){return c},this.getValidate=function(){return P},h.phylogeny&&h.phylogeny[0]&&h.phylogeny[0].clade&&(k=m(h.phylogeny[0].clade[0])),h.phylogeny&&h.phylogeny[0]&&h.phylogeny[0].render&&h.phylogeny[0].render[0]){var f=h.phylogeny[0].render[0];if(f&&f.styles){var w=f.styles[0];for(var L in w)if(L!="_children"&&L!="Text")if(w[L][0].type&&w[L][0].type=="radialGradient"&&Lt.svg)w[L][0].name=L,N.PhyloCanvas.Render.Style[L]=w[L][0],N.PhyloCanvas.Render.Style.jsphylosvgGradientList||(N.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),N.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(L);else{N.PhyloCanvas.Render.Style[L]||(N.PhyloCanvas.Render.Style[L]={});for(var O in w[L][0])O!="_attributes"&&O!="_children"&&O!="type"&&(N.PhyloCanvas.Render.Style[L][O.replace("_","-")]=w[L][0][O])}}if(f&&f.parameters&&D(f.parameters[0]),f&&f.charts){var I=f.charts[0];for(var L in I)if(L!="_children"&&L!="Text")for(var O in I[L])I[L][O].type=="binary"?(I[L][O].chart=L,N.PhyloCanvas.Render.Parameters.binaryCharts.push(I[L][O])):I[L][O].type=="integratedBinary"?(I[L][O].chart=L,N.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(I[L][O])):I[L][O].type=="bar"&&(I[L][O].chart=L,N.PhyloCanvas.Render.Parameters.barCharts.length==1&&N.PhyloCanvas.Render.Parameters.barCharts.shift(),N.PhyloCanvas.Render.Parameters.barCharts.push(I[L][O]))}}k=T(k)}}();N.PhyloCanvas.PhyloxmlParse.prototype={};N.PhyloCanvas.NexmlParse=function(){var v=0,c=0,k,P,m,T,D=function(w,L,O){var I=new N.PhyloCanvas.Node;O&&(I.level=O.level+1);for(var M=0;M<m.length;M++)if(m[M].source==w.id)for(var E=0;E<T.length;E++)m[M].target==T[E].id&&I.children.push(D(T[E],m[M].length,I));if(I&&I.level>0&&!I.len&&(I.len=1),L&&(I.len=N.Common.roundFloat(L,4),I.len==0&&(I.len=1e-4)),w.label&&(I.type="label",I.name=w.label,w.style&&(I.style=w.style)),w.color){let F=w.color.replace(/[a-z%\s\(\)]/g,"").split(",");I.red=F[0],I.green=F[1],I.blue=F[2]}else{let F=N.PhyloCanvas.Render.Style.line.stroke.replace(/[a-z%\s\(\)]/g,"").split(",");I.red=F[0],I.green=F[1],I.blue=F[2]}return I},h=function(w,L){if(w.children&&w.children.length)for(var O=0;O<w.children.length;O++){var I=w.children[O];I.newickLen=Math.round((I.len+w.newickLen)*1e4)/1e4,I.level>v&&(v=I.level),I.newickLen>c&&(c=I.newickLen),I.children.length>0&&h(I,w)}return w},f=function(w,L){for(var O in w)O!="_children"&&O!="Text"&&(O=="rectangular"||O=="circular"?f(w[O][0],O):(N.PhyloCanvas.Render.Parameters[O]||(N.PhyloCanvas.Render.Parameters[O]={}),N.PhyloCanvas.Render.Parameters.set(O,w[O][0].Text,L)))};return function(w,L){this.getRoot=function(){return k},this.getLevels=function(){return v},this.getNewickLen=function(){return c},this.getValidate=function(){return P},L.tree&&w.trees[0]&&w.trees[0].tree[L.tree-1]?(m=w.trees[0].tree[L.tree-1].edge,T=w.trees[0].tree[L.tree-1].node):(m=w.trees[0].tree[0].edge,T=w.trees[0].tree[0].node);for(var O=0;O<T.length;O++){var I=0;if(T[O].root&&T[O].root=="true"){k=T[O];break}for(var M=0;M<m.length;M++)m[M].target==T[O].id&&I++;if(I==0){k=T[O];break}}k?(k=D(k),k=h(k)):P="Error. Currently, only rooted NeXML trees are supported."}}();N.PhyloCanvas.NexmlParse.prototype={};N.PhyloCanvas.NexmlJsonParse=function(){var v=0,c=0,k,P,m=[],T=[],D=function(w,L,O){var I=new N.PhyloCanvas.Node;O&&(I.level=O.level+1);for(var M=0;M<m.length;M++)if(m[M].source==w.id)for(var E=0;E<T.length;E++)m[M].target==T[E].id&&I.children.push(D(T[E],m[M].length,I));return L&&(I.len=N.Common.roundFloat(L,4),I.len==0&&(I.len=1e-4)),w.label&&(I.type="label",I.name=w.label,w.accession&&(I.accession=w.accession),w.style&&(I.style=w.style),w.bgStyle&&(I.bgStyle=w.bgStyle)),w.chart&&(I.chart=w.chart),I&&I.level>1&&(I.len||(P="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),I},h=function(w,L){if(w.children&&w.children.length)for(var O=0;O<w.children.length;O++){var I=w.children[O];I.newickLen=Math.round((I.len+w.newickLen)*1e4)/1e4,I.level>v&&(v=I.level),I.newickLen>c&&(c=I.newickLen),I.children.length>0&&h(I,w)}return w},f=function(w,L){for(var O in w)O!="_children"&&O!="Text"&&(O=="rectangular"||O=="circular"?f(w[O],O):(N.PhyloCanvas.Render.Parameters[O]||(N.PhyloCanvas.Render.Parameters[O]={}),N.PhyloCanvas.Render.Parameters.set(O,w[O],L)))};return function(w){this.getRoot=function(){return k},this.getLevels=function(){return v},this.getNewickLen=function(){return c},this.getValidate=function(){return P};var L=w.nexmlJson.nexml,O=L.render;if(O&&O.styles){var I=O.styles;for(var M in I)if(M!="_children"&&M!="Text")if(I[M]["@attributes"].type&&I[M]["@attributes"].type=="radialGradient"&&Lt.svg)I[M].name=M,I[M].type=I[M]["@attributes"].type,N.PhyloCanvas.Render.Style[M]=I[M],N.PhyloCanvas.Render.Style.jsphylosvgGradientList||(N.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),N.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(M);else{N.PhyloCanvas.Render.Style[M]||(N.PhyloCanvas.Render.Style[M]={});for(var E in I[M]["@attributes"])E!="_attributes"&&E!="_children"&&E!="type"&&(N.PhyloCanvas.Render.Style[M][E.replace("_","-")]=I[M]["@attributes"][E])}}if(O&&O.parameters&&f(O.parameters),O&&O.charts){var F=O.charts;for(var M in F)F[M]["@attributes"].chart=M,F[M]["@attributes"].type=="binary"?N.PhyloCanvas.Render.Parameters.binaryCharts.push(F[M]["@attributes"]):F[M]["@attributes"].type=="integratedBinary"?N.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(F[M]["@attributes"]):F[M]["@attributes"].type=="bar"&&N.PhyloCanvas.Render.Parameters.barCharts.push(F[M]["@attributes"])}if(w.tree&&L.trees[0]&&L.trees[0].tree[w.tree-1])m=L.trees[0].tree[w.tree-1].edge,T=L.trees[0].tree[w.tree-1].node;else{for(var M=0;M<L.trees.tree.edge.length;M++)m.push(L.trees.tree.edge[M]["@attributes"]);for(var M=0;M<L.trees.tree.node.length;M++){var U=L.trees.tree.node[M]["@attributes"];U.label&&(U.chart=L.trees.tree.node[M].chart),T.push(U)}}for(var M=0;M<T.length;M++)T[M].root&&T[M].root=="true"&&(k=T[M]);k?(k=D(k),k=h(k)):P="Error. Currently, only rooted NeXML trees are supported."}}();N.PhyloCanvas.NexmlParse.prototype={};N.PhyloCanvas.Render={};N.PhyloCanvas.Render.Style={line:{stroke:"rgb(0,0,0)","stroke-width":1},text:{"font-family":"Verdana","font-size":12,"text-anchor":"start"},path:{stroke:"rgb(0,0,0)","stroke-width":1},connectedDash:{stroke:"rgb(200,200,200)","stroke-dasharray":". "},textSecantBg:{fill:"#EEE",stroke:"#DDD"},highlightedEdgeCircle:{fill:"black",stroke:"black"},barChart:{fill:"#003300",stroke:"#DDD"},getStyle:function(v,c){return this[v]?this[v]:this[c]}};N.PhyloCanvas.Render.Parameters={jsOverride:0,Rectangular:{bufferX:200,paddingX:10,paddingY:20,bufferInnerLabels:10,bufferOuterLabels:5,minHeightBetweenLeaves:10,alignPadding:0,alignRight:!1,showScaleBar:!1},Circular:{bufferRadius:.33,bufferAngle:20,initStartAngle:160,innerCircleRadius:0,minHeightBetweenLeaves:5,bufferInnerLabels:2,bufferOuterLabels:5},binaryCharts:[],integratedBinaryCharts:[],barCharts:[],binaryChartBufferInner:5,binaryChartBufferSiblings:.01,binaryChartThickness:15,binaryChartDisjointed:!1,barChartBufferInner:3,barChartHeight:50,barChartWidth:.5,set:function(v,c,k){this.jsOverride||(k?k=="circular"?this.Circular[v]=parseFloat(c):k=="rectangular"&&(this.Rectangular[v]=parseFloat(c)):this[v]=parseFloat(c))}};N.PhyloCanvas.Render.Line=function(){return function(v,c,k,P,m,T,D,h){this.type="line",this.attr=N.PhyloCanvas.Render.Style.line,this.attr.stroke=["rgb(",m,",",T,",",D,")"].join(""),this.x1=v,this.x2=c,this.y1=k,this.y2=P,h&&(N.Common.apply(this,h),h.attr&&(this.attr=h.attr))}}();N.PhyloCanvas.Render.Text=function(){return function(v,c,k,P){this.type="text",this.attr=N.PhyloCanvas.Render.Style.text,this.x=v,this.y=c,this.text=k,P&&(N.Common.apply(this,P),P.attr&&(this.attr=P.attr))}}();N.PhyloCanvas.Render.Path=function(){var v=N.PhyloCanvas.Render.Style.path;return function(c,k){this.type="path",this.attr=N.PhyloCanvas.Render.Style.path,this.path=c,k&&(N.Common.apply(this,k),k.attr&&(this.attr=k.attr))}}();N.PhyloCanvas.Render.Circle=function(){return function(v,c,k,P){this.type="circle",this.x=v,this.y=c,this.radius=k,P&&(N.Common.apply(this,P),P.attr&&(this.attr=P.attr))}}();N.PhyloCanvas.Render.SVG=function(){var v,c;return function(k,P,m){v=k,this.canvasSize=[P,m],this.svg=Lt(k,this.canvasSize[0],this.canvasSize[1])}}();N.PhyloCanvas.Render.SVG.prototype={render:function(){for(var v=this.phylogramObject.getDrawInstructs(),c=0;c<v.length;c++)if(v[c].type=="line")var k=this.svg.path(["M",v[c].x1,v[c].y1,"L",v[c].x2,v[c].y2]).attr(N.PhyloCanvas.Render.Style.line);else if(v[c].type=="path")var P=this.svg.path(v[c].path).attr(v[c].attr);else if(v[c].type=="circle")var P=this.svg.circle(v[c].x,v[c].y,v[c].radius).attr({stroke:"black",fill:"black"});else{var m=this.svg.text(v[c].x,v[c].y,v[c].text).attr(N.PhyloCanvas.Render.Style.text);v[c].attr&&m.attr(v[c].attr),v[c].rotate&&m.rotate(v[c].rotate);var T=m.getBBox(),D=Math.sqrt(T.height*T.height+T.width*T.width)}},draw:function(v){var c,k;if(v.type=="line")c=this.svg.path(["M",v.x1,v.y1,"L",v.x2,v.y2]).attr(N.PhyloCanvas.Render.Style.line);else if(v.type=="path")c=this.svg.path(v.path).attr(v.attr);else if(v.type=="circle")c=this.svg.circle(v.x,v.y,v.radius).attr({stroke:"black",fill:"black"});else if(v.type=="text"){c=this.svg.text(v.x,v.y,v.text).attr(N.PhyloCanvas.Render.Style.text),v.attr&&c.attr(v.attr),v.rotate&&c.rotate(v.rotate);var P=c.getBBox();k=Math.sqrt(P.height*P.height+P.width*P.width)}return[c,k]}};N.PhyloCanvas.Render.Phylogram=function(){var v,c=N.PhyloCanvas.Render.Parameters.Rectangular,k,P,m,T,D,h,f=!0,w=0,L=0,O,I,M,E,F,U,ee,$,V,le,fe,xe,W=[],me=function(j){return j+Math.round(j/4)},pe=function(j,Ce,Se,Z){return["M",j,Ce,"L",Se,Ce,"L",Se,Z,"L",j,Z,"Z"]},q=function(j,Ce){if(j.len&&f==!1&&j.children.length==0&&(w=N.Common.roundFloat(w+T,4)),j.children.length>0){var Se=[],Z,X,re,a,t,n,r;if(j.len&&(Z=Ce,X=Ce=N.Common.roundFloat(Ce+m*j.len,4),re=w+j.getMidbranchPosition(f)*T,a=re,t=j.red,n=j.green,r=j.blue,v.draw(new N.PhyloCanvas.Render.Line(Z,X,re,a,t,n,r))),j.name){var s={};if(s=N.PhyloCanvas.Render.Style.getStyle("bootstrap","text"),j.font_color_hex?s.fill=j.font_color_hex:s.fill="#000000",j.uri&&(s.href=j.uri),j.description&&(s.title=j.description),j.level==0)var u=w+j.getMidbranchPosition(f)*T;else var u=a;v.draw(new N.PhyloCanvas.Render.Text((X||Ce)+5,u,j.name,{attr:s}))}if(j.children&&j.children.length)for(var d=0;d<j.children.length;d++){var g=j.children[d];Se.push(q(g,Ce))}for(var x=[],d=0;d<Se.length;d++)Se[d][0]&&x.push(Se[d][0]),Se[d][1]&&x.push(Se[d][1]);for(var C=Math.min.apply(null,x),B=Math.max.apply(null,x),H=(C+B)/2,G="",ie="",oe="",de=0,d=0;d<j.children.length;++d){var ye=j.children[d];if(d==0)G=ye.red,ie=ye.green,oe=ye.blue;else if(G==ye.red&&ie==ye.green&&oe==ye.blue)de=1;else{de=0;break}}de==0?N.PhyloCanvas.Render.Style.line.stroke="black":(t=j.children[0].red,n=j.children[0].green,r=j.children[0].blue,N.PhyloCanvas.Render.Style.line.stroke=["rgb(",t,",",n,",",r,")"].join("")),j.children.length==2?(t=j.children[0].red,n=j.children[0].green,r=j.children[0].blue,N.PhyloCanvas.Render.Style.line.stroke=["rgb(",t,",",n,",",r,")"].join(""),v.draw(new N.PhyloCanvas.Render.Path(["M",Ce+1e-4,C,"L",Ce,C,"L",Ce,H],{attr:N.PhyloCanvas.Render.Style.line})),t=j.children[1].red,n=j.children[1].green,r=j.children[1].blue,N.PhyloCanvas.Render.Style.line.stroke=["rgb(",t,",",n,",",r,")"].join(""),v.draw(new N.PhyloCanvas.Render.Path(["M",Ce,H,"L",Ce,B,"L",Ce+1e-4,B],{attr:N.PhyloCanvas.Render.Style.line}))):v.draw(new N.PhyloCanvas.Render.Path(["M",Ce+1e-4,C,"L",Ce,C,"L",Ce,B,"L",Ce+1e-4,B],{attr:N.PhyloCanvas.Render.Style.line}))}else{if(Z=Ce,X=N.Common.roundFloat(Ce+m*j.len,2),re=w,a=w,t=j.red,n=j.green,r=j.blue,j.y=w,W.push(j),v.draw(new N.PhyloCanvas.Render.Line(Z,X,re,a,t,n,r)),c.alignRight&&v.draw(new N.PhyloCanvas.Render.Path(["M",X,re,"L",c.alignPadding+D,a],{attr:N.PhyloCanvas.Render.Style.connectedDash})),j.name){var s={};j.style&&(s=N.PhyloCanvas.Render.Style.getStyle(j.style,"text")),j.font_color_hex?s.fill=j.font_color_hex:s.fill="#000000",s["text-anchor"]="start",j.uri&&(s.href=j.uri),j.description&&(s.title=j.description);var we=v.draw(new N.PhyloCanvas.Render.Text(c.alignRight?D+c.bufferInnerLabels+c.alignPadding:X+c.bufferInnerLabels,a,j.name,{attr:s}));L=Math.max(we[1],L),N.PhyloCanvas.Render.Parameters.mouseRollOver&&N.Common.addRaphEventHandler(we[0],"mouseover",N.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:v,node:j,x:X,y:a,textEl:we[0]}),N.PhyloCanvas.Render.Parameters.mouseRollOut&&N.Common.addRaphEventHandler(we[0],"mouseout",N.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:v,node:j,x:X,y:a,textEl:we[0]}),N.PhyloCanvas.Render.Parameters.onClickAction&&N.Common.addRaphEventHandler(we[0],"click",N.PhyloCanvas.Render.Parameters.onClickAction,{svg:v,node:j,x:X,y:a,textEl:we[0]})}f&&(f=!1)}return[re,a]},be=function(){y=w+T,E=0,F=c.showScaleBar*m,v.draw(new N.PhyloCanvas.Render.Line(E,F,y,y)),v.draw(new N.PhyloCanvas.Render.Text((E+F)/2,y-8,c.showScaleBar))},se=function(j,Ce,Se){for(var Z=(Se&&Se.bufferInner?Se.bufferInner:0)|N.PhyloCanvas.Render.Parameters.binaryChartBufferInner,X=(Se&&Se.bufferSiblings?Se.bufferSiblings*T:0)|(N.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?T*N.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:N.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),re=(Se&&Se.thickness?Se.thickness:0)|N.PhyloCanvas.Render.Parameters.binaryChartThickness,a,t=0;t<W.length;t++){var n=W[t];v.draw(new N.PhyloCanvas.Render.Path(pe(j+Z,n.y-T/2+X/2,j+Z+re,n.y+T/2-X/2),{attr:N.PhyloCanvas.Render.Style.getStyle(n.chart[Ce],"textSecantBg")}))}return j+Z+re},ke=function(j,Ce,Se){for(var Z=[],X,re=Se&&Se.bufferInner?Se.bufferInner:0|N.PhyloCanvas.Render.Parameters.barChartBufferInner,a=Se&&Se.height?Se.height:0|N.PhyloCanvas.Render.Parameters.barChartHeight,t=Se&&Se.width?Se.width<1?T*Se.width:Se.width:0|(N.PhyloCanvas.Render.Parameters.barChartWidth<1?T*N.PhyloCanvas.Render.Parameters.barChartWidth:N.PhyloCanvas.Render.Parameters.barChartWidth),n=0,r=0;r<W.length;r++)Z.push(W[r].chart[Ce]);X=Math.max.apply(null,Z),n=N.Common.roundFloat(a/X,4);for(var r=0;r<W.length;r++){var s=W[r];v.draw(new N.PhyloCanvas.Render.Path(pe(j+re,s.y-t/2,j+re+n*s.chart[Ce],s.y+t/2),{attr:N.PhyloCanvas.Render.Style.getStyle(s.chart[Ce],"barChart")}))}return j+re+a};return function(j,Ce){this.getCanvasSize=function(){return[k,P]},this.getRoot=function(){return Ce.getRoot()},Ce.getValidate()&&v.draw(0,0,Ce.getValidate()),f=!0,v=j;var Se=Ce.getRoot(),Z=Ce.getNewickLen();if(k=v.canvasSize[0],P=v.canvasSize[1],le=c.bufferX,fe=c.paddingX,xe=c.paddingY,h=c.minHeightBetweenLeaves,w=xe,m=Math.round((k-le-fe*2)/Z),T=Math.round((P-xe*2)/(c.showScaleBar?Se.getCountAllChildren():Se.getCountAllChildren()-1)),T<h&&(T=h),D=Math.round(k-le-fe*2),(N.PhyloCanvas.Render.Parameters.binaryCharts.length||N.PhyloCanvas.Render.Parameters.barCharts.length)&&(c.alignRight=!0),q(Se,fe),c.showScaleBar&&be(),O=D+L+c.bufferInnerLabels,N.PhyloCanvas.Render.Parameters.binaryCharts.length){var X=N.PhyloCanvas.Render.Parameters.binaryCharts;for(var re in X)O=se(O,X[re].chart,X[re])}if(N.PhyloCanvas.Render.Parameters.barCharts.length){var a=N.PhyloCanvas.Render.Parameters.barCharts;for(var re in a)M=ke(O,a[re].chart,a[re])}W=[],typeof bgLabelsHold!="undefined"&&(bgLabelsHold=[])}}();N.PhyloCanvas.Render.Phylogram.prototype={};N.PhyloCanvas.Render.CircularPhylogram=function(){var v,c=N.PhyloCanvas.Render.Parameters.Circular,k,P,m,T,D,h,f,w=!0,L=0,O,I,M,E=[],F=[],U,ee,$,V=0,le,fe=Math.PI/180;function xe(Z,X){return X+=le,[N.Common.roundFloat(O+Z*Math.sin(X*fe),4),N.Common.roundFloat(I+Z*Math.cos(X*fe),4)]}function W(Z){var X=q(90-Z-le);if(X>90&&X<270){X+=180;var re="end"}else var re="start";return[X,re]}function me(Z,X,re,a){var t=xe(Z,X),n=xe(Z,re),r=[],s,u=0;return Math.abs(q(re-X))>180?s=1:s=-1,a&&a.invertSecant&&(s*=-1,u=1),a&&a.noMove||r.push("M"),r.push(t[0],t[1],"A",Z,Z,0,s<1?0:1,u,n[0],n[1]),r}function pe(Z,X,re,a){var t=[],n=xe(X,Z),r=xe(re,Z);return a&&a.noMove||t.push("M"),t.push(n[0],n[1],"L",r[0],r[1]),t}function q(Z){for(;Z>360||Z<0;)Z>360?Z-=360:Z<0&&(Z+=360);return Z}function be(Z,X,re,a){if(!X&&Z.length>1)var a=Z[3],re=Z[2],X=Z[1],Z=Z[0];var t=ke("M",me(Z,re,a,{noMove:1,invertSecant:0}),"L",me(X,a,re,{noMove:1,invertSecant:1}),"Z");return t}function se(Z,X){if(X=X,Z.len&&(w?L=ee||1:Z.children.length==0&&(L=N.Common.roundFloat(L+D,4))),Z.children.length>0){var re=[],a,t,n,r;if(a=X,t=X+=N.Common.roundFloat(T*Z.len,4),Z.name,Z.children&&Z.children.length)for(var s=0;s<Z.children.length;s++){var u=Z.children[s],d=se(u,X);d>0&&re.push(d)}var g=N.Common.roundFloat(Math.min.apply(null,re),4),x=N.Common.roundFloat(Math.max.apply(null,re),4);Z.level!=0&&v.draw(new N.PhyloCanvas.Render.Path(ke("M",xe(X+.01,g),"L",me(X,g,x,{noMove:!0}),"L",xe(X+.01,x)))),Z.len&&(n=N.Common.roundFloat(g+(x-g)/2,4),v.draw(new N.PhyloCanvas.Render.Path(pe(n,a,t))))}else if(Z.y=L,E.push(Z),a=X,t=X=N.Common.roundFloat(X+T*Z.len),n=L,v.draw(new N.PhyloCanvas.Render.Path(pe(n,a,t))),v.draw(new N.PhyloCanvas.Render.Path(pe(n,t,M),{attr:N.PhyloCanvas.Render.Style.connectedDash})),Z.name){var C=xe(M+c.bufferInnerLabels,n),B=W(n),H=B[0],G=B[1],ie={};Z.style&&N.Common.apply(ie,N.PhyloCanvas.Render.Style.getStyle(Z.style,"text")),Z.font_color_hex?ie.fill=Z.font_color_hex:ie.fill="#000000",ie["text-anchor"]=G,Z.uri&&(ie.href=Z.uri),Z.description&&(ie.title=Z.description);var oe=v.draw(new N.PhyloCanvas.Render.Text(C[0],C[1],Z.name,{attr:ie,rotate:[H,C[0],C[1]]}));Z.bgStyle&&F.push([Z.bgStyle,n]);var C=xe(t,n);N.PhyloCanvas.Render.Parameters.mouseRollOver&&N.Common.addRaphEventHandler(oe[0],"mouseover",N.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:v,node:Z,x:C[0],y:C[1],textEl:oe[0]}),N.PhyloCanvas.Render.Parameters.mouseRollOut&&N.Common.addRaphEventHandler(oe[0],"mouseout",N.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:v,node:Z,x:C[0],y:C[1],textEl:oe[0]}),N.PhyloCanvas.Render.Parameters.onClickAction&&N.Common.addRaphEventHandler(oe[0],"click",N.PhyloCanvas.Render.Parameters.onClickAction,{svg:v,node:Z,x:C[0],y:C[1],textEl:oe[0]}),V=Math.max(oe[1],V)}return w&&(w=!1),n}function ke(Z){for(var X=Z,re=1;re<arguments.length;re++)X=X.concat(arguments[re]);return X}function j(){var Z=[];if(F.length>0){if(N.PhyloCanvas.Render.Style.jsphylosvgGradientList)for(var X=0;X<N.PhyloCanvas.Render.Style.jsphylosvgGradientList.length;X++){var re=N.PhyloCanvas.Render.Style.jsphylosvgGradientList[X],a=N.Common.createGradientEl(re,N.PhyloCanvas.Render.Style[re],[O,I,M+V+c.bufferOuterLabels]);v.svg.defs.appendChild(a)}for(var X=0;X<F.length;X++){if(X!=F.length-1&&F[X][0]==F[X+1][0]){F[X+1][2]=F[X][2]?F[X][2]:F[X][1];continue}var Z=be(M,M+V+c.bufferOuterLabels,F[X][2]?F[X][2]-D/2:F[X][1]-D/2,F[X][1]+D/2),t=N.PhyloCanvas.Render.Style.getStyle(F[X][0],"textSecantBg"),n=v.draw(new N.PhyloCanvas.Render.Path(Z,{attr:t.type?{}:t}));t.type&&t.type=="radialGradient"&&n[0].node.setAttribute("fill","url(#"+t.name+")"),t.type&&t.type=="radialGradient"&&n[0].node.setAttribute("stroke","none"),n[0].toBack()}}var Z=be(M,M+V+c.bufferOuterLabels,(ee||1)-D/2,360-D/2),n=v.draw(new N.PhyloCanvas.Render.Path(Z,{attr:N.PhyloCanvas.Render.Style.textSecantBg}));return n[0].toBack(),M+V+c.bufferOuterLabels}function Ce(Z,X,re){for(var a=re&&re.bufferInner?parseFloat(re.bufferInner):N.PhyloCanvas.Render.Parameters.binaryChartBufferInner,t=(re&&re.bufferSiblings?re.bufferSiblings*D:0)|(N.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?D*N.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:N.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),n=re&&re.thickness?parseFloat(re.thickness):N.PhyloCanvas.Render.Parameters.binaryChartThickness,r=(re&&re.disjointed?re.disjointed:!1)|N.PhyloCanvas.Render.Parameters.binaryChartDisjointed,s=re&&re.isInternal?re.isInternal:!1,u=!0,d,g=0;g<E.length;g++){var x=E[g];if((!E[g+1]||x.chart[X]!==E[g+1].chart[X]||r)&&x.chart[X]!="none"){var C=N.PhyloCanvas.Render.Style.getStyle(x.chart[X],"textSecantBg");if(s)var B=[M-a-n,M-a,(d||x.y)-D/2+(u&&!r?0:t/2),x.y+D/2-(g==E.length-1&&!r?0:t/2)];else var B=[Z+a,Z+a+n,(d||x.y)-D/2+(u&&!r?0:t/2),x.y+D/2-(g==E.length-1&&!r?0:t/2)];if(C.label){var H=N.PhyloCanvas.Render.Style.getStyle(C.labelStyle,"text"),G=xe((B[0]+B[1])/2,(B[2]+B[3])/2),ie=W((B[2]+B[3])/2),oe=q(ie[0]+(H.rotate?parseFloat(H.rotate):0)),de=q(90-(B[2]+B[3])/2-le);de>90&&de<270&&(oe+=180),H["text-anchor"]||(H["text-anchor"]="middle"),x.font_color_hex?C.fill=x.font_color_hex:C.fill="#000000";var ye=v.draw(new N.PhyloCanvas.Render.Text(G[0],G[1],C.label,{attr:H,rotate:oe}));ye[0].toBack()}if(C.borderStyle){var we=N.PhyloCanvas.Render.Style.getStyle(C.borderStyle,"textSecantBg"),Ae=[M,we.fullsize?B[1]:B[0],B[2],B[3]],ve=v.draw(new N.PhyloCanvas.Render.Path(be(Ae),{attr:we}));ve[0].toBack()}var Ee=v.draw(new N.PhyloCanvas.Render.Path(be(B),{attr:C}));Ee[0].toBack(),d=0,u=!1}else d||(d=x.y),x.chart[X]=="none"&&(d=0);u=!1}return s?Z:Z+a+n}function Se(Z,X,re){for(var a=[],t,n=re&&re.bufferInner?parseFloat(re.bufferInner):N.PhyloCanvas.Render.Parameters.barChartBufferInner,r=re&&re.height?parseFloat(re.height):N.PhyloCanvas.Render.Parameters.barChartHeight?N.PhyloCanvas.Render.Parameters.barChartHeight:0,s=re&&re.width?parseFloat(re.width)<1?D*parseFloat(re.width):parseFloat(re.width):0|(N.PhyloCanvas.Render.Parameters.barChartWidth<1?D*N.PhyloCanvas.Render.Parameters.barChartWidth:N.PhyloCanvas.Render.Parameters.barChartWidth),u=0,d=0;d<E.length;d++)a.push(E[d].chart[X]);t=Math.max.apply(null,a),u=N.Common.roundFloat(r/t,4);for(var d=0;d<E.length;d++){var g=E[d];g.chart[X]>0&&v.draw(new N.PhyloCanvas.Render.Path(be(Z+n,Z+n+u*g.chart[X],g.y-s/2,g.y+s/2),{attr:N.PhyloCanvas.Render.Style.getStyle(g.chart[X],"barChart")}))}return Z+n+r}return function(Z,X,re){if(this.getCanvasSize=function(){return[k,P]},this.getRoot=function(){return X.getRoot()},X.getValidate()){Z.draw({type:"text",x:0,y:Z.canvasSize[1]/3,text:X.getValidate()});return}v=Z;var a=X.getRoot(),t=X.getNewickLen();if(k=v.canvasSize[0],P=v.canvasSize[1],O=k/2,I=P/2,m=Math.min.apply(null,[k,P]),re=c.bufferRadius>1?c.bufferRadius:N.Common.roundFloat(m*c.bufferRadius,4),ee=c.bufferAngle,f=c.innerCircleRadius,h=c.minHeightBetweenLeaves,le=c.initStartAngle,M=Math.round((m-re-f)/2),T=(M-f)/t,D=N.Common.roundFloat((360-ee)/a.getCountAllChildren(),4),se(a,f),$=M+V+c.bufferOuterLabels,N.PhyloCanvas.Render.Parameters.integratedBinaryCharts.length){var n=N.PhyloCanvas.Render.Parameters.integratedBinaryCharts;for(var r in n){var s=n[r].bufferInner?n[r].bufferInner:N.PhyloCanvas.Render.Parameters.binaryChartBufferInner,u=n[r].thickness?n[r].thickness:N.PhyloCanvas.Render.Parameters.binaryChartThickness;$=Ce($-u-s,n[r].chart,n[r])}}if($=j(),N.PhyloCanvas.Render.Parameters.binaryCharts.length){var d=N.PhyloCanvas.Render.Parameters.binaryCharts;for(var r in d)$=Ce($,d[r].chart,d[r])}if(N.PhyloCanvas.Render.Parameters.barCharts.length){var g=N.PhyloCanvas.Render.Parameters.barCharts;for(var r in g)$=Se($,g[r].chart,g[r])}E=[],F=[]}}();N.PhyloCanvas.Render.CircularPhylogram.prototype={};var bt=function(){var v=function(P){if(!!P&&typeof P=="object"){let m=function(){};return m.prototype=P,new m}},c=function(P){var m="";!!P&&typeof P=="string"&&(m=P);var T=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return T.test(m)},k={xmlToJSON:function(P){try{let f=function(M){return M.replace(/^\s+|\s+$/gm,"")},w=function(M){var E=/-/g,F=String(M).replace(E,"_");return F},L=function(M,E){if(E.attributes.length>0){var F=E.attributes.length-1,U;M._attributes=[];do U=String(w(E.attributes[F].name)),M._attributes.push(U),M[U]=f(E.attributes[F].value);while(F--)}},O=function(M){M.getNodeByAttribute=function(E,F){if(this.length>0){var U,ee=this.length-1;try{do if(U=this[ee],U[E]==F)return U;while(ee--)}catch($){return!1}return!1}},M.contains=function(E,F){if(this.length>0){var U=this.length-1;try{do if(this[U][E]==F)return!0;while(U--)}catch(ee){return!1}return!1}},M.indexOf=function(E,F){var U=-1;if(this.length>0){var ee=this.length-1;try{do this[ee][E]==F&&(U=ee);while(ee--)}catch($){return-1}return U}},M.SortByAttribute=function(E,F){if(this.length){let U=function($,V){var le=$[V];return le=c(le)?parseFloat(le):le,le},ee=function($,V){var le=0,fe,xe;return fe=U($,E),xe=U(V,E),fe<xe?le=-1:xe<fe&&(le=1),F&&(le=F.toUpperCase()=="DESC"?0-le:le),le};this.sort(ee)}},M.SortByValue=function(E){if(this.length){let F=function(ee){var $=ee.Text;return $=c($)?parseFloat($):$,$},U=function(ee,$){var V=0,le,fe;return le=F(ee),fe=F($),le<fe?V=-1:fe<le&&(V=1),E&&(V=E.toUpperCase()=="DESC"?0-V:V),V};this.sort(U)}},M.SortByNode=function(E,F){if(this.length){let U=function($,V){var le=$[V][0].Text;return le=c(le)?parseFloat(le):le,le},ee=function($,V){var le=0,fe,xe;return fe=U($,E),xe=U(V,E),fe<xe?le=-1:xe<fe&&(le=1),F&&(le=F.toUpperCase()=="DESC"?0-le:le),le};this.sort(ee)}}},I=function(M,E){var F,U,ee,$="";if(!E)return null;if(E.attributes.length>0&&L(M,E),M.Text="",E.hasChildNodes()){var V=E.childNodes.length-1,le=0;do switch(U=E.childNodes[le],U.nodeType){case 1:M._children=[],F=U.localName?U.localName:U.baseName,F=w(F),$!=F&&M._children.push(F),M[F]||(M[F]=[]),ee={},M[F].push(ee),U.attributes.length>0&&L(ee,U),M[F].contains||O(M[F]),$=F,U.hasChildNodes()&&I(ee,U);break;case 3:M.Text+=f(U.nodeValue);break;case 4:M.Text+=U.text?f(U.text):f(U.nodeValue);break}while(le++<V)}};if(!P)return null;var m={};m.typeOf="JSXBObject";var T=P.nodeType==9?P.documentElement:P;if(m.RootName=T.nodeName||"",P.nodeType==3||P.nodeType==4)return P.nodeValue;var D=function(){var M={activate:function(){var E=[];return E&&(E.getNodesByAttribute=function(F,U){if(!!E&&E.length>0){var ee=[],$,V=E.length-1;try{do $=E[V],$[F]===U&&ee.push($);while(V--);return ee.reverse(),ee}catch(le){return null}return null}},E.getNodeByAttribute=function(F,U){if(!!E&&E.length>0){var ee,$=E.length-1;try{do if(ee=E[$],ee[F]===U)return ee;while($--)}catch(V){return null}return null}},E.getNodesByValue=function(F){if(!!E&&E.length>0){var U=[],ee,$=E.length-1;try{do ee=E[$],!!ee.Text&&ee.Text===F&&U.push(ee);while($--);return U}catch(V){return null}return null}},E.contains=function(F,U){if(!!E&&E.length>0){var ee=E.length-1;try{do if(E[ee][F]===U)return!0;while(ee--)}catch($){return!1}return!1}},E.indexOf=function(F,U){var ee=-1;if(!!E&&E.length>0){var $=E.length-1;try{do E[$][F]===U&&(ee=$);while($--)}catch(V){return-1}return ee}},E.SortByAttribute=function(F,U){if(!!E&&E.length>0){let ee=function(V,le){var fe=V[le];return fe=bam.validation.isNumeric(fe)?parseFloat(fe):fe,fe},$=function(V,le){var fe,xe;fe=ee(V,F),xe=ee(le,F);var W=fe<xe?-1:xe<fe?1:0;return U&&(W=U.toUpperCase()==="DESC"?0-W:W),W};E.sort($)}},E.SortByValue=function(F){if(!!E&&E.length>0){let U=function($){var V=$.Text;return V=bam.validation.isNumeric(V)?parseFloat(V):V,V},ee=function($,V){var le,fe;le=U($),fe=U(V);var xe=le<fe?-1:fe<le?1:0;return F&&(xe=F.toUpperCase()==="DESC"?0-xe:xe),xe};E.sort(ee)}},E.SortByNode=function(F,U){if(!!E&&E.length>0){let ee=function(V,le){var fe=V[le][0].Text;return fe=bam.validation.isNumeric(fe)?parseFloat(fe):fe,fe},$=function(V,le){var fe,xe;fe=ee(V,F),xe=ee(le,F);var W=fe<xe?-1:xe<fe?1:0;return U&&(W=U.toUpperCase()==="DESC"?0-W:W),W};E.sort($)}}),E}};return M}(),h=function(){var M=v(D);return M.activate()};return I(m,T),P=null,T=null,m}catch(f){return null}},textToXML:function(P){var m=null;try{m=document.all?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser,m.async=!1}catch(D){throw new Error("XML Parser could not be instantiated")}var T;try{document.all?T=m.loadXML(P)?m:!1:T=m.parseFromString(P,"text/xml")}catch(D){throw new Error("Error parsing XML string")}return T}};return k}();import{showSaveFilePicker as Kt}from"https://cdn.jsdelivr.net/npm/native-file-system-adapter/mod.js";var w1=function(){let v=[{name:"valapalagilaka",search:"с╣Щ",replace:()=>"r"},{name:"short e",search:"с║╜",replace:()=>"e"},{name:"short o",search:"├╡",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б e",search:"├к",replace:()=>"e"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б o",search:"├┤",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б ai",search:"├К",replace:()=>"E"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б au",search:"├Ф",replace:()=>"O"},{name:"candrabindu",search:"m╠Р",replace:()=>"M"},{name:"oс╣Гk─Бras",search:"oс╣Б",replace:()=>"oM"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"(?:kK|gG|cC|jJ|wW|qQ|tT|dD|pP|bB)",replace:D=>D[0].slice(-1)},{name:"geminated m after h",search:"(?:Mhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rfi]|p[aA])tt|tt(?=[rvy]\\S)",replace:D=>`${D[1]}t`},{name:"geminated consonants after r",search:"([rf]\\s*)([kgcjwqdpbRnmyvl])\\2{1,2}",replace:D=>`${D[1]}${D[2]}`},{name:"final nasal variants",search:"(?:M[lSs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnNYR](?=[pPbBmdDtTnwWqQcCjJkKgG])",replace:()=>"M"},{name:"final anusv─Бra variants",search:"M?[mN](?!\\S)|n(?=\\s+[tdn])|Y(?=\\s+[jc])",replace:()=>"M"},{name:"visarga aс╕е before voiced consonants",search:"(?<!\\sB)(?:a[Hr]|[o])(?=\\s+['gGjJqQdDnbBmrylvh])",replace:()=>"aH"},{name:"visarga aс╕е before vowels",search:"aH(?=\\s+[AiIeuUof])",replace:()=>"a"},{name:"visarga aс╕е before unvoiced consonants and space + anusv─Бra",search:"o\\s+(?=[kKcCwWtTpPszSM])",replace:()=>"aH a"},{name:"visarga ─Бс╕е variants",search:"AH(?=\\s+[aAiIeEuUogGjJqQdDbBnmyrlvh])",replace:()=>"A"},{name:"other visarga variants",search:"H?[rszS](?!\\S)",replace:()=>"H"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"z(?=[kK])|s(?=s)",replace:()=>"H"},{name:"final au/─Бv",search:"Av(?!\\S)",replace:()=>"O"},{name:"final su",search:"(?<=[sz])v(?=\\s+[aAiIuUoOeE])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aAuUoOeE])",replace:()=>"y"},{name:"kcch/k┼Ы",search:"k(\\s*)(?:S|c?C)",replace:D=>`k${D[1]}S`},{name:"c┼Ы/t┼Ы",search:"[tc](\\s*)S",replace:D=>`c${D[1]}C`},{name:"cch/ch",search:"([aAiIuUeEoO])C",replace:D=>`${D[1]}cC`},{name:"final t + hi",search:"d(\\s+)D(?=[iy](?:\\s|$))",replace:D=>`t${D[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aAiIeEuUoOgGdDbByrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:D=>`${D[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aAuUeEoO])",replace:()=>"i"},{name:"bhd for bdh",search:"Bd",replace:()=>"bD"}],c=[{name:"valapalagilaka",search:"с╣Щ",replace:()=>"r"},{name:"short e",search:"с║╜",replace:()=>"e"},{name:"short o",search:"├╡",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б e",search:"├к",replace:()=>"e"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б o",search:"├┤",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б ai",search:"a├о",replace:()=>"ai"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б au",search:"a├╗",replace:()=>"au"},{name:"candrabindu",search:"m╠Р",replace:()=>"с╣Г"},{name:"oс╣Гk─Бras",search:"oс╣Б",replace:()=>"oс╣Г"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"([kgcjс╣нс╕Нtdpb]){2}h",replace:D=>`${D[1]}h`},{name:"geminated m after h",search:"(?:с╣Гhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rс╣Ыi]|p[a─Б])tt|tt(?=[rvy]\\S)",replace:D=>`${D[1]}t`},{name:"geminated consonants after r",search:"([rс╣Ы]\\s*)([kgcjс╣нс╕Нс╣Зtdnpbmyvl])\\2{1,2}",replace:D=>`${D[1]}${D[2]}`},{name:"final nasal variants",search:"(?:с╣Г[lс╣гs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnс╣Е├▒с╣З](?=[pbmdtnс╣нс╕Нcjkg])",replace:()=>"с╣Г"},{name:"final anusv─Бra variants",search:"с╣Г?[mс╣Е](?!\\S)|n(?=\\s+[tdn])|├▒(?=\\s+[jc])",replace:()=>"с╣Г"},{name:"visarga aс╕е before voiced consonants",search:"(?:a[с╕еr]|[o])(?=\\s+['gjс╕Нdnbmyrlvh])",replace:()=>"aс╕е"},{name:"visarga aс╕е before vowels",search:"aс╕е(?=\\s+[─Бi─лeu┼лoс╣Ы])",replace:()=>"a"},{name:"visarga aс╕е before unvoiced consonants and space + anusv─Бra",search:"o\\s+(?=[kcс╣нtp┼Ыс╣гsс╣Г])",replace:()=>"aс╕е a"},{name:"visarga ─Бс╕е variants",search:"─Бс╕е(?=\\s+[a─Бi─лeu┼лogjс╕Нdnbmyrlvh])",replace:()=>"─Б"},{name:"other visarga variants",search:"с╕е?[r┼Ыс╣гs](?!\\S)",replace:()=>"с╕е"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"с╣г(?=k)|s(?=s)",replace:()=>"s"},{name:"final au/─Бv",search:"─Бv(?!\\S)",replace:()=>"au"},{name:"final su",search:"(?<=[sс╣г])v(?=\\s+[a─Бi─лu┼лoe])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[a─Бu┼лeo])",replace:()=>"y"},{name:"kcch/k┼Ы",search:"k(\\s*)(?:┼Ы|c?ch)",replace:D=>`k${D[1]}┼Ы`},{name:"c┼Ы/t┼Ы",search:"[tc](\\s*)┼Ы",replace:D=>`c${D[1]}ch`},{name:"cch/ch",search:"([a─Бi─лu┼лeo])ch",replace:D=>`${D[1]}cch`},{name:"final t + hi",search:"d(\\s+)dh(?=[iy](?:\\s|$))",replace:D=>`t${D[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[a─Бi─лeu┼лogdbyrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:D=>`${D[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[a─Бu┼лeo])",replace:()=>"i"},{name:"bhd for bdh",search:"bhd",replace:()=>"bdh"}],k={none:{name:"remove spaces",search:"\\s",replace:()=>""},collapse:{name:"collapse spaces",search:"\\s+",replace:()=>" "}},P=function(D,h){let f=h.join(""),w=[],L=[...f.matchAll(D.search)],O=0,I=null;for(let M of h){let E=O+M.length,F=M,U=0;if(I)if(I.length<=M.length)F=m(M,0,I.length,I.text),U=I.text.length-I.length,I=null;else{F=I.text.slice(0,M.length);let $=I.text.slice(M.length);I={length:I.length-M.length,text:$};continue}for(;L.length>0&&L[0].index<E;){let ee=L.shift(),$=ee.index-O+U,V=D.replace(ee);if(ee.index+ee[0].length<E)F=m(F,$,ee[0].length,V),U=U+V.length-ee[0].length;else{let le=M.length-$+U,fe=V.slice(0,le);F=F.slice(0,$)+fe;let xe=V.slice(le);I={length:ee[0].length-le,text:xe}}}w.push(F),O=E}return w},m=function(D,h,f,w){return D.slice(0,h)+w+D.slice(h+f)};return function(D){let h=D.map(f=>ze.t(f,"iast","slp1"));for(let f of[...v,k.none])h=P(f,h);return h.map(f=>ze.t(f,"slp1","iast"))}}();var Bt={smush:function(v,c){return v.toLowerCase().replace(/([с╕Нdrmvynhs]) ([a─Бi─лu┼лс╣Ыeo├й├│])/g,"$1$2"+c).replace(/([kgcjс╣нс╕Нtdpb]) h/g,"$1тАМ"+c+"h").replace(/([kgcj├▒с╕Нtdnpbmrlyv┼Ыс╣гsс╣Щ]) ([kgcjс╣нс╕Нtdnpbmyrlv┼Ыс╣гshс╕╗])/g,"$1"+c+"$2").replace(/([o├│e├й─Б]) ([с╣Г'])/g,"$1"+c+"$2").replace(/^с╣Г/,"'тАНс╣Г").replace(/^с╕е/,"'тАНс╕е").replace(/^_y/,"'тАНy").replace(/├╝/g,"тАМu").replace(/├п/g,"тАМi").replace(/_{1,2}(?=\s*)/g,function(k){if(k==="__")return"тАН";if(k==="_")return"тАМ"})},iast:function(v,c){let k=c||"devanagari";return ze.t(v,k,"iast",{skip_sgml:!0})},devanagari:function(v,c){let k=c||"",P={skip_sgml:!0},m=v.replace(/с╣Щ/g,"r").replace(/^_─Б/,"рд╜тАНрд╛"),T=Bt.smush(m,k);return ze.t(T,"iast","devanagari",P).replace(/┬п/g,"ъг╗")},malayalam:function(v,c){let k=c||"",P={skip_sgml:!0},m={р┤Х:"р╡┐",р┤д:"р╡╜",р┤и:"р╡╗",р┤о:"р╡Ф",р┤░:"р╡╝"},T=v.replace(/^_─Б/,"р┤╜тАНр┤╛"),D=Bt.smush(T,k).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"r").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return ze.t(D,"iast","malayalam",P).replace(/(^|[^р╡Н])р┤░р╡Н(?=\S)/g,"$1р╡О").replace(/([р┤Хр┤др┤ир┤ор┤░])р╡Н(?![^\s\u200C,тАФтАЩтАХ])/g,function(f,w){return m[w]})},grantha:function(v,c){let k=c||"",P={skip_sgml:!0},m=new Map([["р┤╕","юЗУ"],["р┤░","р╡╝"],["р┤п","юЗЛ"],["р┤Ъ","юЖ╢"],["р┤ж","юЗВ"],["р┤╢","юЗТ"]]),T=new RegExp("(["+[...m.keys()].join("")+"])р╡Н(?![^тАМ ,тАФтАЩтАХ])","g"),D=v.replace(/^_─Б/,"р┤╜тАНр┤╛"),h=Bt.smush(D,k).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"r").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return ze.t(h,"iast","malayalam",P).replace(/(^|[^р╡Н])р┤░р╡Н(?=\S)/g,"$1р╡О").replace(T,(w,L)=>m.get(L)).replace(/р┤Хр╡Нр┤╖р┤┐/g,"роХрпНро╖ро┐")},telugu:function(v,c){var k=c||"";let P={skip_sgml:!0},m=v.replace(/^_─Б/,"р░╜тАНр░╛"),T=Bt.smush(m,k).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"rтАН").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return ze.t(T,"iast","telugu",P)}},Ot=function(v,c,k=!1,P="sa"){let m=Bt[c],T=v.cloneNode(!0),D=function(h,f){let w=h.childNodes;for(let L of w)if(L.nodeType!==8){if(L.nodeType===3){if(f!=="sa")continue;L.data=m(L.data,k)}else if(L.hasChildNodes()){let O=L.getAttribute("lang")||f;O==="sa"&&L.classList.contains("subst")&&K1(L,c),D(L,O)}}};return D(T,P),T},C1=function(v,c=!1){if(v.nodeType===3)return v;let k=document.createTreeWalker(v,NodeFilter.SHOW_TEXT,null,!1);if(c){let P;for(;k.nextNode();)P=k.currentNode;return P}else return k.nextNode},K1=function(v,c){if(v.firstChild.nodeType!==3&&v.lastChild.nodeType!==3)return;let k=v.childNodes,P=/^[a─Бi─лu┼лeoс╣Ыс╣Эс╕╖с╣Гс╕е]/,m=/[kgс╣Еcj├▒с╣нс╕Нс╣Зtdnpbmyrlvс╣г┼Ыsh]$/,T=["─Б","i","─л","e","o","_","ai","au"],D=["h","k","┼Ы","y","g","gh","c","ch","jh","с╣нh","с╕Н","с╕Нh","t","th","d","dh","n","p","ph","bh","m","r","с╕╗","v","с╣г","s"];var h=!1,f=[],w=[];let L=k[0].nodeType===3;for(let O of k){if(O.nodeType>3)continue;let I=O.textContent.trim();if(I!==""){if(I==="a"){O.textContent="";continue}if(I.match(m)){let M=C1(O,!0);M.textContent=M.textContent.replace(/\s+$/,"")+"a",c==="telugu"&&D.indexOf(I)>=0&&f.push(O)}if(O===v.lastChild&&O.nodeType===3){let M=document.createElement("span");M.appendChild(O.cloneNode(!1)),v.replaceChild(M,O),O=M,O.classList.add("aalt")}else L&&I.match(P)&&O.classList.add("aalt");switch(c){case"devanagari":(I==="i"||I==="├й")&&w.unshift(O);break;case"grantha":case"malayalam":if(I==="e"||I==="ai")w.unshift(O);else if(I==="o"){let M=O.cloneNode(!0);_1("o","e",M),w.unshift(M),_1("o","─Б",O)}break;case"telugu":!h&&T.indexOf(I)>=0&&(h=!0);break}}}for(let O of w)v.insertBefore(O,v.firstChild);if(h)for(let O of f){let I=C1(O,!0);I.textContent=I.textContent+"тАНр▒Н"}},_1=function(v,c,k){let P=document.createTreeWalker(k,NodeFilter.SHOW_TEXT,null,!1);for(;P.nextNode();)P.currentNode.textContent.match(v)&&(P.currentNode.textContent=c)};"use strict";var Z1=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,115,116,114,105,112,45,115,112,97,99,101,32,101,108,101,109,101,110,116,115,61,34,42,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,47,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,97,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,45,45,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,33,45,45,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,45,45,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),k1=Z1;"use strict";var en=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,32,32,32,32,60,120,115,108,58,111,117,116,112,117,116,32,105,110,100,101,110,116,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,72,101,97,100,101,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,120,101,110,111,68,97,116,97,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),S1=en;"use strict";var tn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,97,98,108,101,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,114,101,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,100,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,115,101,108,101,99,116,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,104,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,99,111,112,101,34,62,114,111,119,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,114,97,103,103,97,98,108,101,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,100,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,97,114,101,110,116,58,58,120,58,99,108,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,39,49,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,115,116,97,114,116,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,101,110,100,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,105,110,116,101,114,110,97,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,105,110,115,105,103,110,105,102,105,99,97,110,116,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,105,110,115,105,103,110,105,102,105,99,97,110,116,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,98,105,110,97,114,121,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,98,105,110,97,114,121,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),A1=tn;"use strict";var nn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,116,114,101,101,45,118,101,114,115,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,108,97,110,103,34,62,101,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,91,118,101,114,115,101,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,93,60,47,120,115,108,58,116,101,120,116,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),P1=nn;"use strict";var rn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,101,109,101,110,100,101,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,110,111,116,40,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,105,110,118,105,115,105,98,108,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,48,48,65,48,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,55,51,59,60,47,120,115,108,58,116,101,120,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,99,108,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,114,111,117,112,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),E1=rn;"use strict";var sn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),R1=sn;var wt=function(v){let k=new DOMParser().parseFromString(v,"text/xml"),P=new XSLTProcessor;return P.importStylesheet(k),P},L1=function(v,c){this.transformString=function(k,P){let m=v.xml.createElementNS(c.teins,"ab");return m.innerHTML=k,P.transformToFragment(m,document)},this.sheets={csv:wt(k1),xml:wt(S1),matrix:wt(A1),lemma:wt(E1),lg:wt(R1),tree:wt(P1)}};var B1=function(v){this.basename=function(){return v.filename.split(/\.[^.]+$/)[0]},this.range=function(c,k){return Array.from(Array(parseInt(k)-parseInt(c)+1).keys(),P=>P+c)},this.maxlemma=function(){return[...this.firsttext().querySelectorAll("w[n]")].length-1},this.lemmata=function(c,k){let P=k||document.querySelector("#views");return c===!1?P.querySelectorAll(".lemma"):P.querySelectorAll(`.lemma[data-n="${c}"]`)},this.tds=function(c,k){let P=k||v.matrix.boxdiv;return c===!1?P.querySelectorAll("td[data-n]"):P.querySelectorAll(`td[data-n="${c}"]`)},this.firsttd=function(c,k){return(k||v.matrix.boxdiv).querySelector(`td[data-n="${c}"]`)},this.tr=function(c){return v.matrix.boxdiv.querySelector(`tr[data-n="${c}"]`)},this.trs=function(c){return(c||v.matrix.boxdiv).querySelectorAll("tr[data-n]")},this.firsttr=function(c){return(c||v.matrix.boxdiv).querySelector("tr[data-n]")},this.lasttr=function(c){return(c||v.matrix.boxdiv).querySelector("tr[data-n]:last-of-type")},this.trWalker=function(c){return document.createNodeIterator(c,NodeFilter.SHOW_ELEMENT,{acceptNode:function(k){if(k.tagName==="TD")return NodeFilter.FILTER_ACCEPT}},!1)},this.textWalker=function(c){return document.createNodeIterator(c,NodeFilter.SHOW_ELEMENT,{acceptNode:function(k){if(k.tagName.toLowerCase()==="w")return NodeFilter.FILTER_ACCEPT}},!1)},this.tei=function(c,k=v.xml){return k.querySelector(`TEI[n="${c}"]`)},this.teis=function(c=v.xml){return c.querySelectorAll("TEI")},this.texts=function(c){return(c||v.xml).querySelectorAll("text")},this.serializedtexts=function(c,k){let P=[...c.querySelectorAll("otu[label]")].map(T=>T.getAttribute("label")),m=[...this.teis()].filter(T=>P.indexOf(T.getAttribute("n"))!==-1);return new Map(m.map(T=>[c.querySelector(`node[label="${T.getAttribute("n")}"]`).getAttribute("id"),[...T.querySelectorAll("w")].map(D=>k&&D.hasAttribute("lemma")?D.getAttribute("lemma"):D.textContent)]))},this.serializedlevels=function(c){return c.map(k=>{if(k instanceof Map){let P=new Map;for(let[m,T]of k)P.set(m.getAttribute("id"),T.map(D=>D.getAttribute("id")));return P}else return k.map(P=>P.getAttribute("id"))})},this.firsttext=function(c){return c?v.xml.querySelector(`[n="${c}"] text`):v.xml.querySelector("text")},this.words=function(c,k){let P=k||v.xml;return c===!1?P.querySelectorAll("w[n]"):P.querySelectorAll(`w[n="${c}"]`)},this.firstword=function(c,k){return(k||v.xml).querySelector(`w[n="${c}"]`)},this.normal=function(c){return(c||document.getElementById("views")).querySelectorAll(".lemma[data-normal], .tree-lemma[data-normal]")},this.htmlreading=function(c,k){return k&&c.dataset.normal?c.dataset.normal:c.IAST.textContent},this.ths=function(){return v.matrix.boxdiv.querySelectorAll("th[data-ref]")},this.firstth=function(c){return v.matrix.boxdiv.querySelector(`th[data-ref="${c}"]`)},this.checkbox=function(c,k){return v.matrix.boxdiv.querySelector(`th[data-ref="${c}"] input.${k}`)},this.highlit=function(){let k=this.firsttr().querySelectorAll(".highlit"),P=new Set;for(let m of k)P.add(m.dataset.n);return P},this.highlitcell=function(){return v.matrix.boxdiv.querySelector("td.highlitcell")},this.highlitrow=function(){let c=this.highlitcell();return c?c.closest("tr"):!1},this.lowhigh=function(c){let k=[...c].sort((T,D)=>parseInt(T)-parseInt(D)),P=parseInt(k[0]),m=k.length>1?parseInt(k[k.length-1]):void 0;return[P,m]},this.readings=function(c,k){let P=k||v.matrix.boxdiv,m=this.tds(c,P);var T=0;let D=new Set;for(let h of m){let f=h.textContent;f!==""&&(T++,D.add(f))}return[T,D.size]},this.attr=function(c,k){let P=this.firsttr();var m=[];for(let T of k)this.firsttd(T,P).dataset[c]==="true"?m.push([T,!0]):m.push([T,!1]);return new Map(m)},this.whichattr=function(c){return c.hasAttribute("n")?"n":c.hasAttribute("data-n")?"data-n":c.hasAttribute("data-ref")?"data-ref":!1},this.clauses=function(c,k=!1){let P=this.firsttext();var m=!1;let T=new Set;for(let D of c){let f=this.firstword(D,P).closest("cl");f?T.add(f):k&&(m=!0)}if(T.size===0)return!1;{let D=[...T].map(h=>{let f=h.querySelectorAll("w");return new Set([...f].map(w=>w.getAttribute("n")))});return m?[null].concat(D):D}},this.clausesToRemove=function(c,k,P=0){let m=new Set;for(let T of c){let D=new Set(T);for(let h of k)D.delete(h);D.size<=P&&m.add(T)}return[...m]},this.empty=function(){let c=new Set,k=[...this.trs()],P=k.map(D=>this.trWalker(D)),m=k[0].querySelector("td:last-of-type").dataset.n;for(let D=0;D<=m;D++){var T=!0;for(let h of P){let f=h.nextNode();T&&f.textContent!==""&&(T=!1)}T&&c.add(D)}return c},this.prevNonempty=function(c,k){for(let P=c;P>=0;P--)if(k[P].textContent!=="")return P;return!1},this.nextNonempty=function(c,k){for(let P=c;P<k.length;P++)if(k[P].textContent!=="")return P;return!1},this.setIntersection=function(...c){let k=c[0];return new Set([...k].filter(P=>{for(let m=1;m<c.length;m++)if(!c[m].has(P))return!1;return!0}))},this.setUnion=function(...c){return new Set(c.reduce((k,P)=>(k=[...k,...P],k),[]))},this.cursorPos=function(c){let k=window.getSelection().getRangeAt(0),P=k.cloneRange();P.selectNodeContents(c);let m=P.toString().length;return P.setEnd(k.endContainer,k.endOffset),[P.toString().length,m]}};var N1=function(){var v,c,k,P;let m={setIntersection:function(...f){let w=f[0];return new Set([...w].filter(L=>{for(let O=1;O<f.length;O++)if(!f[O].has(L))return!1;return!0}))},setUnion:function(...f){return new Set(f.reduce((w,L)=>(w=[...w,...L],w),[]))}},T=function(f,w){let L=new Map;for(let O of c[0]){let I=v.get(O),M=I?[I[f]]:[];L.set(O,new Set(M))}for(let O=1;O<c.length;O++)for(let[I,M]of c[O]){let E=M.map(ee=>L.get(ee)),F=m.setIntersection(...E);if(I===w&&F.size===1)return[...F][0];let U=F.size>0?F:m.setUnion(...E);L.set(I,U)}return L},D=function(f,w){let L=c[0],O=new Map;for(let I of c[c.length-1])O.set(I[0],f.get(I[0]));for(let I=c.length-1;I>1;I--)for(let[M,E]of c[I]){let F=O.get(M);for(let U of E){if(L.indexOf(U)!==-1)continue;let ee=f.get(U),$=m.setIntersection(F,ee),V=$.size>0?$:ee;if(U===w)return V;O.set(U,V)}}return O.get(w)},h=function(f,w){let L=T(w,f);return typeof L=="string"?L:function(I){if(I.size===1)return[...I][0].trim();let M=[...I].map(E=>E.trim()===""?"_":E);return M.length===1?M[0]:"{"+M.join(", ")+"}"}(D(L,f))};onmessage=function(f){v=f.data.readings,c=f.data.levels,k=f.data.num,P=f.data.id,postMessage({n:k,result:h(P,k)})}};function Ht(v){var c=[],k=0;if(this.trie=this.createTrie(v.patterns),this.leftMin=v.leftmin,this.rightMin=v.rightmin,this.exceptions={},v.exceptions)for(c=v.exceptions.split(/,\s?/g);k<c.length;k+=1)this.exceptions[c[k].replace(/\u2027/g,"").toLowerCase()]=new RegExp("("+c[k].split("тАз").join(")(")+")","i")}Ht.prototype.createTrie=function(v){var c=0,k=0,P=0,m=0,T=null,D=null,h=null,f=null,w={_points:[]},L;for(c in v)if(v.hasOwnProperty(c))for(L=v[c].match(new RegExp(".{1,"+ +c+"}","g")),k=0;k<L.length;k+=1){for(T=L[k].replace(/[0-9]/g,"").split(""),D=L[k].split(/\D/),f=w,P=0;P<T.length;P+=1)h=T[P].charCodeAt(0),f[h]||(f[h]={}),f=f[h];for(f._points=[],m=0;m<D.length;m+=1)f._points[m]=D[m]||0}return w};Ht.prototype.hyphenateText=function(v,c){c=c||4;for(var k=v.split(/([a-zA-Z0-9_\u0027\u00AD\u00DF-\u00EA\u00EB\u00EC-\u00EF\u00F1-\u00F6\u00F8-\u00FD\u0101\u0103\u0105\u0107\u0109\u010D\u010F\u0111\u0113\u0117\u0119\u011B\u011D\u011F\u0123\u0125\u012B\u012F\u0131\u0135\u0137\u013C\u013E\u0142\u0144\u0146\u0148\u0151\u0153\u0155\u0159\u015B\u015D\u015F\u0161\u0165\u016B\u016D\u016F\u0171\u0173\u017A\u017C\u017E\u017F\u0219\u021B\u02BC\u0390\u03AC-\u03CE\u03F2\u0401\u0410-\u044F\u0451\u0454\u0456\u0457\u045E\u0491\u0531-\u0556\u0561-\u0587\u0902\u0903\u0905-\u090B\u090E-\u0910\u0912\u0914-\u0928\u092A-\u0939\u093E-\u0943\u0946-\u0948\u094A-\u094D\u0982\u0983\u0985-\u098B\u098F\u0990\u0994-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BE-\u09C3\u09C7\u09C8\u09CB-\u09CD\u09D7\u0A02\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A14-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A82\u0A83\u0A85-\u0A8B\u0A8F\u0A90\u0A94-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABE-\u0AC3\u0AC7\u0AC8\u0ACB-\u0ACD\u0B02\u0B03\u0B05-\u0B0B\u0B0F\u0B10\u0B14-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3E-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B57\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C02\u0C03\u0C05-\u0C0B\u0C0E-\u0C10\u0C12\u0C14-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C43\u0C46-\u0C48\u0C4A-\u0C4D\u0C82\u0C83\u0C85-\u0C8B\u0C8E-\u0C90\u0C92\u0C94-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBE-\u0CC3\u0CC6-\u0CC8\u0CCA-\u0CCD\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D7A-\u0D7F\u1F00-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB2-\u1FB4\u1FB6\u1FB7\u1FBD\u1FBF\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD2\u1FD3\u1FD6\u1FD7\u1FE2-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u200D\u2019]+)/gi),P=0;P<k.length;P+=1)k[P].indexOf("/")!==-1?P!==0&&P!==k.length-1&&!/\s+\/|\/\s+/.test(k[P])&&(k[P]+="тАЛ"):k[P].length>c&&(k[P]=this.hyphenate(k[P]).join("┬н"));return k.join("")};Ht.prototype.hyphenate=function(v){var c,k=[],P,m,T,D,h,f=[],w,L=v.toLowerCase(),O,I,M=Math.max,E=this.trie,F=[""];if(this.exceptions.hasOwnProperty(L))return v.match(this.exceptions[L]).slice(1);if(v.indexOf("┬н")!==-1)return[v];for(v="_"+v+"_",c=v.toLowerCase().split(""),P=v.split(""),w=c.length,m=0;m<w;m+=1)f[m]=0,k[m]=c[m].charCodeAt(0);for(m=0;m<w;m+=1)for(h=E,T=m;T<w&&(h=h[k[T]],h);T+=1)if(O=h._points,O)for(D=0,I=O.length;D<I;D+=1)f[m+D]=M(f[m+D],O[D]);for(m=1;m<w-1;m+=1)m>this.leftMin&&m<w-this.rightMin&&f[m]%2?F.push(P[m]):F[F.length-1]+=P[m];return F};var on=Ht,T1=on;var M1={id:"sa",leftmin:2,rightmin:2,patterns:{2:"a1e1i1o1u1├й1├н1├п1├│1├║1├╝1─Б1─л1┼л1с╕╖1с╕╣1с╣Ы1с╣Э1",3:"2b_2c_2d_2g_2h_2j_2k_2l_2m_2n_2p_2r_2s_2t_2v_2y_2├▒_2┼Ы_2с╕Н_2с╕е12с╕л12с╕╖_2с╣Б12с╣Г12с╣Е_2с╣З_2с╣н_2с║Ц1l╠е1r╠е1",4:"2bh_2ch_2dh_2gh_2jh_2kh_2m╠Р12ph_2rb_2rd_2rg_2rk_2rp_2rt_2rс╕Н_2rс╣н_2th_2с╕Нh_2с╣нh_a2i1a2u1a3├п1a3├╝1l╠е╠Д1r╠е╠Д1"}};window.comboView=function(){let v={teins:"http://www.tei-c.org/ns/1.0",scripts:["iast","devanagari","telugu","grantha","malayalam"]},c={filename:null,xml:null,treelist:new Map,trees:[],textboxes:[],matrix:null,viewdiv:null,descs:null,maxlemma:null,windows:[window],dragged:null,undo:[],redo:[],editing:!1},k=new T1(M1),P=new L1(c,v),m=new B1(c),T=function(a,t,n,r){var s=t,u=n,d=a;r&&(d=d*2,d>=1&&(d-=1,s=n,u=r));let g=u.red-s.red,x=u.green-s.green,C=u.blue-s.blue,B={red:parseInt(Math.floor(s.red+g*d),10),green:parseInt(Math.floor(s.green+x*d),10),blue:parseInt(Math.floor(s.blue+C*d),10)};return"rgb("+B.red+","+B.green+","+B.blue+")"},D=function(){let a=window.getSelection();if(a.isCollapsed)return!1;let t=a.rangeCount>1?a.getRangeAt(1).cloneContents():a.getRangeAt(0).cloneContents();if(!t)return!1;let n=new Set,r=t.querySelectorAll(".lemma");for(let s of r)n.add(s.dataset.n);return n},h=function(){let a=document.getElementById("tooltip");a&&a.remove()},f=function(){let a=document.getElementById("left_menu");a.innerHTML=`<div id="matrixmenu" class="menubox">
    <div class="heading">Matrix</div>
      <ul>
        <li>select CSV/XML file(s): <input type="file" id="file" name="file" accept=".xml,.csv" multiple/></li>
      </ul>
</div>
<div style="display: none" id="mssmenu" class="menubox">
    <div class="heading">Texts</div>
    <ul class="ms">
    </ul>
</div>
<div style="display: none" id="treemenu" class="menubox">
    <div class="heading">Trees</div>
        <ul class="tree">
            <li>select NeXML file: <input type="file" id="treefile" name="treefile" accept=".xml"/></li>
        </ul>
    </div>
`;let t=document.getElementById("menu");t.addEventListener("mouseover",pe.menuMouseover),t.addEventListener("mouseout",pe.menuMouseout),t.addEventListener("click",pe.menuClick),t.querySelector("#file").addEventListener("change",F.bind(null,U),!1),t.querySelector("#treefile").addEventListener("change",F.bind(null,ee),!1)},w={matrix:function(){return c.matrix=new re,c.matrix.init(),c.matrix.show(),document.getElementById("matrixmenu").style.display="none",L(),E.rehighlight(),c.matrix},text:function(a){let t=new X(a);return c.textboxes.push(t),t.init(),t.show(),L(),E.rehighlight(),document.querySelector(".highlit")||pe.textClick({target:t.boxdiv.querySelector(".lemma:not(.invisible)")}),t},tree:function(a,t){let n=new Z(a,t);return c.trees.push(n),n.init(),n.show(),L(),E.rehighlight(),n}},L=function(){for(let a of c.trees)a.draw()},O=function(){let a=window.getSelection?window.getSelection():document.selection;a&&(a.removeAllRanges?a.removeAllRanges():a.empty&&a.empty())},I=function(a){let t=document.createTreeWalker(a,NodeFilter.SHOW_TEXT);for(;t.nextNode();){let n=M(t.currentNode.nodeValue);t.currentNode.nodeValue=n}},M=function(a){return k.hyphenateText(a.replace(/ \|/g,"┬а|").replace(/\| (?=\d)/g,"|┬а").replace(/\|\|/g,"рее").replace(/\|/g,"ред"))},E={getAllWindows:function(){return window.mainWindow?window.mainWindow.comboView.getWindows():c.windows},forEachWindow:function(a){let t=E.getAllWindows();for(let n of t)if(!n.closed&&a(n)===!1)break},highlightLemma:function(a,t){var n=!!t;E.forEachWindow(r=>{let s=r.comboView.getViewdiv().querySelectorAll('[data-n="'+a+'"]');for(let d of s)(!n||!d.classList.contains("invisible"))&&d.classList.add("highlit");let u=r.comboView.getViewdiv().querySelectorAll('[data-n-trans="'+a+'"]');for(let d of u)d.classList.add("translit")})},highlightRange:function(a){if(!a||a.size===0)return;E.unHighlightAll();let[t,n]=m.lowhigh(a);if(n!==void 0)for(let r=t;r<=n;r++)E.highlightLemma(r,!0);else E.highlightLemma(t);E.repopulateTrees(t,n);for(let r of c.viewdiv.querySelectorAll(".text-box"))r.querySelector(".highlit")||r.querySelector('[data-n="'+t+'"]').classList.add("highlit");be.xScroll(t)},highlightAll:function(){se.anyhighlit()?E.unHighlightAll():E.highlightRange(new Set([0,m.maxlemma()]))},unHighlightAll:function(){E.forEachWindow(a=>{let t=a.comboView.getViewdiv().querySelectorAll(".highlit");for(let r of t)r.classList.remove("highlit");let n=a.comboView.getViewdiv().querySelectorAll(".translit");for(let r of n)r.classList.remove("translit");E.unCelllightAll()})},unCelllightAll:function(){E.forEachWindow(a=>{let t=a.comboView.getViewdiv().querySelectorAll(".highlitcell");for(let n of t)n.classList.remove("highlitcell")})},rehighlight:function(){var a;if(E.forEachWindow(n=>{if(a=n.document.querySelectorAll(".highlit"),a.length>0)return!1}),a.length>0){var t=new Set;for(let n of a)t.add(n.dataset.n);E.highlightRange(t)}},clearTrees:function(){E.forEachWindow(a=>{let t=a.comboView.getTrees();for(let n of t)n.clearlemmata()})},repopulateTrees:function(a,t){E.forEachWindow(n=>{let r=n.comboView.getTrees();for(let s of r)s.populate(a,t),s.colourizeVariants(a,t),s.updatescript()})},highlightTreeLemma:function(a){E.forEachWindow(t=>{let n=t.comboView.getTrees();for(let r of n){let s=r.boxdiv.querySelector('.tree-lemma[data-id="'+a+'"]'),u=r.boxdiv.querySelectorAll(".tree-lemma");for(let d of u)(s.dataset.nodes&&d.dataset.nodes===s.dataset.nodes||!s.dataset.nodes&&d.dataset.id===s.dataset.id)&&d.classList.add("highlit");r.clearLabels()}})},unhighlightTrees:function(){E.forEachWindow(a=>{let t=a.comboView.getViewdiv().querySelectorAll(".tree-lemma.highlit");for(let r of t)r.classList.remove("highlit");let n=a.comboView.getTrees();for(let r of n)r.clearLabels()})}},F=function(a,t){let n=t.target.files[0],r=[...t.target.files].slice(1),s=new FileReader;s.onload=a.bind(null,n,r),s.readAsText(n)},U=function(a,t,n){c.filename=a.name,document.title=document.title+`: ${c.filename}`,c.filename.split(".").pop()==="csv"?V(a,t,n):le(a,t,n)},ee=function(a,t,n){let r=n.target.result,u=new DOMParser().parseFromString(r,"text/xml"),d=c.xml.querySelector("teiHeader > xenoData")||function(){let x=c.xml.querySelector("teiHeader")||function(){let B=c.xml.createElementNS(v.teins,"teiHeader");return c.xml.documentElement.appendChild(B),B}(),C=c.xml.createElementNS(v.teins,"xenoData");return x.appendChild(C),C}(),g=c.xml.createElementNS(v.teins,"stemma");g.setAttribute("format","nexml"),g.id="stemma"+[...d.querySelectorAll("stemma")].length,g.appendChild(u.firstChild.cloneNode(!0)),d.appendChild(g),$(u,g.id)},$=function(a,t,n=!0){let r=a.querySelectorAll("tree"),s=document.querySelector("#treemenu ul");for(let u of r){let d=u.id,g=a.cloneNode(!0);for(let B of g.querySelectorAll("tree"))B.id!==d&&B.parentNode.removeChild(B);let x=u.getAttribute("label")||"New Tree "+c.treelist.size;c.treelist.set(`#${t} #${d}`,g);let C=document.createElement("li");C.dataset.name=x,C.dataset.treeid=d,C.dataset.stemmaid=t,C.appendChild(document.createTextNode(x)),s.insertBefore(C,s.lastElementChild),n&&w.tree(t,d)}},V=function(a,t,n){let r=Qt.parse(n.target.result,{delimiter:","});c.xml=document.implementation.createDocument(v.teins,"",null);let s=c.xml.createElementNS(v.teins,"teiCorpus"),u=c.xml.createElementNS(v.teins,"teiHeader");s.appendChild(u),c.xml.appendChild(s);for(let d of r){let g=d[0],x=d.slice(1),C=c.xml.createElementNS(v.teins,"TEI");C.setAttribute("n",g);let B=c.xml.createElementNS(v.teins,"text");for(let H=0;H<x.length;H++){let G=x[H],ie=c.xml.createElementNS(v.teins,"w");G&&ie.appendChild(document.createTextNode(G)),ie.setAttribute("n",H),B.appendChild(ie)}C.appendChild(B),s.appendChild(C)}c.xml.normalize(),c.maxlemma=m.maxlemma(),W()},le=function(a,t,n){let r=new DOMParser;c.xml=r.parseFromString(n.target.result,"text/xml");let s=c.xml.querySelectorAll("teiHeader xenoData stemma nexml");for(let u of s){let d=document.implementation.createDocument("http://www.nexml.org/2009","",null);d.appendChild(u.cloneNode(!0)),$(d,u.closest("stemma").id,!1)}c.maxlemma=m.maxlemma(),t.length>0?fe(t):W()},fe=function(a){let t=a[0],n=a.slice(1),r=function(d,g){let x=new Set(d);for(let C of g)x.delete(C);return x},s=function(d,g){let C=new DOMParser().parseFromString(g.target.result,"text/xml"),B=new Map;for(let ve of m.teis()){let Ee=ve.getAttribute("n");B.set(Ee,ve)}let H=new Set(B.keys()),G=new Map;for(let ve of C.querySelectorAll("TEI")){let Ee=ve.getAttribute("n");G.set(Ee,ve)}let ie=new Set(G.keys()),oe=r(H,ie),de=r(ie,H);for(let ve of de)ke.tei(ve);let ye=[...C.querySelector("text").querySelectorAll("w[n]")].length,we=c.maxlemma+ye;for(let[ve,Ee]of G)if(B.has(ve)){let Te=B.get(ve).querySelector("text"),Re=Ee.querySelector("text").querySelectorAll("w[n]");var Ae=c.maxlemma+1;for(let De of Re)De.setAttribute("n",Ae),Te.appendChild(De),Ae=Ae+1}else{let Te=c.xml.createElementNS(v.teins,"TEI");Te.setAttribute("n",ve);let Ne=c.xml.createElementNS(v.teins,"text");ke.emptywords(Ne,we,0),Te.appendChild(Ne),c.xml.documentElement.appendChild(Te)}for(let ve of oe){let Ee=B.get(ve).querySelector("text");ke.emptywords(Ee,we,c.maxlemma+1)}c.maxlemma=m.maxlemma(),d.length>0?fe(d):W()},u=new FileReader;u.onload=s.bind(null,n),u.readAsText(t)},xe=function(){var a="";let t=[...m.teis()].map(n=>n.getAttribute("n"));for(let n of t)a+=`<li data-name="${n}">${n}</li>`;document.getElementById("menu").querySelector(".ms").innerHTML=a},W=function(){xe();let a=new Ce("Export");a.populate([{text:"TEI corpus",func:me.showOptions.bind(null,me.xml,me.options)},{text:"TEI apparatus",func:me.showOptions.bind(null,me.xml,me.appOptions)},{text:"CSV",func:me.showOptions.bind(null,me.csv,me.options)},{text:"NEXUS",func:me.showOptions.bind(null,me.nexus,me.options)}]);let t=new Ce("Edit");t.populate([{text:"Undo",greyout:se.undo,func:q.undo},{text:"Redo",greyout:se.redo,func:q.redo},{text:"Select all",alt:"Deselect all",toggle:se.anyhighlit,func:E.highlightAll},{text:"(Re)normalize columns",greyout:se.anyhighlit,func:q.startRenormalize.bind(null,!1)},{text:"Delete column",greyout:se.anyhighlit,func:q.startRemoveCol.bind(null,!1)},{text:"Delete empty columns",func:q.startRemoveEmpty},{text:"Merge columns",greyout:se.manyhighlit,func:q.startMerge.bind(null,!1)},{text:"Group columns",alt:"Ungroup columns",greyout:se.oneGrouped,toggle:se.grouped,func:q.startGroup.bind(null,!1)},{text:"Group words",func:q.doGroupWords},{text:"Edit cell",greyout:se.highlitcell,func:q.startEditCell.bind(null,!1)},{text:"Insert row",func:q.startNewRow},{text:"Insert column",greyout:se.anyhighlit,func:q.startInsertCol},{text:"Mark insignificant",checkbox:se.checkbox.bind(null,"insignificant",!1),greyout:se.anyhighlit,func:q.startMarkAs.bind(null,"insignificant",!1)},{text:"Mark binary",checkbox:se.checkbox.bind(null,"binary",!1),greyout:se.anyhighlit,func:q.startMarkAs.bind(null,"binary",!1)}]);let n=new Ce("View");n.populate([{text:"Header",checkbox:se.headerView,func:be.toggleHeader},{text:"Normalized",checkbox:se.normalizedView,greyout:se.anyNormalized,func:be.toggleNormalize}]);let r=document.getElementById("left_menu");r.appendChild(n.box),r.appendChild(t.box),r.appendChild(a.box);let s=document.getElementById("views");s.style.justifyContent="flex-start",s.removeChild(s.querySelector("#splash")),w.matrix();let u=document.getElementById("matrixmenu");u.addEventListener("click",w.matrix),u.removeChild(u.querySelector("ul")),document.getElementById("mssmenu").style.display="block",document.getElementById("treemenu").style.display="block"},me={write:async function(a,t){let n=await t.createWritable();n.write(a),n.close()},xml:async function(a){let t=new XMLSerializer().serializeToString(P.sheets.xml.transformToDocument(a)),n=new Blob([t],{type:"text/xml;charset=utf-8"}),r=m.basename()+".xml",s=await Kt({_preferPolyfill:!1,suggestedName:r,types:[{description:"TEI XML",accept:{"text/xml":[".xml"]}}]});me.write(n,s)},csv:async function(a){let t=P.sheets.csv.transformToDocument(a).documentElement.textContent,n=new Blob([t],{type:"text/csv;charset=utf-8"}),r=m.basename()+".csv",s=await Kt({_preferPolyfill:!1,suggestedName:r,types:[{description:"CSV file",accept:{"text/csv":[".csv"]}}]});me.write(n,s)},nexus:async function(a){let t=[...m.texts(a)],n=t.length,r="0 1 2 3 4 5 6 7 8 9 A B C D E F G H K L M N P Q R S T U V W X Y Z a b c d e f g h k l m n p q r s t u v w x y z",[s,...u]=r.split(" "),d="-",g=t.map(Ae=>"'"+Ae.parentElement.getAttribute("n")+"'"),x=t.map(Ae=>m.textWalker(Ae)),C=t[0].querySelectorAll("w").length,B=[],H=g.map(Ae=>[Ae+" "]);for(let Ae=0;Ae<C;Ae++){let ve=new Set,Ee=[];for(let Ne=0;Ne<x.length;Ne++){let De=x[Ne].nextNode(),qe=ze.t(De.textContent.trim().toLowerCase(),"iast","hk").replace(/'/g,"()");Ee.push(qe),qe!==""&&qe!=="[]"&&ve.add(qe)}B.push(["[]",...ve]);let Te=new Map([...ve].map((Ne,Re)=>[Ne,u[Re]]));for(let Ne=0;Ne<Ee.length;Ne++){let Re=(De=>{switch(Ee[De]){case"":return d;case"[]":return s;default:return Te.get(Ee[De])}})(Ne);H[Ne].push(Re)}}let G=B.map((Ae,ve)=>ve+1+" / "+[...Ae].map(Ee=>`'${Ee}'`).join(" ")).join(`,
`),ie=H.map(Ae=>Ae.join("")).map(Ae=>Ae.replace(/0{8,}/g,ve=>ve.replace(/0/g,"-"))).reduce((Ae,ve)=>Ae+`
`+ve),oe=`#NEXUS

BEGIN TAXA;
  DIMENSIONS NTAX=${n};
  TAXLABELS ${g.join(" ")};
END;

BEGIN CHARACTERS;
  DIMENSIONS
    NCHAR=${C};
  FORMAT 
    DATATYPE=STANDARD 
    RESPECTCASE 
    GAP=${d} 
    MISSING=? 
    SYMBOLS="${r}";
  CHARSTATELABELS
${G}
;
MATRIX
${ie}
;
END;
`,de=new Blob([oe],{type:"text/nexus;charset=iso8859-1"}),ye=m.basename()+".nex",we=await Kt({_preferPolyfill:!1,suggestedName:ye,types:[{description:"NEXUS file",accept:{"text/nexus":[".nex"]}}]});me.write(de,we)},processOptions:function(a){let t=c.xml.cloneNode(!0);if(a.get("option_normalize")){let n=t.querySelectorAll("w[lemma]");for(let r of n)r.textContent=r.getAttribute("lemma")}if(a.get("option_mergegroups")){let n=t.querySelectorAll("cl");for(let r of n){let s=r.removeChild(r.firstChild);for(;r.firstChild;){let u=s.getAttribute("lemma")||s.textContent,d=r.firstChild.getAttribute("lemma")||r.firstChild.textContent;for(s.setAttribute("lemma",u+d);r.firstChild.firstChild;)s.appendChild(r.firstChild.firstChild);r.firstChild.remove()}s.getAttribute("lemma")===s.textContent&&s.removeAttribute("lemma"),r.parentNode.insertBefore(s,r),r.parentNode.removeChild(r)}}if(a.get("option_insignificant")){let n=t.querySelectorAll('w[insignificant="true"]');for(let r of n)r.parentNode.removeChild(r)}if(a.get("option_binary")){let r=[...m.firsttext().querySelectorAll('w[binary="true"]')].map(s=>s.getAttribute("n"));for(let s of r){let u=t.querySelectorAll(`w[n="${s}"]:not(:empty)`);if(u.length===0)continue;let d=`[${u[0].textContent}]`;for(let g of u)g.textContent=d}}if(a.get("option_noempty")){let n=t.querySelectorAll("w:empty");for(let r of n)r.textContent="[]"}return a.get("option_basetext")?me.makeApp(a,t):t},makeHeader(a,t){let n=a.createElementNS(v.teins,"teiHeader"),r=a.createElementNS(v.teins,"fileDesc"),s=a.createElementNS(v.teins,"sourceDesc"),u=a.createElementNS(v.teins,"listWit");for(let d of m.teis(t)){let g=d.getAttribute("n"),x=a.createElementNS(v.teins,"witness");x.setAttribute("xml:id",g);let C=a.createElementNS(v.teins,"idno");C.setAttribute("type","siglum"),C.append(g),x.appendChild(C),u.appendChild(x)}return s.appendChild(u),r.appendChild(s),n.appendChild(r),n},makeApp(a,t){let n=a.get("option_basetext"),r=m.tei(n,t),s=a.get("option_app_normalize"),u=document.implementation.createDocument(v.teins,"",null);u.appendChild(r);let d=me.makeHeader(u,t);r.insertBefore(d,r.firstChild);let g=m.words(!1,r);for(let x of g){let C=x.getAttribute("n"),B=s&&x.getAttribute("lemma")||x.textContent,H=[],G=new Map,ie=m.words(C,t);for(let oe of ie){let de=oe.closest("TEI").getAttribute("n");if(s&&oe.getAttribute("lemma")===B)H.push(de);else if(oe.textContent===B)H.push(de);else{let ye=oe.textContent===""?"[om.]":oe.textContent,we=G.get(ye)||[];we.push(de),G.set(ye,we)}}if(G.size===0)for(;x.firstChild;)x.parentElement.insertBefore(x.firstChild,x);else{let oe=u.createElementNS(v.teins,"app");oe.setAttribute("n",C);let de=u.createElementNS(v.teins,"lem"),ye=H.map(we=>`#${we}`).join(" ");for(ye!==""&&de.setAttribute("wit",ye);x.firstChild;)de.appendChild(x.firstChild);oe.appendChild(de);for(let[we,Ae]of G){let ve=u.createElementNS(v.teins,"rdg"),Ee=Ae.map(Te=>`#${Te}`).join(" ");ve.setAttribute("wit",Ee),ve.append(we),oe.appendChild(ve)}x.parentElement.insertBefore(oe,x),de.textContent.match(/\s$/)&&x.parentElement.insertBefore(u.createTextNode(" "),x)}x.remove()}return u},options(){return document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <input type="checkbox" id="option_insignificant" name="option_insignificant"><label for="option_insignificant">Remove insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_binary" name="option_binary"><label for="option_binary">Binarize marked lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_noempty" name="option_noempty"><label for="option_noempty">Gaps are significant</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups"><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`)},appOptions(){let a=document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <label for="option__basetext">Base text</label>
        <select id="option__basetext" name="option_basetext"></select>
      </div>
      <div>
        <input type="checkbox" id="option__app_insignificant" name="option_app_insignificant"><label for="option_app_insignificant">Ignore insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups" checked><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_app_normalize" name="option_app_normalize" checked><label for="option_app_normalize">Normalized spellings in positive apparatus</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings in negative apparatus</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`),t=a.getElementById("option__basetext"),n=[...m.trs()].map(r=>r.dataset.n);for(let r of n){let s=document.createElement("option");s.value=r,s.append(r),t.appendChild(s)}return a},showOptions:function(a,t){let n=t(),r=document.createElement("div");r.id="blackout",r.appendChild(n),document.body.appendChild(r);let s=function(d){d.preventDefault();var g=[];let x=document.getElementById("exportform").elements;for(let B of x)B.type==="checkbox"?g.push([B.name,B.checked]):g.push([B.name,B.value]);let C=me.processOptions(new Map(g));a(C),document.body.removeChild(r)};return r.querySelector("button").addEventListener("click",s),r.addEventListener("click",me.blackoutClick),r},blackoutClick:function(a){if(!a.target.closest(".popup")){let n=document.querySelector("#blackout");n.parentNode.removeChild(n)}}},pe={selectAll(a){let t=document.createRange();t.selectNodeContents(a);let n=window.getSelection();n.removeAllRanges(),n.addRange(t)},deselect(){let a=window.getSelection();a.removeAllRanges?a.removeAllRanges():a.empty&&a.empty()},treeMouseover(a){let t=a.target.classList.contains("tree-lemma")?a.target:a.target.closest(".tree-lemma");t&&(E.highlightTreeLemma(t.dataset.id),t.addEventListener("mouseout",E.unhighlightTrees));let n=a.target.dataset.reconstructed;if(!n)return;let r=document.createElement("div");r.id="tooltip",r.style.top=a.pageY+"px",r.style.left=a.pageX+"px",r.style.opacity=0,r.style.transition="opacity 0.2s ease-in",c.viewdiv.parentElement.appendChild(r);let s=document.createElement("div");if(s.appendChild(document.createTextNode(n)),this.script!==0?r.appendChild(Ot(s,v.scripts[this.script])):r.appendChild(s),a.target.classList.contains("reconstructed")){let u=a.target.parentNode.querySelector("span.tree-lemma");if(u&&u.dataset.hasOwnProperty("emended")){let d=document.createElement("div");d.classList.add("emphasis"),d.appendChild(document.createTextNode(u.textContent)),this.script!==0?r.prepend(Ot(d,v.scripts[this.script])):r.prepend(d)}}window.getComputedStyle(r).opacity,r.style.opacity=1,a.target.addEventListener("mouseout",h)},treeClick(a){a.target.classList.contains("witness")?w.text(a.target.dataset.key):a.target.classList.contains("reconstructed")?w.text(a.target.dataset.label):a.target.classList.contains("internal")&&q.startReconstruction(a),h()},keyDown(a){if(!c.editing&&a.key.substring(0,5)==="Arrow")pe.cycleVariant(a);else if(a.ctrlKey||a.metaKey)a.key==="Z"?q.redo():a.key==="z"&&q.undo();else if(!c.editing&&c.matrix&&!c.matrix.closed&a.key==="Enter"){let t=m.highlitcell();t&&(a.preventDefault(),q.startEditCell(t))}},cycleVariant(a){let t=m.highlitcell()||c.viewdiv.querySelector("td.highlit")||c.viewdiv.querySelector('td[data-n="0"]');switch(a.key){case"ArrowRight":{if(!c.matrix.closed&&t){let n=t.nextElementSibling;n&&pe.textClick({target:n})}else{let n=c.viewdiv.querySelector(".highlit"),r=n?n.dataset.n:0,s=parseInt(r)+1;for(;s<=c.maxlemma;){let u=c.viewdiv.querySelectorAll('[data-n="'+s+'"]');for(let d of u)if(d&&!d.classList.contains("invisible")){pe.textClick({target:d});return}s++}}break}case"ArrowLeft":{if(!c.matrix.closed&&t){let n=t.previousElementSibling;n&&pe.textClick({target:n})}else{let n=c.viewdiv.querySelector(".highlit"),r=n?n.dataset.n:0,s=parseInt(r)-1;for(;s>=0;){let u=c.viewdiv.querySelectorAll('[data-n="'+s+'"]');for(let d of u)if(d&&!d.classList.contains("invisible")){pe.textClick({target:d});return}if(s--,t){pe.textClick({target:t.previousElementSibling});return}}}break}case"ArrowUp":{if(c.matrix.closed||!t)return;let r=t.closest("tr").previousElementSibling;if(!r||!r.dataset.n)return;let s=r.querySelector(`td[data-n="${t.dataset.n}"]`);pe.textClick({target:s});break}case"ArrowDown":{if(c.matrix.closed||!t)return;let r=t.closest("tr").nextElementSibling;if(!r||r.tagName!=="TR")return;let s=r.querySelector(`td[data-n="${t.dataset.n}"]`);pe.textClick({target:s})}}},textClick(a,t=!1){if(a.target.closest("tr.header")){pe.matrixHeaderClick(a);return}let n=a.target.classList.contains("lemma")?a.target:a.target.closest(".lemma");if(n){if(!t&&a.ctrlKey){pe.rightClick(a);return}let r=n.dataset.n,s=m.highlitrow();if(E.unHighlightAll(),E.highlightLemma(r),E.repopulateTrees(r),be.xScroll(r,s),n.tagName==="TD")n.classList.add("highlitcell");else{let u=n.closest(".text-box");if(u){let d=u.dataset.id;m.tr(d).querySelector(`td[data-n="${r}"]`).classList.add("highlitcell")}}}},textMouseup(){let a=D();E.highlightRange(a),O()},menuMouseover(a){let t=a.target.classList.contains("menubox")?a.target:a.target.closest(".menubox");if(t){let n=t.querySelector("ul");n&&(n.style.display="block"),t.classList.add("open")}},menuMouseout(a){let t=a.target.classList.contains("menubox")?a.target:a.target.closest(".menubox");if(t){let n=t.querySelector("ul");n&&(n.style.display="none"),t.classList.remove("open")}},menuClick(a){!a.target.parentElement||(a.target.parentElement.className==="ms"&&(pe.menuMouseout(a),w.text(a.target.dataset.name)),a.target.parentElement.className==="tree"&&(pe.menuMouseout(a),a.target.closest("li[data-name]")&&w.tree(a.target.dataset.stemmaid,a.target.dataset.treeid)))},thDragStart(a){a.dataTransfer.setData("text/plain",a.target.textContent),q.startMoveRow(a.target.parentNode,a)},trDragEnter(a){let t=a.target.nodeType===1?a.target.closest("tr"):a.target.parentElement.closest("tr");t&&t.classList.add("dragenter")},trDragLeave(a){let t=a.target.nodeType===1?a.target.closest("tr"):a.target.parentElement.closest("tr");t&&t.classList.remove("dragenter")},trDragDrop(a){a.preventDefault(),q.finishMoveRow(a)},matrixMousedown(a){if(a.button!==0)return;if(a.ctrlKey){pe.rightClick(a);return}let t=a.target.nodeType===1?a.target.closest(".lemma"):a.target.parentElement.closest(".lemma");if(t){if(t.isContentEditable)return;E.unHighlightAll(),E.highlightLemma(t.dataset.n);let n=c.matrix.boxdiv.querySelector("table");n.addEventListener("mouseover",pe.matrixMouseover),n.addEventListener("mouseup",pe.matrixMouseup)}},matrixMouseup(){let a=m.highlit();E.highlightRange(a);let t=c.matrix.boxdiv.querySelector("table");t.removeEventListener("mouseover",pe.matrixMouseover),t.removeEventListener("mouseup",pe.matrixMouseup)},matrixMouseover(a){let t=a.target.nodeType===1?a.target.closest(".lemma"):a.target.parentElement.closest(".lemma");t&&E.highlightLemma(t.dataset.n)},matrixHeaderClick(a){if(a.target.tagName!=="INPUT")return;let t=a.target.className;if(t!=="insignificant"&&t!=="binary")return;let n=a.target.closest("th").dataset.ref,r=m.firsttd(n).dataset[t]!=="true",s=new Map([[n,r]]);q.doMarkAs(t,s)},rightClick(a){let t=a.target.nodeType===1?a.target.closest("tr[data-n] th"):a.target.parentElement.closest("tr[data-n] th");if(t){a.preventDefault(),j.remove();let r=j.create(a),s=[{text:"move row",func:q.startMoveRow.bind(null,t.parentNode)},{text:"delete row",func:q.doDeleteRow.bind(null,t.parentNode.dataset.n)}];j.populate(r,s),j.show(r);return}let n=a.target.nodeType===1?a.target.closest("td.lemma"):a.target.parentElement.closest("td.lemma");if(n){a.preventDefault();let r=n.classList.contains("highlit")?function(){let d=m.highlit();return d.size===1&&!n.classList.contains("highlitcell")&&(E.unCelllightAll(),n.classList.add("highlitcell")),d}():(pe.textClick(a,!0),new Set([n.dataset.n])),s=r.size>1?[{text:"merge columns",func:q.startMerge.bind(null,r)},{text:"ungroup columns",alt:"group columns",toggle:se.grouped,func:q.startGroup.bind(null,!1)},{text:"delete columns",func:q.startRemoveCol.bind(null,r)}]:[{text:"edit cell",func:q.startEditCell.bind(null,n)},{text:"delete column",func:q.startRemoveCol.bind(null,r)},{text:"insert column",func:q.startInsertCol}];j.remove();let u=j.create(a);j.populate(u,s),j.show(u)}}},q={undo:function(){let a=c.undo.pop();a&&a[0](...a[1])},redo:function(){let a=c.redo.pop();a&&a[0](...a[1])},doStack:function(a,t="do"){t==="undo"?(a[1].push("redo"),c.redo.push(a)):t==="redo"?(a[1].push("undo"),c.undo.push(a)):(a[1].push("undo"),c.undo.push(a),c.redo=[])},doMulti:function(a,t){let n=[];for(let r of a){let s=r[0](...r[1],"multido");n.unshift(s)}q.doStack([q.doMulti,[n]],t)},startMoveRow:function(a,t){if(c.dragged=a,c.dragged.classList.add("dragging"),t.type!=="dragstart"){for(let n of m.trs())n.classList.add("moveinprogress");c.matrix.boxdiv.querySelector("table").addEventListener("mousedown",q.finishMoveRow)}},startMerge:function(a){let t=a===!1?m.highlit():a,n=m.clauses(t,!0);if(!n)q.doMerge(t,"do");else if(n[0]===null){let r=n.filter(s=>s!==null).map(s=>[q.doUngroup,[s]]).concat([[q.doMerge,[t]]]);q.doMulti(r,"do")}else{let r=m.clausesToRemove(n,t);if(!r)q.doMerge(t,"do");else{let s=r.map(u=>[q.doUngroup,[u]]).concat([[q.doMerge,[t]]]);q.doMulti(s,"do")}}},startGroup:function(a){let t=a===!1?m.highlit():a;se.grouped()?q.startUngroup(t):q.doGroup(t,"do")},startUngroup:function(a){let n=[...m.clauses(a)].map(r=>[q.doUngroup,[r]]);q.doMulti(n,"do")},startInsertCol:function(){let a=Math.max([...m.highlit()])||c.maxlemma;q.doInsertCol(a)},startRemoveCol:function(a){let t=a===!1?m.highlit():a,n=m.clauses(t);if(!n)q.doRemoveCol(t,"do");else{let r=m.clausesToRemove(n,t,1);if(!r)q.doRemoveCol(t,"do");else{let s=r.map(u=>[q.doUngroup,[u]]).concat([[q.doRemoveCol,[t]]]);q.doMulti(s,"do")}}},startRemoveEmpty:function(){let a=m.empty(),t=m.clauses(a);if(!t)q.doRemoveCol(a,"do");else{let n=m.clausesToRemove(t,a,1);if(!n)q.doRemoveCol(a,"do");else{let r=n.map(s=>[q.doUngroup,[s]]).concat([[q.doRemoveCol,[a]]]);q.doMulti(r,"do")}}},startEditCell:function(a){let t=a||m.highlitcell();!t||(q.unnormalize(t),t.dataset.oldContent=t.textContent,t.contentEditable="true",t.focus(),c.editing=!0,pe.selectAll(t),t.addEventListener("blur",q.finishEditCell),t.addEventListener("keydown",q.cellKeyDown))},cellKeyDown:function(a){switch(a.key){case"Enter":q.finishEditCell(a);break;case"Escape":q.finishEditCell(a,!0);break;case"ArrowRight":{let t=m.cursorPos(a.target);t[0]===t[1]&&(a.preventDefault(),q.finishEditCell(a),pe.cycleVariant({key:"ArrowRight"}),q.startEditCell(m.highlitcell()));break}case"ArrowLeft":{m.cursorPos(a.target)[0]===0&&(a.preventDefault(),q.finishEditCell(a),pe.cycleVariant({key:"ArrowLeft"}),q.startEditCell(m.highlitcell()));break}}},startMarkAs:function(a,t,n){let r=n.target.tagName==="INPUT"?n.target:n.target.querySelector("input"),s=t===!1?m.highlit():t,u=new Map([...s].map(d=>[d,!r.checked]));q.doMarkAs(a,u)},startNewRow:function(){let a=ke.row("new row"),t=a.querySelector("th");t.contentEditable=!0,t.addEventListener("blur",q.finishNewRow),t.addEventListener("keydown",q.thKeyDown),c.matrix.boxdiv.querySelector("tbody").appendChild(a),t.scrollIntoView(),t.focus(),document.execCommand("selectAll",!1,null),c.editing=!0},startRenameRow:function(){},startReconstruction:function(a){let t=a.target.dataset.key,n=a.target.closest(".tree-box").myTree,r=n.desc,s=document.createElement("div");s.id="blackout";let u=document.createRange().createContextualFragment(`<div id="reconstructionoptions" class="popup">
    <form id="reconstructionform">
      <div>
        <label for="reconstructed_node_name">Label for node:</label>
        <input type="text" id="reconstructed_node_name" name="reconstructed_node_name" placeholder="${r}-${t}" size="15">
      </div>
      <div style="width: 100%; display: flex; justify-content: center;padding-top: 1em;">
        <button type="submit">Add to matrix</button>
      </div>
    </form>
</div>`);s.appendChild(u),document.body.appendChild(s);let d=function(x){x.preventDefault();let C=s.querySelector("input"),B=C.value?C.value:C.placeholder;q.doReconstruction(n,t,B),document.body.removeChild(s)};s.querySelector("button").addEventListener("click",d),s.addEventListener("click",me.blackoutClick)},thKeyDown:function(a){a.key==="Enter"&&q.finishNewRow(a)},finishNewRow:function(a){let t=a.target,n=t.textContent;t.closest("tr").dataset.n=n;let r=ke.tei(n);c.xml.documentElement.appendChild(r),c.editing=!1,t.contentEditable=!1,t.removeEventListener("blur",q.finishNewRow),t.removeEventListener("keydown",q.thKeyDown),q.doStack([q.doDeleteRow,[n]],"do")},finishEditCell:function(a,t=!1){let n=a.target;c.editing=!1,n.contentEditable="false",n.removeEventListener("blur",q.finishEditCell),n.removeEventListener("keydown",q.cellKeyDown),n.blur(),pe.deselect();let r=n.textContent;if(r===""){let g=n.querySelector("br");g&&g.remove()}if(t||r===n.dataset.oldContent)return;n.hasOwnProperty("IAST")||(n.IAST=n.cloneNode(!0)),n.IAST.textContent=r;let s=parseInt(n.dataset.n),u=n.closest("tr"),d=u.dataset.n;if(q.xmlChangeCell(s,d,r),u.dataset.hasOwnProperty("treename")&&!n.dataset.hasOwnProperty("emended")){let g=q.doEmend(s,d,"multido"),x=[];x.push([q.doChangeCell,[s,d,n.dataset.oldContent]]),x.push(g),q.doStack([q.doMulti,[x]],"do")}else q.doStack([q.doChangeCell,[s,d,n.dataset.oldContent]],"do");delete n.dataset.oldContent,q.refresh(),be.updateAllHeaders(!0),n.classList.add("highlitcell")},finishMoveRow:function(a){let t=a.target.nodeType===1?a.target.closest("tr"):a.target.parentElement.closest("tr");if(t&&q.doMoveRow(c.dragged,t,"do"),a.type!=="drop"){for(let n of m.trs())n.classList.remove("moveinprogress");c.matrix.boxdiv.querySelector("table").removeEventListener("mousedown",q.finishMoveRow)}else for(let n of m.trs())n.classList.remove("dragenter");c.dragged.classList.remove("dragging"),c.dragged=null},doReconstruction:function(a,t,n){let r=ke.row(n,"pending");r.dataset.treename=a.name,r.dataset.nodename=t;let s=r.querySelector("th"),u=document.createElement("div");u.id="spinner",s.prepend(u);let d=ke.tei(n);d.setAttribute("type","reconstructed"),d.setAttribute("corresp",a.name),d.setAttribute("select",`#${t}`);let g=[...m.tds(!1,r)],x=[...m.words(!1,d)];c.matrix.boxdiv.querySelector("tbody").appendChild(r),s.scrollIntoView();let C=new Blob(["("+N1.toString()+")()"],{type:"application/javascript"}),B=new Worker(window.URL.createObjectURL(C)),H=se.normalizedView(),G=m.serializedtexts(a.nexml,H),ie=m.serializedlevels(a.levels,H);B.postMessage({readings:G,levels:ie,num:0,id:t}),B.onmessage=function(oe){let de=oe.data.n,ye=oe.data.result;if(g[de].textContent=ye,g[de].IAST=g[de].cloneNode(!0),g[de].classList.remove("pending"),x[de].textContent=ye,de<c.maxlemma)B.postMessage({readings:G,levels:ie,num:de+1,id:t});else{s.removeChild(u),c.xml.documentElement.appendChild(d),be.updateAllHeaders(),a.draw();let we=m.highlit();we.size>0&&E.repopulateTrees(...m.lowhigh(we));let Ae=document.getElementById("menu").querySelector(".ms"),ve=document.createElement("li");ve.setAttribute("data-name",n),ve.appendChild(document.createTextNode(n)),Ae.appendChild(ve),q.doStack([q.doDeleteRow,[n]],"do")}}},doDeleteRow:function(a,t="do"){let n=m.tr(a),r=m.tei(a),u=[...m.teis()].indexOf(r);n.parentNode.removeChild(n),r.parentNode.removeChild(r),be.updateAllHeaders(),xe(),L(),q.doStack([q.doUndeleteRow,[n,r,u]],t)},doUndeleteRow:function(a,t,n,r="do"){let s=t.getAttribute("n"),u=[...m.teis()];if(n===u.length)c.xml.documentElement.appendChild(t),c.matrix.boxdiv.querySelector("tbody").appendChild(a);else{let d=[...m.trs()];c.xml.documentElement.insertBefore(t,u[n]),d[n].parentNode.insertBefore(a,d[n])}be.updateAllHeaders(),xe(),L(),q.doStack([q.doDeleteRow,[s]],r)},doMoveRow:function(a,t,n="do"){let r=a.parentNode,s=[...m.trs()],u=a.previousElementSibling,d=s.indexOf(a),g=t!==null?s.indexOf(t):null,x=function(){t===null?r.insertBefore(a,r.firstChild):t.nextElementSibling?r.insertBefore(a,t.nextElementSibling):r.appendChild(a)},C=function(){let B=c.xml.documentElement,H=[...m.teis()],G=H[d];if(g===null)B.insertBefore(G,H[0]);else{let ie=H[g];ie.nextElementSibling?B.insertBefore(G,ie.nextElementSibling):B.appendChild(G)}};if(x(),C(),n==="multido")return[q.doMoveRow,[a,u]];q.doStack([q.doMoveRow,[a,u]],n)},doMerge:function(a,t="do"){let n=function(d,g,x){let C=d();var B=[];for(let H of C){let G=[...x].map(de=>g(de,H)),ie=G.map(de=>de.cloneNode(!0));B.push(ie);for(let de of G)q.unnormalize(de);let oe=G.reduce(function(de,ye){if(ye.hasChildNodes())for(;ye.firstChild;)de.appendChild(ye.firstChild);return ye.parentNode.removeChild(ye),de});oe.normalize(),oe.dataset?(delete oe.dataset.normal,oe.IAST=oe.cloneNode(!0)):oe.removeAttribute("lemma")}return[d,g,B]},r=n(m.trs,m.firsttd,a),s=n(m.texts,m.firstword,a),u=parseInt([...a][0]);if(q.renumber(u),q.restyleGroups(a),q.refresh(),be.updateAllHeaders(),t==="multido")return[q.doUnmerge,[r,s]];q.doStack([q.doUnmerge,[r,s]],t)},doUnmerge:function(a,t,n="undo"){let r=function(g,x,C){let B=m.whichattr(C[0][0]),H=C[0].map(de=>de.getAttribute(B)),G=H[0],ie=g();for(var oe=0;oe<ie.length;oe++){let de=C[oe].pop(),ye=x(G,ie[oe]);ye.parentNode.replaceChild(de,ye);for(let we of C[oe])de.parentNode.insertBefore(we,de)}return H};r(...a);let s=r(...t),d=[...s].sort((g,x)=>parseInt(g)-parseInt(x))[0];if(q.renumber(d),q.reIAST(s),q.refresh(),q.restyleGroups(s),be.updateAllHeaders(),n==="multido")return[q.doMerge,[s]];q.doStack([q.doMerge,[s]],n)},doGroup:function(a,t="do"){let n=[...a],r=n.shift(),s=m.texts();for(let d of s){let g=document.createElementNS("http://www.tei-c.org/ns/1.0","cl"),x=m.firstword(r,d);x.parentNode.insertBefore(g,x),g.appendChild(x);for(let C of a)g.appendChild(m.firstword(C,d))}let u=n.pop();for(let d of m.tds(r))d.classList.add("group-start");for(let d of m.tds(u))d.classList.add("group-end");for(let d of n)for(let g of m.tds(d))g.classList.add("group-internal");for(let d of c.textboxes)d.refresh();if(t==="multido")return[q.doUngroup,[a]];q.doStack([q.doUngroup,[a]],t)},doUngroup:function(a,t="do"){let n=m.texts();for(let s of n){let u;for(let d of a){let g=m.firstword(d,s);u||(u=g.closest("cl")),u.parentNode.insertBefore(g,u)}u.parentNode.removeChild(u)}let r=[...a].map(s=>[...m.tds(s)]).reduce((s,u)=>s.concat(u),[]);for(let s of r)s.classList.remove("group-start","group-internal","group-end");for(let s of c.textboxes)s.refresh();if(t==="multido")return[q.doGroup,[a]];q.doStack([q.doGroup,[a]],t)},doGroupWords:function(){let a=0,t=[];for(let n=0;n<=c.maxlemma;n++){let r=m.tds(n),s=r[0].classList;if(s.contains("group-start")||s.contains("group-internal")||s.contains("group-end")){a=n+1;continue}let u=r.length,d=0;if(n===c.maxlemma)d=u;else for(let g of r)(g.IAST?g.IAST.textContent:g.textContent).slice(-1)===" "&&d++;if(d/u>=.5)if(a===n){a++;continue}else{let g=m.range(a,n);t.push([q.doGroup,[g]]),a=n+1}}q.doMulti(t)},doRemoveCol:function(a,t="do"){let n=function(g,x,C){let B=g();var H=[];for(let G of B){let ie=[...C].map(de=>{let ye=x(de,G);return q.unnormalize(ye),ye}),oe=ie.map(de=>de.cloneNode(!0));H.push(oe);for(let de of ie)de.parentNode.removeChild(de)}return[g,x,H]},r=n(m.trs,m.firsttd,a),s=n(m.texts,m.firstword,a),u=[...a].sort((g,x)=>parseInt(g)-parseInt(x)),d=parseInt([...u][0])-1;if(q.renumber(d),q.refresh(),q.restyleGroups(a,!0),be.updateAllHeaders(),t==="multido")return[q.doUnremoveCol,[r,s]];q.doStack([q.doUnremoveCol,[r,s]],t)},doUnremoveCol:function(a,t,n){let r=function(x,C,B){let H=m.whichattr(B[0][0]),G=B[0].map(ye=>ye.getAttribute(H)),ie=G[0],oe=x();for(var de=0;de<oe.length;de++){let ye=C(ie,oe[de]);for(let we of B[de])ye.parentNode.insertBefore(we,ye)}return G};r(...a);let s=r(...t),u=[...s].sort((x,C)=>parseInt(x)-parseInt(C)),d=parseInt(u[0])-1;q.renumber(d);let g=document.querySelectorAll(".highlitcell");for(let x of g)x.classList.remove("highlitcell");if(q.reIAST(s),q.refresh(),q.restyleGroups(s,!0),be.updateAllHeaders(),n==="multido")return[q.doRemoveCol,[s]];q.doStack([q.doRemoveCol,[s]],n)},doInsertCol:function(a,t="do"){let n=function(s,u,d,g){let x=s();for(let C of x){let B=u(g,C),H=d(g+1);B.insertAdjacentElement("afterend",H)}};n(m.trs,m.firsttd,ke.emptycell,a),n(m.texts,m.firstword,ke.emptyword,a),q.renumber(a),q.refresh(),q.restyleGroups([a,a+1],!0),be.updateAllHeaders();let r=[a+1];if(t==="multido")return[q.doRemoveCol,[r]];q.doStack([q.doRemoveCol,[r]],t)},doEmend:function(a,t,n="do"){let r=[...m.trs()][t],s=m.firsttd(a,r);s.dataset.emended=!0;let u=m.tei(t).querySelector("text");if(m.firstword(a,u).setAttribute("emended","true"),n==="multido")return[q.doUnemend,[a,t]];q.doStack([q.doUnemend,[a,t]],n)},doUnemend:function(a,t,n="do"){let r=[...m.trs()][t],s=m.firsttd(a,r);delete s.dataset.emended;let u=m.tei(t).querySelector("text");if(m.firstword(a,u).removeAttribute("emended"),n==="multido")return[q.doEmend,[a,t]];q.doStack([q.doEmend,[a,t]],n)},doChangeCell:function(a,t,n,r="do"){let s=q.xmlChangeCell(a,t,n),u=q.htmlChangeCell(a,t,n);if(q.refresh(),be.updateAllHeaders(!0),pe.textClick({target:u}),r==="multido")return[q.doChangeCell,[a,t,s]];q.doStack([q.doChangeCell,[a,t,s]],r)},htmlChangeCell:function(a,t,n){let r=m.tr(t),s=m.firsttd(a,r);return q.unnormalize(s),s.textContent=n,s.IAST&&(s.IAST=s.cloneNode(!0)),s},xmlChangeCell:function(a,t,n){let r=m.tei(t).querySelector("text"),s=m.firstword(a,r);q.unnormalize(s);let u=s.textContent;return s.childNodes.length===0?s.appendChild(document.createTextNode(n)):s.textContent=n,u},doMarkAs:function(a,t,n="do"){let r=[...t.keys()],s=m.attr(a,r);for(let u of r){let d=m.tds(u),g=m.words(u);if(t.get(u)===!0){for(let C of d)C.dataset[a]="true";for(let C of g)C.setAttribute(a,"true")}else{for(let C of d)delete C.dataset[a];for(let C of g)C.removeAttribute(a)}let x=m.checkbox(u,a);x.checked=t.get(u)}if(n==="multido")return[q.doMarkAs,[a,s]];q.doStack([q.doMarkAs,[a,s]],n)},refresh:function(){for(let a of c.textboxes)a.refresh();E.rehighlight(),se.anyhighlit()?E.repopulateTrees(...m.lowhigh(m.highlit())):E.clearTrees()},renumber:function(a=0){let t=function(n,r,s){let u=n();for(let g of u){let x=[...r(!1,g)],C=m.whichattr(x[0]);for(var d=parseInt(s)+1;d<x.length;d++)x[d].setAttribute(C,d)}};t(m.trs,m.tds,a),t(()=>[!0],m.ths,a),t(m.texts,m.words,a),c.maxlemma=m.maxlemma()},reIAST:function(a){let t=[...a].map(n=>[...m.lemmata(n)]).flat();for(let n of t)n.IAST=n.cloneNode(!0)},restyleGroups:function(a,t=!1){let r=t?function(u){var d=[...u];let g=parseInt(a[0])-1,x=parseInt(a[a.length-1])+1;return d.unshift(g),d.push(x),d}(a):a,s=function(u,d=!1){let g=new Set(["group-start","group-internal","group-end"]);d&&g.delete(d);for(let x of u){for(let C of g)x.classList.remove(C);d&&x.classList.add(d)}};for(let u of r){let d=m.firstword(u),g=m.tds(u);if(g.length===0)continue;let x=d.closest("cl");x?d===x.firstElementChild?s(g,"group-start"):d===x.lastElementChild?s(g,"group-end"):s(g,"group-internal"):s(g)}},startRenormalize:function(a){let t=a===!1?m.highlit():a;q.doRenormalize(Math.min(...t),Math.max(...t))},doRenormalize:function(a,t,n=!1,r="do"){let s=se.normalizedView(),u=new Map,d=[...m.trs()],g=[...m.texts()],x=n?[n]:[...d.keys()];for(let C of x){let B=new Map,H=g[C],G=[...m.words(!1,H)],ie=m.firstword(a,H),oe=m.firstword(t,H),de=G.indexOf(ie),ye=G.indexOf(oe),we=G.slice(de,ye+1),Ae=d[C],Ee=[...m.tds(!1,Ae)].slice(de,ye+1),Te=we.map(Re=>Re.textContent),Ne=w1(Te);for(let Re=0;Re<Ne.length;Re++){let De=we[Re],qe=Ne[Re],Xe=Te[Re],Ge=Ee[Re],je=De.hasAttribute("lemma")?De.getAttribute("lemma"):!1;if(je!==!1){if(je===qe)continue;B.set(Ge.dataset.n,je),q.unnormalize(De),q.unnormalize(Ge)}else B.set(Ge.dataset.n,null);qe!==Xe&&(De.setAttribute("lemma",qe),Ge.dataset.normal=qe,s&&(Ge.textContent=qe))}u.set(C,B)}be.updateAllHeaders(!0),be.xScrollToHighlit(),q.doStack([q.doUnrenormalize,[u]],r)},doUnrenormalize:function(a,t="undo"){let n=se.normalizedView(),r=new Map,s=[...m.trs()],u=[...m.texts()];for(let[d,g]of a.entries()){let x=s[d],C=u[d],B=new Map;for(let[H,G]of g.entries()){let ie=m.firsttd(H,x),oe=m.firstword(H,C),de=oe.hasAttribute("lemma")?oe.getAttribute("lemma"):null;B.set(H,de),G===null?(q.unnormalize(ie),q.unnormalize(oe)):(ie.dataset.normal=G,oe.setAttribute("lemma",G),n&&(ie.textContent=G))}r.set(d,B)}q.doStack([q.doUnrenormalize,[r]],t)},unnormalize:function(a){a.hasOwnProperty("IAST")&&(a.textContent=a.IAST.textContent),a.dataset&&a.dataset.hasOwnProperty("normal")&&delete a.dataset.normal,a.getAttribute("lemma")&&a.removeAttribute("lemma")}},be={toggleNormalize:function(){se.normalizedView()?be.showUnnormalized():be.showNormalized()},showNormalized:function(a){if(a)a.updatescript();else{document.getElementById("views").classList.add("normalized");for(let n of c.textboxes)n.updatescript();c.matrix.updatescript(),se.anyhighlit()?E.repopulateTrees(...m.lowhigh(m.highlit())):E.clearTrees()}be.updateAllHeaders(!0),be.xScrollToHighlit()},showUnnormalized:function(){document.getElementById("views").classList.remove("normalized"),c.matrix.updatescript();for(let a of c.textboxes)a.updatescript();se.anyhighlit()?E.repopulateTrees(...m.lowhigh(m.highlit())):E.clearTrees(),be.updateAllHeaders(!0),be.xScrollToHighlit()},toggleHeader:function(){let a=c.matrix.boxdiv.querySelector("tr.header");a.style.display==="none"?a.style.display="table-row":a.style.display="none"},updateHeaders(a){for(let t of a){let n=m.firstth(t),[r,s]=m.readings(t),u=n.querySelector("span.readings"),d=r<2?r:`${r}(${s.size})`;u.textContent=d}},updateAllHeaders(a=!1){let t=[...m.trs()],n=t.map(g=>m.trWalker(g)),r=[...m.tds(!1,t[0])],s=[...m.ths()],u=c.matrix.boxdiv.querySelector("tr.header"),d=function(){let g=document.createElement("th"),x=document.createElement("span");x.classList.add("readings"),g.appendChild(x);let C=document.createElement("form");return C.innerHTML='<div><input class="insignificant" type="checkbox">Insignificant</div><div><input class="binary" type="checkbox">Binary</div>',g.appendChild(C),u.appendChild(g),g};for(let g=0;g<r.length;g++){let x=g>=s.length?d():s[g],C=r[g];x.dataset.ref=C.dataset.n;let B=0,H=new Set;for(let ie of n){let oe=ie.nextNode().textContent;oe!==""&&(B++,H.add(oe))}let G=B<2?B:`${B}(${H.size})`;x.querySelector("span.readings").textContent=G,a||(x.querySelector("input.insignificant").checked=!!C.dataset.insignificant,x.querySelector("input.binary").checked=!!C.dataset.binary)}if(s.length>r.length)for(let g=r.length;g<s.length;g++)u.removeChild(s[g])},xScrollToHighlit:function(){let a=m.highlit();a.size>0&&be.xScroll([...a][0])},xScroll:function(a,t){if(!a)return;let n=t||m.firsttr(),r=m.firsttd(a,n),s=r.getBoundingClientRect(),u=c.matrix.boxdiv,g=u.getBoundingClientRect().right,x=n.querySelector("th").getBoundingClientRect(),C=x.right,B=s.right>g,H=s.left+.1<C;B&&r.scrollIntoView({inline:"end",block:"nearest"}),H&&(r.scrollIntoView({inline:"start",block:"nearest"}),u.scroll({left:u.scrollLeft-x.width}))}},se={undo:function(){return c.undo.length>0},redo:function(){return c.redo.length>0},checkbox:function(a,t){if(!se.anyhighlit())return!1;let n=t===!1?m.highlit():t,r=m.attr(a,n);for(let s of r.values())if(s===!1)return!1;return!0},grouped:function(){let a=m.highlit();if(!a)return!1;let t=m.firsttr();for(let n of a){let r=m.firsttd(n,t);if(r.classList.contains("group-start")||r.classList.contains("group-internal")||r.classList.contains("group-end"))return!0}return!1},oneGrouped:function(){let a=m.highlit();if(a.size===0)return!1;if(a.size===1){let t=m.firsttr(),n=m.firsttd([...a][0],t);return!!(n.classList.contains("group-start")||n.classList.contains("group-end")||n.classList.contains("group-internal"))}return!0},anyhighlit:function(){return!!c.matrix.boxdiv.querySelector("td.highlit")},manyhighlit:function(){return m.highlit().size>1},highlitcell:function(){return!!c.matrix.boxdiv.querySelector("td.highlitcell")},normalizedView:function(){return document.getElementById("views").classList.contains("normalized")},anyNormalized:function(){return c.matrix.boxdiv.querySelector(".lemma[data-normal]")},headerView:function(){return c.matrix.boxdiv.querySelector("tr.header").style.display!=="none"}},ke={tei:function(a){let t=c.xml.createElementNS(v.teins,"TEI");t.setAttribute("n",a);let n=m.firsttext().cloneNode(!0);t.appendChild(n);for(let r of m.words(!1,n))for(r.removeAttribute("lemma");r.firstChild;)r.firstChild.remove();return t},emptycell:function(a){let t=document.createElement("td");return t.className="lemma",t.dataset.n=a,t},emptyword:function(a,t=c.xml){let n=t.createElementNS(v.teins,"w");return n.setAttribute("n",a),n},emptywords:function(a,t,n){let r=t||c.maxlemma,s=n||0;for(let u=s;u<=r;u++){let d=ke.emptyword(u);a.appendChild(d)}},row:function(a,t){let n=document.createElement("tr"),r=document.createElement("th");r.scope="row",r.draggable=!0,r.appendChild(document.createTextNode(a)),r.addEventListener("dragstart",pe.thDragStart),n.dataset.n=a,n.appendChild(r);let s=m.firsttr();for(let u of s.querySelectorAll("td")){let d=document.createElement("td");d.dataset.n=u.dataset.n,d.className=u.className,t&&d.classList.add(t),n.appendChild(d)}return n}},j={create:function(a){let t=document.createElement("div");return t.classList.add("contextmenu"),t.style.left=a.clientX-12+"px",t.style.top=a.clientY-22+"px",t},remove:function(){for(let a of document.querySelectorAll(".contextmenu"))a.parentNode.removeChild(a)},show:function(a){document.body.appendChild(a)},populate:function(a,t){let n=document.createElement("ul");for(let r of t){let s=document.createElement("li");if(r.hasOwnProperty("cond")){let u=document.createRange().createContextualFragment('<form><input type="checkbox"'+(r.cond()?" checked":"")+"></form>");s.appendChild(u)}if(r.hasOwnProperty("toggle")){let u=r.toggle()?r.text:r.alt;s.appendChild(document.createTextNode(u))}else s.appendChild(document.createTextNode(r.text));s.addEventListener("mouseup",r.func),n.appendChild(s)}a.appendChild(n)}};class Ce{constructor(t){this.name=t,this.box=document.createElement("div"),this.box.classList.add("menubox");let n=document.createElement("div");n.classList.add("heading"),n.appendChild(document.createTextNode(t)),this.box.appendChild(n),n.addEventListener("mouseover",this.checkConditions.bind(this)),this.box.addEventListener("mouseup",this.click.bind(this)),this.items=new Map,this.conditions=new Map}populate(t){let n=this.box.querySelector("ul")||function(r){let s=document.createElement("ul");return r.box.appendChild(s),s}(this);for(let r of t){let s=document.createElement("li");if(r.hasOwnProperty("checkbox")){let u=document.createElement("form"),d=document.createElement("input");d.type="checkbox",d.addEventListener("click",g=>g.preventDefault()),u.appendChild(d),s.appendChild(u),s.appendChild(document.createTextNode(r.text)),this.conditions.set(d,r.checkbox)}else if(r.hasOwnProperty("toggle")){let u=document.createElement("span");u.appendChild(document.createTextNode(r.text)),u.dataset.text=r.text,u.dataset.alt=r.alt,this.conditions.set(u,r.toggle),s.appendChild(u)}else s.appendChild(document.createTextNode(r.text));r.hasOwnProperty("greyout")&&this.conditions.set(s,r.greyout),this.items.set(s,r.func),n.appendChild(s)}}click(t){let n=t.target.tagName==="LI"?t.target:t.target.closest("li");if(n&&!n.classList.contains("greyedout")){let r=this.items.get(n);r&&(r(t),this.checkConditions())}}checkConditions(){let t=new Map;for(let[n,r]of this.conditions){let s=t.get(r)||function(){let u=r();return t.set(r,u),u}();n.tagName==="INPUT"?n.checked=s:n.tagName==="SPAN"?s?n.textContent=n.dataset.alt:n.textContent=n.dataset.text:n.tagName==="LI"&&(s?n.classList.remove("greyedout"):n.classList.add("greyedout"))}}}class Se{constructor(t){this.name=t,this.script=0}show(){c.descs.appendChild(this.descbox),se.normalizedView()&&be.showNormalized(this),c.viewdiv.appendChild(this.boxdiv),this.closed=!1}clear(){for(;this.boxdiv.firstChild;)this.boxdiv.removeChild(this.boxdiv.firstChild);this.svgcontainer&&(this.clearsvg(),this.boxdiv.appendChild(this.svgcontainer))}destroy(){c.viewdiv.removeChild(this.boxdiv),c.descs.removeChild(this.descbox);let t=c.trees.indexOf(this);t>-1&&c.trees.splice(t,1);let n=c.textboxes.indexOf(this);n>-1&&c.textboxes.splice(n,1),this.closed=!0,this.name==="Matrix"&&(document.getElementById("matrixmenu").style.display="block"),L(),E.rehighlight()}pullout(){this.destroy();let t="menubar=no,location=no,status=no,height=620,width=620,scrollbars=yes,centerscreen=yes",n=window.mainWindow?window.mainWindow.comboView.getWindows().length:c.windows.length,r=window.open("slave.html","slave"+n,t);r.mainWindow=window.mainWindow?window.mainWindow:window,r.startbox=this.text?{text:{name:this.name}}:{tree:this.name},r.mainWindow.comboView.addWindow(r)}makeDescBox(){let t=document.createElement("div"),n=document.createElement("div");n.classList.add("closer"),n.innerHTML="x",n.title="close";let r=document.createElement("div");r.classList.add("scripter"),r.innerHTML="A",r.title="change script",t.appendChild(n),t.appendChild(r),t.appendChild(document.createTextNode(this.desc)),this.descbox=t,n.addEventListener("click",this.destroy.bind(this)),r.addEventListener("click",this.cyclescript.bind(this))}cyclescript(){this.script=this.script+1,this.script===v.scripts.length&&(this.script=0);let t=this.descbox.querySelector(".scripter");this.script===0?t.innerHTML="A":t.innerHTML=to[v.scripts[this.script]]("a"),v.scripts[this.script]==="grantha"?t.classList.add("grantha"):t.classList.remove("grantha"),this.updatescript()}updatescript(){let t=this.boxdiv.querySelectorAll(".lemma,.tree-lemma");for(let n of t){let r=n.dataset.hasOwnProperty("normal");if(!r&&n.textContent.trim()==="")continue;let s=function(){if(se.normalizedView()&&r){let d=document.createElement("span");return d.appendChild(document.createTextNode(n.dataset.normal)),d}else return n.IAST.cloneNode(!0)}(),u=this.script===0?s:Ot(s,v.scripts[this.script]);for(n.innerHTML="";u.firstChild;)n.appendChild(u.firstChild)}v.scripts[this.script]==="grantha"?this.boxdiv.classList.add("grantha"):this.boxdiv.classList.remove("grantha"),this.boxdiv.classList.contains("matrix")&&be.xScrollToHighlit()}}class Z extends Se{constructor(t,n){super(`#${t} #${n}`);this.stemmaid=t,this.id=n,this.nexml=c.treelist.get(this.name).cloneNode(!0),this.desc=this.nexml.querySelector("tree").getAttribute("label")}init(){this.makeDescBox();let t=document.createElement("div");t.classList.add("tree-box");var n,r=0;do n="tree"+r,r++;while(document.getElementById(n));t.id=n,this.boxdiv=t,this.boxdiv.addEventListener("mouseover",pe.treeMouseover.bind(this)),this.boxdiv.addEventListener("click",pe.treeClick),this.svgcontainer=document.createElement("div"),this.svgcontainer.id=this.boxdiv.id+"container",this.boxdiv.appendChild(this.svgcontainer),this.boxdiv.myTree=this,this.calcPaths(),this.jiggleroot(),this.findLevels(),this.labelInternal()}show(){c.descs.appendChild(this.descbox),c.viewdiv.appendChild(this.boxdiv)}jiggleroot(){let t=this.nexml.evaluate('//nex:node[@root="true"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,n=this.nexml.evaluate('//nex:edge[@source="'+t.id+'"]|//nex:edge[@target="'+t.id+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);if(n.snapshotLength===3){var r,s;for(let u=0;u<n.snapshotLength;u++){let d=n.snapshotItem(u),g=d.getAttribute("source"),x=d.getAttribute("target"),C=this.nexml.evaluate('//nex:node[@id="'+g+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,B=this.nexml.evaluate('//nex:node[@id="'+x+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!C.hasAttribute("otu")&&!B.hasAttribute("otu")){r=d,s=x===t.id?"target":"source";break}}if(r){let u=this.nexml.createElementNS(t.namespaceURI,"node");u.id="fakeroot",u.setAttribute("root","true"),t.removeAttribute("root"),t.parentElement.insertBefore(u,t);let d=this.nexml.createElementNS(t.namespaceURI,"edge");d.id="newrootedge",d.setAttribute("length","0"),d.setAttribute("source","fakeroot"),d.setAttribute("target",t.id),t.parentElement.insertBefore(d,r),r.setAttribute(s,u.id)}}}findLevels(){let t=this.nexml.querySelectorAll("edge"),n=[...this.nexml.querySelectorAll("node[otu]")],r=this.nexml;this.levels=[n];let s=function(g,x){let C=g.map(ye=>ye.id),B=new Map,H=new Map,G=[];for(let ye of x){let we=ye.getAttribute("target"),Ae=ye.getAttribute("source"),ve=(()=>C.indexOf(we)!==-1?{ancestor:r.getElementById(Ae),child:r.getElementById(we)}:C.indexOf(Ae)!==-1?{ancestor:r.getElementById(we),child:r.getElementById(Ae)}:null)();if(ve!==null)if(H.has(ve.ancestor)){let Ee=H.get(ve.ancestor);B.set(ve.ancestor,[Ee.child,ve.child]),G.push(ye),G.push(Ee.edge)}else H.set(ve.ancestor,{child:ve.child,edge:ye})}let ie=[...B.keys()],oe=[...H.keys()].reduce((ye,we)=>(ie.indexOf(we)===-1&&ye.push(H.get(we).child),ye),[]),de=[...x].reduce((ye,we)=>(G.indexOf(we)===-1&&ye.push(we),ye),[]);return{match:B,remainder:[...new Set(oe)],edges:de}};var u=n,d=t;do{let g=s(u,d);this.levels.push(g.match),u=[...g.match.keys(),...g.remainder],d=g.edges}while(d.length>0)}labelInternal(){for(let t of this.nexml.querySelectorAll("node:not([label])"))t.setAttribute("label",t.id)}fitch1(){let t=new Map;for(let n of this.levels[0]){let r=n.getAttribute("label"),s=this.boxdiv.querySelector(`span.tree-lemma[data-id="${r}"]`),u=s?[m.htmlreading(s,se.normalizedView())]:[];t.set(n,new Set(u))}for(let n=1;n<this.levels.length;n++)for(let[r,s]of this.levels[n]){let u=s.map(x=>t.get(x)),d=m.setIntersection(...u),g=d.size>0?d:m.setUnion(...u);t.set(r,g)}return t}fitch2(t){let n=[...this.nexml.querySelectorAll("node[otu]")],r=new Map;for(let[s]of this.levels[this.levels.length-1])r.set(s,t.get(s));for(let s=this.levels.length-1;s>1;s--)for(let[u,d]of this.levels[s]){let g=r.get(u);for(let x of d){if(n.indexOf(x)!==-1)continue;let C=t.get(x);if(C.size===1)r.set(x,C);else{let B=m.setIntersection(g,C),H=B.size>0?B:C;r.set(x,H)}}}return r}fitch(){let t=this.fitch1(),n=function(s){let u=[...s].map(d=>d.trim()===""?"_":d);return u.length===1?u[0]:"{"+u.join(", ")+"}"},r=this.fitch2(t);for(let[s,u]of r){let d=this.boxdiv.querySelector(`span.internal[data-key="${s.id}"]`);d.dataset.reconstructed=n(u)}}clearsvg(){for(;this.svgcontainer.firstChild;)this.svgcontainer.removeChild(this.svgcontainer.firstChild)}removecolors(){let t=this.nexml.querySelectorAll("node[color]");for(let n=0;n<t.snapshotLength;n++)t.snapshotItem(n).removeAttribute("color")}drawlines(t,n){if(this.removecolors(),t){let g=this.getPath(...t.split(";")).path,x=new Set;for(let C of g)x.add(C.getAttribute("target")),x.add(C.getAttribute("source"));for(let C of x){let B=this.nexml.evaluate('//nex:node[@id="'+C+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;B.getAttribute("root")||B.setAttribute("color",n)}}let r=parseInt(window.getComputedStyle(this.svgcontainer,null).width)-15,s=parseInt(window.getComputedStyle(this.boxdiv,null).height)-10,u=function(){return s<600?600:s}();N.PhyloCanvas.Render.Style.line.stroke="rgb(162,164,170)",this.phylocanvas=new N.PhyloCanvas({nexml:this.nexml,fileSource:!0},this.svgcontainer.id,r,u);let d=this.svgcontainer.querySelectorAll('path:not([stroke="#a2a4aa"])');for(let g of d)g.style.strokeWidth="2"}draw(){this.clear(),this.drawlines(),this.makeLabels()}clearLabels(){for(let t of this.boxdiv.firstChild.querySelectorAll("text"))t.parentElement.removeChild(t)}makeLabels(){let t=[...m.texts()],n=new Set(t.map(s=>s.parentNode.getAttribute("n"))),r=new Map(t.filter(s=>s.parentNode.hasAttribute("corresp")&&s.parentNode.getAttribute("corresp")===this.name).map(s=>[s.parentNode.getAttribute("select").replace(/^#/,""),s.parentNode.getAttribute("n")]));for(let s of this.boxdiv.firstChild.querySelectorAll("text")){let u=document.createElement("div");u.setAttribute("class","tree-div");let d=parseInt(s.getAttribute("x")-5),g=parseInt(s.getAttribute("y"))-15;u.style.left=d+"px",u.style.top=g+"px";let x=s.textContent.trim();n.has(x)?u.innerHTML=`<span class="witness inactive" data-key="${x}">${x}</span><span class="tree-lemma ${x}" data-id="${x}"></span>`:x!=="fakeroot"?r.has(x)?u.innerHTML=`<span class="internal reconstructed" data-key="${x}" data-label="${r.get(x)}">${r.get(x)}</span><span class="tree-lemma invisible ${x}" data-id="${x}" data-label="${r.get(x)}"></span>`:u.innerHTML=`<span class="internal" data-key="${x}">0</span>`:u.innerHTML=`<span class="internal" data-key="${x}"></span>`,s.parentElement.removeChild(s),this.boxdiv.appendChild(u)}}clearlemmata(){for(let t of this.boxdiv.querySelectorAll("span.tree-lemma"))t.innerHTML="",t.dataset.hasOwnProperty("normal")&&delete t.dataset.normal,t.IAST=t.cloneNode(!0)}populate(t,n){let r=m.texts();for(let d of r){let g=d.parentNode.getAttribute("n"),x=this.boxdiv.querySelector(`span.tree-lemma[data-id="${g}"]`)||this.boxdiv.querySelector(`span.tree-lemma[data-label="${g}"]`);if(!!x){if(x.hasOwnProperty("IAST")||(x.IAST=x.cloneNode(!0)),x.IAST.innerHTML="",n){let C=[],B=[];var s=!1;for(let H=t;H<=n;H++){let G=m.firstword(H,d);C.push(G.innerHTML),G.hasAttribute("lemma")&&(B[H-t]=G.getAttribute("lemma")),G.hasAttribute("emended")&&(s=!0)}if(x.IAST.appendChild(P.transformString(C.join(" ").replace(/\s+/g," ").trim(),P.sheets.tree)),B.length!==0){let H=C.slice(0).map((ie,oe)=>B.hasOwnProperty(oe)?B[oe]:ie),G=document.createElement("span");G.appendChild(P.transformString(H.join(" ").replace(/\s+/g," ").trim(),P.sheets.tree)),x.dataset.normal=G.innerHTML}s?x.dataset.emended=!0:x.dataset.hasOwnProperty("emended")&&delete x.dataset.emended}else{let C=m.firstword(t,d);x.IAST.appendChild(P.transformString(C.innerHTML,P.sheets.tree)),C.hasAttribute("lemma")?x.dataset.normal=C.getAttribute("lemma"):delete x.dataset.normal,C.hasAttribute("emended")?x.dataset.emended=!0:x.dataset.hasOwnProperty("emended")&&delete x.dataset.emended}se.normalizedView()&&x.dataset.hasOwnProperty("normal")?x.innerHTML=x.dataset.normal:x.innerHTML=x.IAST.innerHTML}}let u=this.boxdiv.querySelectorAll(".inactive");for(let d of u)d.classList.remove("inactive");this.fitch()}calcPaths(){this.nodes=[],this.paths=[],this.longest={path:[]},this.nsResolver=this.nexml.createNSResolver(this.nexml.ownerDocument==null?this.nexml.documentElement:this.nexml.ownerDocument.documentElement);let t=this.nexml.evaluate("//nex:node[@label]",this.nexml,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);for(let n=0;n<t.snapshotLength;n++)this.nodes.push(t.snapshotItem(n));for(let n=0;n<this.nodes.length;n++){let r=this.nodes[n],s=r.getAttribute("label"),u=r.id;for(let d=n+1;d<this.nodes.length;d++){let g=this.nodes[d],x=g.getAttribute("label"),C=g.id;this.paths.push({nodes:[s,x],path:this.pathFind(u,C)})}}for(let n of Object.keys(this.paths))this.paths[n].path.length>this.longest.path.length&&(this.longest=this.paths[n])}pathFind(t,n,r){r||(r=[]);let s=this.nexml.evaluate('//nex:edge[@source="'+t+'"]|//nex:edge[@target="'+t+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);var u;for(let d=0;d<s.snapshotLength;d++){let g=s.snapshotItem(d);if(u=[g],r.indexOf(g.id)!=-1)continue;r.push(g.id);let x=g.getAttribute("source")!==t?g.getAttribute("source"):g.getAttribute("target");if(x===n)return u;if(!this.nexml.evaluate('//nex:node[@id="'+x+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.hasAttribute("otu")){let B=this.pathFind(x,n,r);if(B)return u.concat(B);continue}}return!1}analyzeVariants(t,n){let r=[],s=[],u=function(B){return B.startsWith("<lg")?P.transformString(B,P.sheets.lg).firstChild.data.slice(1):B},d=function(B){return B.map(H=>u(H)).join(" ").replace(/\s+/g," ").trim()},g=se.normalizedView()?function(B,H){let G=m.firstword(B,H);return G.hasAttribute("lemma")?G.getAttribute("lemma"):G.textContent}:function(B,H){return m.firstword(B,H).textContent};for(let B of m.texts()){let H=B.parentNode.getAttribute("n");if(!this.nexml.querySelector(`otu[label="${H}"]`))continue;let G=n?d(m.range(t,n).map(ie=>g(ie,B))):u(g(t,B));G===""?r.hasOwnProperty("")?r[""].push(H):r[""]=[H]:r.hasOwnProperty(G)?r[G].push(H):r[G]=[H]}let x={};for(let B of Object.keys(r)){var C={length:0,branch_length:0,paths:[]};if(r[B].length===1)C=!1;else for(let H=0;H<r[B].length;H++)for(let G=H+1;G<r[B].length;G++){let ie=this.getPath(r[B][H],r[B][G]);if(ie.hasOwnProperty("path")||alert(ie),ie.path.length===C.length){let oe=this.calcBranchLength(ie.path);oe===C.branch_length?C.paths.push(ie):oe>C.branch_length&&(C={length:ie.path.length,branch_length:oe,paths:[ie]})}else ie.path.length>C.length&&(C={length:ie.path.length,branch_length:this.calcBranchLength(ie.path),paths:[ie]})}x[B]=C}for(let B of Object.keys(s))x[B]=s[B];return x}getPath(t,n){for(let r of this.paths)if(r.nodes.indexOf(t)>-1&&r.nodes.indexOf(n)>-1)return r;return!1}calcBranchLength(t){return t.map(n=>n.getAttribute("length")).reduce((n,r)=>parseFloat(n)+parseFloat(r))}colourizeVariants(t,n){let r=this.analyzeVariants(t,n);for(let s of this.boxdiv.querySelectorAll("span.tree-lemma")){let u=r.hasOwnProperty(s.dataset.id)?r[r[s.dataset.id]]:r[s.textContent],d={red:252,green:70,blue:107},g={red:63,green:94,blue:251};u?(s.style.color=T(u.length/this.longest.path.length,g,d),s.dataset.length=u.length,s.dataset.branch_length=u.branch_length,s.dataset.nodes=u.paths[0].nodes.join(";")):(s.style.color=T(1/this.longest.path.length,g,d),s.dataset.length=0,s.dataset.branch_length=0,s.dataset.nodes=""),s.textContent.trim()===""?(s.innerHTML='<span lang="en">┬а┬а┬а</span>',s.style.backgroundColor=s.style.color):s.style.backgroundColor=""}}}class X extends Se{constructor(t){super(t);this.desc=t,this.text=m.firsttext(t)}init(){this.makeTextBox(),this.makeDescBox(),this.descbox.style.maxWidth="595px",this.descbox.style.paddingLeft="5px",this.boxdiv.addEventListener("mouseup",pe.textMouseup)}refresh(){this.boxdiv.innerHTML="",this.boxdiv.appendChild(P.sheets.lemma.transformToFragment(this.text,document)),I(this.boxdiv);for(let t of m.lemmata(!1,this.boxdiv))t.IAST=t.cloneNode(!0);this.updatescript()}makeTextBox(){let t=document.createElement("div");t.dataset.id=this.name,t.classList.add("text-box"),t.appendChild(P.sheets.lemma.transformToFragment(this.text,document)),I(t);for(let n of m.lemmata(!1,t))n.IAST=n.cloneNode(!0);this.boxdiv=t}}class re extends Se{constructor(){super(name);this.desc="Matrix",this.name="Matrix",this.makeDescBox(),this.makeViewBox(),this.descbox.style.maxWidth="100vw",this.descbox.style.paddingLeft="5px"}init(){this.makeTable()}makeViewBox(){let t=document.createElement("div");t.classList.add("matrix"),t.dataset.id=this.name,this.boxdiv=t}makeTable(){let t=document.createElement("div");t.classList.add("scroller"),t.append(P.sheets.matrix.transformToFragment(c.xml,document));for(let x of t.getElementsByTagName("th"))x.addEventListener("dragstart",pe.thDragStart);t.addEventListener("dragenter",pe.trDragEnter),t.addEventListener("dragleave",pe.trDragLeave),t.addEventListener("dragover",x=>x.preventDefault()),t.addEventListener("drop",pe.trDragDrop),t.addEventListener("mousedown",pe.matrixMousedown);let n=document.createElement("tr");n.classList.add("header");let r=document.createElement("td");r.classList.add("anchor"),n.appendChild(r);let s=[...m.trs(t)],u=s.map(x=>m.trWalker(x)),d=m.tds(!1,s[0]);for(let x of d){let C=document.createElement("th");C.dataset.ref=x.dataset.n;let B=0,H=new Set;for(let de of u){let ye=de.nextNode();ye.IAST=ye.cloneNode(!0);let we=ye.textContent;we!==""&&(B++,H.add(we))}let G=B<2?B:`${B}(${H.size})`,ie=document.createElement("span");ie.classList.add("readings"),ie.appendChild(document.createTextNode(G)),C.appendChild(ie);let oe=document.createElement("form");oe.innerHTML='<div><input class="insignificant" title="insignificant" type="checkbox"'+(x.dataset.insignificant?"checked":"")+'></div><div><input class="binary" title="binary" type="checkbox"'+(x.dataset.binary?"checked":"")+"></div>",C.appendChild(oe),n.appendChild(C)}let g=t.querySelector("tbody");g.insertBefore(n,g.firstChild),this.boxdiv.append(t)}}return{slaveinit:function(){comboView.init(),window.startbox!==void 0&&(window.startbox.tree?w.tree(window.startbox.tree.stemmaid,window.startbox.tree.id):window.startbox.text&&w.text(window.startbox.text.name,window.startbox.text.map))},maininit:function(){document.getElementById("comboview").style.display="block",comboView.init(),f()},init:function(){c.viewdiv=document.getElementById("views"),c.descs=document.getElementById("descs"),c.viewdiv.addEventListener("click",pe.textClick),document.addEventListener("keydown",pe.keyDown,{capture:!0}),document.addEventListener("contextmenu",pe.rightClick),document.addEventListener("mouseup",j.remove)},getWindows:function(){return c.windows},addWindow:function(a){c.windows.push(a)},getViewdiv:function(){return c.viewdiv},getTrees:function(){return c.trees}}}();window.addEventListener("load",window.comboView.maininit);
//# sourceMappingURL=script.js.map
