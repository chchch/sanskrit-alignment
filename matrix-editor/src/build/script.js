"use strict";var De={};De.defaults={skip_sgml:!1,syncope:!1};var Ft=De.schemes={balinese:{vowels:"смЕ смЖ смЗ смИ смЙ смК смЛ смМ смН смО  смП смР  смС смТ".split(" "),vowel_marks:"см╡ см╢ см╖ см╕ см╣ см║ см╗ см╝ см╜ снВ см╛ см┐ снГ снА снБ".split(" "),other_marks:["смВ","смД","смБ",""],virama:["снД"],consonants:"смУ смФ смХ смЦ смЧ смШ смЩ смЪ смЫ смЬ смЭ смЮ смЯ сма смб смв смг смд сме смж смз сми смй смк смл смм смн смо смп см░ см▒ см▓ см│".split(" "),symbols:"снР снС снТ снУ снФ снХ снЦ снЧ снШ снЩ   снЮ снЯ".split(" "),zwj:["тАН"],skip:[""]},bengali:{vowels:"ржЕ ржЖ ржЗ ржИ ржЙ ржК ржЛ рза ржМ рзб  ржП ржР  ржУ ржФ".split(" "),vowel_marks:"рж╛ рж┐ рзА рзБ рзВ рзГ рзД рзв рзг  рзЗ рзИ  рзЛ рзМ".split(" "),other_marks:"ржВ ржГ ржБ".split(" "),virama:["рзН"],consonants:"ржХ ржЦ ржЧ ржШ ржЩ ржЪ ржЫ ржЬ ржЭ ржЮ ржЯ ржа ржб ржв ржг ржд рже ржж ржз ржи ржк ржл ржм ржн ржо ржп рж░ рж▓ ржм рж╢ рж╖ рж╕ рж╣ рд│ ржХрзНрж╖ ржЬрзНржЮ".split(" "),symbols:"рзж рзз рзи рзй рзк рзл рзм рзн рзо рзп реР рж╜ ред рее".split(" "),other:"    ржб ржв  ржп ".split(" ")},newa:{vowels:["ЁСРА","ЁСРБ","ЁСРВ","ЁСРГ","ЁСРД","ЁСРЕ","ЁСРЖ","ЁСРЗ","ЁСРИ","ЁСРЙ","","ЁСРК","ЁСРЛ","","ЁСРМ","ЁСРН"],vowel_marks:["ЁСР╡","ЁСР╢","ЁСР╖","ЁСР╕","ЁСР╣","ЁСР║","ЁСР╗","ЁСР╝","ЁСР╜","","ЁСР╛","ЁСР┐","","ЁССА","ЁССБ"],other_marks:["ЁССД","ЁССЕ","ЁССГ","ЁССа","ЁССб",""],virama:["ЁССВ"],consonants:["ЁСРО","ЁСРП","ЁСРР","ЁСРС","ЁСРТ","ЁСРФ","ЁСРХ","ЁСРЦ","ЁСРЧ","ЁСРШ","ЁСРЪ","ЁСРЫ","ЁСРЬ","ЁСРЭ","ЁСРЮ","ЁСРЯ","ЁСРа","ЁСРб","ЁСРв","ЁСРг","ЁСРе","ЁСРж","ЁСРз","ЁСРи","ЁСРй","ЁСРл","ЁСРм","ЁСРо","ЁСР░","ЁСР▒","ЁСР▓","ЁСР│","ЁСР┤"],symbols:["ЁССР","ЁССС","ЁССТ","ЁССУ","ЁССФ","ЁССХ","ЁССЦ","ЁССЧ","ЁССШ","ЁССЩ","ЁССЙ","ЁССЗ","ЁССЛ","ЁССМ"]},sarada:{vowels:["ЁСЖГ","ЁСЖД","ЁСЖЕ","ЁСЖЖ","ЁСЖЗ","ЁСЖИ","ЁСЖЙ","ЁСЖК","ЁСЖЛ","ЁСЖМ","","ЁСЖН","ЁСЖО","","ЁСЖП","ЁСЖР"],vowel_marks:["ЁСЖ│","ЁСЖ┤","ЁСЖ╡","ЁСЖ╢","ЁСЖ╖","ЁСЖ╕","ЁСЖ╣","ЁСЖ║","ЁСЖ╗","","ЁСЖ╝","ЁСЖ╜","","ЁСЖ╛","ЁСЖ┐"],other_marks:["ЁСЖБ","ЁСЖВ","ЁСЖА","ЁСЗВ","ЁСЗГ"],virama:["ЁСЗА"],consonants:["ЁСЖС","ЁСЖТ","ЁСЖУ","ЁСЖФ","ЁСЖХ","ЁСЖЦ","ЁСЖЧ","ЁСЖШ","ЁСЖЩ","ЁСЖЪ","ЁСЖЫ","ЁСЖЬ","ЁСЖЭ","ЁСЖЮ","ЁСЖЯ","ЁСЖа","ЁСЖб","ЁСЖв","ЁСЖг","ЁСЖд","ЁСЖе","ЁСЖж","ЁСЖз","ЁСЖи","ЁСЖй","ЁСЖк","ЁСЖл","ЁСЖм","ЁСЖо","ЁСЖп","ЁСЖ░","ЁСЖ▒","ЁСЖ▓","ЁСЖн"],symbols:["ЁСЗР","ЁСЗС","ЁСЗТ","ЁСЗУ","ЁСЗФ","ЁСЗХ","ЁСЗЦ","ЁСЗЧ","ЁСЗШ","ЁСЗЩ","ЁСЗД","ЁСЗБ","ЁСЗЕ","ЁСЗЖ"]},devanagari:{vowels:"рдЕ рдЖ рдЗ рдИ рдЙ рдК рдЛ реа рдМ реб рдО рдП рдР рдТ рдУ рдФ рдП рдР рдУ".split(" "),vowel_marks:"рд╛ рд┐ реА реБ реВ реГ реД рев рег реЖ реЗ реИ реК реЛ реМ реО реОреЗ реОрд╛ реОреЛ реЖ реП".split(" "),other_marks:"рдВ рдГ рдБ с│╡ с│╢ ъг╜".split(" "),virama:["реН"],consonants:"рдХ рдЦ рдЧ рдШ рдЩ рдЪ рдЫ рдЬ рдЭ рдЮ рдЯ рда рдб рдв рдг рдд рде рдж рдз рди рдк рдл рдм рдн рдо рдп рд░ рд▓ рд╡ рд╢ рд╖ рд╕ рд╣ рд│".split(" "),symbols:"реж рез реи рей рек рел рем рен рео реп реР рд╜ ред рее".split(" "),zwj:["тАН"],skip:[""],accent:["реС","реТ"],combo_accent:"рдГреС рдГреТ рдВреС рдВреТ".split(" "),candra:["реЕ"],other:"рдХрд╝ рдЦрд╝ рдЧрд╝ рдЬрд╝ рдбрд╝ рдврд╝ рдлрд╝ рдпрд╝ рд▒".split(" ")},gujarati:{vowels:"ркЕ ркЖ ркЗ ркИ ркЙ ркК ркЛ рла ркМ рлб  ркП ркР  ркУ ркФ".split(" "),vowel_marks:"рк╛ рк┐ рлА рлБ рлВ рлГ рлД рлв рлг  рлЗ рлИ  рлЛ рлМ".split(" "),other_marks:"ркВ ркГ ркБ".split(" "),virama:["рлН"],consonants:"ркХ ркЦ ркЧ ркШ ркЩ ркЪ ркЫ ркЬ ркЭ ркЮ ркЯ рка ркб ркв ркг ркд рке ркж ркз рки ркк ркл ркм ркн рко ркп рк░ рк▓ рк╡ рк╢ рк╖ рк╕ рк╣ рк│".split(" "),symbols:"рлж рлз рли рлй рлк рлл рлм рлн рло рлп рлР рк╜ рлд рле".split(" "),candra:["рлЕ"]},gurmukhi:{vowels:"риЕ риЖ риЗ риИ риЙ риК      риП риР  риУ риФ".split(" "),vowel_marks:"ри╛ ри┐ рйА рйБ рйВ      рйЗ рйИ  рйЛ рйМ".split(" "),other_marks:"риВ риГ риБ".split(" "),virama:["рйН"],consonants:"риХ риЦ риЧ риШ риЩ риЪ риЫ риЬ риЭ риЮ риЯ риа риб рив риг рид рие риж риз рии рик рил рим рин рио рип ри░ ри▓ ри╡ ри╢ ри╢ ри╕ ри╣ ри│".split(" "),symbols:"рйж рйз рйи рйй рйк рйл рйм рйн рйо рйп реР рд╜ ред рее".split(" "),other:" риЦ риЧ риЬ риб  рил  ".split(" ")},kannada:{vowels:"р▓Е р▓Ж р▓З р▓И р▓Й р▓К р▓Л р│а р▓М р│б р▓О р▓П р▓Р р▓Т р▓У р▓Ф".split(" "),vowel_marks:"р▓╛ р▓┐ р│А р│Б р│В р│Г р│Д р│в р│г р│Ж р│З р│И р│К р│Л р│М".split(" "),other_marks:"р▓В р▓Г рдБ".split(" "),virama:["р│Н"],consonants:"р▓Х р▓Ц р▓Ч р▓Ш р▓Щ р▓Ъ р▓Ы р▓Ь р▓Э р▓Ю р▓Я р▓а р▓б р▓в р▓г р▓д р▓е р▓ж р▓з р▓и р▓к р▓л р▓м р▓н р▓о р▓п р▓░ р▓▓ р▓╡ р▓╢ р▓╖ р▓╕ р▓╣ р▓│".split(" "),symbols:"р│ж р│з р│и р│й р│к р│л р│м р│н р│о р│п р▓Ур▓В р▓╜ ред рее".split(" "),other:"      р▓л  р▓▒".split(" ")},malayalam:{vowels:"р┤Е р┤Ж р┤З р┤И р┤Й р┤К р┤Л р╡а р┤М р╡б р┤О р┤П р┤Р р┤Т р┤У р┤Ф".split(" "),vowel_marks:"р┤╛ р┤┐ р╡А р╡Б р╡В р╡Г р╡Д р╡в р╡г р╡Ж р╡З р╡И р╡К р╡Л р╡М".split(" "),other_marks:"р┤В р┤Г рдБ".split(" "),virama:["р╡Н"],consonants:"р┤Х р┤Ц р┤Ч р┤Ш р┤Щ р┤Ъ р┤Ы р┤Ь р┤Э р┤Ю р┤Я р┤а р┤б р┤в р┤г р┤д р┤е р┤ж р┤з р┤и р┤к р┤л р┤м р┤н р┤о р┤п р┤░ р┤▓ р┤╡ р┤╢ р┤╖ р┤╕ р┤╣ р┤│".split(" "),symbols:"р╡ж р╡з р╡и р╡й р╡к р╡л р╡м р╡н р╡о р╡п р┤Ур┤В р┤╜ ред рее".split(" "),other:"        р┤▒".split(" ")},oriya:{vowels:"рмЕ рмЖ рмЗ рмИ рмЙ рмК рмЛ рна рмМ рнб  рмП рмР  рмУ рмФ".split(" "),vowel_marks:"рм╛ рм┐ рнА рнБ рнВ рнГ рнД рнв рнг  рнЗ рнИ  рнЛ рнМ".split(" "),other_marks:"рмВ рмГ рмБ".split(" "),virama:["рнН"],consonants:"рмХ рмЦ рмЧ рмШ рмЩ рмЪ рмЫ рмЬ рмЭ рмЮ рмЯ рма рмб рмв рмг рмд рме рмж рмз рми рмк рмл рмм рмн рмо рмп рм░ рм▓ рм╡ рм╢ рм╖ рм╕ рм╣ рм│".split(" "),symbols:"рнж рнз рни рнй рнк рнл рнм рнн рно рнп рмУрмВ рм╜ ред рее".split(" "),other:"    рмб рмв  рмп ".split(" ")},tamil:{vowels:"роЕ роЖ роЗ роИ роЙ роК     роО роП роР роТ роУ роФ".split(" "),vowel_marks:"ро╛ ро┐ рпА рпБ рпВ     рпЖ рпЗ рпИ рпК рпЛ рпМ".split(" "),other_marks:"роВ роГ ".split(" "),virama:["рпН"],consonants:"роХ роХ роХ роХ роЩ роЪ роЪ роЬ роЪ роЮ роЯ роЯ роЯ роЯ рог род род род род рои рок рок рок рок роо роп ро░ ро▓ ро╡ ро╢ ро╖ ро╕ ро╣ ро│".split(" "),symbols:"рпж рпз рпи рпй рпк рпл рпм рпн рпо рпп рпР рд╜ ред рее".split(" "),other:"        ро▒".split(" ")},telugu:{vowels:"р░Е р░Ж р░З р░И р░Й р░К р░Л р▒а р░М р▒б р░О р░П р░Р р░Т р░У р░Ф".split(" "),vowel_marks:"р░╛ р░┐ р▒А р▒Б р▒В р▒Г р▒Д р▒в р▒г р▒Ж р▒З р▒И р▒К р▒Л р▒М".split(" "),other_marks:"р░В р░Г р░Б с│▓ с│▓".split(" "),virama:["р▒Н"],consonants:"р░Х р░Ц р░Ч р░Ш р░Щ р░Ъ р░Ы р░Ь р░Э р░Ю р░Я р░а р░б р░в р░г р░д р░е р░ж р░з р░и р░к р░л р░м р░н р░о р░п р░░ р░▓ р░╡ р░╢ р░╖ р░╕ р░╣ р░│".split(" "),symbols:"р▒ж р▒з р▒и р▒й р▒к р▒л р▒м р▒н р▒о р▒п р░Ур░В р░╜ ред рее".split(" "),other:"        р░▒".split(" ")},iast:{vowels:"a ─Б i ─л u ┼л с╣Ы с╣Э с╕╖ с╕╣ с║╜ e ai ├╡ o au ├к a├о ├┤ a├╗".split(" "),other_marks:["с╣Г","с╕е","m╠Р","с║Ц","с╕л","oс╕┐"],virama:[""],consonants:"k kh g gh с╣Е c ch j jh ├▒ с╣н с╣нh с╕Н с╕Нh с╣З t th d dh n p ph b bh m y r l v ┼Ы с╣г s h с╕╗".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oс╣Б ' | ||".split(" ")},iso:{vowels:"a ─Б i ─л u ┼л r╠е r╠е╠Д l╠е l╠е╠Д с║╜ e ai ├╡ o au ├к a├о ├┤ a├╗".split(" "),other_marks:["с╣Б","с╕е","m╠Р","oс╕┐"],virama:[""],consonants:"k kh g gh с╣Е c ch j jh ├▒ с╣н с╣нh с╕Н с╕Нh с╣З t th d dh n p ph b bh m y r l v ┼Ы с╣г s h с╕╖ kс╣г j├▒".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 om╠Р ' | ||".split(" ")},itrans:{vowels:"a A i I u U RRi RRI LLi LLI  e ai  o au".split(" "),other_marks:["M","H",".N"],virama:[""],consonants:"k kh g gh ~N ch Ch j jh ~n T Th D Dh N t th d dh n p ph b bh m y r l v sh Sh s h L kSh j~n".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM .a | ||".split(" "),candra:[".c"],zwj:["{}"],skip:"_",accent:["\\'","\\_"],combo_accent:"\\'H \\_H \\'M \\_M".split(" "),other:"q K G z .D .Dh f Y R".split(" ")},hk:{vowels:"a A i I u U R RR lR lRR  e ai  o au".split(" "),other_marks:"M H ~".split(" "),virama:[""],consonants:"k kh g gh G c ch j jh J T Th D Dh N t th d dh n p ph b bh m y r l v z S s h L kS jJ".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM ' | ||".split(" ")},slp1:{vowels:"a A i I u U f F x X с║╜ e E ├╡ o O ├к ├К ├┤ ├Ф".split(" "),other_marks:"M H m╠Р с║Ц с╕л oс╕┐".split(" "),virama:[""],consonants:"k K g G N c C j J Y w W q Q R t T d D n p P b B m y r l v S z s h L".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oс╣Б ' | ||".split(" ")},velthuis:{vowels:"a aa i ii u uu .r .rr .li .ll  e ai  o au".split(" "),other_marks:".m .h ".split(" "),virama:[""],consonants:'k kh g gh "n c ch j jh ~n .t .th .d .d .n t th d dh n p ph b bh m y r l v ~s .s s h L k.s j~n'.split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 o.m ' | ||".split(" ")},wx:{vowels:"a A i I u U q Q L   e E  o O".split(" "),other_marks:"M H z".split(" "),virama:[""],consonants:"k K g G f c C j J F t T d D N w W x X n p P b B m y r l v S R s h  kR jF".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oM ' | ||".split(" ")}},x1={},Jt={iast:{с╣Ы:["r╠е"],с╣Г:["с╣Б"]},itrans:{A:["aa"],I:["ii","ee"],U:["uu","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],"j~n":["GY","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":"\\_.m \\_.n \\`M \\`.m \\`.n".split(" "),".a":["~"],"|":["."],"||":[".."],z:["J"]}},Rt={};De.isRomanScheme=function(x){return x1.hasOwnProperty(x)};De.addBrahmicScheme=function(x,u){De.schemes[x]=u};De.addRomanScheme=function(x,u){"vowel_marks"in u||(u.vowel_marks=u.vowels.slice(1)),De.schemes[x]=u,x1[x]=!0};var b1=function(x){var u={};for(var k in x)!x.hasOwnProperty(k)||(u[k]=x[k].slice(0));return u};(function(){var x=Ft.kolkata=b1(Ft.iast),u="iast itrans hk kolkata slp1 velthuis wx".split(" ");x.vowels="a ─Б i ─л u ┼л с╣Ы с╣Э с╕╖ с╕╣ e ─У ai o ┼Н au".split(" ");for(var k=0,P;P=u[k];k++)De.addRomanScheme(P,Ft[P]);var v=b1(Ft.itrans);v.vowels="a A i I u U Ri RRI LLi LLi e E ai o O au".split(" "),v.vowel_marks=v.vowels.slice(1),Jt.itrans_dravidian=Jt.itrans,De.addRomanScheme("itrans_dravidian",v)})();var j1=function(x,u){var k=Jt[x]||{},P={},v=De.schemes[x],I={},z=[],d={},f=De.schemes[u];for(var C in v)if(!!v.hasOwnProperty(C)){var N=v[C],H=f[C];if(H!==void 0)for(var B=0;B<N.length;B++){var q=N[B],D=H[B],O=k[q]||[],W=O.length,te=0;for(z.push(q.length),te=0;te<W;te++)z.push(O[te].length);if(C==="vowel_marks"||C==="virama")for(d[q]=D,te=0;te<W;te++)d[O[te]]=D;else{for(I[q]=D,te=0;te<W;te++)I[O[te]]=D;if(C==="consonants"||C==="other")for(P[q]=D,te=0;te<W;te++)P[O[te]]=D}}}return{consonants:P,fromRoman:De.isRomanScheme(x),letters:I,marks:d,maxTokenLength:Math.max.apply(Math,z),toRoman:De.isRomanScheme(u),virama:f.virama}},U1=function(x,u,k){for(var P=[],v=u.consonants,I=x.length,z=!1,d=u.letters,f=u.marks,C=u.maxTokenLength,N=k.skip_sgml,H=k.syncope,B,q,D="",O=u.toRoman,W=u.virama,te=!1,U=!1,j=!1,se=0,he;(he=x.charAt(se))||D;se++){var ue=C-D.length;if(!(ue>0&&se<I&&(D+=he,ue>1)))for(var $=0;$<C;$++){var T=D.substr(0,C-$);if(te===!0)te=T!==">";else if(T==="<")te=N;else if(T==="##"){j=!j,D=D.substr(2);break}if(U=te||j,(B=d[T])!==void 0&&!U){O?P.push(B):(z?(q=f[T])?P.push(q):T!=="a"&&(P.push(W),P.push(B)):P.push(B),z=T in v),D=D.substr(C-$);break}else $===C-1&&(z&&(z=!1,H||P.push(W)),P.push(T),D=D.substr(1))}}return z&&!H&&P.push(W),P.join("")},G1=function(x,u){for(var k=[],P=u.consonants,v=!1,I=!1,z=u.letters,d=u.marks,f,C=u.toRoman,N=!1,H=0,B;B=x.charAt(H);H++){if(B==="#"){v?(N=!N,v=!1):v=!0,I&&(k.push("a"),I=!1);continue}else if(N){k.push(B);continue}(f=d[B])!==void 0?(k.push(f),I=!1):(v&&(k.push("#"),v=!1),I&&(k.push("a"),I=!1),(f=z[B])?(k.push(f),I=C&&B in P):k.push(B))}return I&&k.push("a"),k.join("")};De.t=function(x,u,k,P){P=P||{};var v=Rt.options||{},I=De.defaults,z=Rt.from===u&&Rt.to===k,d;for(var f in I)if(I.hasOwnProperty(f)){var C=I[f];f in P&&(C=P[f]),P[f]=C,C!==v[f]&&(z=!1)}return z?d=Rt.map:(d=j1(u,k,P),Rt={from:u,map:d,options:P,to:k}),u==="itrans"&&(x=x.replace(/\{\\m\+\}/g,".h.N"),x=x.replace(/\.h/g,""),x=x.replace(/\\([^'`_]|$)/g,"##$1##")),d.fromRoman?U1(x,d,P):G1(x,d,P)};var Qt={};(function(x){"use strict";x.__type__="csv";var u=typeof jQuery!="undefined"&&jQuery.Deferred||typeof _!="undefined"&&_.Deferred||function(){var d,f,C=new Promise(function(N,H){d=N,f=H});return{resolve:d,reject:f,promise:function(){return C}}};x.fetch=function(d){var f=new u;if(d.file){var C=new FileReader,N=d.encoding||"UTF-8";C.onload=function(q){var D=x.extractFields(x.parse(q.target.result,d),d);D.useMemoryStore=!0,D.metadata={filename:d.file.name},f.resolve(D)},C.onerror=function(q){f.reject({error:{message:"Failed to load file. Code: "+q.target.error.code}})},C.readAsText(d.file,N)}else if(d.data){var H=x.extractFields(x.parse(d.data,d),d);H.useMemoryStore=!0,f.resolve(H)}else if(d.url){var B=window.fetch||function(q){var D=jQuery.get(q),O={then:function(W){return D.done(W),O},catch:function(W){return D.fail(W),O}};return O};B(d.url).then(function(q){return q.text?q.text():q}).then(function(q){var D=x.extractFields(x.parse(q,d),d);D.useMemoryStore=!0,f.resolve(D)}).catch(function(q,D){f.reject({error:{message:"Failed to load file. "+q.statusText+". Code: "+q.status,request:q}})})}return f.promise()},x.extractFields=function(d,f){return f.noHeaderRow!==!0&&d.length>0?{fields:d[0],records:d.slice(1)}:{records:d}},x.normalizeDialectOptions=function(d){var f={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var C in d)C==="trim"?f.skipinitialspace=d.trim:f[C.toLowerCase()]=d[C];return f},x.parse=function(d,f){(!f||f&&!f.lineterminator)&&(d=x.normalizeLineTerminator(d,f));var C=x.normalizeDialectOptions(f);d=z(d,C.lineterminator);var N="",H=!1,B=!1,q="",D=[],O=[],W,te;for(te=function(U){return B!==!0&&(U===""?U=null:C.skipinitialspace===!0&&(U=I(U)),k.test(U)?U=parseInt(U,10):P.test(U)&&(U=parseFloat(U,10))),U},W=0;W<d.length;W+=1)N=d.charAt(W),H===!1&&(N===C.delimiter||N===C.lineterminator)?(q=te(q),D.push(q),N===C.lineterminator&&(O.push(D),D=[]),q="",B=!1):N!==C.quotechar?q+=N:H?d.charAt(W+1)===C.quotechar?(q+=C.quotechar,W+=1):H=!1:(H=!0,B=!0);return q=te(q),D.push(q),O.push(D),C.skipinitialrows&&(O=O.slice(C.skipinitialrows)),O},x.normalizeLineTerminator=function(d,f){return f=f||{},f.lineterminator?d:d.replace(/(\r\n|\n|\r)/gm,`
`)},x.objectToArray=function(d){for(var f=[],C=[],N=[],H=0;H<d.fields.length;H++){var B=d.fields[H].id;N.push(B);var q=d.fields[H].label?d.fields[H].label:B;C.push(q)}f.push(C);for(var H=0;H<d.records.length;H++){for(var D=[],O=d.records[H],W=0;W<N.length;W++)D.push(O[N[W]]);f.push(D)}return f},x.serialize=function(d,f){var C=null;d instanceof Array?C=d:C=x.objectToArray(d);var N=x.normalizeDialectOptions(f),H="",B="",q="",D="",O,W,te;for(te=function(U){return U===null?U="":typeof U=="string"&&v.test(U)?(N.doublequote&&(U=U.replace(/"/g,'""')),U=N.quotechar+U+N.quotechar):typeof U=="number"&&(U=U.toString(10)),U},O=0;O<C.length;O+=1)for(H=C[O],W=0;W<H.length;W+=1)B=te(H[W]),W===H.length-1?(q+=B,D+=q+N.lineterminator,q=""):q+=B+N.delimiter,B="";return D};var k=/^\d+$/,P=/^\d*\.\d+$|^\d+\.\d*$/,v=/^\s|\s$|,|"|\n/,I=function(){return String.prototype.trim?function(d){return d.trim()}:function(d){return d.replace(/^\s*/,"").replace(/\s*$/,"")}}();function z(d,f){return d.charAt(d.length-f.length)!==f?d:d.substring(0,d.length-f.length)}})(Qt);function W1(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function Y1(x,u,k){return k={path:u,exports:{},require:function(P,v){return X1(P,v==null?k.path:v)}},x(k,k.exports),k.exports}function X1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var J1=Y1(function(x,u){(function(k,P){x.exports=P()})(window,function(){return function(k){var P={};function v(I){if(P[I])return P[I].exports;var z=P[I]={i:I,l:!1,exports:{}};return k[I].call(z.exports,z,z.exports,v),z.l=!0,z.exports}return v.m=k,v.c=P,v.d=function(I,z,d){v.o(I,z)||Object.defineProperty(I,z,{enumerable:!0,get:d})},v.r=function(I){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},v.t=function(I,z){if(1&z&&(I=v(I)),8&z||4&z&&typeof I=="object"&&I&&I.__esModule)return I;var d=Object.create(null);if(v.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:I}),2&z&&typeof I!="string")for(var f in I)v.d(d,f,function(C){return I[C]}.bind(null,f));return d},v.n=function(I){var z=I&&I.__esModule?function(){return I.default}:function(){return I};return v.d(z,"a",z),z},v.o=function(I,z){return Object.prototype.hasOwnProperty.call(I,z)},v.p="",v(v.s=1)}([function(k,P,v){var I,z;I=[v(2)],(z=function(d){function f(e){if(f.is(e,"function"))return C?e():d.on("raphael.DOMload",e);if(f.is(e,o))return f._engine.create[U](f,e.splice(0,3+f.is(e[0],s))).add(e);var r=Array.prototype.slice.call(arguments,0);if(f.is(r[r.length-1],"function")){var a=r.pop();return C?a.call(f._engine.create[U](f,r)):d.on("raphael.DOMload",function(){a.call(f._engine.create[U](f,r))})}return f._engine.create[U](f,arguments)}f.version="2.3.0",f.eve=d;var C,N,H=/[, ]+/,B={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},q=/\{(\d+)\}/g,D="hasOwnProperty",O={doc:document,win:window},W={was:Object.prototype[D].call(O.win,"Raphael"),is:O.win.Raphael},te=function(){this.ca=this.customAttributes={}},U="apply",j="concat",se="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,he="",ue=" ",$=String,T="split",me="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[T](ue),ye={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},be=$.prototype.toLowerCase,pe=Math,Se=pe.max,X=pe.min,Ce=pe.abs,_e=pe.pow,ee=pe.PI,s="number",o="array",h=Object.prototype.toString,t=(f._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),n={NaN:1,Infinity:1,"-Infinity":1},i=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,l=pe.round,p=parseFloat,m=parseInt,b=$.prototype.toUpperCase,L=f._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},R=f._availableAnimAttrs={blur:s,"clip-rect":"csv",cx:s,cy:s,fill:"colour","fill-opacity":s,"font-size":s,height:s,opacity:s,path:"path",r:s,rx:s,ry:s,stroke:"colour","stroke-opacity":s,"stroke-width":s,transform:"transform",width:s,x:s,y:s},V=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,G={hs:1,rg:1},K=/,?([achlmqrstvxz]),?/gi,ie=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,de=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ge=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,we=(f._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ve=function(e,r){return p(e)-p(r)},Ae=function(e){return e},ke=f._rectPath=function(e,r,a,c,g){return g?[["M",e+g,r],["l",a-2*g,0],["a",g,g,0,0,1,g,g],["l",0,c-2*g],["a",g,g,0,0,1,-g,g],["l",2*g-a,0],["a",g,g,0,0,1,-g,-g],["l",0,2*g-c],["a",g,g,0,0,1,g,-g],["z"]]:[["M",e,r],["l",a,0],["l",0,c],["l",-a,0],["z"]]},Le=function(e,r,a,c){return c==null&&(c=a),[["M",e,r],["m",0,-c],["a",a,c,0,1,1,0,2*c],["a",a,c,0,1,1,0,-2*c],["z"]]},Ne=f._getPath={path:function(e){return e.attr("path")},circle:function(e){var r=e.attrs;return Le(r.cx,r.cy,r.r)},ellipse:function(e){var r=e.attrs;return Le(r.cx,r.cy,r.rx,r.ry)},rect:function(e){var r=e.attrs;return ke(r.x,r.y,r.width,r.height,r.r)},image:function(e){var r=e.attrs;return ke(r.x,r.y,r.width,r.height)},text:function(e){var r=e._getBBox();return ke(r.x,r.y,r.width,r.height)},set:function(e){var r=e._getBBox();return ke(r.x,r.y,r.width,r.height)}},Me=f.mapPath=function(e,r){if(!r)return e;var a,c,g,w,A,S,E;for(g=0,A=(e=St(e)).length;g<A;g++)for(w=1,S=(E=e[g]).length;w<S;w+=2)a=r.x(E[w],E[w+1]),c=r.y(E[w],E[w+1]),E[w]=a,E[w+1]=c;return e};if(f._g=O,f.type=O.win.SVGAngle||O.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",f.type=="VML"){var Be,Oe=O.doc.createElement("div");if(Oe.innerHTML='<v:shape adj="1"/>',(Be=Oe.firstChild).style.behavior="url(#default#VML)",!Be||typeof Be.adj!="object")return f.type=he;Oe=null}function qe(e){if(typeof e=="function"||Object(e)!==e)return e;var r=new e.constructor;for(var a in e)e[D](a)&&(r[a]=qe(e[a]));return r}f.svg=!(f.vml=f.type=="VML"),f._Paper=te,f.fn=N=te.prototype=f.prototype,f._id=0,f.is=function(e,r){return(r=be.call(r))=="finite"?!n[D](+e):r=="array"?e instanceof Array:r=="null"&&e===null||r==typeof e&&e!==null||r=="object"&&e===Object(e)||r=="array"&&Array.isArray&&Array.isArray(e)||h.call(e).slice(8,-1).toLowerCase()==r},f.angle=function(e,r,a,c,g,w){if(g==null){var A=e-a,S=r-c;return A||S?(180+180*pe.atan2(-S,-A)/ee+360)%360:0}return f.angle(e,r,g,w)-f.angle(a,c,g,w)},f.rad=function(e){return e%360*ee/180},f.deg=function(e){return Math.round(180*e/ee%360*1e3)/1e3},f.snapTo=function(e,r,a){if(a=f.is(a,"finite")?a:10,f.is(e,o)){for(var c=e.length;c--;)if(Ce(e[c]-r)<=a)return e[c]}else{var g=r%(e=+e);if(g<a)return r-g;if(g>e-a)return r-g+e}return r};var je,wt;f.createUUID=(je=/[xy]/g,wt=function(e){var r=16*pe.random()|0;return(e=="x"?r:3&r|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(je,wt).toUpperCase()}),f.setWindow=function(e){d("raphael.setWindow",f,O.win,e),O.win=e,O.doc=O.win.document,f._engine.initWin&&f._engine.initWin(O.win)};var Je=function(e){if(f.vml){var r,a=/^\s+|\s+$/g;try{var c=new ActiveXObject("htmlfile");c.write("<body>"),c.close(),r=c.body}catch(A){r=createPopup().document.body}var g=r.createTextRange();Je=ze(function(A){try{r.style.color=$(A).replace(a,he);var S=g.queryCommandValue("ForeColor");return"#"+("000000"+(S=(255&S)<<16|65280&S|(16711680&S)>>>16).toString(16)).slice(-6)}catch(E){return"none"}})}else{var w=O.doc.createElement("i");w.title="Rapha├лl Colour Picker",w.style.display="none",O.doc.body.appendChild(w),Je=ze(function(A){return w.style.color=A,O.doc.defaultView.getComputedStyle(w,he).getPropertyValue("color")})}return Je(e)},ot=function(){return"hsb("+[this.h,this.s,this.b]+")"},at=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ct=function(){return this.hex},lt=function(e,r,a){if(r==null&&f.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(a=e.b,r=e.g,e=e.r),r==null&&f.is(e,"string")){var c=f.getRGB(e);e=c.r,r=c.g,a=c.b}return(e>1||r>1||a>1)&&(e/=255,r/=255,a/=255),[e,r,a]},Nt=function(e,r,a,c){var g={r:e*=255,g:r*=255,b:a*=255,hex:f.rgb(e,r,a),toString:Ct};return f.is(c,"finite")&&(g.opacity=c),g};function ze(e,r,a){return function c(){var g=Array.prototype.slice.call(arguments,0),w=g.join("тРА"),A=c.cache=c.cache||{},S=c.count=c.count||[];return A[D](w)?(function(E,F){for(var J=0,oe=E.length;J<oe;J++)if(E[J]===F)return E.push(E.splice(J,1)[0])}(S,w),a?a(A[w]):A[w]):(S.length>=1e3&&delete A[S.shift()],S.push(w),A[w]=e[U](r,g),a?a(A[w]):A[w])}}f.color=function(e){var r;return f.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(r=f.hsb2rgb(e),e.r=r.r,e.g=r.g,e.b=r.b,e.hex=r.hex):f.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(r=f.hsl2rgb(e),e.r=r.r,e.g=r.g,e.b=r.b,e.hex=r.hex):(f.is(e,"string")&&(e=f.getRGB(e)),f.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(r=f.rgb2hsl(e),e.h=r.h,e.s=r.s,e.l=r.l,r=f.rgb2hsb(e),e.v=r.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=Ct,e},f.hsb2rgb=function(e,r,a,c){var g,w,A,S,E;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(a=e.b,r=e.s,c=e.o,e=e.h),S=(E=a*r)*(1-Ce((e=(e*=360)%360/60)%2-1)),g=w=A=a-E,Nt(g+=[E,S,0,0,S,E][e=~~e],w+=[S,E,E,S,0,0][e],A+=[0,0,S,E,E,S][e],c)},f.hsl2rgb=function(e,r,a,c){var g,w,A,S,E;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(a=e.l,r=e.s,e=e.h),(e>1||r>1||a>1)&&(e/=360,r/=100,a/=100),S=(E=2*r*(a<.5?a:1-a))*(1-Ce((e=(e*=360)%360/60)%2-1)),g=w=A=a-E/2,Nt(g+=[E,S,0,0,S,E][e=~~e],w+=[S,E,E,S,0,0][e],A+=[0,0,S,E,E,S][e],c)},f.rgb2hsb=function(e,r,a){var c,g;return e=(a=lt(e,r,a))[0],r=a[1],a=a[2],{h:(((g=(c=Se(e,r,a))-X(e,r,a))==0?null:c==e?(r-a)/g:c==r?(a-e)/g+2:(e-r)/g+4)+360)%6*60/360,s:g==0?0:g/c,b:c,toString:ot}},f.rgb2hsl=function(e,r,a){var c,g,w,A;return e=(a=lt(e,r,a))[0],r=a[1],a=a[2],c=((g=Se(e,r,a))+(w=X(e,r,a)))/2,{h:(((A=g-w)==0?null:g==e?(r-a)/A:g==r?(a-e)/A+2:(e-r)/A+4)+360)%6*60/360,s:A==0?0:c<.5?A/(2*c):A/(2-2*c),l:c,toString:at}},f._path2string=function(){return this.join(",").replace(K,"$1")},f._preload=function(e,r){var a=O.doc.createElement("img");a.style.cssText="position:absolute;left:-9999em;top:-9999em",a.onload=function(){r.call(this),this.onload=null,O.doc.body.removeChild(this)},a.onerror=function(){O.doc.body.removeChild(this)},O.doc.body.appendChild(a),a.src=e};function Qe(){return this.hex}function ct(e,r){for(var a=[],c=0,g=e.length;g-2*!r>c;c+=2){var w=[{x:+e[c-2],y:+e[c-1]},{x:+e[c],y:+e[c+1]},{x:+e[c+2],y:+e[c+3]},{x:+e[c+4],y:+e[c+5]}];r?c?g-4==c?w[3]={x:+e[0],y:+e[1]}:g-2==c&&(w[2]={x:+e[0],y:+e[1]},w[3]={x:+e[2],y:+e[3]}):w[0]={x:+e[g-2],y:+e[g-1]}:g-4==c?w[3]=w[2]:c||(w[0]={x:+e[c],y:+e[c+1]}),a.push(["C",(-w[0].x+6*w[1].x+w[2].x)/6,(-w[0].y+6*w[1].y+w[2].y)/6,(w[1].x+6*w[2].x-w[3].x)/6,(w[1].y+6*w[2].y-w[3].y)/6,w[2].x,w[2].y])}return a}f.getRGB=ze(function(e){if(!e||(e=$(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Qe};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Qe};!G[D](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=Je(e));var r,a,c,g,w,A,S=e.match(t);return S?(S[2]&&(c=m(S[2].substring(5),16),a=m(S[2].substring(3,5),16),r=m(S[2].substring(1,3),16)),S[3]&&(c=m((w=S[3].charAt(3))+w,16),a=m((w=S[3].charAt(2))+w,16),r=m((w=S[3].charAt(1))+w,16)),S[4]&&(A=S[4][T](V),r=p(A[0]),A[0].slice(-1)=="%"&&(r*=2.55),a=p(A[1]),A[1].slice(-1)=="%"&&(a*=2.55),c=p(A[2]),A[2].slice(-1)=="%"&&(c*=2.55),S[1].toLowerCase().slice(0,4)=="rgba"&&(g=p(A[3])),A[3]&&A[3].slice(-1)=="%"&&(g/=100)),S[5]?(A=S[5][T](V),r=p(A[0]),A[0].slice(-1)=="%"&&(r*=2.55),a=p(A[1]),A[1].slice(-1)=="%"&&(a*=2.55),c=p(A[2]),A[2].slice(-1)=="%"&&(c*=2.55),(A[0].slice(-3)=="deg"||A[0].slice(-1)=="┬░")&&(r/=360),S[1].toLowerCase().slice(0,4)=="hsba"&&(g=p(A[3])),A[3]&&A[3].slice(-1)=="%"&&(g/=100),f.hsb2rgb(r,a,c,g)):S[6]?(A=S[6][T](V),r=p(A[0]),A[0].slice(-1)=="%"&&(r*=2.55),a=p(A[1]),A[1].slice(-1)=="%"&&(a*=2.55),c=p(A[2]),A[2].slice(-1)=="%"&&(c*=2.55),(A[0].slice(-3)=="deg"||A[0].slice(-1)=="┬░")&&(r/=360),S[1].toLowerCase().slice(0,4)=="hsla"&&(g=p(A[3])),A[3]&&A[3].slice(-1)=="%"&&(g/=100),f.hsl2rgb(r,a,c,g)):((S={r,g:a,b:c,toString:Qe}).hex="#"+(16777216|c|a<<8|r<<16).toString(16).slice(1),f.is(g,"finite")&&(S.opacity=g),S)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Qe}},f),f.hsb=ze(function(e,r,a){return f.hsb2rgb(e,r,a).hex}),f.hsl=ze(function(e,r,a){return f.hsl2rgb(e,r,a).hex}),f.rgb=ze(function(e,r,a){function c(g){return g+.5|0}return"#"+(16777216|c(a)|c(r)<<8|c(e)<<16).toString(16).slice(1)}),f.getColor=function(e){var r=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},a=this.hsb2rgb(r.h,r.s,r.b);return r.h+=.075,r.h>1&&(r.h=0,r.s-=.2,r.s<=0&&(this.getColor.start={h:0,s:1,b:r.b})),a.hex},f.getColor.reset=function(){delete this.start},f.parsePathString=function(e){if(!e)return null;var r=Ue(e);if(r.arr)return He(r.arr);var a={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},c=[];return f.is(e,o)&&f.is(e[0],o)&&(c=He(e)),c.length||$(e).replace(ie,function(g,w,A){var S=[],E=w.toLowerCase();if(A.replace(ge,function(F,J){J&&S.push(+J)}),E=="m"&&S.length>2&&(c.push([w][j](S.splice(0,2))),E="l",w=w=="m"?"l":"L"),E=="r")c.push([w][j](S));else for(;S.length>=a[E]&&(c.push([w][j](S.splice(0,a[E]))),a[E]););}),c.toString=f._path2string,r.arr=He(c),c},f.parseTransformString=ze(function(e){if(!e)return null;var r=[];return f.is(e,o)&&f.is(e[0],o)&&(r=He(e)),r.length||$(e).replace(de,function(a,c,g){var w=[];be.call(c),g.replace(ge,function(A,S){S&&w.push(+S)}),r.push([c][j](w))}),r.toString=f._path2string,r},this,function(e){if(!e)return e;for(var r=[],a=0;a<e.length;a++){for(var c=[],g=0;g<e[a].length;g++)c.push(e[a][g]);r.push(c)}return r});var Ue=function(e){var r=Ue.ps=Ue.ps||{};return r[e]?r[e].sleep=100:r[e]={sleep:100},setTimeout(function(){for(var a in r)r[D](a)&&a!=e&&(r[a].sleep--,!r[a].sleep&&delete r[a])}),r[e]};function ut(e,r,a,c,g){return e*(e*(-3*r+9*a-9*c+3*g)+6*r-12*a+6*c)-3*r+3*a}function Ge(e,r,a,c,g,w,A,S,E){E==null&&(E=1);for(var F=(E=E>1?1:E<0?0:E)/2,J=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],oe=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0,Y=0;Y<12;Y++){var ne=F*J[Y]+F,ae=ut(ne,e,a,g,A),re=ut(ne,r,c,w,S),Q=ae*ae+re*re;Z+=oe[Y]*pe.sqrt(Q)}return F*Z}function _t(e,r,a,c,g,w,A,S){if(!(Se(e,a)<X(g,A)||X(e,a)>Se(g,A)||Se(r,c)<X(w,S)||X(r,c)>Se(w,S))){var E=(e-a)*(w-S)-(r-c)*(g-A);if(E){var F=((e*c-r*a)*(g-A)-(e-a)*(g*S-w*A))/E,J=((e*c-r*a)*(w-S)-(r-c)*(g*S-w*A))/E,oe=+F.toFixed(2),Z=+J.toFixed(2);if(!(oe<+X(e,a).toFixed(2)||oe>+Se(e,a).toFixed(2)||oe<+X(g,A).toFixed(2)||oe>+Se(g,A).toFixed(2)||Z<+X(r,c).toFixed(2)||Z>+Se(r,c).toFixed(2)||Z<+X(w,S).toFixed(2)||Z>+Se(w,S).toFixed(2)))return{x:F,y:J}}}}function ht(e,r,a){var c=f.bezierBBox(e),g=f.bezierBBox(r);if(!f.isBBoxIntersect(c,g))return a?0:[];for(var w=Ge.apply(0,e),A=Ge.apply(0,r),S=Se(~~(w/5),1),E=Se(~~(A/5),1),F=[],J=[],oe={},Z=a?0:[],Y=0;Y<S+1;Y++){var ne=f.findDotsAtSegment.apply(f,e.concat(Y/S));F.push({x:ne.x,y:ne.y,t:Y/S})}for(Y=0;Y<E+1;Y++)ne=f.findDotsAtSegment.apply(f,r.concat(Y/E)),J.push({x:ne.x,y:ne.y,t:Y/E});for(Y=0;Y<S;Y++)for(var ae=0;ae<E;ae++){var re=F[Y],Q=F[Y+1],xe=J[ae],le=J[ae+1],fe=Ce(Q.x-re.x)<.001?"y":"x",ce=Ce(le.x-xe.x)<.001?"y":"x",Ee=_t(re.x,re.y,Q.x,Q.y,xe.x,xe.y,le.x,le.y);if(Ee){if(oe[Ee.x.toFixed(4)]==Ee.y.toFixed(4))continue;oe[Ee.x.toFixed(4)]=Ee.y.toFixed(4);var Pe=re.t+Ce((Ee[fe]-re[fe])/(Q[fe]-re[fe]))*(Q.t-re.t),Re=xe.t+Ce((Ee[ce]-xe[ce])/(le[ce]-xe[ce]))*(le.t-xe.t);Pe>=0&&Pe<=1.001&&Re>=0&&Re<=1.001&&(a?Z++:Z.push({x:Ee.x,y:Ee.y,t1:X(Pe,1),t2:X(Re,1)}))}}return Z}function kt(e,r,a){e=f._path2curve(e),r=f._path2curve(r);for(var c,g,w,A,S,E,F,J,oe,Z,Y=a?0:[],ne=0,ae=e.length;ne<ae;ne++){var re=e[ne];if(re[0]=="M")c=S=re[1],g=E=re[2];else{re[0]=="C"?(oe=[c,g].concat(re.slice(1)),c=oe[6],g=oe[7]):(oe=[c,g,c,g,S,E,S,E],c=S,g=E);for(var Q=0,xe=r.length;Q<xe;Q++){var le=r[Q];if(le[0]=="M")w=F=le[1],A=J=le[2];else{le[0]=="C"?(Z=[w,A].concat(le.slice(1)),w=Z[6],A=Z[7]):(Z=[w,A,w,A,F,J,F,J],w=F,A=J);var fe=ht(oe,Z,a);if(a)Y+=fe;else{for(var ce=0,Ee=fe.length;ce<Ee;ce++)fe[ce].segment1=ne,fe[ce].segment2=Q,fe[ce].bez1=oe,fe[ce].bez2=Z;Y=Y.concat(fe)}}}}}return Y}f.findDotsAtSegment=function(e,r,a,c,g,w,A,S,E){var F=1-E,J=_e(F,3),oe=_e(F,2),Z=E*E,Y=Z*E,ne=J*e+3*oe*E*a+3*F*E*E*g+Y*A,ae=J*r+3*oe*E*c+3*F*E*E*w+Y*S,re=e+2*E*(a-e)+Z*(g-2*a+e),Q=r+2*E*(c-r)+Z*(w-2*c+r),xe=a+2*E*(g-a)+Z*(A-2*g+a),le=c+2*E*(w-c)+Z*(S-2*w+c),fe=F*e+E*a,ce=F*r+E*c,Ee=F*g+E*A,Pe=F*w+E*S,Re=90-180*pe.atan2(re-xe,Q-le)/ee;return(re>xe||Q<le)&&(Re+=180),{x:ne,y:ae,m:{x:re,y:Q},n:{x:xe,y:le},start:{x:fe,y:ce},end:{x:Ee,y:Pe},alpha:Re}},f.bezierBBox=function(e,r,a,c,g,w,A,S){f.is(e,"array")||(e=[e,r,a,c,g,w,A,S]);var E=Mt.apply(null,e);return{x:E.min.x,y:E.min.y,x2:E.max.x,y2:E.max.y,width:E.max.x-E.min.x,height:E.max.y-E.min.y}},f.isPointInsideBBox=function(e,r,a){return r>=e.x&&r<=e.x2&&a>=e.y&&a<=e.y2},f.isBBoxIntersect=function(e,r){var a=f.isPointInsideBBox;return a(r,e.x,e.y)||a(r,e.x2,e.y)||a(r,e.x,e.y2)||a(r,e.x2,e.y2)||a(e,r.x,r.y)||a(e,r.x2,r.y)||a(e,r.x,r.y2)||a(e,r.x2,r.y2)||(e.x<r.x2&&e.x>r.x||r.x<e.x2&&r.x>e.x)&&(e.y<r.y2&&e.y>r.y||r.y<e.y2&&r.y>e.y)},f.pathIntersection=function(e,r){return kt(e,r)},f.pathIntersectionNumber=function(e,r){return kt(e,r,1)},f.isPointInsidePath=function(e,r,a){var c=f.pathBBox(e);return f.isPointInsideBBox(c,r,a)&&kt(e,[["M",r,a],["H",c.x2+10]],1)%2==1},f._removedFactory=function(e){return function(){d("raphael.log",null,"Rapha├лl: you are calling to method тАЬ"+e+"тАЭ of removed object",e)}};var Ke=f.pathBBox=function(e){var r=Ue(e);if(r.bbox)return qe(r.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var a,c=0,g=0,w=[],A=[],S=0,E=(e=St(e)).length;S<E;S++)if((a=e[S])[0]=="M")c=a[1],g=a[2],w.push(c),A.push(g);else{var F=Mt(c,g,a[1],a[2],a[3],a[4],a[5],a[6]);w=w[j](F.min.x,F.max.x),A=A[j](F.min.y,F.max.y),c=a[5],g=a[6]}var J=X[U](0,w),oe=X[U](0,A),Z=Se[U](0,w),Y=Se[U](0,A),ne=Z-J,ae=Y-oe,re={x:J,y:oe,x2:Z,y2:Y,width:ne,height:ae,cx:J+ne/2,cy:oe+ae/2};return r.bbox=qe(re),re},He=function(e){var r=qe(e);return r.toString=f._path2string,r},Zt=f._pathToRelative=function(e){var r=Ue(e);if(r.rel)return He(r.rel);f.is(e,o)&&f.is(e&&e[0],o)||(e=f.parsePathString(e));var a=[],c=0,g=0,w=0,A=0,S=0;e[0][0]=="M"&&(w=c=e[0][1],A=g=e[0][2],S++,a.push(["M",c,g]));for(var E=S,F=e.length;E<F;E++){var J=a[E]=[],oe=e[E];if(oe[0]!=be.call(oe[0]))switch(J[0]=be.call(oe[0]),J[0]){case"a":J[1]=oe[1],J[2]=oe[2],J[3]=oe[3],J[4]=oe[4],J[5]=oe[5],J[6]=+(oe[6]-c).toFixed(3),J[7]=+(oe[7]-g).toFixed(3);break;case"v":J[1]=+(oe[1]-g).toFixed(3);break;case"m":w=oe[1],A=oe[2];default:for(var Z=1,Y=oe.length;Z<Y;Z++)J[Z]=+(oe[Z]-(Z%2?c:g)).toFixed(3)}else{J=a[E]=[],oe[0]=="m"&&(w=oe[1]+c,A=oe[2]+g);for(var ne=0,ae=oe.length;ne<ae;ne++)a[E][ne]=oe[ne]}var re=a[E].length;switch(a[E][0]){case"z":c=w,g=A;break;case"h":c+=+a[E][re-1];break;case"v":g+=+a[E][re-1];break;default:c+=+a[E][re-2],g+=+a[E][re-1]}}return a.toString=f._path2string,r.rel=He(a),a},dt=f._pathToAbsolute=function(e){var r=Ue(e);if(r.abs)return He(r.abs);if(f.is(e,o)&&f.is(e&&e[0],o)||(e=f.parsePathString(e)),!e||!e.length)return[["M",0,0]];var a=[],c=0,g=0,w=0,A=0,S=0;e[0][0]=="M"&&(w=c=+e[0][1],A=g=+e[0][2],S++,a[0]=["M",c,g]);for(var E,F,J=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z",oe=S,Z=e.length;oe<Z;oe++){if(a.push(E=[]),(F=e[oe])[0]!=b.call(F[0]))switch(E[0]=b.call(F[0]),E[0]){case"A":E[1]=F[1],E[2]=F[2],E[3]=F[3],E[4]=F[4],E[5]=F[5],E[6]=+(F[6]+c),E[7]=+(F[7]+g);break;case"V":E[1]=+F[1]+g;break;case"H":E[1]=+F[1]+c;break;case"R":for(var Y=[c,g][j](F.slice(1)),ne=2,ae=Y.length;ne<ae;ne++)Y[ne]=+Y[ne]+c,Y[++ne]=+Y[ne]+g;a.pop(),a=a[j](ct(Y,J));break;case"M":w=+F[1]+c,A=+F[2]+g;default:for(ne=1,ae=F.length;ne<ae;ne++)E[ne]=+F[ne]+(ne%2?c:g)}else if(F[0]=="R")Y=[c,g][j](F.slice(1)),a.pop(),a=a[j](ct(Y,J)),E=["R"][j](F.slice(-2));else for(var re=0,Q=F.length;re<Q;re++)E[re]=F[re];switch(E[0]){case"Z":c=w,g=A;break;case"H":c=E[1];break;case"V":g=E[1];break;case"M":w=E[E.length-2],A=E[E.length-1];default:c=E[E.length-2],g=E[E.length-1]}}return a.toString=f._path2string,r.abs=He(a),a},ft=function(e,r,a,c){return[e,r,a,c,a,c]},Ze=function(e,r,a,c,g,w){return[1/3*e+2/3*a,1/3*r+2/3*c,1/3*g+2/3*a,1/3*w+2/3*c,g,w]},Tt=function(e,r,a,c,g,w,A,S,E,F){var J,oe=120*ee/180,Z=ee/180*(+g||0),Y=[],ne=ze(function(v1,y1,zt){return{x:v1*pe.cos(zt)-y1*pe.sin(zt),y:v1*pe.sin(zt)+y1*pe.cos(zt)}});if(F)Pe=F[0],Re=F[1],ce=F[2],Ee=F[3];else{e=(J=ne(e,r,-Z)).x,r=J.y,S=(J=ne(S,E,-Z)).x,E=J.y;var ae=(e-S)/2,re=(r-E)/2,Q=ae*ae/(a*a)+re*re/(c*c);Q>1&&(a*=Q=pe.sqrt(Q),c*=Q);var xe=a*a,le=c*c,fe=(w==A?-1:1)*pe.sqrt(Ce((xe*le-xe*re*re-le*ae*ae)/(xe*re*re+le*ae*ae))),ce=fe*a*re/c+(e+S)/2,Ee=fe*-c*ae/a+(r+E)/2,Pe=pe.asin(((r-Ee)/c).toFixed(9)),Re=pe.asin(((E-Ee)/c).toFixed(9));(Pe=e<ce?ee-Pe:Pe)<0&&(Pe=2*ee+Pe),(Re=S<ce?ee-Re:Re)<0&&(Re=2*ee+Re),A&&Pe>Re&&(Pe-=2*ee),!A&&Re>Pe&&(Re-=2*ee)}var mt=Re-Pe;if(Ce(mt)>oe){var Et=Re,Ve=S,We=E;Re=Pe+oe*(A&&Re>Pe?1:-1),S=ce+a*pe.cos(Re),E=Ee+c*pe.sin(Re),Y=Tt(S,E,a,c,g,0,A,Ve,We,[Re,Et,ce,Ee])}mt=Re-Pe;var gt=pe.cos(Pe),vt=pe.sin(Pe),Dt=pe.cos(Re),Ye=pe.sin(Re),st=pe.tan(mt/4),qt=4/3*a*st,d1=4/3*c*st,f1=[e,r],yt=[e+qt*vt,r-d1*gt],p1=[S+qt*Ye,E-d1*Dt],m1=[S,E];if(yt[0]=2*f1[0]-yt[0],yt[1]=2*f1[1]-yt[1],F)return[yt,p1,m1][j](Y);for(var g1=[],tt=0,$1=(Y=[yt,p1,m1][j](Y).join()[T](",")).length;tt<$1;tt++)g1[tt]=tt%2?ne(Y[tt-1],Y[tt],Z).y:ne(Y[tt],Y[tt+1],Z).x;return g1},nt=function(e,r,a,c,g,w,A,S,E){var F=1-E;return{x:_e(F,3)*e+3*_e(F,2)*E*a+3*F*E*E*g+_e(E,3)*A,y:_e(F,3)*r+3*_e(F,2)*E*c+3*F*E*E*w+_e(E,3)*S}},Mt=ze(function(e,r,a,c,g,w,A,S){var E,F=g-2*a+e-(A-2*g+a),J=2*(a-e)-2*(g-a),oe=e-a,Z=(-J+pe.sqrt(J*J-4*F*oe))/2/F,Y=(-J-pe.sqrt(J*J-4*F*oe))/2/F,ne=[r,S],ae=[e,A];return Ce(Z)>"1e12"&&(Z=.5),Ce(Y)>"1e12"&&(Y=.5),Z>0&&Z<1&&(E=nt(e,r,a,c,g,w,A,S,Z),ae.push(E.x),ne.push(E.y)),Y>0&&Y<1&&(E=nt(e,r,a,c,g,w,A,S,Y),ae.push(E.x),ne.push(E.y)),F=w-2*c+r-(S-2*w+c),oe=r-c,Z=(-(J=2*(c-r)-2*(w-c))+pe.sqrt(J*J-4*F*oe))/2/F,Y=(-J-pe.sqrt(J*J-4*F*oe))/2/F,Ce(Z)>"1e12"&&(Z=.5),Ce(Y)>"1e12"&&(Y=.5),Z>0&&Z<1&&(E=nt(e,r,a,c,g,w,A,S,Z),ae.push(E.x),ne.push(E.y)),Y>0&&Y<1&&(E=nt(e,r,a,c,g,w,A,S,Y),ae.push(E.x),ne.push(E.y)),{min:{x:X[U](0,ae),y:X[U](0,ne)},max:{x:Se[U](0,ae),y:Se[U](0,ne)}}}),St=f._path2curve=ze(function(e,r){var a=!r&&Ue(e);if(!r&&a.curve)return He(a.curve);for(var c=dt(e),g=r&&dt(r),w={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},A={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},S=function(fe,ce,Ee){var Pe,Re;if(!fe)return["C",ce.x,ce.y,ce.x,ce.y,ce.x,ce.y];switch(!(fe[0]in{T:1,Q:1})&&(ce.qx=ce.qy=null),fe[0]){case"M":ce.X=fe[1],ce.Y=fe[2];break;case"A":fe=["C"][j](Tt[U](0,[ce.x,ce.y][j](fe.slice(1))));break;case"S":Ee=="C"||Ee=="S"?(Pe=2*ce.x-ce.bx,Re=2*ce.y-ce.by):(Pe=ce.x,Re=ce.y),fe=["C",Pe,Re][j](fe.slice(1));break;case"T":Ee=="Q"||Ee=="T"?(ce.qx=2*ce.x-ce.qx,ce.qy=2*ce.y-ce.qy):(ce.qx=ce.x,ce.qy=ce.y),fe=["C"][j](Ze(ce.x,ce.y,ce.qx,ce.qy,fe[1],fe[2]));break;case"Q":ce.qx=fe[1],ce.qy=fe[2],fe=["C"][j](Ze(ce.x,ce.y,fe[1],fe[2],fe[3],fe[4]));break;case"L":fe=["C"][j](ft(ce.x,ce.y,fe[1],fe[2]));break;case"H":fe=["C"][j](ft(ce.x,ce.y,fe[1],ce.y));break;case"V":fe=["C"][j](ft(ce.x,ce.y,ce.x,fe[1]));break;case"Z":fe=["C"][j](ft(ce.x,ce.y,ce.X,ce.Y))}return fe},E=function(fe,ce){if(fe[ce].length>7){fe[ce].shift();for(var Ee=fe[ce];Ee.length;)J[ce]="A",g&&(oe[ce]="A"),fe.splice(ce++,0,["C"][j](Ee.splice(0,6)));fe.splice(ce,1),ae=Se(c.length,g&&g.length||0)}},F=function(fe,ce,Ee,Pe,Re){fe&&ce&&fe[Re][0]=="M"&&ce[Re][0]!="M"&&(ce.splice(Re,0,["M",Pe.x,Pe.y]),Ee.bx=0,Ee.by=0,Ee.x=fe[Re][1],Ee.y=fe[Re][2],ae=Se(c.length,g&&g.length||0))},J=[],oe=[],Z="",Y="",ne=0,ae=Se(c.length,g&&g.length||0);ne<ae;ne++){c[ne]&&(Z=c[ne][0]),Z!="C"&&(J[ne]=Z,ne&&(Y=J[ne-1])),c[ne]=S(c[ne],w,Y),J[ne]!="A"&&Z=="C"&&(J[ne]="C"),E(c,ne),g&&(g[ne]&&(Z=g[ne][0]),Z!="C"&&(oe[ne]=Z,ne&&(Y=oe[ne-1])),g[ne]=S(g[ne],A,Y),oe[ne]!="A"&&Z=="C"&&(oe[ne]="C"),E(g,ne)),F(c,g,w,A,ne),F(g,c,A,w,ne);var re=c[ne],Q=g&&g[ne],xe=re.length,le=g&&Q.length;w.x=re[xe-2],w.y=re[xe-1],w.bx=p(re[xe-4])||w.x,w.by=p(re[xe-3])||w.y,A.bx=g&&(p(Q[le-4])||A.x),A.by=g&&(p(Q[le-3])||A.y),A.x=g&&Q[le-2],A.y=g&&Q[le-1]}return g||(a.curve=He(c)),g?[c,g]:c},null,He),It=(f._parseDots=ze(function(e){for(var r=[],a=0,c=e.length;a<c;a++){var g={},w=e[a].match(/^([^:]*):?([\d\.]*)/);if(g.color=f.getRGB(w[1]),g.color.error)return null;g.opacity=g.color.opacity,g.color=g.color.hex,w[2]&&(g.offset=w[2]+"%"),r.push(g)}for(a=1,c=r.length-1;a<c;a++)if(!r[a].offset){for(var A=p(r[a-1].offset||0),S=0,E=a+1;E<c;E++)if(r[E].offset){S=r[E].offset;break}S||(S=100,E=c);for(var F=((S=p(S))-A)/(E-a+1);a<E;a++)A+=F,r[a].offset=A+"%"}return r}),f._tear=function(e,r){e==r.top&&(r.top=e.prev),e==r.bottom&&(r.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),I1=(f._tofront=function(e,r){r.top!==e&&(It(e,r),e.next=null,e.prev=r.top,r.top.next=e,r.top=e)},f._toback=function(e,r){r.bottom!==e&&(It(e,r),e.next=r.bottom,e.prev=null,r.bottom.prev=e,r.bottom=e)},f._insertafter=function(e,r,a){It(e,a),r==a.top&&(a.top=e),r.next&&(r.next.prev=e),e.next=r.next,e.prev=r,r.next=e},f._insertbefore=function(e,r,a){It(e,a),r==a.bottom&&(a.bottom=e),r.prev&&(r.prev.next=e),e.prev=r.prev,r.prev=e,e.next=r},f.toMatrix=function(e,r){var a=Ke(e),c={_:{transform:he},getBBox:function(){return a}};return e1(c,r),c.matrix}),e1=(f.transformPath=function(e,r){return Me(e,I1(e,r))},f._extractTransform=function(e,r){if(r==null)return e._.transform;r=$(r).replace(/\.{3}|\u2026/g,e._.transform||he);var a,c,g=f.parseTransformString(r),w=0,A=1,S=1,E=e._,F=new rt;if(E.transform=g||[],g)for(var J=0,oe=g.length;J<oe;J++){var Z,Y,ne,ae,re,Q=g[J],xe=Q.length,le=$(Q[0]).toLowerCase(),fe=Q[0]!=le,ce=fe?F.invert():0;le=="t"&&xe==3?fe?(Z=ce.x(0,0),Y=ce.y(0,0),ne=ce.x(Q[1],Q[2]),ae=ce.y(Q[1],Q[2]),F.translate(ne-Z,ae-Y)):F.translate(Q[1],Q[2]):le=="r"?xe==2?(re=re||e.getBBox(1),F.rotate(Q[1],re.x+re.width/2,re.y+re.height/2),w+=Q[1]):xe==4&&(fe?(ne=ce.x(Q[2],Q[3]),ae=ce.y(Q[2],Q[3]),F.rotate(Q[1],ne,ae)):F.rotate(Q[1],Q[2],Q[3]),w+=Q[1]):le=="s"?xe==2||xe==3?(re=re||e.getBBox(1),F.scale(Q[1],Q[xe-1],re.x+re.width/2,re.y+re.height/2),A*=Q[1],S*=Q[xe-1]):xe==5&&(fe?(ne=ce.x(Q[3],Q[4]),ae=ce.y(Q[3],Q[4]),F.scale(Q[1],Q[2],ne,ae)):F.scale(Q[1],Q[2],Q[3],Q[4]),A*=Q[1],S*=Q[2]):le=="m"&&xe==7&&F.add(Q[1],Q[2],Q[3],Q[4],Q[5],Q[6]),E.dirtyT=1,e.matrix=F}e.matrix=F,E.sx=A,E.sy=S,E.deg=w,E.dx=a=F.e,E.dy=c=F.f,A==1&&S==1&&!w&&E.bbox?(E.bbox.x+=+a,E.bbox.y+=+c):E.dirtyT=1}),t1=function(e){var r=e[0];switch(r.toLowerCase()){case"t":return[r,0,0];case"m":return[r,1,0,0,1,0,0];case"r":return e.length==4?[r,0,e[2],e[3]]:[r,0];case"s":return e.length==5?[r,1,1,e[3],e[4]]:e.length==3?[r,1,1]:[r,1]}},D1=f._equaliseTransform=function(e,r){r=$(r).replace(/\.{3}|\u2026/g,e),e=f.parseTransformString(e)||[],r=f.parseTransformString(r)||[];for(var a,c,g,w,A=Se(e.length,r.length),S=[],E=[],F=0;F<A;F++){if(g=e[F]||t1(r[F]),w=r[F]||t1(g),g[0]!=w[0]||g[0].toLowerCase()=="r"&&(g[2]!=w[2]||g[3]!=w[3])||g[0].toLowerCase()=="s"&&(g[3]!=w[3]||g[4]!=w[4]))return;for(S[F]=[],E[F]=[],a=0,c=Se(g.length,w.length);a<c;a++)a in g&&(S[F][a]=g[a]),a in w&&(E[F][a]=w[a])}return{from:S,to:E}};function rt(e,r,a,c,g,w){e!=null?(this.a=+e,this.b=+r,this.c=+a,this.d=+c,this.e=+g,this.f=+w):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}f._getContainer=function(e,r,a,c){var g;if((g=c!=null||f.is(e,"object")?e:O.doc.getElementById(e))!=null)return g.tagName?r==null?{container:g,width:g.style.pixelWidth||g.offsetWidth,height:g.style.pixelHeight||g.offsetHeight}:{container:g,width:r,height:a}:{container:1,x:e,y:r,width:a,height:c}},f.pathToRelative=Zt,f._engine={},f.path2curve=St,f.matrix=function(e,r,a,c,g,w){return new rt(e,r,a,c,g,w)},function(e){function r(c){return c[0]*c[0]+c[1]*c[1]}function a(c){var g=pe.sqrt(r(c));c[0]&&(c[0]/=g),c[1]&&(c[1]/=g)}e.add=function(c,g,w,A,S,E){var F,J,oe,Z,Y=[[],[],[]],ne=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],ae=[[c,w,S],[g,A,E],[0,0,1]];for(c&&c instanceof rt&&(ae=[[c.a,c.c,c.e],[c.b,c.d,c.f],[0,0,1]]),F=0;F<3;F++)for(J=0;J<3;J++){for(Z=0,oe=0;oe<3;oe++)Z+=ne[F][oe]*ae[oe][J];Y[F][J]=Z}this.a=Y[0][0],this.b=Y[1][0],this.c=Y[0][1],this.d=Y[1][1],this.e=Y[0][2],this.f=Y[1][2]},e.invert=function(){var c=this,g=c.a*c.d-c.b*c.c;return new rt(c.d/g,-c.b/g,-c.c/g,c.a/g,(c.c*c.f-c.d*c.e)/g,(c.b*c.e-c.a*c.f)/g)},e.clone=function(){return new rt(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(c,g){this.add(1,0,0,1,c,g)},e.scale=function(c,g,w,A){g==null&&(g=c),(w||A)&&this.add(1,0,0,1,w,A),this.add(c,0,0,g,0,0),(w||A)&&this.add(1,0,0,1,-w,-A)},e.rotate=function(c,g,w){c=f.rad(c),g=g||0,w=w||0;var A=+pe.cos(c).toFixed(9),S=+pe.sin(c).toFixed(9);this.add(A,S,-S,A,g,w),this.add(1,0,0,1,-g,-w)},e.x=function(c,g){return c*this.a+g*this.c+this.e},e.y=function(c,g){return c*this.b+g*this.d+this.f},e.get=function(c){return+this[$.fromCharCode(97+c)].toFixed(4)},e.toString=function(){return f.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var c={};c.dx=this.e,c.dy=this.f;var g=[[this.a,this.c],[this.b,this.d]];c.scalex=pe.sqrt(r(g[0])),a(g[0]),c.shear=g[0][0]*g[1][0]+g[0][1]*g[1][1],g[1]=[g[1][0]-g[0][0]*c.shear,g[1][1]-g[0][1]*c.shear],c.scaley=pe.sqrt(r(g[1])),a(g[1]),c.shear/=c.scaley;var w=-g[0][1],A=g[1][1];return A<0?(c.rotate=f.deg(pe.acos(A)),w<0&&(c.rotate=360-c.rotate)):c.rotate=f.deg(pe.asin(w)),c.isSimple=!(+c.shear.toFixed(9)||c.scalex.toFixed(9)!=c.scaley.toFixed(9)&&c.rotate),c.isSuperSimple=!+c.shear.toFixed(9)&&c.scalex.toFixed(9)==c.scaley.toFixed(9)&&!c.rotate,c.noRotation=!+c.shear.toFixed(9)&&!c.rotate,c},e.toTransformString=function(c){var g=c||this[T]();return g.isSimple?(g.scalex=+g.scalex.toFixed(4),g.scaley=+g.scaley.toFixed(4),g.rotate=+g.rotate.toFixed(4),(g.dx||g.dy?"t"+[g.dx,g.dy]:he)+(g.scalex!=1||g.scaley!=1?"s"+[g.scalex,g.scaley,0,0]:he)+(g.rotate?"r"+[g.rotate,0,0]:he)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(rt.prototype);for(var q1=function(){this.returnValue=!1},z1=function(){return this.originalEvent.preventDefault()},F1=function(){this.cancelBubble=!0},O1=function(){return this.originalEvent.stopPropagation()},n1=function(e){var r=O.doc.documentElement.scrollTop||O.doc.body.scrollTop,a=O.doc.documentElement.scrollLeft||O.doc.body.scrollLeft;return{x:e.clientX+a,y:e.clientY+r}},H1=O.doc.addEventListener?function(e,r,a,c){var g=function(A){var S=n1(A);return a.call(c,A,S.x,S.y)};if(e.addEventListener(r,g,!1),se&&ye[r]){var w=function(A){for(var S=n1(A),E=A,F=0,J=A.targetTouches&&A.targetTouches.length;F<J;F++)if(A.targetTouches[F].target==e){(A=A.targetTouches[F]).originalEvent=E,A.preventDefault=z1,A.stopPropagation=O1;break}return a.call(c,A,S.x,S.y)};e.addEventListener(ye[r],w,!1)}return function(){return e.removeEventListener(r,g,!1),se&&ye[r]&&e.removeEventListener(ye[r],w,!1),!0}}:O.doc.attachEvent?function(e,r,a,c){var g=function(w){w=w||O.win.event;var A=O.doc.documentElement.scrollTop||O.doc.body.scrollTop,S=O.doc.documentElement.scrollLeft||O.doc.body.scrollLeft,E=w.clientX+S,F=w.clientY+A;return w.preventDefault=w.preventDefault||q1,w.stopPropagation=w.stopPropagation||F1,a.call(c,w,E,F)};return e.attachEvent("on"+r,g),function(){return e.detachEvent("on"+r,g),!0}}:void 0,et=[],Vt=function(e){for(var r,a=e.clientX,c=e.clientY,g=O.doc.documentElement.scrollTop||O.doc.body.scrollTop,w=O.doc.documentElement.scrollLeft||O.doc.body.scrollLeft,A=et.length;A--;){if(r=et[A],se&&e.touches){for(var S,E=e.touches.length;E--;)if((S=e.touches[E]).identifier==r.el._drag.id){a=S.clientX,c=S.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var F,J=r.el.node,oe=J.nextSibling,Z=J.parentNode,Y=J.style.display;O.win.opera&&Z.removeChild(J),J.style.display="none",F=r.el.paper.getElementByPoint(a,c),J.style.display=Y,O.win.opera&&(oe?Z.insertBefore(J,oe):Z.appendChild(J)),F&&d("raphael.drag.over."+r.el.id,r.el,F),a+=w,c+=g,d("raphael.drag.move."+r.el.id,r.move_scope||r.el,a-r.el._drag.x,c-r.el._drag.y,a,c,e)}},$t=function(e){f.unmousemove(Vt).unmouseup($t);for(var r,a=et.length;a--;)(r=et[a]).el._drag={},d("raphael.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,e);et=[]},Ie=f.el={},r1=me.length;r1--;)(function(e){f[e]=Ie[e]=function(r,a){return f.is(r,"function")&&(this.events=this.events||[],this.events.push({name:e,f:r,unbind:H1(this.shape||this.node||O.doc,e,r,a||this)})),this},f["un"+e]=Ie["un"+e]=function(r){for(var a=this.events||[],c=a.length;c--;)a[c].name!=e||!f.is(r,"undefined")&&a[c].f!=r||(a[c].unbind(),a.splice(c,1),!a.length&&delete this.events);return this}})(me[r1]);Ie.data=function(e,r){var a=we[this.id]=we[this.id]||{};if(arguments.length==0)return a;if(arguments.length==1){if(f.is(e,"object")){for(var c in e)e[D](c)&&this.data(c,e[c]);return this}return d("raphael.data.get."+this.id,this,a[e],e),a[e]}return a[e]=r,d("raphael.data.set."+this.id,this,r,e),this},Ie.removeData=function(e){return e==null?delete we[this.id]:we[this.id]&&delete we[this.id][e],this},Ie.getData=function(){return qe(we[this.id]||{})},Ie.hover=function(e,r,a,c){return this.mouseover(e,a).mouseout(r,c||a)},Ie.unhover=function(e,r){return this.unmouseover(e).unmouseout(r)};var pt=[];Ie.drag=function(e,r,a,c,g,w){function A(S){(S.originalEvent||S).preventDefault();var E=S.clientX,F=S.clientY,J=O.doc.documentElement.scrollTop||O.doc.body.scrollTop,oe=O.doc.documentElement.scrollLeft||O.doc.body.scrollLeft;if(this._drag.id=S.identifier,se&&S.touches){for(var Z,Y=S.touches.length;Y--;)if(Z=S.touches[Y],this._drag.id=Z.identifier,Z.identifier==this._drag.id){E=Z.clientX,F=Z.clientY;break}}this._drag.x=E+oe,this._drag.y=F+J,!et.length&&f.mousemove(Vt).mouseup($t),et.push({el:this,move_scope:c,start_scope:g,end_scope:w}),r&&d.on("raphael.drag.start."+this.id,r),e&&d.on("raphael.drag.move."+this.id,e),a&&d.on("raphael.drag.end."+this.id,a),d("raphael.drag.start."+this.id,g||c||this,this._drag.x,this._drag.y,S)}return this._drag={},pt.push({el:this,start:A}),this.mousedown(A),this},Ie.onDragOver=function(e){e?d.on("raphael.drag.over."+this.id,e):d.unbind("raphael.drag.over."+this.id)},Ie.undrag=function(){for(var e=pt.length;e--;)pt[e].el==this&&(this.unmousedown(pt[e].start),pt.splice(e,1),d.unbind("raphael.drag.*."+this.id));!pt.length&&f.unmousemove(Vt).unmouseup($t),et=[]},N.circle=function(e,r,a){var c=f._engine.circle(this,e||0,r||0,a||0);return this.__set__&&this.__set__.push(c),c},N.rect=function(e,r,a,c,g){var w=f._engine.rect(this,e||0,r||0,a||0,c||0,g||0);return this.__set__&&this.__set__.push(w),w},N.ellipse=function(e,r,a,c){var g=f._engine.ellipse(this,e||0,r||0,a||0,c||0);return this.__set__&&this.__set__.push(g),g},N.path=function(e){e&&!f.is(e,"string")&&!f.is(e[0],o)&&(e+=he);var r=f._engine.path(f.format[U](f,arguments),this);return this.__set__&&this.__set__.push(r),r},N.image=function(e,r,a,c,g){var w=f._engine.image(this,e||"about:blank",r||0,a||0,c||0,g||0);return this.__set__&&this.__set__.push(w),w},N.text=function(e,r,a){var c=f._engine.text(this,e||0,r||0,$(a));return this.__set__&&this.__set__.push(c),c},N.set=function(e){!f.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var r=new Pt(e);return this.__set__&&this.__set__.push(r),r.paper=this,r.type="set",r},N.setStart=function(e){this.__set__=e||this.set()},N.setFinish=function(e){var r=this.__set__;return delete this.__set__,r},N.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},N.setSize=function(e,r){return f._engine.setSize.call(this,e,r)},N.setViewBox=function(e,r,a,c,g){return f._engine.setViewBox.call(this,e,r,a,c,g)},N.top=N.bottom=null,N.raphael=f;function i1(){return this.x+ue+this.y+ue+this.width+" ├Ч "+this.height}N.getElementByPoint=function(e,r){var a,c,g,w,A,S,E,F=this.canvas,J=O.doc.elementFromPoint(e,r);if(O.win.opera&&J.tagName=="svg"){var oe=(c=(a=F).getBoundingClientRect(),g=a.ownerDocument,w=g.body,A=g.documentElement,S=A.clientTop||w.clientTop||0,E=A.clientLeft||w.clientLeft||0,{y:c.top+(O.win.pageYOffset||A.scrollTop||w.scrollTop)-S,x:c.left+(O.win.pageXOffset||A.scrollLeft||w.scrollLeft)-E}),Z=F.createSVGRect();Z.x=e-oe.x,Z.y=r-oe.y,Z.width=Z.height=1;var Y=F.getIntersectionList(Z,null);Y.length&&(J=Y[Y.length-1])}if(!J)return null;for(;J.parentNode&&J!=F.parentNode&&!J.raphael;)J=J.parentNode;return J==this.canvas.parentNode&&(J=F),J=J&&J.raphael?this.getById(J.raphaelid):null},N.getElementsByBBox=function(e){var r=this.set();return this.forEach(function(a){f.isBBoxIntersect(a.getBBox(),e)&&r.push(a)}),r},N.getById=function(e){for(var r=this.bottom;r;){if(r.id==e)return r;r=r.next}return null},N.forEach=function(e,r){for(var a=this.bottom;a;){if(e.call(r,a)===!1)return this;a=a.next}return this},N.getElementsByPoint=function(e,r){var a=this.set();return this.forEach(function(c){c.isPointInside(e,r)&&a.push(c)}),a},Ie.isPointInside=function(e,r){var a=this.realPath=Ne[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(a=f.transformPath(a,this.attr("transform"))),f.isPointInsidePath(a,e,r)},Ie.getBBox=function(e){if(this.removed)return{};var r=this._;return e?(!r.dirty&&r.bboxwt||(this.realPath=Ne[this.type](this),r.bboxwt=Ke(this.realPath),r.bboxwt.toString=i1,r.dirty=0),r.bboxwt):((r.dirty||r.dirtyT||!r.bbox)&&(!r.dirty&&this.realPath||(r.bboxwt=0,this.realPath=Ne[this.type](this)),r.bbox=Ke(Me(this.realPath,this.matrix)),r.bbox.toString=i1,r.dirty=r.dirtyT=0),r.bbox)},Ie.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Ie.glow=function(e){if(this.type=="text")return null;var r={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity==null?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},a=r.width/2,c=this.paper,g=c.set(),w=this.realPath||Ne[this.type](this);w=this.matrix?Me(w,this.matrix):w;for(var A=1;A<a+1;A++)g.push(c.path(w).attr({stroke:r.color,fill:r.fill?r.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(r.width/a*A).toFixed(3),opacity:+(r.opacity/a).toFixed(3)}));return g.insertBefore(this).translate(r.offsetx,r.offsety)};var jt=function(e,r,a,c,g,w,A,S,E){return E==null?Ge(e,r,a,c,g,w,A,S):f.findDotsAtSegment(e,r,a,c,g,w,A,S,function(F,J,oe,Z,Y,ne,ae,re,Q){if(!(Q<0||Ge(F,J,oe,Z,Y,ne,ae,re)<Q)){var xe,le=.5,fe=1-le;for(xe=Ge(F,J,oe,Z,Y,ne,ae,re,fe);Ce(xe-Q)>.01;)xe=Ge(F,J,oe,Z,Y,ne,ae,re,fe+=(xe<Q?1:-1)*(le/=2));return fe}}(e,r,a,c,g,w,A,S,E))},Ut=function(e,r){return function(a,c,g){for(var w,A,S,E,F,J="",oe={},Z=0,Y=0,ne=(a=St(a)).length;Y<ne;Y++){if((S=a[Y])[0]=="M")w=+S[1],A=+S[2];else{if(Z+(E=jt(w,A,S[1],S[2],S[3],S[4],S[5],S[6]))>c){if(r&&!oe.start){if(J+=["C"+(F=jt(w,A,S[1],S[2],S[3],S[4],S[5],S[6],c-Z)).start.x,F.start.y,F.m.x,F.m.y,F.x,F.y],g)return J;oe.start=J,J=["M"+F.x,F.y+"C"+F.n.x,F.n.y,F.end.x,F.end.y,S[5],S[6]].join(),Z+=E,w=+S[5],A=+S[6];continue}if(!e&&!r)return{x:(F=jt(w,A,S[1],S[2],S[3],S[4],S[5],S[6],c-Z)).x,y:F.y,alpha:F.alpha}}Z+=E,w=+S[5],A=+S[6]}J+=S.shift()+S}return oe.end=J,(F=e?Z:r?oe:f.findDotsAtSegment(w,A,S[0],S[1],S[2],S[3],S[4],S[5],1)).alpha&&(F={x:F.x,y:F.y,alpha:F.alpha}),F}},s1=Ut(1),o1=Ut(),Gt=Ut(0,1);f.getTotalLength=s1,f.getPointAtLength=o1,f.getSubpath=function(e,r,a){if(this.getTotalLength(e)-a<1e-6)return Gt(e,r).end;var c=Gt(e,a,1);return r?Gt(c,r).end:c},Ie.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():s1(e)},Ie.getPointAtLength=function(e){var r=this.getPath();if(r)return o1(r,e)},Ie.getPath=function(){var e,r=f._getPath[this.type];if(this.type!="text"&&this.type!="set")return r&&(e=r(this)),e},Ie.getSubpath=function(e,r){var a=this.getPath();if(a)return f.getSubpath(a,e,r)};var $e=f.easing_formulas={linear:function(e){return e},"<":function(e){return _e(e,1.7)},">":function(e){return _e(e,.48)},"<>":function(e){var r=.48-e/1.04,a=pe.sqrt(.1734+r*r),c=a-r,g=-a-r,w=_e(Ce(c),1/3)*(c<0?-1:1)+_e(Ce(g),1/3)*(g<0?-1:1)+.5;return 3*(1-w)*w*w+w*w*w},backIn:function(e){var r=1.70158;return e*e*((r+1)*e-r)},backOut:function(e){var r=1.70158;return(e-=1)*e*((r+1)*e+r)+1},elastic:function(e){return e==!!e?e:_e(2,-10*e)*pe.sin(2*ee*(e-.075)/.3)+1},bounce:function(e){var r=7.5625,a=2.75;return e<1/a?r*e*e:e<2/a?r*(e-=1.5/a)*e+.75:e<2.5/a?r*(e-=2.25/a)*e+.9375:r*(e-=2.625/a)*e+.984375}};$e.easeIn=$e["ease-in"]=$e["<"],$e.easeOut=$e["ease-out"]=$e[">"],$e.easeInOut=$e["ease-in-out"]=$e["<>"],$e["back-in"]=$e.backIn,$e["back-out"]=$e.backOut;var Te=[],a1=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},Wt=function(){for(var e=+new Date,r=0;r<Te.length;r++){var a=Te[r];if(!a.el.removed&&!a.paused){var c,g,w=e-a.start,A=a.ms,S=a.easing,E=a.from,F=a.diff,J=a.to,oe=(a.t,a.el),Z={},Y={};if(a.initstatus?(w=(a.initstatus*a.anim.top-a.prev)/(a.percent-a.prev)*A,a.status=a.initstatus,delete a.initstatus,a.stop&&Te.splice(r--,1)):a.status=(a.prev+(a.percent-a.prev)*(w/A))/a.anim.top,!(w<0))if(w<A){var ne=S(w/A);for(var ae in E)if(E[D](ae)){switch(R[ae]){case s:c=+E[ae]+ne*A*F[ae];break;case"colour":c="rgb("+[Xt(l(E[ae].r+ne*A*F[ae].r)),Xt(l(E[ae].g+ne*A*F[ae].g)),Xt(l(E[ae].b+ne*A*F[ae].b))].join(",")+")";break;case"path":c=[];for(var re=0,Q=E[ae].length;re<Q;re++){c[re]=[E[ae][re][0]];for(var xe=1,le=E[ae][re].length;xe<le;xe++)c[re][xe]=+E[ae][re][xe]+ne*A*F[ae][re][xe];c[re]=c[re].join(ue)}c=c.join(ue);break;case"transform":if(F[ae].real)for(c=[],re=0,Q=E[ae].length;re<Q;re++)for(c[re]=[E[ae][re][0]],xe=1,le=E[ae][re].length;xe<le;xe++)c[re][xe]=E[ae][re][xe]+ne*A*F[ae][re][xe];else{var fe=function(Ee){return+E[ae][Ee]+ne*A*F[ae][Ee]};c=[["m",fe(0),fe(1),fe(2),fe(3),fe(4),fe(5)]]}break;case"csv":if(ae=="clip-rect")for(c=[],re=4;re--;)c[re]=+E[ae][re]+ne*A*F[ae][re];break;default:var ce=[][j](E[ae]);for(c=[],re=oe.paper.customAttributes[ae].length;re--;)c[re]=+ce[re]+ne*A*F[ae][re]}Z[ae]=c}oe.attr(Z),function(Ee,Pe,Re){setTimeout(function(){d("raphael.anim.frame."+Ee,Pe,Re)})}(oe.id,oe,a.anim)}else{if(function(Ee,Pe,Re){setTimeout(function(){d("raphael.anim.frame."+Pe.id,Pe,Re),d("raphael.anim.finish."+Pe.id,Pe,Re),f.is(Ee,"function")&&Ee.call(Pe)})}(a.callback,oe,a.anim),oe.attr(J),Te.splice(r--,1),a.repeat>1&&!a.next){for(g in J)J[D](g)&&(Y[g]=a.totalOrigin[g]);a.el.attr(Y),At(a.anim,a.el,a.anim.percents[0],null,a.totalOrigin,a.repeat-1)}a.next&&!a.stop&&At(a.anim,a.el,a.next,null,a.totalOrigin,a.repeat)}}}Te.length&&a1(Wt)},Xt=function(e){return e>255?255:e<0?0:e};function V1(e,r,a,c,g,w){var A=3*r,S=3*(c-r)-A,E=1-A-S,F=3*a,J=3*(g-a)-F,oe=1-F-J;function Z(Y){return((E*Y+S)*Y+A)*Y}return function(Y,ne){var ae=function(re,Q){var xe,le,fe,ce,Ee,Pe;for(fe=re,Pe=0;Pe<8;Pe++){if(ce=Z(fe)-re,Ce(ce)<Q)return fe;if(Ce(Ee=(3*E*fe+2*S)*fe+A)<1e-6)break;fe-=ce/Ee}if(le=1,(fe=re)<(xe=0))return xe;if(fe>le)return le;for(;xe<le;){if(ce=Z(fe),Ce(ce-re)<Q)return fe;re>ce?xe=fe:le=fe,fe=(le-xe)/2+xe}return fe}(Y,ne);return((oe*ae+J)*ae+F)*ae}(e,1/(200*w))}function Xe(e,r){var a=[],c={};if(this.ms=r,this.times=1,e){for(var g in e)e[D](g)&&(c[p(g)]=e[g],a.push(p(g)));a.sort(ve)}this.anim=c,this.top=a[a.length-1],this.percents=a}function At(e,r,a,c,g,w){a=p(a);var A,S,E,F,J,oe,Z=e.ms,Y={},ne={},ae={};if(c)for(Q=0,xe=Te.length;Q<xe;Q++){var re=Te[Q];if(re.el.id==r.id&&re.anim==e){re.percent!=a?(Te.splice(Q,1),E=1):S=re,r.attr(re.totalOrigin);break}}else c=+ne;for(var Q=0,xe=e.percents.length;Q<xe;Q++){if(e.percents[Q]==a||e.percents[Q]>c*e.top){a=e.percents[Q],J=e.percents[Q-1]||0,Z=Z/e.top*(a-J),F=e.percents[Q+1],A=e.anim[a];break}c&&r.attr(e.anim[e.percents[Q]])}if(A){if(S)S.initstatus=c,S.start=new Date-S.ms*c;else{for(var le in A)if(A[D](le)&&(R[D](le)||r.paper.customAttributes[D](le)))switch(Y[le]=r.attr(le),Y[le]==null&&(Y[le]=L[le]),ne[le]=A[le],R[le]){case s:ae[le]=(ne[le]-Y[le])/Z;break;case"colour":Y[le]=f.getRGB(Y[le]);var fe=f.getRGB(ne[le]);ae[le]={r:(fe.r-Y[le].r)/Z,g:(fe.g-Y[le].g)/Z,b:(fe.b-Y[le].b)/Z};break;case"path":var ce=St(Y[le],ne[le]),Ee=ce[1];for(Y[le]=ce[0],ae[le]=[],Q=0,xe=Y[le].length;Q<xe;Q++){ae[le][Q]=[0];for(var Pe=1,Re=Y[le][Q].length;Pe<Re;Pe++)ae[le][Q][Pe]=(Ee[Q][Pe]-Y[le][Q][Pe])/Z}break;case"transform":var mt=r._,Et=D1(mt[le],ne[le]);if(Et)for(Y[le]=Et.from,ne[le]=Et.to,ae[le]=[],ae[le].real=!0,Q=0,xe=Y[le].length;Q<xe;Q++)for(ae[le][Q]=[Y[le][Q][0]],Pe=1,Re=Y[le][Q].length;Pe<Re;Pe++)ae[le][Q][Pe]=(ne[le][Q][Pe]-Y[le][Q][Pe])/Z;else{var Ve=r.matrix||new rt,We={_:{transform:mt.transform},getBBox:function(){return r.getBBox(1)}};Y[le]=[Ve.a,Ve.b,Ve.c,Ve.d,Ve.e,Ve.f],e1(We,ne[le]),ne[le]=We._.transform,ae[le]=[(We.matrix.a-Ve.a)/Z,(We.matrix.b-Ve.b)/Z,(We.matrix.c-Ve.c)/Z,(We.matrix.d-Ve.d)/Z,(We.matrix.e-Ve.e)/Z,(We.matrix.f-Ve.f)/Z]}break;case"csv":var gt=$(A[le])[T](H),vt=$(Y[le])[T](H);if(le=="clip-rect")for(Y[le]=vt,ae[le]=[],Q=vt.length;Q--;)ae[le][Q]=(gt[Q]-Y[le][Q])/Z;ne[le]=gt;break;default:for(gt=[][j](A[le]),vt=[][j](Y[le]),ae[le]=[],Q=r.paper.customAttributes[le].length;Q--;)ae[le][Q]=((gt[Q]||0)-(vt[Q]||0))/Z}var Dt=A.easing,Ye=f.easing_formulas[Dt];if(!Ye)if((Ye=$(Dt).match(i))&&Ye.length==5){var st=Ye;Ye=function(qt){return V1(qt,+st[1],+st[2],+st[3],+st[4],Z)}}else Ye=Ae;if(re={anim:e,percent:a,timestamp:oe=A.start||e.start||+new Date,start:oe+(e.del||0),status:0,initstatus:c||0,stop:!1,ms:Z,easing:Ye,from:Y,diff:ae,to:ne,el:r,callback:A.callback,prev:J,next:F,repeat:w||e.times,origin:r.attr(),totalOrigin:g},Te.push(re),c&&!S&&!E&&(re.stop=!0,re.start=new Date-Z*c,Te.length==1))return Wt();E&&(re.start=new Date-re.ms*c),Te.length==1&&a1(Wt)}d("raphael.anim.start."+r.id,r,e)}}function l1(e){for(var r=0;r<Te.length;r++)Te[r].el.paper==e&&Te.splice(r--,1)}Ie.animateWith=function(e,r,a,c,g,w){if(this.removed)return w&&w.call(this),this;var A=a instanceof Xe?a:f.animation(a,c,g,w);At(A,this,A.percents[0],null,this.attr());for(var S=0,E=Te.length;S<E;S++)if(Te[S].anim==r&&Te[S].el==e){Te[E-1].start=Te[S].start;break}return this},Ie.onAnimation=function(e){return e?d.on("raphael.anim.frame."+this.id,e):d.unbind("raphael.anim.frame."+this.id),this},Xe.prototype.delay=function(e){var r=new Xe(this.anim,this.ms);return r.times=this.times,r.del=+e||0,r},Xe.prototype.repeat=function(e){var r=new Xe(this.anim,this.ms);return r.del=this.del,r.times=pe.floor(Se(e,0))||1,r},f.animation=function(e,r,a,c){if(e instanceof Xe)return e;!f.is(a,"function")&&a||(c=c||a||null,a=null),e=Object(e),r=+r||0;var g,w,A={};for(w in e)e[D](w)&&p(w)!=w&&p(w)+"%"!=w&&(g=!0,A[w]=e[w]);if(g)return a&&(A.easing=a),c&&(A.callback=c),new Xe({100:A},r);if(c){var S=0;for(var E in e){var F=m(E);e[D](E)&&F>S&&(S=F)}!e[S+="%"].callback&&(e[S].callback=c)}return new Xe(e,r)},Ie.animate=function(e,r,a,c){if(this.removed)return c&&c.call(this),this;var g=e instanceof Xe?e:f.animation(e,r,a,c);return At(g,this,g.percents[0],null,this.attr()),this},Ie.setTime=function(e,r){return e&&r!=null&&this.status(e,X(r,e.ms)/e.ms),this},Ie.status=function(e,r){var a,c,g=[],w=0;if(r!=null)return At(e,this,-1,X(r,1)),this;for(a=Te.length;w<a;w++)if((c=Te[w]).el.id==this.id&&(!e||c.anim==e)){if(e)return c.status;g.push({anim:c.anim,status:c.status})}return e?0:g},Ie.pause=function(e){for(var r=0;r<Te.length;r++)Te[r].el.id!=this.id||e&&Te[r].anim!=e||d("raphael.anim.pause."+this.id,this,Te[r].anim)!==!1&&(Te[r].paused=!0);return this},Ie.resume=function(e){for(var r=0;r<Te.length;r++)if(Te[r].el.id==this.id&&(!e||Te[r].anim==e)){var a=Te[r];d("raphael.anim.resume."+this.id,this,a.anim)!==!1&&(delete a.paused,this.status(a.anim,a.status))}return this},Ie.stop=function(e){for(var r=0;r<Te.length;r++)Te[r].el.id!=this.id||e&&Te[r].anim!=e||d("raphael.anim.stop."+this.id,this,Te[r].anim)!==!1&&Te.splice(r--,1);return this},d.on("raphael.remove",l1),d.on("raphael.clear",l1),Ie.toString=function(){return"Rapha├лlтАЩs object"};var c1,u1,it,h1,Pt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var r=0,a=e.length;r<a;r++)!e[r]||e[r].constructor!=Ie.constructor&&e[r].constructor!=Pt||(this[this.items.length]=this.items[this.items.length]=e[r],this.length++)},Fe=Pt.prototype;for(var Yt in Fe.push=function(){for(var e,r,a=0,c=arguments.length;a<c;a++)!(e=arguments[a])||e.constructor!=Ie.constructor&&e.constructor!=Pt||(this[r=this.items.length]=this.items[r]=e,this.length++);return this},Fe.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Fe.forEach=function(e,r){for(var a=0,c=this.items.length;a<c;a++)if(e.call(r,this.items[a],a)===!1)return this;return this},Ie)Ie[D](Yt)&&(Fe[Yt]=function(e){return function(){var r=arguments;return this.forEach(function(a){a[e][U](a,r)})}}(Yt));return Fe.attr=function(e,r){if(e&&f.is(e,o)&&f.is(e[0],"object"))for(var a=0,c=e.length;a<c;a++)this.items[a].attr(e[a]);else for(var g=0,w=this.items.length;g<w;g++)this.items[g].attr(e,r);return this},Fe.clear=function(){for(;this.length;)this.pop()},Fe.splice=function(e,r,a){e=e<0?Se(this.length+e,0):e,r=Se(0,X(this.length-e,r));var c,g=[],w=[],A=[];for(c=2;c<arguments.length;c++)A.push(arguments[c]);for(c=0;c<r;c++)w.push(this[e+c]);for(;c<this.length-e;c++)g.push(this[e+c]);var S=A.length;for(c=0;c<S+g.length;c++)this.items[e+c]=this[e+c]=c<S?A[c]:g[c-S];for(c=this.items.length=this.length-=r-S;this[c];)delete this[c++];return new Pt(w)},Fe.exclude=function(e){for(var r=0,a=this.length;r<a;r++)if(this[r]==e)return this.splice(r,1),!0},Fe.animate=function(e,r,a,c){(f.is(a,"function")||!a)&&(c=a||null);var g,w,A=this.items.length,S=A,E=this;if(!A)return this;c&&(w=function(){!--A&&c.call(E)}),a=f.is(a,"string")?a:w;var F=f.animation(e,r,a,w);for(g=this.items[--S].animate(F);S--;)this.items[S]&&!this.items[S].removed&&this.items[S].animateWith(g,F,F),this.items[S]&&!this.items[S].removed||A--;return this},Fe.insertAfter=function(e){for(var r=this.items.length;r--;)this.items[r].insertAfter(e);return this},Fe.getBBox=function(){for(var e=[],r=[],a=[],c=[],g=this.items.length;g--;)if(!this.items[g].removed){var w=this.items[g].getBBox();e.push(w.x),r.push(w.y),a.push(w.x+w.width),c.push(w.y+w.height)}return{x:e=X[U](0,e),y:r=X[U](0,r),x2:a=Se[U](0,a),y2:c=Se[U](0,c),width:a-e,height:c-r}},Fe.clone=function(e){e=this.paper.set();for(var r=0,a=this.items.length;r<a;r++)e.push(this.items[r].clone());return e},Fe.toString=function(){return"Rapha├лlтАШs set"},Fe.glow=function(e){var r=this.paper.set();return this.forEach(function(a,c){var g=a.glow(e);g!=null&&g.forEach(function(w,A){r.push(w)})}),r},Fe.isPointInside=function(e,r){var a=!1;return this.forEach(function(c){if(c.isPointInside(e,r))return a=!0,!1}),a},f.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var r={w:e.w,face:{},glyphs:{}},a=e.face["font-family"];for(var c in e.face)e.face[D](c)&&(r.face[c]=e.face[c]);if(this.fonts[a]?this.fonts[a].push(r):this.fonts[a]=[r],!e.svg){for(var g in r.face["units-per-em"]=m(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[D](g)){var w=e.glyphs[g];if(r.glyphs[g]={w:w.w,k:{},d:w.d&&"M"+w.d.replace(/[mlcxtrv]/g,function(S){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[S]||"M"})+"z"},w.k)for(var A in w.k)w[D](A)&&(r.glyphs[g].k[A]=w.k[A])}}return e},N.getFont=function(e,r,a,c){if(c=c||"normal",a=a||"normal",r=+r||{normal:400,bold:700,lighter:300,bolder:800}[r]||400,f.fonts){var g,w=f.fonts[e];if(!w){var A=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,he)+"(\\s|$)","i");for(var S in f.fonts)if(f.fonts[D](S)&&A.test(S)){w=f.fonts[S];break}}if(w)for(var E=0,F=w.length;E<F&&((g=w[E]).face["font-weight"]!=r||g.face["font-style"]!=a&&g.face["font-style"]||g.face["font-stretch"]!=c);E++);return g}},N.print=function(e,r,a,c,g,w,A,S){w=w||"middle",A=Se(X(A||0,1),-1),S=Se(X(S||1,3),1);var E,F=$(a)[T](he),J=0,oe=0,Z=he;if(f.is(c,"string")&&(c=this.getFont(c)),c){E=(g||16)/c.face["units-per-em"];for(var Y=c.face.bbox[T](H),ne=+Y[0],ae=Y[3]-Y[1],re=0,Q=+Y[1]+(w=="baseline"?ae+ +c.face.descent:ae/2),xe=0,le=F.length;xe<le;xe++){if(F[xe]==`
`)J=0,ce=0,oe=0,re+=ae*S;else{var fe=oe&&c.glyphs[F[xe-1]]||{},ce=c.glyphs[F[xe]];J+=oe?(fe.w||c.w)+(fe.k&&fe.k[F[xe]]||0)+c.w*A:0,oe=1}ce&&ce.d&&(Z+=f.transformPath(ce.d,["t",J*E,re*E,"s",E,E,ne,Q,"t",(e-ne)/E,(r-Q)/E]))}}return this.path(Z).attr({fill:"#000",stroke:"none"})},N.add=function(e){if(f.is(e,"array"))for(var r,a=this.set(),c=0,g=e.length;c<g;c++)r=e[c]||{},B[D](r.type)&&a.push(this[r.type]().attr(r));return a},f.format=function(e,r){var a=f.is(r,o)?[0][j](r):arguments;return e&&f.is(e,"string")&&a.length-1&&(e=e.replace(q,function(c,g){return a[++g]==null?he:a[g]})),e||he},f.fullfill=(c1=/\{([^\}]+)\}/g,u1=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,r){return String(e).replace(c1,function(a,c){return function(g,w,A){var S=A;return w.replace(u1,function(E,F,J,oe,Z){F=F||oe,S&&(F in S&&(S=S[F]),typeof S=="function"&&Z&&(S=S()))}),S=(S==null||S==A?g:S)+""}(a,c,r)})}),f.ninja=function(){if(W.was)O.win.Raphael=W.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return f},f.st=Fe,d.on("raphael.DOMload",function(){C=!0}),(it=document).readyState==null&&it.addEventListener&&(it.addEventListener("DOMContentLoaded",h1=function(){it.removeEventListener("DOMContentLoaded",h1,!1),it.readyState="complete"},!1),it.readyState="loading"),function e(){/in/.test(it.readyState)?setTimeout(e,9):f.eve("raphael.DOMload")}(),f}.apply(P,I))===void 0||(k.exports=z)},function(k,P,v){var I,z;I=[v(0),v(3),v(4)],(z=function(d){return d}.apply(P,I))===void 0||(k.exports=z)},function(k,P,v){var I,z,d,f,C,N,H,B,q,D,O,W,te,U;f="hasOwnProperty",C=/[\.\/]/,N=/\s*,\s*/,H=function(j,se){return j-se},B={n:{}},q=function(){for(var j=0,se=this.length;j<se;j++)if(this[j]!==void 0)return this[j]},D=function(){for(var j=this.length;--j;)if(this[j]!==void 0)return this[j]},O=Object.prototype.toString,W=String,te=Array.isArray||function(j){return j instanceof Array||O.call(j)=="[object Array]"},(U=function(j,se){var he,ue=d,$=Array.prototype.slice.call(arguments,2),T=U.listeners(j),me=0,ye=[],be={},pe=[],Se=z;pe.firstDefined=q,pe.lastDefined=D,z=j,d=0;for(var X=0,Ce=T.length;X<Ce;X++)"zIndex"in T[X]&&(ye.push(T[X].zIndex),T[X].zIndex<0&&(be[T[X].zIndex]=T[X]));for(ye.sort(H);ye[me]<0;)if(he=be[ye[me++]],pe.push(he.apply(se,$)),d)return d=ue,pe;for(X=0;X<Ce;X++)if("zIndex"in(he=T[X]))if(he.zIndex==ye[me]){if(pe.push(he.apply(se,$)),d)break;do if((he=be[ye[++me]])&&pe.push(he.apply(se,$)),d)break;while(he)}else be[he.zIndex]=he;else if(pe.push(he.apply(se,$)),d)break;return d=ue,z=Se,pe})._events=B,U.listeners=function(j){var se,he,ue,$,T,me,ye,be,pe=te(j)?j:j.split(C),Se=B,X=[Se],Ce=[];for($=0,T=pe.length;$<T;$++){for(be=[],me=0,ye=X.length;me<ye;me++)for(he=[(Se=X[me].n)[pe[$]],Se["*"]],ue=2;ue--;)(se=he[ue])&&(be.push(se),Ce=Ce.concat(se.f||[]));X=be}return Ce},U.separator=function(j){j?(j="["+(j=W(j).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",C=new RegExp(j)):C=/[\.\/]/},U.on=function(j,se){if(typeof se!="function")return function(){};for(var he=te(j)?te(j[0])?j:[j]:W(j).split(N),ue=0,$=he.length;ue<$;ue++)(function(T){for(var me,ye=te(T)?T:W(T).split(C),be=B,pe=0,Se=ye.length;pe<Se;pe++)be=(be=be.n).hasOwnProperty(ye[pe])&&be[ye[pe]]||(be[ye[pe]]={n:{}});for(be.f=be.f||[],pe=0,Se=be.f.length;pe<Se;pe++)if(be.f[pe]==se){me=!0;break}!me&&be.f.push(se)})(he[ue]);return function(T){+T==+T&&(se.zIndex=+T)}},U.f=function(j){var se=[].slice.call(arguments,1);return function(){U.apply(null,[j,null].concat(se).concat([].slice.call(arguments,0)))}},U.stop=function(){d=1},U.nt=function(j){var se=te(z)?z.join("."):z;return j?new RegExp("(?:\\.|\\/|^)"+j+"(?:\\.|\\/|$)").test(se):se},U.nts=function(){return te(z)?z:z.split(C)},U.off=U.unbind=function(j,se){if(j){var he=te(j)?te(j[0])?j:[j]:W(j).split(N);if(he.length>1)for(var ue=0,$=he.length;ue<$;ue++)U.off(he[ue],se);else{he=te(j)?j:W(j).split(C);var T,me,ye,be,pe,Se=[B];for(ue=0,$=he.length;ue<$;ue++)for(be=0;be<Se.length;be+=ye.length-2){if(ye=[be,1],T=Se[be].n,he[ue]!="*")T[he[ue]]&&ye.push(T[he[ue]]);else for(me in T)T[f](me)&&ye.push(T[me]);Se.splice.apply(Se,ye)}for(ue=0,$=Se.length;ue<$;ue++)for(T=Se[ue];T.n;){if(se){if(T.f){for(be=0,pe=T.f.length;be<pe;be++)if(T.f[be]==se){T.f.splice(be,1);break}!T.f.length&&delete T.f}for(me in T.n)if(T.n[f](me)&&T.n[me].f){var X=T.n[me].f;for(be=0,pe=X.length;be<pe;be++)if(X[be]==se){X.splice(be,1);break}!X.length&&delete T.n[me].f}}else for(me in delete T.f,T.n)T.n[f](me)&&T.n[me].f&&delete T.n[me].f;T=T.n}}}else U._events=B={n:{}}},U.once=function(j,se){var he=function(){return U.off(j,he),se.apply(this,arguments)};return U.on(j,he)},U.version="0.5.0",U.toString=function(){return"You are running Eve 0.5.0"},k.exports?k.exports=U:(I=function(){return U}.apply(P,[]))===void 0||(k.exports=I)},function(k,P,v){var I,z;I=[v(0)],(z=function(d){if(!d||d.svg){var f="hasOwnProperty",C=String,N=parseFloat,H=parseInt,B=Math,q=B.max,D=B.abs,O=B.pow,W=/[, ]+/,te=d.eve,U="",j=" ",se="http://www.w3.org/1999/xlink",he={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},ue={};d.toString=function(){return`Your browser supports SVG.
You are running Rapha├лl `+this.version};var $=function(t,n){if(n)for(var i in typeof t=="string"&&(t=$(t)),n)n[f](i)&&(i.substring(0,6)=="xlink:"?t.setAttributeNS(se,i.substring(6),C(n[i])):t.setAttribute(i,C(n[i])));else(t=d._g.doc.createElementNS("http://www.w3.org/2000/svg",t)).style&&(t.style.webkitTapHighlightColor="rgba(0,0,0,0)");return t},T=function(t,n){var i="linear",l=t.id+n,p=.5,m=.5,b=t.node,L=t.paper,R=b.style,V=d._g.doc.getElementById(l);if(!V){if(n=(n=C(n).replace(d._radial_gradient,function(ve,Ae,ke){if(i="radial",Ae&&ke){p=N(Ae);var Le=2*((m=N(ke))>.5)-1;O(p-.5,2)+O(m-.5,2)>.25&&(m=B.sqrt(.25-O(p-.5,2))*Le+.5)&&m!=.5&&(m=m.toFixed(5)-1e-5*Le)}return U})).split(/\s*\-\s*/),i=="linear"){var G=n.shift();if(G=-N(G),isNaN(G))return null;var K=[0,0,B.cos(d.rad(G)),B.sin(d.rad(G))],ie=1/(q(D(K[2]),D(K[3]))||1);K[2]*=ie,K[3]*=ie,K[2]<0&&(K[0]=-K[2],K[2]=0),K[3]<0&&(K[1]=-K[3],K[3]=0)}var de=d._parseDots(n);if(!de)return null;if(l=l.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&l!=t.gradient.id&&(L.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){V=$(i+"Gradient",{id:l}),t.gradient=V,$(V,i=="radial"?{fx:p,fy:m}:{x1:K[0],y1:K[1],x2:K[2],y2:K[3],gradientTransform:t.matrix.invert()}),L.defs.appendChild(V);for(var ge=0,we=de.length;ge<we;ge++)V.appendChild($("stop",{offset:de[ge].offset?de[ge].offset:ge?"100%":"0%","stop-color":de[ge].color||"#fff","stop-opacity":isFinite(de[ge].opacity)?de[ge].opacity:1}))}}return $(b,{fill:me(l),opacity:1,"fill-opacity":1}),R.fill=U,R.opacity=1,R.fillOpacity=1,1},me=function(t){if((n=document.documentMode)&&(n===9||n===10))return"url('#"+t+"')";var n,i=document.location;return"url('"+(i.protocol+"//"+i.host+i.pathname+i.search)+"#"+t+"')"},ye=function(t){var n=t.getBBox(1);$(t.pattern,{patternTransform:t.matrix.invert()+" translate("+n.x+","+n.y+")"})},be=function(t,n,i){if(t.type=="path"){for(var l,p,m,b,L,R=C(n).toLowerCase().split("-"),V=t.paper,G=i?"end":"start",K=t.node,ie=t.attrs,de=ie["stroke-width"],ge=R.length,we="classic",ve=3,Ae=3,ke=5;ge--;)switch(R[ge]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":we=R[ge];break;case"wide":Ae=5;break;case"narrow":Ae=2;break;case"long":ve=5;break;case"short":ve=2}if(we=="open"?(ve+=2,Ae+=2,ke+=2,m=1,b=i?4:1,L={fill:"none",stroke:ie.stroke}):(b=m=ve/2,L={fill:ie.stroke,stroke:"none"}),t._.arrows?i?(t._.arrows.endPath&&ue[t._.arrows.endPath]--,t._.arrows.endMarker&&ue[t._.arrows.endMarker]--):(t._.arrows.startPath&&ue[t._.arrows.startPath]--,t._.arrows.startMarker&&ue[t._.arrows.startMarker]--):t._.arrows={},we!="none"){var Le="raphael-marker-"+we,Ne="raphael-marker-"+G+we+ve+Ae+"-obj"+t.id;d._g.doc.getElementById(Le)?ue[Le]++:(V.defs.appendChild($($("path"),{"stroke-linecap":"round",d:he[we],id:Le})),ue[Le]=1);var Me,Be=d._g.doc.getElementById(Ne);Be?(ue[Ne]++,Me=Be.getElementsByTagName("use")[0]):(Be=$($("marker"),{id:Ne,markerHeight:Ae,markerWidth:ve,orient:"auto",refX:b,refY:Ae/2}),Me=$($("use"),{"xlink:href":"#"+Le,transform:(i?"rotate(180 "+ve/2+" "+Ae/2+") ":U)+"scale("+ve/ke+","+Ae/ke+")","stroke-width":(1/((ve/ke+Ae/ke)/2)).toFixed(4)}),Be.appendChild(Me),V.defs.appendChild(Be),ue[Ne]=1),$(Me,L);var Oe=m*(we!="diamond"&&we!="oval");i?(l=t._.arrows.startdx*de||0,p=d.getTotalLength(ie.path)-Oe*de):(l=Oe*de,p=d.getTotalLength(ie.path)-(t._.arrows.enddx*de||0)),(L={})["marker-"+G]="url(#"+Ne+")",(p||l)&&(L.d=d.getSubpath(ie.path,l,p)),$(K,L),t._.arrows[G+"Path"]=Le,t._.arrows[G+"Marker"]=Ne,t._.arrows[G+"dx"]=Oe,t._.arrows[G+"Type"]=we,t._.arrows[G+"String"]=n}else i?(l=t._.arrows.startdx*de||0,p=d.getTotalLength(ie.path)-l):(l=0,p=d.getTotalLength(ie.path)-(t._.arrows.enddx*de||0)),t._.arrows[G+"Path"]&&$(K,{d:d.getSubpath(ie.path,l,p)}),delete t._.arrows[G+"Path"],delete t._.arrows[G+"Marker"],delete t._.arrows[G+"dx"],delete t._.arrows[G+"Type"],delete t._.arrows[G+"String"];for(L in ue)if(ue[f](L)&&!ue[L]){var qe=d._g.doc.getElementById(L);qe&&qe.parentNode.removeChild(qe)}}},pe={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},Se=function(t,n,i){if(n=pe[C(n).toLowerCase()]){for(var l=t.attrs["stroke-width"]||"1",p={round:l,square:l,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,m=[],b=n.length;b--;)m[b]=n[b]*l+(b%2?1:-1)*p;$(t.node,{"stroke-dasharray":m.join(",")})}else $(t.node,{"stroke-dasharray":"none"})},X=function(t,n){var i=t.node,l=t.attrs,p=i.style.visibility;for(var m in i.style.visibility="hidden",n)if(n[f](m)){if(!d._availableAttrs[f](m))continue;var b=n[m];switch(l[m]=b,m){case"blur":t.blur(b);break;case"title":var L=i.getElementsByTagName("title");if(L.length&&(L=L[0]))L.firstChild.nodeValue=b;else{L=$("title");var R=d._g.doc.createTextNode(b);L.appendChild(R),i.appendChild(L)}break;case"href":case"target":var V=i.parentNode;if(V.tagName.toLowerCase()!="a"){var G=$("a");V.insertBefore(G,i),G.appendChild(i),V=G}m=="target"?V.setAttributeNS(se,"show",b=="blank"?"new":b):V.setAttributeNS(se,m,b);break;case"cursor":i.style.cursor=b;break;case"transform":t.transform(b);break;case"arrow-start":be(t,b);break;case"arrow-end":be(t,b,1);break;case"clip-rect":var K=C(b).split(W);if(K.length==4){t.clip&&t.clip.parentNode.parentNode.removeChild(t.clip.parentNode);var ie=$("clipPath"),de=$("rect");ie.id=d.createUUID(),$(de,{x:K[0],y:K[1],width:K[2],height:K[3]}),ie.appendChild(de),t.paper.defs.appendChild(ie),$(i,{"clip-path":"url(#"+ie.id+")"}),t.clip=de}if(!b){var ge=i.getAttribute("clip-path");if(ge){var we=d._g.doc.getElementById(ge.replace(/(^url\(#|\)$)/g,U));we&&we.parentNode.removeChild(we),$(i,{"clip-path":U}),delete t.clip}}break;case"path":t.type=="path"&&($(i,{d:b?l.path=d._pathToAbsolute(b):"M0,0"}),t._.dirty=1,t._.arrows&&("startString"in t._.arrows&&be(t,t._.arrows.startString),"endString"in t._.arrows&&be(t,t._.arrows.endString,1)));break;case"width":if(i.setAttribute(m,b),t._.dirty=1,!l.fx)break;m="x",b=l.x;case"x":l.fx&&(b=-l.x-(l.width||0));case"rx":if(m=="rx"&&t.type=="rect")break;case"cx":i.setAttribute(m,b),t.pattern&&ye(t),t._.dirty=1;break;case"height":if(i.setAttribute(m,b),t._.dirty=1,!l.fy)break;m="y",b=l.y;case"y":l.fy&&(b=-l.y-(l.height||0));case"ry":if(m=="ry"&&t.type=="rect")break;case"cy":i.setAttribute(m,b),t.pattern&&ye(t),t._.dirty=1;break;case"r":t.type=="rect"?$(i,{rx:b,ry:b}):i.setAttribute(m,b),t._.dirty=1;break;case"src":t.type=="image"&&i.setAttributeNS(se,"href",b);break;case"stroke-width":t._.sx==1&&t._.sy==1||(b/=q(D(t._.sx),D(t._.sy))||1),i.setAttribute(m,b),l["stroke-dasharray"]&&Se(t,l["stroke-dasharray"],n),t._.arrows&&("startString"in t._.arrows&&be(t,t._.arrows.startString),"endString"in t._.arrows&&be(t,t._.arrows.endString,1));break;case"stroke-dasharray":Se(t,b,n);break;case"fill":var ve=C(b).match(d._ISURL);if(ve){ie=$("pattern");var Ae=$("image");ie.id=d.createUUID(),$(ie,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),$(Ae,{x:0,y:0,"xlink:href":ve[1]}),ie.appendChild(Ae),function(Be){d._preload(ve[1],function(){var Oe=this.offsetWidth,qe=this.offsetHeight;$(Be,{width:Oe,height:qe}),$(Ae,{width:Oe,height:qe})})}(ie),t.paper.defs.appendChild(ie),$(i,{fill:"url(#"+ie.id+")"}),t.pattern=ie,t.pattern&&ye(t);break}var ke=d.getRGB(b);if(ke.error){if((t.type=="circle"||t.type=="ellipse"||C(b).charAt()!="r")&&T(t,b)){if("opacity"in l||"fill-opacity"in l){var Le=d._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,U));if(Le){var Ne=Le.getElementsByTagName("stop");$(Ne[Ne.length-1],{"stop-opacity":("opacity"in l?l.opacity:1)*("fill-opacity"in l?l["fill-opacity"]:1)})}}l.gradient=b,l.fill="none";break}}else delete n.gradient,delete l.gradient,!d.is(l.opacity,"undefined")&&d.is(n.opacity,"undefined")&&$(i,{opacity:l.opacity}),!d.is(l["fill-opacity"],"undefined")&&d.is(n["fill-opacity"],"undefined")&&$(i,{"fill-opacity":l["fill-opacity"]});ke[f]("opacity")&&$(i,{"fill-opacity":ke.opacity>1?ke.opacity/100:ke.opacity});case"stroke":ke=d.getRGB(b),i.setAttribute(m,ke.hex),m=="stroke"&&ke[f]("opacity")&&$(i,{"stroke-opacity":ke.opacity>1?ke.opacity/100:ke.opacity}),m=="stroke"&&t._.arrows&&("startString"in t._.arrows&&be(t,t._.arrows.startString),"endString"in t._.arrows&&be(t,t._.arrows.endString,1));break;case"gradient":(t.type=="circle"||t.type=="ellipse"||C(b).charAt()!="r")&&T(t,b);break;case"opacity":l.gradient&&!l[f]("stroke-opacity")&&$(i,{"stroke-opacity":b>1?b/100:b});case"fill-opacity":if(l.gradient){(Le=d._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,U)))&&(Ne=Le.getElementsByTagName("stop"),$(Ne[Ne.length-1],{"stop-opacity":b}));break}default:m=="font-size"&&(b=H(b,10)+"px");var Me=m.replace(/(\-.)/g,function(Be){return Be.substring(1).toUpperCase()});i.style[Me]=b,t._.dirty=1,i.setAttribute(m,b)}}Ce(t,n),i.style.visibility=p},Ce=function(t,n){if(t.type=="text"&&(n[f]("text")||n[f]("font")||n[f]("font-size")||n[f]("x")||n[f]("y"))){var i=t.attrs,l=t.node,p=l.firstChild?H(d._g.doc.defaultView.getComputedStyle(l.firstChild,U).getPropertyValue("font-size"),10):10;if(n[f]("text")){for(i.text=n.text;l.firstChild;)l.removeChild(l.firstChild);for(var m,b=C(n.text).split(`
`),L=[],R=0,V=b.length;R<V;R++)m=$("tspan"),R&&$(m,{dy:1.2*p,x:i.x}),m.appendChild(d._g.doc.createTextNode(b[R])),l.appendChild(m),L[R]=m}else for(R=0,V=(L=l.getElementsByTagName("tspan")).length;R<V;R++)R?$(L[R],{dy:1.2*p,x:i.x}):$(L[0],{dy:0});$(l,{x:i.x,y:i.y}),t._.dirty=1;var G=t._getBBox(),K=i.y-(G.y+G.height/2);K&&d.is(K,"finite")&&$(L[0],{dy:K})}},_e=function(t){return t.parentNode&&t.parentNode.tagName.toLowerCase()==="a"?t.parentNode:t},ee=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),t.raphaelid=this.id,this.matrix=d.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},s=d.el;ee.prototype=s,s.constructor=ee,d._engine.path=function(t,n){var i=$("path");n.canvas&&n.canvas.appendChild(i);var l=new ee(i,n);return l.type="path",X(l,{fill:"none",stroke:"#000",path:t}),l},s.rotate=function(t,n,i){if(this.removed)return this;if((t=C(t).split(W)).length-1&&(n=N(t[1]),i=N(t[2])),t=N(t[0]),i==null&&(n=i),n==null||i==null){var l=this.getBBox(1);n=l.x+l.width/2,i=l.y+l.height/2}return this.transform(this._.transform.concat([["r",t,n,i]])),this},s.scale=function(t,n,i,l){if(this.removed)return this;if((t=C(t).split(W)).length-1&&(n=N(t[1]),i=N(t[2]),l=N(t[3])),t=N(t[0]),n==null&&(n=t),l==null&&(i=l),i==null||l==null)var p=this.getBBox(1);return i=i==null?p.x+p.width/2:i,l=l==null?p.y+p.height/2:l,this.transform(this._.transform.concat([["s",t,n,i,l]])),this},s.translate=function(t,n){return this.removed?this:((t=C(t).split(W)).length-1&&(n=N(t[1])),t=N(t[0])||0,n=+n||0,this.transform(this._.transform.concat([["t",t,n]])),this)},s.transform=function(t){var n=this._;if(t==null)return n.transform;if(d._extractTransform(this,t),this.clip&&$(this.clip,{transform:this.matrix.invert()}),this.pattern&&ye(this),this.node&&$(this.node,{transform:this.matrix}),n.sx!=1||n.sy!=1){var i=this.attrs[f]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},s.hide=function(){return this.removed||(this.node.style.display="none"),this},s.show=function(){return this.removed||(this.node.style.display=""),this},s.remove=function(){var t=_e(this.node);if(!this.removed&&t.parentNode){var n=this.paper;for(var i in n.__set__&&n.__set__.exclude(this),te.unbind("raphael.*.*."+this.id),this.gradient&&n.defs.removeChild(this.gradient),d._tear(this,n),t.parentNode.removeChild(t),this.removeData(),this)this[i]=typeof this[i]=="function"?d._removedFactory(i):null;this.removed=!0}},s._getBBox=function(){if(this.node.style.display=="none"){this.show();var t=!0}var n,i=!1;this.paper.canvas.parentElement?n=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(n=this.paper.canvas.parentNode.style),n&&n.display=="none"&&(i=!0,n.display="");var l={};try{l=this.node.getBBox()}catch(p){l={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{l=l||{},i&&(n.display="none")}return t&&this.hide(),l},s.attr=function(t,n){if(this.removed)return this;if(t==null){var i={};for(var l in this.attrs)this.attrs[f](l)&&(i[l]=this.attrs[l]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(n==null&&d.is(t,"string")){if(t=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(t=="transform")return this._.transform;for(var p=t.split(W),m={},b=0,L=p.length;b<L;b++)(t=p[b])in this.attrs?m[t]=this.attrs[t]:d.is(this.paper.customAttributes[t],"function")?m[t]=this.paper.customAttributes[t].def:m[t]=d._availableAttrs[t];return L-1?m:m[p[0]]}if(n==null&&d.is(t,"array")){for(m={},b=0,L=t.length;b<L;b++)m[t[b]]=this.attr(t[b]);return m}if(n!=null){var R={};R[t]=n}else t!=null&&d.is(t,"object")&&(R=t);for(var V in R)te("raphael.attr."+V+"."+this.id,this,R[V]);for(V in this.paper.customAttributes)if(this.paper.customAttributes[f](V)&&R[f](V)&&d.is(this.paper.customAttributes[V],"function")){var G=this.paper.customAttributes[V].apply(this,[].concat(R[V]));for(var K in this.attrs[V]=R[V],G)G[f](K)&&(R[K]=G[K])}return X(this,R),this},s.toFront=function(){if(this.removed)return this;var t=_e(this.node);t.parentNode.appendChild(t);var n=this.paper;return n.top!=this&&d._tofront(this,n),this},s.toBack=function(){if(this.removed)return this;var t=_e(this.node),n=t.parentNode;return n.insertBefore(t,n.firstChild),d._toback(this,this.paper),this.paper,this},s.insertAfter=function(t){if(this.removed||!t)return this;var n=_e(this.node),i=_e(t.node||t[t.length-1].node);return i.nextSibling?i.parentNode.insertBefore(n,i.nextSibling):i.parentNode.appendChild(n),d._insertafter(this,t,this.paper),this},s.insertBefore=function(t){if(this.removed||!t)return this;var n=_e(this.node),i=_e(t.node||t[0].node);return i.parentNode.insertBefore(n,i),d._insertbefore(this,t,this.paper),this},s.blur=function(t){var n=this;if(+t!=0){var i=$("filter"),l=$("feGaussianBlur");n.attrs.blur=t,i.id=d.createUUID(),$(l,{stdDeviation:+t||1.5}),i.appendChild(l),n.paper.defs.appendChild(i),n._blur=i,$(n.node,{filter:"url(#"+i.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter");return n},d._engine.circle=function(t,n,i,l){var p=$("circle");t.canvas&&t.canvas.appendChild(p);var m=new ee(p,t);return m.attrs={cx:n,cy:i,r:l,fill:"none",stroke:"#000"},m.type="circle",$(p,m.attrs),m},d._engine.rect=function(t,n,i,l,p,m){var b=$("rect");t.canvas&&t.canvas.appendChild(b);var L=new ee(b,t);return L.attrs={x:n,y:i,width:l,height:p,rx:m||0,ry:m||0,fill:"none",stroke:"#000"},L.type="rect",$(b,L.attrs),L},d._engine.ellipse=function(t,n,i,l,p){var m=$("ellipse");t.canvas&&t.canvas.appendChild(m);var b=new ee(m,t);return b.attrs={cx:n,cy:i,rx:l,ry:p,fill:"none",stroke:"#000"},b.type="ellipse",$(m,b.attrs),b},d._engine.image=function(t,n,i,l,p,m){var b=$("image");$(b,{x:i,y:l,width:p,height:m,preserveAspectRatio:"none"}),b.setAttributeNS(se,"href",n),t.canvas&&t.canvas.appendChild(b);var L=new ee(b,t);return L.attrs={x:i,y:l,width:p,height:m,src:n},L.type="image",L},d._engine.text=function(t,n,i,l){var p=$("text");t.canvas&&t.canvas.appendChild(p);var m=new ee(p,t);return m.attrs={x:n,y:i,"text-anchor":"middle",text:l,"font-family":d._availableAttrs["font-family"],"font-size":d._availableAttrs["font-size"],stroke:"none",fill:"#000"},m.type="text",X(m,m.attrs),m},d._engine.setSize=function(t,n){return this.width=t||this.width,this.height=n||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},d._engine.create=function(){var t=d._getContainer.apply(0,arguments),n=t&&t.container;if(!n)throw new Error("SVG container not found.");var i,l=t.x,p=t.y,m=t.width,b=t.height,L=$("svg"),R="overflow:hidden;";return l=l||0,p=p||0,$(L,{height:b=b||342,version:1.1,width:m=m||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),n==1?(L.style.cssText=R+"position:absolute;left:"+l+"px;top:"+p+"px",d._g.doc.body.appendChild(L),i=1):(L.style.cssText=R+"position:relative",n.firstChild?n.insertBefore(L,n.firstChild):n.appendChild(L)),(n=new d._Paper).width=m,n.height=b,n.canvas=L,n.clear(),n._left=n._top=0,i&&(n.renderfix=function(){}),n.renderfix(),n},d._engine.setViewBox=function(t,n,i,l,p){te("raphael.setViewBox",this,this._viewBox,[t,n,i,l,p]);var m,b,L=this.getSize(),R=q(i/L.width,l/L.height),V=this.top,G=p?"xMidYMid meet":"xMinYMin";for(t==null?(this._vbSize&&(R=1),delete this._vbSize,m="0 0 "+this.width+j+this.height):(this._vbSize=R,m=t+j+n+j+i+j+l),$(this.canvas,{viewBox:m,preserveAspectRatio:G});R&&V;)b="stroke-width"in V.attrs?V.attrs["stroke-width"]:1,V.attr({"stroke-width":b}),V._.dirty=1,V._.dirtyT=1,V=V.prev;return this._viewBox=[t,n,i,l,!!p],this},d.prototype.renderfix=function(){var t,n=this.canvas,i=n.style;try{t=n.getScreenCTM()||n.createSVGMatrix()}catch(m){t=n.createSVGMatrix()}var l=-t.e%1,p=-t.f%1;(l||p)&&(l&&(this._left=(this._left+l)%1,i.left=this._left+"px"),p&&(this._top=(this._top+p)%1,i.top=this._top+"px"))},d.prototype.clear=function(){d.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=$("desc")).appendChild(d._g.doc.createTextNode("Created with Rapha├лl "+d.version)),t.appendChild(this.desc),t.appendChild(this.defs=$("defs"))},d.prototype.remove=function(){for(var t in te("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]=typeof this[t]=="function"?d._removedFactory(t):null};var o=d.st;for(var h in s)s[f](h)&&!o[f](h)&&(o[h]=function(t){return function(){var n=arguments;return this.forEach(function(i){i[t].apply(i,n)})}}(h))}}.apply(P,I))===void 0||(k.exports=z)},function(k,P,v){var I,z;I=[v(0)],(z=function(d){if(!d||d.vml){var f="hasOwnProperty",C=String,N=parseFloat,H=Math,B=H.round,q=H.max,D=H.min,O=H.abs,W=/[, ]+/,te=d.eve,U=" ",j="",se={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},he=/([clmz]),?([^clmz]*)/gi,ue=/ progid:\S+Blur\([^\)]+\)/g,$=/-?[^,\s-]+/g,T="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",me=21600,ye={path:1,rect:1,image:1},be={circle:1,ellipse:1},pe=function(n,i,l){var p=d.matrix();return p.rotate(-n,.5,.5),{dx:p.x(i,l),dy:p.y(i,l)}},Se=function(n,i,l,p,m,b){var L=n._,R=n.matrix,V=L.fillpos,G=n.node,K=G.style,ie=1,de="",ge=me/i,we=me/l;if(K.visibility="hidden",i&&l){if(G.coordsize=O(ge)+U+O(we),K.rotation=b*(i*l<0?-1:1),b){var ve=pe(b,p,m);p=ve.dx,m=ve.dy}if(i<0&&(de+="x"),l<0&&(de+=" y")&&(ie=-1),K.flip=de,G.coordorigin=p*-ge+U+m*-we,V||L.fillsize){var Ae=G.getElementsByTagName("fill");Ae=Ae&&Ae[0],G.removeChild(Ae),V&&(ve=pe(b,R.x(V[0],V[1]),R.y(V[0],V[1])),Ae.position=ve.dx*ie+U+ve.dy*ie),L.fillsize&&(Ae.size=L.fillsize[0]*O(i)+U+L.fillsize[1]*O(l)),G.appendChild(Ae)}K.visibility="visible"}};d.toString=function(){return`Your browser doesnтАЩt support SVG. Falling down to VML.
You are running Rapha├лl `+this.version};var X,Ce=function(n,i,l){for(var p=C(i).toLowerCase().split("-"),m=l?"end":"start",b=p.length,L="classic",R="medium",V="medium";b--;)switch(p[b]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":L=p[b];break;case"wide":case"narrow":V=p[b];break;case"long":case"short":R=p[b]}var G=n.node.getElementsByTagName("stroke")[0];G[m+"arrow"]=L,G[m+"arrowlength"]=R,G[m+"arrowwidth"]=V},_e=function(n,i){n.attrs=n.attrs||{};var l=n.node,p=n.attrs,m=l.style,b=ye[n.type]&&(i.x!=p.x||i.y!=p.y||i.width!=p.width||i.height!=p.height||i.cx!=p.cx||i.cy!=p.cy||i.rx!=p.rx||i.ry!=p.ry||i.r!=p.r),L=be[n.type]&&(p.cx!=i.cx||p.cy!=i.cy||p.r!=i.r||p.rx!=i.rx||p.ry!=i.ry),R=n;for(var V in i)i[f](V)&&(p[V]=i[V]);if(b&&(p.path=d._getPath[n.type](n),n._.dirty=1),i.href&&(l.href=i.href),i.title&&(l.title=i.title),i.target&&(l.target=i.target),i.cursor&&(m.cursor=i.cursor),"blur"in i&&n.blur(i.blur),(i.path&&n.type=="path"||b)&&(l.path=function(ze){var Qe=/[ahqstv]/gi,ct=d._pathToAbsolute;if(C(ze).match(Qe)&&(ct=d._path2curve),Qe=/[clmz]/g,ct==d._pathToAbsolute&&!C(ze).match(Qe)){var Ue=C(ze).replace(he,function(Zt,dt,ft){var Ze=[],Tt=dt.toLowerCase()=="m",nt=se[dt];return ft.replace($,function(Mt){Tt&&Ze.length==2&&(nt+=Ze+se[dt=="m"?"l":"L"],Ze=[]),Ze.push(B(Mt*me))}),nt+Ze});return Ue}var ut,Ge,_t=ct(ze);Ue=[];for(var ht=0,kt=_t.length;ht<kt;ht++){ut=_t[ht],(Ge=_t[ht][0].toLowerCase())=="z"&&(Ge="x");for(var Ke=1,He=ut.length;Ke<He;Ke++)Ge+=B(ut[Ke]*me)+(Ke!=He-1?",":j);Ue.push(Ge)}return Ue.join(U)}(~C(p.path).toLowerCase().indexOf("r")?d._pathToAbsolute(p.path):p.path),n._.dirty=1,n.type=="image"&&(n._.fillpos=[p.x,p.y],n._.fillsize=[p.width,p.height],Se(n,1,1,0,0,0))),"transform"in i&&n.transform(i.transform),L){var G=+p.cx,K=+p.cy,ie=+p.rx||+p.r||0,de=+p.ry||+p.r||0;l.path=d.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",B((G-ie)*me),B((K-de)*me),B((G+ie)*me),B((K+de)*me),B(G*me)),n._.dirty=1}if("clip-rect"in i){var ge=C(i["clip-rect"]).split(W);if(ge.length==4){ge[2]=+ge[2]+ +ge[0],ge[3]=+ge[3]+ +ge[1];var we=l.clipRect||d._g.doc.createElement("div"),ve=we.style;ve.clip=d.format("rect({1}px {2}px {3}px {0}px)",ge),l.clipRect||(ve.position="absolute",ve.top=0,ve.left=0,ve.width=n.paper.width+"px",ve.height=n.paper.height+"px",l.parentNode.insertBefore(we,l),we.appendChild(l),l.clipRect=we)}i["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(n.textpath){var Ae=n.textpath.style;i.font&&(Ae.font=i.font),i["font-family"]&&(Ae.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,j)+'"'),i["font-size"]&&(Ae.fontSize=i["font-size"]),i["font-weight"]&&(Ae.fontWeight=i["font-weight"]),i["font-style"]&&(Ae.fontStyle=i["font-style"])}if("arrow-start"in i&&Ce(R,i["arrow-start"]),"arrow-end"in i&&Ce(R,i["arrow-end"],1),i.opacity!=null||i.fill!=null||i.src!=null||i.stroke!=null||i["stroke-width"]!=null||i["stroke-opacity"]!=null||i["fill-opacity"]!=null||i["stroke-dasharray"]!=null||i["stroke-miterlimit"]!=null||i["stroke-linejoin"]!=null||i["stroke-linecap"]!=null){var ke=l.getElementsByTagName("fill");if(!(ke=ke&&ke[0])&&(ke=X("fill")),n.type=="image"&&i.src&&(ke.src=i.src),i.fill&&(ke.on=!0),ke.on!=null&&i.fill!="none"&&i.fill!==null||(ke.on=!1),ke.on&&i.fill){var Le=C(i.fill).match(d._ISURL);if(Le){ke.parentNode==l&&l.removeChild(ke),ke.rotate=!0,ke.src=Le[1],ke.type="tile";var Ne=n.getBBox(1);ke.position=Ne.x+U+Ne.y,n._.fillpos=[Ne.x,Ne.y],d._preload(Le[1],function(){n._.fillsize=[this.offsetWidth,this.offsetHeight]})}else ke.color=d.getRGB(i.fill).hex,ke.src=j,ke.type="solid",d.getRGB(i.fill).error&&(R.type in{circle:1,ellipse:1}||C(i.fill).charAt()!="r")&&ee(R,i.fill,ke)&&(p.fill="none",p.gradient=i.fill,ke.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var Me=((+p["fill-opacity"]+1||2)-1)*((+p.opacity+1||2)-1)*((+d.getRGB(i.fill).o+1||2)-1);Me=D(q(Me,0),1),ke.opacity=Me,ke.src&&(ke.color="none")}l.appendChild(ke);var Be=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],Oe=!1;!Be&&(Oe=Be=X("stroke")),(i.stroke&&i.stroke!="none"||i["stroke-width"]||i["stroke-opacity"]!=null||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])&&(Be.on=!0),(i.stroke=="none"||i.stroke===null||Be.on==null||i.stroke==0||i["stroke-width"]==0)&&(Be.on=!1);var qe=d.getRGB(i.stroke);Be.on&&i.stroke&&(Be.color=qe.hex),Me=((+p["stroke-opacity"]+1||2)-1)*((+p.opacity+1||2)-1)*((+qe.o+1||2)-1);var je=.75*(N(i["stroke-width"])||1);if(Me=D(q(Me,0),1),i["stroke-width"]==null&&(je=p["stroke-width"]),i["stroke-width"]&&(Be.weight=je),je&&je<1&&(Me*=je)&&(Be.weight=1),Be.opacity=Me,i["stroke-linejoin"]&&(Be.joinstyle=i["stroke-linejoin"]||"miter"),Be.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(Be.endcap=i["stroke-linecap"]=="butt"?"flat":i["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in i){var wt={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Be.dashstyle=wt[f](i["stroke-dasharray"])?wt[i["stroke-dasharray"]]:j}Oe&&l.appendChild(Be)}if(R.type=="text"){R.paper.canvas.style.display=j;var Je=R.paper.span,ot=p.font&&p.font.match(/\d+(?:\.\d*)?(?=px)/);m=Je.style,p.font&&(m.font=p.font),p["font-family"]&&(m.fontFamily=p["font-family"]),p["font-weight"]&&(m.fontWeight=p["font-weight"]),p["font-style"]&&(m.fontStyle=p["font-style"]),ot=N(p["font-size"]||ot&&ot[0])||10,m.fontSize=100*ot+"px",R.textpath.string&&(Je.innerHTML=C(R.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var at=Je.getBoundingClientRect();R.W=p.w=(at.right-at.left)/100,R.H=p.h=(at.bottom-at.top)/100,R.X=p.x,R.Y=p.y+R.H/2,("x"in i||"y"in i)&&(R.path.v=d.format("m{0},{1}l{2},{1}",B(p.x*me),B(p.y*me),B(p.x*me)+1));for(var Ct=["x","y","text","font","font-family","font-weight","font-style","font-size"],lt=0,Nt=Ct.length;lt<Nt;lt++)if(Ct[lt]in i){R._.dirty=1;break}switch(p["text-anchor"]){case"start":R.textpath.style["v-text-align"]="left",R.bbx=R.W/2;break;case"end":R.textpath.style["v-text-align"]="right",R.bbx=-R.W/2;break;default:R.textpath.style["v-text-align"]="center",R.bbx=0}R.textpath.style["v-text-kern"]=!0}},ee=function(n,i,l){n.attrs=n.attrs||{},n.attrs;var p=Math.pow,m="linear",b=".5 .5";if(n.attrs.gradient=i,i=(i=C(i).replace(d._radial_gradient,function(ie,de,ge){return m="radial",de&&ge&&(de=N(de),ge=N(ge),p(de-.5,2)+p(ge-.5,2)>.25&&(ge=H.sqrt(.25-p(de-.5,2))*(2*(ge>.5)-1)+.5),b=de+U+ge),j})).split(/\s*\-\s*/),m=="linear"){var L=i.shift();if(L=-N(L),isNaN(L))return null}var R=d._parseDots(i);if(!R)return null;if(n=n.shape||n.node,R.length){n.removeChild(l),l.on=!0,l.method="none",l.color=R[0].color,l.color2=R[R.length-1].color;for(var V=[],G=0,K=R.length;G<K;G++)R[G].offset&&V.push(R[G].offset+U+R[G].color);l.colors=V.length?V.join():"0% "+l.color,m=="radial"?(l.type="gradientTitle",l.focus="100%",l.focussize="0 0",l.focusposition=b,l.angle=0):(l.type="gradient",l.angle=(270-L)%360),n.appendChild(l)}return 1},s=function(n,i){this[0]=this.node=n,n.raphael=!0,this.id=d._oid++,n.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=i,this.matrix=d.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},o=d.el;s.prototype=o,o.constructor=s,o.transform=function(n){if(n==null)return this._.transform;var i,l=this.paper._viewBoxShift,p=l?"s"+[l.scale,l.scale]+"-1-1t"+[l.dx,l.dy]:j;l&&(i=n=C(n).replace(/\.{3}|\u2026/g,this._.transform||j)),d._extractTransform(this,p+n);var m,b=this.matrix.clone(),L=this.skew,R=this.node,V=~C(this.attrs.fill).indexOf("-"),G=!C(this.attrs.fill).indexOf("url(");if(b.translate(1,1),G||V||this.type=="image")if(L.matrix="1 0 0 1",L.offset="0 0",m=b.split(),V&&m.noRotation||!m.isSimple){R.style.filter=b.toFilter();var K=this.getBBox(),ie=this.getBBox(1),de=K.x-ie.x,ge=K.y-ie.y;R.coordorigin=de*-me+U+ge*-me,Se(this,1,1,de,ge,0)}else R.style.filter=j,Se(this,m.scalex,m.scaley,m.dx,m.dy,m.rotate);else R.style.filter=j,L.matrix=C(b),L.offset=b.offset();return i!==null&&(this._.transform=i,d._extractTransform(this,i)),this},o.rotate=function(n,i,l){if(this.removed)return this;if(n!=null){if((n=C(n).split(W)).length-1&&(i=N(n[1]),l=N(n[2])),n=N(n[0]),l==null&&(i=l),i==null||l==null){var p=this.getBBox(1);i=p.x+p.width/2,l=p.y+p.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",n,i,l]])),this}},o.translate=function(n,i){return this.removed?this:((n=C(n).split(W)).length-1&&(i=N(n[1])),n=N(n[0])||0,i=+i||0,this._.bbox&&(this._.bbox.x+=n,this._.bbox.y+=i),this.transform(this._.transform.concat([["t",n,i]])),this)},o.scale=function(n,i,l,p){if(this.removed)return this;if((n=C(n).split(W)).length-1&&(i=N(n[1]),l=N(n[2]),p=N(n[3]),isNaN(l)&&(l=null),isNaN(p)&&(p=null)),n=N(n[0]),i==null&&(i=n),p==null&&(l=p),l==null||p==null)var m=this.getBBox(1);return l=l==null?m.x+m.width/2:l,p=p==null?m.y+m.height/2:p,this.transform(this._.transform.concat([["s",n,i,l,p]])),this._.dirtyT=1,this},o.hide=function(){return!this.removed&&(this.node.style.display="none"),this},o.show=function(){return!this.removed&&(this.node.style.display=j),this},o.auxGetBBox=d.el.getBBox,o.getBBox=function(){var n=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var i={},l=1/this.paper._viewBoxShift.scale;return i.x=n.x-this.paper._viewBoxShift.dx,i.x*=l,i.y=n.y-this.paper._viewBoxShift.dy,i.y*=l,i.width=n.width*l,i.height=n.height*l,i.x2=i.x+i.width,i.y2=i.y+i.height,i}return n},o._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},o.remove=function(){if(!this.removed&&this.node.parentNode){for(var n in this.paper.__set__&&this.paper.__set__.exclude(this),d.eve.unbind("raphael.*.*."+this.id),d._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[n]=typeof this[n]=="function"?d._removedFactory(n):null;this.removed=!0}},o.attr=function(n,i){if(this.removed)return this;if(n==null){var l={};for(var p in this.attrs)this.attrs[f](p)&&(l[p]=this.attrs[p]);return l.gradient&&l.fill=="none"&&(l.fill=l.gradient)&&delete l.gradient,l.transform=this._.transform,l}if(i==null&&d.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var m=n.split(W),b={},L=0,R=m.length;L<R;L++)(n=m[L])in this.attrs?b[n]=this.attrs[n]:d.is(this.paper.customAttributes[n],"function")?b[n]=this.paper.customAttributes[n].def:b[n]=d._availableAttrs[n];return R-1?b:b[m[0]]}if(this.attrs&&i==null&&d.is(n,"array")){for(b={},L=0,R=n.length;L<R;L++)b[n[L]]=this.attr(n[L]);return b}var V;for(var G in i!=null&&((V={})[n]=i),i==null&&d.is(n,"object")&&(V=n),V)te("raphael.attr."+G+"."+this.id,this,V[G]);if(V){for(G in this.paper.customAttributes)if(this.paper.customAttributes[f](G)&&V[f](G)&&d.is(this.paper.customAttributes[G],"function")){var K=this.paper.customAttributes[G].apply(this,[].concat(V[G]));for(var ie in this.attrs[G]=V[G],K)K[f](ie)&&(V[ie]=K[ie])}V.text&&this.type=="text"&&(this.textpath.string=V.text),_e(this,V)}return this},o.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&d._tofront(this,this.paper),this},o.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),d._toback(this,this.paper)),this)},o.insertAfter=function(n){return this.removed?this:(n.constructor==d.st.constructor&&(n=n[n.length-1]),n.node.nextSibling?n.node.parentNode.insertBefore(this.node,n.node.nextSibling):n.node.parentNode.appendChild(this.node),d._insertafter(this,n,this.paper),this)},o.insertBefore=function(n){return this.removed?this:(n.constructor==d.st.constructor&&(n=n[0]),n.node.parentNode.insertBefore(this.node,n.node),d._insertbefore(this,n,this.paper),this)},o.blur=function(n){var i=this.node.runtimeStyle,l=i.filter;return l=l.replace(ue,j),+n!=0?(this.attrs.blur=n,i.filter=l+U+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+n||1.5)+")",i.margin=d.format("-{0}px 0 0 -{0}px",B(+n||1.5))):(i.filter=l,i.margin=0,delete this.attrs.blur),this},d._engine.path=function(n,i){var l=X("shape");l.style.cssText=T,l.coordsize=me+U+me,l.coordorigin=i.coordorigin;var p=new s(l,i),m={fill:"none",stroke:"#000"};n&&(m.path=n),p.type="path",p.path=[],p.Path=j,_e(p,m),i.canvas&&i.canvas.appendChild(l);var b=X("skew");return b.on=!0,l.appendChild(b),p.skew=b,p.transform(j),p},d._engine.rect=function(n,i,l,p,m,b){var L=d._rectPath(i,l,p,m,b),R=n.path(L),V=R.attrs;return R.X=V.x=i,R.Y=V.y=l,R.W=V.width=p,R.H=V.height=m,V.r=b,V.path=L,R.type="rect",R},d._engine.ellipse=function(n,i,l,p,m){var b=n.path();return b.attrs,b.X=i-p,b.Y=l-m,b.W=2*p,b.H=2*m,b.type="ellipse",_e(b,{cx:i,cy:l,rx:p,ry:m}),b},d._engine.circle=function(n,i,l,p){var m=n.path();return m.attrs,m.X=i-p,m.Y=l-p,m.W=m.H=2*p,m.type="circle",_e(m,{cx:i,cy:l,r:p}),m},d._engine.image=function(n,i,l,p,m,b){var L=d._rectPath(l,p,m,b),R=n.path(L).attr({stroke:"none"}),V=R.attrs,G=R.node,K=G.getElementsByTagName("fill")[0];return V.src=i,R.X=V.x=l,R.Y=V.y=p,R.W=V.width=m,R.H=V.height=b,V.path=L,R.type="image",K.parentNode==G&&G.removeChild(K),K.rotate=!0,K.src=i,K.type="tile",R._.fillpos=[l,p],R._.fillsize=[m,b],G.appendChild(K),Se(R,1,1,0,0,0),R},d._engine.text=function(n,i,l,p){var m=X("shape"),b=X("path"),L=X("textpath");i=i||0,l=l||0,p=p||"",b.v=d.format("m{0},{1}l{2},{1}",B(i*me),B(l*me),B(i*me)+1),b.textpathok=!0,L.string=C(p),L.on=!0,m.style.cssText=T,m.coordsize=me+U+me,m.coordorigin="0 0";var R=new s(m,n),V={fill:"#000",stroke:"none",font:d._availableAttrs.font,text:p};R.shape=m,R.path=b,R.textpath=L,R.type="text",R.attrs.text=C(p),R.attrs.x=i,R.attrs.y=l,R.attrs.w=1,R.attrs.h=1,_e(R,V),m.appendChild(L),m.appendChild(b),n.canvas.appendChild(m);var G=X("skew");return G.on=!0,m.appendChild(G),R.skew=G,R.transform(j),R},d._engine.setSize=function(n,i){var l=this.canvas.style;return this.width=n,this.height=i,n==+n&&(n+="px"),i==+i&&(i+="px"),l.width=n,l.height=i,l.clip="rect(0 "+n+" "+i+" 0)",this._viewBox&&d._engine.setViewBox.apply(this,this._viewBox),this},d._engine.setViewBox=function(n,i,l,p,m){d.eve("raphael.setViewBox",this,this._viewBox,[n,i,l,p,m]);var b,L,R=this.getSize(),V=R.width,G=R.height;return m&&(l*(b=G/p)<V&&(n-=(V-l*b)/2/b),p*(L=V/l)<G&&(i-=(G-p*L)/2/L)),this._viewBox=[n,i,l,p,!!m],this._viewBoxShift={dx:-n,dy:-i,scale:R},this.forEach(function(K){K.transform("...")}),this},d._engine.initWin=function(n){var i=n.document;i.styleSheets.length<31?i.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):i.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!i.namespaces.rvml&&i.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),X=function(l){return i.createElement("<rvml:"+l+' class="rvml">')}}catch(l){X=function(p){return i.createElement("<"+p+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},d._engine.initWin(d._g.win),d._engine.create=function(){var n=d._getContainer.apply(0,arguments),i=n.container,l=n.height,p=n.width,m=n.x,b=n.y;if(!i)throw new Error("VML container not found.");var L=new d._Paper,R=L.canvas=d._g.doc.createElement("div"),V=R.style;return m=m||0,b=b||0,p=p||512,l=l||342,L.width=p,L.height=l,p==+p&&(p+="px"),l==+l&&(l+="px"),L.coordsize=216e5+U+216e5,L.coordorigin="0 0",L.span=d._g.doc.createElement("span"),L.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",R.appendChild(L.span),V.cssText=d.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",p,l),i==1?(d._g.doc.body.appendChild(R),V.left=m+"px",V.top=b+"px",V.position="absolute"):i.firstChild?i.insertBefore(R,i.firstChild):i.appendChild(R),L.renderfix=function(){},L},d.prototype.clear=function(){d.eve("raphael.clear",this),this.canvas.innerHTML=j,this.span=d._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},d.prototype.remove=function(){for(var n in d.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[n]=typeof this[n]=="function"?d._removedFactory(n):null;return!0};var h=d.st;for(var t in o)o[f](t)&&!h[f](t)&&(h[t]=function(n){return function(){var i=arguments;return this.forEach(function(l){l[n].apply(l,i)})}}(t))}}.apply(P,I))===void 0||(k.exports=z)}])})}),Q1=W1(J1),Lt=Q1;var M={};M.Common={nodeIdIncrement:0,activeNode:0,roundFloat:function(x,u){for(var k=0,P=1;k<u;)P*=10,k++;return Math.round(x*P)/P},apply:function(x,u){if(x&&typeof u=="object")for(var k in u)x[k]=u[k];return x},addRaphEventHandler:function(x,u,k,P){try{x[u](function(v,I){return function(z,d){var f=I;f.e=z,v(f)}}(k,P))}catch(v){}},isInteger:function(x){return!isNaN(parseInt(x))},isXMLSerializerAvailable:function(){return typeof XMLSerializer=="function"},createSvgEl:function(x,u){if(x=document.createElementNS("http://www.w3.org/2000/svg",x),u)for(var k in u)u.hasOwnProperty(k)&&x.setAttribute(k,String(u[k]));return x},createGradientEl:function(x,u,k){if(u.type!="radialGradient")return!1;var P=M.Common.createSvgEl("radialGradient",{id:x,gradientUnits:"userSpaceOnUse",cx:k[0],cy:k[1],r:k[2],fx:k[0],fy:k[1]});if(u.stop)for(var v=u.stop,I=0;I<v.length;I++){var z=v[I];z["@attributes"]?P.appendChild(M.Common.createSvgEl("stop",z["@attributes"])):(z._attributes&&delete z._attributes,z._children&&delete z._children,z.__proto__&&delete z.__proto__,P.appendChild(M.Common.createSvgEl("stop",z)))}return P},setCssStyle:function(x,u){var k=document.styleSheets[0];k.addRule?k.addRule(x,u):k.insertRule&&k.insertRule(x+" { "+u+" }",k.cssRules.length)}};M.PhyloCanvas=function(){var x,u,k,P,v;return function(I,z,d,f,C){if(this.getNewickObject=function(){return k},this.clear=function(){},this.scale=function(H){P.svg.scale(H)},this.getSvg=function(){return P},this.getPhylogram=function(){return x},this.getSvgSource=function(){if(Lt.svg&&M.Common.isXMLSerializerAvailable()){var H=new XMLSerializer;return H.serializeToString(P.svg.canvas)}else return!1},typeof I=="object")if(I.xml){if(I.fileSource)var N=I.xml;else var N=xt.textToXML(I.xml);N=xt.xmlToJSON(N),v=new M.PhyloCanvas.PhyloxmlParse(N)}else if(I.phyloxml){if(I.fileSource)var N=I.phyloxml;else var N=xt.textToXML(I.phyloxml);N=xt.xmlToJSON(N),v=new M.PhyloCanvas.PhyloxmlParse(N)}else if(I.nexml){if(I.fileSource)var N=I.nexml;else var N=xt.textToXML(I.nexml);N=xt.xmlToJSON(N),v=new M.PhyloCanvas.NexmlParse(N,I)}else I.json?v=new M.PhyloCanvas.PhyloxmlParse(I.json):I.newick?v=new M.PhyloCanvas.NewickParse(I.newick):I.nexmlJson?v=new M.PhyloCanvas.NexmlJsonParse(I):alert("Please set the format of input data");else v=new M.PhyloCanvas.NewickParse(I);u=z,P=new M.PhyloCanvas.Render.SVG(u,d,f),C=="circular"?x=new M.PhyloCanvas.Render.CircularPhylogram(P,v):x=new M.PhyloCanvas.Render.Phylogram(P,v)}}();M.PhyloCanvas.prototype={};M.PhyloCanvas.Node=function(){return function(x,u){this.id=M.Common.nodeIdIncrement+=1,this.level=0,this.len=0,this.newickLen=0,this.name="",this.type="",this.chart={},this.img=[],x&&M.Common.apply(this,x),this._countAllChildren=!1,this._countImmediateChildren=!1,this._midBranchPosition=!1,this.children=new Array,u&&u.children.push(this)}}();M.PhyloCanvas.Node.prototype={getCountAllChildren:function(){if(this._countAllChildren!==!1)return this._countAllChildren;var x=0;for(var u in this.children)if(M.Common.isInteger(u)){var k=this.children[u];k.children&&k.children.length>0?x+=k.getCountAllChildren():x++}return this._countAllChildren=x,x},getCountImmediateChildren:function(){if(this._countImmediateChildren!==!1)return this._countImmediateChildren;var x=0;for(var u in this.children){var k=this.children[u];x+=k.length}return this._countImmediateChildren=x,x},getMidbranchPosition:function(x){if(this._midBranchPosition!==!1)return this._midBranchPosition;for(var u=[0,0],k=0;k<this.children.length;k++){var P=this.children[k];P.children&&P.children.length>0?k==0&&x?(u[0]=P.getMidbranchPosition(!0),u[1]+=P.getCountAllChildren()-1):k==0?(u[0]=P.getMidbranchPosition(),u[1]+=P.getCountAllChildren()):k==this.children.length-1?u[1]+=P.getMidbranchPosition():u[1]+=P.getCountAllChildren():k==0&&x?u[0]=0:k==0?(u[0]=1,u[1]+=1):(k==this.children.length-1,u[1]+=1)}return this._midBranchPosition=u[1]>=u[0]?(u[1]+u[0])/2:u[0],this._midBranchPosition}};M.PhyloCanvas.NewickParse=function(){var x,u,k,P=0,v=0,I,z,d=function(q){for(var D=new M.PhyloCanvas.Node;u!==")"&&u!==",";)u===":"?(H(),D.len=M.Common.roundFloat(C(),4),D.len==0&&(D.len=1e-4)):u==="'"||u==='"'?(D.type="label",D.name=N(u)):(D.type="label",D.name=C());return D.level=q.level+1,D},f=function(q){var D=new M.PhyloCanvas.Node;for(q&&(D.level=q.level+1);u!==")";)H(),u==="("?D.children.push(f(D)):D.children.push(d(D));return H(),u!==":"&&u!==")"&&u!==","&&u!==";"&&(D.type="label",D.name=C()),u===":"&&(H(),D.len=M.Common.roundFloat(C(),4),D.len==0&&(D.len=1e-4),D.type="stem"),D},C=function(){for(var q="";u!==":"&&u!==")"&&u!==","&&u!==";";)q+=u,H();return q},N=function(q){for(var D="";u!==q;)D+=u,H();return D},H=function(){return u=x.charAt(k),k+=1,u},B=function(q,D){if(q.children&&q.children.length)for(var O=0;O<q.children.length;O++){var W=q.children[O];W.len===0&&(W.len=1),W.newickLen=M.Common.roundFloat(W.len+q.newickLen,4),W.level>P&&(P=W.level),W.newickLen>v&&(v=W.newickLen),W.children.length>0&&B(W,q)}return q};return function(q){this.getRoot=function(){return I},this.getLevels=function(){return P},this.getNewickLen=function(){return v},this.getValidate=function(){return z},P=0,v=0,x=q,k=0,H(),I=f(),I=B(I)}}();M.PhyloCanvas.NewickParse.prototype={};M.PhyloCanvas.PhyloxmlParse=function(){var x=0,u=0,k,P,v=function(d,f){var C=new M.PhyloCanvas.Node;if(f&&(C.level=f.level+1),d.clade&&d.clade.length)for(var N=0;N<d.clade.length;N++){var H=d.clade[N];C.children.push(v(H,C))}if(d.branch_length&&(typeof d.branch_length=="object"&&(d.branch_length=d.branch_length[0].Text),C.len=M.Common.roundFloat(d.branch_length,4),C.len==0&&(C.len=1e-4)),d.color?(C.red=d.color[0].red[0].Text,C.green=d.color[0].green[0].Text,C.blue=d.color[0].blue[0].Text):(C.red=0,C.green=0,C.blue=0),d.property&&d.property[0].applies_to=="node"&&d.property[0].ref=="style:font_color"&&(C.font_color_hex=d.property[0].Text),d.name?(C.type="label",C.name=d.name[0].Text,d.name[0]&&d.name[0].style&&(C.style=d.name[0].style),d.name[0]&&d.name[0].bgStyle&&(C.bgStyle=d.name[0].bgStyle)):d.confidence&&(C.name=d.confidence[0].Text),d.sequence&&d.sequence[0]&&d.sequence[0].name&&d.sequence[0].name[0]&&d.sequence[0].name[0].Text&&(C.sequenceName=d.sequence[0].name[0].Text),d.taxonomy&&d.taxonomy[0]&&(d.taxonomy[0].scientific_name&&d.taxonomy[0].scientific_name[0]&&d.taxonomy[0].scientific_name[0].Text&&(C.taxonomyScientificName=d.taxonomy[0].scientific_name[0].Text),d.taxonomy[0].common_name&&d.taxonomy[0].common_name[0]&&d.taxonomy[0].common_name[0].Text&&(C.taxonomyCommonName=d.taxonomy[0].common_name[0].Text)),d.sequence&&d.sequence[0]&&d.sequence[0].accession&&d.sequence[0].accession[0]&&d.sequence[0].accession[0].Text&&(C.sequenceAccession=d.sequence[0].accession[0].Text),d.point&&(C.LatLong=[d.point[0].lat[0].Text,d.point[0].long[0].Text]),C.name||(C.sequenceName?C.name=C.sequenceName:C.taxonomyScientificName?C.name=C.taxonomyScientificName:C.taxonomyCommonName?C.name=C.taxonomyCommonName:C.sequenceAccession&&(C.name=C.sequenceAccession),C.name&&(C.type="label")),d.annotation&&(d.annotation[0]&&d.annotation[0].desc&&d.annotation[0].desc[0]&&d.annotation[0].desc[0].Text&&(C.description=d.annotation[0].desc[0].Text),d.annotation[0]&&d.annotation[0].uri&&d.annotation[0].uri[0]&&d.annotation[0].uri[0].Text&&(C.uri=d.annotation[0].uri[0].Text),d.annotation[0]&&d.annotation[0].img))for(var N in d.annotation[0].img)M.Common.isInteger(N)&&(C.img[N]=d.annotation[0].img[N].Text);if(d.chart&&d.chart[0])for(var N in d.chart[0])N!="Text"&&N!="_children"&&(C.chart[N]=d.chart[0][N][0].Text);return C&&C.level>1&&(C.len||(P="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),C},I=function(d,f){if(d.children&&d.children.length)for(var C=0;C<d.children.length;C++){var N=d.children[C];N.newickLen=Math.round((N.len+d.newickLen)*1e4)/1e4,N.level>x&&(x=N.level),N.newickLen>u&&(u=N.newickLen),N.children.length>0&&I(N,d)}return d},z=function(d,f){for(var C in d)C!="_children"&&C!="Text"&&(C=="rectangular"||C=="circular"?z(d[C][0],C):(M.PhyloCanvas.Render.Parameters[C]||(M.PhyloCanvas.Render.Parameters[C]={}),M.PhyloCanvas.Render.Parameters.set(C,d[C][0].Text,f)))};return function(d){if(this.getRoot=function(){return k},this.getLevels=function(){return x},this.getNewickLen=function(){return u},this.getValidate=function(){return P},d.phylogeny&&d.phylogeny[0]&&d.phylogeny[0].clade&&(k=v(d.phylogeny[0].clade[0])),d.phylogeny&&d.phylogeny[0]&&d.phylogeny[0].render&&d.phylogeny[0].render[0]){var f=d.phylogeny[0].render[0];if(f&&f.styles){var C=f.styles[0];for(var N in C)if(N!="_children"&&N!="Text")if(C[N][0].type&&C[N][0].type=="radialGradient"&&Lt.svg)C[N][0].name=N,M.PhyloCanvas.Render.Style[N]=C[N][0],M.PhyloCanvas.Render.Style.jsphylosvgGradientList||(M.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),M.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(N);else{M.PhyloCanvas.Render.Style[N]||(M.PhyloCanvas.Render.Style[N]={});for(var H in C[N][0])H!="_attributes"&&H!="_children"&&H!="type"&&(M.PhyloCanvas.Render.Style[N][H.replace("_","-")]=C[N][0][H])}}if(f&&f.parameters&&z(f.parameters[0]),f&&f.charts){var B=f.charts[0];for(var N in B)if(N!="_children"&&N!="Text")for(var H in B[N])B[N][H].type=="binary"?(B[N][H].chart=N,M.PhyloCanvas.Render.Parameters.binaryCharts.push(B[N][H])):B[N][H].type=="integratedBinary"?(B[N][H].chart=N,M.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(B[N][H])):B[N][H].type=="bar"&&(B[N][H].chart=N,M.PhyloCanvas.Render.Parameters.barCharts.length==1&&M.PhyloCanvas.Render.Parameters.barCharts.shift(),M.PhyloCanvas.Render.Parameters.barCharts.push(B[N][H]))}}k=I(k)}}();M.PhyloCanvas.PhyloxmlParse.prototype={};M.PhyloCanvas.NexmlParse=function(){var x=0,u=0,k,P,v,I,z=function(C,N,H){var B=new M.PhyloCanvas.Node;H&&(B.level=H.level+1);for(var q=0;q<v.length;q++)if(v[q].source==C.id)for(var D=0;D<I.length;D++)v[q].target==I[D].id&&B.children.push(z(I[D],v[q].length,B));if(B&&B.level>0&&!B.len&&(B.len=1),N&&(B.len=M.Common.roundFloat(N,4),B.len==0&&(B.len=1e-4)),C.label&&(B.type="label",B.name=C.label,C.style&&(B.style=C.style)),C.color){let O=C.color.replace(/[a-z%\s\(\)]/g,"").split(",");B.red=O[0],B.green=O[1],B.blue=O[2]}else{let O=M.PhyloCanvas.Render.Style.line.stroke.replace(/[a-z%\s\(\)]/g,"").split(",");B.red=O[0],B.green=O[1],B.blue=O[2]}return B},d=function(C,N){if(C.children&&C.children.length)for(var H=0;H<C.children.length;H++){var B=C.children[H];B.newickLen=Math.round((B.len+C.newickLen)*1e4)/1e4,B.level>x&&(x=B.level),B.newickLen>u&&(u=B.newickLen),B.children.length>0&&d(B,C)}return C},f=function(C,N){for(var H in C)H!="_children"&&H!="Text"&&(H=="rectangular"||H=="circular"?f(C[H][0],H):(M.PhyloCanvas.Render.Parameters[H]||(M.PhyloCanvas.Render.Parameters[H]={}),M.PhyloCanvas.Render.Parameters.set(H,C[H][0].Text,N)))};return function(C,N){this.getRoot=function(){return k},this.getLevels=function(){return x},this.getNewickLen=function(){return u},this.getValidate=function(){return P},N.tree&&C.trees[0]&&C.trees[0].tree[N.tree-1]?(v=C.trees[0].tree[N.tree-1].edge,I=C.trees[0].tree[N.tree-1].node):(v=C.trees[0].tree[0].edge,I=C.trees[0].tree[0].node);for(var H=0;H<I.length;H++){var B=0;if(I[H].root&&I[H].root=="true"){k=I[H];break}for(var q=0;q<v.length;q++)v[q].target==I[H].id&&B++;if(B==0){k=I[H];break}}k?(k=z(k),k=d(k)):P="Error. Currently, only rooted NeXML trees are supported."}}();M.PhyloCanvas.NexmlParse.prototype={};M.PhyloCanvas.NexmlJsonParse=function(){var x=0,u=0,k,P,v=[],I=[],z=function(C,N,H){var B=new M.PhyloCanvas.Node;H&&(B.level=H.level+1);for(var q=0;q<v.length;q++)if(v[q].source==C.id)for(var D=0;D<I.length;D++)v[q].target==I[D].id&&B.children.push(z(I[D],v[q].length,B));return N&&(B.len=M.Common.roundFloat(N,4),B.len==0&&(B.len=1e-4)),C.label&&(B.type="label",B.name=C.label,C.accession&&(B.accession=C.accession),C.style&&(B.style=C.style),C.bgStyle&&(B.bgStyle=C.bgStyle)),C.chart&&(B.chart=C.chart),B&&B.level>1&&(B.len||(P="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),B},d=function(C,N){if(C.children&&C.children.length)for(var H=0;H<C.children.length;H++){var B=C.children[H];B.newickLen=Math.round((B.len+C.newickLen)*1e4)/1e4,B.level>x&&(x=B.level),B.newickLen>u&&(u=B.newickLen),B.children.length>0&&d(B,C)}return C},f=function(C,N){for(var H in C)H!="_children"&&H!="Text"&&(H=="rectangular"||H=="circular"?f(C[H],H):(M.PhyloCanvas.Render.Parameters[H]||(M.PhyloCanvas.Render.Parameters[H]={}),M.PhyloCanvas.Render.Parameters.set(H,C[H],N)))};return function(C){this.getRoot=function(){return k},this.getLevels=function(){return x},this.getNewickLen=function(){return u},this.getValidate=function(){return P};var N=C.nexmlJson.nexml,H=N.render;if(H&&H.styles){var B=H.styles;for(var q in B)if(q!="_children"&&q!="Text")if(B[q]["@attributes"].type&&B[q]["@attributes"].type=="radialGradient"&&Lt.svg)B[q].name=q,B[q].type=B[q]["@attributes"].type,M.PhyloCanvas.Render.Style[q]=B[q],M.PhyloCanvas.Render.Style.jsphylosvgGradientList||(M.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),M.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(q);else{M.PhyloCanvas.Render.Style[q]||(M.PhyloCanvas.Render.Style[q]={});for(var D in B[q]["@attributes"])D!="_attributes"&&D!="_children"&&D!="type"&&(M.PhyloCanvas.Render.Style[q][D.replace("_","-")]=B[q]["@attributes"][D])}}if(H&&H.parameters&&f(H.parameters),H&&H.charts){var O=H.charts;for(var q in O)O[q]["@attributes"].chart=q,O[q]["@attributes"].type=="binary"?M.PhyloCanvas.Render.Parameters.binaryCharts.push(O[q]["@attributes"]):O[q]["@attributes"].type=="integratedBinary"?M.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(O[q]["@attributes"]):O[q]["@attributes"].type=="bar"&&M.PhyloCanvas.Render.Parameters.barCharts.push(O[q]["@attributes"])}if(C.tree&&N.trees[0]&&N.trees[0].tree[C.tree-1])v=N.trees[0].tree[C.tree-1].edge,I=N.trees[0].tree[C.tree-1].node;else{for(var q=0;q<N.trees.tree.edge.length;q++)v.push(N.trees.tree.edge[q]["@attributes"]);for(var q=0;q<N.trees.tree.node.length;q++){var W=N.trees.tree.node[q]["@attributes"];W.label&&(W.chart=N.trees.tree.node[q].chart),I.push(W)}}for(var q=0;q<I.length;q++)I[q].root&&I[q].root=="true"&&(k=I[q]);k?(k=z(k),k=d(k)):P="Error. Currently, only rooted NeXML trees are supported."}}();M.PhyloCanvas.NexmlParse.prototype={};M.PhyloCanvas.Render={};M.PhyloCanvas.Render.Style={line:{stroke:"rgb(0,0,0)","stroke-width":1},text:{"font-family":"Verdana","font-size":12,"text-anchor":"start"},path:{stroke:"rgb(0,0,0)","stroke-width":1},connectedDash:{stroke:"rgb(200,200,200)","stroke-dasharray":". "},textSecantBg:{fill:"#EEE",stroke:"#DDD"},highlightedEdgeCircle:{fill:"black",stroke:"black"},barChart:{fill:"#003300",stroke:"#DDD"},getStyle:function(x,u){return this[x]?this[x]:this[u]}};M.PhyloCanvas.Render.Parameters={jsOverride:0,Rectangular:{bufferX:200,paddingX:10,paddingY:20,bufferInnerLabels:10,bufferOuterLabels:5,minHeightBetweenLeaves:10,alignPadding:0,alignRight:!1,showScaleBar:!1},Circular:{bufferRadius:.33,bufferAngle:20,initStartAngle:160,innerCircleRadius:0,minHeightBetweenLeaves:5,bufferInnerLabels:2,bufferOuterLabels:5},binaryCharts:[],integratedBinaryCharts:[],barCharts:[],binaryChartBufferInner:5,binaryChartBufferSiblings:.01,binaryChartThickness:15,binaryChartDisjointed:!1,barChartBufferInner:3,barChartHeight:50,barChartWidth:.5,set:function(x,u,k){this.jsOverride||(k?k=="circular"?this.Circular[x]=parseFloat(u):k=="rectangular"&&(this.Rectangular[x]=parseFloat(u)):this[x]=parseFloat(u))}};M.PhyloCanvas.Render.Line=function(){return function(x,u,k,P,v,I,z,d){this.type="line",this.attr=M.PhyloCanvas.Render.Style.line,this.attr.stroke=["rgb(",v,",",I,",",z,")"].join(""),this.x1=x,this.x2=u,this.y1=k,this.y2=P,d&&(M.Common.apply(this,d),d.attr&&(this.attr=d.attr))}}();M.PhyloCanvas.Render.Text=function(){return function(x,u,k,P){this.type="text",this.attr=M.PhyloCanvas.Render.Style.text,this.x=x,this.y=u,this.text=k,P&&(M.Common.apply(this,P),P.attr&&(this.attr=P.attr))}}();M.PhyloCanvas.Render.Path=function(){var x=M.PhyloCanvas.Render.Style.path;return function(u,k){this.type="path",this.attr=M.PhyloCanvas.Render.Style.path,this.path=u,k&&(M.Common.apply(this,k),k.attr&&(this.attr=k.attr))}}();M.PhyloCanvas.Render.Circle=function(){return function(x,u,k,P){this.type="circle",this.x=x,this.y=u,this.radius=k,P&&(M.Common.apply(this,P),P.attr&&(this.attr=P.attr))}}();M.PhyloCanvas.Render.SVG=function(){var x,u;return function(k,P,v){x=k,this.canvasSize=[P,v],this.svg=Lt(k,this.canvasSize[0],this.canvasSize[1])}}();M.PhyloCanvas.Render.SVG.prototype={render:function(){for(var x=this.phylogramObject.getDrawInstructs(),u=0;u<x.length;u++)if(x[u].type=="line")var k=this.svg.path(["M",x[u].x1,x[u].y1,"L",x[u].x2,x[u].y2]).attr(M.PhyloCanvas.Render.Style.line);else if(x[u].type=="path")var P=this.svg.path(x[u].path).attr(x[u].attr);else if(x[u].type=="circle")var P=this.svg.circle(x[u].x,x[u].y,x[u].radius).attr({stroke:"black",fill:"black"});else{var v=this.svg.text(x[u].x,x[u].y,x[u].text).attr(M.PhyloCanvas.Render.Style.text);x[u].attr&&v.attr(x[u].attr),x[u].rotate&&v.rotate(x[u].rotate);var I=v.getBBox(),z=Math.sqrt(I.height*I.height+I.width*I.width)}},draw:function(x){var u,k;if(x.type=="line")u=this.svg.path(["M",x.x1,x.y1,"L",x.x2,x.y2]).attr(M.PhyloCanvas.Render.Style.line);else if(x.type=="path")u=this.svg.path(x.path).attr(x.attr);else if(x.type=="circle")u=this.svg.circle(x.x,x.y,x.radius).attr({stroke:"black",fill:"black"});else if(x.type=="text"){u=this.svg.text(x.x,x.y,x.text).attr(M.PhyloCanvas.Render.Style.text),x.attr&&u.attr(x.attr),x.rotate&&u.rotate(x.rotate);var P=u.getBBox();k=Math.sqrt(P.height*P.height+P.width*P.width)}return[u,k]}};M.PhyloCanvas.Render.Phylogram=function(){var x,u=M.PhyloCanvas.Render.Parameters.Rectangular,k,P,v,I,z,d,f=!0,C=0,N=0,H,B,q,D,O,W,te,U,j,se,he,ue,$=[],T=function(X){return X+Math.round(X/4)},me=function(X,Ce,_e,ee){return["M",X,Ce,"L",_e,Ce,"L",_e,ee,"L",X,ee,"Z"]},ye=function(X,Ce){if(X.len&&f==!1&&X.children.length==0&&(C=M.Common.roundFloat(C+I,4)),X.children.length>0){var _e=[],ee,s,o,h,t,n,i;if(X.len&&(ee=Ce,s=Ce=M.Common.roundFloat(Ce+v*X.len,4),o=C+X.getMidbranchPosition(f)*I,h=o,t=X.red,n=X.green,i=X.blue,x.draw(new M.PhyloCanvas.Render.Line(ee,s,o,h,t,n,i))),X.name){var l={};if(l=M.PhyloCanvas.Render.Style.getStyle("bootstrap","text"),X.font_color_hex?l.fill=X.font_color_hex:l.fill="#000000",X.uri&&(l.href=X.uri),X.description&&(l.title=X.description),X.level==0)var p=C+X.getMidbranchPosition(f)*I;else var p=h;x.draw(new M.PhyloCanvas.Render.Text((s||Ce)+5,p,X.name,{attr:l}))}if(X.children&&X.children.length)for(var m=0;m<X.children.length;m++){var b=X.children[m];_e.push(ye(b,Ce))}for(var L=[],m=0;m<_e.length;m++)_e[m][0]&&L.push(_e[m][0]),_e[m][1]&&L.push(_e[m][1]);for(var R=Math.min.apply(null,L),V=Math.max.apply(null,L),G=(R+V)/2,K="",ie="",de="",ge=0,m=0;m<X.children.length;++m){var we=X.children[m];if(m==0)K=we.red,ie=we.green,de=we.blue;else if(K==we.red&&ie==we.green&&de==we.blue)ge=1;else{ge=0;break}}ge==0?M.PhyloCanvas.Render.Style.line.stroke="black":(t=X.children[0].red,n=X.children[0].green,i=X.children[0].blue,M.PhyloCanvas.Render.Style.line.stroke=["rgb(",t,",",n,",",i,")"].join("")),X.children.length==2?(t=X.children[0].red,n=X.children[0].green,i=X.children[0].blue,M.PhyloCanvas.Render.Style.line.stroke=["rgb(",t,",",n,",",i,")"].join(""),x.draw(new M.PhyloCanvas.Render.Path(["M",Ce+1e-4,R,"L",Ce,R,"L",Ce,G],{attr:M.PhyloCanvas.Render.Style.line})),t=X.children[1].red,n=X.children[1].green,i=X.children[1].blue,M.PhyloCanvas.Render.Style.line.stroke=["rgb(",t,",",n,",",i,")"].join(""),x.draw(new M.PhyloCanvas.Render.Path(["M",Ce,G,"L",Ce,V,"L",Ce+1e-4,V],{attr:M.PhyloCanvas.Render.Style.line}))):x.draw(new M.PhyloCanvas.Render.Path(["M",Ce+1e-4,R,"L",Ce,R,"L",Ce,V,"L",Ce+1e-4,V],{attr:M.PhyloCanvas.Render.Style.line}))}else{if(ee=Ce,s=M.Common.roundFloat(Ce+v*X.len,2),o=C,h=C,t=X.red,n=X.green,i=X.blue,X.y=C,$.push(X),x.draw(new M.PhyloCanvas.Render.Line(ee,s,o,h,t,n,i)),u.alignRight&&x.draw(new M.PhyloCanvas.Render.Path(["M",s,o,"L",u.alignPadding+z,h],{attr:M.PhyloCanvas.Render.Style.connectedDash})),X.name){var l={};X.style&&(l=M.PhyloCanvas.Render.Style.getStyle(X.style,"text")),X.font_color_hex?l.fill=X.font_color_hex:l.fill="#000000",l["text-anchor"]="start",X.uri&&(l.href=X.uri),X.description&&(l.title=X.description);var ve=x.draw(new M.PhyloCanvas.Render.Text(u.alignRight?z+u.bufferInnerLabels+u.alignPadding:s+u.bufferInnerLabels,h,X.name,{attr:l}));N=Math.max(ve[1],N),M.PhyloCanvas.Render.Parameters.mouseRollOver&&M.Common.addRaphEventHandler(ve[0],"mouseover",M.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:x,node:X,x:s,y:h,textEl:ve[0]}),M.PhyloCanvas.Render.Parameters.mouseRollOut&&M.Common.addRaphEventHandler(ve[0],"mouseout",M.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:x,node:X,x:s,y:h,textEl:ve[0]}),M.PhyloCanvas.Render.Parameters.onClickAction&&M.Common.addRaphEventHandler(ve[0],"click",M.PhyloCanvas.Render.Parameters.onClickAction,{svg:x,node:X,x:s,y:h,textEl:ve[0]})}f&&(f=!1)}return[o,h]},be=function(){y=C+I,D=0,O=u.showScaleBar*v,x.draw(new M.PhyloCanvas.Render.Line(D,O,y,y)),x.draw(new M.PhyloCanvas.Render.Text((D+O)/2,y-8,u.showScaleBar))},pe=function(X,Ce,_e){for(var ee=(_e&&_e.bufferInner?_e.bufferInner:0)|M.PhyloCanvas.Render.Parameters.binaryChartBufferInner,s=(_e&&_e.bufferSiblings?_e.bufferSiblings*I:0)|(M.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?I*M.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:M.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),o=(_e&&_e.thickness?_e.thickness:0)|M.PhyloCanvas.Render.Parameters.binaryChartThickness,h,t=0;t<$.length;t++){var n=$[t];x.draw(new M.PhyloCanvas.Render.Path(me(X+ee,n.y-I/2+s/2,X+ee+o,n.y+I/2-s/2),{attr:M.PhyloCanvas.Render.Style.getStyle(n.chart[Ce],"textSecantBg")}))}return X+ee+o},Se=function(X,Ce,_e){for(var ee=[],s,o=_e&&_e.bufferInner?_e.bufferInner:0|M.PhyloCanvas.Render.Parameters.barChartBufferInner,h=_e&&_e.height?_e.height:0|M.PhyloCanvas.Render.Parameters.barChartHeight,t=_e&&_e.width?_e.width<1?I*_e.width:_e.width:0|(M.PhyloCanvas.Render.Parameters.barChartWidth<1?I*M.PhyloCanvas.Render.Parameters.barChartWidth:M.PhyloCanvas.Render.Parameters.barChartWidth),n=0,i=0;i<$.length;i++)ee.push($[i].chart[Ce]);s=Math.max.apply(null,ee),n=M.Common.roundFloat(h/s,4);for(var i=0;i<$.length;i++){var l=$[i];x.draw(new M.PhyloCanvas.Render.Path(me(X+o,l.y-t/2,X+o+n*l.chart[Ce],l.y+t/2),{attr:M.PhyloCanvas.Render.Style.getStyle(l.chart[Ce],"barChart")}))}return X+o+h};return function(X,Ce){this.getCanvasSize=function(){return[k,P]},this.getRoot=function(){return Ce.getRoot()},Ce.getValidate()&&x.draw(0,0,Ce.getValidate()),f=!0,x=X;var _e=Ce.getRoot(),ee=Ce.getNewickLen();if(k=x.canvasSize[0],P=x.canvasSize[1],se=u.bufferX,he=u.paddingX,ue=u.paddingY,d=u.minHeightBetweenLeaves,C=ue,v=Math.round((k-se-he*2)/ee),I=Math.round((P-ue*2)/(u.showScaleBar?_e.getCountAllChildren():_e.getCountAllChildren()-1)),I<d&&(I=d),z=Math.round(k-se-he*2),(M.PhyloCanvas.Render.Parameters.binaryCharts.length||M.PhyloCanvas.Render.Parameters.barCharts.length)&&(u.alignRight=!0),ye(_e,he),u.showScaleBar&&be(),H=z+N+u.bufferInnerLabels,M.PhyloCanvas.Render.Parameters.binaryCharts.length){var s=M.PhyloCanvas.Render.Parameters.binaryCharts;for(var o in s)H=pe(H,s[o].chart,s[o])}if(M.PhyloCanvas.Render.Parameters.barCharts.length){var h=M.PhyloCanvas.Render.Parameters.barCharts;for(var o in h)q=Se(H,h[o].chart,h[o])}$=[],typeof bgLabelsHold!="undefined"&&(bgLabelsHold=[])}}();M.PhyloCanvas.Render.Phylogram.prototype={};M.PhyloCanvas.Render.CircularPhylogram=function(){var x,u=M.PhyloCanvas.Render.Parameters.Circular,k,P,v,I,z,d,f,C=!0,N=0,H,B,q,D=[],O=[],W,te,U,j=0,se,he=Math.PI/180;function ue(ee,s){return s+=se,[M.Common.roundFloat(H+ee*Math.sin(s*he),4),M.Common.roundFloat(B+ee*Math.cos(s*he),4)]}function $(ee){var s=ye(90-ee-se);if(s>90&&s<270){s+=180;var o="end"}else var o="start";return[s,o]}function T(ee,s,o,h){var t=ue(ee,s),n=ue(ee,o),i=[],l,p=0;return Math.abs(ye(o-s))>180?l=1:l=-1,h&&h.invertSecant&&(l*=-1,p=1),h&&h.noMove||i.push("M"),i.push(t[0],t[1],"A",ee,ee,0,l<1?0:1,p,n[0],n[1]),i}function me(ee,s,o,h){var t=[],n=ue(s,ee),i=ue(o,ee);return h&&h.noMove||t.push("M"),t.push(n[0],n[1],"L",i[0],i[1]),t}function ye(ee){for(;ee>360||ee<0;)ee>360?ee-=360:ee<0&&(ee+=360);return ee}function be(ee,s,o,h){if(!s&&ee.length>1)var h=ee[3],o=ee[2],s=ee[1],ee=ee[0];var t=Se("M",T(ee,o,h,{noMove:1,invertSecant:0}),"L",T(s,h,o,{noMove:1,invertSecant:1}),"Z");return t}function pe(ee,s){if(s=s,ee.len&&(C?N=te||1:ee.children.length==0&&(N=M.Common.roundFloat(N+z,4))),ee.children.length>0){var o=[],h,t,n,i;if(h=s,t=s+=M.Common.roundFloat(I*ee.len,4),ee.name,ee.children&&ee.children.length)for(var l=0;l<ee.children.length;l++){var p=ee.children[l],m=pe(p,s);m>0&&o.push(m)}var b=M.Common.roundFloat(Math.min.apply(null,o),4),L=M.Common.roundFloat(Math.max.apply(null,o),4);ee.level!=0&&x.draw(new M.PhyloCanvas.Render.Path(Se("M",ue(s+.01,b),"L",T(s,b,L,{noMove:!0}),"L",ue(s+.01,L)))),ee.len&&(n=M.Common.roundFloat(b+(L-b)/2,4),x.draw(new M.PhyloCanvas.Render.Path(me(n,h,t))))}else if(ee.y=N,D.push(ee),h=s,t=s=M.Common.roundFloat(s+I*ee.len),n=N,x.draw(new M.PhyloCanvas.Render.Path(me(n,h,t))),x.draw(new M.PhyloCanvas.Render.Path(me(n,t,q),{attr:M.PhyloCanvas.Render.Style.connectedDash})),ee.name){var R=ue(q+u.bufferInnerLabels,n),V=$(n),G=V[0],K=V[1],ie={};ee.style&&M.Common.apply(ie,M.PhyloCanvas.Render.Style.getStyle(ee.style,"text")),ee.font_color_hex?ie.fill=ee.font_color_hex:ie.fill="#000000",ie["text-anchor"]=K,ee.uri&&(ie.href=ee.uri),ee.description&&(ie.title=ee.description);var de=x.draw(new M.PhyloCanvas.Render.Text(R[0],R[1],ee.name,{attr:ie,rotate:[G,R[0],R[1]]}));ee.bgStyle&&O.push([ee.bgStyle,n]);var R=ue(t,n);M.PhyloCanvas.Render.Parameters.mouseRollOver&&M.Common.addRaphEventHandler(de[0],"mouseover",M.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:x,node:ee,x:R[0],y:R[1],textEl:de[0]}),M.PhyloCanvas.Render.Parameters.mouseRollOut&&M.Common.addRaphEventHandler(de[0],"mouseout",M.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:x,node:ee,x:R[0],y:R[1],textEl:de[0]}),M.PhyloCanvas.Render.Parameters.onClickAction&&M.Common.addRaphEventHandler(de[0],"click",M.PhyloCanvas.Render.Parameters.onClickAction,{svg:x,node:ee,x:R[0],y:R[1],textEl:de[0]}),j=Math.max(de[1],j)}return C&&(C=!1),n}function Se(ee){for(var s=ee,o=1;o<arguments.length;o++)s=s.concat(arguments[o]);return s}function X(){var ee=[];if(O.length>0){if(M.PhyloCanvas.Render.Style.jsphylosvgGradientList)for(var s=0;s<M.PhyloCanvas.Render.Style.jsphylosvgGradientList.length;s++){var o=M.PhyloCanvas.Render.Style.jsphylosvgGradientList[s],h=M.Common.createGradientEl(o,M.PhyloCanvas.Render.Style[o],[H,B,q+j+u.bufferOuterLabels]);x.svg.defs.appendChild(h)}for(var s=0;s<O.length;s++){if(s!=O.length-1&&O[s][0]==O[s+1][0]){O[s+1][2]=O[s][2]?O[s][2]:O[s][1];continue}var ee=be(q,q+j+u.bufferOuterLabels,O[s][2]?O[s][2]-z/2:O[s][1]-z/2,O[s][1]+z/2),t=M.PhyloCanvas.Render.Style.getStyle(O[s][0],"textSecantBg"),n=x.draw(new M.PhyloCanvas.Render.Path(ee,{attr:t.type?{}:t}));t.type&&t.type=="radialGradient"&&n[0].node.setAttribute("fill","url(#"+t.name+")"),t.type&&t.type=="radialGradient"&&n[0].node.setAttribute("stroke","none"),n[0].toBack()}}var ee=be(q,q+j+u.bufferOuterLabels,(te||1)-z/2,360-z/2),n=x.draw(new M.PhyloCanvas.Render.Path(ee,{attr:M.PhyloCanvas.Render.Style.textSecantBg}));return n[0].toBack(),q+j+u.bufferOuterLabels}function Ce(ee,s,o){for(var h=o&&o.bufferInner?parseFloat(o.bufferInner):M.PhyloCanvas.Render.Parameters.binaryChartBufferInner,t=(o&&o.bufferSiblings?o.bufferSiblings*z:0)|(M.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?z*M.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:M.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),n=o&&o.thickness?parseFloat(o.thickness):M.PhyloCanvas.Render.Parameters.binaryChartThickness,i=(o&&o.disjointed?o.disjointed:!1)|M.PhyloCanvas.Render.Parameters.binaryChartDisjointed,l=o&&o.isInternal?o.isInternal:!1,p=!0,m,b=0;b<D.length;b++){var L=D[b];if((!D[b+1]||L.chart[s]!==D[b+1].chart[s]||i)&&L.chart[s]!="none"){var R=M.PhyloCanvas.Render.Style.getStyle(L.chart[s],"textSecantBg");if(l)var V=[q-h-n,q-h,(m||L.y)-z/2+(p&&!i?0:t/2),L.y+z/2-(b==D.length-1&&!i?0:t/2)];else var V=[ee+h,ee+h+n,(m||L.y)-z/2+(p&&!i?0:t/2),L.y+z/2-(b==D.length-1&&!i?0:t/2)];if(R.label){var G=M.PhyloCanvas.Render.Style.getStyle(R.labelStyle,"text"),K=ue((V[0]+V[1])/2,(V[2]+V[3])/2),ie=$((V[2]+V[3])/2),de=ye(ie[0]+(G.rotate?parseFloat(G.rotate):0)),ge=ye(90-(V[2]+V[3])/2-se);ge>90&&ge<270&&(de+=180),G["text-anchor"]||(G["text-anchor"]="middle"),L.font_color_hex?R.fill=L.font_color_hex:R.fill="#000000";var we=x.draw(new M.PhyloCanvas.Render.Text(K[0],K[1],R.label,{attr:G,rotate:de}));we[0].toBack()}if(R.borderStyle){var ve=M.PhyloCanvas.Render.Style.getStyle(R.borderStyle,"textSecantBg"),Ae=[q,ve.fullsize?V[1]:V[0],V[2],V[3]],ke=x.draw(new M.PhyloCanvas.Render.Path(be(Ae),{attr:ve}));ke[0].toBack()}var Le=x.draw(new M.PhyloCanvas.Render.Path(be(V),{attr:R}));Le[0].toBack(),m=0,p=!1}else m||(m=L.y),L.chart[s]=="none"&&(m=0);p=!1}return l?ee:ee+h+n}function _e(ee,s,o){for(var h=[],t,n=o&&o.bufferInner?parseFloat(o.bufferInner):M.PhyloCanvas.Render.Parameters.barChartBufferInner,i=o&&o.height?parseFloat(o.height):M.PhyloCanvas.Render.Parameters.barChartHeight?M.PhyloCanvas.Render.Parameters.barChartHeight:0,l=o&&o.width?parseFloat(o.width)<1?z*parseFloat(o.width):parseFloat(o.width):0|(M.PhyloCanvas.Render.Parameters.barChartWidth<1?z*M.PhyloCanvas.Render.Parameters.barChartWidth:M.PhyloCanvas.Render.Parameters.barChartWidth),p=0,m=0;m<D.length;m++)h.push(D[m].chart[s]);t=Math.max.apply(null,h),p=M.Common.roundFloat(i/t,4);for(var m=0;m<D.length;m++){var b=D[m];b.chart[s]>0&&x.draw(new M.PhyloCanvas.Render.Path(be(ee+n,ee+n+p*b.chart[s],b.y-l/2,b.y+l/2),{attr:M.PhyloCanvas.Render.Style.getStyle(b.chart[s],"barChart")}))}return ee+n+i}return function(ee,s,o){if(this.getCanvasSize=function(){return[k,P]},this.getRoot=function(){return s.getRoot()},s.getValidate()){ee.draw({type:"text",x:0,y:ee.canvasSize[1]/3,text:s.getValidate()});return}x=ee;var h=s.getRoot(),t=s.getNewickLen();if(k=x.canvasSize[0],P=x.canvasSize[1],H=k/2,B=P/2,v=Math.min.apply(null,[k,P]),o=u.bufferRadius>1?u.bufferRadius:M.Common.roundFloat(v*u.bufferRadius,4),te=u.bufferAngle,f=u.innerCircleRadius,d=u.minHeightBetweenLeaves,se=u.initStartAngle,q=Math.round((v-o-f)/2),I=(q-f)/t,z=M.Common.roundFloat((360-te)/h.getCountAllChildren(),4),pe(h,f),U=q+j+u.bufferOuterLabels,M.PhyloCanvas.Render.Parameters.integratedBinaryCharts.length){var n=M.PhyloCanvas.Render.Parameters.integratedBinaryCharts;for(var i in n){var l=n[i].bufferInner?n[i].bufferInner:M.PhyloCanvas.Render.Parameters.binaryChartBufferInner,p=n[i].thickness?n[i].thickness:M.PhyloCanvas.Render.Parameters.binaryChartThickness;U=Ce(U-p-l,n[i].chart,n[i])}}if(U=X(),M.PhyloCanvas.Render.Parameters.binaryCharts.length){var m=M.PhyloCanvas.Render.Parameters.binaryCharts;for(var i in m)U=Ce(U,m[i].chart,m[i])}if(M.PhyloCanvas.Render.Parameters.barCharts.length){var b=M.PhyloCanvas.Render.Parameters.barCharts;for(var i in b)U=_e(U,b[i].chart,b[i])}D=[],O=[]}}();M.PhyloCanvas.Render.CircularPhylogram.prototype={};var xt=function(){var x=function(P){if(!!P&&typeof P=="object"){let v=function(){};return v.prototype=P,new v}},u=function(P){var v="";!!P&&typeof P=="string"&&(v=P);var I=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return I.test(v)},k={xmlToJSON:function(P){try{let f=function(q){return q.replace(/^\s+|\s+$/gm,"")},C=function(q){var D=/-/g,O=String(q).replace(D,"_");return O},N=function(q,D){if(D.attributes.length>0){var O=D.attributes.length-1,W;q._attributes=[];do W=String(C(D.attributes[O].name)),q._attributes.push(W),q[W]=f(D.attributes[O].value);while(O--)}},H=function(q){q.getNodeByAttribute=function(D,O){if(this.length>0){var W,te=this.length-1;try{do if(W=this[te],W[D]==O)return W;while(te--)}catch(U){return!1}return!1}},q.contains=function(D,O){if(this.length>0){var W=this.length-1;try{do if(this[W][D]==O)return!0;while(W--)}catch(te){return!1}return!1}},q.indexOf=function(D,O){var W=-1;if(this.length>0){var te=this.length-1;try{do this[te][D]==O&&(W=te);while(te--)}catch(U){return-1}return W}},q.SortByAttribute=function(D,O){if(this.length){let W=function(U,j){var se=U[j];return se=u(se)?parseFloat(se):se,se},te=function(U,j){var se=0,he,ue;return he=W(U,D),ue=W(j,D),he<ue?se=-1:ue<he&&(se=1),O&&(se=O.toUpperCase()=="DESC"?0-se:se),se};this.sort(te)}},q.SortByValue=function(D){if(this.length){let O=function(te){var U=te.Text;return U=u(U)?parseFloat(U):U,U},W=function(te,U){var j=0,se,he;return se=O(te),he=O(U),se<he?j=-1:he<se&&(j=1),D&&(j=D.toUpperCase()=="DESC"?0-j:j),j};this.sort(W)}},q.SortByNode=function(D,O){if(this.length){let W=function(U,j){var se=U[j][0].Text;return se=u(se)?parseFloat(se):se,se},te=function(U,j){var se=0,he,ue;return he=W(U,D),ue=W(j,D),he<ue?se=-1:ue<he&&(se=1),O&&(se=O.toUpperCase()=="DESC"?0-se:se),se};this.sort(te)}}},B=function(q,D){var O,W,te,U="";if(!D)return null;if(D.attributes.length>0&&N(q,D),q.Text="",D.hasChildNodes()){var j=D.childNodes.length-1,se=0;do switch(W=D.childNodes[se],W.nodeType){case 1:q._children=[],O=W.localName?W.localName:W.baseName,O=C(O),U!=O&&q._children.push(O),q[O]||(q[O]=[]),te={},q[O].push(te),W.attributes.length>0&&N(te,W),q[O].contains||H(q[O]),U=O,W.hasChildNodes()&&B(te,W);break;case 3:q.Text+=f(W.nodeValue);break;case 4:q.Text+=W.text?f(W.text):f(W.nodeValue);break}while(se++<j)}};if(!P)return null;var v={};v.typeOf="JSXBObject";var I=P.nodeType==9?P.documentElement:P;if(v.RootName=I.nodeName||"",P.nodeType==3||P.nodeType==4)return P.nodeValue;var z=function(){var q={activate:function(){var D=[];return D&&(D.getNodesByAttribute=function(O,W){if(!!D&&D.length>0){var te=[],U,j=D.length-1;try{do U=D[j],U[O]===W&&te.push(U);while(j--);return te.reverse(),te}catch(se){return null}return null}},D.getNodeByAttribute=function(O,W){if(!!D&&D.length>0){var te,U=D.length-1;try{do if(te=D[U],te[O]===W)return te;while(U--)}catch(j){return null}return null}},D.getNodesByValue=function(O){if(!!D&&D.length>0){var W=[],te,U=D.length-1;try{do te=D[U],!!te.Text&&te.Text===O&&W.push(te);while(U--);return W}catch(j){return null}return null}},D.contains=function(O,W){if(!!D&&D.length>0){var te=D.length-1;try{do if(D[te][O]===W)return!0;while(te--)}catch(U){return!1}return!1}},D.indexOf=function(O,W){var te=-1;if(!!D&&D.length>0){var U=D.length-1;try{do D[U][O]===W&&(te=U);while(U--)}catch(j){return-1}return te}},D.SortByAttribute=function(O,W){if(!!D&&D.length>0){let te=function(j,se){var he=j[se];return he=bam.validation.isNumeric(he)?parseFloat(he):he,he},U=function(j,se){var he,ue;he=te(j,O),ue=te(se,O);var $=he<ue?-1:ue<he?1:0;return W&&($=W.toUpperCase()==="DESC"?0-$:$),$};D.sort(U)}},D.SortByValue=function(O){if(!!D&&D.length>0){let W=function(U){var j=U.Text;return j=bam.validation.isNumeric(j)?parseFloat(j):j,j},te=function(U,j){var se,he;se=W(U),he=W(j);var ue=se<he?-1:he<se?1:0;return O&&(ue=O.toUpperCase()==="DESC"?0-ue:ue),ue};D.sort(te)}},D.SortByNode=function(O,W){if(!!D&&D.length>0){let te=function(j,se){var he=j[se][0].Text;return he=bam.validation.isNumeric(he)?parseFloat(he):he,he},U=function(j,se){var he,ue;he=te(j,O),ue=te(se,O);var $=he<ue?-1:ue<he?1:0;return W&&($=W.toUpperCase()==="DESC"?0-$:$),$};D.sort(U)}}),D}};return q}(),d=function(){var q=x(z);return q.activate()};return B(v,I),P=null,I=null,v}catch(f){return null}},textToXML:function(P){var v=null;try{v=document.all?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser,v.async=!1}catch(z){throw new Error("XML Parser could not be instantiated")}var I;try{document.all?I=v.loadXML(P)?v:!1:I=v.parseFromString(P,"text/xml")}catch(z){throw new Error("Error parsing XML string")}return I}};return k}();import{showSaveFilePicker as Kt}from"https://cdn.jsdelivr.net/npm/native-file-system-adapter/mod.js";var w1=function(){let x=[{name:"valapalagilaka",search:"с╣Щ",replace:()=>"r"},{name:"short e",search:"с║╜",replace:()=>"e"},{name:"short o",search:"├╡",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б e",search:"├к",replace:()=>"e"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б o",search:"├┤",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б ai",search:"├К",replace:()=>"E"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б au",search:"├Ф",replace:()=>"O"},{name:"candrabindu",search:"m╠Р",replace:()=>"M"},{name:"oс╣Гk─Бras",search:"oс╣Б",replace:()=>"oM"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"(?:kK|gG|cC|jJ|wW|qQ|tT|dD|pP|bB)",replace:z=>z[0].slice(-1)},{name:"geminated m after h",search:"(?:Mhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rfi]|p[aA])tt|tt(?=[rvy]\\S)",replace:z=>`${z[1]}t`},{name:"geminated consonants after r",search:"([rf]\\s*)([kgcjwqdpbRnmyvl])\\2{1,2}",replace:z=>`${z[1]}${z[2]}`},{name:"final nasal variants",search:"(?:M[lSs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnNYR](?=[pPbBmdDtTnwWqQcCjJkKgG])",replace:()=>"M"},{name:"final anusv─Бra variants",search:"M?[mN](?!\\S)|n(?=\\s+[tdn])|Y(?=\\s+[jc])",replace:()=>"M"},{name:"visarga aс╕е before voiced consonants",search:"(?<!\\sB)(?:a[Hr]|[o])(?=\\s+['gGjJqQdDnbBmrylvh])",replace:()=>"aH"},{name:"visarga aс╕е before vowels",search:"aH(?=\\s+[AiIeuUof])",replace:()=>"a"},{name:"visarga aс╕е before unvoiced consonants and space + anusv─Бra",search:"o\\s+(?=[kKcCwWtTpPszSM])",replace:()=>"aH a"},{name:"visarga ─Бс╕е variants",search:"AH(?=\\s+[aAiIeEuUogGjJqQdDbBnmyrlvh])",replace:()=>"A"},{name:"other visarga variants",search:"H?[rszS](?!\\S)",replace:()=>"H"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"z(?=[kK])|s(?=s)",replace:()=>"H"},{name:"final au/─Бv",search:"Av(?!\\S)",replace:()=>"O"},{name:"final su",search:"(?<=[sz])v(?=\\s+[aAiIuUoOeE])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aAuUoOeE])",replace:()=>"y"},{name:"kcch/k┼Ы",search:"k(\\s*)(?:S|c?C)",replace:z=>`k${z[1]}S`},{name:"c┼Ы/t┼Ы",search:"[tc](\\s*)S",replace:z=>`c${z[1]}C`},{name:"cch/ch",search:"([aAiIuUeEoO])C",replace:z=>`${z[1]}cC`},{name:"final t + hi",search:"d(\\s+)D(?=[iy](?:\\s|$))",replace:z=>`t${z[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aAiIeEuUoOgGdDbByrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:z=>`${z[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aAuUeEoO])",replace:()=>"i"},{name:"bhd for bdh",search:"Bd",replace:()=>"bD"}],u=[{name:"valapalagilaka",search:"с╣Щ",replace:()=>"r"},{name:"short e",search:"с║╜",replace:()=>"e"},{name:"short o",search:"├╡",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б e",search:"├к",replace:()=>"e"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б o",search:"├┤",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б ai",search:"a├о",replace:()=>"ai"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б au",search:"a├╗",replace:()=>"au"},{name:"candrabindu",search:"m╠Р",replace:()=>"с╣Г"},{name:"oс╣Гk─Бras",search:"oс╣Б",replace:()=>"oс╣Г"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"([kgcjс╣нс╕Нtdpb]){2}h",replace:z=>`${z[1]}h`},{name:"geminated m after h",search:"(?:с╣Гhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rс╣Ыi]|p[a─Б])tt|tt(?=[rvy]\\S)",replace:z=>`${z[1]}t`},{name:"geminated consonants after r",search:"([rс╣Ы]\\s*)([kgcjс╣нс╕Нс╣Зtdnpbmyvl])\\2{1,2}",replace:z=>`${z[1]}${z[2]}`},{name:"final nasal variants",search:"(?:с╣Г[lс╣гs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnс╣Е├▒с╣З](?=[pbmdtnс╣нс╕Нcjkg])",replace:()=>"с╣Г"},{name:"final anusv─Бra variants",search:"с╣Г?[mс╣Е](?!\\S)|n(?=\\s+[tdn])|├▒(?=\\s+[jc])",replace:()=>"с╣Г"},{name:"visarga aс╕е before voiced consonants",search:"(?:a[с╕еr]|[o])(?=\\s+['gjс╕Нdnbmyrlvh])",replace:()=>"aс╕е"},{name:"visarga aс╕е before vowels",search:"aс╕е(?=\\s+[─Бi─лeu┼лoс╣Ы])",replace:()=>"a"},{name:"visarga aс╕е before unvoiced consonants and space + anusv─Бra",search:"o\\s+(?=[kcс╣нtp┼Ыс╣гsс╣Г])",replace:()=>"aс╕е a"},{name:"visarga ─Бс╕е variants",search:"─Бс╕е(?=\\s+[a─Бi─лeu┼лogjс╕Нdnbmyrlvh])",replace:()=>"─Б"},{name:"other visarga variants",search:"с╕е?[r┼Ыс╣гs](?!\\S)",replace:()=>"с╕е"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"с╣г(?=k)|s(?=s)",replace:()=>"s"},{name:"final au/─Бv",search:"─Бv(?!\\S)",replace:()=>"au"},{name:"final su",search:"(?<=[sс╣г])v(?=\\s+[a─Бi─лu┼лoe])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[a─Бu┼лeo])",replace:()=>"y"},{name:"kcch/k┼Ы",search:"k(\\s*)(?:┼Ы|c?ch)",replace:z=>`k${z[1]}┼Ы`},{name:"c┼Ы/t┼Ы",search:"[tc](\\s*)┼Ы",replace:z=>`c${z[1]}ch`},{name:"cch/ch",search:"([a─Бi─лu┼лeo])ch",replace:z=>`${z[1]}cch`},{name:"final t + hi",search:"d(\\s+)dh(?=[iy](?:\\s|$))",replace:z=>`t${z[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[a─Бi─лeu┼лogdbyrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:z=>`${z[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[a─Бu┼лeo])",replace:()=>"i"},{name:"bhd for bdh",search:"bhd",replace:()=>"bdh"}],k={none:{name:"remove spaces",search:"\\s",replace:()=>""},collapse:{name:"collapse spaces",search:"\\s+",replace:()=>" "}},P=function(z,d){let f=d.join(""),C=[],N=[...f.matchAll(z.search)],H=0,B=null;for(let q of d){let D=H+q.length,O=q,W=0;if(B)if(B.length<=q.length)O=v(q,0,B.length,B.text),W=B.text.length-B.length,B=null;else{O=B.text.slice(0,q.length);let U=B.text.slice(q.length);B={length:B.length-q.length,text:U};continue}for(;N.length>0&&N[0].index<D;){let te=N.shift(),U=te.index-H+W,j=z.replace(te);if(te.index+te[0].length<D)O=v(O,U,te[0].length,j),W=W+j.length-te[0].length;else{let se=q.length-U+W,he=j.slice(0,se);O=O.slice(0,U)+he;let ue=j.slice(se);B={length:te[0].length-se,text:ue}}}C.push(O),H=D}return C},v=function(z,d,f,C){return z.slice(0,d)+C+z.slice(d+f)};return function(z){let d=z.map(f=>De.t(f,"iast","slp1"));for(let f of[...x,k.none])d=P(f,d);return d.map(f=>De.t(f,"slp1","iast"))}}();var Bt={smush:function(x,u){return x.toLowerCase().replace(/([с╕Нdrmvynhs]) ([a─Бi─лu┼лс╣Ыeo├й├│])/g,"$1$2"+u).replace(/([kgcjс╣нс╕Нtdpb]) h/g,"$1тАМ"+u+"h").replace(/([kgcj├▒с╕Нtdnpbmrlyv┼Ыс╣гsс╣Щ]) ([kgcjс╣нс╕Нtdnpbmyrlv┼Ыс╣гshс╕╗])/g,"$1"+u+"$2").replace(/([o├│e├й─Б]) ([с╣Г'])/g,"$1"+u+"$2").replace(/^с╣Г/,"'тАНс╣Г").replace(/^с╕е/,"'тАНс╕е").replace(/^_y/,"'тАНy").replace(/├╝/g,"тАМu").replace(/├п/g,"тАМi").replace(/_{1,2}(?=\s*)/g,function(k){if(k==="__")return"тАН";if(k==="_")return"тАМ"})},iast:function(x,u){let k=u||"devanagari";return De.t(x,k,"iast",{skip_sgml:!0})},devanagari:function(x,u){let k=u||"",P={skip_sgml:!0},v=x.replace(/с╣Щ/g,"r").replace(/^_─Б/,"рд╜тАНрд╛"),I=Bt.smush(v,k);return De.t(I,"iast","devanagari",P).replace(/┬п/g,"ъг╗")},malayalam:function(x,u){let k=u||"",P={skip_sgml:!0},v={р┤Х:"р╡┐",р┤д:"р╡╜",р┤и:"р╡╗",р┤о:"р╡Ф",р┤░:"р╡╝"},I=x.replace(/^_─Б/,"р┤╜тАНр┤╛"),z=Bt.smush(I,k).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"r").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return De.t(z,"iast","malayalam",P).replace(/(^|[^р╡Н])р┤░р╡Н(?=\S)/g,"$1р╡О").replace(/([р┤Хр┤др┤ир┤ор┤░])р╡Н(?![^\s\u200C,тАФтАЩтАХ])/g,function(f,C){return v[C]})},grantha:function(x,u){let k=u||"",P={skip_sgml:!0},v=new Map([["р┤╕","юЗУ"],["р┤░","р╡╝"],["р┤п","юЗЛ"],["р┤Ъ","юЖ╢"],["р┤ж","юЗВ"],["р┤╢","юЗТ"]]),I=new RegExp("(["+[...v.keys()].join("")+"])р╡Н(?![^тАМ ,тАФтАЩтАХ])","g"),z=x.replace(/^_─Б/,"р┤╜тАНр┤╛"),d=Bt.smush(z,k).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"r").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return De.t(d,"iast","malayalam",P).replace(/(^|[^р╡Н])р┤░р╡Н(?=\S)/g,"$1р╡О").replace(I,(C,N)=>v.get(N)).replace(/р┤Хр╡Нр┤╖р┤┐/g,"роХрпНро╖ро┐")},telugu:function(x,u){var k=u||"";let P={skip_sgml:!0},v=x.replace(/^_─Б/,"р░╜тАНр░╛"),I=Bt.smush(v,k).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"rтАН").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return De.t(I,"iast","telugu",P)}},Ot=function(x,u,k=!1,P="sa"){let v=Bt[u],I=x.cloneNode(!0),z=function(d,f){let C=d.childNodes;for(let N of C)if(N.nodeType!==8){if(N.nodeType===3){if(f!=="sa")continue;N.data=v(N.data,k)}else if(N.hasChildNodes()){let H=N.getAttribute("lang")||f;H==="sa"&&N.classList.contains("subst")&&K1(N,u),z(N,H)}}};return z(I,P),I},C1=function(x,u=!1){if(x.nodeType===3)return x;let k=document.createTreeWalker(x,NodeFilter.SHOW_TEXT,null,!1);if(u){let P;for(;k.nextNode();)P=k.currentNode;return P}else return k.nextNode},K1=function(x,u){if(x.firstChild.nodeType!==3&&x.lastChild.nodeType!==3)return;let k=x.childNodes,P=/^[a─Бi─лu┼лeoс╣Ыс╣Эс╕╖с╣Гс╕е]/,v=/[kgс╣Еcj├▒с╣нс╕Нс╣Зtdnpbmyrlvс╣г┼Ыsh]$/,I=["─Б","i","─л","e","o","_","ai","au"],z=["h","k","┼Ы","y","g","gh","c","ch","jh","с╣нh","с╕Н","с╕Нh","t","th","d","dh","n","p","ph","bh","m","r","с╕╗","v","с╣г","s"];var d=!1,f=[],C=[];let N=k[0].nodeType===3;for(let H of k){if(H.nodeType>3)continue;let B=H.textContent.trim();if(B!==""){if(B==="a"){H.textContent="";continue}if(B.match(v)){let q=C1(H,!0);q.textContent=q.textContent.replace(/\s+$/,"")+"a",u==="telugu"&&z.indexOf(B)>=0&&f.push(H)}if(H===x.lastChild&&H.nodeType===3){let q=document.createElement("span");q.appendChild(H.cloneNode(!1)),x.replaceChild(q,H),H=q,H.classList.add("aalt")}else N&&B.match(P)&&H.classList.add("aalt");switch(u){case"devanagari":(B==="i"||B==="├й")&&C.unshift(H);break;case"grantha":case"malayalam":if(B==="e"||B==="ai")C.unshift(H);else if(B==="o"){let q=H.cloneNode(!0);_1("o","e",q),C.unshift(q),_1("o","─Б",H)}break;case"telugu":!d&&I.indexOf(B)>=0&&(d=!0);break}}}for(let H of C)x.insertBefore(H,x.firstChild);if(d)for(let H of f){let B=C1(H,!0);B.textContent=B.textContent+"тАНр▒Н"}},_1=function(x,u,k){let P=document.createTreeWalker(k,NodeFilter.SHOW_TEXT,null,!1);for(;P.nextNode();)P.currentNode.textContent.match(x)&&(P.currentNode.textContent=u)};"use strict";var Z1=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,115,116,114,105,112,45,115,112,97,99,101,32,101,108,101,109,101,110,116,115,61,34,42,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,47,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,97,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,45,45,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,33,45,45,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,45,45,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),k1=Z1;"use strict";var en=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,32,32,32,32,60,120,115,108,58,111,117,116,112,117,116,32,105,110,100,101,110,116,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,72,101,97,100,101,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,120,101,110,111,68,97,116,97,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),S1=en;"use strict";var tn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,97,98,108,101,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,114,101,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,100,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,115,101,108,101,99,116,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,104,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,99,111,112,101,34,62,114,111,119,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,114,97,103,103,97,98,108,101,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,100,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,97,114,101,110,116,58,58,120,58,99,108,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,39,49,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,115,116,97,114,116,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,101,110,100,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,105,110,116,101,114,110,97,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,105,110,115,105,103,110,105,102,105,99,97,110,116,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,105,110,115,105,103,110,105,102,105,99,97,110,116,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,98,105,110,97,114,121,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,98,105,110,97,114,121,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),A1=tn;"use strict";var nn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,116,114,101,101,45,118,101,114,115,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,108,97,110,103,34,62,101,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,91,118,101,114,115,101,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,93,60,47,120,115,108,58,116,101,120,116,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),P1=nn;"use strict";var rn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,101,109,101,110,100,101,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,110,111,116,40,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,105,110,118,105,115,105,98,108,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,48,48,65,48,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,55,51,59,60,47,120,115,108,58,116,101,120,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,99,108,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,114,111,117,112,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),E1=rn;"use strict";var sn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),R1=sn;var bt=function(x){let k=new DOMParser().parseFromString(x,"text/xml"),P=new XSLTProcessor;return P.importStylesheet(k),P},L1=function(x,u){this.transformString=function(k,P){let v=x.xml.createElementNS(u.teins,"ab");return v.innerHTML=k,P.transformToFragment(v,document)},this.sheets={csv:bt(k1),xml:bt(S1),matrix:bt(A1),lemma:bt(E1),lg:bt(R1),tree:bt(P1)}};var B1=function(x){this.basename=function(){return x.filename.split(/\.[^.]+$/)[0]},this.range=function(u,k){return Array.from(Array(parseInt(k)-parseInt(u)+1).keys(),P=>P+u)},this.maxlemma=function(){return[...this.firsttext().querySelectorAll("w[n]")].length-1},this.lemmata=function(u,k){let P=k||document.querySelector("#views");return u===!1?P.querySelectorAll(".lemma"):P.querySelectorAll(`.lemma[data-n="${u}"]`)},this.tds=function(u,k){let P=k||x.matrix.boxdiv;return u===!1?P.querySelectorAll("td[data-n]"):P.querySelectorAll(`td[data-n="${u}"]`)},this.firsttd=function(u,k){return(k||x.matrix.boxdiv).querySelector(`td[data-n="${u}"]`)},this.tr=function(u){return x.matrix.boxdiv.querySelector(`tr[data-n="${u}"]`)},this.trs=function(u){return(u||x.matrix.boxdiv).querySelectorAll("tr[data-n]")},this.firsttr=function(u){return(u||x.matrix.boxdiv).querySelector("tr[data-n]")},this.lasttr=function(u){return(u||x.matrix.boxdiv).querySelector("tr[data-n]:last-of-type")},this.trWalker=function(u){return document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT,{acceptNode:function(k){if(k.tagName==="TD")return NodeFilter.FILTER_ACCEPT}},!1)},this.textWalker=function(u){return document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT,{acceptNode:function(k){if(k.tagName.toLowerCase()==="w")return NodeFilter.FILTER_ACCEPT}},!1)},this.tei=function(u,k=x.xml){return k.querySelector(`TEI[n="${u}"]`)},this.teis=function(u=x.xml){return u.querySelectorAll("TEI")},this.texts=function(u){return(u||x.xml).querySelectorAll("text")},this.serializedtexts=function(u,k){let P=[...u.querySelectorAll("otu[label]")].map(I=>I.getAttribute("label")),v=[...this.teis()].filter(I=>P.indexOf(I.getAttribute("n"))!==-1);return new Map(v.map(I=>[u.querySelector(`node[label="${I.getAttribute("n")}"]`).getAttribute("id"),[...I.querySelectorAll("w")].map(z=>k&&z.hasAttribute("lemma")?z.getAttribute("lemma"):z.textContent)]))},this.serializedlevels=function(u){return u.map(k=>{if(k instanceof Map){let P=new Map;for(let[v,I]of k)P.set(v.getAttribute("id"),I.map(z=>z.getAttribute("id")));return P}else return k.map(P=>P.getAttribute("id"))})},this.firsttext=function(u){return u?x.xml.querySelector(`[n="${u}"] text`):x.xml.querySelector("text")},this.words=function(u,k){let P=k||x.xml;return u===!1?P.querySelectorAll("w[n]"):P.querySelectorAll(`w[n="${u}"]`)},this.firstword=function(u,k){return(k||x.xml).querySelector(`w[n="${u}"]`)},this.normal=function(u){return(u||document.getElementById("views")).querySelectorAll(".lemma[data-normal], .tree-lemma[data-normal]")},this.htmlreading=function(u,k){return k&&u.dataset.normal?u.dataset.normal:u.IAST.textContent},this.ths=function(){return x.matrix.boxdiv.querySelectorAll("th[data-ref]")},this.firstth=function(u){return x.matrix.boxdiv.querySelector(`th[data-ref="${u}"]`)},this.checkbox=function(u,k){return x.matrix.boxdiv.querySelector(`th[data-ref="${u}"] input.${k}`)},this.highlit=function(){let k=this.firsttr().querySelectorAll(".highlit"),P=new Set;for(let v of k)P.add(v.dataset.n);return P},this.highlitcell=function(){return x.matrix.boxdiv.querySelector("td.highlitcell")},this.highlitrow=function(){let u=this.highlitcell();return u?u.closest("tr"):!1},this.lowhigh=function(u){let k=[...u].sort((I,z)=>parseInt(I)-parseInt(z)),P=parseInt(k[0]),v=k.length>1?parseInt(k[k.length-1]):void 0;return[P,v]},this.readings=function(u,k){let P=k||x.matrix.boxdiv,v=this.tds(u,P);var I=0;let z=new Set;for(let d of v){let f=d.textContent;f!==""&&(I++,z.add(f))}return[I,z.size]},this.attr=function(u,k){let P=this.firsttr();var v=[];for(let I of k)this.firsttd(I,P).dataset[u]==="true"?v.push([I,!0]):v.push([I,!1]);return new Map(v)},this.whichattr=function(u){return u.hasAttribute("n")?"n":u.hasAttribute("data-n")?"data-n":u.hasAttribute("data-ref")?"data-ref":!1},this.clauses=function(u,k=!1){let P=this.firsttext();var v=!1;let I=new Set;for(let z of u){let f=this.firstword(z,P).closest("cl");f?I.add(f):k&&(v=!0)}if(I.size===0)return!1;{let z=[...I].map(d=>{let f=d.querySelectorAll("w");return new Set([...f].map(C=>C.getAttribute("n")))});return v?[null].concat(z):z}},this.clausesToRemove=function(u,k,P=0){let v=new Set;for(let I of u){let z=new Set(I);for(let d of k)z.delete(d);z.size<=P&&v.add(I)}return[...v]},this.empty=function(){let u=new Set,k=[...this.trs()],P=k.map(z=>this.trWalker(z)),v=k[0].querySelector("td:last-of-type").dataset.n;for(let z=0;z<=v;z++){var I=!0;for(let d of P){let f=d.nextNode();I&&f.textContent!==""&&(I=!1)}I&&u.add(z)}return u},this.prevNonempty=function(u,k){for(let P=u;P>=0;P--)if(k[P].textContent!=="")return P;return!1},this.nextNonempty=function(u,k){for(let P=u;P<k.length;P++)if(k[P].textContent!=="")return P;return!1},this.setIntersection=function(...u){let k=u[0];return new Set([...k].filter(P=>{for(let v=1;v<u.length;v++)if(!u[v].has(P))return!1;return!0}))},this.setUnion=function(...u){return new Set(u.reduce((k,P)=>(k=[...k,...P],k),[]))},this.cursorPos=function(u){let k=window.getSelection().getRangeAt(0),P=k.cloneRange();P.selectNodeContents(u);let v=P.toString().length;return P.setEnd(k.endContainer,k.endOffset),[P.toString().length,v]},this.selection=function(){let u=window.getSelection();if(u.isCollapsed)return!1;let k=u.rangeCount>1?u.getRangeAt(1).cloneContents():u.getRangeAt(0).cloneContents();if(!k)return!1;let P=new Set,v=k.querySelectorAll(".lemma");for(let I of v)P.add(I.dataset.n);return P}};var N1=function(){var x,u,k,P;let v={setIntersection:function(...f){let C=f[0];return new Set([...C].filter(N=>{for(let H=1;H<f.length;H++)if(!f[H].has(N))return!1;return!0}))},setUnion:function(...f){return new Set(f.reduce((C,N)=>(C=[...C,...N],C),[]))}},I=function(f,C){let N=new Map;for(let H of u[0]){let B=x.get(H),q=B?[B[f]]:[];N.set(H,new Set(q))}for(let H=1;H<u.length;H++)for(let[B,q]of u[H]){let D=q.map(te=>N.get(te)),O=v.setIntersection(...D);if(B===C&&O.size===1)return[...O][0];let W=O.size>0?O:v.setUnion(...D);N.set(B,W)}return N},z=function(f,C){let N=u[0],H=new Map;for(let B of u[u.length-1])H.set(B[0],f.get(B[0]));for(let B=u.length-1;B>1;B--)for(let[q,D]of u[B]){let O=H.get(q);for(let W of D){if(N.indexOf(W)!==-1)continue;let te=f.get(W),U=v.setIntersection(O,te),j=U.size>0?U:te;if(W===C)return j;H.set(W,j)}}return H.get(C)},d=function(f,C){let N=I(C,f);return typeof N=="string"?N:function(B){if(B.size===1)return[...B][0].trim();let q=[...B].map(D=>D.trim()===""?"_":D);return q.length===1?q[0]:"{"+q.join(", ")+"}"}(z(N,f))};onmessage=function(f){x=f.data.readings,u=f.data.levels,k=f.data.num,P=f.data.id,postMessage({n:k,result:d(P,k)})}};function Ht(x){var u=[],k=0;if(this.trie=this.createTrie(x.patterns),this.leftMin=x.leftmin,this.rightMin=x.rightmin,this.exceptions={},x.exceptions)for(u=x.exceptions.split(/,\s?/g);k<u.length;k+=1)this.exceptions[u[k].replace(/\u2027/g,"").toLowerCase()]=new RegExp("("+u[k].split("тАз").join(")(")+")","i")}Ht.prototype.createTrie=function(x){var u=0,k=0,P=0,v=0,I=null,z=null,d=null,f=null,C={_points:[]},N;for(u in x)if(x.hasOwnProperty(u))for(N=x[u].match(new RegExp(".{1,"+ +u+"}","g")),k=0;k<N.length;k+=1){for(I=N[k].replace(/[0-9]/g,"").split(""),z=N[k].split(/\D/),f=C,P=0;P<I.length;P+=1)d=I[P].charCodeAt(0),f[d]||(f[d]={}),f=f[d];for(f._points=[],v=0;v<z.length;v+=1)f._points[v]=z[v]||0}return C};Ht.prototype.hyphenateText=function(x,u){u=u||4;for(var k=x.split(/([a-zA-Z0-9_\u0027\u00AD\u00DF-\u00EA\u00EB\u00EC-\u00EF\u00F1-\u00F6\u00F8-\u00FD\u0101\u0103\u0105\u0107\u0109\u010D\u010F\u0111\u0113\u0117\u0119\u011B\u011D\u011F\u0123\u0125\u012B\u012F\u0131\u0135\u0137\u013C\u013E\u0142\u0144\u0146\u0148\u0151\u0153\u0155\u0159\u015B\u015D\u015F\u0161\u0165\u016B\u016D\u016F\u0171\u0173\u017A\u017C\u017E\u017F\u0219\u021B\u02BC\u0390\u03AC-\u03CE\u03F2\u0401\u0410-\u044F\u0451\u0454\u0456\u0457\u045E\u0491\u0531-\u0556\u0561-\u0587\u0902\u0903\u0905-\u090B\u090E-\u0910\u0912\u0914-\u0928\u092A-\u0939\u093E-\u0943\u0946-\u0948\u094A-\u094D\u0982\u0983\u0985-\u098B\u098F\u0990\u0994-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BE-\u09C3\u09C7\u09C8\u09CB-\u09CD\u09D7\u0A02\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A14-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A82\u0A83\u0A85-\u0A8B\u0A8F\u0A90\u0A94-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABE-\u0AC3\u0AC7\u0AC8\u0ACB-\u0ACD\u0B02\u0B03\u0B05-\u0B0B\u0B0F\u0B10\u0B14-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3E-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B57\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C02\u0C03\u0C05-\u0C0B\u0C0E-\u0C10\u0C12\u0C14-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C43\u0C46-\u0C48\u0C4A-\u0C4D\u0C82\u0C83\u0C85-\u0C8B\u0C8E-\u0C90\u0C92\u0C94-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBE-\u0CC3\u0CC6-\u0CC8\u0CCA-\u0CCD\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D7A-\u0D7F\u1F00-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB2-\u1FB4\u1FB6\u1FB7\u1FBD\u1FBF\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD2\u1FD3\u1FD6\u1FD7\u1FE2-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u200D\u2019]+)/gi),P=0;P<k.length;P+=1)k[P].indexOf("/")!==-1?P!==0&&P!==k.length-1&&!/\s+\/|\/\s+/.test(k[P])&&(k[P]+="тАЛ"):k[P].length>u&&(k[P]=this.hyphenate(k[P]).join("┬н"));return k.join("")};Ht.prototype.hyphenate=function(x){var u,k=[],P,v,I,z,d,f=[],C,N=x.toLowerCase(),H,B,q=Math.max,D=this.trie,O=[""];if(this.exceptions.hasOwnProperty(N))return x.match(this.exceptions[N]).slice(1);if(x.indexOf("┬н")!==-1)return[x];for(x="_"+x+"_",u=x.toLowerCase().split(""),P=x.split(""),C=u.length,v=0;v<C;v+=1)f[v]=0,k[v]=u[v].charCodeAt(0);for(v=0;v<C;v+=1)for(d=D,I=v;I<C&&(d=d[k[I]],d);I+=1)if(H=d._points,H)for(z=0,B=H.length;z<B;z+=1)f[v+z]=q(f[v+z],H[z]);for(v=1;v<C-1;v+=1)v>this.leftMin&&v<C-this.rightMin&&f[v]%2?O.push(P[v]):O[O.length-1]+=P[v];return O};var on=Ht,T1=on;var M1={id:"sa",leftmin:2,rightmin:2,patterns:{2:"a1e1i1o1u1├й1├н1├п1├│1├║1├╝1─Б1─л1┼л1с╕╖1с╕╣1с╣Ы1с╣Э1",3:"2b_2c_2d_2g_2h_2j_2k_2l_2m_2n_2p_2r_2s_2t_2v_2y_2├▒_2┼Ы_2с╕Н_2с╕е12с╕л12с╕╖_2с╣Б12с╣Г12с╣Е_2с╣З_2с╣н_2с║Ц1l╠е1r╠е1",4:"2bh_2ch_2dh_2gh_2jh_2kh_2m╠Р12ph_2rb_2rd_2rg_2rk_2rp_2rt_2rс╕Н_2rс╣н_2th_2с╕Нh_2с╣нh_a2i1a2u1a3├п1a3├╝1l╠е╠Д1r╠е╠Д1"}};window.comboView=function(){let x={teins:"http://www.tei-c.org/ns/1.0",scripts:["iast","devanagari","telugu","grantha","malayalam"]},u={filename:null,xml:null,treelist:new Map,trees:[],textboxes:[],matrix:null,viewdiv:null,descs:null,maxlemma:null,windows:[window],dragged:null,undo:[],redo:[],editing:!1},k=new T1(M1),P=new L1(u,x),v=new B1(u),I=function(){let s=document.getElementById("tooltip");s&&s.remove()},z=function(){let s=document.getElementById("left_menu");s.innerHTML=`<div id="matrixmenu" class="menubox">
    <div class="heading">Matrix</div>
      <ul>
        <li>select CSV/XML file(s): <input type="file" id="file" name="file" accept=".xml,.csv" multiple/></li>
      </ul>
</div>
<div style="display: none" id="mssmenu" class="menubox">
    <div class="heading">Texts</div>
    <ul class="ms">
    </ul>
</div>
<div style="display: none" id="treemenu" class="menubox">
    <div class="heading">Trees</div>
        <ul class="tree">
            <li>select NeXML file: <input type="file" id="treefile" name="treefile" accept=".xml"/></li>
        </ul>
    </div>
`;let o=document.getElementById("menu");o.addEventListener("mouseover",$.menuMouseover),o.addEventListener("mouseout",$.menuMouseout),o.addEventListener("click",$.menuClick),o.querySelector("#file").addEventListener("change",q.bind(null,D),!1),o.querySelector("#treefile").addEventListener("change",q.bind(null,O),!1)},d={matrix:function(){return u.matrix=new ee,u.matrix.init(),u.matrix.show(),document.getElementById("matrixmenu").style.display="none",f(),B.rehighlight(),u.matrix},text:function(s){let o=new _e(s);return u.textboxes.push(o),o.init(),o.show(),f(),B.rehighlight(),document.querySelector(".highlit")||$.textClick({target:o.boxdiv.querySelector(".lemma:not(.invisible)")}),o},tree:function(s,o){let h=new Ce(s,o);return u.trees.push(h),h.init(),h.show(),f(),B.rehighlight(),h}},f=function(){for(let s of u.trees)s.draw()},C=function(){let s=window.getSelection?window.getSelection():document.selection;s&&(s.removeAllRanges?s.removeAllRanges():s.empty&&s.empty())},N=function(s){let o=document.createTreeWalker(s,NodeFilter.SHOW_TEXT);for(;o.nextNode();){let h=H(o.currentNode.nodeValue);o.currentNode.nodeValue=h}},H=function(s){return k.hyphenateText(s.replace(/ \|/g,"┬а|").replace(/\| (?=\d)/g,"|┬а").replace(/\|\|/g,"рее").replace(/\|/g,"ред"))},B={getAllWindows:function(){return window.mainWindow?window.mainWindow.comboView.getWindows():u.windows},forEachWindow:function(s){let o=B.getAllWindows();for(let h of o)if(!h.closed&&s(h)===!1)break},highlightLemma:function(s,o){var h=!!o;B.forEachWindow(t=>{let n=t.comboView.getViewdiv().querySelectorAll('[data-n="'+s+'"]');for(let l of n)(!h||!l.classList.contains("invisible"))&&l.classList.add("highlit");let i=t.comboView.getViewdiv().querySelectorAll('[data-n-trans="'+s+'"]');for(let l of i)l.classList.add("translit")})},highlightRange:function(s){if(!s||s.size===0)return;B.unHighlightAll();let[o,h]=v.lowhigh(s);if(h!==void 0)for(let t=o;t<=h;t++)B.highlightLemma(t,!0);else B.highlightLemma(o);B.repopulateTrees(o,h);for(let t of u.viewdiv.querySelectorAll(".text-box"))t.querySelector(".highlit")||t.querySelector('[data-n="'+o+'"]').classList.add("highlit");me.xScroll(o)},highlightAll:function(){ye.anyhighlit()?B.unHighlightAll():B.highlightRange(new Set([0,v.maxlemma()]))},unHighlightAll:function(){B.forEachWindow(s=>{let o=s.comboView.getViewdiv().querySelectorAll(".highlit");for(let t of o)t.classList.remove("highlit");let h=s.comboView.getViewdiv().querySelectorAll(".translit");for(let t of h)t.classList.remove("translit");B.unCelllightAll()})},unCelllightAll:function(){B.forEachWindow(s=>{let o=s.comboView.getViewdiv().querySelectorAll(".highlitcell");for(let h of o)h.classList.remove("highlitcell")})},rehighlight:function(){var s;if(B.forEachWindow(h=>{if(s=h.document.querySelectorAll(".highlit"),s.length>0)return!1}),s.length>0){var o=new Set;for(let h of s)o.add(h.dataset.n);B.highlightRange(o)}},clearTrees:function(){B.forEachWindow(s=>{let o=s.comboView.getTrees();for(let h of o)h.clearlemmata()})},repopulateTrees:function(s,o){B.forEachWindow(h=>{let t=h.comboView.getTrees();for(let n of t)n.populate(s,o),n.colourizeVariants(s,o),n.updatescript()})},highlightTreeLemma:function(s){B.forEachWindow(o=>{let h=o.comboView.getTrees();for(let t of h){let n=t.boxdiv.querySelector('.tree-lemma[data-id="'+s+'"]'),i=t.boxdiv.querySelectorAll(".tree-lemma");for(let l of i)(n.dataset.nodes&&l.dataset.nodes===n.dataset.nodes||!n.dataset.nodes&&l.dataset.id===n.dataset.id)&&l.classList.add("highlit");t.clearLabels()}})},unhighlightTrees:function(){B.forEachWindow(s=>{let o=s.comboView.getViewdiv().querySelectorAll(".tree-lemma.highlit");for(let t of o)t.classList.remove("highlit");let h=s.comboView.getTrees();for(let t of h)t.clearLabels()})}},q=function(s,o){let h=o.target.files[0],t=[...o.target.files].slice(1),n=new FileReader;n.onload=s.bind(null,h,t),n.readAsText(h)},D=function(s,o,h){u.filename=s.name,document.title=document.title+`: ${u.filename}`,u.filename.split(".").pop()==="csv"?te(s,o,h):U(s,o,h)},O=function(s,o,h){let t=h.target.result,i=new DOMParser().parseFromString(t,"text/xml"),l=u.xml.querySelector("teiHeader > xenoData")||function(){let m=u.xml.querySelector("teiHeader")||function(){let L=u.xml.createElementNS(x.teins,"teiHeader");return u.xml.documentElement.appendChild(L),L}(),b=u.xml.createElementNS(x.teins,"xenoData");return m.appendChild(b),b}(),p=u.xml.createElementNS(x.teins,"stemma");p.setAttribute("format","nexml"),p.id="stemma"+[...l.querySelectorAll("stemma")].length,p.appendChild(i.firstChild.cloneNode(!0)),l.appendChild(p),W(i,p.id)},W=function(s,o,h=!0){let t=s.querySelectorAll("tree"),n=document.querySelector("#treemenu ul");for(let i of t){let l=i.id,p=s.cloneNode(!0);for(let L of p.querySelectorAll("tree"))L.id!==l&&L.parentNode.removeChild(L);let m=i.getAttribute("label")||"New Tree "+u.treelist.size;u.treelist.set(`#${o} #${l}`,p);let b=document.createElement("li");b.dataset.name=m,b.dataset.treeid=l,b.dataset.stemmaid=o,b.appendChild(document.createTextNode(m)),n.insertBefore(b,n.lastElementChild),h&&d.tree(o,l)}},te=function(s,o,h){let t=Qt.parse(h.target.result,{delimiter:","});u.xml=document.implementation.createDocument(x.teins,"",null);let n=u.xml.createElementNS(x.teins,"teiCorpus"),i=u.xml.createElementNS(x.teins,"teiHeader");n.appendChild(i),u.xml.appendChild(n);for(let l of t){let p=l[0],m=l.slice(1),b=u.xml.createElementNS(x.teins,"TEI");b.setAttribute("n",p);let L=u.xml.createElementNS(x.teins,"text");for(let R=0;R<m.length;R++){let V=m[R],G=u.xml.createElementNS(x.teins,"w");V&&G.appendChild(document.createTextNode(V)),G.setAttribute("n",R),L.appendChild(G)}b.appendChild(L),n.appendChild(b)}u.xml.normalize(),u.maxlemma=v.maxlemma(),he()},U=function(s,o,h){let t=new DOMParser;u.xml=t.parseFromString(h.target.result,"text/xml");let n=u.xml.querySelectorAll("teiHeader xenoData stemma nexml");for(let i of n){let l=document.implementation.createDocument("http://www.nexml.org/2009","",null);l.appendChild(i.cloneNode(!0)),W(l,i.closest("stemma").id,!1)}u.maxlemma=v.maxlemma(),o.length>0?j(o):he()},j=function(s){let o=s[0],h=s.slice(1),t=function(l,p){let m=new Set(l);for(let b of p)m.delete(b);return m},n=function(l,p){let b=new DOMParser().parseFromString(p.target.result,"text/xml"),L=new Map;for(let ve of v.teis()){let Ae=ve.getAttribute("n");L.set(Ae,ve)}let R=new Set(L.keys()),V=new Map;for(let ve of b.querySelectorAll("TEI")){let Ae=ve.getAttribute("n");V.set(Ae,ve)}let G=new Set(V.keys()),K=t(R,G),ie=t(G,R);for(let ve of ie)be.tei(ve);let de=[...b.querySelector("text").querySelectorAll("w[n]")].length,ge=u.maxlemma+de;for(let[ve,Ae]of V)if(L.has(ve)){let ke=L.get(ve).querySelector("text"),Ne=Ae.querySelector("text").querySelectorAll("w[n]");var we=u.maxlemma+1;for(let Me of Ne)Me.setAttribute("n",we),ke.appendChild(Me),we=we+1}else{let ke=u.xml.createElementNS(x.teins,"TEI");ke.setAttribute("n",ve);let Le=u.xml.createElementNS(x.teins,"text");be.emptywords(Le,ge,0),ke.appendChild(Le),u.xml.documentElement.appendChild(ke)}for(let ve of K){let Ae=L.get(ve).querySelector("text");be.emptywords(Ae,ge,u.maxlemma+1)}u.maxlemma=v.maxlemma(),l.length>0?j(l):he()},i=new FileReader;i.onload=n.bind(null,h),i.readAsText(o)},se=function(){var s="";let o=[...v.teis()].map(h=>h.getAttribute("n"));for(let h of o)s+=`<li data-name="${h}">${h}</li>`;document.getElementById("menu").querySelector(".ms").innerHTML=s},he=function(){se();let s=new Se("Export");s.populate([{text:"TEI corpus",func:ue.showOptions.bind(null,ue.xml,ue.options)},{text:"TEI apparatus",func:ue.showOptions.bind(null,ue.xml,ue.appOptions)},{text:"CSV",func:ue.showOptions.bind(null,ue.csv,ue.options)},{text:"NEXUS",func:ue.showOptions.bind(null,ue.nexus,ue.options)}]);let o=new Se("Edit");o.populate([{text:"Undo",greyout:ye.undo,func:T.undo},{text:"Redo",greyout:ye.redo,func:T.redo},{text:"Select all",alt:"Deselect all",toggle:ye.anyhighlit,func:B.highlightAll},{text:"(Re)normalize columns",greyout:ye.anyhighlit,func:T.startRenormalize.bind(null,!1)},{text:"Delete column",greyout:ye.anyhighlit,func:T.startRemoveCol.bind(null,!1)},{text:"Delete empty columns",func:T.startRemoveEmpty},{text:"Merge columns",greyout:ye.manyhighlit,func:T.startMerge.bind(null,!1)},{text:"Group columns",alt:"Ungroup columns",greyout:ye.oneGrouped,toggle:ye.grouped,func:T.startGroup.bind(null,!1)},{text:"Group words",func:T.doGroupWords},{text:"Edit cell",greyout:ye.highlitcell,func:T.startEditCell.bind(null,!1)},{text:"Insert row",func:T.startNewRow},{text:"Insert column",greyout:ye.anyhighlit,func:T.startInsertCol},{text:"Mark insignificant",checkbox:ye.checkbox.bind(null,"insignificant",!1),greyout:ye.anyhighlit,func:T.startMarkAs.bind(null,"insignificant",!1)},{text:"Mark binary",checkbox:ye.checkbox.bind(null,"binary",!1),greyout:ye.anyhighlit,func:T.startMarkAs.bind(null,"binary",!1)}]);let h=new Se("View");h.populate([{text:"Header",checkbox:ye.headerView,func:me.toggleHeader},{text:"Normalized",checkbox:ye.normalizedView,greyout:ye.anyNormalized,func:me.toggleNormalize}]);let t=document.getElementById("left_menu");t.appendChild(h.box),t.appendChild(o.box),t.appendChild(s.box);let n=document.getElementById("views");n.style.justifyContent="flex-start",n.removeChild(n.querySelector("#splash")),d.matrix();let i=document.getElementById("matrixmenu");i.addEventListener("click",d.matrix),i.removeChild(i.querySelector("ul")),document.getElementById("mssmenu").style.display="block",document.getElementById("treemenu").style.display="block"},ue={write:async function(s,o){let h=await o.createWritable();h.write(s),h.close()},xml:async function(s){let o=new XMLSerializer().serializeToString(P.sheets.xml.transformToDocument(s)),h=new Blob([o],{type:"text/xml;charset=utf-8"}),t=v.basename()+".xml",n=await Kt({_preferPolyfill:!1,suggestedName:t,types:[{description:"TEI XML",accept:{"text/xml":[".xml"]}}]});ue.write(h,n)},csv:async function(s){let o=P.sheets.csv.transformToDocument(s).documentElement.textContent,h=new Blob([o],{type:"text/csv;charset=utf-8"}),t=v.basename()+".csv",n=await Kt({_preferPolyfill:!1,suggestedName:t,types:[{description:"CSV file",accept:{"text/csv":[".csv"]}}]});ue.write(h,n)},nexus:async function(s){let o=[...v.texts(s)],h=o.length,t="0 1 2 3 4 5 6 7 8 9 A B C D E F G H K L M N P Q R S T U V W X Y Z a b c d e f g h k l m n p q r s t u v w x y z",[n,...i]=t.split(" "),l="-",p=o.map(we=>"'"+we.parentElement.getAttribute("n")+"'"),m=o.map(we=>v.textWalker(we)),b=o[0].querySelectorAll("w").length,L=[],R=p.map(we=>[we+" "]);for(let we=0;we<b;we++){let ve=new Set,Ae=[];for(let Le=0;Le<m.length;Le++){let Me=m[Le].nextNode(),Be=De.t(Me.textContent.trim().toLowerCase(),"iast","hk").replace(/'/g,"()");Ae.push(Be),Be!==""&&Be!=="[]"&&ve.add(Be)}L.push(["[]",...ve]);let ke=new Map([...ve].map((Le,Ne)=>[Le,i[Ne]]));for(let Le=0;Le<Ae.length;Le++){let Ne=(Me=>{switch(Ae[Me]){case"":return l;case"[]":return n;default:return ke.get(Ae[Me])}})(Le);R[Le].push(Ne)}}let V=L.map((we,ve)=>ve+1+" / "+[...we].map(Ae=>`'${Ae}'`).join(" ")).join(`,
`),G=R.map(we=>we.join("")).map(we=>we.replace(/0{8,}/g,ve=>ve.replace(/0/g,"-"))).reduce((we,ve)=>we+`
`+ve),K=`#NEXUS

BEGIN TAXA;
  DIMENSIONS NTAX=${h};
  TAXLABELS ${p.join(" ")};
END;

BEGIN CHARACTERS;
  DIMENSIONS
    NCHAR=${b};
  FORMAT 
    DATATYPE=STANDARD 
    RESPECTCASE 
    GAP=${l} 
    MISSING=? 
    SYMBOLS="${t}";
  CHARSTATELABELS
${V}
;
MATRIX
${G}
;
END;
`,ie=new Blob([K],{type:"text/nexus;charset=iso8859-1"}),de=v.basename()+".nex",ge=await Kt({_preferPolyfill:!1,suggestedName:de,types:[{description:"NEXUS file",accept:{"text/nexus":[".nex"]}}]});ue.write(ie,ge)},processOptions:function(s){let o=u.xml.cloneNode(!0);if(s.get("option_normalize")){let h=o.querySelectorAll("w[lemma]");for(let t of h)t.textContent=t.getAttribute("lemma")}if(s.get("option_mergegroups")){let h=o.querySelectorAll("cl");for(let t of h){let n=t.removeChild(t.firstChild);for(;t.firstChild;){let i=n.getAttribute("lemma")||n.textContent,l=t.firstChild.getAttribute("lemma")||t.firstChild.textContent;for(n.setAttribute("lemma",i+l);t.firstChild.firstChild;)n.appendChild(t.firstChild.firstChild);t.firstChild.remove()}n.getAttribute("lemma")===n.textContent&&n.removeAttribute("lemma"),t.parentNode.insertBefore(n,t),t.parentNode.removeChild(t)}}if(s.get("option_insignificant")){let h=o.querySelectorAll('w[insignificant="true"]');for(let t of h)t.parentNode.removeChild(t)}if(s.get("option_binary")){let t=[...v.firsttext().querySelectorAll('w[binary="true"]')].map(n=>n.getAttribute("n"));for(let n of t){let i=o.querySelectorAll(`w[n="${n}"]:not(:empty)`);if(i.length===0)continue;let l=`[${i[0].textContent}]`;for(let p of i)p.textContent=l}}if(s.get("option_noempty")){let h=o.querySelectorAll("w:empty");for(let t of h)t.textContent="[]"}return s.get("option_basetext")?ue.makeApp(s,o):o},makeHeader(s,o){let h=s.createElementNS(x.teins,"teiHeader"),t=s.createElementNS(x.teins,"fileDesc"),n=s.createElementNS(x.teins,"sourceDesc"),i=s.createElementNS(x.teins,"listWit");for(let l of v.teis(o)){let p=l.getAttribute("n"),m=s.createElementNS(x.teins,"witness");m.setAttribute("xml:id",p);let b=s.createElementNS(x.teins,"idno");b.setAttribute("type","siglum"),b.append(p),m.appendChild(b),i.appendChild(m)}return n.appendChild(i),t.appendChild(n),h.appendChild(t),h},makeApp(s,o){let h=s.get("option_basetext"),t=v.tei(h,o),n=s.get("option_app_normalize"),i=document.implementation.createDocument(x.teins,"",null);i.appendChild(t);let l=ue.makeHeader(i,o);t.insertBefore(l,t.firstChild);let p=v.words(!1,t);for(let m of p){let b=m.getAttribute("n"),L=n&&m.getAttribute("lemma")||m.textContent,R=[],V=new Map,G=v.words(b,o);for(let K of G){let ie=K.closest("TEI").getAttribute("n");if(n&&K.getAttribute("lemma")===L)R.push(ie);else if(K.textContent===L)R.push(ie);else{let de=K.textContent===""?"[om.]":K.textContent,ge=V.get(de)||[];ge.push(ie),V.set(de,ge)}}if(V.size===0)for(;m.firstChild;)m.parentElement.insertBefore(m.firstChild,m);else{let K=i.createElementNS(x.teins,"app");K.setAttribute("n",b);let ie=i.createElementNS(x.teins,"lem"),de=R.map(ge=>`#${ge}`).join(" ");for(de!==""&&ie.setAttribute("wit",de);m.firstChild;)ie.appendChild(m.firstChild);K.appendChild(ie);for(let[ge,we]of V){let ve=i.createElementNS(x.teins,"rdg"),Ae=we.map(ke=>`#${ke}`).join(" ");ve.setAttribute("wit",Ae),ve.append(ge),K.appendChild(ve)}m.parentElement.insertBefore(K,m),ie.textContent.match(/\s$/)&&m.parentElement.insertBefore(i.createTextNode(" "),m)}m.remove()}return i},options(){return document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <input type="checkbox" id="option_insignificant" name="option_insignificant"><label for="option_insignificant">Remove insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_binary" name="option_binary"><label for="option_binary">Binarize marked lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_noempty" name="option_noempty"><label for="option_noempty">Gaps are significant</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups"><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`)},appOptions(){let s=document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <label for="option__basetext">Base text</label>
        <select id="option__basetext" name="option_basetext"></select>
      </div>
      <div>
        <input type="checkbox" id="option__app_insignificant" name="option_app_insignificant"><label for="option_app_insignificant">Ignore insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups" checked><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_app_normalize" name="option_app_normalize" checked><label for="option_app_normalize">Normalized spellings in positive apparatus</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings in negative apparatus</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`),o=s.getElementById("option__basetext"),h=[...v.trs()].map(t=>t.dataset.n);for(let t of h){let n=document.createElement("option");n.value=t,n.append(t),o.appendChild(n)}return s},showOptions:function(s,o){let h=o(),t=document.createElement("div");t.id="blackout",t.appendChild(h),document.body.appendChild(t);let n=function(l){l.preventDefault();var p=[];let m=document.getElementById("exportform").elements;for(let L of m)L.type==="checkbox"?p.push([L.name,L.checked]):p.push([L.name,L.value]);let b=ue.processOptions(new Map(p));s(b),document.body.removeChild(t)};return t.querySelector("button").addEventListener("click",n),t.addEventListener("click",ue.blackoutClick),t},blackoutClick:function(s){if(!s.target.closest(".popup")){let h=document.querySelector("#blackout");h.parentNode.removeChild(h)}}},$={selectAll(s){let o=document.createRange();o.selectNodeContents(s);let h=window.getSelection();h.removeAllRanges(),h.addRange(o)},deselect(){let s=window.getSelection();s.removeAllRanges?s.removeAllRanges():s.empty&&s.empty()},treeMouseover(s){let o=s.target.classList.contains("tree-lemma")?s.target:s.target.closest(".tree-lemma");o&&(B.highlightTreeLemma(o.dataset.id),o.addEventListener("mouseout",B.unhighlightTrees));let h=s.target.dataset.reconstructed;if(!h)return;let t=document.createElement("div");t.id="tooltip",t.style.top=s.pageY+"px",t.style.left=s.pageX+"px",t.style.opacity=0,t.style.transition="opacity 0.2s ease-in",u.viewdiv.parentElement.appendChild(t);let n=document.createElement("div");if(n.appendChild(document.createTextNode(h)),this.script!==0?t.appendChild(Ot(n,x.scripts[this.script])):t.appendChild(n),s.target.classList.contains("reconstructed")){let i=s.target.parentNode.querySelector("span.tree-lemma");if(i&&i.dataset.hasOwnProperty("emended")){let l=document.createElement("div");l.classList.add("emphasis"),l.appendChild(document.createTextNode(i.textContent)),this.script!==0?t.prepend(Ot(l,x.scripts[this.script])):t.prepend(l)}}window.getComputedStyle(t).opacity,t.style.opacity=1,s.target.addEventListener("mouseout",I)},treeClick(s){s.target.classList.contains("witness")?d.text(s.target.dataset.key):s.target.classList.contains("reconstructed")?d.text(s.target.dataset.label):s.target.classList.contains("internal")&&T.startReconstruction(s),I()},keyDown(s){if(!u.editing&&s.key.substring(0,5)==="Arrow")$.cycleVariant(s);else if(s.ctrlKey||s.metaKey)s.key==="Z"?T.redo():s.key==="z"&&T.undo();else if(!u.editing&&u.matrix&&!u.matrix.closed&s.key==="Enter"){let o=v.highlitcell();o&&(s.preventDefault(),T.startEditCell(o))}},cycleVariant(s){let o=v.highlitcell()||u.viewdiv.querySelector("td.highlit")||u.viewdiv.querySelector('td[data-n="0"]');switch(s.key){case"ArrowRight":{if(!u.matrix.closed&&o){let h=o.nextElementSibling;h&&$.textClick({target:h})}else{let h=u.viewdiv.querySelector(".highlit"),t=h?h.dataset.n:0,n=parseInt(t)+1;for(;n<=u.maxlemma;){let i=u.viewdiv.querySelectorAll('[data-n="'+n+'"]');for(let l of i)if(l&&!l.classList.contains("invisible")){$.textClick({target:l});return}n++}}break}case"ArrowLeft":{if(!u.matrix.closed&&o){let h=o.previousElementSibling;h&&$.textClick({target:h})}else{let h=u.viewdiv.querySelector(".highlit"),t=h?h.dataset.n:0,n=parseInt(t)-1;for(;n>=0;){let i=u.viewdiv.querySelectorAll('[data-n="'+n+'"]');for(let l of i)if(l&&!l.classList.contains("invisible")){$.textClick({target:l});return}if(n--,o){$.textClick({target:o.previousElementSibling});return}}}break}case"ArrowUp":{if(u.matrix.closed||!o)return;let t=o.closest("tr").previousElementSibling;if(!t||!t.dataset.n)return;let n=t.querySelector(`td[data-n="${o.dataset.n}"]`);$.textClick({target:n});break}case"ArrowDown":{if(u.matrix.closed||!o)return;let t=o.closest("tr").nextElementSibling;if(!t||t.tagName!=="TR")return;let n=t.querySelector(`td[data-n="${o.dataset.n}"]`);$.textClick({target:n})}}},textClick(s,o=!1){if(s.target.closest("tr.header")){$.matrixHeaderClick(s);return}let h=s.target.classList.contains("lemma")?s.target:s.target.closest(".lemma");if(h){if(!o&&s.ctrlKey){$.rightClick(s);return}let t=h.dataset.n,n=v.highlitrow();if(B.unHighlightAll(),B.highlightLemma(t),B.repopulateTrees(t),me.xScroll(t,n),h.tagName==="TD")h.classList.add("highlitcell");else{let i=h.closest(".text-box");if(i){let l=i.dataset.id;v.tr(l).querySelector(`td[data-n="${t}"]`).classList.add("highlitcell")}}}},textMouseup(){let s=v.selection();B.highlightRange(s),C()},menuMouseover(s){let o=s.target.classList.contains("menubox")?s.target:s.target.closest(".menubox");if(o){let h=o.querySelector("ul");h&&(h.style.display="block"),o.classList.add("open")}},menuMouseout(s){let o=s.target.classList.contains("menubox")?s.target:s.target.closest(".menubox");if(o){let h=o.querySelector("ul");h&&(h.style.display="none"),o.classList.remove("open")}},menuClick(s){!s.target.parentElement||(s.target.parentElement.className==="ms"&&($.menuMouseout(s),d.text(s.target.dataset.name)),s.target.parentElement.className==="tree"&&($.menuMouseout(s),s.target.closest("li[data-name]")&&d.tree(s.target.dataset.stemmaid,s.target.dataset.treeid)))},thDragStart(s){s.dataTransfer.setData("text/plain",s.target.textContent),T.startMoveRow(s.target.parentNode,s)},trDragEnter(s){let o=s.target.nodeType===1?s.target.closest("tr"):s.target.parentElement.closest("tr");o&&o.classList.add("dragenter")},trDragLeave(s){let o=s.target.nodeType===1?s.target.closest("tr"):s.target.parentElement.closest("tr");o&&o.classList.remove("dragenter")},trDragDrop(s){s.preventDefault(),T.finishMoveRow(s)},matrixMousedown(s){if(s.button!==0)return;if(s.ctrlKey){$.rightClick(s);return}let o=s.target.nodeType===1?s.target.closest(".lemma"):s.target.parentElement.closest(".lemma");if(o){if(o.isContentEditable)return;B.unHighlightAll(),B.highlightLemma(o.dataset.n);let h=u.matrix.boxdiv.querySelector("table");h.addEventListener("mouseover",$.matrixMouseover),h.addEventListener("mouseup",$.matrixMouseup)}},matrixMouseup(){let s=v.highlit();B.highlightRange(s);let o=u.matrix.boxdiv.querySelector("table");o.removeEventListener("mouseover",$.matrixMouseover),o.removeEventListener("mouseup",$.matrixMouseup)},matrixMouseover(s){let o=s.target.nodeType===1?s.target.closest(".lemma"):s.target.parentElement.closest(".lemma");o&&B.highlightLemma(o.dataset.n)},matrixHeaderClick(s){if(s.target.tagName!=="INPUT")return;let o=s.target.className;if(o!=="insignificant"&&o!=="binary")return;let h=s.target.closest("th").dataset.ref,t=v.firsttd(h).dataset[o]!=="true",n=new Map([[h,t]]);T.doMarkAs(o,n)},rightClick(s){let o=s.target.nodeType===1?s.target.closest("tr[data-n] th"):s.target.parentElement.closest("tr[data-n] th");if(o){s.preventDefault(),pe.remove();let t=pe.create(s),n=[{text:"move row",func:T.startMoveRow.bind(null,o.parentNode)},{text:"delete row",func:T.doDeleteRow.bind(null,o.parentNode.dataset.n)}];pe.populate(t,n),pe.show(t);return}let h=s.target.nodeType===1?s.target.closest("td.lemma"):s.target.parentElement.closest("td.lemma");if(h){s.preventDefault();let t=h.classList.contains("highlit")?function(){let l=v.highlit();return l.size===1&&!h.classList.contains("highlitcell")&&(B.unCelllightAll(),h.classList.add("highlitcell")),l}():($.textClick(s,!0),new Set([h.dataset.n])),n=t.size>1?[{text:"merge columns",func:T.startMerge.bind(null,t)},{text:"ungroup columns",alt:"group columns",toggle:ye.grouped,func:T.startGroup.bind(null,!1)},{text:"delete columns",func:T.startRemoveCol.bind(null,t)}]:[{text:"edit cell",func:T.startEditCell.bind(null,h)},{text:"delete column",func:T.startRemoveCol.bind(null,t)},{text:"insert column",func:T.startInsertCol}];pe.remove();let i=pe.create(s);pe.populate(i,n),pe.show(i)}}},T={undo:function(){let s=u.undo.pop();s&&s[0](...s[1])},redo:function(){let s=u.redo.pop();s&&s[0](...s[1])},doStack:function(s,o="do"){o==="undo"?(s[1].push("redo"),u.redo.push(s)):o==="redo"?(s[1].push("undo"),u.undo.push(s)):(s[1].push("undo"),u.undo.push(s),u.redo=[])},doMulti:function(s,o){let h=[];for(let t of s){let n=t[0](...t[1],"multido");h.unshift(n)}T.doStack([T.doMulti,[h]],o)},startMoveRow:function(s,o){if(u.dragged=s,u.dragged.classList.add("dragging"),o.type!=="dragstart"){for(let h of v.trs())h.classList.add("moveinprogress");u.matrix.boxdiv.querySelector("table").addEventListener("mousedown",T.finishMoveRow)}},startMerge:function(s){let o=s===!1?v.highlit():s,h=v.clauses(o,!0);if(!h)T.doMerge(o,"do");else if(h[0]===null){let t=h.filter(n=>n!==null).map(n=>[T.doUngroup,[n]]).concat([[T.doMerge,[o]]]);T.doMulti(t,"do")}else{let t=v.clausesToRemove(h,o);if(!t)T.doMerge(o,"do");else{let n=t.map(i=>[T.doUngroup,[i]]).concat([[T.doMerge,[o]]]);T.doMulti(n,"do")}}},startGroup:function(s){let o=s===!1?v.highlit():s;ye.grouped()?T.startUngroup(o):T.doGroup(o,"do")},startUngroup:function(s){let h=[...v.clauses(s)].map(t=>[T.doUngroup,[t]]);T.doMulti(h,"do")},startInsertCol:function(){let s=Math.max([...v.highlit()])||u.maxlemma;T.doInsertCol(s)},startRemoveCol:function(s){let o=s===!1?v.highlit():s,h=v.clauses(o);if(!h)T.doRemoveCol(o,"do");else{let t=v.clausesToRemove(h,o,1);if(!t)T.doRemoveCol(o,"do");else{let n=t.map(i=>[T.doUngroup,[i]]).concat([[T.doRemoveCol,[o]]]);T.doMulti(n,"do")}}},startRemoveEmpty:function(){let s=v.empty(),o=v.clauses(s);if(!o)T.doRemoveCol(s,"do");else{let h=v.clausesToRemove(o,s,1);if(!h)T.doRemoveCol(s,"do");else{let t=h.map(n=>[T.doUngroup,[n]]).concat([[T.doRemoveCol,[s]]]);T.doMulti(t,"do")}}},startEditCell:function(s){let o=s||v.highlitcell();!o||(T.unnormalize(o),o.dataset.oldContent=o.textContent,o.contentEditable="true",o.focus(),u.editing=!0,$.selectAll(o),o.addEventListener("blur",T.finishEditCell),o.addEventListener("keydown",T.cellKeyDown))},cellKeyDown:function(s){switch(s.key){case"Enter":T.finishEditCell(s);break;case"Escape":T.finishEditCell(s,!0);break;case"ArrowRight":{let o=v.cursorPos(s.target);o[0]===o[1]&&(s.preventDefault(),T.finishEditCell(s),$.cycleVariant({key:"ArrowRight"}),T.startEditCell(v.highlitcell()));break}case"ArrowLeft":{v.cursorPos(s.target)[0]===0&&(s.preventDefault(),T.finishEditCell(s),$.cycleVariant({key:"ArrowLeft"}),T.startEditCell(v.highlitcell()));break}}},startMarkAs:function(s,o,h){let t=h.target.tagName==="INPUT"?h.target:h.target.querySelector("input"),n=o===!1?v.highlit():o,i=new Map([...n].map(l=>[l,!t.checked]));T.doMarkAs(s,i)},startNewRow:function(){let s=be.row("new row"),o=s.querySelector("th");o.contentEditable=!0,o.addEventListener("blur",T.finishNewRow),o.addEventListener("keydown",T.thKeyDown),u.matrix.boxdiv.querySelector("tbody").appendChild(s),o.scrollIntoView(),o.focus(),document.execCommand("selectAll",!1,null),u.editing=!0},startRenameRow:function(){},startReconstruction:function(s){let o=s.target.dataset.key,h=s.target.closest(".tree-box").myTree,t=h.desc,n=document.createElement("div");n.id="blackout";let i=document.createRange().createContextualFragment(`<div id="reconstructionoptions" class="popup">
    <form id="reconstructionform">
      <div>
        <label for="reconstructed_node_name">Label for node:</label>
        <input type="text" id="reconstructed_node_name" name="reconstructed_node_name" placeholder="${t}-${o}" size="15">
      </div>
      <div style="width: 100%; display: flex; justify-content: center;padding-top: 1em;">
        <button type="submit">Add to matrix</button>
      </div>
    </form>
</div>`);n.appendChild(i),document.body.appendChild(n);let l=function(m){m.preventDefault();let b=n.querySelector("input"),L=b.value?b.value:b.placeholder;T.doReconstruction(h,o,L),document.body.removeChild(n)};n.querySelector("button").addEventListener("click",l),n.addEventListener("click",ue.blackoutClick)},thKeyDown:function(s){s.key==="Enter"&&T.finishNewRow(s)},finishNewRow:function(s){let o=s.target,h=o.textContent;o.closest("tr").dataset.n=h;let t=be.tei(h);u.xml.documentElement.appendChild(t),u.editing=!1,o.contentEditable=!1,o.removeEventListener("blur",T.finishNewRow),o.removeEventListener("keydown",T.thKeyDown),T.doStack([T.doDeleteRow,[h]],"do")},finishEditCell:function(s,o=!1){let h=s.target;u.editing=!1,h.contentEditable="false",h.removeEventListener("blur",T.finishEditCell),h.removeEventListener("keydown",T.cellKeyDown),h.blur(),$.deselect();let t=h.textContent;if(t===""){let p=h.querySelector("br");p&&p.remove()}if(o||t===h.dataset.oldContent)return;h.hasOwnProperty("IAST")||(h.IAST=h.cloneNode(!0)),h.IAST.textContent=t;let n=parseInt(h.dataset.n),i=h.closest("tr"),l=i.dataset.n;if(T.xmlChangeCell(n,l,t),i.dataset.hasOwnProperty("treename")&&!h.dataset.hasOwnProperty("emended")){let p=T.doEmend(n,l,"multido"),m=[];m.push([T.doChangeCell,[n,l,h.dataset.oldContent]]),m.push(p),T.doStack([T.doMulti,[m]],"do")}else T.doStack([T.doChangeCell,[n,l,h.dataset.oldContent]],"do");delete h.dataset.oldContent,T.refresh(),me.updateAllHeaders(!0),h.classList.add("highlitcell")},finishMoveRow:function(s){let o=s.target.nodeType===1?s.target.closest("tr"):s.target.parentElement.closest("tr");if(o&&T.doMoveRow(u.dragged,o,"do"),s.type!=="drop"){for(let h of v.trs())h.classList.remove("moveinprogress");u.matrix.boxdiv.querySelector("table").removeEventListener("mousedown",T.finishMoveRow)}else for(let h of v.trs())h.classList.remove("dragenter");u.dragged.classList.remove("dragging"),u.dragged=null},doReconstruction:function(s,o,h){let t=be.row(h,"pending");t.dataset.treename=s.name,t.dataset.nodename=o;let n=t.querySelector("th"),i=document.createElement("div");i.id="spinner",n.prepend(i);let l=be.tei(h);l.setAttribute("type","reconstructed"),l.setAttribute("corresp",s.name),l.setAttribute("select",`#${o}`);let p=[...v.tds(!1,t)],m=[...v.words(!1,l)];u.matrix.boxdiv.querySelector("tbody").appendChild(t),n.scrollIntoView();let b=new Blob(["("+N1.toString()+")()"],{type:"application/javascript"}),L=new Worker(window.URL.createObjectURL(b)),R=ye.normalizedView(),V=v.serializedtexts(s.nexml,R),G=v.serializedlevels(s.levels,R);L.postMessage({readings:V,levels:G,num:0,id:o}),L.onmessage=function(K){let ie=K.data.n,de=K.data.result;if(p[ie].textContent=de,p[ie].IAST=p[ie].cloneNode(!0),p[ie].classList.remove("pending"),m[ie].textContent=de,ie<u.maxlemma)L.postMessage({readings:V,levels:G,num:ie+1,id:o});else{n.removeChild(i),u.xml.documentElement.appendChild(l),me.updateAllHeaders(),s.draw();let ge=v.highlit();ge.size>0&&B.repopulateTrees(...v.lowhigh(ge));let we=document.getElementById("menu").querySelector(".ms"),ve=document.createElement("li");ve.setAttribute("data-name",h),ve.appendChild(document.createTextNode(h)),we.appendChild(ve),T.doStack([T.doDeleteRow,[h]],"do")}}},doDeleteRow:function(s,o="do"){let h=v.tr(s),t=v.tei(s),i=[...v.teis()].indexOf(t);h.parentNode.removeChild(h),t.parentNode.removeChild(t),me.updateAllHeaders(),se(),f(),T.doStack([T.doUndeleteRow,[h,t,i]],o)},doUndeleteRow:function(s,o,h,t="do"){let n=o.getAttribute("n"),i=[...v.teis()];if(h===i.length)u.xml.documentElement.appendChild(o),u.matrix.boxdiv.querySelector("tbody").appendChild(s);else{let l=[...v.trs()];u.xml.documentElement.insertBefore(o,i[h]),l[h].parentNode.insertBefore(s,l[h])}me.updateAllHeaders(),se(),f(),T.doStack([T.doDeleteRow,[n]],t)},doMoveRow:function(s,o,h="do"){let t=s.parentNode,n=[...v.trs()],i=s.previousElementSibling,l=n.indexOf(s),p=o!==null?n.indexOf(o):null,m=function(){o===null?t.insertBefore(s,t.firstChild):o.nextElementSibling?t.insertBefore(s,o.nextElementSibling):t.appendChild(s)},b=function(){let L=u.xml.documentElement,R=[...v.teis()],V=R[l];if(p===null)L.insertBefore(V,R[0]);else{let G=R[p];G.nextElementSibling?L.insertBefore(V,G.nextElementSibling):L.appendChild(V)}};if(m(),b(),h==="multido")return[T.doMoveRow,[s,i]];T.doStack([T.doMoveRow,[s,i]],h)},doMerge:function(s,o="do"){let h=function(l,p,m){let b=l();var L=[];for(let R of b){let V=[...m].map(ie=>p(ie,R)),G=V.map(ie=>ie.cloneNode(!0));L.push(G);for(let ie of V)T.unnormalize(ie);let K=V.reduce(function(ie,de){if(de.hasChildNodes())for(;de.firstChild;)ie.appendChild(de.firstChild);return de.parentNode.removeChild(de),ie});K.normalize(),K.dataset?(delete K.dataset.normal,K.IAST=K.cloneNode(!0)):K.removeAttribute("lemma")}return[l,p,L]},t=h(v.trs,v.firsttd,s),n=h(v.texts,v.firstword,s),i=parseInt([...s][0]);if(T.renumber(i),T.restyleGroups(s),T.refresh(),me.updateAllHeaders(),o==="multido")return[T.doUnmerge,[t,n]];T.doStack([T.doUnmerge,[t,n]],o)},doUnmerge:function(s,o,h="undo"){let t=function(p,m,b){let L=v.whichattr(b[0][0]),R=b[0].map(ie=>ie.getAttribute(L)),V=R[0],G=p();for(var K=0;K<G.length;K++){let ie=b[K].pop(),de=m(V,G[K]);de.parentNode.replaceChild(ie,de);for(let ge of b[K])ie.parentNode.insertBefore(ge,ie)}return R};t(...s);let n=t(...o),l=[...n].sort((p,m)=>parseInt(p)-parseInt(m))[0];if(T.renumber(l),T.reIAST(n),T.refresh(),T.restyleGroups(n),me.updateAllHeaders(),h==="multido")return[T.doMerge,[n]];T.doStack([T.doMerge,[n]],h)},doGroup:function(s,o="do"){let h=[...s],t=h.shift(),n=v.texts();for(let l of n){let p=document.createElementNS("http://www.tei-c.org/ns/1.0","cl"),m=v.firstword(t,l);m.parentNode.insertBefore(p,m),p.appendChild(m);for(let b of s)p.appendChild(v.firstword(b,l))}let i=h.pop();for(let l of v.tds(t))l.classList.add("group-start");for(let l of v.tds(i))l.classList.add("group-end");for(let l of h)for(let p of v.tds(l))p.classList.add("group-internal");for(let l of u.textboxes)l.refresh();if(o==="multido")return[T.doUngroup,[s]];T.doStack([T.doUngroup,[s]],o)},doUngroup:function(s,o="do"){let h=v.texts();for(let n of h){let i;for(let l of s){let p=v.firstword(l,n);i||(i=p.closest("cl")),i.parentNode.insertBefore(p,i)}i.parentNode.removeChild(i)}let t=[...s].map(n=>[...v.tds(n)]).reduce((n,i)=>n.concat(i),[]);for(let n of t)n.classList.remove("group-start","group-internal","group-end");for(let n of u.textboxes)n.refresh();if(o==="multido")return[T.doGroup,[s]];T.doStack([T.doGroup,[s]],o)},doGroupWords:function(){let s=0,o=[];for(let h=0;h<=u.maxlemma;h++){let t=v.tds(h),n=t[0].classList;if(n.contains("group-start")||n.contains("group-internal")||n.contains("group-end")){s=h+1;continue}let i=t.length,l=0;if(h===u.maxlemma)l=i;else for(let p of t)(p.IAST?p.IAST.textContent:p.textContent).slice(-1)===" "&&l++;if(l/i>=.5)if(s===h){s++;continue}else{let p=v.range(s,h);o.push([T.doGroup,[p]]),s=h+1}}T.doMulti(o)},doRemoveCol:function(s,o="do"){let h=function(p,m,b){let L=p();var R=[];for(let V of L){let G=[...b].map(ie=>{let de=m(ie,V);return T.unnormalize(de),de}),K=G.map(ie=>ie.cloneNode(!0));R.push(K);for(let ie of G)ie.parentNode.removeChild(ie)}return[p,m,R]},t=h(v.trs,v.firsttd,s),n=h(v.texts,v.firstword,s),i=[...s].sort((p,m)=>parseInt(p)-parseInt(m)),l=parseInt([...i][0])-1;if(T.renumber(l),T.refresh(),T.restyleGroups(s,!0),me.updateAllHeaders(),o==="multido")return[T.doUnremoveCol,[t,n]];T.doStack([T.doUnremoveCol,[t,n]],o)},doUnremoveCol:function(s,o,h){let t=function(m,b,L){let R=v.whichattr(L[0][0]),V=L[0].map(de=>de.getAttribute(R)),G=V[0],K=m();for(var ie=0;ie<K.length;ie++){let de=b(G,K[ie]);for(let ge of L[ie])de.parentNode.insertBefore(ge,de)}return V};t(...s);let n=t(...o),i=[...n].sort((m,b)=>parseInt(m)-parseInt(b)),l=parseInt(i[0])-1;T.renumber(l);let p=document.querySelectorAll(".highlitcell");for(let m of p)m.classList.remove("highlitcell");if(T.reIAST(n),T.refresh(),T.restyleGroups(n,!0),me.updateAllHeaders(),h==="multido")return[T.doRemoveCol,[n]];T.doStack([T.doRemoveCol,[n]],h)},doInsertCol:function(s,o="do"){let h=function(n,i,l,p){let m=n();for(let b of m){let L=i(p,b),R=l(p+1);L.insertAdjacentElement("afterend",R)}};h(v.trs,v.firsttd,be.emptycell,s),h(v.texts,v.firstword,be.emptyword,s),T.renumber(s),T.refresh(),T.restyleGroups([s,s+1],!0),me.updateAllHeaders();let t=[s+1];if(o==="multido")return[T.doRemoveCol,[t]];T.doStack([T.doRemoveCol,[t]],o)},doEmend:function(s,o,h="do"){let t=[...v.trs()][o],n=v.firsttd(s,t);n.dataset.emended=!0;let i=v.tei(o).querySelector("text");if(v.firstword(s,i).setAttribute("emended","true"),h==="multido")return[T.doUnemend,[s,o]];T.doStack([T.doUnemend,[s,o]],h)},doUnemend:function(s,o,h="do"){let t=[...v.trs()][o],n=v.firsttd(s,t);delete n.dataset.emended;let i=v.tei(o).querySelector("text");if(v.firstword(s,i).removeAttribute("emended"),h==="multido")return[T.doEmend,[s,o]];T.doStack([T.doEmend,[s,o]],h)},doChangeCell:function(s,o,h,t="do"){let n=T.xmlChangeCell(s,o,h),i=T.htmlChangeCell(s,o,h);if(T.refresh(),me.updateAllHeaders(!0),$.textClick({target:i}),t==="multido")return[T.doChangeCell,[s,o,n]];T.doStack([T.doChangeCell,[s,o,n]],t)},htmlChangeCell:function(s,o,h){let t=v.tr(o),n=v.firsttd(s,t);return T.unnormalize(n),n.textContent=h,n.IAST&&(n.IAST=n.cloneNode(!0)),n},xmlChangeCell:function(s,o,h){let t=v.tei(o).querySelector("text"),n=v.firstword(s,t);T.unnormalize(n);let i=n.textContent;return n.childNodes.length===0?n.appendChild(document.createTextNode(h)):n.textContent=h,i},doMarkAs:function(s,o,h="do"){let t=[...o.keys()],n=v.attr(s,t);for(let i of t){let l=v.tds(i),p=v.words(i);if(o.get(i)===!0){for(let b of l)b.dataset[s]="true";for(let b of p)b.setAttribute(s,"true")}else{for(let b of l)delete b.dataset[s];for(let b of p)b.removeAttribute(s)}let m=v.checkbox(i,s);m.checked=o.get(i)}if(h==="multido")return[T.doMarkAs,[s,n]];T.doStack([T.doMarkAs,[s,n]],h)},refresh:function(){for(let s of u.textboxes)s.refresh();B.rehighlight(),ye.anyhighlit()?B.repopulateTrees(...v.lowhigh(v.highlit())):B.clearTrees()},renumber:function(s=0){let o=function(h,t,n){let i=h();for(let p of i){let m=[...t(!1,p)],b=v.whichattr(m[0]);for(var l=parseInt(n)+1;l<m.length;l++)m[l].setAttribute(b,l)}};o(v.trs,v.tds,s),o(()=>[!0],v.ths,s),o(v.texts,v.words,s),u.maxlemma=v.maxlemma()},reIAST:function(s){let o=[...s].map(h=>[...v.lemmata(h)]).flat();for(let h of o)h.IAST=h.cloneNode(!0)},restyleGroups:function(s,o=!1){let t=o?function(i){var l=[...i];let p=parseInt(s[0])-1,m=parseInt(s[s.length-1])+1;return l.unshift(p),l.push(m),l}(s):s,n=function(i,l=!1){let p=new Set(["group-start","group-internal","group-end"]);l&&p.delete(l);for(let m of i){for(let b of p)m.classList.remove(b);l&&m.classList.add(l)}};for(let i of t){let l=v.firstword(i),p=v.tds(i);if(p.length===0)continue;let m=l.closest("cl");m?l===m.firstElementChild?n(p,"group-start"):l===m.lastElementChild?n(p,"group-end"):n(p,"group-internal"):n(p)}},startRenormalize:function(s){let o=s===!1?v.highlit():s;T.doRenormalize(Math.min(...o),Math.max(...o))},doRenormalize:function(s,o,h=!1,t="do"){let n=ye.normalizedView(),i=new Map,l=[...v.trs()],p=[...v.texts()],m=h?[h]:[...l.keys()];for(let b of m){let L=new Map,R=p[b],V=[...v.words(!1,R)],G=v.firstword(s,R),K=v.firstword(o,R),ie=V.indexOf(G),de=V.indexOf(K),ge=V.slice(ie,de+1),we=l[b],Ae=[...v.tds(!1,we)].slice(ie,de+1),ke=ge.map(Ne=>Ne.textContent),Le=w1(ke);for(let Ne=0;Ne<Le.length;Ne++){let Me=ge[Ne],Be=Le[Ne],Oe=ke[Ne],qe=Ae[Ne],je=Me.hasAttribute("lemma")?Me.getAttribute("lemma"):!1;if(je!==!1){if(je===Be)continue;L.set(qe.dataset.n,je),T.unnormalize(Me),T.unnormalize(qe)}else L.set(qe.dataset.n,null);Be!==Oe&&(Me.setAttribute("lemma",Be),qe.dataset.normal=Be,n&&(qe.textContent=Be))}i.set(b,L)}me.updateAllHeaders(!0),me.xScrollToHighlit(),T.doStack([T.doUnrenormalize,[i]],t)},doUnrenormalize:function(s,o="undo"){let h=ye.normalizedView(),t=new Map,n=[...v.trs()],i=[...v.texts()];for(let[l,p]of s.entries()){let m=n[l],b=i[l],L=new Map;for(let[R,V]of p.entries()){let G=v.firsttd(R,m),K=v.firstword(R,b),ie=K.hasAttribute("lemma")?K.getAttribute("lemma"):null;L.set(R,ie),V===null?(T.unnormalize(G),T.unnormalize(K)):(G.dataset.normal=V,K.setAttribute("lemma",V),h&&(G.textContent=V))}t.set(l,L)}T.doStack([T.doUnrenormalize,[t]],o)},unnormalize:function(s){s.hasOwnProperty("IAST")&&(s.textContent=s.IAST.textContent),s.dataset&&s.dataset.hasOwnProperty("normal")&&delete s.dataset.normal,s.getAttribute("lemma")&&s.removeAttribute("lemma")}},me={toggleNormalize:function(){ye.normalizedView()?me.showUnnormalized():me.showNormalized()},showNormalized:function(s){if(s)s.updatescript();else{document.getElementById("views").classList.add("normalized");for(let h of u.textboxes)h.updatescript();u.matrix.updatescript(),ye.anyhighlit()?B.repopulateTrees(...v.lowhigh(v.highlit())):B.clearTrees()}me.updateAllHeaders(!0),me.xScrollToHighlit()},showUnnormalized:function(){document.getElementById("views").classList.remove("normalized"),u.matrix.updatescript();for(let s of u.textboxes)s.updatescript();ye.anyhighlit()?B.repopulateTrees(...v.lowhigh(v.highlit())):B.clearTrees(),me.updateAllHeaders(!0),me.xScrollToHighlit()},toggleHeader:function(){let s=u.matrix.boxdiv.querySelector("tr.header");s.style.display==="none"?s.style.display="table-row":s.style.display="none"},updateHeaders(s){for(let o of s){let h=v.firstth(o),[t,n]=v.readings(o),i=h.querySelector("span.readings"),l=t<2?t:`${t}(${n.size})`;i.textContent=l}},updateAllHeaders(s=!1){let o=[...v.trs()],h=o.map(p=>v.trWalker(p)),t=[...v.tds(!1,o[0])],n=[...v.ths()],i=u.matrix.boxdiv.querySelector("tr.header"),l=function(){let p=document.createElement("th"),m=document.createElement("span");m.classList.add("readings"),p.appendChild(m);let b=document.createElement("form");return b.innerHTML='<div><input class="insignificant" type="checkbox">Insignificant</div><div><input class="binary" type="checkbox">Binary</div>',p.appendChild(b),i.appendChild(p),p};for(let p=0;p<t.length;p++){let m=p>=n.length?l():n[p],b=t[p];m.dataset.ref=b.dataset.n;let L=0,R=new Set;for(let G of h){let K=G.nextNode().textContent;K!==""&&(L++,R.add(K))}let V=L<2?L:`${L}(${R.size})`;m.querySelector("span.readings").textContent=V,s||(m.querySelector("input.insignificant").checked=!!b.dataset.insignificant,m.querySelector("input.binary").checked=!!b.dataset.binary)}if(n.length>t.length)for(let p=t.length;p<n.length;p++)i.removeChild(n[p])},xScrollToHighlit:function(){let s=v.highlit();s.size>0&&me.xScroll([...s][0])},xScroll:function(s,o){if(!s)return;let h=o||v.firsttr(),t=v.firsttd(s,h),n=t.getBoundingClientRect(),i=u.matrix.boxdiv,p=i.getBoundingClientRect().right,m=h.querySelector("th").getBoundingClientRect(),b=m.right,L=n.right>p,R=n.left+.1<b;L&&t.scrollIntoView({inline:"end",block:"nearest"}),R&&(t.scrollIntoView({inline:"start",block:"nearest"}),i.scroll({left:i.scrollLeft-m.width}))}},ye={undo:function(){return u.undo.length>0},redo:function(){return u.redo.length>0},checkbox:function(s,o){if(!ye.anyhighlit())return!1;let h=o===!1?v.highlit():o,t=v.attr(s,h);for(let n of t.values())if(n===!1)return!1;return!0},grouped:function(){let s=v.highlit();if(!s)return!1;let o=v.firsttr();for(let h of s){let t=v.firsttd(h,o);if(t.classList.contains("group-start")||t.classList.contains("group-internal")||t.classList.contains("group-end"))return!0}return!1},oneGrouped:function(){let s=v.highlit();if(s.size===0)return!1;if(s.size===1){let o=v.firsttr(),h=v.firsttd([...s][0],o);return!!(h.classList.contains("group-start")||h.classList.contains("group-end")||h.classList.contains("group-internal"))}return!0},anyhighlit:function(){return!!u.matrix.boxdiv.querySelector("td.highlit")},manyhighlit:function(){return v.highlit().size>1},highlitcell:function(){return!!u.matrix.boxdiv.querySelector("td.highlitcell")},normalizedView:function(){return document.getElementById("views").classList.contains("normalized")},anyNormalized:function(){return u.matrix.boxdiv.querySelector(".lemma[data-normal]")},headerView:function(){return u.matrix.boxdiv.querySelector("tr.header").style.display!=="none"}},be={tei:function(s){let o=u.xml.createElementNS(x.teins,"TEI");o.setAttribute("n",s);let h=v.firsttext().cloneNode(!0);o.appendChild(h);for(let t of v.words(!1,h))for(t.removeAttribute("lemma");t.firstChild;)t.firstChild.remove();return o},emptycell:function(s){let o=document.createElement("td");return o.className="lemma",o.dataset.n=s,o},emptyword:function(s,o=u.xml){let h=o.createElementNS(x.teins,"w");return h.setAttribute("n",s),h},emptywords:function(s,o,h){let t=o||u.maxlemma,n=h||0;for(let i=n;i<=t;i++){let l=be.emptyword(i);s.appendChild(l)}},row:function(s,o){let h=document.createElement("tr"),t=document.createElement("th");t.scope="row",t.draggable=!0,t.appendChild(document.createTextNode(s)),t.addEventListener("dragstart",$.thDragStart),h.dataset.n=s,h.appendChild(t);let n=v.firsttr();for(let i of n.querySelectorAll("td")){let l=document.createElement("td");l.dataset.n=i.dataset.n,l.className=i.className,o&&l.classList.add(o),h.appendChild(l)}return h}},pe={create:function(s){let o=document.createElement("div");return o.classList.add("contextmenu"),o.style.left=s.clientX-12+"px",o.style.top=s.clientY-22+"px",o},remove:function(){for(let s of document.querySelectorAll(".contextmenu"))s.parentNode.removeChild(s)},show:function(s){document.body.appendChild(s)},populate:function(s,o){let h=document.createElement("ul");for(let t of o){let n=document.createElement("li");if(t.hasOwnProperty("cond")){let i=document.createRange().createContextualFragment('<form><input type="checkbox"'+(t.cond()?" checked":"")+"></form>");n.appendChild(i)}if(t.hasOwnProperty("toggle")){let i=t.toggle()?t.text:t.alt;n.appendChild(document.createTextNode(i))}else n.appendChild(document.createTextNode(t.text));n.addEventListener("mouseup",t.func),h.appendChild(n)}s.appendChild(h)}};class Se{constructor(o){this.name=o,this.box=document.createElement("div"),this.box.classList.add("menubox");let h=document.createElement("div");h.classList.add("heading"),h.appendChild(document.createTextNode(o)),this.box.appendChild(h),h.addEventListener("mouseover",this.checkConditions.bind(this)),this.box.addEventListener("mouseup",this.click.bind(this)),this.items=new Map,this.conditions=new Map}populate(o){let h=this.box.querySelector("ul")||function(t){let n=document.createElement("ul");return t.box.appendChild(n),n}(this);for(let t of o){let n=document.createElement("li");if(t.hasOwnProperty("checkbox")){let i=document.createElement("form"),l=document.createElement("input");l.type="checkbox",l.addEventListener("click",p=>p.preventDefault()),i.appendChild(l),n.appendChild(i),n.appendChild(document.createTextNode(t.text)),this.conditions.set(l,t.checkbox)}else if(t.hasOwnProperty("toggle")){let i=document.createElement("span");i.appendChild(document.createTextNode(t.text)),i.dataset.text=t.text,i.dataset.alt=t.alt,this.conditions.set(i,t.toggle),n.appendChild(i)}else n.appendChild(document.createTextNode(t.text));t.hasOwnProperty("greyout")&&this.conditions.set(n,t.greyout),this.items.set(n,t.func),h.appendChild(n)}}click(o){let h=o.target.tagName==="LI"?o.target:o.target.closest("li");if(h&&!h.classList.contains("greyedout")){let t=this.items.get(h);t&&(t(o),this.checkConditions())}}checkConditions(){let o=new Map;for(let[h,t]of this.conditions){let n=o.get(t)||function(){let i=t();return o.set(t,i),i}();h.tagName==="INPUT"?h.checked=n:h.tagName==="SPAN"?n?h.textContent=h.dataset.alt:h.textContent=h.dataset.text:h.tagName==="LI"&&(n?h.classList.remove("greyedout"):h.classList.add("greyedout"))}}}class X{constructor(o){this.name=o,this.script=0}show(){u.descs.appendChild(this.descbox),ye.normalizedView()&&me.showNormalized(this),u.viewdiv.appendChild(this.boxdiv),this.closed=!1}clear(){for(;this.boxdiv.firstChild;)this.boxdiv.removeChild(this.boxdiv.firstChild);this.svgcontainer&&(this.clearsvg(),this.boxdiv.appendChild(this.svgcontainer))}destroy(){u.viewdiv.removeChild(this.boxdiv),u.descs.removeChild(this.descbox);let o=u.trees.indexOf(this);o>-1&&u.trees.splice(o,1);let h=u.textboxes.indexOf(this);h>-1&&u.textboxes.splice(h,1),this.closed=!0,this.name==="Matrix"&&(document.getElementById("matrixmenu").style.display="block"),f(),B.rehighlight()}pullout(){this.destroy();let o="menubar=no,location=no,status=no,height=620,width=620,scrollbars=yes,centerscreen=yes",h=window.mainWindow?window.mainWindow.comboView.getWindows().length:u.windows.length,t=window.open("slave.html","slave"+h,o);t.mainWindow=window.mainWindow?window.mainWindow:window,t.startbox=this.text?{text:{name:this.name}}:{tree:this.name},t.mainWindow.comboView.addWindow(t)}makeDescBox(){let o=document.createElement("div"),h=document.createElement("div");h.classList.add("closer"),h.innerHTML="x",h.title="close";let t=document.createElement("div");t.classList.add("scripter"),t.innerHTML="A",t.title="change script",o.appendChild(h),o.appendChild(t),o.appendChild(document.createTextNode(this.desc)),this.descbox=o,h.addEventListener("click",this.destroy.bind(this)),t.addEventListener("click",this.cyclescript.bind(this))}cyclescript(){this.script=this.script+1,this.script===x.scripts.length&&(this.script=0);let o=this.descbox.querySelector(".scripter");this.script===0?o.innerHTML="A":o.innerHTML=to[x.scripts[this.script]]("a"),x.scripts[this.script]==="grantha"?o.classList.add("grantha"):o.classList.remove("grantha"),this.updatescript()}updatescript(){let o=this.boxdiv.querySelectorAll(".lemma,.tree-lemma");for(let h of o){let t=h.dataset.hasOwnProperty("normal");if(!t&&h.textContent.trim()==="")continue;let n=function(){if(ye.normalizedView()&&t){let l=document.createElement("span");return l.appendChild(document.createTextNode(h.dataset.normal)),l}else return h.IAST.cloneNode(!0)}(),i=this.script===0?n:Ot(n,x.scripts[this.script]);for(h.innerHTML="";i.firstChild;)h.appendChild(i.firstChild)}x.scripts[this.script]==="grantha"?this.boxdiv.classList.add("grantha"):this.boxdiv.classList.remove("grantha"),this.boxdiv.classList.contains("matrix")&&me.xScrollToHighlit()}}class Ce extends X{constructor(o,h){super(`#${o} #${h}`);this.stemmaid=o,this.id=h,this.nexml=u.treelist.get(this.name).cloneNode(!0),this.desc=this.nexml.querySelector("tree").getAttribute("label")}init(){this.makeDescBox();let o=document.createElement("div");o.classList.add("tree-box");var h,t=0;do h="tree"+t,t++;while(document.getElementById(h));o.id=h,this.boxdiv=o,this.boxdiv.addEventListener("mouseover",$.treeMouseover.bind(this)),this.boxdiv.addEventListener("click",$.treeClick),this.svgcontainer=document.createElement("div"),this.svgcontainer.id=this.boxdiv.id+"container",this.boxdiv.appendChild(this.svgcontainer),this.boxdiv.myTree=this,this.calcPaths(),this.jiggleroot(),this.findLevels(),this.labelInternal()}show(){u.descs.appendChild(this.descbox),u.viewdiv.appendChild(this.boxdiv)}jiggleroot(){let o=this.nexml.evaluate('//nex:node[@root="true"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,h=this.nexml.evaluate('//nex:edge[@source="'+o.id+'"]|//nex:edge[@target="'+o.id+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);if(h.snapshotLength===3){var t,n;for(let i=0;i<h.snapshotLength;i++){let l=h.snapshotItem(i),p=l.getAttribute("source"),m=l.getAttribute("target"),b=this.nexml.evaluate('//nex:node[@id="'+p+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,L=this.nexml.evaluate('//nex:node[@id="'+m+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!b.hasAttribute("otu")&&!L.hasAttribute("otu")){t=l,n=m===o.id?"target":"source";break}}if(t){let i=this.nexml.createElementNS(o.namespaceURI,"node");i.id="fakeroot",i.setAttribute("root","true"),o.removeAttribute("root"),o.parentElement.insertBefore(i,o);let l=this.nexml.createElementNS(o.namespaceURI,"edge");l.id="newrootedge",l.setAttribute("length","0"),l.setAttribute("source","fakeroot"),l.setAttribute("target",o.id),o.parentElement.insertBefore(l,t),t.setAttribute(n,i.id)}}}findLevels(){let o=this.nexml.querySelectorAll("edge"),h=[...this.nexml.querySelectorAll("node[otu]")],t=this.nexml;this.levels=[h];let n=function(p,m){let b=p.map(de=>de.id),L=new Map,R=new Map,V=[];for(let de of m){let ge=de.getAttribute("target"),we=de.getAttribute("source"),ve=(()=>b.indexOf(ge)!==-1?{ancestor:t.getElementById(we),child:t.getElementById(ge)}:b.indexOf(we)!==-1?{ancestor:t.getElementById(ge),child:t.getElementById(we)}:null)();if(ve!==null)if(R.has(ve.ancestor)){let Ae=R.get(ve.ancestor);L.set(ve.ancestor,[Ae.child,ve.child]),V.push(de),V.push(Ae.edge)}else R.set(ve.ancestor,{child:ve.child,edge:de})}let G=[...L.keys()],K=[...R.keys()].reduce((de,ge)=>(G.indexOf(ge)===-1&&de.push(R.get(ge).child),de),[]),ie=[...m].reduce((de,ge)=>(V.indexOf(ge)===-1&&de.push(ge),de),[]);return{match:L,remainder:[...new Set(K)],edges:ie}};var i=h,l=o;do{let p=n(i,l);this.levels.push(p.match),i=[...p.match.keys(),...p.remainder],l=p.edges}while(l.length>0)}labelInternal(){for(let o of this.nexml.querySelectorAll("node:not([label])"))o.setAttribute("label",o.id)}fitch1(){let o=new Map;for(let h of this.levels[0]){let t=h.getAttribute("label"),n=this.boxdiv.querySelector(`span.tree-lemma[data-id="${t}"]`),i=n?[v.htmlreading(n,ye.normalizedView())]:[];o.set(h,new Set(i))}for(let h=1;h<this.levels.length;h++)for(let[t,n]of this.levels[h]){let i=n.map(m=>o.get(m)),l=v.setIntersection(...i),p=l.size>0?l:v.setUnion(...i);o.set(t,p)}return o}fitch2(o){let h=[...this.nexml.querySelectorAll("node[otu]")],t=new Map;for(let[n]of this.levels[this.levels.length-1])t.set(n,o.get(n));for(let n=this.levels.length-1;n>1;n--)for(let[i,l]of this.levels[n]){let p=t.get(i);for(let m of l){if(h.indexOf(m)!==-1)continue;let b=o.get(m);if(b.size===1)t.set(m,b);else{let L=v.setIntersection(p,b),R=L.size>0?L:b;t.set(m,R)}}}return t}fitch(){let o=this.fitch1(),h=function(n){let i=[...n].map(l=>l.trim()===""?"_":l);return i.length===1?i[0]:"{"+i.join(", ")+"}"},t=this.fitch2(o);for(let[n,i]of t){let l=this.boxdiv.querySelector(`span.internal[data-key="${n.id}"]`);l.dataset.reconstructed=h(i)}}clearsvg(){for(;this.svgcontainer.firstChild;)this.svgcontainer.removeChild(this.svgcontainer.firstChild)}removecolors(){let o=this.nexml.querySelectorAll("node[color]");for(let h=0;h<o.snapshotLength;h++)o.snapshotItem(h).removeAttribute("color")}drawlines(o,h){if(this.removecolors(),o){let p=this.getPath(...o.split(";")).path,m=new Set;for(let b of p)m.add(b.getAttribute("target")),m.add(b.getAttribute("source"));for(let b of m){let L=this.nexml.evaluate('//nex:node[@id="'+b+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;L.getAttribute("root")||L.setAttribute("color",h)}}let t=parseInt(window.getComputedStyle(this.svgcontainer,null).width)-15,n=parseInt(window.getComputedStyle(this.boxdiv,null).height)-10,i=function(){return n<600?600:n}();M.PhyloCanvas.Render.Style.line.stroke="rgb(162,164,170)",this.phylocanvas=new M.PhyloCanvas({nexml:this.nexml,fileSource:!0},this.svgcontainer.id,t,i);let l=this.svgcontainer.querySelectorAll('path:not([stroke="#a2a4aa"])');for(let p of l)p.style.strokeWidth="2"}draw(){this.clear(),this.drawlines(),this.makeLabels()}clearLabels(){for(let o of this.boxdiv.firstChild.querySelectorAll("text"))o.parentElement.removeChild(o)}makeLabels(){let o=[...v.texts()],h=new Set(o.map(n=>n.parentNode.getAttribute("n"))),t=new Map(o.filter(n=>n.parentNode.hasAttribute("corresp")&&n.parentNode.getAttribute("corresp")===this.name).map(n=>[n.parentNode.getAttribute("select").replace(/^#/,""),n.parentNode.getAttribute("n")]));for(let n of this.boxdiv.firstChild.querySelectorAll("text")){let i=document.createElement("div");i.setAttribute("class","tree-div");let l=parseInt(n.getAttribute("x")-5),p=parseInt(n.getAttribute("y"))-15;i.style.left=l+"px",i.style.top=p+"px";let m=n.textContent.trim();h.has(m)?i.innerHTML=`<span class="witness inactive" data-key="${m}">${m}</span><span class="tree-lemma ${m}" data-id="${m}"></span>`:m!=="fakeroot"?t.has(m)?i.innerHTML=`<span class="internal reconstructed" data-key="${m}" data-label="${t.get(m)}">${t.get(m)}</span><span class="tree-lemma invisible ${m}" data-id="${m}" data-label="${t.get(m)}"></span>`:i.innerHTML=`<span class="internal" data-key="${m}">0</span>`:i.innerHTML=`<span class="internal" data-key="${m}"></span>`,n.parentElement.removeChild(n),this.boxdiv.appendChild(i)}}clearlemmata(){for(let o of this.boxdiv.querySelectorAll("span.tree-lemma"))o.innerHTML="",o.dataset.hasOwnProperty("normal")&&delete o.dataset.normal,o.IAST=o.cloneNode(!0)}populate(o,h){let t=v.texts();for(let l of t){let p=l.parentNode.getAttribute("n"),m=this.boxdiv.querySelector(`span.tree-lemma[data-id="${p}"]`)||this.boxdiv.querySelector(`span.tree-lemma[data-label="${p}"]`);if(!!m){if(m.hasOwnProperty("IAST")||(m.IAST=m.cloneNode(!0)),m.IAST.innerHTML="",h){let b=[],L=[];var n=!1;for(let R=o;R<=h;R++){let V=v.firstword(R,l);b.push(V.innerHTML),V.hasAttribute("lemma")&&(L[R-o]=V.getAttribute("lemma")),V.hasAttribute("emended")&&(n=!0)}if(m.IAST.appendChild(P.transformString(b.join(" ").replace(/\s+/g," ").trim(),P.sheets.tree)),L.length!==0){let R=b.slice(0).map((G,K)=>L.hasOwnProperty(K)?L[K]:G),V=document.createElement("span");V.appendChild(P.transformString(R.join(" ").replace(/\s+/g," ").trim(),P.sheets.tree)),m.dataset.normal=V.innerHTML}n?m.dataset.emended=!0:m.dataset.hasOwnProperty("emended")&&delete m.dataset.emended}else{let b=v.firstword(o,l);m.IAST.appendChild(P.transformString(b.innerHTML,P.sheets.tree)),b.hasAttribute("lemma")?m.dataset.normal=b.getAttribute("lemma"):delete m.dataset.normal,b.hasAttribute("emended")?m.dataset.emended=!0:m.dataset.hasOwnProperty("emended")&&delete m.dataset.emended}ye.normalizedView()&&m.dataset.hasOwnProperty("normal")?m.innerHTML=m.dataset.normal:m.innerHTML=m.IAST.innerHTML}}let i=this.boxdiv.querySelectorAll(".inactive");for(let l of i)l.classList.remove("inactive");this.fitch()}calcPaths(){this.nodes=[],this.paths=[],this.longest={path:[]},this.nsResolver=this.nexml.createNSResolver(this.nexml.ownerDocument==null?this.nexml.documentElement:this.nexml.ownerDocument.documentElement);let o=this.nexml.evaluate("//nex:node[@label]",this.nexml,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);for(let h=0;h<o.snapshotLength;h++)this.nodes.push(o.snapshotItem(h));for(let h=0;h<this.nodes.length;h++){let t=this.nodes[h],n=t.getAttribute("label"),i=t.id;for(let l=h+1;l<this.nodes.length;l++){let p=this.nodes[l],m=p.getAttribute("label"),b=p.id;this.paths.push({nodes:[n,m],path:this.pathFind(i,b)})}}for(let h of Object.keys(this.paths))this.paths[h].path.length>this.longest.path.length&&(this.longest=this.paths[h])}pathFind(o,h,t){t||(t=[]);let n=this.nexml.evaluate('//nex:edge[@source="'+o+'"]|//nex:edge[@target="'+o+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);var i;for(let l=0;l<n.snapshotLength;l++){let p=n.snapshotItem(l);if(i=[p],t.indexOf(p.id)!=-1)continue;t.push(p.id);let m=p.getAttribute("source")!==o?p.getAttribute("source"):p.getAttribute("target");if(m===h)return i;if(!this.nexml.evaluate('//nex:node[@id="'+m+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.hasAttribute("otu")){let L=this.pathFind(m,h,t);if(L)return i.concat(L);continue}}return!1}analyzeVariants(o,h){let t=[],n=[],i=function(L){return L.startsWith("<lg")?P.transformString(L,P.sheets.lg).firstChild.data.slice(1):L},l=function(L){return L.map(R=>i(R)).join(" ").replace(/\s+/g," ").trim()},p=ye.normalizedView()?function(L,R){let V=v.firstword(L,R);return V.hasAttribute("lemma")?V.getAttribute("lemma"):V.textContent}:function(L,R){return v.firstword(L,R).textContent};for(let L of v.texts()){let R=L.parentNode.getAttribute("n");if(!this.nexml.querySelector(`otu[label="${R}"]`))continue;let V=h?l(v.range(o,h).map(G=>p(G,L))):i(p(o,L));V===""?t.hasOwnProperty("")?t[""].push(R):t[""]=[R]:t.hasOwnProperty(V)?t[V].push(R):t[V]=[R]}let m={};for(let L of Object.keys(t)){var b={length:0,branch_length:0,paths:[]};if(t[L].length===1)b=!1;else for(let R=0;R<t[L].length;R++)for(let V=R+1;V<t[L].length;V++){let G=this.getPath(t[L][R],t[L][V]);if(G.hasOwnProperty("path")||alert(G),G.path.length===b.length){let K=this.calcBranchLength(G.path);K===b.branch_length?b.paths.push(G):K>b.branch_length&&(b={length:G.path.length,branch_length:K,paths:[G]})}else G.path.length>b.length&&(b={length:G.path.length,branch_length:this.calcBranchLength(G.path),paths:[G]})}m[L]=b}for(let L of Object.keys(n))m[L]=n[L];return m}getPath(o,h){for(let t of this.paths)if(t.nodes.indexOf(o)>-1&&t.nodes.indexOf(h)>-1)return t;return!1}calcBranchLength(o){return o.map(h=>h.getAttribute("length")).reduce((h,t)=>parseFloat(h)+parseFloat(t))}pickColour(o,h,t,n){var i=h,l=t,p=o;n&&(p=p*2,p>=1&&(p-=1,i=t,l=n));let m=l.red-i.red,b=l.green-i.green,L=l.blue-i.blue,R={red:parseInt(Math.floor(i.red+m*p),10),green:parseInt(Math.floor(i.green+b*p),10),blue:parseInt(Math.floor(i.blue+L*p),10)};return"rgb("+R.red+","+R.green+","+R.blue+")"}colourizeVariants(o,h){let t=this.analyzeVariants(o,h);for(let n of this.boxdiv.querySelectorAll("span.tree-lemma")){let i=t.hasOwnProperty(n.dataset.id)?t[t[n.dataset.id]]:t[n.textContent],l={red:252,green:70,blue:107},p={red:63,green:94,blue:251};i?(n.style.color=this.pickColour(i.length/this.longest.path.length,p,l),n.dataset.length=i.length,n.dataset.branch_length=i.branch_length,n.dataset.nodes=i.paths[0].nodes.join(";")):(n.style.color=this.pickColour(1/this.longest.path.length,p,l),n.dataset.length=0,n.dataset.branch_length=0,n.dataset.nodes=""),n.textContent.trim()===""?(n.innerHTML='<span lang="en">┬а┬а┬а</span>',n.style.backgroundColor=n.style.color):n.style.backgroundColor=""}}}class _e extends X{constructor(o){super(o);this.desc=o,this.text=v.firsttext(o)}init(){this.makeTextBox(),this.makeDescBox(),this.descbox.style.maxWidth="595px",this.descbox.style.paddingLeft="5px",this.boxdiv.addEventListener("mouseup",$.textMouseup)}refresh(){this.boxdiv.innerHTML="",this.boxdiv.appendChild(P.sheets.lemma.transformToFragment(this.text,document)),N(this.boxdiv);for(let o of v.lemmata(!1,this.boxdiv))o.IAST=o.cloneNode(!0);this.updatescript()}makeTextBox(){let o=document.createElement("div");o.dataset.id=this.name,o.classList.add("text-box"),o.appendChild(P.sheets.lemma.transformToFragment(this.text,document)),N(o);for(let h of v.lemmata(!1,o))h.IAST=h.cloneNode(!0);this.boxdiv=o}}class ee extends X{constructor(){super(name);this.desc="Matrix",this.name="Matrix",this.makeDescBox(),this.makeViewBox(),this.descbox.style.maxWidth="100vw",this.descbox.style.paddingLeft="5px"}init(){this.makeTable()}makeViewBox(){let o=document.createElement("div");o.classList.add("matrix"),o.dataset.id=this.name,this.boxdiv=o}makeTable(){let o=document.createElement("div");o.classList.add("scroller"),o.append(P.sheets.matrix.transformToFragment(u.xml,document));for(let m of o.getElementsByTagName("th"))m.addEventListener("dragstart",$.thDragStart);o.addEventListener("dragenter",$.trDragEnter),o.addEventListener("dragleave",$.trDragLeave),o.addEventListener("dragover",m=>m.preventDefault()),o.addEventListener("drop",$.trDragDrop),o.addEventListener("mousedown",$.matrixMousedown);let h=document.createElement("tr");h.classList.add("header");let t=document.createElement("td");t.classList.add("anchor"),h.appendChild(t);let n=[...v.trs(o)],i=n.map(m=>v.trWalker(m)),l=v.tds(!1,n[0]);for(let m of l){let b=document.createElement("th");b.dataset.ref=m.dataset.n;let L=0,R=new Set;for(let ie of i){let de=ie.nextNode();de.IAST=de.cloneNode(!0);let ge=de.textContent;ge!==""&&(L++,R.add(ge))}let V=L<2?L:`${L}(${R.size})`,G=document.createElement("span");G.classList.add("readings"),G.appendChild(document.createTextNode(V)),b.appendChild(G);let K=document.createElement("form");K.innerHTML='<div><input class="insignificant" title="insignificant" type="checkbox"'+(m.dataset.insignificant?"checked":"")+'></div><div><input class="binary" title="binary" type="checkbox"'+(m.dataset.binary?"checked":"")+"></div>",b.appendChild(K),h.appendChild(b)}let p=o.querySelector("tbody");p.insertBefore(h,p.firstChild),this.boxdiv.append(o)}}return{slaveinit:function(){comboView.init(),window.startbox!==void 0&&(window.startbox.tree?d.tree(window.startbox.tree.stemmaid,window.startbox.tree.id):window.startbox.text&&d.text(window.startbox.text.name,window.startbox.text.map))},maininit:function(){document.getElementById("comboview").style.display="block",comboView.init(),z()},init:function(){u.viewdiv=document.getElementById("views"),u.descs=document.getElementById("descs"),u.viewdiv.addEventListener("click",$.textClick),document.addEventListener("keydown",$.keyDown,{capture:!0}),document.addEventListener("contextmenu",$.rightClick),document.addEventListener("mouseup",pe.remove)},getWindows:function(){return u.windows},addWindow:function(s){u.windows.push(s)},getViewdiv:function(){return u.viewdiv},getTrees:function(){return u.trees}}}();window.addEventListener("load",window.comboView.maininit);
//# sourceMappingURL=script.js.map
