"use strict";var ze={};ze.defaults={skip_sgml:!1,syncope:!1};var Ft=ze.schemes={balinese:{vowels:"смЕ смЖ смЗ смИ смЙ смК смЛ смМ смН смО  смП смР  смС смТ".split(" "),vowel_marks:"см╡ см╢ см╖ см╕ см╣ см║ см╗ см╝ см╜ снВ см╛ см┐ снГ снА снБ".split(" "),other_marks:["смВ","смД","смБ",""],virama:["снД"],consonants:"смУ смФ смХ смЦ смЧ смШ смЩ смЪ смЫ смЬ смЭ смЮ смЯ сма смб смв смг смд сме смж смз сми смй смк смл смм смн смо смп см░ см▒ см▓ см│".split(" "),symbols:"снР снС снТ снУ снФ снХ снЦ снЧ снШ снЩ   снЮ снЯ".split(" "),zwj:["тАН"],skip:[""]},bengali:{vowels:"ржЕ ржЖ ржЗ ржИ ржЙ ржК ржЛ рза ржМ рзб  ржП ржР  ржУ ржФ".split(" "),vowel_marks:"рж╛ рж┐ рзА рзБ рзВ рзГ рзД рзв рзг  рзЗ рзИ  рзЛ рзМ".split(" "),other_marks:"ржВ ржГ ржБ".split(" "),virama:["рзН"],consonants:"ржХ ржЦ ржЧ ржШ ржЩ ржЪ ржЫ ржЬ ржЭ ржЮ ржЯ ржа ржб ржв ржг ржд рже ржж ржз ржи ржк ржл ржм ржн ржо ржп рж░ рж▓ ржм рж╢ рж╖ рж╕ рж╣ рд│ ржХрзНрж╖ ржЬрзНржЮ".split(" "),symbols:"рзж рзз рзи рзй рзк рзл рзм рзн рзо рзп реР рж╜ ред рее".split(" "),other:"    ржб ржв  ржп ".split(" ")},newa:{vowels:["ЁСРА","ЁСРБ","ЁСРВ","ЁСРГ","ЁСРД","ЁСРЕ","ЁСРЖ","ЁСРЗ","ЁСРИ","ЁСРЙ","","ЁСРК","ЁСРЛ","","ЁСРМ","ЁСРН"],vowel_marks:["ЁСР╡","ЁСР╢","ЁСР╖","ЁСР╕","ЁСР╣","ЁСР║","ЁСР╗","ЁСР╝","ЁСР╜","","ЁСР╛","ЁСР┐","","ЁССА","ЁССБ"],other_marks:["ЁССД","ЁССЕ","ЁССГ","ЁССа","ЁССб",""],virama:["ЁССВ"],consonants:["ЁСРО","ЁСРП","ЁСРР","ЁСРС","ЁСРТ","ЁСРФ","ЁСРХ","ЁСРЦ","ЁСРЧ","ЁСРШ","ЁСРЪ","ЁСРЫ","ЁСРЬ","ЁСРЭ","ЁСРЮ","ЁСРЯ","ЁСРа","ЁСРб","ЁСРв","ЁСРг","ЁСРе","ЁСРж","ЁСРз","ЁСРи","ЁСРй","ЁСРл","ЁСРм","ЁСРо","ЁСР░","ЁСР▒","ЁСР▓","ЁСР│","ЁСР┤"],symbols:["ЁССР","ЁССС","ЁССТ","ЁССУ","ЁССФ","ЁССХ","ЁССЦ","ЁССЧ","ЁССШ","ЁССЩ","ЁССЙ","ЁССЗ","ЁССЛ","ЁССМ"]},sarada:{vowels:["ЁСЖГ","ЁСЖД","ЁСЖЕ","ЁСЖЖ","ЁСЖЗ","ЁСЖИ","ЁСЖЙ","ЁСЖК","ЁСЖЛ","ЁСЖМ","","ЁСЖН","ЁСЖО","","ЁСЖП","ЁСЖР"],vowel_marks:["ЁСЖ│","ЁСЖ┤","ЁСЖ╡","ЁСЖ╢","ЁСЖ╖","ЁСЖ╕","ЁСЖ╣","ЁСЖ║","ЁСЖ╗","","ЁСЖ╝","ЁСЖ╜","","ЁСЖ╛","ЁСЖ┐"],other_marks:["ЁСЖБ","ЁСЖВ","ЁСЖА","ЁСЗВ","ЁСЗГ"],virama:["ЁСЗА"],consonants:["ЁСЖС","ЁСЖТ","ЁСЖУ","ЁСЖФ","ЁСЖХ","ЁСЖЦ","ЁСЖЧ","ЁСЖШ","ЁСЖЩ","ЁСЖЪ","ЁСЖЫ","ЁСЖЬ","ЁСЖЭ","ЁСЖЮ","ЁСЖЯ","ЁСЖа","ЁСЖб","ЁСЖв","ЁСЖг","ЁСЖд","ЁСЖе","ЁСЖж","ЁСЖз","ЁСЖи","ЁСЖй","ЁСЖк","ЁСЖл","ЁСЖм","ЁСЖо","ЁСЖп","ЁСЖ░","ЁСЖ▒","ЁСЖ▓","ЁСЖн"],symbols:["ЁСЗР","ЁСЗС","ЁСЗТ","ЁСЗУ","ЁСЗФ","ЁСЗХ","ЁСЗЦ","ЁСЗЧ","ЁСЗШ","ЁСЗЩ","ЁСЗД","ЁСЗБ","ЁСЗЕ","ЁСЗЖ"]},devanagari:{vowels:"рдЕ рдЖ рдЗ рдИ рдЙ рдК рдЛ реа рдМ реб рдО рдП рдР рдТ рдУ рдФ рдП рдР рдУ".split(" "),vowel_marks:"рд╛ рд┐ реА реБ реВ реГ реД рев рег реЖ реЗ реИ реК реЛ реМ реО реОреЗ реОрд╛ реОреЛ реЖ реП".split(" "),other_marks:"рдВ рдГ рдБ с│╡ с│╢ ъг╜".split(" "),virama:["реН"],consonants:"рдХ рдЦ рдЧ рдШ рдЩ рдЪ рдЫ рдЬ рдЭ рдЮ рдЯ рда рдб рдв рдг рдд рде рдж рдз рди рдк рдл рдм рдн рдо рдп рд░ рд▓ рд╡ рд╢ рд╖ рд╕ рд╣ рд│".split(" "),symbols:"реж рез реи рей рек рел рем рен рео реп реР рд╜ ред рее".split(" "),zwj:["тАН"],skip:[""],accent:["реС","реТ"],combo_accent:"рдГреС рдГреТ рдВреС рдВреТ".split(" "),candra:["реЕ"],other:"рдХрд╝ рдЦрд╝ рдЧрд╝ рдЬрд╝ рдбрд╝ рдврд╝ рдлрд╝ рдпрд╝ рд▒".split(" ")},gujarati:{vowels:"ркЕ ркЖ ркЗ ркИ ркЙ ркК ркЛ рла ркМ рлб  ркП ркР  ркУ ркФ".split(" "),vowel_marks:"рк╛ рк┐ рлА рлБ рлВ рлГ рлД рлв рлг  рлЗ рлИ  рлЛ рлМ".split(" "),other_marks:"ркВ ркГ ркБ".split(" "),virama:["рлН"],consonants:"ркХ ркЦ ркЧ ркШ ркЩ ркЪ ркЫ ркЬ ркЭ ркЮ ркЯ рка ркб ркв ркг ркд рке ркж ркз рки ркк ркл ркм ркн рко ркп рк░ рк▓ рк╡ рк╢ рк╖ рк╕ рк╣ рк│".split(" "),symbols:"рлж рлз рли рлй рлк рлл рлм рлн рло рлп рлР рк╜ рлд рле".split(" "),candra:["рлЕ"]},gurmukhi:{vowels:"риЕ риЖ риЗ риИ риЙ риК      риП риР  риУ риФ".split(" "),vowel_marks:"ри╛ ри┐ рйА рйБ рйВ      рйЗ рйИ  рйЛ рйМ".split(" "),other_marks:"риВ риГ риБ".split(" "),virama:["рйН"],consonants:"риХ риЦ риЧ риШ риЩ риЪ риЫ риЬ риЭ риЮ риЯ риа риб рив риг рид рие риж риз рии рик рил рим рин рио рип ри░ ри▓ ри╡ ри╢ ри╢ ри╕ ри╣ ри│".split(" "),symbols:"рйж рйз рйи рйй рйк рйл рйм рйн рйо рйп реР рд╜ ред рее".split(" "),other:" риЦ риЧ риЬ риб  рил  ".split(" ")},kannada:{vowels:"р▓Е р▓Ж р▓З р▓И р▓Й р▓К р▓Л р│а р▓М р│б р▓О р▓П р▓Р р▓Т р▓У р▓Ф".split(" "),vowel_marks:"р▓╛ р▓┐ р│А р│Б р│В р│Г р│Д р│в р│г р│Ж р│З р│И р│К р│Л р│М".split(" "),other_marks:"р▓В р▓Г рдБ".split(" "),virama:["р│Н"],consonants:"р▓Х р▓Ц р▓Ч р▓Ш р▓Щ р▓Ъ р▓Ы р▓Ь р▓Э р▓Ю р▓Я р▓а р▓б р▓в р▓г р▓д р▓е р▓ж р▓з р▓и р▓к р▓л р▓м р▓н р▓о р▓п р▓░ р▓▓ р▓╡ р▓╢ р▓╖ р▓╕ р▓╣ р▓│".split(" "),symbols:"р│ж р│з р│и р│й р│к р│л р│м р│н р│о р│п р▓Ур▓В р▓╜ ред рее".split(" "),other:"      р▓л  р▓▒".split(" ")},malayalam:{vowels:"р┤Е р┤Ж р┤З р┤И р┤Й р┤К р┤Л р╡а р┤М р╡б р┤О р┤П р┤Р р┤Т р┤У р┤Ф".split(" "),vowel_marks:"р┤╛ р┤┐ р╡А р╡Б р╡В р╡Г р╡Д р╡в р╡г р╡Ж р╡З р╡И р╡К р╡Л р╡М".split(" "),other_marks:"р┤В р┤Г рдБ".split(" "),virama:["р╡Н"],consonants:"р┤Х р┤Ц р┤Ч р┤Ш р┤Щ р┤Ъ р┤Ы р┤Ь р┤Э р┤Ю р┤Я р┤а р┤б р┤в р┤г р┤д р┤е р┤ж р┤з р┤и р┤к р┤л р┤м р┤н р┤о р┤п р┤░ р┤▓ р┤╡ р┤╢ р┤╖ р┤╕ р┤╣ р┤│".split(" "),symbols:"р╡ж р╡з р╡и р╡й р╡к р╡л р╡м р╡н р╡о р╡п р┤Ур┤В р┤╜ ред рее".split(" "),other:"        р┤▒".split(" ")},oriya:{vowels:"рмЕ рмЖ рмЗ рмИ рмЙ рмК рмЛ рна рмМ рнб  рмП рмР  рмУ рмФ".split(" "),vowel_marks:"рм╛ рм┐ рнА рнБ рнВ рнГ рнД рнв рнг  рнЗ рнИ  рнЛ рнМ".split(" "),other_marks:"рмВ рмГ рмБ".split(" "),virama:["рнН"],consonants:"рмХ рмЦ рмЧ рмШ рмЩ рмЪ рмЫ рмЬ рмЭ рмЮ рмЯ рма рмб рмв рмг рмд рме рмж рмз рми рмк рмл рмм рмн рмо рмп рм░ рм▓ рм╡ рм╢ рм╖ рм╕ рм╣ рм│".split(" "),symbols:"рнж рнз рни рнй рнк рнл рнм рнн рно рнп рмУрмВ рм╜ ред рее".split(" "),other:"    рмб рмв  рмп ".split(" ")},tamil:{vowels:"роЕ роЖ роЗ роИ роЙ роК     роО роП роР роТ роУ роФ".split(" "),vowel_marks:"ро╛ ро┐ рпА рпБ рпВ     рпЖ рпЗ рпИ рпК рпЛ рпМ".split(" "),other_marks:"роВ роГ ".split(" "),virama:["рпН"],consonants:"роХ роХ роХ роХ роЩ роЪ роЪ роЬ роЪ роЮ роЯ роЯ роЯ роЯ рог род род род род рои рок рок рок рок роо роп ро░ ро▓ ро╡ ро╢ ро╖ ро╕ ро╣ ро│".split(" "),symbols:"рпж рпз рпи рпй рпк рпл рпм рпн рпо рпп рпР рд╜ ред рее".split(" "),other:"        ро▒".split(" ")},telugu:{vowels:"р░Е р░Ж р░З р░И р░Й р░К р░Л р▒а р░М р▒б р░О р░П р░Р р░Т р░У р░Ф".split(" "),vowel_marks:"р░╛ р░┐ р▒А р▒Б р▒В р▒Г р▒Д р▒в р▒г р▒Ж р▒З р▒И р▒К р▒Л р▒М".split(" "),other_marks:"р░В р░Г р░Б с│▓ с│▓".split(" "),virama:["р▒Н"],consonants:"р░Х р░Ц р░Ч р░Ш р░Щ р░Ъ р░Ы р░Ь р░Э р░Ю р░Я р░а р░б р░в р░г р░д р░е р░ж р░з р░и р░к р░л р░м р░н р░о р░п р░░ р░▓ р░╡ р░╢ р░╖ р░╕ р░╣ р░│".split(" "),symbols:"р▒ж р▒з р▒и р▒й р▒к р▒л р▒м р▒н р▒о р▒п р░Ур░В р░╜ ред рее".split(" "),other:"        р░▒".split(" ")},iast:{vowels:"a ─Б i ─л u ┼л с╣Ы с╣Э с╕╖ с╕╣ с║╜ e ai ├╡ o au ├к a├о ├┤ a├╗".split(" "),other_marks:["с╣Г","с╕е","m╠Р","с║Ц","с╕л","oс╕┐"],virama:[""],consonants:"k kh g gh с╣Е c ch j jh ├▒ с╣н с╣нh с╕Н с╕Нh с╣З t th d dh n p ph b bh m y r l v ┼Ы с╣г s h с╕╗".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oс╣Б ' | ||".split(" ")},iso:{vowels:"a ─Б i ─л u ┼л r╠е r╠е╠Д l╠е l╠е╠Д с║╜ e ai ├╡ o au ├к a├о ├┤ a├╗".split(" "),other_marks:["с╣Б","с╕е","m╠Р","oс╕┐"],virama:[""],consonants:"k kh g gh с╣Е c ch j jh ├▒ с╣н с╣нh с╕Н с╕Нh с╣З t th d dh n p ph b bh m y r l v ┼Ы с╣г s h с╕╖ kс╣г j├▒".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 om╠Р ' | ||".split(" ")},itrans:{vowels:"a A i I u U RRi RRI LLi LLI  e ai  o au".split(" "),other_marks:["M","H",".N"],virama:[""],consonants:"k kh g gh ~N ch Ch j jh ~n T Th D Dh N t th d dh n p ph b bh m y r l v sh Sh s h L kSh j~n".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM .a | ||".split(" "),candra:[".c"],zwj:["{}"],skip:"_",accent:["\\'","\\_"],combo_accent:"\\'H \\_H \\'M \\_M".split(" "),other:"q K G z .D .Dh f Y R".split(" ")},hk:{vowels:"a A i I u U R RR lR lRR  e ai  o au".split(" "),other_marks:"M H ~".split(" "),virama:[""],consonants:"k kh g gh G c ch j jh J T Th D Dh N t th d dh n p ph b bh m y r l v z S s h L kS jJ".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM ' | ||".split(" ")},slp1:{vowels:"a A i I u U f F x X с║╜ e E ├╡ o O ├к ├К ├┤ ├Ф".split(" "),other_marks:"M H m╠Р с║Ц с╕л oс╕┐".split(" "),virama:[""],consonants:"k K g G N c C j J Y w W q Q R t T d D n p P b B m y r l v S z s h L".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oс╣Б ' | ||".split(" ")},velthuis:{vowels:"a aa i ii u uu .r .rr .li .ll  e ai  o au".split(" "),other_marks:".m .h ".split(" "),virama:[""],consonants:'k kh g gh "n c ch j jh ~n .t .th .d .d .n t th d dh n p ph b bh m y r l v ~s .s s h L k.s j~n'.split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 o.m ' | ||".split(" ")},wx:{vowels:"a A i I u U q Q L   e E  o O".split(" "),other_marks:"M H z".split(" "),virama:[""],consonants:"k K g G f c C j J F t T d D N w W x X n p P b B m y r l v S R s h  kR jF".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oM ' | ||".split(" ")}},x1={},Jt={iast:{с╣Ы:["r╠е"],с╣Г:["с╣Б"]},itrans:{A:["aa"],I:["ii","ee"],U:["uu","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],"j~n":["GY","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":"\\_.m \\_.n \\`M \\`.m \\`.n".split(" "),".a":["~"],"|":["."],"||":[".."],z:["J"]}},Lt={};ze.isRomanScheme=function(x){return x1.hasOwnProperty(x)};ze.addBrahmicScheme=function(x,d){ze.schemes[x]=d};ze.addRomanScheme=function(x,d){"vowel_marks"in d||(d.vowel_marks=d.vowels.slice(1)),ze.schemes[x]=d,x1[x]=!0};var b1=function(x){var d={};for(var N in x)!x.hasOwnProperty(N)||(d[N]=x[N].slice(0));return d};(function(){var x=Ft.kolkata=b1(Ft.iast),d="iast itrans hk kolkata slp1 velthuis wx".split(" ");x.vowels="a ─Б i ─л u ┼л с╣Ы с╣Э с╕╖ с╕╣ e ─У ai o ┼Н au".split(" ");for(var N=0,M;M=d[N];N++)ze.addRomanScheme(M,Ft[M]);var H=b1(Ft.itrans);H.vowels="a A i I u U Ri RRI LLi LLi e E ai o O au".split(" "),H.vowel_marks=H.vowels.slice(1),Jt.itrans_dravidian=Jt.itrans,ze.addRomanScheme("itrans_dravidian",H)})();var V1=function(x,d){var N=Jt[x]||{},M={},H=ze.schemes[x],z={},O=[],u={},f=ze.schemes[d];for(var b in H)if(!!H.hasOwnProperty(b)){var E=H[b],F=f[b];if(F!==void 0)for(var q=0;q<E.length;q++){var A=E[q],T=F[q],D=N[A]||[],Q=D.length,se=0;for(O.push(A.length),se=0;se<Q;se++)O.push(D[se].length);if(b==="vowel_marks"||b==="virama")for(u[A]=T,se=0;se<Q;se++)u[D[se]]=T;else{for(z[A]=T,se=0;se<Q;se++)z[D[se]]=T;if(b==="consonants"||b==="other")for(M[A]=T,se=0;se<Q;se++)M[D[se]]=T}}}return{consonants:M,fromRoman:ze.isRomanScheme(x),letters:z,marks:u,maxTokenLength:Math.max.apply(Math,O),toRoman:ze.isRomanScheme(d),virama:f.virama}},$1=function(x,d,N){for(var M=[],H=d.consonants,z=x.length,O=!1,u=d.letters,f=d.marks,b=d.maxTokenLength,E=N.skip_sgml,F=N.syncope,q,A,T="",D=d.toRoman,Q=d.virama,se=!1,U=!1,$=!1,ce=0,pe;(pe=x.charAt(ce))||T;ce++){var ye=b-T.length;if(!(ye>0&&ce<z&&(T+=pe,ye>1)))for(var j=0;j<b;j++){var ie=T.substr(0,b-j);if(se===!0)se=ie!==">";else if(ie==="<")se=E;else if(ie==="##"){$=!$,T=T.substr(2);break}if(U=se||$,(q=u[ie])!==void 0&&!U){D?M.push(q):(O?(A=f[ie])?M.push(A):ie!=="a"&&(M.push(Q),M.push(q)):M.push(q),O=ie in H),T=T.substr(b-j);break}else j===b-1&&(O&&(O=!1,F||M.push(Q)),M.push(ie),T=T.substr(1))}}return O&&!F&&M.push(Q),M.join("")},U1=function(x,d){for(var N=[],M=d.consonants,H=!1,z=!1,O=d.letters,u=d.marks,f,b=d.toRoman,E=!1,F=0,q;q=x.charAt(F);F++){if(q==="#"){H?(E=!E,H=!1):H=!0,z&&(N.push("a"),z=!1);continue}else if(E){N.push(q);continue}(f=u[q])!==void 0?(N.push(f),z=!1):(H&&(N.push("#"),H=!1),z&&(N.push("a"),z=!1),(f=O[q])?(N.push(f),z=b&&q in M):N.push(q))}return z&&N.push("a"),N.join("")};ze.t=function(x,d,N,M){M=M||{};var H=Lt.options||{},z=ze.defaults,O=Lt.from===d&&Lt.to===N,u;for(var f in z)if(z.hasOwnProperty(f)){var b=z[f];f in M&&(b=M[f]),M[f]=b,b!==H[f]&&(O=!1)}return O?u=Lt.map:(u=V1(d,N,M),Lt={from:d,map:u,options:M,to:N}),d==="itrans"&&(x=x.replace(/\{\\m\+\}/g,".h.N"),x=x.replace(/\.h/g,""),x=x.replace(/\\([^'`_]|$)/g,"##$1##")),u.fromRoman?$1(x,u,M):U1(x,u,M)};var Qt={};(function(x){"use strict";x.__type__="csv";var d=typeof jQuery!="undefined"&&jQuery.Deferred||typeof _!="undefined"&&_.Deferred||function(){var u,f,b=new Promise(function(E,F){u=E,f=F});return{resolve:u,reject:f,promise:function(){return b}}};x.fetch=function(u){var f=new d;if(u.file){var b=new FileReader,E=u.encoding||"UTF-8";b.onload=function(A){var T=x.extractFields(x.parse(A.target.result,u),u);T.useMemoryStore=!0,T.metadata={filename:u.file.name},f.resolve(T)},b.onerror=function(A){f.reject({error:{message:"Failed to load file. Code: "+A.target.error.code}})},b.readAsText(u.file,E)}else if(u.data){var F=x.extractFields(x.parse(u.data,u),u);F.useMemoryStore=!0,f.resolve(F)}else if(u.url){var q=window.fetch||function(A){var T=jQuery.get(A),D={then:function(Q){return T.done(Q),D},catch:function(Q){return T.fail(Q),D}};return D};q(u.url).then(function(A){return A.text?A.text():A}).then(function(A){var T=x.extractFields(x.parse(A,u),u);T.useMemoryStore=!0,f.resolve(T)}).catch(function(A,T){f.reject({error:{message:"Failed to load file. "+A.statusText+". Code: "+A.status,request:A}})})}return f.promise()},x.extractFields=function(u,f){return f.noHeaderRow!==!0&&u.length>0?{fields:u[0],records:u.slice(1)}:{records:u}},x.normalizeDialectOptions=function(u){var f={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var b in u)b==="trim"?f.skipinitialspace=u.trim:f[b.toLowerCase()]=u[b];return f},x.parse=function(u,f){(!f||f&&!f.lineterminator)&&(u=x.normalizeLineTerminator(u,f));var b=x.normalizeDialectOptions(f);u=O(u,b.lineterminator);var E="",F=!1,q=!1,A="",T=[],D=[],Q,se;for(se=function(U){return q!==!0&&(U===""?U=null:b.skipinitialspace===!0&&(U=z(U)),N.test(U)?U=parseInt(U,10):M.test(U)&&(U=parseFloat(U,10))),U},Q=0;Q<u.length;Q+=1)E=u.charAt(Q),F===!1&&(E===b.delimiter||E===b.lineterminator)?(A=se(A),T.push(A),E===b.lineterminator&&(D.push(T),T=[]),A="",q=!1):E!==b.quotechar?A+=E:F?u.charAt(Q+1)===b.quotechar?(A+=b.quotechar,Q+=1):F=!1:(F=!0,q=!0);return A=se(A),T.push(A),D.push(T),b.skipinitialrows&&(D=D.slice(b.skipinitialrows)),D},x.normalizeLineTerminator=function(u,f){return f=f||{},f.lineterminator?u:u.replace(/(\r\n|\n|\r)/gm,`
`)},x.objectToArray=function(u){for(var f=[],b=[],E=[],F=0;F<u.fields.length;F++){var q=u.fields[F].id;E.push(q);var A=u.fields[F].label?u.fields[F].label:q;b.push(A)}f.push(b);for(var F=0;F<u.records.length;F++){for(var T=[],D=u.records[F],Q=0;Q<E.length;Q++)T.push(D[E[Q]]);f.push(T)}return f},x.serialize=function(u,f){var b=null;u instanceof Array?b=u:b=x.objectToArray(u);var E=x.normalizeDialectOptions(f),F="",q="",A="",T="",D,Q,se;for(se=function(U){return U===null?U="":typeof U=="string"&&H.test(U)?(E.doublequote&&(U=U.replace(/"/g,'""')),U=E.quotechar+U+E.quotechar):typeof U=="number"&&(U=U.toString(10)),U},D=0;D<b.length;D+=1)for(F=b[D],Q=0;Q<F.length;Q+=1)q=se(F[Q]),Q===F.length-1?(A+=q,T+=A+E.lineterminator,A=""):A+=q+E.delimiter,q="";return T};var N=/^\d+$/,M=/^\d*\.\d+$|^\d+\.\d*$/,H=/^\s|\s$|,|"|\n/,z=function(){return String.prototype.trim?function(u){return u.trim()}:function(u){return u.replace(/^\s*/,"").replace(/\s*$/,"")}}();function O(u,f){return u.charAt(u.length-f.length)!==f?u:u.substring(0,u.length-f.length)}})(Qt);function j1(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function W1(x,d,N){return N={path:d,exports:{},require:function(M,H){return G1(M,H==null?N.path:H)}},x(N,N.exports),N.exports}function G1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var X1=W1(function(x,d){(function(N,M){x.exports=M()})(window,function(){return function(N){var M={};function H(z){if(M[z])return M[z].exports;var O=M[z]={i:z,l:!1,exports:{}};return N[z].call(O.exports,O,O.exports,H),O.l=!0,O.exports}return H.m=N,H.c=M,H.d=function(z,O,u){H.o(z,O)||Object.defineProperty(z,O,{enumerable:!0,get:u})},H.r=function(z){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})},H.t=function(z,O){if(1&O&&(z=H(z)),8&O||4&O&&typeof z=="object"&&z&&z.__esModule)return z;var u=Object.create(null);if(H.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:z}),2&O&&typeof z!="string")for(var f in z)H.d(u,f,function(b){return z[b]}.bind(null,f));return u},H.n=function(z){var O=z&&z.__esModule?function(){return z.default}:function(){return z};return H.d(O,"a",O),O},H.o=function(z,O){return Object.prototype.hasOwnProperty.call(z,O)},H.p="",H(H.s=1)}([function(N,M,H){var z,O;z=[H(2)],(O=function(u){function f(r){if(f.is(r,"function"))return b?r():u.on("raphael.DOMload",r);if(f.is(r,ae))return f._engine.create[U](f,r.splice(0,3+f.is(r[0],X))).add(r);var s=Array.prototype.slice.call(arguments,0);if(f.is(s[s.length-1],"function")){var a=s.pop();return b?a.call(f._engine.create[U](f,s)):u.on("raphael.DOMload",function(){a.call(f._engine.create[U](f,s))})}return f._engine.create[U](f,arguments)}f.version="2.3.0",f.eve=u;var b,E,F=/[, ]+/,q={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},A=/\{(\d+)\}/g,T="hasOwnProperty",D={doc:document,win:window},Q={was:Object.prototype[T].call(D.win,"Raphael"),is:D.win.Raphael},se=function(){this.ca=this.customAttributes={}},U="apply",$="concat",ce="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,pe="",ye=" ",j=String,ie="split",B="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[ie](ye),Se={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},P=j.prototype.toLowerCase,le=Math,_e=le.max,G=le.min,we=le.abs,ke=le.pow,ee=le.PI,X="number",ae="array",Pe=Object.prototype.toString,n=(f._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),e={NaN:1,Infinity:1,"-Infinity":1},t=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,i=le.round,o=parseFloat,c=parseInt,h=j.prototype.toUpperCase,g=f._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},m=f._availableAnimAttrs={blur:X,"clip-rect":"csv",cx:X,cy:X,fill:"colour","fill-opacity":X,"font-size":X,height:X,opacity:X,path:"path",r:X,rx:X,ry:X,stroke:"colour","stroke-opacity":X,"stroke-width":X,transform:"transform",width:X,x:X,y:X},k=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,R={hs:1,rg:1},V=/,?([achlmqrstvxz]),?/gi,W=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ne=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,te=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,me=(f._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ge=function(r,s){return o(r)-o(s)},be=function(r){return r},xe=f._rectPath=function(r,s,a,l,p){return p?[["M",r+p,s],["l",a-2*p,0],["a",p,p,0,0,1,p,p],["l",0,l-2*p],["a",p,p,0,0,1,-p,p],["l",2*p-a,0],["a",p,p,0,0,1,-p,-p],["l",0,2*p-l],["a",p,p,0,0,1,p,-p],["z"]]:[["M",r,s],["l",a,0],["l",0,l],["l",-a,0],["z"]]},Ae=function(r,s,a,l){return l==null&&(l=a),[["M",r,s],["m",0,-l],["a",a,l,0,1,1,0,2*l],["a",a,l,0,1,1,0,-2*l],["z"]]},Te=f._getPath={path:function(r){return r.attr("path")},circle:function(r){var s=r.attrs;return Ae(s.cx,s.cy,s.r)},ellipse:function(r){var s=r.attrs;return Ae(s.cx,s.cy,s.rx,s.ry)},rect:function(r){var s=r.attrs;return xe(s.x,s.y,s.width,s.height,s.r)},image:function(r){var s=r.attrs;return xe(s.x,s.y,s.width,s.height)},text:function(r){var s=r._getBBox();return xe(s.x,s.y,s.width,s.height)},set:function(r){var s=r._getBBox();return xe(s.x,s.y,s.width,s.height)}},Me=f.mapPath=function(r,s){if(!s)return r;var a,l,p,v,C,w,S;for(p=0,C=(r=At(r)).length;p<C;p++)for(v=1,w=(S=r[p]).length;v<w;v+=2)a=s.x(S[v],S[v+1]),l=s.y(S[v],S[v+1]),S[v]=a,S[v+1]=l;return r};if(f._g=D,f.type=D.win.SVGAngle||D.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",f.type=="VML"){var Re,De=D.doc.createElement("div");if(De.innerHTML='<v:shape adj="1"/>',(Re=De.firstChild).style.behavior="url(#default#VML)",!Re||typeof Re.adj!="object")return f.type=pe;De=null}function qe(r){if(typeof r=="function"||Object(r)!==r)return r;var s=new r.constructor;for(var a in r)r[T](a)&&(s[a]=qe(r[a]));return s}f.svg=!(f.vml=f.type=="VML"),f._Paper=se,f.fn=E=se.prototype=f.prototype,f._id=0,f.is=function(r,s){return(s=P.call(s))=="finite"?!e[T](+r):s=="array"?r instanceof Array:s=="null"&&r===null||s==typeof r&&r!==null||s=="object"&&r===Object(r)||s=="array"&&Array.isArray&&Array.isArray(r)||Pe.call(r).slice(8,-1).toLowerCase()==s},f.angle=function(r,s,a,l,p,v){if(p==null){var C=r-a,w=s-l;return C||w?(180+180*le.atan2(-w,-C)/ee+360)%360:0}return f.angle(r,s,p,v)-f.angle(a,l,p,v)},f.rad=function(r){return r%360*ee/180},f.deg=function(r){return Math.round(180*r/ee%360*1e3)/1e3},f.snapTo=function(r,s,a){if(a=f.is(a,"finite")?a:10,f.is(r,ae)){for(var l=r.length;l--;)if(we(r[l]-s)<=a)return r[l]}else{var p=s%(r=+r);if(p<a)return s-p;if(p>r-a)return s-p+r}return s};var Fe,rt;f.createUUID=(Fe=/[xy]/g,rt=function(r){var s=16*le.random()|0;return(r=="x"?s:3&s|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Fe,rt).toUpperCase()}),f.setWindow=function(r){u("raphael.setWindow",f,D.win,r),D.win=r,D.doc=D.win.document,f._engine.initWin&&f._engine.initWin(D.win)};var Ve=function(r){if(f.vml){var s,a=/^\s+|\s+$/g;try{var l=new ActiveXObject("htmlfile");l.write("<body>"),l.close(),s=l.body}catch(C){s=createPopup().document.body}var p=s.createTextRange();Ve=Oe(function(C){try{s.style.color=j(C).replace(a,pe);var w=p.queryCommandValue("ForeColor");return"#"+("000000"+(w=(255&w)<<16|65280&w|(16711680&w)>>>16).toString(16)).slice(-6)}catch(S){return"none"}})}else{var v=D.doc.createElement("i");v.title="Rapha├лl Colour Picker",v.style.display="none",D.doc.body.appendChild(v),Ve=Oe(function(C){return v.style.color=C,D.doc.defaultView.getComputedStyle(v,pe).getPropertyValue("color")})}return Ve(r)},Xe=function(){return"hsb("+[this.h,this.s,this.b]+")"},ct=function(){return"hsl("+[this.h,this.s,this.l]+")"},_t=function(){return this.hex},ut=function(r,s,a){if(s==null&&f.is(r,"object")&&"r"in r&&"g"in r&&"b"in r&&(a=r.b,s=r.g,r=r.r),s==null&&f.is(r,"string")){var l=f.getRGB(r);r=l.r,s=l.g,a=l.b}return(r>1||s>1||a>1)&&(r/=255,s/=255,a/=255),[r,s,a]},Tt=function(r,s,a,l){var p={r:r*=255,g:s*=255,b:a*=255,hex:f.rgb(r,s,a),toString:_t};return f.is(l,"finite")&&(p.opacity=l),p};function Oe(r,s,a){return function l(){var p=Array.prototype.slice.call(arguments,0),v=p.join("тРА"),C=l.cache=l.cache||{},w=l.count=l.count||[];return C[T](v)?(function(S,I){for(var J=0,ue=S.length;J<ue;J++)if(S[J]===I)return S.push(S.splice(J,1)[0])}(w,v),a?a(C[v]):C[v]):(w.length>=1e3&&delete C[w.shift()],w.push(v),C[v]=r[U](s,p),a?a(C[v]):C[v])}}f.color=function(r){var s;return f.is(r,"object")&&"h"in r&&"s"in r&&"b"in r?(s=f.hsb2rgb(r),r.r=s.r,r.g=s.g,r.b=s.b,r.hex=s.hex):f.is(r,"object")&&"h"in r&&"s"in r&&"l"in r?(s=f.hsl2rgb(r),r.r=s.r,r.g=s.g,r.b=s.b,r.hex=s.hex):(f.is(r,"string")&&(r=f.getRGB(r)),f.is(r,"object")&&"r"in r&&"g"in r&&"b"in r?(s=f.rgb2hsl(r),r.h=s.h,r.s=s.s,r.l=s.l,s=f.rgb2hsb(r),r.v=s.b):(r={hex:"none"}).r=r.g=r.b=r.h=r.s=r.v=r.l=-1),r.toString=_t,r},f.hsb2rgb=function(r,s,a,l){var p,v,C,w,S;return this.is(r,"object")&&"h"in r&&"s"in r&&"b"in r&&(a=r.b,s=r.s,l=r.o,r=r.h),w=(S=a*s)*(1-we((r=(r*=360)%360/60)%2-1)),p=v=C=a-S,Tt(p+=[S,w,0,0,w,S][r=~~r],v+=[w,S,S,w,0,0][r],C+=[0,0,w,S,S,w][r],l)},f.hsl2rgb=function(r,s,a,l){var p,v,C,w,S;return this.is(r,"object")&&"h"in r&&"s"in r&&"l"in r&&(a=r.l,s=r.s,r=r.h),(r>1||s>1||a>1)&&(r/=360,s/=100,a/=100),w=(S=2*s*(a<.5?a:1-a))*(1-we((r=(r*=360)%360/60)%2-1)),p=v=C=a-S/2,Tt(p+=[S,w,0,0,w,S][r=~~r],v+=[w,S,S,w,0,0][r],C+=[0,0,w,S,S,w][r],l)},f.rgb2hsb=function(r,s,a){var l,p;return r=(a=ut(r,s,a))[0],s=a[1],a=a[2],{h:(((p=(l=_e(r,s,a))-G(r,s,a))==0?null:l==r?(s-a)/p:l==s?(a-r)/p+2:(r-s)/p+4)+360)%6*60/360,s:p==0?0:p/l,b:l,toString:Xe}},f.rgb2hsl=function(r,s,a){var l,p,v,C;return r=(a=ut(r,s,a))[0],s=a[1],a=a[2],l=((p=_e(r,s,a))+(v=G(r,s,a)))/2,{h:(((C=p-v)==0?null:p==r?(s-a)/C:p==s?(a-r)/C+2:(r-s)/C+4)+360)%6*60/360,s:C==0?0:l<.5?C/(2*l):C/(2-2*l),l,toString:ct}},f._path2string=function(){return this.join(",").replace(V,"$1")},f._preload=function(r,s){var a=D.doc.createElement("img");a.style.cssText="position:absolute;left:-9999em;top:-9999em",a.onload=function(){s.call(this),this.onload=null,D.doc.body.removeChild(this)},a.onerror=function(){D.doc.body.removeChild(this)},D.doc.body.appendChild(a),a.src=r};function Ke(){return this.hex}function ht(r,s){for(var a=[],l=0,p=r.length;p-2*!s>l;l+=2){var v=[{x:+r[l-2],y:+r[l-1]},{x:+r[l],y:+r[l+1]},{x:+r[l+2],y:+r[l+3]},{x:+r[l+4],y:+r[l+5]}];s?l?p-4==l?v[3]={x:+r[0],y:+r[1]}:p-2==l&&(v[2]={x:+r[0],y:+r[1]},v[3]={x:+r[2],y:+r[3]}):v[0]={x:+r[p-2],y:+r[p-1]}:p-4==l?v[3]=v[2]:l||(v[0]={x:+r[l],y:+r[l+1]}),a.push(["C",(-v[0].x+6*v[1].x+v[2].x)/6,(-v[0].y+6*v[1].y+v[2].y)/6,(v[1].x+6*v[2].x-v[3].x)/6,(v[1].y+6*v[2].y-v[3].y)/6,v[2].x,v[2].y])}return a}f.getRGB=Oe(function(r){if(!r||(r=j(r)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ke};if(r=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Ke};!R[T](r.toLowerCase().substring(0,2))&&r.charAt()!="#"&&(r=Ve(r));var s,a,l,p,v,C,w=r.match(n);return w?(w[2]&&(l=c(w[2].substring(5),16),a=c(w[2].substring(3,5),16),s=c(w[2].substring(1,3),16)),w[3]&&(l=c((v=w[3].charAt(3))+v,16),a=c((v=w[3].charAt(2))+v,16),s=c((v=w[3].charAt(1))+v,16)),w[4]&&(C=w[4][ie](k),s=o(C[0]),C[0].slice(-1)=="%"&&(s*=2.55),a=o(C[1]),C[1].slice(-1)=="%"&&(a*=2.55),l=o(C[2]),C[2].slice(-1)=="%"&&(l*=2.55),w[1].toLowerCase().slice(0,4)=="rgba"&&(p=o(C[3])),C[3]&&C[3].slice(-1)=="%"&&(p/=100)),w[5]?(C=w[5][ie](k),s=o(C[0]),C[0].slice(-1)=="%"&&(s*=2.55),a=o(C[1]),C[1].slice(-1)=="%"&&(a*=2.55),l=o(C[2]),C[2].slice(-1)=="%"&&(l*=2.55),(C[0].slice(-3)=="deg"||C[0].slice(-1)=="┬░")&&(s/=360),w[1].toLowerCase().slice(0,4)=="hsba"&&(p=o(C[3])),C[3]&&C[3].slice(-1)=="%"&&(p/=100),f.hsb2rgb(s,a,l,p)):w[6]?(C=w[6][ie](k),s=o(C[0]),C[0].slice(-1)=="%"&&(s*=2.55),a=o(C[1]),C[1].slice(-1)=="%"&&(a*=2.55),l=o(C[2]),C[2].slice(-1)=="%"&&(l*=2.55),(C[0].slice(-3)=="deg"||C[0].slice(-1)=="┬░")&&(s/=360),w[1].toLowerCase().slice(0,4)=="hsla"&&(p=o(C[3])),C[3]&&C[3].slice(-1)=="%"&&(p/=100),f.hsl2rgb(s,a,l,p)):((w={r:s,g:a,b:l,toString:Ke}).hex="#"+(16777216|l|a<<8|s<<16).toString(16).slice(1),f.is(p,"finite")&&(w.opacity=p),w)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ke}},f),f.hsb=Oe(function(r,s,a){return f.hsb2rgb(r,s,a).hex}),f.hsl=Oe(function(r,s,a){return f.hsl2rgb(r,s,a).hex}),f.rgb=Oe(function(r,s,a){function l(p){return p+.5|0}return"#"+(16777216|l(a)|l(s)<<8|l(r)<<16).toString(16).slice(1)}),f.getColor=function(r){var s=this.getColor.start=this.getColor.start||{h:0,s:1,b:r||.75},a=this.hsb2rgb(s.h,s.s,s.b);return s.h+=.075,s.h>1&&(s.h=0,s.s-=.2,s.s<=0&&(this.getColor.start={h:0,s:1,b:s.b})),a.hex},f.getColor.reset=function(){delete this.start},f.parsePathString=function(r){if(!r)return null;var s=Ge(r);if(s.arr)return $e(s.arr);var a={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},l=[];return f.is(r,ae)&&f.is(r[0],ae)&&(l=$e(r)),l.length||j(r).replace(W,function(p,v,C){var w=[],S=v.toLowerCase();if(C.replace(te,function(I,J){J&&w.push(+J)}),S=="m"&&w.length>2&&(l.push([v][$](w.splice(0,2))),S="l",v=v=="m"?"l":"L"),S=="r")l.push([v][$](w));else for(;w.length>=a[S]&&(l.push([v][$](w.splice(0,a[S]))),a[S]););}),l.toString=f._path2string,s.arr=$e(l),l},f.parseTransformString=Oe(function(r){if(!r)return null;var s=[];return f.is(r,ae)&&f.is(r[0],ae)&&(s=$e(r)),s.length||j(r).replace(ne,function(a,l,p){var v=[];P.call(l),p.replace(te,function(C,w){w&&v.push(+w)}),s.push([l][$](v))}),s.toString=f._path2string,s},this,function(r){if(!r)return r;for(var s=[],a=0;a<r.length;a++){for(var l=[],p=0;p<r[a].length;p++)l.push(r[a][p]);s.push(l)}return s});var Ge=function(r){var s=Ge.ps=Ge.ps||{};return s[r]?s[r].sleep=100:s[r]={sleep:100},setTimeout(function(){for(var a in s)s[T](a)&&a!=r&&(s[a].sleep--,!s[a].sleep&&delete s[a])}),s[r]};function dt(r,s,a,l,p){return r*(r*(-3*s+9*a-9*l+3*p)+6*s-12*a+6*l)-3*s+3*a}function We(r,s,a,l,p,v,C,w,S){S==null&&(S=1);for(var I=(S=S>1?1:S<0?0:S)/2,J=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ue=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0,Y=0;Y<12;Y++){var re=I*J[Y]+I,he=dt(re,r,a,p,C),oe=dt(re,s,l,v,w),K=he*he+oe*oe;Z+=ue[Y]*le.sqrt(K)}return I*Z}function kt(r,s,a,l,p,v,C,w){if(!(_e(r,a)<G(p,C)||G(r,a)>_e(p,C)||_e(s,l)<G(v,w)||G(s,l)>_e(v,w))){var S=(r-a)*(v-w)-(s-l)*(p-C);if(S){var I=((r*l-s*a)*(p-C)-(r-a)*(p*w-v*C))/S,J=((r*l-s*a)*(v-w)-(s-l)*(p*w-v*C))/S,ue=+I.toFixed(2),Z=+J.toFixed(2);if(!(ue<+G(r,a).toFixed(2)||ue>+_e(r,a).toFixed(2)||ue<+G(p,C).toFixed(2)||ue>+_e(p,C).toFixed(2)||Z<+G(s,l).toFixed(2)||Z>+_e(s,l).toFixed(2)||Z<+G(v,w).toFixed(2)||Z>+_e(v,w).toFixed(2)))return{x:I,y:J}}}}function ft(r,s,a){var l=f.bezierBBox(r),p=f.bezierBBox(s);if(!f.isBBoxIntersect(l,p))return a?0:[];for(var v=We.apply(0,r),C=We.apply(0,s),w=_e(~~(v/5),1),S=_e(~~(C/5),1),I=[],J=[],ue={},Z=a?0:[],Y=0;Y<w+1;Y++){var re=f.findDotsAtSegment.apply(f,r.concat(Y/w));I.push({x:re.x,y:re.y,t:Y/w})}for(Y=0;Y<S+1;Y++)re=f.findDotsAtSegment.apply(f,s.concat(Y/S)),J.push({x:re.x,y:re.y,t:Y/S});for(Y=0;Y<w;Y++)for(var he=0;he<S;he++){var oe=I[Y],K=I[Y+1],Ce=J[he],de=J[he+1],ve=we(K.x-oe.x)<.001?"y":"x",fe=we(de.x-Ce.x)<.001?"y":"x",Le=kt(oe.x,oe.y,K.x,K.y,Ce.x,Ce.y,de.x,de.y);if(Le){if(ue[Le.x.toFixed(4)]==Le.y.toFixed(4))continue;ue[Le.x.toFixed(4)]=Le.y.toFixed(4);var Ee=oe.t+we((Le[ve]-oe[ve])/(K[ve]-oe[ve]))*(K.t-oe.t),Be=Ce.t+we((Le[fe]-Ce[fe])/(de[fe]-Ce[fe]))*(de.t-Ce.t);Ee>=0&&Ee<=1.001&&Be>=0&&Be<=1.001&&(a?Z++:Z.push({x:Le.x,y:Le.y,t1:G(Ee,1),t2:G(Be,1)}))}}return Z}function St(r,s,a){r=f._path2curve(r),s=f._path2curve(s);for(var l,p,v,C,w,S,I,J,ue,Z,Y=a?0:[],re=0,he=r.length;re<he;re++){var oe=r[re];if(oe[0]=="M")l=w=oe[1],p=S=oe[2];else{oe[0]=="C"?(ue=[l,p].concat(oe.slice(1)),l=ue[6],p=ue[7]):(ue=[l,p,l,p,w,S,w,S],l=w,p=S);for(var K=0,Ce=s.length;K<Ce;K++){var de=s[K];if(de[0]=="M")v=I=de[1],C=J=de[2];else{de[0]=="C"?(Z=[v,C].concat(de.slice(1)),v=Z[6],C=Z[7]):(Z=[v,C,v,C,I,J,I,J],v=I,C=J);var ve=ft(ue,Z,a);if(a)Y+=ve;else{for(var fe=0,Le=ve.length;fe<Le;fe++)ve[fe].segment1=re,ve[fe].segment2=K,ve[fe].bez1=ue,ve[fe].bez2=Z;Y=Y.concat(ve)}}}}}return Y}f.findDotsAtSegment=function(r,s,a,l,p,v,C,w,S){var I=1-S,J=ke(I,3),ue=ke(I,2),Z=S*S,Y=Z*S,re=J*r+3*ue*S*a+3*I*S*S*p+Y*C,he=J*s+3*ue*S*l+3*I*S*S*v+Y*w,oe=r+2*S*(a-r)+Z*(p-2*a+r),K=s+2*S*(l-s)+Z*(v-2*l+s),Ce=a+2*S*(p-a)+Z*(C-2*p+a),de=l+2*S*(v-l)+Z*(w-2*v+l),ve=I*r+S*a,fe=I*s+S*l,Le=I*p+S*C,Ee=I*v+S*w,Be=90-180*le.atan2(oe-Ce,K-de)/ee;return(oe>Ce||K<de)&&(Be+=180),{x:re,y:he,m:{x:oe,y:K},n:{x:Ce,y:de},start:{x:ve,y:fe},end:{x:Le,y:Ee},alpha:Be}},f.bezierBBox=function(r,s,a,l,p,v,C,w){f.is(r,"array")||(r=[r,s,a,l,p,v,C,w]);var S=Mt.apply(null,r);return{x:S.min.x,y:S.min.y,x2:S.max.x,y2:S.max.y,width:S.max.x-S.min.x,height:S.max.y-S.min.y}},f.isPointInsideBBox=function(r,s,a){return s>=r.x&&s<=r.x2&&a>=r.y&&a<=r.y2},f.isBBoxIntersect=function(r,s){var a=f.isPointInsideBBox;return a(s,r.x,r.y)||a(s,r.x2,r.y)||a(s,r.x,r.y2)||a(s,r.x2,r.y2)||a(r,s.x,s.y)||a(r,s.x2,s.y)||a(r,s.x,s.y2)||a(r,s.x2,s.y2)||(r.x<s.x2&&r.x>s.x||s.x<r.x2&&s.x>r.x)&&(r.y<s.y2&&r.y>s.y||s.y<r.y2&&s.y>r.y)},f.pathIntersection=function(r,s){return St(r,s)},f.pathIntersectionNumber=function(r,s){return St(r,s,1)},f.isPointInsidePath=function(r,s,a){var l=f.pathBBox(r);return f.isPointInsideBBox(l,s,a)&&St(r,[["M",s,a],["H",l.x2+10]],1)%2==1},f._removedFactory=function(r){return function(){u("raphael.log",null,"Rapha├лl: you are calling to method тАЬ"+r+"тАЭ of removed object",r)}};var Ze=f.pathBBox=function(r){var s=Ge(r);if(s.bbox)return qe(s.bbox);if(!r)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var a,l=0,p=0,v=[],C=[],w=0,S=(r=At(r)).length;w<S;w++)if((a=r[w])[0]=="M")l=a[1],p=a[2],v.push(l),C.push(p);else{var I=Mt(l,p,a[1],a[2],a[3],a[4],a[5],a[6]);v=v[$](I.min.x,I.max.x),C=C[$](I.min.y,I.max.y),l=a[5],p=a[6]}var J=G[U](0,v),ue=G[U](0,C),Z=_e[U](0,v),Y=_e[U](0,C),re=Z-J,he=Y-ue,oe={x:J,y:ue,x2:Z,y2:Y,width:re,height:he,cx:J+re/2,cy:ue+he/2};return s.bbox=qe(oe),oe},$e=function(r){var s=qe(r);return s.toString=f._path2string,s},Zt=f._pathToRelative=function(r){var s=Ge(r);if(s.rel)return $e(s.rel);f.is(r,ae)&&f.is(r&&r[0],ae)||(r=f.parsePathString(r));var a=[],l=0,p=0,v=0,C=0,w=0;r[0][0]=="M"&&(v=l=r[0][1],C=p=r[0][2],w++,a.push(["M",l,p]));for(var S=w,I=r.length;S<I;S++){var J=a[S]=[],ue=r[S];if(ue[0]!=P.call(ue[0]))switch(J[0]=P.call(ue[0]),J[0]){case"a":J[1]=ue[1],J[2]=ue[2],J[3]=ue[3],J[4]=ue[4],J[5]=ue[5],J[6]=+(ue[6]-l).toFixed(3),J[7]=+(ue[7]-p).toFixed(3);break;case"v":J[1]=+(ue[1]-p).toFixed(3);break;case"m":v=ue[1],C=ue[2];default:for(var Z=1,Y=ue.length;Z<Y;Z++)J[Z]=+(ue[Z]-(Z%2?l:p)).toFixed(3)}else{J=a[S]=[],ue[0]=="m"&&(v=ue[1]+l,C=ue[2]+p);for(var re=0,he=ue.length;re<he;re++)a[S][re]=ue[re]}var oe=a[S].length;switch(a[S][0]){case"z":l=v,p=C;break;case"h":l+=+a[S][oe-1];break;case"v":p+=+a[S][oe-1];break;default:l+=+a[S][oe-2],p+=+a[S][oe-1]}}return a.toString=f._path2string,s.rel=$e(a),a},pt=f._pathToAbsolute=function(r){var s=Ge(r);if(s.abs)return $e(s.abs);if(f.is(r,ae)&&f.is(r&&r[0],ae)||(r=f.parsePathString(r)),!r||!r.length)return[["M",0,0]];var a=[],l=0,p=0,v=0,C=0,w=0;r[0][0]=="M"&&(v=l=+r[0][1],C=p=+r[0][2],w++,a[0]=["M",l,p]);for(var S,I,J=r.length==3&&r[0][0]=="M"&&r[1][0].toUpperCase()=="R"&&r[2][0].toUpperCase()=="Z",ue=w,Z=r.length;ue<Z;ue++){if(a.push(S=[]),(I=r[ue])[0]!=h.call(I[0]))switch(S[0]=h.call(I[0]),S[0]){case"A":S[1]=I[1],S[2]=I[2],S[3]=I[3],S[4]=I[4],S[5]=I[5],S[6]=+(I[6]+l),S[7]=+(I[7]+p);break;case"V":S[1]=+I[1]+p;break;case"H":S[1]=+I[1]+l;break;case"R":for(var Y=[l,p][$](I.slice(1)),re=2,he=Y.length;re<he;re++)Y[re]=+Y[re]+l,Y[++re]=+Y[re]+p;a.pop(),a=a[$](ht(Y,J));break;case"M":v=+I[1]+l,C=+I[2]+p;default:for(re=1,he=I.length;re<he;re++)S[re]=+I[re]+(re%2?l:p)}else if(I[0]=="R")Y=[l,p][$](I.slice(1)),a.pop(),a=a[$](ht(Y,J)),S=["R"][$](I.slice(-2));else for(var oe=0,K=I.length;oe<K;oe++)S[oe]=I[oe];switch(S[0]){case"Z":l=v,p=C;break;case"H":l=S[1];break;case"V":p=S[1];break;case"M":v=S[S.length-2],C=S[S.length-1];default:l=S[S.length-2],p=S[S.length-1]}}return a.toString=f._path2string,s.abs=$e(a),a},mt=function(r,s,a,l){return[r,s,a,l,a,l]},et=function(r,s,a,l,p,v){return[1/3*r+2/3*a,1/3*s+2/3*l,1/3*p+2/3*a,1/3*v+2/3*l,p,v]},Nt=function(r,s,a,l,p,v,C,w,S,I){var J,ue=120*ee/180,Z=ee/180*(+p||0),Y=[],re=Oe(function(v1,y1,zt){return{x:v1*le.cos(zt)-y1*le.sin(zt),y:v1*le.sin(zt)+y1*le.cos(zt)}});if(I)Ee=I[0],Be=I[1],fe=I[2],Le=I[3];else{r=(J=re(r,s,-Z)).x,s=J.y,w=(J=re(w,S,-Z)).x,S=J.y;var he=(r-w)/2,oe=(s-S)/2,K=he*he/(a*a)+oe*oe/(l*l);K>1&&(a*=K=le.sqrt(K),l*=K);var Ce=a*a,de=l*l,ve=(v==C?-1:1)*le.sqrt(we((Ce*de-Ce*oe*oe-de*he*he)/(Ce*oe*oe+de*he*he))),fe=ve*a*oe/l+(r+w)/2,Le=ve*-l*he/a+(s+S)/2,Ee=le.asin(((s-Le)/l).toFixed(9)),Be=le.asin(((S-Le)/l).toFixed(9));(Ee=r<fe?ee-Ee:Ee)<0&&(Ee=2*ee+Ee),(Be=w<fe?ee-Be:Be)<0&&(Be=2*ee+Be),C&&Ee>Be&&(Ee-=2*ee),!C&&Be>Ee&&(Be-=2*ee)}var vt=Be-Ee;if(we(vt)>ue){var Rt=Be,Ue=w,Ye=S;Be=Ee+ue*(C&&Be>Ee?1:-1),w=fe+a*le.cos(Be),S=Le+l*le.sin(Be),Y=Nt(w,S,a,l,p,0,C,Ue,Ye,[Be,Rt,fe,Le])}vt=Be-Ee;var yt=le.cos(Ee),xt=le.sin(Ee),Dt=le.cos(Be),Qe=le.sin(Be),at=le.tan(vt/4),qt=4/3*a*at,d1=4/3*l*at,f1=[r,s],bt=[r+qt*xt,s-d1*yt],p1=[w+qt*Qe,S-d1*Dt],m1=[w,S];if(bt[0]=2*f1[0]-bt[0],bt[1]=2*f1[1]-bt[1],I)return[bt,p1,m1][$](Y);for(var g1=[],nt=0,H1=(Y=[bt,p1,m1][$](Y).join()[ie](",")).length;nt<H1;nt++)g1[nt]=nt%2?re(Y[nt-1],Y[nt],Z).y:re(Y[nt],Y[nt+1],Z).x;return g1},it=function(r,s,a,l,p,v,C,w,S){var I=1-S;return{x:ke(I,3)*r+3*ke(I,2)*S*a+3*I*S*S*p+ke(S,3)*C,y:ke(I,3)*s+3*ke(I,2)*S*l+3*I*S*S*v+ke(S,3)*w}},Mt=Oe(function(r,s,a,l,p,v,C,w){var S,I=p-2*a+r-(C-2*p+a),J=2*(a-r)-2*(p-a),ue=r-a,Z=(-J+le.sqrt(J*J-4*I*ue))/2/I,Y=(-J-le.sqrt(J*J-4*I*ue))/2/I,re=[s,w],he=[r,C];return we(Z)>"1e12"&&(Z=.5),we(Y)>"1e12"&&(Y=.5),Z>0&&Z<1&&(S=it(r,s,a,l,p,v,C,w,Z),he.push(S.x),re.push(S.y)),Y>0&&Y<1&&(S=it(r,s,a,l,p,v,C,w,Y),he.push(S.x),re.push(S.y)),I=v-2*l+s-(w-2*v+l),ue=s-l,Z=(-(J=2*(l-s)-2*(v-l))+le.sqrt(J*J-4*I*ue))/2/I,Y=(-J-le.sqrt(J*J-4*I*ue))/2/I,we(Z)>"1e12"&&(Z=.5),we(Y)>"1e12"&&(Y=.5),Z>0&&Z<1&&(S=it(r,s,a,l,p,v,C,w,Z),he.push(S.x),re.push(S.y)),Y>0&&Y<1&&(S=it(r,s,a,l,p,v,C,w,Y),he.push(S.x),re.push(S.y)),{min:{x:G[U](0,he),y:G[U](0,re)},max:{x:_e[U](0,he),y:_e[U](0,re)}}}),At=f._path2curve=Oe(function(r,s){var a=!s&&Ge(r);if(!s&&a.curve)return $e(a.curve);for(var l=pt(r),p=s&&pt(s),v={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},C={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},w=function(ve,fe,Le){var Ee,Be;if(!ve)return["C",fe.x,fe.y,fe.x,fe.y,fe.x,fe.y];switch(!(ve[0]in{T:1,Q:1})&&(fe.qx=fe.qy=null),ve[0]){case"M":fe.X=ve[1],fe.Y=ve[2];break;case"A":ve=["C"][$](Nt[U](0,[fe.x,fe.y][$](ve.slice(1))));break;case"S":Le=="C"||Le=="S"?(Ee=2*fe.x-fe.bx,Be=2*fe.y-fe.by):(Ee=fe.x,Be=fe.y),ve=["C",Ee,Be][$](ve.slice(1));break;case"T":Le=="Q"||Le=="T"?(fe.qx=2*fe.x-fe.qx,fe.qy=2*fe.y-fe.qy):(fe.qx=fe.x,fe.qy=fe.y),ve=["C"][$](et(fe.x,fe.y,fe.qx,fe.qy,ve[1],ve[2]));break;case"Q":fe.qx=ve[1],fe.qy=ve[2],ve=["C"][$](et(fe.x,fe.y,ve[1],ve[2],ve[3],ve[4]));break;case"L":ve=["C"][$](mt(fe.x,fe.y,ve[1],ve[2]));break;case"H":ve=["C"][$](mt(fe.x,fe.y,ve[1],fe.y));break;case"V":ve=["C"][$](mt(fe.x,fe.y,fe.x,ve[1]));break;case"Z":ve=["C"][$](mt(fe.x,fe.y,fe.X,fe.Y))}return ve},S=function(ve,fe){if(ve[fe].length>7){ve[fe].shift();for(var Le=ve[fe];Le.length;)J[fe]="A",p&&(ue[fe]="A"),ve.splice(fe++,0,["C"][$](Le.splice(0,6)));ve.splice(fe,1),he=_e(l.length,p&&p.length||0)}},I=function(ve,fe,Le,Ee,Be){ve&&fe&&ve[Be][0]=="M"&&fe[Be][0]!="M"&&(fe.splice(Be,0,["M",Ee.x,Ee.y]),Le.bx=0,Le.by=0,Le.x=ve[Be][1],Le.y=ve[Be][2],he=_e(l.length,p&&p.length||0))},J=[],ue=[],Z="",Y="",re=0,he=_e(l.length,p&&p.length||0);re<he;re++){l[re]&&(Z=l[re][0]),Z!="C"&&(J[re]=Z,re&&(Y=J[re-1])),l[re]=w(l[re],v,Y),J[re]!="A"&&Z=="C"&&(J[re]="C"),S(l,re),p&&(p[re]&&(Z=p[re][0]),Z!="C"&&(ue[re]=Z,re&&(Y=ue[re-1])),p[re]=w(p[re],C,Y),ue[re]!="A"&&Z=="C"&&(ue[re]="C"),S(p,re)),I(l,p,v,C,re),I(p,l,C,v,re);var oe=l[re],K=p&&p[re],Ce=oe.length,de=p&&K.length;v.x=oe[Ce-2],v.y=oe[Ce-1],v.bx=o(oe[Ce-4])||v.x,v.by=o(oe[Ce-3])||v.y,C.bx=p&&(o(K[de-4])||C.x),C.by=p&&(o(K[de-3])||C.y),C.x=p&&K[de-2],C.y=p&&K[de-1]}return p||(a.curve=$e(l)),p?[l,p]:l},null,$e),It=(f._parseDots=Oe(function(r){for(var s=[],a=0,l=r.length;a<l;a++){var p={},v=r[a].match(/^([^:]*):?([\d\.]*)/);if(p.color=f.getRGB(v[1]),p.color.error)return null;p.opacity=p.color.opacity,p.color=p.color.hex,v[2]&&(p.offset=v[2]+"%"),s.push(p)}for(a=1,l=s.length-1;a<l;a++)if(!s[a].offset){for(var C=o(s[a-1].offset||0),w=0,S=a+1;S<l;S++)if(s[S].offset){w=s[S].offset;break}w||(w=100,S=l);for(var I=((w=o(w))-C)/(S-a+1);a<S;a++)C+=I,s[a].offset=C+"%"}return s}),f._tear=function(r,s){r==s.top&&(s.top=r.prev),r==s.bottom&&(s.bottom=r.next),r.next&&(r.next.prev=r.prev),r.prev&&(r.prev.next=r.next)}),N1=(f._tofront=function(r,s){s.top!==r&&(It(r,s),r.next=null,r.prev=s.top,s.top.next=r,s.top=r)},f._toback=function(r,s){s.bottom!==r&&(It(r,s),r.next=s.bottom,r.prev=null,s.bottom.prev=r,s.bottom=r)},f._insertafter=function(r,s,a){It(r,a),s==a.top&&(a.top=r),s.next&&(s.next.prev=r),r.next=s.next,r.prev=s,s.next=r},f._insertbefore=function(r,s,a){It(r,a),s==a.bottom&&(a.bottom=r),s.prev&&(s.prev.next=r),r.prev=s.prev,s.prev=r,r.next=s},f.toMatrix=function(r,s){var a=Ze(r),l={_:{transform:pe},getBBox:function(){return a}};return e1(l,s),l.matrix}),e1=(f.transformPath=function(r,s){return Me(r,N1(r,s))},f._extractTransform=function(r,s){if(s==null)return r._.transform;s=j(s).replace(/\.{3}|\u2026/g,r._.transform||pe);var a,l,p=f.parseTransformString(s),v=0,C=1,w=1,S=r._,I=new st;if(S.transform=p||[],p)for(var J=0,ue=p.length;J<ue;J++){var Z,Y,re,he,oe,K=p[J],Ce=K.length,de=j(K[0]).toLowerCase(),ve=K[0]!=de,fe=ve?I.invert():0;de=="t"&&Ce==3?ve?(Z=fe.x(0,0),Y=fe.y(0,0),re=fe.x(K[1],K[2]),he=fe.y(K[1],K[2]),I.translate(re-Z,he-Y)):I.translate(K[1],K[2]):de=="r"?Ce==2?(oe=oe||r.getBBox(1),I.rotate(K[1],oe.x+oe.width/2,oe.y+oe.height/2),v+=K[1]):Ce==4&&(ve?(re=fe.x(K[2],K[3]),he=fe.y(K[2],K[3]),I.rotate(K[1],re,he)):I.rotate(K[1],K[2],K[3]),v+=K[1]):de=="s"?Ce==2||Ce==3?(oe=oe||r.getBBox(1),I.scale(K[1],K[Ce-1],oe.x+oe.width/2,oe.y+oe.height/2),C*=K[1],w*=K[Ce-1]):Ce==5&&(ve?(re=fe.x(K[3],K[4]),he=fe.y(K[3],K[4]),I.scale(K[1],K[2],re,he)):I.scale(K[1],K[2],K[3],K[4]),C*=K[1],w*=K[2]):de=="m"&&Ce==7&&I.add(K[1],K[2],K[3],K[4],K[5],K[6]),S.dirtyT=1,r.matrix=I}r.matrix=I,S.sx=C,S.sy=w,S.deg=v,S.dx=a=I.e,S.dy=l=I.f,C==1&&w==1&&!v&&S.bbox?(S.bbox.x+=+a,S.bbox.y+=+l):S.dirtyT=1}),t1=function(r){var s=r[0];switch(s.toLowerCase()){case"t":return[s,0,0];case"m":return[s,1,0,0,1,0,0];case"r":return r.length==4?[s,0,r[2],r[3]]:[s,0];case"s":return r.length==5?[s,1,1,r[3],r[4]]:r.length==3?[s,1,1]:[s,1]}},M1=f._equaliseTransform=function(r,s){s=j(s).replace(/\.{3}|\u2026/g,r),r=f.parseTransformString(r)||[],s=f.parseTransformString(s)||[];for(var a,l,p,v,C=_e(r.length,s.length),w=[],S=[],I=0;I<C;I++){if(p=r[I]||t1(s[I]),v=s[I]||t1(p),p[0]!=v[0]||p[0].toLowerCase()=="r"&&(p[2]!=v[2]||p[3]!=v[3])||p[0].toLowerCase()=="s"&&(p[3]!=v[3]||p[4]!=v[4]))return;for(w[I]=[],S[I]=[],a=0,l=_e(p.length,v.length);a<l;a++)a in p&&(w[I][a]=p[a]),a in v&&(S[I][a]=v[a])}return{from:w,to:S}};function st(r,s,a,l,p,v){r!=null?(this.a=+r,this.b=+s,this.c=+a,this.d=+l,this.e=+p,this.f=+v):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}f._getContainer=function(r,s,a,l){var p;if((p=l!=null||f.is(r,"object")?r:D.doc.getElementById(r))!=null)return p.tagName?s==null?{container:p,width:p.style.pixelWidth||p.offsetWidth,height:p.style.pixelHeight||p.offsetHeight}:{container:p,width:s,height:a}:{container:1,x:r,y:s,width:a,height:l}},f.pathToRelative=Zt,f._engine={},f.path2curve=At,f.matrix=function(r,s,a,l,p,v){return new st(r,s,a,l,p,v)},function(r){function s(l){return l[0]*l[0]+l[1]*l[1]}function a(l){var p=le.sqrt(s(l));l[0]&&(l[0]/=p),l[1]&&(l[1]/=p)}r.add=function(l,p,v,C,w,S){var I,J,ue,Z,Y=[[],[],[]],re=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],he=[[l,v,w],[p,C,S],[0,0,1]];for(l&&l instanceof st&&(he=[[l.a,l.c,l.e],[l.b,l.d,l.f],[0,0,1]]),I=0;I<3;I++)for(J=0;J<3;J++){for(Z=0,ue=0;ue<3;ue++)Z+=re[I][ue]*he[ue][J];Y[I][J]=Z}this.a=Y[0][0],this.b=Y[1][0],this.c=Y[0][1],this.d=Y[1][1],this.e=Y[0][2],this.f=Y[1][2]},r.invert=function(){var l=this,p=l.a*l.d-l.b*l.c;return new st(l.d/p,-l.b/p,-l.c/p,l.a/p,(l.c*l.f-l.d*l.e)/p,(l.b*l.e-l.a*l.f)/p)},r.clone=function(){return new st(this.a,this.b,this.c,this.d,this.e,this.f)},r.translate=function(l,p){this.add(1,0,0,1,l,p)},r.scale=function(l,p,v,C){p==null&&(p=l),(v||C)&&this.add(1,0,0,1,v,C),this.add(l,0,0,p,0,0),(v||C)&&this.add(1,0,0,1,-v,-C)},r.rotate=function(l,p,v){l=f.rad(l),p=p||0,v=v||0;var C=+le.cos(l).toFixed(9),w=+le.sin(l).toFixed(9);this.add(C,w,-w,C,p,v),this.add(1,0,0,1,-p,-v)},r.x=function(l,p){return l*this.a+p*this.c+this.e},r.y=function(l,p){return l*this.b+p*this.d+this.f},r.get=function(l){return+this[j.fromCharCode(97+l)].toFixed(4)},r.toString=function(){return f.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},r.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},r.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},r.split=function(){var l={};l.dx=this.e,l.dy=this.f;var p=[[this.a,this.c],[this.b,this.d]];l.scalex=le.sqrt(s(p[0])),a(p[0]),l.shear=p[0][0]*p[1][0]+p[0][1]*p[1][1],p[1]=[p[1][0]-p[0][0]*l.shear,p[1][1]-p[0][1]*l.shear],l.scaley=le.sqrt(s(p[1])),a(p[1]),l.shear/=l.scaley;var v=-p[0][1],C=p[1][1];return C<0?(l.rotate=f.deg(le.acos(C)),v<0&&(l.rotate=360-l.rotate)):l.rotate=f.deg(le.asin(v)),l.isSimple=!(+l.shear.toFixed(9)||l.scalex.toFixed(9)!=l.scaley.toFixed(9)&&l.rotate),l.isSuperSimple=!+l.shear.toFixed(9)&&l.scalex.toFixed(9)==l.scaley.toFixed(9)&&!l.rotate,l.noRotation=!+l.shear.toFixed(9)&&!l.rotate,l},r.toTransformString=function(l){var p=l||this[ie]();return p.isSimple?(p.scalex=+p.scalex.toFixed(4),p.scaley=+p.scaley.toFixed(4),p.rotate=+p.rotate.toFixed(4),(p.dx||p.dy?"t"+[p.dx,p.dy]:pe)+(p.scalex!=1||p.scaley!=1?"s"+[p.scalex,p.scaley,0,0]:pe)+(p.rotate?"r"+[p.rotate,0,0]:pe)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(st.prototype);for(var I1=function(){this.returnValue=!1},D1=function(){return this.originalEvent.preventDefault()},q1=function(){this.cancelBubble=!0},z1=function(){return this.originalEvent.stopPropagation()},n1=function(r){var s=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,a=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft;return{x:r.clientX+a,y:r.clientY+s}},F1=D.doc.addEventListener?function(r,s,a,l){var p=function(C){var w=n1(C);return a.call(l,C,w.x,w.y)};if(r.addEventListener(s,p,!1),ce&&Se[s]){var v=function(C){for(var w=n1(C),S=C,I=0,J=C.targetTouches&&C.targetTouches.length;I<J;I++)if(C.targetTouches[I].target==r){(C=C.targetTouches[I]).originalEvent=S,C.preventDefault=D1,C.stopPropagation=z1;break}return a.call(l,C,w.x,w.y)};r.addEventListener(Se[s],v,!1)}return function(){return r.removeEventListener(s,p,!1),ce&&Se[s]&&r.removeEventListener(Se[s],v,!1),!0}}:D.doc.attachEvent?function(r,s,a,l){var p=function(v){v=v||D.win.event;var C=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,w=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft,S=v.clientX+w,I=v.clientY+C;return v.preventDefault=v.preventDefault||I1,v.stopPropagation=v.stopPropagation||q1,a.call(l,v,S,I)};return r.attachEvent("on"+s,p),function(){return r.detachEvent("on"+s,p),!0}}:void 0,tt=[],Vt=function(r){for(var s,a=r.clientX,l=r.clientY,p=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,v=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft,C=tt.length;C--;){if(s=tt[C],ce&&r.touches){for(var w,S=r.touches.length;S--;)if((w=r.touches[S]).identifier==s.el._drag.id){a=w.clientX,l=w.clientY,(r.originalEvent?r.originalEvent:r).preventDefault();break}}else r.preventDefault();var I,J=s.el.node,ue=J.nextSibling,Z=J.parentNode,Y=J.style.display;D.win.opera&&Z.removeChild(J),J.style.display="none",I=s.el.paper.getElementByPoint(a,l),J.style.display=Y,D.win.opera&&(ue?Z.insertBefore(J,ue):Z.appendChild(J)),I&&u("raphael.drag.over."+s.el.id,s.el,I),a+=v,l+=p,u("raphael.drag.move."+s.el.id,s.move_scope||s.el,a-s.el._drag.x,l-s.el._drag.y,a,l,r)}},$t=function(r){f.unmousemove(Vt).unmouseup($t);for(var s,a=tt.length;a--;)(s=tt[a]).el._drag={},u("raphael.drag.end."+s.el.id,s.end_scope||s.start_scope||s.move_scope||s.el,r);tt=[]},Ie=f.el={},r1=B.length;r1--;)(function(r){f[r]=Ie[r]=function(s,a){return f.is(s,"function")&&(this.events=this.events||[],this.events.push({name:r,f:s,unbind:F1(this.shape||this.node||D.doc,r,s,a||this)})),this},f["un"+r]=Ie["un"+r]=function(s){for(var a=this.events||[],l=a.length;l--;)a[l].name!=r||!f.is(s,"undefined")&&a[l].f!=s||(a[l].unbind(),a.splice(l,1),!a.length&&delete this.events);return this}})(B[r1]);Ie.data=function(r,s){var a=me[this.id]=me[this.id]||{};if(arguments.length==0)return a;if(arguments.length==1){if(f.is(r,"object")){for(var l in r)r[T](l)&&this.data(l,r[l]);return this}return u("raphael.data.get."+this.id,this,a[r],r),a[r]}return a[r]=s,u("raphael.data.set."+this.id,this,s,r),this},Ie.removeData=function(r){return r==null?delete me[this.id]:me[this.id]&&delete me[this.id][r],this},Ie.getData=function(){return qe(me[this.id]||{})},Ie.hover=function(r,s,a,l){return this.mouseover(r,a).mouseout(s,l||a)},Ie.unhover=function(r,s){return this.unmouseover(r).unmouseout(s)};var gt=[];Ie.drag=function(r,s,a,l,p,v){function C(w){(w.originalEvent||w).preventDefault();var S=w.clientX,I=w.clientY,J=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,ue=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft;if(this._drag.id=w.identifier,ce&&w.touches){for(var Z,Y=w.touches.length;Y--;)if(Z=w.touches[Y],this._drag.id=Z.identifier,Z.identifier==this._drag.id){S=Z.clientX,I=Z.clientY;break}}this._drag.x=S+ue,this._drag.y=I+J,!tt.length&&f.mousemove(Vt).mouseup($t),tt.push({el:this,move_scope:l,start_scope:p,end_scope:v}),s&&u.on("raphael.drag.start."+this.id,s),r&&u.on("raphael.drag.move."+this.id,r),a&&u.on("raphael.drag.end."+this.id,a),u("raphael.drag.start."+this.id,p||l||this,this._drag.x,this._drag.y,w)}return this._drag={},gt.push({el:this,start:C}),this.mousedown(C),this},Ie.onDragOver=function(r){r?u.on("raphael.drag.over."+this.id,r):u.unbind("raphael.drag.over."+this.id)},Ie.undrag=function(){for(var r=gt.length;r--;)gt[r].el==this&&(this.unmousedown(gt[r].start),gt.splice(r,1),u.unbind("raphael.drag.*."+this.id));!gt.length&&f.unmousemove(Vt).unmouseup($t),tt=[]},E.circle=function(r,s,a){var l=f._engine.circle(this,r||0,s||0,a||0);return this.__set__&&this.__set__.push(l),l},E.rect=function(r,s,a,l,p){var v=f._engine.rect(this,r||0,s||0,a||0,l||0,p||0);return this.__set__&&this.__set__.push(v),v},E.ellipse=function(r,s,a,l){var p=f._engine.ellipse(this,r||0,s||0,a||0,l||0);return this.__set__&&this.__set__.push(p),p},E.path=function(r){r&&!f.is(r,"string")&&!f.is(r[0],ae)&&(r+=pe);var s=f._engine.path(f.format[U](f,arguments),this);return this.__set__&&this.__set__.push(s),s},E.image=function(r,s,a,l,p){var v=f._engine.image(this,r||"about:blank",s||0,a||0,l||0,p||0);return this.__set__&&this.__set__.push(v),v},E.text=function(r,s,a){var l=f._engine.text(this,r||0,s||0,j(a));return this.__set__&&this.__set__.push(l),l},E.set=function(r){!f.is(r,"array")&&(r=Array.prototype.splice.call(arguments,0,arguments.length));var s=new Et(r);return this.__set__&&this.__set__.push(s),s.paper=this,s.type="set",s},E.setStart=function(r){this.__set__=r||this.set()},E.setFinish=function(r){var s=this.__set__;return delete this.__set__,s},E.getSize=function(){var r=this.canvas.parentNode;return{width:r.offsetWidth,height:r.offsetHeight}},E.setSize=function(r,s){return f._engine.setSize.call(this,r,s)},E.setViewBox=function(r,s,a,l,p){return f._engine.setViewBox.call(this,r,s,a,l,p)},E.top=E.bottom=null,E.raphael=f;function i1(){return this.x+ye+this.y+ye+this.width+" ├Ч "+this.height}E.getElementByPoint=function(r,s){var a,l,p,v,C,w,S,I=this.canvas,J=D.doc.elementFromPoint(r,s);if(D.win.opera&&J.tagName=="svg"){var ue=(l=(a=I).getBoundingClientRect(),p=a.ownerDocument,v=p.body,C=p.documentElement,w=C.clientTop||v.clientTop||0,S=C.clientLeft||v.clientLeft||0,{y:l.top+(D.win.pageYOffset||C.scrollTop||v.scrollTop)-w,x:l.left+(D.win.pageXOffset||C.scrollLeft||v.scrollLeft)-S}),Z=I.createSVGRect();Z.x=r-ue.x,Z.y=s-ue.y,Z.width=Z.height=1;var Y=I.getIntersectionList(Z,null);Y.length&&(J=Y[Y.length-1])}if(!J)return null;for(;J.parentNode&&J!=I.parentNode&&!J.raphael;)J=J.parentNode;return J==this.canvas.parentNode&&(J=I),J=J&&J.raphael?this.getById(J.raphaelid):null},E.getElementsByBBox=function(r){var s=this.set();return this.forEach(function(a){f.isBBoxIntersect(a.getBBox(),r)&&s.push(a)}),s},E.getById=function(r){for(var s=this.bottom;s;){if(s.id==r)return s;s=s.next}return null},E.forEach=function(r,s){for(var a=this.bottom;a;){if(r.call(s,a)===!1)return this;a=a.next}return this},E.getElementsByPoint=function(r,s){var a=this.set();return this.forEach(function(l){l.isPointInside(r,s)&&a.push(l)}),a},Ie.isPointInside=function(r,s){var a=this.realPath=Te[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(a=f.transformPath(a,this.attr("transform"))),f.isPointInsidePath(a,r,s)},Ie.getBBox=function(r){if(this.removed)return{};var s=this._;return r?(!s.dirty&&s.bboxwt||(this.realPath=Te[this.type](this),s.bboxwt=Ze(this.realPath),s.bboxwt.toString=i1,s.dirty=0),s.bboxwt):((s.dirty||s.dirtyT||!s.bbox)&&(!s.dirty&&this.realPath||(s.bboxwt=0,this.realPath=Te[this.type](this)),s.bbox=Ze(Me(this.realPath,this.matrix)),s.bbox.toString=i1,s.dirty=s.dirtyT=0),s.bbox)},Ie.clone=function(){if(this.removed)return null;var r=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(r),r},Ie.glow=function(r){if(this.type=="text")return null;var s={width:((r=r||{}).width||10)+(+this.attr("stroke-width")||1),fill:r.fill||!1,opacity:r.opacity==null?.5:r.opacity,offsetx:r.offsetx||0,offsety:r.offsety||0,color:r.color||"#000"},a=s.width/2,l=this.paper,p=l.set(),v=this.realPath||Te[this.type](this);v=this.matrix?Me(v,this.matrix):v;for(var C=1;C<a+1;C++)p.push(l.path(v).attr({stroke:s.color,fill:s.fill?s.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(s.width/a*C).toFixed(3),opacity:+(s.opacity/a).toFixed(3)}));return p.insertBefore(this).translate(s.offsetx,s.offsety)};var Ut=function(r,s,a,l,p,v,C,w,S){return S==null?We(r,s,a,l,p,v,C,w):f.findDotsAtSegment(r,s,a,l,p,v,C,w,function(I,J,ue,Z,Y,re,he,oe,K){if(!(K<0||We(I,J,ue,Z,Y,re,he,oe)<K)){var Ce,de=.5,ve=1-de;for(Ce=We(I,J,ue,Z,Y,re,he,oe,ve);we(Ce-K)>.01;)Ce=We(I,J,ue,Z,Y,re,he,oe,ve+=(Ce<K?1:-1)*(de/=2));return ve}}(r,s,a,l,p,v,C,w,S))},jt=function(r,s){return function(a,l,p){for(var v,C,w,S,I,J="",ue={},Z=0,Y=0,re=(a=At(a)).length;Y<re;Y++){if((w=a[Y])[0]=="M")v=+w[1],C=+w[2];else{if(Z+(S=Ut(v,C,w[1],w[2],w[3],w[4],w[5],w[6]))>l){if(s&&!ue.start){if(J+=["C"+(I=Ut(v,C,w[1],w[2],w[3],w[4],w[5],w[6],l-Z)).start.x,I.start.y,I.m.x,I.m.y,I.x,I.y],p)return J;ue.start=J,J=["M"+I.x,I.y+"C"+I.n.x,I.n.y,I.end.x,I.end.y,w[5],w[6]].join(),Z+=S,v=+w[5],C=+w[6];continue}if(!r&&!s)return{x:(I=Ut(v,C,w[1],w[2],w[3],w[4],w[5],w[6],l-Z)).x,y:I.y,alpha:I.alpha}}Z+=S,v=+w[5],C=+w[6]}J+=w.shift()+w}return ue.end=J,(I=r?Z:s?ue:f.findDotsAtSegment(v,C,w[0],w[1],w[2],w[3],w[4],w[5],1)).alpha&&(I={x:I.x,y:I.y,alpha:I.alpha}),I}},s1=jt(1),o1=jt(),Gt=jt(0,1);f.getTotalLength=s1,f.getPointAtLength=o1,f.getSubpath=function(r,s,a){if(this.getTotalLength(r)-a<1e-6)return Gt(r,s).end;var l=Gt(r,a,1);return s?Gt(l,s).end:l},Ie.getTotalLength=function(){var r=this.getPath();if(r)return this.node.getTotalLength?this.node.getTotalLength():s1(r)},Ie.getPointAtLength=function(r){var s=this.getPath();if(s)return o1(s,r)},Ie.getPath=function(){var r,s=f._getPath[this.type];if(this.type!="text"&&this.type!="set")return s&&(r=s(this)),r},Ie.getSubpath=function(r,s){var a=this.getPath();if(a)return f.getSubpath(a,r,s)};var je=f.easing_formulas={linear:function(r){return r},"<":function(r){return ke(r,1.7)},">":function(r){return ke(r,.48)},"<>":function(r){var s=.48-r/1.04,a=le.sqrt(.1734+s*s),l=a-s,p=-a-s,v=ke(we(l),1/3)*(l<0?-1:1)+ke(we(p),1/3)*(p<0?-1:1)+.5;return 3*(1-v)*v*v+v*v*v},backIn:function(r){var s=1.70158;return r*r*((s+1)*r-s)},backOut:function(r){var s=1.70158;return(r-=1)*r*((s+1)*r+s)+1},elastic:function(r){return r==!!r?r:ke(2,-10*r)*le.sin(2*ee*(r-.075)/.3)+1},bounce:function(r){var s=7.5625,a=2.75;return r<1/a?s*r*r:r<2/a?s*(r-=1.5/a)*r+.75:r<2.5/a?s*(r-=2.25/a)*r+.9375:s*(r-=2.625/a)*r+.984375}};je.easeIn=je["ease-in"]=je["<"],je.easeOut=je["ease-out"]=je[">"],je.easeInOut=je["ease-in-out"]=je["<>"],je["back-in"]=je.backIn,je["back-out"]=je.backOut;var Ne=[],a1=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(r){setTimeout(r,16)},Wt=function(){for(var r=+new Date,s=0;s<Ne.length;s++){var a=Ne[s];if(!a.el.removed&&!a.paused){var l,p,v=r-a.start,C=a.ms,w=a.easing,S=a.from,I=a.diff,J=a.to,ue=(a.t,a.el),Z={},Y={};if(a.initstatus?(v=(a.initstatus*a.anim.top-a.prev)/(a.percent-a.prev)*C,a.status=a.initstatus,delete a.initstatus,a.stop&&Ne.splice(s--,1)):a.status=(a.prev+(a.percent-a.prev)*(v/C))/a.anim.top,!(v<0))if(v<C){var re=w(v/C);for(var he in S)if(S[T](he)){switch(m[he]){case X:l=+S[he]+re*C*I[he];break;case"colour":l="rgb("+[Xt(i(S[he].r+re*C*I[he].r)),Xt(i(S[he].g+re*C*I[he].g)),Xt(i(S[he].b+re*C*I[he].b))].join(",")+")";break;case"path":l=[];for(var oe=0,K=S[he].length;oe<K;oe++){l[oe]=[S[he][oe][0]];for(var Ce=1,de=S[he][oe].length;Ce<de;Ce++)l[oe][Ce]=+S[he][oe][Ce]+re*C*I[he][oe][Ce];l[oe]=l[oe].join(ye)}l=l.join(ye);break;case"transform":if(I[he].real)for(l=[],oe=0,K=S[he].length;oe<K;oe++)for(l[oe]=[S[he][oe][0]],Ce=1,de=S[he][oe].length;Ce<de;Ce++)l[oe][Ce]=S[he][oe][Ce]+re*C*I[he][oe][Ce];else{var ve=function(Le){return+S[he][Le]+re*C*I[he][Le]};l=[["m",ve(0),ve(1),ve(2),ve(3),ve(4),ve(5)]]}break;case"csv":if(he=="clip-rect")for(l=[],oe=4;oe--;)l[oe]=+S[he][oe]+re*C*I[he][oe];break;default:var fe=[][$](S[he]);for(l=[],oe=ue.paper.customAttributes[he].length;oe--;)l[oe]=+fe[oe]+re*C*I[he][oe]}Z[he]=l}ue.attr(Z),function(Le,Ee,Be){setTimeout(function(){u("raphael.anim.frame."+Le,Ee,Be)})}(ue.id,ue,a.anim)}else{if(function(Le,Ee,Be){setTimeout(function(){u("raphael.anim.frame."+Ee.id,Ee,Be),u("raphael.anim.finish."+Ee.id,Ee,Be),f.is(Le,"function")&&Le.call(Ee)})}(a.callback,ue,a.anim),ue.attr(J),Ne.splice(s--,1),a.repeat>1&&!a.next){for(p in J)J[T](p)&&(Y[p]=a.totalOrigin[p]);a.el.attr(Y),Pt(a.anim,a.el,a.anim.percents[0],null,a.totalOrigin,a.repeat-1)}a.next&&!a.stop&&Pt(a.anim,a.el,a.next,null,a.totalOrigin,a.repeat)}}}Ne.length&&a1(Wt)},Xt=function(r){return r>255?255:r<0?0:r};function O1(r,s,a,l,p,v){var C=3*s,w=3*(l-s)-C,S=1-C-w,I=3*a,J=3*(p-a)-I,ue=1-I-J;function Z(Y){return((S*Y+w)*Y+C)*Y}return function(Y,re){var he=function(oe,K){var Ce,de,ve,fe,Le,Ee;for(ve=oe,Ee=0;Ee<8;Ee++){if(fe=Z(ve)-oe,we(fe)<K)return ve;if(we(Le=(3*S*ve+2*w)*ve+C)<1e-6)break;ve-=fe/Le}if(de=1,(ve=oe)<(Ce=0))return Ce;if(ve>de)return de;for(;Ce<de;){if(fe=Z(ve),we(fe-oe)<K)return ve;oe>fe?Ce=ve:de=ve,ve=(de-Ce)/2+Ce}return ve}(Y,re);return((ue*he+J)*he+I)*he}(r,1/(200*v))}function Je(r,s){var a=[],l={};if(this.ms=s,this.times=1,r){for(var p in r)r[T](p)&&(l[o(p)]=r[p],a.push(o(p)));a.sort(ge)}this.anim=l,this.top=a[a.length-1],this.percents=a}function Pt(r,s,a,l,p,v){a=o(a);var C,w,S,I,J,ue,Z=r.ms,Y={},re={},he={};if(l)for(K=0,Ce=Ne.length;K<Ce;K++){var oe=Ne[K];if(oe.el.id==s.id&&oe.anim==r){oe.percent!=a?(Ne.splice(K,1),S=1):w=oe,s.attr(oe.totalOrigin);break}}else l=+re;for(var K=0,Ce=r.percents.length;K<Ce;K++){if(r.percents[K]==a||r.percents[K]>l*r.top){a=r.percents[K],J=r.percents[K-1]||0,Z=Z/r.top*(a-J),I=r.percents[K+1],C=r.anim[a];break}l&&s.attr(r.anim[r.percents[K]])}if(C){if(w)w.initstatus=l,w.start=new Date-w.ms*l;else{for(var de in C)if(C[T](de)&&(m[T](de)||s.paper.customAttributes[T](de)))switch(Y[de]=s.attr(de),Y[de]==null&&(Y[de]=g[de]),re[de]=C[de],m[de]){case X:he[de]=(re[de]-Y[de])/Z;break;case"colour":Y[de]=f.getRGB(Y[de]);var ve=f.getRGB(re[de]);he[de]={r:(ve.r-Y[de].r)/Z,g:(ve.g-Y[de].g)/Z,b:(ve.b-Y[de].b)/Z};break;case"path":var fe=At(Y[de],re[de]),Le=fe[1];for(Y[de]=fe[0],he[de]=[],K=0,Ce=Y[de].length;K<Ce;K++){he[de][K]=[0];for(var Ee=1,Be=Y[de][K].length;Ee<Be;Ee++)he[de][K][Ee]=(Le[K][Ee]-Y[de][K][Ee])/Z}break;case"transform":var vt=s._,Rt=M1(vt[de],re[de]);if(Rt)for(Y[de]=Rt.from,re[de]=Rt.to,he[de]=[],he[de].real=!0,K=0,Ce=Y[de].length;K<Ce;K++)for(he[de][K]=[Y[de][K][0]],Ee=1,Be=Y[de][K].length;Ee<Be;Ee++)he[de][K][Ee]=(re[de][K][Ee]-Y[de][K][Ee])/Z;else{var Ue=s.matrix||new st,Ye={_:{transform:vt.transform},getBBox:function(){return s.getBBox(1)}};Y[de]=[Ue.a,Ue.b,Ue.c,Ue.d,Ue.e,Ue.f],e1(Ye,re[de]),re[de]=Ye._.transform,he[de]=[(Ye.matrix.a-Ue.a)/Z,(Ye.matrix.b-Ue.b)/Z,(Ye.matrix.c-Ue.c)/Z,(Ye.matrix.d-Ue.d)/Z,(Ye.matrix.e-Ue.e)/Z,(Ye.matrix.f-Ue.f)/Z]}break;case"csv":var yt=j(C[de])[ie](F),xt=j(Y[de])[ie](F);if(de=="clip-rect")for(Y[de]=xt,he[de]=[],K=xt.length;K--;)he[de][K]=(yt[K]-Y[de][K])/Z;re[de]=yt;break;default:for(yt=[][$](C[de]),xt=[][$](Y[de]),he[de]=[],K=s.paper.customAttributes[de].length;K--;)he[de][K]=((yt[K]||0)-(xt[K]||0))/Z}var Dt=C.easing,Qe=f.easing_formulas[Dt];if(!Qe)if((Qe=j(Dt).match(t))&&Qe.length==5){var at=Qe;Qe=function(qt){return O1(qt,+at[1],+at[2],+at[3],+at[4],Z)}}else Qe=be;if(oe={anim:r,percent:a,timestamp:ue=C.start||r.start||+new Date,start:ue+(r.del||0),status:0,initstatus:l||0,stop:!1,ms:Z,easing:Qe,from:Y,diff:he,to:re,el:s,callback:C.callback,prev:J,next:I,repeat:v||r.times,origin:s.attr(),totalOrigin:p},Ne.push(oe),l&&!w&&!S&&(oe.stop=!0,oe.start=new Date-Z*l,Ne.length==1))return Wt();S&&(oe.start=new Date-oe.ms*l),Ne.length==1&&a1(Wt)}u("raphael.anim.start."+s.id,s,r)}}function l1(r){for(var s=0;s<Ne.length;s++)Ne[s].el.paper==r&&Ne.splice(s--,1)}Ie.animateWith=function(r,s,a,l,p,v){if(this.removed)return v&&v.call(this),this;var C=a instanceof Je?a:f.animation(a,l,p,v);Pt(C,this,C.percents[0],null,this.attr());for(var w=0,S=Ne.length;w<S;w++)if(Ne[w].anim==s&&Ne[w].el==r){Ne[S-1].start=Ne[w].start;break}return this},Ie.onAnimation=function(r){return r?u.on("raphael.anim.frame."+this.id,r):u.unbind("raphael.anim.frame."+this.id),this},Je.prototype.delay=function(r){var s=new Je(this.anim,this.ms);return s.times=this.times,s.del=+r||0,s},Je.prototype.repeat=function(r){var s=new Je(this.anim,this.ms);return s.del=this.del,s.times=le.floor(_e(r,0))||1,s},f.animation=function(r,s,a,l){if(r instanceof Je)return r;!f.is(a,"function")&&a||(l=l||a||null,a=null),r=Object(r),s=+s||0;var p,v,C={};for(v in r)r[T](v)&&o(v)!=v&&o(v)+"%"!=v&&(p=!0,C[v]=r[v]);if(p)return a&&(C.easing=a),l&&(C.callback=l),new Je({100:C},s);if(l){var w=0;for(var S in r){var I=c(S);r[T](S)&&I>w&&(w=I)}!r[w+="%"].callback&&(r[w].callback=l)}return new Je(r,s)},Ie.animate=function(r,s,a,l){if(this.removed)return l&&l.call(this),this;var p=r instanceof Je?r:f.animation(r,s,a,l);return Pt(p,this,p.percents[0],null,this.attr()),this},Ie.setTime=function(r,s){return r&&s!=null&&this.status(r,G(s,r.ms)/r.ms),this},Ie.status=function(r,s){var a,l,p=[],v=0;if(s!=null)return Pt(r,this,-1,G(s,1)),this;for(a=Ne.length;v<a;v++)if((l=Ne[v]).el.id==this.id&&(!r||l.anim==r)){if(r)return l.status;p.push({anim:l.anim,status:l.status})}return r?0:p},Ie.pause=function(r){for(var s=0;s<Ne.length;s++)Ne[s].el.id!=this.id||r&&Ne[s].anim!=r||u("raphael.anim.pause."+this.id,this,Ne[s].anim)!==!1&&(Ne[s].paused=!0);return this},Ie.resume=function(r){for(var s=0;s<Ne.length;s++)if(Ne[s].el.id==this.id&&(!r||Ne[s].anim==r)){var a=Ne[s];u("raphael.anim.resume."+this.id,this,a.anim)!==!1&&(delete a.paused,this.status(a.anim,a.status))}return this},Ie.stop=function(r){for(var s=0;s<Ne.length;s++)Ne[s].el.id!=this.id||r&&Ne[s].anim!=r||u("raphael.anim.stop."+this.id,this,Ne[s].anim)!==!1&&Ne.splice(s--,1);return this},u.on("raphael.remove",l1),u.on("raphael.clear",l1),Ie.toString=function(){return"Rapha├лlтАЩs object"};var c1,u1,ot,h1,Et=function(r){if(this.items=[],this.length=0,this.type="set",r)for(var s=0,a=r.length;s<a;s++)!r[s]||r[s].constructor!=Ie.constructor&&r[s].constructor!=Et||(this[this.items.length]=this.items[this.items.length]=r[s],this.length++)},He=Et.prototype;for(var Yt in He.push=function(){for(var r,s,a=0,l=arguments.length;a<l;a++)!(r=arguments[a])||r.constructor!=Ie.constructor&&r.constructor!=Et||(this[s=this.items.length]=this.items[s]=r,this.length++);return this},He.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},He.forEach=function(r,s){for(var a=0,l=this.items.length;a<l;a++)if(r.call(s,this.items[a],a)===!1)return this;return this},Ie)Ie[T](Yt)&&(He[Yt]=function(r){return function(){var s=arguments;return this.forEach(function(a){a[r][U](a,s)})}}(Yt));return He.attr=function(r,s){if(r&&f.is(r,ae)&&f.is(r[0],"object"))for(var a=0,l=r.length;a<l;a++)this.items[a].attr(r[a]);else for(var p=0,v=this.items.length;p<v;p++)this.items[p].attr(r,s);return this},He.clear=function(){for(;this.length;)this.pop()},He.splice=function(r,s,a){r=r<0?_e(this.length+r,0):r,s=_e(0,G(this.length-r,s));var l,p=[],v=[],C=[];for(l=2;l<arguments.length;l++)C.push(arguments[l]);for(l=0;l<s;l++)v.push(this[r+l]);for(;l<this.length-r;l++)p.push(this[r+l]);var w=C.length;for(l=0;l<w+p.length;l++)this.items[r+l]=this[r+l]=l<w?C[l]:p[l-w];for(l=this.items.length=this.length-=s-w;this[l];)delete this[l++];return new Et(v)},He.exclude=function(r){for(var s=0,a=this.length;s<a;s++)if(this[s]==r)return this.splice(s,1),!0},He.animate=function(r,s,a,l){(f.is(a,"function")||!a)&&(l=a||null);var p,v,C=this.items.length,w=C,S=this;if(!C)return this;l&&(v=function(){!--C&&l.call(S)}),a=f.is(a,"string")?a:v;var I=f.animation(r,s,a,v);for(p=this.items[--w].animate(I);w--;)this.items[w]&&!this.items[w].removed&&this.items[w].animateWith(p,I,I),this.items[w]&&!this.items[w].removed||C--;return this},He.insertAfter=function(r){for(var s=this.items.length;s--;)this.items[s].insertAfter(r);return this},He.getBBox=function(){for(var r=[],s=[],a=[],l=[],p=this.items.length;p--;)if(!this.items[p].removed){var v=this.items[p].getBBox();r.push(v.x),s.push(v.y),a.push(v.x+v.width),l.push(v.y+v.height)}return{x:r=G[U](0,r),y:s=G[U](0,s),x2:a=_e[U](0,a),y2:l=_e[U](0,l),width:a-r,height:l-s}},He.clone=function(r){r=this.paper.set();for(var s=0,a=this.items.length;s<a;s++)r.push(this.items[s].clone());return r},He.toString=function(){return"Rapha├лlтАШs set"},He.glow=function(r){var s=this.paper.set();return this.forEach(function(a,l){var p=a.glow(r);p!=null&&p.forEach(function(v,C){s.push(v)})}),s},He.isPointInside=function(r,s){var a=!1;return this.forEach(function(l){if(l.isPointInside(r,s))return a=!0,!1}),a},f.registerFont=function(r){if(!r.face)return r;this.fonts=this.fonts||{};var s={w:r.w,face:{},glyphs:{}},a=r.face["font-family"];for(var l in r.face)r.face[T](l)&&(s.face[l]=r.face[l]);if(this.fonts[a]?this.fonts[a].push(s):this.fonts[a]=[s],!r.svg){for(var p in s.face["units-per-em"]=c(r.face["units-per-em"],10),r.glyphs)if(r.glyphs[T](p)){var v=r.glyphs[p];if(s.glyphs[p]={w:v.w,k:{},d:v.d&&"M"+v.d.replace(/[mlcxtrv]/g,function(w){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[w]||"M"})+"z"},v.k)for(var C in v.k)v[T](C)&&(s.glyphs[p].k[C]=v.k[C])}}return r},E.getFont=function(r,s,a,l){if(l=l||"normal",a=a||"normal",s=+s||{normal:400,bold:700,lighter:300,bolder:800}[s]||400,f.fonts){var p,v=f.fonts[r];if(!v){var C=new RegExp("(^|\\s)"+r.replace(/[^\w\d\s+!~.:_-]/g,pe)+"(\\s|$)","i");for(var w in f.fonts)if(f.fonts[T](w)&&C.test(w)){v=f.fonts[w];break}}if(v)for(var S=0,I=v.length;S<I&&((p=v[S]).face["font-weight"]!=s||p.face["font-style"]!=a&&p.face["font-style"]||p.face["font-stretch"]!=l);S++);return p}},E.print=function(r,s,a,l,p,v,C,w){v=v||"middle",C=_e(G(C||0,1),-1),w=_e(G(w||1,3),1);var S,I=j(a)[ie](pe),J=0,ue=0,Z=pe;if(f.is(l,"string")&&(l=this.getFont(l)),l){S=(p||16)/l.face["units-per-em"];for(var Y=l.face.bbox[ie](F),re=+Y[0],he=Y[3]-Y[1],oe=0,K=+Y[1]+(v=="baseline"?he+ +l.face.descent:he/2),Ce=0,de=I.length;Ce<de;Ce++){if(I[Ce]==`
`)J=0,fe=0,ue=0,oe+=he*w;else{var ve=ue&&l.glyphs[I[Ce-1]]||{},fe=l.glyphs[I[Ce]];J+=ue?(ve.w||l.w)+(ve.k&&ve.k[I[Ce]]||0)+l.w*C:0,ue=1}fe&&fe.d&&(Z+=f.transformPath(fe.d,["t",J*S,oe*S,"s",S,S,re,K,"t",(r-re)/S,(s-K)/S]))}}return this.path(Z).attr({fill:"#000",stroke:"none"})},E.add=function(r){if(f.is(r,"array"))for(var s,a=this.set(),l=0,p=r.length;l<p;l++)s=r[l]||{},q[T](s.type)&&a.push(this[s.type]().attr(s));return a},f.format=function(r,s){var a=f.is(s,ae)?[0][$](s):arguments;return r&&f.is(r,"string")&&a.length-1&&(r=r.replace(A,function(l,p){return a[++p]==null?pe:a[p]})),r||pe},f.fullfill=(c1=/\{([^\}]+)\}/g,u1=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(r,s){return String(r).replace(c1,function(a,l){return function(p,v,C){var w=C;return v.replace(u1,function(S,I,J,ue,Z){I=I||ue,w&&(I in w&&(w=w[I]),typeof w=="function"&&Z&&(w=w()))}),w=(w==null||w==C?p:w)+""}(a,l,s)})}),f.ninja=function(){if(Q.was)D.win.Raphael=Q.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(r){}}return f},f.st=He,u.on("raphael.DOMload",function(){b=!0}),(ot=document).readyState==null&&ot.addEventListener&&(ot.addEventListener("DOMContentLoaded",h1=function(){ot.removeEventListener("DOMContentLoaded",h1,!1),ot.readyState="complete"},!1),ot.readyState="loading"),function r(){/in/.test(ot.readyState)?setTimeout(r,9):f.eve("raphael.DOMload")}(),f}.apply(M,z))===void 0||(N.exports=O)},function(N,M,H){var z,O;z=[H(0),H(3),H(4)],(O=function(u){return u}.apply(M,z))===void 0||(N.exports=O)},function(N,M,H){var z,O,u,f,b,E,F,q,A,T,D,Q,se,U;f="hasOwnProperty",b=/[\.\/]/,E=/\s*,\s*/,F=function($,ce){return $-ce},q={n:{}},A=function(){for(var $=0,ce=this.length;$<ce;$++)if(this[$]!==void 0)return this[$]},T=function(){for(var $=this.length;--$;)if(this[$]!==void 0)return this[$]},D=Object.prototype.toString,Q=String,se=Array.isArray||function($){return $ instanceof Array||D.call($)=="[object Array]"},(U=function($,ce){var pe,ye=u,j=Array.prototype.slice.call(arguments,2),ie=U.listeners($),B=0,Se=[],P={},le=[],_e=O;le.firstDefined=A,le.lastDefined=T,O=$,u=0;for(var G=0,we=ie.length;G<we;G++)"zIndex"in ie[G]&&(Se.push(ie[G].zIndex),ie[G].zIndex<0&&(P[ie[G].zIndex]=ie[G]));for(Se.sort(F);Se[B]<0;)if(pe=P[Se[B++]],le.push(pe.apply(ce,j)),u)return u=ye,le;for(G=0;G<we;G++)if("zIndex"in(pe=ie[G]))if(pe.zIndex==Se[B]){if(le.push(pe.apply(ce,j)),u)break;do if((pe=P[Se[++B]])&&le.push(pe.apply(ce,j)),u)break;while(pe)}else P[pe.zIndex]=pe;else if(le.push(pe.apply(ce,j)),u)break;return u=ye,O=_e,le})._events=q,U.listeners=function($){var ce,pe,ye,j,ie,B,Se,P,le=se($)?$:$.split(b),_e=q,G=[_e],we=[];for(j=0,ie=le.length;j<ie;j++){for(P=[],B=0,Se=G.length;B<Se;B++)for(pe=[(_e=G[B].n)[le[j]],_e["*"]],ye=2;ye--;)(ce=pe[ye])&&(P.push(ce),we=we.concat(ce.f||[]));G=P}return we},U.separator=function($){$?($="["+($=Q($).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",b=new RegExp($)):b=/[\.\/]/},U.on=function($,ce){if(typeof ce!="function")return function(){};for(var pe=se($)?se($[0])?$:[$]:Q($).split(E),ye=0,j=pe.length;ye<j;ye++)(function(ie){for(var B,Se=se(ie)?ie:Q(ie).split(b),P=q,le=0,_e=Se.length;le<_e;le++)P=(P=P.n).hasOwnProperty(Se[le])&&P[Se[le]]||(P[Se[le]]={n:{}});for(P.f=P.f||[],le=0,_e=P.f.length;le<_e;le++)if(P.f[le]==ce){B=!0;break}!B&&P.f.push(ce)})(pe[ye]);return function(ie){+ie==+ie&&(ce.zIndex=+ie)}},U.f=function($){var ce=[].slice.call(arguments,1);return function(){U.apply(null,[$,null].concat(ce).concat([].slice.call(arguments,0)))}},U.stop=function(){u=1},U.nt=function($){var ce=se(O)?O.join("."):O;return $?new RegExp("(?:\\.|\\/|^)"+$+"(?:\\.|\\/|$)").test(ce):ce},U.nts=function(){return se(O)?O:O.split(b)},U.off=U.unbind=function($,ce){if($){var pe=se($)?se($[0])?$:[$]:Q($).split(E);if(pe.length>1)for(var ye=0,j=pe.length;ye<j;ye++)U.off(pe[ye],ce);else{pe=se($)?$:Q($).split(b);var ie,B,Se,P,le,_e=[q];for(ye=0,j=pe.length;ye<j;ye++)for(P=0;P<_e.length;P+=Se.length-2){if(Se=[P,1],ie=_e[P].n,pe[ye]!="*")ie[pe[ye]]&&Se.push(ie[pe[ye]]);else for(B in ie)ie[f](B)&&Se.push(ie[B]);_e.splice.apply(_e,Se)}for(ye=0,j=_e.length;ye<j;ye++)for(ie=_e[ye];ie.n;){if(ce){if(ie.f){for(P=0,le=ie.f.length;P<le;P++)if(ie.f[P]==ce){ie.f.splice(P,1);break}!ie.f.length&&delete ie.f}for(B in ie.n)if(ie.n[f](B)&&ie.n[B].f){var G=ie.n[B].f;for(P=0,le=G.length;P<le;P++)if(G[P]==ce){G.splice(P,1);break}!G.length&&delete ie.n[B].f}}else for(B in delete ie.f,ie.n)ie.n[f](B)&&ie.n[B].f&&delete ie.n[B].f;ie=ie.n}}}else U._events=q={n:{}}},U.once=function($,ce){var pe=function(){return U.off($,pe),ce.apply(this,arguments)};return U.on($,pe)},U.version="0.5.0",U.toString=function(){return"You are running Eve 0.5.0"},N.exports?N.exports=U:(z=function(){return U}.apply(M,[]))===void 0||(N.exports=z)},function(N,M,H){var z,O;z=[H(0)],(O=function(u){if(!u||u.svg){var f="hasOwnProperty",b=String,E=parseFloat,F=parseInt,q=Math,A=q.max,T=q.abs,D=q.pow,Q=/[, ]+/,se=u.eve,U="",$=" ",ce="http://www.w3.org/1999/xlink",pe={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},ye={};u.toString=function(){return`Your browser supports SVG.
You are running Rapha├лl `+this.version};var j=function(n,e){if(e)for(var t in typeof n=="string"&&(n=j(n)),e)e[f](t)&&(t.substring(0,6)=="xlink:"?n.setAttributeNS(ce,t.substring(6),b(e[t])):n.setAttribute(t,b(e[t])));else(n=u._g.doc.createElementNS("http://www.w3.org/2000/svg",n)).style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},ie=function(n,e){var t="linear",i=n.id+e,o=.5,c=.5,h=n.node,g=n.paper,m=h.style,k=u._g.doc.getElementById(i);if(!k){if(e=(e=b(e).replace(u._radial_gradient,function(ge,be,xe){if(t="radial",be&&xe){o=E(be);var Ae=2*((c=E(xe))>.5)-1;D(o-.5,2)+D(c-.5,2)>.25&&(c=q.sqrt(.25-D(o-.5,2))*Ae+.5)&&c!=.5&&(c=c.toFixed(5)-1e-5*Ae)}return U})).split(/\s*\-\s*/),t=="linear"){var R=e.shift();if(R=-E(R),isNaN(R))return null;var V=[0,0,q.cos(u.rad(R)),q.sin(u.rad(R))],W=1/(A(T(V[2]),T(V[3]))||1);V[2]*=W,V[3]*=W,V[2]<0&&(V[0]=-V[2],V[2]=0),V[3]<0&&(V[1]=-V[3],V[3]=0)}var ne=u._parseDots(e);if(!ne)return null;if(i=i.replace(/[\(\)\s,\xb0#]/g,"_"),n.gradient&&i!=n.gradient.id&&(g.defs.removeChild(n.gradient),delete n.gradient),!n.gradient){k=j(t+"Gradient",{id:i}),n.gradient=k,j(k,t=="radial"?{fx:o,fy:c}:{x1:V[0],y1:V[1],x2:V[2],y2:V[3],gradientTransform:n.matrix.invert()}),g.defs.appendChild(k);for(var te=0,me=ne.length;te<me;te++)k.appendChild(j("stop",{offset:ne[te].offset?ne[te].offset:te?"100%":"0%","stop-color":ne[te].color||"#fff","stop-opacity":isFinite(ne[te].opacity)?ne[te].opacity:1}))}}return j(h,{fill:B(i),opacity:1,"fill-opacity":1}),m.fill=U,m.opacity=1,m.fillOpacity=1,1},B=function(n){if((e=document.documentMode)&&(e===9||e===10))return"url('#"+n+"')";var e,t=document.location;return"url('"+(t.protocol+"//"+t.host+t.pathname+t.search)+"#"+n+"')"},Se=function(n){var e=n.getBBox(1);j(n.pattern,{patternTransform:n.matrix.invert()+" translate("+e.x+","+e.y+")"})},P=function(n,e,t){if(n.type=="path"){for(var i,o,c,h,g,m=b(e).toLowerCase().split("-"),k=n.paper,R=t?"end":"start",V=n.node,W=n.attrs,ne=W["stroke-width"],te=m.length,me="classic",ge=3,be=3,xe=5;te--;)switch(m[te]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":me=m[te];break;case"wide":be=5;break;case"narrow":be=2;break;case"long":ge=5;break;case"short":ge=2}if(me=="open"?(ge+=2,be+=2,xe+=2,c=1,h=t?4:1,g={fill:"none",stroke:W.stroke}):(h=c=ge/2,g={fill:W.stroke,stroke:"none"}),n._.arrows?t?(n._.arrows.endPath&&ye[n._.arrows.endPath]--,n._.arrows.endMarker&&ye[n._.arrows.endMarker]--):(n._.arrows.startPath&&ye[n._.arrows.startPath]--,n._.arrows.startMarker&&ye[n._.arrows.startMarker]--):n._.arrows={},me!="none"){var Ae="raphael-marker-"+me,Te="raphael-marker-"+R+me+ge+be+"-obj"+n.id;u._g.doc.getElementById(Ae)?ye[Ae]++:(k.defs.appendChild(j(j("path"),{"stroke-linecap":"round",d:pe[me],id:Ae})),ye[Ae]=1);var Me,Re=u._g.doc.getElementById(Te);Re?(ye[Te]++,Me=Re.getElementsByTagName("use")[0]):(Re=j(j("marker"),{id:Te,markerHeight:be,markerWidth:ge,orient:"auto",refX:h,refY:be/2}),Me=j(j("use"),{"xlink:href":"#"+Ae,transform:(t?"rotate(180 "+ge/2+" "+be/2+") ":U)+"scale("+ge/xe+","+be/xe+")","stroke-width":(1/((ge/xe+be/xe)/2)).toFixed(4)}),Re.appendChild(Me),k.defs.appendChild(Re),ye[Te]=1),j(Me,g);var De=c*(me!="diamond"&&me!="oval");t?(i=n._.arrows.startdx*ne||0,o=u.getTotalLength(W.path)-De*ne):(i=De*ne,o=u.getTotalLength(W.path)-(n._.arrows.enddx*ne||0)),(g={})["marker-"+R]="url(#"+Te+")",(o||i)&&(g.d=u.getSubpath(W.path,i,o)),j(V,g),n._.arrows[R+"Path"]=Ae,n._.arrows[R+"Marker"]=Te,n._.arrows[R+"dx"]=De,n._.arrows[R+"Type"]=me,n._.arrows[R+"String"]=e}else t?(i=n._.arrows.startdx*ne||0,o=u.getTotalLength(W.path)-i):(i=0,o=u.getTotalLength(W.path)-(n._.arrows.enddx*ne||0)),n._.arrows[R+"Path"]&&j(V,{d:u.getSubpath(W.path,i,o)}),delete n._.arrows[R+"Path"],delete n._.arrows[R+"Marker"],delete n._.arrows[R+"dx"],delete n._.arrows[R+"Type"],delete n._.arrows[R+"String"];for(g in ye)if(ye[f](g)&&!ye[g]){var qe=u._g.doc.getElementById(g);qe&&qe.parentNode.removeChild(qe)}}},le={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},_e=function(n,e,t){if(e=le[b(e).toLowerCase()]){for(var i=n.attrs["stroke-width"]||"1",o={round:i,square:i,butt:0}[n.attrs["stroke-linecap"]||t["stroke-linecap"]]||0,c=[],h=e.length;h--;)c[h]=e[h]*i+(h%2?1:-1)*o;j(n.node,{"stroke-dasharray":c.join(",")})}else j(n.node,{"stroke-dasharray":"none"})},G=function(n,e){var t=n.node,i=n.attrs,o=t.style.visibility;for(var c in t.style.visibility="hidden",e)if(e[f](c)){if(!u._availableAttrs[f](c))continue;var h=e[c];switch(i[c]=h,c){case"blur":n.blur(h);break;case"title":var g=t.getElementsByTagName("title");if(g.length&&(g=g[0]))g.firstChild.nodeValue=h;else{g=j("title");var m=u._g.doc.createTextNode(h);g.appendChild(m),t.appendChild(g)}break;case"href":case"target":var k=t.parentNode;if(k.tagName.toLowerCase()!="a"){var R=j("a");k.insertBefore(R,t),R.appendChild(t),k=R}c=="target"?k.setAttributeNS(ce,"show",h=="blank"?"new":h):k.setAttributeNS(ce,c,h);break;case"cursor":t.style.cursor=h;break;case"transform":n.transform(h);break;case"arrow-start":P(n,h);break;case"arrow-end":P(n,h,1);break;case"clip-rect":var V=b(h).split(Q);if(V.length==4){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var W=j("clipPath"),ne=j("rect");W.id=u.createUUID(),j(ne,{x:V[0],y:V[1],width:V[2],height:V[3]}),W.appendChild(ne),n.paper.defs.appendChild(W),j(t,{"clip-path":"url(#"+W.id+")"}),n.clip=ne}if(!h){var te=t.getAttribute("clip-path");if(te){var me=u._g.doc.getElementById(te.replace(/(^url\(#|\)$)/g,U));me&&me.parentNode.removeChild(me),j(t,{"clip-path":U}),delete n.clip}}break;case"path":n.type=="path"&&(j(t,{d:h?i.path=u._pathToAbsolute(h):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&P(n,n._.arrows.startString),"endString"in n._.arrows&&P(n,n._.arrows.endString,1)));break;case"width":if(t.setAttribute(c,h),n._.dirty=1,!i.fx)break;c="x",h=i.x;case"x":i.fx&&(h=-i.x-(i.width||0));case"rx":if(c=="rx"&&n.type=="rect")break;case"cx":t.setAttribute(c,h),n.pattern&&Se(n),n._.dirty=1;break;case"height":if(t.setAttribute(c,h),n._.dirty=1,!i.fy)break;c="y",h=i.y;case"y":i.fy&&(h=-i.y-(i.height||0));case"ry":if(c=="ry"&&n.type=="rect")break;case"cy":t.setAttribute(c,h),n.pattern&&Se(n),n._.dirty=1;break;case"r":n.type=="rect"?j(t,{rx:h,ry:h}):t.setAttribute(c,h),n._.dirty=1;break;case"src":n.type=="image"&&t.setAttributeNS(ce,"href",h);break;case"stroke-width":n._.sx==1&&n._.sy==1||(h/=A(T(n._.sx),T(n._.sy))||1),t.setAttribute(c,h),i["stroke-dasharray"]&&_e(n,i["stroke-dasharray"],e),n._.arrows&&("startString"in n._.arrows&&P(n,n._.arrows.startString),"endString"in n._.arrows&&P(n,n._.arrows.endString,1));break;case"stroke-dasharray":_e(n,h,e);break;case"fill":var ge=b(h).match(u._ISURL);if(ge){W=j("pattern");var be=j("image");W.id=u.createUUID(),j(W,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),j(be,{x:0,y:0,"xlink:href":ge[1]}),W.appendChild(be),function(Re){u._preload(ge[1],function(){var De=this.offsetWidth,qe=this.offsetHeight;j(Re,{width:De,height:qe}),j(be,{width:De,height:qe})})}(W),n.paper.defs.appendChild(W),j(t,{fill:"url(#"+W.id+")"}),n.pattern=W,n.pattern&&Se(n);break}var xe=u.getRGB(h);if(xe.error){if((n.type=="circle"||n.type=="ellipse"||b(h).charAt()!="r")&&ie(n,h)){if("opacity"in i||"fill-opacity"in i){var Ae=u._g.doc.getElementById(t.getAttribute("fill").replace(/^url\(#|\)$/g,U));if(Ae){var Te=Ae.getElementsByTagName("stop");j(Te[Te.length-1],{"stop-opacity":("opacity"in i?i.opacity:1)*("fill-opacity"in i?i["fill-opacity"]:1)})}}i.gradient=h,i.fill="none";break}}else delete e.gradient,delete i.gradient,!u.is(i.opacity,"undefined")&&u.is(e.opacity,"undefined")&&j(t,{opacity:i.opacity}),!u.is(i["fill-opacity"],"undefined")&&u.is(e["fill-opacity"],"undefined")&&j(t,{"fill-opacity":i["fill-opacity"]});xe[f]("opacity")&&j(t,{"fill-opacity":xe.opacity>1?xe.opacity/100:xe.opacity});case"stroke":xe=u.getRGB(h),t.setAttribute(c,xe.hex),c=="stroke"&&xe[f]("opacity")&&j(t,{"stroke-opacity":xe.opacity>1?xe.opacity/100:xe.opacity}),c=="stroke"&&n._.arrows&&("startString"in n._.arrows&&P(n,n._.arrows.startString),"endString"in n._.arrows&&P(n,n._.arrows.endString,1));break;case"gradient":(n.type=="circle"||n.type=="ellipse"||b(h).charAt()!="r")&&ie(n,h);break;case"opacity":i.gradient&&!i[f]("stroke-opacity")&&j(t,{"stroke-opacity":h>1?h/100:h});case"fill-opacity":if(i.gradient){(Ae=u._g.doc.getElementById(t.getAttribute("fill").replace(/^url\(#|\)$/g,U)))&&(Te=Ae.getElementsByTagName("stop"),j(Te[Te.length-1],{"stop-opacity":h}));break}default:c=="font-size"&&(h=F(h,10)+"px");var Me=c.replace(/(\-.)/g,function(Re){return Re.substring(1).toUpperCase()});t.style[Me]=h,n._.dirty=1,t.setAttribute(c,h)}}we(n,e),t.style.visibility=o},we=function(n,e){if(n.type=="text"&&(e[f]("text")||e[f]("font")||e[f]("font-size")||e[f]("x")||e[f]("y"))){var t=n.attrs,i=n.node,o=i.firstChild?F(u._g.doc.defaultView.getComputedStyle(i.firstChild,U).getPropertyValue("font-size"),10):10;if(e[f]("text")){for(t.text=e.text;i.firstChild;)i.removeChild(i.firstChild);for(var c,h=b(e.text).split(`
`),g=[],m=0,k=h.length;m<k;m++)c=j("tspan"),m&&j(c,{dy:1.2*o,x:t.x}),c.appendChild(u._g.doc.createTextNode(h[m])),i.appendChild(c),g[m]=c}else for(m=0,k=(g=i.getElementsByTagName("tspan")).length;m<k;m++)m?j(g[m],{dy:1.2*o,x:t.x}):j(g[0],{dy:0});j(i,{x:t.x,y:t.y}),n._.dirty=1;var R=n._getBBox(),V=t.y-(R.y+R.height/2);V&&u.is(V,"finite")&&j(g[0],{dy:V})}},ke=function(n){return n.parentNode&&n.parentNode.tagName.toLowerCase()==="a"?n.parentNode:n},ee=function(n,e){this[0]=this.node=n,n.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),n.raphaelid=this.id,this.matrix=u.matrix(),this.realPath=null,this.paper=e,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},X=u.el;ee.prototype=X,X.constructor=ee,u._engine.path=function(n,e){var t=j("path");e.canvas&&e.canvas.appendChild(t);var i=new ee(t,e);return i.type="path",G(i,{fill:"none",stroke:"#000",path:n}),i},X.rotate=function(n,e,t){if(this.removed)return this;if((n=b(n).split(Q)).length-1&&(e=E(n[1]),t=E(n[2])),n=E(n[0]),t==null&&(e=t),e==null||t==null){var i=this.getBBox(1);e=i.x+i.width/2,t=i.y+i.height/2}return this.transform(this._.transform.concat([["r",n,e,t]])),this},X.scale=function(n,e,t,i){if(this.removed)return this;if((n=b(n).split(Q)).length-1&&(e=E(n[1]),t=E(n[2]),i=E(n[3])),n=E(n[0]),e==null&&(e=n),i==null&&(t=i),t==null||i==null)var o=this.getBBox(1);return t=t==null?o.x+o.width/2:t,i=i==null?o.y+o.height/2:i,this.transform(this._.transform.concat([["s",n,e,t,i]])),this},X.translate=function(n,e){return this.removed?this:((n=b(n).split(Q)).length-1&&(e=E(n[1])),n=E(n[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",n,e]])),this)},X.transform=function(n){var e=this._;if(n==null)return e.transform;if(u._extractTransform(this,n),this.clip&&j(this.clip,{transform:this.matrix.invert()}),this.pattern&&Se(this),this.node&&j(this.node,{transform:this.matrix}),e.sx!=1||e.sy!=1){var t=this.attrs[f]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":t})}return this},X.hide=function(){return this.removed||(this.node.style.display="none"),this},X.show=function(){return this.removed||(this.node.style.display=""),this},X.remove=function(){var n=ke(this.node);if(!this.removed&&n.parentNode){var e=this.paper;for(var t in e.__set__&&e.__set__.exclude(this),se.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),u._tear(this,e),n.parentNode.removeChild(n),this.removeData(),this)this[t]=typeof this[t]=="function"?u._removedFactory(t):null;this.removed=!0}},X._getBBox=function(){if(this.node.style.display=="none"){this.show();var n=!0}var e,t=!1;this.paper.canvas.parentElement?e=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(e=this.paper.canvas.parentNode.style),e&&e.display=="none"&&(t=!0,e.display="");var i={};try{i=this.node.getBBox()}catch(o){i={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{i=i||{},t&&(e.display="none")}return n&&this.hide(),i},X.attr=function(n,e){if(this.removed)return this;if(n==null){var t={};for(var i in this.attrs)this.attrs[f](i)&&(t[i]=this.attrs[i]);return t.gradient&&t.fill=="none"&&(t.fill=t.gradient)&&delete t.gradient,t.transform=this._.transform,t}if(e==null&&u.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(n=="transform")return this._.transform;for(var o=n.split(Q),c={},h=0,g=o.length;h<g;h++)(n=o[h])in this.attrs?c[n]=this.attrs[n]:u.is(this.paper.customAttributes[n],"function")?c[n]=this.paper.customAttributes[n].def:c[n]=u._availableAttrs[n];return g-1?c:c[o[0]]}if(e==null&&u.is(n,"array")){for(c={},h=0,g=n.length;h<g;h++)c[n[h]]=this.attr(n[h]);return c}if(e!=null){var m={};m[n]=e}else n!=null&&u.is(n,"object")&&(m=n);for(var k in m)se("raphael.attr."+k+"."+this.id,this,m[k]);for(k in this.paper.customAttributes)if(this.paper.customAttributes[f](k)&&m[f](k)&&u.is(this.paper.customAttributes[k],"function")){var R=this.paper.customAttributes[k].apply(this,[].concat(m[k]));for(var V in this.attrs[k]=m[k],R)R[f](V)&&(m[V]=R[V])}return G(this,m),this},X.toFront=function(){if(this.removed)return this;var n=ke(this.node);n.parentNode.appendChild(n);var e=this.paper;return e.top!=this&&u._tofront(this,e),this},X.toBack=function(){if(this.removed)return this;var n=ke(this.node),e=n.parentNode;return e.insertBefore(n,e.firstChild),u._toback(this,this.paper),this.paper,this},X.insertAfter=function(n){if(this.removed||!n)return this;var e=ke(this.node),t=ke(n.node||n[n.length-1].node);return t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),u._insertafter(this,n,this.paper),this},X.insertBefore=function(n){if(this.removed||!n)return this;var e=ke(this.node),t=ke(n.node||n[0].node);return t.parentNode.insertBefore(e,t),u._insertbefore(this,n,this.paper),this},X.blur=function(n){var e=this;if(+n!=0){var t=j("filter"),i=j("feGaussianBlur");e.attrs.blur=n,t.id=u.createUUID(),j(i,{stdDeviation:+n||1.5}),t.appendChild(i),e.paper.defs.appendChild(t),e._blur=t,j(e.node,{filter:"url(#"+t.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter");return e},u._engine.circle=function(n,e,t,i){var o=j("circle");n.canvas&&n.canvas.appendChild(o);var c=new ee(o,n);return c.attrs={cx:e,cy:t,r:i,fill:"none",stroke:"#000"},c.type="circle",j(o,c.attrs),c},u._engine.rect=function(n,e,t,i,o,c){var h=j("rect");n.canvas&&n.canvas.appendChild(h);var g=new ee(h,n);return g.attrs={x:e,y:t,width:i,height:o,rx:c||0,ry:c||0,fill:"none",stroke:"#000"},g.type="rect",j(h,g.attrs),g},u._engine.ellipse=function(n,e,t,i,o){var c=j("ellipse");n.canvas&&n.canvas.appendChild(c);var h=new ee(c,n);return h.attrs={cx:e,cy:t,rx:i,ry:o,fill:"none",stroke:"#000"},h.type="ellipse",j(c,h.attrs),h},u._engine.image=function(n,e,t,i,o,c){var h=j("image");j(h,{x:t,y:i,width:o,height:c,preserveAspectRatio:"none"}),h.setAttributeNS(ce,"href",e),n.canvas&&n.canvas.appendChild(h);var g=new ee(h,n);return g.attrs={x:t,y:i,width:o,height:c,src:e},g.type="image",g},u._engine.text=function(n,e,t,i){var o=j("text");n.canvas&&n.canvas.appendChild(o);var c=new ee(o,n);return c.attrs={x:e,y:t,"text-anchor":"middle",text:i,"font-family":u._availableAttrs["font-family"],"font-size":u._availableAttrs["font-size"],stroke:"none",fill:"#000"},c.type="text",G(c,c.attrs),c},u._engine.setSize=function(n,e){return this.width=n||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},u._engine.create=function(){var n=u._getContainer.apply(0,arguments),e=n&&n.container;if(!e)throw new Error("SVG container not found.");var t,i=n.x,o=n.y,c=n.width,h=n.height,g=j("svg"),m="overflow:hidden;";return i=i||0,o=o||0,j(g,{height:h=h||342,version:1.1,width:c=c||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),e==1?(g.style.cssText=m+"position:absolute;left:"+i+"px;top:"+o+"px",u._g.doc.body.appendChild(g),t=1):(g.style.cssText=m+"position:relative",e.firstChild?e.insertBefore(g,e.firstChild):e.appendChild(g)),(e=new u._Paper).width=c,e.height=h,e.canvas=g,e.clear(),e._left=e._top=0,t&&(e.renderfix=function(){}),e.renderfix(),e},u._engine.setViewBox=function(n,e,t,i,o){se("raphael.setViewBox",this,this._viewBox,[n,e,t,i,o]);var c,h,g=this.getSize(),m=A(t/g.width,i/g.height),k=this.top,R=o?"xMidYMid meet":"xMinYMin";for(n==null?(this._vbSize&&(m=1),delete this._vbSize,c="0 0 "+this.width+$+this.height):(this._vbSize=m,c=n+$+e+$+t+$+i),j(this.canvas,{viewBox:c,preserveAspectRatio:R});m&&k;)h="stroke-width"in k.attrs?k.attrs["stroke-width"]:1,k.attr({"stroke-width":h}),k._.dirty=1,k._.dirtyT=1,k=k.prev;return this._viewBox=[n,e,t,i,!!o],this},u.prototype.renderfix=function(){var n,e=this.canvas,t=e.style;try{n=e.getScreenCTM()||e.createSVGMatrix()}catch(c){n=e.createSVGMatrix()}var i=-n.e%1,o=-n.f%1;(i||o)&&(i&&(this._left=(this._left+i)%1,t.left=this._left+"px"),o&&(this._top=(this._top+o)%1,t.top=this._top+"px"))},u.prototype.clear=function(){u.eve("raphael.clear",this);for(var n=this.canvas;n.firstChild;)n.removeChild(n.firstChild);this.bottom=this.top=null,(this.desc=j("desc")).appendChild(u._g.doc.createTextNode("Created with Rapha├лl "+u.version)),n.appendChild(this.desc),n.appendChild(this.defs=j("defs"))},u.prototype.remove=function(){for(var n in se("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[n]=typeof this[n]=="function"?u._removedFactory(n):null};var ae=u.st;for(var Pe in X)X[f](Pe)&&!ae[f](Pe)&&(ae[Pe]=function(n){return function(){var e=arguments;return this.forEach(function(t){t[n].apply(t,e)})}}(Pe))}}.apply(M,z))===void 0||(N.exports=O)},function(N,M,H){var z,O;z=[H(0)],(O=function(u){if(!u||u.vml){var f="hasOwnProperty",b=String,E=parseFloat,F=Math,q=F.round,A=F.max,T=F.min,D=F.abs,Q=/[, ]+/,se=u.eve,U=" ",$="",ce={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},pe=/([clmz]),?([^clmz]*)/gi,ye=/ progid:\S+Blur\([^\)]+\)/g,j=/-?[^,\s-]+/g,ie="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",B=21600,Se={path:1,rect:1,image:1},P={circle:1,ellipse:1},le=function(e,t,i){var o=u.matrix();return o.rotate(-e,.5,.5),{dx:o.x(t,i),dy:o.y(t,i)}},_e=function(e,t,i,o,c,h){var g=e._,m=e.matrix,k=g.fillpos,R=e.node,V=R.style,W=1,ne="",te=B/t,me=B/i;if(V.visibility="hidden",t&&i){if(R.coordsize=D(te)+U+D(me),V.rotation=h*(t*i<0?-1:1),h){var ge=le(h,o,c);o=ge.dx,c=ge.dy}if(t<0&&(ne+="x"),i<0&&(ne+=" y")&&(W=-1),V.flip=ne,R.coordorigin=o*-te+U+c*-me,k||g.fillsize){var be=R.getElementsByTagName("fill");be=be&&be[0],R.removeChild(be),k&&(ge=le(h,m.x(k[0],k[1]),m.y(k[0],k[1])),be.position=ge.dx*W+U+ge.dy*W),g.fillsize&&(be.size=g.fillsize[0]*D(t)+U+g.fillsize[1]*D(i)),R.appendChild(be)}V.visibility="visible"}};u.toString=function(){return`Your browser doesnтАЩt support SVG. Falling down to VML.
You are running Rapha├лl `+this.version};var G,we=function(e,t,i){for(var o=b(t).toLowerCase().split("-"),c=i?"end":"start",h=o.length,g="classic",m="medium",k="medium";h--;)switch(o[h]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":g=o[h];break;case"wide":case"narrow":k=o[h];break;case"long":case"short":m=o[h]}var R=e.node.getElementsByTagName("stroke")[0];R[c+"arrow"]=g,R[c+"arrowlength"]=m,R[c+"arrowwidth"]=k},ke=function(e,t){e.attrs=e.attrs||{};var i=e.node,o=e.attrs,c=i.style,h=Se[e.type]&&(t.x!=o.x||t.y!=o.y||t.width!=o.width||t.height!=o.height||t.cx!=o.cx||t.cy!=o.cy||t.rx!=o.rx||t.ry!=o.ry||t.r!=o.r),g=P[e.type]&&(o.cx!=t.cx||o.cy!=t.cy||o.r!=t.r||o.rx!=t.rx||o.ry!=t.ry),m=e;for(var k in t)t[f](k)&&(o[k]=t[k]);if(h&&(o.path=u._getPath[e.type](e),e._.dirty=1),t.href&&(i.href=t.href),t.title&&(i.title=t.title),t.target&&(i.target=t.target),t.cursor&&(c.cursor=t.cursor),"blur"in t&&e.blur(t.blur),(t.path&&e.type=="path"||h)&&(i.path=function(Oe){var Ke=/[ahqstv]/gi,ht=u._pathToAbsolute;if(b(Oe).match(Ke)&&(ht=u._path2curve),Ke=/[clmz]/g,ht==u._pathToAbsolute&&!b(Oe).match(Ke)){var Ge=b(Oe).replace(pe,function(Zt,pt,mt){var et=[],Nt=pt.toLowerCase()=="m",it=ce[pt];return mt.replace(j,function(Mt){Nt&&et.length==2&&(it+=et+ce[pt=="m"?"l":"L"],et=[]),et.push(q(Mt*B))}),it+et});return Ge}var dt,We,kt=ht(Oe);Ge=[];for(var ft=0,St=kt.length;ft<St;ft++){dt=kt[ft],(We=kt[ft][0].toLowerCase())=="z"&&(We="x");for(var Ze=1,$e=dt.length;Ze<$e;Ze++)We+=q(dt[Ze]*B)+(Ze!=$e-1?",":$);Ge.push(We)}return Ge.join(U)}(~b(o.path).toLowerCase().indexOf("r")?u._pathToAbsolute(o.path):o.path),e._.dirty=1,e.type=="image"&&(e._.fillpos=[o.x,o.y],e._.fillsize=[o.width,o.height],_e(e,1,1,0,0,0))),"transform"in t&&e.transform(t.transform),g){var R=+o.cx,V=+o.cy,W=+o.rx||+o.r||0,ne=+o.ry||+o.r||0;i.path=u.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",q((R-W)*B),q((V-ne)*B),q((R+W)*B),q((V+ne)*B),q(R*B)),e._.dirty=1}if("clip-rect"in t){var te=b(t["clip-rect"]).split(Q);if(te.length==4){te[2]=+te[2]+ +te[0],te[3]=+te[3]+ +te[1];var me=i.clipRect||u._g.doc.createElement("div"),ge=me.style;ge.clip=u.format("rect({1}px {2}px {3}px {0}px)",te),i.clipRect||(ge.position="absolute",ge.top=0,ge.left=0,ge.width=e.paper.width+"px",ge.height=e.paper.height+"px",i.parentNode.insertBefore(me,i),me.appendChild(i),i.clipRect=me)}t["clip-rect"]||i.clipRect&&(i.clipRect.style.clip="auto")}if(e.textpath){var be=e.textpath.style;t.font&&(be.font=t.font),t["font-family"]&&(be.fontFamily='"'+t["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,$)+'"'),t["font-size"]&&(be.fontSize=t["font-size"]),t["font-weight"]&&(be.fontWeight=t["font-weight"]),t["font-style"]&&(be.fontStyle=t["font-style"])}if("arrow-start"in t&&we(m,t["arrow-start"]),"arrow-end"in t&&we(m,t["arrow-end"],1),t.opacity!=null||t.fill!=null||t.src!=null||t.stroke!=null||t["stroke-width"]!=null||t["stroke-opacity"]!=null||t["fill-opacity"]!=null||t["stroke-dasharray"]!=null||t["stroke-miterlimit"]!=null||t["stroke-linejoin"]!=null||t["stroke-linecap"]!=null){var xe=i.getElementsByTagName("fill");if(!(xe=xe&&xe[0])&&(xe=G("fill")),e.type=="image"&&t.src&&(xe.src=t.src),t.fill&&(xe.on=!0),xe.on!=null&&t.fill!="none"&&t.fill!==null||(xe.on=!1),xe.on&&t.fill){var Ae=b(t.fill).match(u._ISURL);if(Ae){xe.parentNode==i&&i.removeChild(xe),xe.rotate=!0,xe.src=Ae[1],xe.type="tile";var Te=e.getBBox(1);xe.position=Te.x+U+Te.y,e._.fillpos=[Te.x,Te.y],u._preload(Ae[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else xe.color=u.getRGB(t.fill).hex,xe.src=$,xe.type="solid",u.getRGB(t.fill).error&&(m.type in{circle:1,ellipse:1}||b(t.fill).charAt()!="r")&&ee(m,t.fill,xe)&&(o.fill="none",o.gradient=t.fill,xe.rotate=!1)}if("fill-opacity"in t||"opacity"in t){var Me=((+o["fill-opacity"]+1||2)-1)*((+o.opacity+1||2)-1)*((+u.getRGB(t.fill).o+1||2)-1);Me=T(A(Me,0),1),xe.opacity=Me,xe.src&&(xe.color="none")}i.appendChild(xe);var Re=i.getElementsByTagName("stroke")&&i.getElementsByTagName("stroke")[0],De=!1;!Re&&(De=Re=G("stroke")),(t.stroke&&t.stroke!="none"||t["stroke-width"]||t["stroke-opacity"]!=null||t["stroke-dasharray"]||t["stroke-miterlimit"]||t["stroke-linejoin"]||t["stroke-linecap"])&&(Re.on=!0),(t.stroke=="none"||t.stroke===null||Re.on==null||t.stroke==0||t["stroke-width"]==0)&&(Re.on=!1);var qe=u.getRGB(t.stroke);Re.on&&t.stroke&&(Re.color=qe.hex),Me=((+o["stroke-opacity"]+1||2)-1)*((+o.opacity+1||2)-1)*((+qe.o+1||2)-1);var Fe=.75*(E(t["stroke-width"])||1);if(Me=T(A(Me,0),1),t["stroke-width"]==null&&(Fe=o["stroke-width"]),t["stroke-width"]&&(Re.weight=Fe),Fe&&Fe<1&&(Me*=Fe)&&(Re.weight=1),Re.opacity=Me,t["stroke-linejoin"]&&(Re.joinstyle=t["stroke-linejoin"]||"miter"),Re.miterlimit=t["stroke-miterlimit"]||8,t["stroke-linecap"]&&(Re.endcap=t["stroke-linecap"]=="butt"?"flat":t["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in t){var rt={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Re.dashstyle=rt[f](t["stroke-dasharray"])?rt[t["stroke-dasharray"]]:$}De&&i.appendChild(Re)}if(m.type=="text"){m.paper.canvas.style.display=$;var Ve=m.paper.span,Xe=o.font&&o.font.match(/\d+(?:\.\d*)?(?=px)/);c=Ve.style,o.font&&(c.font=o.font),o["font-family"]&&(c.fontFamily=o["font-family"]),o["font-weight"]&&(c.fontWeight=o["font-weight"]),o["font-style"]&&(c.fontStyle=o["font-style"]),Xe=E(o["font-size"]||Xe&&Xe[0])||10,c.fontSize=100*Xe+"px",m.textpath.string&&(Ve.innerHTML=b(m.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var ct=Ve.getBoundingClientRect();m.W=o.w=(ct.right-ct.left)/100,m.H=o.h=(ct.bottom-ct.top)/100,m.X=o.x,m.Y=o.y+m.H/2,("x"in t||"y"in t)&&(m.path.v=u.format("m{0},{1}l{2},{1}",q(o.x*B),q(o.y*B),q(o.x*B)+1));for(var _t=["x","y","text","font","font-family","font-weight","font-style","font-size"],ut=0,Tt=_t.length;ut<Tt;ut++)if(_t[ut]in t){m._.dirty=1;break}switch(o["text-anchor"]){case"start":m.textpath.style["v-text-align"]="left",m.bbx=m.W/2;break;case"end":m.textpath.style["v-text-align"]="right",m.bbx=-m.W/2;break;default:m.textpath.style["v-text-align"]="center",m.bbx=0}m.textpath.style["v-text-kern"]=!0}},ee=function(e,t,i){e.attrs=e.attrs||{},e.attrs;var o=Math.pow,c="linear",h=".5 .5";if(e.attrs.gradient=t,t=(t=b(t).replace(u._radial_gradient,function(W,ne,te){return c="radial",ne&&te&&(ne=E(ne),te=E(te),o(ne-.5,2)+o(te-.5,2)>.25&&(te=F.sqrt(.25-o(ne-.5,2))*(2*(te>.5)-1)+.5),h=ne+U+te),$})).split(/\s*\-\s*/),c=="linear"){var g=t.shift();if(g=-E(g),isNaN(g))return null}var m=u._parseDots(t);if(!m)return null;if(e=e.shape||e.node,m.length){e.removeChild(i),i.on=!0,i.method="none",i.color=m[0].color,i.color2=m[m.length-1].color;for(var k=[],R=0,V=m.length;R<V;R++)m[R].offset&&k.push(m[R].offset+U+m[R].color);i.colors=k.length?k.join():"0% "+i.color,c=="radial"?(i.type="gradientTitle",i.focus="100%",i.focussize="0 0",i.focusposition=h,i.angle=0):(i.type="gradient",i.angle=(270-g)%360),e.appendChild(i)}return 1},X=function(e,t){this[0]=this.node=e,e.raphael=!0,this.id=u._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=t,this.matrix=u.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null},ae=u.el;X.prototype=ae,ae.constructor=X,ae.transform=function(e){if(e==null)return this._.transform;var t,i=this.paper._viewBoxShift,o=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:$;i&&(t=e=b(e).replace(/\.{3}|\u2026/g,this._.transform||$)),u._extractTransform(this,o+e);var c,h=this.matrix.clone(),g=this.skew,m=this.node,k=~b(this.attrs.fill).indexOf("-"),R=!b(this.attrs.fill).indexOf("url(");if(h.translate(1,1),R||k||this.type=="image")if(g.matrix="1 0 0 1",g.offset="0 0",c=h.split(),k&&c.noRotation||!c.isSimple){m.style.filter=h.toFilter();var V=this.getBBox(),W=this.getBBox(1),ne=V.x-W.x,te=V.y-W.y;m.coordorigin=ne*-B+U+te*-B,_e(this,1,1,ne,te,0)}else m.style.filter=$,_e(this,c.scalex,c.scaley,c.dx,c.dy,c.rotate);else m.style.filter=$,g.matrix=b(h),g.offset=h.offset();return t!==null&&(this._.transform=t,u._extractTransform(this,t)),this},ae.rotate=function(e,t,i){if(this.removed)return this;if(e!=null){if((e=b(e).split(Q)).length-1&&(t=E(e[1]),i=E(e[2])),e=E(e[0]),i==null&&(t=i),t==null||i==null){var o=this.getBBox(1);t=o.x+o.width/2,i=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,i]])),this}},ae.translate=function(e,t){return this.removed?this:((e=b(e).split(Q)).length-1&&(t=E(e[1])),e=E(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]])),this)},ae.scale=function(e,t,i,o){if(this.removed)return this;if((e=b(e).split(Q)).length-1&&(t=E(e[1]),i=E(e[2]),o=E(e[3]),isNaN(i)&&(i=null),isNaN(o)&&(o=null)),e=E(e[0]),t==null&&(t=e),o==null&&(i=o),i==null||o==null)var c=this.getBBox(1);return i=i==null?c.x+c.width/2:i,o=o==null?c.y+c.height/2:o,this.transform(this._.transform.concat([["s",e,t,i,o]])),this._.dirtyT=1,this},ae.hide=function(){return!this.removed&&(this.node.style.display="none"),this},ae.show=function(){return!this.removed&&(this.node.style.display=$),this},ae.auxGetBBox=u.el.getBBox,ae.getBBox=function(){var e=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var t={},i=1/this.paper._viewBoxShift.scale;return t.x=e.x-this.paper._viewBoxShift.dx,t.x*=i,t.y=e.y-this.paper._viewBoxShift.dy,t.y*=i,t.width=e.width*i,t.height=e.height*i,t.x2=t.x+t.width,t.y2=t.y+t.height,t}return e},ae._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},ae.remove=function(){if(!this.removed&&this.node.parentNode){for(var e in this.paper.__set__&&this.paper.__set__.exclude(this),u.eve.unbind("raphael.*.*."+this.id),u._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[e]=typeof this[e]=="function"?u._removedFactory(e):null;this.removed=!0}},ae.attr=function(e,t){if(this.removed)return this;if(e==null){var i={};for(var o in this.attrs)this.attrs[f](o)&&(i[o]=this.attrs[o]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(t==null&&u.is(e,"string")){if(e=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var c=e.split(Q),h={},g=0,m=c.length;g<m;g++)(e=c[g])in this.attrs?h[e]=this.attrs[e]:u.is(this.paper.customAttributes[e],"function")?h[e]=this.paper.customAttributes[e].def:h[e]=u._availableAttrs[e];return m-1?h:h[c[0]]}if(this.attrs&&t==null&&u.is(e,"array")){for(h={},g=0,m=e.length;g<m;g++)h[e[g]]=this.attr(e[g]);return h}var k;for(var R in t!=null&&((k={})[e]=t),t==null&&u.is(e,"object")&&(k=e),k)se("raphael.attr."+R+"."+this.id,this,k[R]);if(k){for(R in this.paper.customAttributes)if(this.paper.customAttributes[f](R)&&k[f](R)&&u.is(this.paper.customAttributes[R],"function")){var V=this.paper.customAttributes[R].apply(this,[].concat(k[R]));for(var W in this.attrs[R]=k[R],V)V[f](W)&&(k[W]=V[W])}k.text&&this.type=="text"&&(this.textpath.string=k.text),ke(this,k)}return this},ae.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&u._tofront(this,this.paper),this},ae.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),u._toback(this,this.paper)),this)},ae.insertAfter=function(e){return this.removed?this:(e.constructor==u.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),u._insertafter(this,e,this.paper),this)},ae.insertBefore=function(e){return this.removed?this:(e.constructor==u.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),u._insertbefore(this,e,this.paper),this)},ae.blur=function(e){var t=this.node.runtimeStyle,i=t.filter;return i=i.replace(ye,$),+e!=0?(this.attrs.blur=e,t.filter=i+U+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+e||1.5)+")",t.margin=u.format("-{0}px 0 0 -{0}px",q(+e||1.5))):(t.filter=i,t.margin=0,delete this.attrs.blur),this},u._engine.path=function(e,t){var i=G("shape");i.style.cssText=ie,i.coordsize=B+U+B,i.coordorigin=t.coordorigin;var o=new X(i,t),c={fill:"none",stroke:"#000"};e&&(c.path=e),o.type="path",o.path=[],o.Path=$,ke(o,c),t.canvas&&t.canvas.appendChild(i);var h=G("skew");return h.on=!0,i.appendChild(h),o.skew=h,o.transform($),o},u._engine.rect=function(e,t,i,o,c,h){var g=u._rectPath(t,i,o,c,h),m=e.path(g),k=m.attrs;return m.X=k.x=t,m.Y=k.y=i,m.W=k.width=o,m.H=k.height=c,k.r=h,k.path=g,m.type="rect",m},u._engine.ellipse=function(e,t,i,o,c){var h=e.path();return h.attrs,h.X=t-o,h.Y=i-c,h.W=2*o,h.H=2*c,h.type="ellipse",ke(h,{cx:t,cy:i,rx:o,ry:c}),h},u._engine.circle=function(e,t,i,o){var c=e.path();return c.attrs,c.X=t-o,c.Y=i-o,c.W=c.H=2*o,c.type="circle",ke(c,{cx:t,cy:i,r:o}),c},u._engine.image=function(e,t,i,o,c,h){var g=u._rectPath(i,o,c,h),m=e.path(g).attr({stroke:"none"}),k=m.attrs,R=m.node,V=R.getElementsByTagName("fill")[0];return k.src=t,m.X=k.x=i,m.Y=k.y=o,m.W=k.width=c,m.H=k.height=h,k.path=g,m.type="image",V.parentNode==R&&R.removeChild(V),V.rotate=!0,V.src=t,V.type="tile",m._.fillpos=[i,o],m._.fillsize=[c,h],R.appendChild(V),_e(m,1,1,0,0,0),m},u._engine.text=function(e,t,i,o){var c=G("shape"),h=G("path"),g=G("textpath");t=t||0,i=i||0,o=o||"",h.v=u.format("m{0},{1}l{2},{1}",q(t*B),q(i*B),q(t*B)+1),h.textpathok=!0,g.string=b(o),g.on=!0,c.style.cssText=ie,c.coordsize=B+U+B,c.coordorigin="0 0";var m=new X(c,e),k={fill:"#000",stroke:"none",font:u._availableAttrs.font,text:o};m.shape=c,m.path=h,m.textpath=g,m.type="text",m.attrs.text=b(o),m.attrs.x=t,m.attrs.y=i,m.attrs.w=1,m.attrs.h=1,ke(m,k),c.appendChild(g),c.appendChild(h),e.canvas.appendChild(c);var R=G("skew");return R.on=!0,c.appendChild(R),m.skew=R,m.transform($),m},u._engine.setSize=function(e,t){var i=this.canvas.style;return this.width=e,this.height=t,e==+e&&(e+="px"),t==+t&&(t+="px"),i.width=e,i.height=t,i.clip="rect(0 "+e+" "+t+" 0)",this._viewBox&&u._engine.setViewBox.apply(this,this._viewBox),this},u._engine.setViewBox=function(e,t,i,o,c){u.eve("raphael.setViewBox",this,this._viewBox,[e,t,i,o,c]);var h,g,m=this.getSize(),k=m.width,R=m.height;return c&&(i*(h=R/o)<k&&(e-=(k-i*h)/2/h),o*(g=k/i)<R&&(t-=(R-o*g)/2/g)),this._viewBox=[e,t,i,o,!!c],this._viewBoxShift={dx:-e,dy:-t,scale:m},this.forEach(function(V){V.transform("...")}),this},u._engine.initWin=function(e){var t=e.document;t.styleSheets.length<31?t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):t.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),G=function(i){return t.createElement("<rvml:"+i+' class="rvml">')}}catch(i){G=function(o){return t.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},u._engine.initWin(u._g.win),u._engine.create=function(){var e=u._getContainer.apply(0,arguments),t=e.container,i=e.height,o=e.width,c=e.x,h=e.y;if(!t)throw new Error("VML container not found.");var g=new u._Paper,m=g.canvas=u._g.doc.createElement("div"),k=m.style;return c=c||0,h=h||0,o=o||512,i=i||342,g.width=o,g.height=i,o==+o&&(o+="px"),i==+i&&(i+="px"),g.coordsize=216e5+U+216e5,g.coordorigin="0 0",g.span=u._g.doc.createElement("span"),g.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",m.appendChild(g.span),k.cssText=u.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",o,i),t==1?(u._g.doc.body.appendChild(m),k.left=c+"px",k.top=h+"px",k.position="absolute"):t.firstChild?t.insertBefore(m,t.firstChild):t.appendChild(m),g.renderfix=function(){},g},u.prototype.clear=function(){u.eve("raphael.clear",this),this.canvas.innerHTML=$,this.span=u._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},u.prototype.remove=function(){for(var e in u.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[e]=typeof this[e]=="function"?u._removedFactory(e):null;return!0};var Pe=u.st;for(var n in ae)ae[f](n)&&!Pe[f](n)&&(Pe[n]=function(e){return function(){var t=arguments;return this.forEach(function(i){i[e].apply(i,t)})}}(n))}}.apply(M,z))===void 0||(N.exports=O)}])})}),Y1=j1(X1),Bt=Y1;var L={};L.Common={nodeIdIncrement:0,activeNode:0,roundFloat:function(x,d){for(var N=0,M=1;N<d;)M*=10,N++;return Math.round(x*M)/M},apply:function(x,d){if(x&&typeof d=="object")for(var N in d)x[N]=d[N];return x},addRaphEventHandler:function(x,d,N,M){try{x[d](function(H,z){return function(O,u){var f=z;f.e=O,H(f)}}(N,M))}catch(H){}},isInteger:function(x){return!isNaN(parseInt(x))},isXMLSerializerAvailable:function(){return typeof XMLSerializer=="function"},createSvgEl:function(x,d){if(x=document.createElementNS("http://www.w3.org/2000/svg",x),d)for(var N in d)d.hasOwnProperty(N)&&x.setAttribute(N,String(d[N]));return x},createGradientEl:function(x,d,N){if(d.type!="radialGradient")return!1;var M=L.Common.createSvgEl("radialGradient",{id:x,gradientUnits:"userSpaceOnUse",cx:N[0],cy:N[1],r:N[2],fx:N[0],fy:N[1]});if(d.stop)for(var H=d.stop,z=0;z<H.length;z++){var O=H[z];O["@attributes"]?M.appendChild(L.Common.createSvgEl("stop",O["@attributes"])):(O._attributes&&delete O._attributes,O._children&&delete O._children,O.__proto__&&delete O.__proto__,M.appendChild(L.Common.createSvgEl("stop",O)))}return M},setCssStyle:function(x,d){var N=document.styleSheets[0];N.addRule?N.addRule(x,d):N.insertRule&&N.insertRule(x+" { "+d+" }",N.cssRules.length)}};L.PhyloCanvas=function(){var x,d,N,M,H;return function(z,O,u,f,b){if(this.getNewickObject=function(){return N},this.clear=function(){},this.scale=function(F){M.svg.scale(F)},this.getSvg=function(){return M},this.getPhylogram=function(){return x},this.getSvgSource=function(){if(Bt.svg&&L.Common.isXMLSerializerAvailable()){var F=new XMLSerializer;return F.serializeToString(M.svg.canvas)}else return!1},typeof z=="object")if(z.xml){if(z.fileSource)var E=z.xml;else var E=wt.textToXML(z.xml);E=wt.xmlToJSON(E),H=new L.PhyloCanvas.PhyloxmlParse(E)}else if(z.phyloxml){if(z.fileSource)var E=z.phyloxml;else var E=wt.textToXML(z.phyloxml);E=wt.xmlToJSON(E),H=new L.PhyloCanvas.PhyloxmlParse(E)}else if(z.nexml){if(z.fileSource)var E=z.nexml;else var E=wt.textToXML(z.nexml);E=wt.xmlToJSON(E),H=new L.PhyloCanvas.NexmlParse(E,z)}else z.json?H=new L.PhyloCanvas.PhyloxmlParse(z.json):z.newick?H=new L.PhyloCanvas.NewickParse(z.newick):z.nexmlJson?H=new L.PhyloCanvas.NexmlJsonParse(z):alert("Please set the format of input data");else H=new L.PhyloCanvas.NewickParse(z);d=O,M=new L.PhyloCanvas.Render.SVG(d,u,f),b=="circular"?x=new L.PhyloCanvas.Render.CircularPhylogram(M,H):x=new L.PhyloCanvas.Render.Phylogram(M,H)}}();L.PhyloCanvas.prototype={};L.PhyloCanvas.Node=function(){return function(x,d){this.id=L.Common.nodeIdIncrement+=1,this.level=0,this.len=0,this.newickLen=0,this.name="",this.type="",this.chart={},this.img=[],x&&L.Common.apply(this,x),this._countAllChildren=!1,this._countImmediateChildren=!1,this._midBranchPosition=!1,this.children=new Array,d&&d.children.push(this)}}();L.PhyloCanvas.Node.prototype={getCountAllChildren:function(){if(this._countAllChildren!==!1)return this._countAllChildren;var x=0;for(var d in this.children)if(L.Common.isInteger(d)){var N=this.children[d];N.children&&N.children.length>0?x+=N.getCountAllChildren():x++}return this._countAllChildren=x,x},getCountImmediateChildren:function(){if(this._countImmediateChildren!==!1)return this._countImmediateChildren;var x=0;for(var d in this.children){var N=this.children[d];x+=N.length}return this._countImmediateChildren=x,x},getMidbranchPosition:function(x){if(this._midBranchPosition!==!1)return this._midBranchPosition;for(var d=[0,0],N=0;N<this.children.length;N++){var M=this.children[N];M.children&&M.children.length>0?N==0&&x?(d[0]=M.getMidbranchPosition(!0),d[1]+=M.getCountAllChildren()-1):N==0?(d[0]=M.getMidbranchPosition(),d[1]+=M.getCountAllChildren()):N==this.children.length-1?d[1]+=M.getMidbranchPosition():d[1]+=M.getCountAllChildren():N==0&&x?d[0]=0:N==0?(d[0]=1,d[1]+=1):(N==this.children.length-1,d[1]+=1)}return this._midBranchPosition=d[1]>=d[0]?(d[1]+d[0])/2:d[0],this._midBranchPosition}};L.PhyloCanvas.NewickParse=function(){var x,d,N,M=0,H=0,z,O,u=function(A){for(var T=new L.PhyloCanvas.Node;d!==")"&&d!==",";)d===":"?(F(),T.len=L.Common.roundFloat(b(),4),T.len==0&&(T.len=1e-4)):d==="'"||d==='"'?(T.type="label",T.name=E(d)):(T.type="label",T.name=b());return T.level=A.level+1,T},f=function(A){var T=new L.PhyloCanvas.Node;for(A&&(T.level=A.level+1);d!==")";)F(),d==="("?T.children.push(f(T)):T.children.push(u(T));return F(),d!==":"&&d!==")"&&d!==","&&d!==";"&&(T.type="label",T.name=b()),d===":"&&(F(),T.len=L.Common.roundFloat(b(),4),T.len==0&&(T.len=1e-4),T.type="stem"),T},b=function(){for(var A="";d!==":"&&d!==")"&&d!==","&&d!==";";)A+=d,F();return A},E=function(A){for(var T="";d!==A;)T+=d,F();return T},F=function(){return d=x.charAt(N),N+=1,d},q=function(A,T){if(A.children&&A.children.length)for(var D=0;D<A.children.length;D++){var Q=A.children[D];Q.len===0&&(Q.len=1),Q.newickLen=L.Common.roundFloat(Q.len+A.newickLen,4),Q.level>M&&(M=Q.level),Q.newickLen>H&&(H=Q.newickLen),Q.children.length>0&&q(Q,A)}return A};return function(A){this.getRoot=function(){return z},this.getLevels=function(){return M},this.getNewickLen=function(){return H},this.getValidate=function(){return O},M=0,H=0,x=A,N=0,F(),z=f(),z=q(z)}}();L.PhyloCanvas.NewickParse.prototype={};L.PhyloCanvas.PhyloxmlParse=function(){var x=0,d=0,N,M,H=function(u,f){var b=new L.PhyloCanvas.Node;if(f&&(b.level=f.level+1),u.clade&&u.clade.length)for(var E=0;E<u.clade.length;E++){var F=u.clade[E];b.children.push(H(F,b))}if(u.branch_length&&(typeof u.branch_length=="object"&&(u.branch_length=u.branch_length[0].Text),b.len=L.Common.roundFloat(u.branch_length,4),b.len==0&&(b.len=1e-4)),u.color?(b.red=u.color[0].red[0].Text,b.green=u.color[0].green[0].Text,b.blue=u.color[0].blue[0].Text):(b.red=0,b.green=0,b.blue=0),u.property&&u.property[0].applies_to=="node"&&u.property[0].ref=="style:font_color"&&(b.font_color_hex=u.property[0].Text),u.name?(b.type="label",b.name=u.name[0].Text,u.name[0]&&u.name[0].style&&(b.style=u.name[0].style),u.name[0]&&u.name[0].bgStyle&&(b.bgStyle=u.name[0].bgStyle)):u.confidence&&(b.name=u.confidence[0].Text),u.sequence&&u.sequence[0]&&u.sequence[0].name&&u.sequence[0].name[0]&&u.sequence[0].name[0].Text&&(b.sequenceName=u.sequence[0].name[0].Text),u.taxonomy&&u.taxonomy[0]&&(u.taxonomy[0].scientific_name&&u.taxonomy[0].scientific_name[0]&&u.taxonomy[0].scientific_name[0].Text&&(b.taxonomyScientificName=u.taxonomy[0].scientific_name[0].Text),u.taxonomy[0].common_name&&u.taxonomy[0].common_name[0]&&u.taxonomy[0].common_name[0].Text&&(b.taxonomyCommonName=u.taxonomy[0].common_name[0].Text)),u.sequence&&u.sequence[0]&&u.sequence[0].accession&&u.sequence[0].accession[0]&&u.sequence[0].accession[0].Text&&(b.sequenceAccession=u.sequence[0].accession[0].Text),u.point&&(b.LatLong=[u.point[0].lat[0].Text,u.point[0].long[0].Text]),b.name||(b.sequenceName?b.name=b.sequenceName:b.taxonomyScientificName?b.name=b.taxonomyScientificName:b.taxonomyCommonName?b.name=b.taxonomyCommonName:b.sequenceAccession&&(b.name=b.sequenceAccession),b.name&&(b.type="label")),u.annotation&&(u.annotation[0]&&u.annotation[0].desc&&u.annotation[0].desc[0]&&u.annotation[0].desc[0].Text&&(b.description=u.annotation[0].desc[0].Text),u.annotation[0]&&u.annotation[0].uri&&u.annotation[0].uri[0]&&u.annotation[0].uri[0].Text&&(b.uri=u.annotation[0].uri[0].Text),u.annotation[0]&&u.annotation[0].img))for(var E in u.annotation[0].img)L.Common.isInteger(E)&&(b.img[E]=u.annotation[0].img[E].Text);if(u.chart&&u.chart[0])for(var E in u.chart[0])E!="Text"&&E!="_children"&&(b.chart[E]=u.chart[0][E][0].Text);return b&&b.level>1&&(b.len||(M="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),b},z=function(u,f){if(u.children&&u.children.length)for(var b=0;b<u.children.length;b++){var E=u.children[b];E.newickLen=Math.round((E.len+u.newickLen)*1e4)/1e4,E.level>x&&(x=E.level),E.newickLen>d&&(d=E.newickLen),E.children.length>0&&z(E,u)}return u},O=function(u,f){for(var b in u)b!="_children"&&b!="Text"&&(b=="rectangular"||b=="circular"?O(u[b][0],b):(L.PhyloCanvas.Render.Parameters[b]||(L.PhyloCanvas.Render.Parameters[b]={}),L.PhyloCanvas.Render.Parameters.set(b,u[b][0].Text,f)))};return function(u){if(this.getRoot=function(){return N},this.getLevels=function(){return x},this.getNewickLen=function(){return d},this.getValidate=function(){return M},u.phylogeny&&u.phylogeny[0]&&u.phylogeny[0].clade&&(N=H(u.phylogeny[0].clade[0])),u.phylogeny&&u.phylogeny[0]&&u.phylogeny[0].render&&u.phylogeny[0].render[0]){var f=u.phylogeny[0].render[0];if(f&&f.styles){var b=f.styles[0];for(var E in b)if(E!="_children"&&E!="Text")if(b[E][0].type&&b[E][0].type=="radialGradient"&&Bt.svg)b[E][0].name=E,L.PhyloCanvas.Render.Style[E]=b[E][0],L.PhyloCanvas.Render.Style.jsphylosvgGradientList||(L.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),L.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(E);else{L.PhyloCanvas.Render.Style[E]||(L.PhyloCanvas.Render.Style[E]={});for(var F in b[E][0])F!="_attributes"&&F!="_children"&&F!="type"&&(L.PhyloCanvas.Render.Style[E][F.replace("_","-")]=b[E][0][F])}}if(f&&f.parameters&&O(f.parameters[0]),f&&f.charts){var q=f.charts[0];for(var E in q)if(E!="_children"&&E!="Text")for(var F in q[E])q[E][F].type=="binary"?(q[E][F].chart=E,L.PhyloCanvas.Render.Parameters.binaryCharts.push(q[E][F])):q[E][F].type=="integratedBinary"?(q[E][F].chart=E,L.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(q[E][F])):q[E][F].type=="bar"&&(q[E][F].chart=E,L.PhyloCanvas.Render.Parameters.barCharts.length==1&&L.PhyloCanvas.Render.Parameters.barCharts.shift(),L.PhyloCanvas.Render.Parameters.barCharts.push(q[E][F]))}}N=z(N)}}();L.PhyloCanvas.PhyloxmlParse.prototype={};L.PhyloCanvas.NexmlParse=function(){var x=0,d=0,N,M,H,z,O=function(b,E,F){var q=new L.PhyloCanvas.Node;F&&(q.level=F.level+1);for(var A=0;A<H.length;A++)if(H[A].source==b.id)for(var T=0;T<z.length;T++)H[A].target==z[T].id&&q.children.push(O(z[T],H[A].length,q));if(q&&q.level>0&&!q.len&&(q.len=1),E&&(q.len=L.Common.roundFloat(E,4),q.len==0&&(q.len=1e-4)),b.label&&(q.type="label",q.name=b.label,b.style&&(q.style=b.style)),b.color){let D=b.color.replace(/[a-z%\s\(\)]/g,"").split(",");q.red=D[0],q.green=D[1],q.blue=D[2]}else{let D=L.PhyloCanvas.Render.Style.line.stroke.replace(/[a-z%\s\(\)]/g,"").split(",");q.red=D[0],q.green=D[1],q.blue=D[2]}return q},u=function(b,E){if(b.children&&b.children.length)for(var F=0;F<b.children.length;F++){var q=b.children[F];q.newickLen=Math.round((q.len+b.newickLen)*1e4)/1e4,q.level>x&&(x=q.level),q.newickLen>d&&(d=q.newickLen),q.children.length>0&&u(q,b)}return b},f=function(b,E){for(var F in b)F!="_children"&&F!="Text"&&(F=="rectangular"||F=="circular"?f(b[F][0],F):(L.PhyloCanvas.Render.Parameters[F]||(L.PhyloCanvas.Render.Parameters[F]={}),L.PhyloCanvas.Render.Parameters.set(F,b[F][0].Text,E)))};return function(b,E){this.getRoot=function(){return N},this.getLevels=function(){return x},this.getNewickLen=function(){return d},this.getValidate=function(){return M},E.tree&&b.trees[0]&&b.trees[0].tree[E.tree-1]?(H=b.trees[0].tree[E.tree-1].edge,z=b.trees[0].tree[E.tree-1].node):(H=b.trees[0].tree[0].edge,z=b.trees[0].tree[0].node);for(var F=0;F<z.length;F++){var q=0;if(z[F].root&&z[F].root=="true"){N=z[F];break}for(var A=0;A<H.length;A++)H[A].target==z[F].id&&q++;if(q==0){N=z[F];break}}N?(N=O(N),N=u(N)):M="Error. Currently, only rooted NeXML trees are supported."}}();L.PhyloCanvas.NexmlParse.prototype={};L.PhyloCanvas.NexmlJsonParse=function(){var x=0,d=0,N,M,H=[],z=[],O=function(b,E,F){var q=new L.PhyloCanvas.Node;F&&(q.level=F.level+1);for(var A=0;A<H.length;A++)if(H[A].source==b.id)for(var T=0;T<z.length;T++)H[A].target==z[T].id&&q.children.push(O(z[T],H[A].length,q));return E&&(q.len=L.Common.roundFloat(E,4),q.len==0&&(q.len=1e-4)),b.label&&(q.type="label",q.name=b.label,b.accession&&(q.accession=b.accession),b.style&&(q.style=b.style),b.bgStyle&&(q.bgStyle=b.bgStyle)),b.chart&&(q.chart=b.chart),q&&q.level>1&&(q.len||(M="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),q},u=function(b,E){if(b.children&&b.children.length)for(var F=0;F<b.children.length;F++){var q=b.children[F];q.newickLen=Math.round((q.len+b.newickLen)*1e4)/1e4,q.level>x&&(x=q.level),q.newickLen>d&&(d=q.newickLen),q.children.length>0&&u(q,b)}return b},f=function(b,E){for(var F in b)F!="_children"&&F!="Text"&&(F=="rectangular"||F=="circular"?f(b[F],F):(L.PhyloCanvas.Render.Parameters[F]||(L.PhyloCanvas.Render.Parameters[F]={}),L.PhyloCanvas.Render.Parameters.set(F,b[F],E)))};return function(b){this.getRoot=function(){return N},this.getLevels=function(){return x},this.getNewickLen=function(){return d},this.getValidate=function(){return M};var E=b.nexmlJson.nexml,F=E.render;if(F&&F.styles){var q=F.styles;for(var A in q)if(A!="_children"&&A!="Text")if(q[A]["@attributes"].type&&q[A]["@attributes"].type=="radialGradient"&&Bt.svg)q[A].name=A,q[A].type=q[A]["@attributes"].type,L.PhyloCanvas.Render.Style[A]=q[A],L.PhyloCanvas.Render.Style.jsphylosvgGradientList||(L.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),L.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(A);else{L.PhyloCanvas.Render.Style[A]||(L.PhyloCanvas.Render.Style[A]={});for(var T in q[A]["@attributes"])T!="_attributes"&&T!="_children"&&T!="type"&&(L.PhyloCanvas.Render.Style[A][T.replace("_","-")]=q[A]["@attributes"][T])}}if(F&&F.parameters&&f(F.parameters),F&&F.charts){var D=F.charts;for(var A in D)D[A]["@attributes"].chart=A,D[A]["@attributes"].type=="binary"?L.PhyloCanvas.Render.Parameters.binaryCharts.push(D[A]["@attributes"]):D[A]["@attributes"].type=="integratedBinary"?L.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(D[A]["@attributes"]):D[A]["@attributes"].type=="bar"&&L.PhyloCanvas.Render.Parameters.barCharts.push(D[A]["@attributes"])}if(b.tree&&E.trees[0]&&E.trees[0].tree[b.tree-1])H=E.trees[0].tree[b.tree-1].edge,z=E.trees[0].tree[b.tree-1].node;else{for(var A=0;A<E.trees.tree.edge.length;A++)H.push(E.trees.tree.edge[A]["@attributes"]);for(var A=0;A<E.trees.tree.node.length;A++){var Q=E.trees.tree.node[A]["@attributes"];Q.label&&(Q.chart=E.trees.tree.node[A].chart),z.push(Q)}}for(var A=0;A<z.length;A++)z[A].root&&z[A].root=="true"&&(N=z[A]);N?(N=O(N),N=u(N)):M="Error. Currently, only rooted NeXML trees are supported."}}();L.PhyloCanvas.NexmlParse.prototype={};L.PhyloCanvas.Render={};L.PhyloCanvas.Render.Style={line:{stroke:"rgb(0,0,0)","stroke-width":1},text:{"font-family":"Verdana","font-size":12,"text-anchor":"start"},path:{stroke:"rgb(0,0,0)","stroke-width":1},connectedDash:{stroke:"rgb(200,200,200)","stroke-dasharray":". "},textSecantBg:{fill:"#EEE",stroke:"#DDD"},highlightedEdgeCircle:{fill:"black",stroke:"black"},barChart:{fill:"#003300",stroke:"#DDD"},getStyle:function(x,d){return this[x]?this[x]:this[d]}};L.PhyloCanvas.Render.Parameters={jsOverride:0,Rectangular:{bufferX:200,paddingX:10,paddingY:20,bufferInnerLabels:10,bufferOuterLabels:5,minHeightBetweenLeaves:10,alignPadding:0,alignRight:!1,showScaleBar:!1},Circular:{bufferRadius:.33,bufferAngle:20,initStartAngle:160,innerCircleRadius:0,minHeightBetweenLeaves:5,bufferInnerLabels:2,bufferOuterLabels:5},binaryCharts:[],integratedBinaryCharts:[],barCharts:[],binaryChartBufferInner:5,binaryChartBufferSiblings:.01,binaryChartThickness:15,binaryChartDisjointed:!1,barChartBufferInner:3,barChartHeight:50,barChartWidth:.5,set:function(x,d,N){this.jsOverride||(N?N=="circular"?this.Circular[x]=parseFloat(d):N=="rectangular"&&(this.Rectangular[x]=parseFloat(d)):this[x]=parseFloat(d))}};L.PhyloCanvas.Render.Line=function(){return function(x,d,N,M,H,z,O,u){this.type="line",this.attr=L.PhyloCanvas.Render.Style.line,this.attr.stroke=["rgb(",H,",",z,",",O,")"].join(""),this.x1=x,this.x2=d,this.y1=N,this.y2=M,u&&(L.Common.apply(this,u),u.attr&&(this.attr=u.attr))}}();L.PhyloCanvas.Render.Text=function(){return function(x,d,N,M){this.type="text",this.attr=L.PhyloCanvas.Render.Style.text,this.x=x,this.y=d,this.text=N,M&&(L.Common.apply(this,M),M.attr&&(this.attr=M.attr))}}();L.PhyloCanvas.Render.Path=function(){var x=L.PhyloCanvas.Render.Style.path;return function(d,N){this.type="path",this.attr=L.PhyloCanvas.Render.Style.path,this.path=d,N&&(L.Common.apply(this,N),N.attr&&(this.attr=N.attr))}}();L.PhyloCanvas.Render.Circle=function(){return function(x,d,N,M){this.type="circle",this.x=x,this.y=d,this.radius=N,M&&(L.Common.apply(this,M),M.attr&&(this.attr=M.attr))}}();L.PhyloCanvas.Render.SVG=function(){var x,d;return function(N,M,H){x=N,this.canvasSize=[M,H],this.svg=Bt(N,this.canvasSize[0],this.canvasSize[1])}}();L.PhyloCanvas.Render.SVG.prototype={render:function(){for(var x=this.phylogramObject.getDrawInstructs(),d=0;d<x.length;d++)if(x[d].type=="line")var N=this.svg.path(["M",x[d].x1,x[d].y1,"L",x[d].x2,x[d].y2]).attr(L.PhyloCanvas.Render.Style.line);else if(x[d].type=="path")var M=this.svg.path(x[d].path).attr(x[d].attr);else if(x[d].type=="circle")var M=this.svg.circle(x[d].x,x[d].y,x[d].radius).attr({stroke:"black",fill:"black"});else{var H=this.svg.text(x[d].x,x[d].y,x[d].text).attr(L.PhyloCanvas.Render.Style.text);x[d].attr&&H.attr(x[d].attr),x[d].rotate&&H.rotate(x[d].rotate);var z=H.getBBox(),O=Math.sqrt(z.height*z.height+z.width*z.width)}},draw:function(x){var d,N;if(x.type=="line")d=this.svg.path(["M",x.x1,x.y1,"L",x.x2,x.y2]).attr(L.PhyloCanvas.Render.Style.line);else if(x.type=="path")d=this.svg.path(x.path).attr(x.attr);else if(x.type=="circle")d=this.svg.circle(x.x,x.y,x.radius).attr({stroke:"black",fill:"black"});else if(x.type=="text"){d=this.svg.text(x.x,x.y,x.text).attr(L.PhyloCanvas.Render.Style.text),x.attr&&d.attr(x.attr),x.rotate&&d.rotate(x.rotate);var M=d.getBBox();N=Math.sqrt(M.height*M.height+M.width*M.width)}return[d,N]}};L.PhyloCanvas.Render.Phylogram=function(){var x,d=L.PhyloCanvas.Render.Parameters.Rectangular,N,M,H,z,O,u,f=!0,b=0,E=0,F,q,A,T,D,Q,se,U,$,ce,pe,ye,j=[],ie=function(G){return G+Math.round(G/4)},B=function(G,we,ke,ee){return["M",G,we,"L",ke,we,"L",ke,ee,"L",G,ee,"Z"]},Se=function(G,we){if(G.len&&f==!1&&G.children.length==0&&(b=L.Common.roundFloat(b+z,4)),G.children.length>0){var ke=[],ee,X,ae,Pe,n,e,t;if(G.len&&(ee=we,X=we=L.Common.roundFloat(we+H*G.len,4),ae=b+G.getMidbranchPosition(f)*z,Pe=ae,n=G.red,e=G.green,t=G.blue,x.draw(new L.PhyloCanvas.Render.Line(ee,X,ae,Pe,n,e,t))),G.name){var i={};if(i=L.PhyloCanvas.Render.Style.getStyle("bootstrap","text"),G.font_color_hex?i.fill=G.font_color_hex:i.fill="#000000",G.uri&&(i.href=G.uri),G.description&&(i.title=G.description),G.level==0)var o=b+G.getMidbranchPosition(f)*z;else var o=Pe;x.draw(new L.PhyloCanvas.Render.Text((X||we)+5,o,G.name,{attr:i}))}if(G.children&&G.children.length)for(var c=0;c<G.children.length;c++){var h=G.children[c];ke.push(Se(h,we))}for(var g=[],c=0;c<ke.length;c++)ke[c][0]&&g.push(ke[c][0]),ke[c][1]&&g.push(ke[c][1]);for(var m=Math.min.apply(null,g),k=Math.max.apply(null,g),R=(m+k)/2,V="",W="",ne="",te=0,c=0;c<G.children.length;++c){var me=G.children[c];if(c==0)V=me.red,W=me.green,ne=me.blue;else if(V==me.red&&W==me.green&&ne==me.blue)te=1;else{te=0;break}}te==0?L.PhyloCanvas.Render.Style.line.stroke="black":(n=G.children[0].red,e=G.children[0].green,t=G.children[0].blue,L.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",e,",",t,")"].join("")),G.children.length==2?(n=G.children[0].red,e=G.children[0].green,t=G.children[0].blue,L.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",e,",",t,")"].join(""),x.draw(new L.PhyloCanvas.Render.Path(["M",we+1e-4,m,"L",we,m,"L",we,R],{attr:L.PhyloCanvas.Render.Style.line})),n=G.children[1].red,e=G.children[1].green,t=G.children[1].blue,L.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",e,",",t,")"].join(""),x.draw(new L.PhyloCanvas.Render.Path(["M",we,R,"L",we,k,"L",we+1e-4,k],{attr:L.PhyloCanvas.Render.Style.line}))):x.draw(new L.PhyloCanvas.Render.Path(["M",we+1e-4,m,"L",we,m,"L",we,k,"L",we+1e-4,k],{attr:L.PhyloCanvas.Render.Style.line}))}else{if(ee=we,X=L.Common.roundFloat(we+H*G.len,2),ae=b,Pe=b,n=G.red,e=G.green,t=G.blue,G.y=b,j.push(G),x.draw(new L.PhyloCanvas.Render.Line(ee,X,ae,Pe,n,e,t)),d.alignRight&&x.draw(new L.PhyloCanvas.Render.Path(["M",X,ae,"L",d.alignPadding+O,Pe],{attr:L.PhyloCanvas.Render.Style.connectedDash})),G.name){var i={};G.style&&(i=L.PhyloCanvas.Render.Style.getStyle(G.style,"text")),G.font_color_hex?i.fill=G.font_color_hex:i.fill="#000000",i["text-anchor"]="start",G.uri&&(i.href=G.uri),G.description&&(i.title=G.description);var ge=x.draw(new L.PhyloCanvas.Render.Text(d.alignRight?O+d.bufferInnerLabels+d.alignPadding:X+d.bufferInnerLabels,Pe,G.name,{attr:i}));E=Math.max(ge[1],E),L.PhyloCanvas.Render.Parameters.mouseRollOver&&L.Common.addRaphEventHandler(ge[0],"mouseover",L.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:x,node:G,x:X,y:Pe,textEl:ge[0]}),L.PhyloCanvas.Render.Parameters.mouseRollOut&&L.Common.addRaphEventHandler(ge[0],"mouseout",L.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:x,node:G,x:X,y:Pe,textEl:ge[0]}),L.PhyloCanvas.Render.Parameters.onClickAction&&L.Common.addRaphEventHandler(ge[0],"click",L.PhyloCanvas.Render.Parameters.onClickAction,{svg:x,node:G,x:X,y:Pe,textEl:ge[0]})}f&&(f=!1)}return[ae,Pe]},P=function(){y=b+z,T=0,D=d.showScaleBar*H,x.draw(new L.PhyloCanvas.Render.Line(T,D,y,y)),x.draw(new L.PhyloCanvas.Render.Text((T+D)/2,y-8,d.showScaleBar))},le=function(G,we,ke){for(var ee=(ke&&ke.bufferInner?ke.bufferInner:0)|L.PhyloCanvas.Render.Parameters.binaryChartBufferInner,X=(ke&&ke.bufferSiblings?ke.bufferSiblings*z:0)|(L.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?z*L.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:L.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),ae=(ke&&ke.thickness?ke.thickness:0)|L.PhyloCanvas.Render.Parameters.binaryChartThickness,Pe,n=0;n<j.length;n++){var e=j[n];x.draw(new L.PhyloCanvas.Render.Path(B(G+ee,e.y-z/2+X/2,G+ee+ae,e.y+z/2-X/2),{attr:L.PhyloCanvas.Render.Style.getStyle(e.chart[we],"textSecantBg")}))}return G+ee+ae},_e=function(G,we,ke){for(var ee=[],X,ae=ke&&ke.bufferInner?ke.bufferInner:0|L.PhyloCanvas.Render.Parameters.barChartBufferInner,Pe=ke&&ke.height?ke.height:0|L.PhyloCanvas.Render.Parameters.barChartHeight,n=ke&&ke.width?ke.width<1?z*ke.width:ke.width:0|(L.PhyloCanvas.Render.Parameters.barChartWidth<1?z*L.PhyloCanvas.Render.Parameters.barChartWidth:L.PhyloCanvas.Render.Parameters.barChartWidth),e=0,t=0;t<j.length;t++)ee.push(j[t].chart[we]);X=Math.max.apply(null,ee),e=L.Common.roundFloat(Pe/X,4);for(var t=0;t<j.length;t++){var i=j[t];x.draw(new L.PhyloCanvas.Render.Path(B(G+ae,i.y-n/2,G+ae+e*i.chart[we],i.y+n/2),{attr:L.PhyloCanvas.Render.Style.getStyle(i.chart[we],"barChart")}))}return G+ae+Pe};return function(G,we){this.getCanvasSize=function(){return[N,M]},this.getRoot=function(){return we.getRoot()},we.getValidate()&&x.draw(0,0,we.getValidate()),f=!0,x=G;var ke=we.getRoot(),ee=we.getNewickLen();if(N=x.canvasSize[0],M=x.canvasSize[1],ce=d.bufferX,pe=d.paddingX,ye=d.paddingY,u=d.minHeightBetweenLeaves,b=ye,H=Math.round((N-ce-pe*2)/ee),z=Math.round((M-ye*2)/(d.showScaleBar?ke.getCountAllChildren():ke.getCountAllChildren()-1)),z<u&&(z=u),O=Math.round(N-ce-pe*2),(L.PhyloCanvas.Render.Parameters.binaryCharts.length||L.PhyloCanvas.Render.Parameters.barCharts.length)&&(d.alignRight=!0),Se(ke,pe),d.showScaleBar&&P(),F=O+E+d.bufferInnerLabels,L.PhyloCanvas.Render.Parameters.binaryCharts.length){var X=L.PhyloCanvas.Render.Parameters.binaryCharts;for(var ae in X)F=le(F,X[ae].chart,X[ae])}if(L.PhyloCanvas.Render.Parameters.barCharts.length){var Pe=L.PhyloCanvas.Render.Parameters.barCharts;for(var ae in Pe)A=_e(F,Pe[ae].chart,Pe[ae])}j=[],typeof bgLabelsHold!="undefined"&&(bgLabelsHold=[])}}();L.PhyloCanvas.Render.Phylogram.prototype={};L.PhyloCanvas.Render.CircularPhylogram=function(){var x,d=L.PhyloCanvas.Render.Parameters.Circular,N,M,H,z,O,u,f,b=!0,E=0,F,q,A,T=[],D=[],Q,se,U,$=0,ce,pe=Math.PI/180;function ye(ee,X){return X+=ce,[L.Common.roundFloat(F+ee*Math.sin(X*pe),4),L.Common.roundFloat(q+ee*Math.cos(X*pe),4)]}function j(ee){var X=Se(90-ee-ce);if(X>90&&X<270){X+=180;var ae="end"}else var ae="start";return[X,ae]}function ie(ee,X,ae,Pe){var n=ye(ee,X),e=ye(ee,ae),t=[],i,o=0;return Math.abs(Se(ae-X))>180?i=1:i=-1,Pe&&Pe.invertSecant&&(i*=-1,o=1),Pe&&Pe.noMove||t.push("M"),t.push(n[0],n[1],"A",ee,ee,0,i<1?0:1,o,e[0],e[1]),t}function B(ee,X,ae,Pe){var n=[],e=ye(X,ee),t=ye(ae,ee);return Pe&&Pe.noMove||n.push("M"),n.push(e[0],e[1],"L",t[0],t[1]),n}function Se(ee){for(;ee>360||ee<0;)ee>360?ee-=360:ee<0&&(ee+=360);return ee}function P(ee,X,ae,Pe){if(!X&&ee.length>1)var Pe=ee[3],ae=ee[2],X=ee[1],ee=ee[0];var n=_e("M",ie(ee,ae,Pe,{noMove:1,invertSecant:0}),"L",ie(X,Pe,ae,{noMove:1,invertSecant:1}),"Z");return n}function le(ee,X){if(X=X,ee.len&&(b?E=se||1:ee.children.length==0&&(E=L.Common.roundFloat(E+O,4))),ee.children.length>0){var ae=[],Pe,n,e,t;if(Pe=X,n=X+=L.Common.roundFloat(z*ee.len,4),ee.name,ee.children&&ee.children.length)for(var i=0;i<ee.children.length;i++){var o=ee.children[i],c=le(o,X);c>0&&ae.push(c)}var h=L.Common.roundFloat(Math.min.apply(null,ae),4),g=L.Common.roundFloat(Math.max.apply(null,ae),4);ee.level!=0&&x.draw(new L.PhyloCanvas.Render.Path(_e("M",ye(X+.01,h),"L",ie(X,h,g,{noMove:!0}),"L",ye(X+.01,g)))),ee.len&&(e=L.Common.roundFloat(h+(g-h)/2,4),x.draw(new L.PhyloCanvas.Render.Path(B(e,Pe,n))))}else if(ee.y=E,T.push(ee),Pe=X,n=X=L.Common.roundFloat(X+z*ee.len),e=E,x.draw(new L.PhyloCanvas.Render.Path(B(e,Pe,n))),x.draw(new L.PhyloCanvas.Render.Path(B(e,n,A),{attr:L.PhyloCanvas.Render.Style.connectedDash})),ee.name){var m=ye(A+d.bufferInnerLabels,e),k=j(e),R=k[0],V=k[1],W={};ee.style&&L.Common.apply(W,L.PhyloCanvas.Render.Style.getStyle(ee.style,"text")),ee.font_color_hex?W.fill=ee.font_color_hex:W.fill="#000000",W["text-anchor"]=V,ee.uri&&(W.href=ee.uri),ee.description&&(W.title=ee.description);var ne=x.draw(new L.PhyloCanvas.Render.Text(m[0],m[1],ee.name,{attr:W,rotate:[R,m[0],m[1]]}));ee.bgStyle&&D.push([ee.bgStyle,e]);var m=ye(n,e);L.PhyloCanvas.Render.Parameters.mouseRollOver&&L.Common.addRaphEventHandler(ne[0],"mouseover",L.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:x,node:ee,x:m[0],y:m[1],textEl:ne[0]}),L.PhyloCanvas.Render.Parameters.mouseRollOut&&L.Common.addRaphEventHandler(ne[0],"mouseout",L.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:x,node:ee,x:m[0],y:m[1],textEl:ne[0]}),L.PhyloCanvas.Render.Parameters.onClickAction&&L.Common.addRaphEventHandler(ne[0],"click",L.PhyloCanvas.Render.Parameters.onClickAction,{svg:x,node:ee,x:m[0],y:m[1],textEl:ne[0]}),$=Math.max(ne[1],$)}return b&&(b=!1),e}function _e(ee){for(var X=ee,ae=1;ae<arguments.length;ae++)X=X.concat(arguments[ae]);return X}function G(){var ee=[];if(D.length>0){if(L.PhyloCanvas.Render.Style.jsphylosvgGradientList)for(var X=0;X<L.PhyloCanvas.Render.Style.jsphylosvgGradientList.length;X++){var ae=L.PhyloCanvas.Render.Style.jsphylosvgGradientList[X],Pe=L.Common.createGradientEl(ae,L.PhyloCanvas.Render.Style[ae],[F,q,A+$+d.bufferOuterLabels]);x.svg.defs.appendChild(Pe)}for(var X=0;X<D.length;X++){if(X!=D.length-1&&D[X][0]==D[X+1][0]){D[X+1][2]=D[X][2]?D[X][2]:D[X][1];continue}var ee=P(A,A+$+d.bufferOuterLabels,D[X][2]?D[X][2]-O/2:D[X][1]-O/2,D[X][1]+O/2),n=L.PhyloCanvas.Render.Style.getStyle(D[X][0],"textSecantBg"),e=x.draw(new L.PhyloCanvas.Render.Path(ee,{attr:n.type?{}:n}));n.type&&n.type=="radialGradient"&&e[0].node.setAttribute("fill","url(#"+n.name+")"),n.type&&n.type=="radialGradient"&&e[0].node.setAttribute("stroke","none"),e[0].toBack()}}var ee=P(A,A+$+d.bufferOuterLabels,(se||1)-O/2,360-O/2),e=x.draw(new L.PhyloCanvas.Render.Path(ee,{attr:L.PhyloCanvas.Render.Style.textSecantBg}));return e[0].toBack(),A+$+d.bufferOuterLabels}function we(ee,X,ae){for(var Pe=ae&&ae.bufferInner?parseFloat(ae.bufferInner):L.PhyloCanvas.Render.Parameters.binaryChartBufferInner,n=(ae&&ae.bufferSiblings?ae.bufferSiblings*O:0)|(L.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?O*L.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:L.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),e=ae&&ae.thickness?parseFloat(ae.thickness):L.PhyloCanvas.Render.Parameters.binaryChartThickness,t=(ae&&ae.disjointed?ae.disjointed:!1)|L.PhyloCanvas.Render.Parameters.binaryChartDisjointed,i=ae&&ae.isInternal?ae.isInternal:!1,o=!0,c,h=0;h<T.length;h++){var g=T[h];if((!T[h+1]||g.chart[X]!==T[h+1].chart[X]||t)&&g.chart[X]!="none"){var m=L.PhyloCanvas.Render.Style.getStyle(g.chart[X],"textSecantBg");if(i)var k=[A-Pe-e,A-Pe,(c||g.y)-O/2+(o&&!t?0:n/2),g.y+O/2-(h==T.length-1&&!t?0:n/2)];else var k=[ee+Pe,ee+Pe+e,(c||g.y)-O/2+(o&&!t?0:n/2),g.y+O/2-(h==T.length-1&&!t?0:n/2)];if(m.label){var R=L.PhyloCanvas.Render.Style.getStyle(m.labelStyle,"text"),V=ye((k[0]+k[1])/2,(k[2]+k[3])/2),W=j((k[2]+k[3])/2),ne=Se(W[0]+(R.rotate?parseFloat(R.rotate):0)),te=Se(90-(k[2]+k[3])/2-ce);te>90&&te<270&&(ne+=180),R["text-anchor"]||(R["text-anchor"]="middle"),g.font_color_hex?m.fill=g.font_color_hex:m.fill="#000000";var me=x.draw(new L.PhyloCanvas.Render.Text(V[0],V[1],m.label,{attr:R,rotate:ne}));me[0].toBack()}if(m.borderStyle){var ge=L.PhyloCanvas.Render.Style.getStyle(m.borderStyle,"textSecantBg"),be=[A,ge.fullsize?k[1]:k[0],k[2],k[3]],xe=x.draw(new L.PhyloCanvas.Render.Path(P(be),{attr:ge}));xe[0].toBack()}var Ae=x.draw(new L.PhyloCanvas.Render.Path(P(k),{attr:m}));Ae[0].toBack(),c=0,o=!1}else c||(c=g.y),g.chart[X]=="none"&&(c=0);o=!1}return i?ee:ee+Pe+e}function ke(ee,X,ae){for(var Pe=[],n,e=ae&&ae.bufferInner?parseFloat(ae.bufferInner):L.PhyloCanvas.Render.Parameters.barChartBufferInner,t=ae&&ae.height?parseFloat(ae.height):L.PhyloCanvas.Render.Parameters.barChartHeight?L.PhyloCanvas.Render.Parameters.barChartHeight:0,i=ae&&ae.width?parseFloat(ae.width)<1?O*parseFloat(ae.width):parseFloat(ae.width):0|(L.PhyloCanvas.Render.Parameters.barChartWidth<1?O*L.PhyloCanvas.Render.Parameters.barChartWidth:L.PhyloCanvas.Render.Parameters.barChartWidth),o=0,c=0;c<T.length;c++)Pe.push(T[c].chart[X]);n=Math.max.apply(null,Pe),o=L.Common.roundFloat(t/n,4);for(var c=0;c<T.length;c++){var h=T[c];h.chart[X]>0&&x.draw(new L.PhyloCanvas.Render.Path(P(ee+e,ee+e+o*h.chart[X],h.y-i/2,h.y+i/2),{attr:L.PhyloCanvas.Render.Style.getStyle(h.chart[X],"barChart")}))}return ee+e+t}return function(ee,X,ae){if(this.getCanvasSize=function(){return[N,M]},this.getRoot=function(){return X.getRoot()},X.getValidate()){ee.draw({type:"text",x:0,y:ee.canvasSize[1]/3,text:X.getValidate()});return}x=ee;var Pe=X.getRoot(),n=X.getNewickLen();if(N=x.canvasSize[0],M=x.canvasSize[1],F=N/2,q=M/2,H=Math.min.apply(null,[N,M]),ae=d.bufferRadius>1?d.bufferRadius:L.Common.roundFloat(H*d.bufferRadius,4),se=d.bufferAngle,f=d.innerCircleRadius,u=d.minHeightBetweenLeaves,ce=d.initStartAngle,A=Math.round((H-ae-f)/2),z=(A-f)/n,O=L.Common.roundFloat((360-se)/Pe.getCountAllChildren(),4),le(Pe,f),U=A+$+d.bufferOuterLabels,L.PhyloCanvas.Render.Parameters.integratedBinaryCharts.length){var e=L.PhyloCanvas.Render.Parameters.integratedBinaryCharts;for(var t in e){var i=e[t].bufferInner?e[t].bufferInner:L.PhyloCanvas.Render.Parameters.binaryChartBufferInner,o=e[t].thickness?e[t].thickness:L.PhyloCanvas.Render.Parameters.binaryChartThickness;U=we(U-o-i,e[t].chart,e[t])}}if(U=G(),L.PhyloCanvas.Render.Parameters.binaryCharts.length){var c=L.PhyloCanvas.Render.Parameters.binaryCharts;for(var t in c)U=we(U,c[t].chart,c[t])}if(L.PhyloCanvas.Render.Parameters.barCharts.length){var h=L.PhyloCanvas.Render.Parameters.barCharts;for(var t in h)U=ke(U,h[t].chart,h[t])}T=[],D=[]}}();L.PhyloCanvas.Render.CircularPhylogram.prototype={};var wt=function(){var x=function(M){if(!!M&&typeof M=="object"){let H=function(){};return H.prototype=M,new H}},d=function(M){var H="";!!M&&typeof M=="string"&&(H=M);var z=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return z.test(H)},N={xmlToJSON:function(M){try{let f=function(A){return A.replace(/^\s+|\s+$/gm,"")},b=function(A){var T=/-/g,D=String(A).replace(T,"_");return D},E=function(A,T){if(T.attributes.length>0){var D=T.attributes.length-1,Q;A._attributes=[];do Q=String(b(T.attributes[D].name)),A._attributes.push(Q),A[Q]=f(T.attributes[D].value);while(D--)}},F=function(A){A.getNodeByAttribute=function(T,D){if(this.length>0){var Q,se=this.length-1;try{do if(Q=this[se],Q[T]==D)return Q;while(se--)}catch(U){return!1}return!1}},A.contains=function(T,D){if(this.length>0){var Q=this.length-1;try{do if(this[Q][T]==D)return!0;while(Q--)}catch(se){return!1}return!1}},A.indexOf=function(T,D){var Q=-1;if(this.length>0){var se=this.length-1;try{do this[se][T]==D&&(Q=se);while(se--)}catch(U){return-1}return Q}},A.SortByAttribute=function(T,D){if(this.length){let Q=function(U,$){var ce=U[$];return ce=d(ce)?parseFloat(ce):ce,ce},se=function(U,$){var ce=0,pe,ye;return pe=Q(U,T),ye=Q($,T),pe<ye?ce=-1:ye<pe&&(ce=1),D&&(ce=D.toUpperCase()=="DESC"?0-ce:ce),ce};this.sort(se)}},A.SortByValue=function(T){if(this.length){let D=function(se){var U=se.Text;return U=d(U)?parseFloat(U):U,U},Q=function(se,U){var $=0,ce,pe;return ce=D(se),pe=D(U),ce<pe?$=-1:pe<ce&&($=1),T&&($=T.toUpperCase()=="DESC"?0-$:$),$};this.sort(Q)}},A.SortByNode=function(T,D){if(this.length){let Q=function(U,$){var ce=U[$][0].Text;return ce=d(ce)?parseFloat(ce):ce,ce},se=function(U,$){var ce=0,pe,ye;return pe=Q(U,T),ye=Q($,T),pe<ye?ce=-1:ye<pe&&(ce=1),D&&(ce=D.toUpperCase()=="DESC"?0-ce:ce),ce};this.sort(se)}}},q=function(A,T){var D,Q,se,U="";if(!T)return null;if(T.attributes.length>0&&E(A,T),A.Text="",T.hasChildNodes()){var $=T.childNodes.length-1,ce=0;do switch(Q=T.childNodes[ce],Q.nodeType){case 1:A._children=[],D=Q.localName?Q.localName:Q.baseName,D=b(D),U!=D&&A._children.push(D),A[D]||(A[D]=[]),se={},A[D].push(se),Q.attributes.length>0&&E(se,Q),A[D].contains||F(A[D]),U=D,Q.hasChildNodes()&&q(se,Q);break;case 3:A.Text+=f(Q.nodeValue);break;case 4:A.Text+=Q.text?f(Q.text):f(Q.nodeValue);break}while(ce++<$)}};if(!M)return null;var H={};H.typeOf="JSXBObject";var z=M.nodeType==9?M.documentElement:M;if(H.RootName=z.nodeName||"",M.nodeType==3||M.nodeType==4)return M.nodeValue;var O=function(){var A={activate:function(){var T=[];return T&&(T.getNodesByAttribute=function(D,Q){if(!!T&&T.length>0){var se=[],U,$=T.length-1;try{do U=T[$],U[D]===Q&&se.push(U);while($--);return se.reverse(),se}catch(ce){return null}return null}},T.getNodeByAttribute=function(D,Q){if(!!T&&T.length>0){var se,U=T.length-1;try{do if(se=T[U],se[D]===Q)return se;while(U--)}catch($){return null}return null}},T.getNodesByValue=function(D){if(!!T&&T.length>0){var Q=[],se,U=T.length-1;try{do se=T[U],!!se.Text&&se.Text===D&&Q.push(se);while(U--);return Q}catch($){return null}return null}},T.contains=function(D,Q){if(!!T&&T.length>0){var se=T.length-1;try{do if(T[se][D]===Q)return!0;while(se--)}catch(U){return!1}return!1}},T.indexOf=function(D,Q){var se=-1;if(!!T&&T.length>0){var U=T.length-1;try{do T[U][D]===Q&&(se=U);while(U--)}catch($){return-1}return se}},T.SortByAttribute=function(D,Q){if(!!T&&T.length>0){let se=function($,ce){var pe=$[ce];return pe=bam.validation.isNumeric(pe)?parseFloat(pe):pe,pe},U=function($,ce){var pe,ye;pe=se($,D),ye=se(ce,D);var j=pe<ye?-1:ye<pe?1:0;return Q&&(j=Q.toUpperCase()==="DESC"?0-j:j),j};T.sort(U)}},T.SortByValue=function(D){if(!!T&&T.length>0){let Q=function(U){var $=U.Text;return $=bam.validation.isNumeric($)?parseFloat($):$,$},se=function(U,$){var ce,pe;ce=Q(U),pe=Q($);var ye=ce<pe?-1:pe<ce?1:0;return D&&(ye=D.toUpperCase()==="DESC"?0-ye:ye),ye};T.sort(se)}},T.SortByNode=function(D,Q){if(!!T&&T.length>0){let se=function($,ce){var pe=$[ce][0].Text;return pe=bam.validation.isNumeric(pe)?parseFloat(pe):pe,pe},U=function($,ce){var pe,ye;pe=se($,D),ye=se(ce,D);var j=pe<ye?-1:ye<pe?1:0;return Q&&(j=Q.toUpperCase()==="DESC"?0-j:j),j};T.sort(U)}}),T}};return A}(),u=function(){var A=x(O);return A.activate()};return q(H,z),M=null,z=null,H}catch(f){return null}},textToXML:function(M){var H=null;try{H=document.all?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser,H.async=!1}catch(O){throw new Error("XML Parser could not be instantiated")}var z;try{document.all?z=H.loadXML(M)?H:!1:z=H.parseFromString(M,"text/xml")}catch(O){throw new Error("Error parsing XML string")}return z}};return N}();import{showSaveFilePicker as Kt}from"https://cdn.jsdelivr.net/npm/native-file-system-adapter/mod.js";var w1=function(){let x=[{name:"valapalagilaka",search:"с╣Щ",replace:()=>"r"},{name:"short e",search:"с║╜",replace:()=>"e"},{name:"short o",search:"├╡",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б e",search:"├к",replace:()=>"e"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б o",search:"├┤",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б ai",search:"├К",replace:()=>"E"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б au",search:"├Ф",replace:()=>"O"},{name:"candrabindu",search:"m╠Р",replace:()=>"M"},{name:"oс╣Гk─Бras",search:"oс╣Б",replace:()=>"oM"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"(?:kK|gG|cC|jJ|wW|qQ|tT|dD|pP|bB)",replace:O=>O[0].slice(-1)},{name:"geminated m after h",search:"(?:Mhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rfi]|p[aA])tt|tt(?=[rvy]\\S)",replace:O=>`${O[1]}t`},{name:"geminated consonants after r",search:"([rf]\\s*)([kgcjwqdpbRnmyvl])\\2{1,2}",replace:O=>`${O[1]}${O[2]}`},{name:"final nasal variants",search:"(?:M[lSs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnNYR](?=[pPbBmdDtTnwWqQcCjJkKgG])",replace:()=>"M"},{name:"final anusv─Бra variants",search:"M?[mN](?!\\S)|n(?=\\s+[tdn])|Y(?=\\s+[jc])",replace:()=>"M"},{name:"visarga aс╕е before voiced consonants",search:"(?<!\\sB)(?:a[Hr]|[o])(?=\\s+['gGjJqQdDnbBmrylvh])",replace:()=>"aH"},{name:"visarga aс╕е before vowels",search:"aH(?=\\s+[AiIeuUof])",replace:()=>"a"},{name:"visarga aс╕е before unvoiced consonants and space + anusv─Бra",search:"o\\s+(?=[kKcCwWtTpPszSM])",replace:()=>"aH a"},{name:"visarga ─Бс╕е variants",search:"AH(?=\\s+[aAiIeEuUogGjJqQdDbBnmyrlvh])",replace:()=>"A"},{name:"other visarga variants",search:"H?[rszS](?!\\S)",replace:()=>"H"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"z(?=[kK])|s(?=s)",replace:()=>"H"},{name:"final au/─Бv",search:"Av(?!\\S)",replace:()=>"O"},{name:"final su",search:"(?<=[sz])v(?=\\s+[aAiIuUoOeE])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aAuUoOeE])",replace:()=>"y"},{name:"kcch/k┼Ы",search:"k(\\s*)(?:S|c?C)",replace:O=>`k${O[1]}S`},{name:"c┼Ы/t┼Ы",search:"[tc](\\s*)S",replace:O=>`c${O[1]}C`},{name:"cch/ch",search:"([aAiIuUeEoO])C",replace:O=>`${O[1]}cC`},{name:"final t + hi",search:"d(\\s+)D(?=[iy](?:\\s|$))",replace:O=>`t${O[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aAiIeEuUoOgGdDbByrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:O=>`${O[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aAuUeEoO])",replace:()=>"i"},{name:"bhd for bdh",search:"Bd",replace:()=>"bD"}],d=[{name:"valapalagilaka",search:"с╣Щ",replace:()=>"r"},{name:"short e",search:"с║╜",replace:()=>"e"},{name:"short o",search:"├╡",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б e",search:"├к",replace:()=>"e"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б o",search:"├┤",replace:()=>"o"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б ai",search:"a├о",replace:()=>"ai"},{name:"pс╣Ыс╣гс╣нham─Бtr─Б au",search:"a├╗",replace:()=>"au"},{name:"candrabindu",search:"m╠Р",replace:()=>"с╣Г"},{name:"oс╣Гk─Бras",search:"oс╣Б",replace:()=>"oс╣Г"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"([kgcjс╣нс╕Нtdpb]){2}h",replace:O=>`${O[1]}h`},{name:"geminated m after h",search:"(?:с╣Гhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rс╣Ыi]|p[a─Б])tt|tt(?=[rvy]\\S)",replace:O=>`${O[1]}t`},{name:"geminated consonants after r",search:"([rс╣Ы]\\s*)([kgcjс╣нс╕Нс╣Зtdnpbmyvl])\\2{1,2}",replace:O=>`${O[1]}${O[2]}`},{name:"final nasal variants",search:"(?:с╣Г[lс╣гs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnс╣Е├▒с╣З](?=[pbmdtnс╣нс╕Нcjkg])",replace:()=>"с╣Г"},{name:"final anusv─Бra variants",search:"с╣Г?[mс╣Е](?!\\S)|n(?=\\s+[tdn])|├▒(?=\\s+[jc])",replace:()=>"с╣Г"},{name:"visarga aс╕е before voiced consonants",search:"(?:a[с╕еr]|[o])(?=\\s+['gjс╕Нdnbmyrlvh])",replace:()=>"aс╕е"},{name:"visarga aс╕е before vowels",search:"aс╕е(?=\\s+[─Бi─лeu┼лoс╣Ы])",replace:()=>"a"},{name:"visarga aс╕е before unvoiced consonants and space + anusv─Бra",search:"o\\s+(?=[kcс╣нtp┼Ыс╣гsс╣Г])",replace:()=>"aс╕е a"},{name:"visarga ─Бс╕е variants",search:"─Бс╕е(?=\\s+[a─Бi─лeu┼лogjс╕Нdnbmyrlvh])",replace:()=>"─Б"},{name:"other visarga variants",search:"с╕е?[r┼Ыс╣гs](?!\\S)",replace:()=>"с╕е"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"с╣г(?=k)|s(?=s)",replace:()=>"s"},{name:"final au/─Бv",search:"─Бv(?!\\S)",replace:()=>"au"},{name:"final su",search:"(?<=[sс╣г])v(?=\\s+[a─Бi─лu┼лoe])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[a─Бu┼лeo])",replace:()=>"y"},{name:"kcch/k┼Ы",search:"k(\\s*)(?:┼Ы|c?ch)",replace:O=>`k${O[1]}┼Ы`},{name:"c┼Ы/t┼Ы",search:"[tc](\\s*)┼Ы",replace:O=>`c${O[1]}ch`},{name:"cch/ch",search:"([a─Бi─лu┼лeo])ch",replace:O=>`${O[1]}cch`},{name:"final t + hi",search:"d(\\s+)dh(?=[iy](?:\\s|$))",replace:O=>`t${O[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[a─Бi─лeu┼лogdbyrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:O=>`${O[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[a─Бu┼лeo])",replace:()=>"i"},{name:"bhd for bdh",search:"bhd",replace:()=>"bdh"}],N={none:{name:"remove spaces",search:"\\s",replace:()=>""},collapse:{name:"collapse spaces",search:"\\s+",replace:()=>" "}},M=function(O,u){let f=u.join(""),b=[],E=[...f.matchAll(O.search)],F=0,q=null;for(let A of u){let T=F+A.length,D=A,Q=0;if(q)if(q.length<=A.length)D=H(A,0,q.length,q.text),Q=q.text.length-q.length,q=null;else{D=q.text.slice(0,A.length);let U=q.text.slice(A.length);q={length:q.length-A.length,text:U};continue}for(;E.length>0&&E[0].index<T;){let se=E.shift(),U=se.index-F+Q,$=O.replace(se);if(se.index+se[0].length<T)D=H(D,U,se[0].length,$),Q=Q+$.length-se[0].length;else{let ce=A.length-U+Q,pe=$.slice(0,ce);D=D.slice(0,U)+pe;let ye=$.slice(ce);q={length:se[0].length-ce,text:ye}}}b.push(D),F=T}return b},H=function(O,u,f,b){return O.slice(0,u)+b+O.slice(u+f)};return function(O){let u=O.map(f=>ze.t(f,"iast","slp1"));for(let f of[...x,N.none])u=M(f,u);return u.map(f=>ze.t(f,"slp1","iast"))}}();var lt={smush:function(x,d){return x.toLowerCase().replace(/([с╕Нdrmvynhs]) ([a─Бi─лu┼лс╣Ыeo├й├│])/g,"$1$2"+d).replace(/([kgcjс╣нс╕Нtdpb]) h/g,"$1тАМ"+d+"h").replace(/([kgcj├▒с╕Нtdnpbmrlyv┼Ыс╣гsс╣Щ]) ([kgcjс╣нс╕Нtdnpbmyrlv┼Ыс╣гshс╕╗])/g,"$1"+d+"$2").replace(/([o├│e├й─Б]) ([с╣Г'])/g,"$1"+d+"$2").replace(/^с╣Г/,"'тАНс╣Г").replace(/^с╕е/,"'тАНс╕е").replace(/^_y/,"'тАНy").replace(/├╝/g,"тАМu").replace(/├п/g,"тАМi").replace(/_{1,2}(?=\s*)/g,function(N){if(N==="__")return"тАН";if(N==="_")return"тАМ"})},iast:function(x,d){let N=d||"devanagari";return ze.t(x,N,"iast",{skip_sgml:!0})},devanagari:function(x,d){let N=d||"",M={skip_sgml:!0},H=x.replace(/с╣Щ/g,"r").replace(/^_─Б/,"рд╜тАНрд╛"),z=lt.smush(H,N);return ze.t(z,"iast","devanagari",M).replace(/┬п/g,"ъг╗")},malayalam:function(x,d){let N=d||"",M={skip_sgml:!0},H={р┤Х:"р╡┐",р┤д:"р╡╜",р┤и:"р╡╗",р┤о:"р╡Ф",р┤░:"р╡╝"},z=x.replace(/^_─Б/,"р┤╜тАНр┤╛"),O=lt.smush(z,N).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"r").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return ze.t(O,"iast","malayalam",M).replace(/(^|[^р╡Н])р┤░р╡Н(?=\S)/g,"$1р╡О").replace(/([р┤Хр┤др┤ир┤ор┤░])р╡Н(?![^\s\u200C,тАФтАЩтАХ])/g,function(f,b){return H[b]})},grantha:function(x,d){let N=d||"",M={skip_sgml:!0},H=new Map([["р┤╕","юЗУ"],["р┤░","р╡╝"],["р┤п","юЗЛ"],["р┤Ъ","юЖ╢"],["р┤ж","юЗВ"],["р┤╢","юЗТ"]]),z=new RegExp("(["+[...H.keys()].join("")+"])р╡Н(?![^тАМ ,тАФтАЩтАХ])","g"),O=x.replace(/^_─Б/,"р┤╜тАНр┤╛"),u=lt.smush(O,N).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"r").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return ze.t(u,"iast","malayalam",M).replace(/(^|[^р╡Н])р┤░р╡Н(?=\S)/g,"$1р╡О").replace(z,(b,E)=>H.get(E)).replace(/р┤Хр╡Нр┤╖р┤┐/g,"роХрпНро╖ро┐")},telugu:function(x,d){var N=d||"";let M={skip_sgml:!0},H=x.replace(/^_─Б/,"р░╜тАНр░╛"),z=lt.smush(H,N).replace(/e/g,"с║╜").replace(/o/g,"├╡").replace(/с╣Щ/g,"rтАН").replace(/с╣Б/g,"с╣Г").replace(/с╕┐/g,"с╣Г").replace(/├н/g,"i").replace(/├║/g,"u").replace(/├й/g,"e");return ze.t(z,"iast","telugu",M)}},Ot=function(x,d,N=!1,M="sa"){let H=lt[d],z=x.cloneNode(!0),O=function(u,f){let b=u.childNodes;for(let E of b)if(E.nodeType!==8){if(E.nodeType===3){if(f!=="sa")continue;E.data=H(E.data,N)}else if(E.hasChildNodes()){let F=E.getAttribute("lang")||f;F==="sa"&&E.classList.contains("subst")&&J1(E,d),O(E,F)}}};return O(z,M),z},C1=function(x,d=!1){if(x.nodeType===3)return x;let N=document.createTreeWalker(x,NodeFilter.SHOW_TEXT,null,!1);if(d){let M;for(;N.nextNode();)M=N.currentNode;return M}else return N.nextNode},J1=function(x,d){if(x.firstChild.nodeType!==3&&x.lastChild.nodeType!==3)return;let N=x.childNodes,M=/^[a─Бi─лu┼лeoс╣Ыс╣Эс╕╖с╣Гс╕е]/,H=/[kgс╣Еcj├▒с╣нс╕Нс╣Зtdnpbmyrlvс╣г┼Ыsh]$/,z=["─Б","i","─л","e","o","_","ai","au"],O=["h","k","┼Ы","y","g","gh","c","ch","jh","с╣нh","с╕Н","с╕Нh","t","th","d","dh","n","p","ph","bh","m","r","с╕╗","v","с╣г","s"];var u=!1,f=[],b=[];let E=N[0].nodeType===3;for(let F of N){if(F.nodeType>3)continue;let q=F.textContent.trim();if(q!==""){if(q==="a"){F.textContent="";continue}if(q.match(H)){let A=C1(F,!0);A.textContent=A.textContent.replace(/\s+$/,"")+"a",d==="telugu"&&O.indexOf(q)>=0&&f.push(F)}if(F===x.lastChild&&F.nodeType===3){let A=document.createElement("span");A.appendChild(F.cloneNode(!1)),x.replaceChild(A,F),F=A,F.classList.add("aalt")}else E&&q.match(M)&&F.classList.add("aalt");switch(d){case"devanagari":(q==="i"||q==="├й")&&b.unshift(F);break;case"grantha":case"malayalam":if(q==="e"||q==="ai")b.unshift(F);else if(q==="o"){let A=F.cloneNode(!0);_1("o","e",A),b.unshift(A),_1("o","─Б",F)}break;case"telugu":!u&&z.indexOf(q)>=0&&(u=!0);break}}}for(let F of b)x.insertBefore(F,x.firstChild);if(u)for(let F of f){let q=C1(F,!0);q.textContent=q.textContent+"тАНр▒Н"}},_1=function(x,d,N){let M=document.createTreeWalker(N,NodeFilter.SHOW_TEXT,null,!1);for(;M.nextNode();)M.currentNode.textContent.match(x)&&(M.currentNode.textContent=d)};"use strict";var Q1=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,115,116,114,105,112,45,115,112,97,99,101,32,101,108,101,109,101,110,116,115,61,34,42,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,47,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,97,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,45,45,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,33,45,45,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,45,45,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),k1=Q1;"use strict";var K1=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,32,32,32,32,60,120,115,108,58,111,117,116,112,117,116,32,105,110,100,101,110,116,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,72,101,97,100,101,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,120,101,110,111,68,97,116,97,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),S1=K1;"use strict";var Z1=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,97,98,108,101,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,114,101,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,100,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,115,101,108,101,99,116,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,104,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,99,111,112,101,34,62,114,111,119,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,114,97,103,103,97,98,108,101,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,100,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,97,114,101,110,116,58,58,120,58,99,108,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,39,49,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,115,116,97,114,116,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,101,110,100,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,105,110,116,101,114,110,97,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,105,110,115,105,103,110,105,102,105,99,97,110,116,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,105,110,115,105,103,110,105,102,105,99,97,110,116,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,98,105,110,97,114,121,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,98,105,110,97,114,121,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),A1=Z1;"use strict";var en=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,116,114,101,101,45,118,101,114,115,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,108,97,110,103,34,62,101,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,91,118,101,114,115,101,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,93,60,47,120,115,108,58,116,101,120,116,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),P1=en;"use strict";var tn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,101,109,101,110,100,101,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,110,111,116,40,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,105,110,118,105,115,105,98,108,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,48,48,65,48,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,55,51,59,60,47,120,115,108,58,116,101,120,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,99,108,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,114,111,117,112,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),E1=tn;"use strict";var nn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),R1=nn;var Ct=function(x){let N=new DOMParser().parseFromString(x,"text/xml"),M=new XSLTProcessor;return M.importStylesheet(N),M},L1=function(x,d){this.transformString=function(N,M){let H=x.xml.createElementNS(d.teins,"ab");return H.innerHTML=N,M.transformToFragment(H,document)},this.sheets={csv:Ct(k1),xml:Ct(S1),matrix:Ct(A1),lemma:Ct(E1),lg:Ct(R1),tree:Ct(P1)}};function Ht(x){var d=[],N=0;if(this.trie=this.createTrie(x.patterns),this.leftMin=x.leftmin,this.rightMin=x.rightmin,this.exceptions={},x.exceptions)for(d=x.exceptions.split(/,\s?/g);N<d.length;N+=1)this.exceptions[d[N].replace(/\u2027/g,"").toLowerCase()]=new RegExp("("+d[N].split("тАз").join(")(")+")","i")}Ht.prototype.createTrie=function(x){var d=0,N=0,M=0,H=0,z=null,O=null,u=null,f=null,b={_points:[]},E;for(d in x)if(x.hasOwnProperty(d))for(E=x[d].match(new RegExp(".{1,"+ +d+"}","g")),N=0;N<E.length;N+=1){for(z=E[N].replace(/[0-9]/g,"").split(""),O=E[N].split(/\D/),f=b,M=0;M<z.length;M+=1)u=z[M].charCodeAt(0),f[u]||(f[u]={}),f=f[u];for(f._points=[],H=0;H<O.length;H+=1)f._points[H]=O[H]||0}return b};Ht.prototype.hyphenateText=function(x,d){d=d||4;for(var N=x.split(/([a-zA-Z0-9_\u0027\u00AD\u00DF-\u00EA\u00EB\u00EC-\u00EF\u00F1-\u00F6\u00F8-\u00FD\u0101\u0103\u0105\u0107\u0109\u010D\u010F\u0111\u0113\u0117\u0119\u011B\u011D\u011F\u0123\u0125\u012B\u012F\u0131\u0135\u0137\u013C\u013E\u0142\u0144\u0146\u0148\u0151\u0153\u0155\u0159\u015B\u015D\u015F\u0161\u0165\u016B\u016D\u016F\u0171\u0173\u017A\u017C\u017E\u017F\u0219\u021B\u02BC\u0390\u03AC-\u03CE\u03F2\u0401\u0410-\u044F\u0451\u0454\u0456\u0457\u045E\u0491\u0531-\u0556\u0561-\u0587\u0902\u0903\u0905-\u090B\u090E-\u0910\u0912\u0914-\u0928\u092A-\u0939\u093E-\u0943\u0946-\u0948\u094A-\u094D\u0982\u0983\u0985-\u098B\u098F\u0990\u0994-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BE-\u09C3\u09C7\u09C8\u09CB-\u09CD\u09D7\u0A02\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A14-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A82\u0A83\u0A85-\u0A8B\u0A8F\u0A90\u0A94-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABE-\u0AC3\u0AC7\u0AC8\u0ACB-\u0ACD\u0B02\u0B03\u0B05-\u0B0B\u0B0F\u0B10\u0B14-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3E-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B57\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C02\u0C03\u0C05-\u0C0B\u0C0E-\u0C10\u0C12\u0C14-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C43\u0C46-\u0C48\u0C4A-\u0C4D\u0C82\u0C83\u0C85-\u0C8B\u0C8E-\u0C90\u0C92\u0C94-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBE-\u0CC3\u0CC6-\u0CC8\u0CCA-\u0CCD\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D7A-\u0D7F\u1F00-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB2-\u1FB4\u1FB6\u1FB7\u1FBD\u1FBF\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD2\u1FD3\u1FD6\u1FD7\u1FE2-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u200D\u2019]+)/gi),M=0;M<N.length;M+=1)N[M].indexOf("/")!==-1?M!==0&&M!==N.length-1&&!/\s+\/|\/\s+/.test(N[M])&&(N[M]+="тАЛ"):N[M].length>d&&(N[M]=this.hyphenate(N[M]).join("┬н"));return N.join("")};Ht.prototype.hyphenate=function(x){var d,N=[],M,H,z,O,u,f=[],b,E=x.toLowerCase(),F,q,A=Math.max,T=this.trie,D=[""];if(this.exceptions.hasOwnProperty(E))return x.match(this.exceptions[E]).slice(1);if(x.indexOf("┬н")!==-1)return[x];for(x="_"+x+"_",d=x.toLowerCase().split(""),M=x.split(""),b=d.length,H=0;H<b;H+=1)f[H]=0,N[H]=d[H].charCodeAt(0);for(H=0;H<b;H+=1)for(u=T,z=H;z<b&&(u=u[N[z]],u);z+=1)if(F=u._points,F)for(O=0,q=F.length;O<q;O+=1)f[H+O]=A(f[H+O],F[O]);for(H=1;H<b-1;H+=1)H>this.leftMin&&H<b-this.rightMin&&f[H]%2?D.push(M[H]):D[D.length-1]+=M[H];return D};var rn=Ht,B1=rn;var T1={id:"sa",leftmin:2,rightmin:2,patterns:{2:"a1e1i1o1u1├й1├н1├п1├│1├║1├╝1─Б1─л1┼л1с╕╖1с╕╣1с╣Ы1с╣Э1",3:"2b_2c_2d_2g_2h_2j_2k_2l_2m_2n_2p_2r_2s_2t_2v_2y_2├▒_2┼Ы_2с╕Н_2с╕е12с╕л12с╕╖_2с╣Б12с╣Г12с╣Е_2с╣З_2с╣н_2с║Ц1l╠е1r╠е1",4:"2bh_2ch_2dh_2gh_2jh_2kh_2m╠Р12ph_2rb_2rd_2rg_2rk_2rp_2rt_2rс╕Н_2rс╣н_2th_2с╕Нh_2с╣нh_a2i1a2u1a3├п1a3├╝1l╠е╠Д1r╠е╠Д1"}};window.comboView=function(){let x={teins:"http://www.tei-c.org/ns/1.0",scripts:["iast","devanagari","telugu","grantha","malayalam"]},d={filename:null,xml:null,treelist:new Map,trees:[],textboxes:[],matrix:null,viewdiv:null,descs:null,maxlemma:null,windows:[window],dragged:null,undo:[],redo:[],editing:!1},N=new B1(T1),M=new L1(d,x),H=function(n,e,t,i){var o=e,c=t,h=n;i&&(h=h*2,h>=1&&(h-=1,o=t,c=i));let g=c.red-o.red,m=c.green-o.green,k=c.blue-o.blue,R={red:parseInt(Math.floor(o.red+g*h),10),green:parseInt(Math.floor(o.green+m*h),10),blue:parseInt(Math.floor(o.blue+k*h),10)};return"rgb("+R.red+","+R.green+","+R.blue+")"},z=function(){let n=window.getSelection();if(n.isCollapsed)return!1;let e=n.rangeCount>1?n.getRangeAt(1).cloneContents():n.getRangeAt(0).cloneContents();if(!e)return!1;let t=new Set,i=e.querySelectorAll(".lemma");for(let o of i)t.add(o.dataset.n);return t},O=function(){let n=document.getElementById("tooltip");n&&n.remove()},u=function(){let n=document.getElementById("left_menu");n.innerHTML=`<div id="matrixmenu" class="menubox">
    <div class="heading">Matrix</div>
      <ul>
        <li>select CSV/XML file(s): <input type="file" id="file" name="file" accept=".xml,.csv" multiple/></li>
      </ul>
</div>
<div style="display: none" id="mssmenu" class="menubox">
    <div class="heading">Texts</div>
    <ul class="ms">
    </ul>
</div>
<div style="display: none" id="treemenu" class="menubox">
    <div class="heading">Trees</div>
        <ul class="tree">
            <li>select NeXML file: <input type="file" id="treefile" name="treefile" accept=".xml"/></li>
        </ul>
    </div>
`;let e=document.getElementById("menu");e.addEventListener("mouseover",ie.menuMouseover),e.addEventListener("mouseout",ie.menuMouseout),e.addEventListener("click",ie.menuClick),e.querySelector("#file").addEventListener("change",T.bind(null,D),!1),e.querySelector("#treefile").addEventListener("change",T.bind(null,Q),!1)},f={matrix:function(){return d.matrix=new ae,d.matrix.init(),d.matrix.show(),document.getElementById("matrixmenu").style.display="none",b(),A.rehighlight(),d.matrix},text:function(n){let e=new X(n);return d.textboxes.push(e),e.init(),e.show(),b(),A.rehighlight(),document.querySelector(".highlit")||ie.textClick({target:e.boxdiv.querySelector(".lemma:not(.invisible)")}),e},tree:function(n,e){let t=new ee(n,e);return d.trees.push(t),t.init(),t.show(),b(),A.rehighlight(),t}},b=function(){for(let n of d.trees)n.draw()},E=function(){let n=window.getSelection?window.getSelection():document.selection;n&&(n.removeAllRanges?n.removeAllRanges():n.empty&&n.empty())},F=function(n){let e=document.createTreeWalker(n,NodeFilter.SHOW_TEXT);for(;e.nextNode();){let t=q(e.currentNode.nodeValue);e.currentNode.nodeValue=t}},q=function(n){return N.hyphenateText(n.replace(/ \|/g,"┬а|").replace(/\| (?=\d)/g,"|┬а").replace(/\|\|/g,"рее").replace(/\|/g,"ред"))},A={getAllWindows:function(){return window.mainWindow?window.mainWindow.comboView.getWindows():d.windows},forEachWindow:function(n){let e=A.getAllWindows();for(let t of e)if(!t.closed&&n(t)===!1)break},highlightLemma:function(n,e){var t=!!e;A.forEachWindow(i=>{let o=i.comboView.getViewdiv().querySelectorAll('[data-n="'+n+'"]');for(let h of o)(!t||!h.classList.contains("invisible"))&&h.classList.add("highlit");let c=i.comboView.getViewdiv().querySelectorAll('[data-n-trans="'+n+'"]');for(let h of c)h.classList.add("translit")})},highlightRange:function(n){if(!n||n.size===0)return;A.unHighlightAll();let[e,t]=P.lowhigh(n);if(t!==void 0)for(let i=e;i<=t;i++)A.highlightLemma(i,!0);else A.highlightLemma(e);A.repopulateTrees(e,t);for(let i of d.viewdiv.querySelectorAll(".text-box"))i.querySelector(".highlit")||i.querySelector('[data-n="'+e+'"]').classList.add("highlit");Se.xScroll(e)},highlightAll:function(){le.anyhighlit()?A.unHighlightAll():A.highlightRange(new Set([0,P.maxlemma()]))},unHighlightAll:function(){A.forEachWindow(n=>{let e=n.comboView.getViewdiv().querySelectorAll(".highlit");for(let i of e)i.classList.remove("highlit");let t=n.comboView.getViewdiv().querySelectorAll(".translit");for(let i of t)i.classList.remove("translit");A.unCelllightAll()})},unCelllightAll:function(){A.forEachWindow(n=>{let e=n.comboView.getViewdiv().querySelectorAll(".highlitcell");for(let t of e)t.classList.remove("highlitcell")})},rehighlight:function(){var n;if(A.forEachWindow(t=>{if(n=t.document.querySelectorAll(".highlit"),n.length>0)return!1}),n.length>0){var e=new Set;for(let t of n)e.add(t.dataset.n);A.highlightRange(e)}},clearTrees:function(){A.forEachWindow(n=>{let e=n.comboView.getTrees();for(let t of e)t.clearlemmata()})},repopulateTrees:function(n,e){A.forEachWindow(t=>{let i=t.comboView.getTrees();for(let o of i)o.populate(n,e),o.colourizeVariants(n,e),o.updatescript()})},highlightTreeLemma:function(n){A.forEachWindow(e=>{let t=e.comboView.getTrees();for(let i of t){let o=i.boxdiv.querySelector('.tree-lemma[data-id="'+n+'"]'),c=i.boxdiv.querySelectorAll(".tree-lemma");for(let h of c)(o.dataset.nodes&&h.dataset.nodes===o.dataset.nodes||!o.dataset.nodes&&h.dataset.id===o.dataset.id)&&h.classList.add("highlit");i.clearLabels()}})},unhighlightTrees:function(){A.forEachWindow(n=>{let e=n.comboView.getViewdiv().querySelectorAll(".tree-lemma.highlit");for(let i of e)i.classList.remove("highlit");let t=n.comboView.getTrees();for(let i of t)i.clearLabels()})}},T=function(n,e){let t=e.target.files[0],i=[...e.target.files].slice(1),o=new FileReader;o.onload=n.bind(null,t,i),o.readAsText(t)},D=function(n,e,t){d.filename=n.name,document.title=document.title+`: ${d.filename}`,d.filename.split(".").pop()==="csv"?U(n,e,t):$(n,e,t)},Q=function(n,e,t){let i=t.target.result,c=new DOMParser().parseFromString(i,"text/xml"),h=d.xml.querySelector("teiHeader > xenoData")||function(){let m=d.xml.querySelector("teiHeader")||function(){let R=d.xml.createElementNS(x.teins,"teiHeader");return d.xml.documentElement.appendChild(R),R}(),k=d.xml.createElementNS(x.teins,"xenoData");return m.appendChild(k),k}(),g=d.xml.createElementNS(x.teins,"stemma");g.setAttribute("format","nexml"),g.id="stemma"+[...h.querySelectorAll("stemma")].length,g.appendChild(c.firstChild.cloneNode(!0)),h.appendChild(g),se(c,g.id)},se=function(n,e,t=!0){let i=n.querySelectorAll("tree"),o=document.querySelector("#treemenu ul");for(let c of i){let h=c.id,g=n.cloneNode(!0);for(let R of g.querySelectorAll("tree"))R.id!==h&&R.parentNode.removeChild(R);let m=c.getAttribute("label")||"New Tree "+d.treelist.size;d.treelist.set(`#${e} #${h}`,g);let k=document.createElement("li");k.dataset.name=m,k.dataset.treeid=h,k.dataset.stemmaid=e,k.appendChild(document.createTextNode(m)),o.insertBefore(k,o.lastElementChild),t&&f.tree(e,h)}},U=function(n,e,t){let i=Qt.parse(t.target.result,{delimiter:","});d.xml=document.implementation.createDocument(x.teins,"",null);let o=d.xml.createElementNS(x.teins,"teiCorpus"),c=d.xml.createElementNS(x.teins,"teiHeader");o.appendChild(c),d.xml.appendChild(o);for(let h of i){let g=h[0],m=h.slice(1),k=d.xml.createElementNS(x.teins,"TEI");k.setAttribute("n",g);let R=d.xml.createElementNS(x.teins,"text");for(let V=0;V<m.length;V++){let W=m[V],ne=d.xml.createElementNS(x.teins,"w");W&&ne.appendChild(document.createTextNode(W)),ne.setAttribute("n",V),R.appendChild(ne)}k.appendChild(R),o.appendChild(k)}d.xml.normalize(),d.maxlemma=P.maxlemma(),ye()},$=function(n,e,t){let i=new DOMParser;d.xml=i.parseFromString(t.target.result,"text/xml");let o=d.xml.querySelectorAll("teiHeader xenoData stemma nexml");for(let c of o){let h=document.implementation.createDocument("http://www.nexml.org/2009","",null);h.appendChild(c.cloneNode(!0)),se(h,c.closest("stemma").id,!1)}d.maxlemma=P.maxlemma(),e.length>0?ce(e):ye()},ce=function(n){let e=n[0],t=n.slice(1),i=function(h,g){let m=new Set(h);for(let k of g)m.delete(k);return m},o=function(h,g){let k=new DOMParser().parseFromString(g.target.result,"text/xml"),R=new Map;for(let Ae of P.teis()){let Te=Ae.getAttribute("n");R.set(Te,Ae)}let V=new Set(R.keys()),W=new Map;for(let Ae of k.querySelectorAll("TEI")){let Te=Ae.getAttribute("n");W.set(Te,Ae)}let ne=new Set(W.keys()),te=i(V,ne),me=i(ne,V);for(let Ae of me)_e.tei(Ae);let ge=[...k.querySelector("text").querySelectorAll("w[n]")].length,be=d.maxlemma+ge;for(let[Ae,Te]of W)if(R.has(Ae)){let Me=R.get(Ae).querySelector("text"),De=Te.querySelector("text").querySelectorAll("w[n]");var xe=d.maxlemma+1;for(let qe of De)qe.setAttribute("n",xe),Me.appendChild(qe),xe=xe+1}else{let Me=d.xml.createElementNS(x.teins,"TEI");Me.setAttribute("n",Ae);let Re=d.xml.createElementNS(x.teins,"text");_e.emptywords(Re,be,0),Me.appendChild(Re),d.xml.documentElement.appendChild(Me)}for(let Ae of te){let Te=R.get(Ae).querySelector("text");_e.emptywords(Te,be,d.maxlemma+1)}d.maxlemma=P.maxlemma(),h.length>0?ce(h):ye()},c=new FileReader;c.onload=o.bind(null,t),c.readAsText(e)},pe=function(){var n="";let e=[...P.teis()].map(t=>t.getAttribute("n"));for(let t of e)n+=`<li data-name="${t}">${t}</li>`;document.getElementById("menu").querySelector(".ms").innerHTML=n},ye=function(){pe();let n=new we("Export");n.populate([{text:"TEI corpus",func:j.showOptions.bind(null,j.xml,j.options)},{text:"TEI apparatus",func:j.showOptions.bind(null,j.xml,j.appOptions)},{text:"CSV",func:j.showOptions.bind(null,j.csv,j.options)},{text:"NEXUS",func:j.showOptions.bind(null,j.nexus,j.options)}]);let e=new we("Edit");e.populate([{text:"Undo",greyout:le.undo,func:B.undo},{text:"Redo",greyout:le.redo,func:B.redo},{text:"Select all",alt:"Deselect all",toggle:le.anyhighlit,func:A.highlightAll},{text:"(Re)normalize columns",greyout:le.anyhighlit,func:B.startRenormalize.bind(null,!1)},{text:"Delete column",greyout:le.anyhighlit,func:B.startRemoveCol.bind(null,!1)},{text:"Delete empty columns",func:B.startRemoveEmpty},{text:"Merge columns",greyout:le.manyhighlit,func:B.startMerge.bind(null,!1)},{text:"Group columns",alt:"Ungroup columns",greyout:le.oneGrouped,toggle:le.grouped,func:B.startGroup.bind(null,!1)},{text:"Group words",func:B.doGroupWords},{text:"Edit cell",greyout:le.highlitcell,func:B.startEditCell.bind(null,!1)},{text:"Insert row",func:B.startNewRow},{text:"Insert column",greyout:le.anyhighlit,func:B.startInsertCol},{text:"Mark insignificant",checkbox:le.checkbox.bind(null,"insignificant",!1),greyout:le.anyhighlit,func:B.startMarkAs.bind(null,"insignificant",!1)},{text:"Mark binary",checkbox:le.checkbox.bind(null,"binary",!1),greyout:le.anyhighlit,func:B.startMarkAs.bind(null,"binary",!1)}]);let t=new we("View");t.populate([{text:"Header",checkbox:le.headerView,func:Se.toggleHeader},{text:"Normalized",checkbox:le.normalizedView,greyout:le.anyNormalized,func:Se.toggleNormalize}]);let i=document.getElementById("left_menu");i.appendChild(t.box),i.appendChild(e.box),i.appendChild(n.box);let o=document.getElementById("views");o.style.justifyContent="flex-start",o.removeChild(o.querySelector("#splash")),f.matrix();let c=document.getElementById("matrixmenu");c.addEventListener("click",f.matrix),c.removeChild(c.querySelector("ul")),document.getElementById("mssmenu").style.display="block",document.getElementById("treemenu").style.display="block"},j={write:async function(n,e){let t=await e.createWritable();t.write(n),t.close()},xml:async function(n){let e=new XMLSerializer().serializeToString(M.sheets.xml.transformToDocument(n)),t=new Blob([e],{type:"text/xml;charset=utf-8"}),i=P.basename()+".xml",o=await Kt({_preferPolyfill:!1,suggestedName:i,types:[{description:"TEI XML",accept:{"text/xml":[".xml"]}}]});j.write(t,o)},csv:async function(n){let e=M.sheets.csv.transformToDocument(n).documentElement.textContent,t=new Blob([e],{type:"text/csv;charset=utf-8"}),i=P.basename()+".csv",o=await Kt({_preferPolyfill:!1,suggestedName:i,types:[{description:"CSV file",accept:{"text/csv":[".csv"]}}]});j.write(t,o)},nexus:async function(n){let e=[...P.texts(n)],t=e.length,i="0 1 2 3 4 5 6 7 8 9 A B C D E F G H K L M N P Q R S T U V W X Y Z a b c d e f g h k l m n p q r s t u v w x y z",[o,...c]=i.split(" "),h="-",g=e.map(xe=>"'"+xe.parentElement.getAttribute("n")+"'"),m=e.map(xe=>P.textWalker(xe)),k=e[0].querySelectorAll("w").length,R=[],V=g.map(xe=>[xe+" "]);for(let xe=0;xe<k;xe++){let Ae=new Set,Te=[];for(let Re=0;Re<m.length;Re++){let qe=m[Re].nextNode(),Fe=ze.t(qe.textContent.trim().toLowerCase(),"iast","hk").replace(/'/g,"()");Te.push(Fe),Fe!==""&&Fe!=="[]"&&Ae.add(Fe)}R.push(["[]",...Ae]);let Me=new Map([...Ae].map((Re,De)=>[Re,c[De]]));for(let Re=0;Re<Te.length;Re++){let De=(qe=>{switch(Te[qe]){case"":return h;case"[]":return o;default:return Me.get(Te[qe])}})(Re);V[Re].push(De)}}let W=R.map((xe,Ae)=>Ae+1+" / "+[...xe].map(Te=>`'${Te}'`).join(" ")).join(`,
`),ne=V.map(xe=>xe.join("")).map(xe=>xe.replace(/0{8,}/g,Ae=>Ae.replace(/0/g,"-"))).reduce((xe,Ae)=>xe+`
`+Ae),te=`#NEXUS

BEGIN TAXA;
  DIMENSIONS NTAX=${t};
  TAXLABELS ${g.join(" ")};
END;

BEGIN CHARACTERS;
  DIMENSIONS
    NCHAR=${k};
  FORMAT 
    DATATYPE=STANDARD 
    RESPECTCASE 
    GAP=${h} 
    MISSING=? 
    SYMBOLS="${i}";
  CHARSTATELABELS
${W}
;
MATRIX
${ne}
;
END;
`,me=new Blob([te],{type:"text/nexus;charset=iso8859-1"}),ge=P.basename()+".nex",be=await Kt({_preferPolyfill:!1,suggestedName:ge,types:[{description:"NEXUS file",accept:{"text/nexus":[".nex"]}}]});j.write(me,be)},processOptions:function(n){let e=d.xml.cloneNode(!0);if(n.get("option_normalize")){let t=e.querySelectorAll("w[lemma]");for(let i of t)i.textContent=i.getAttribute("lemma")}if(n.get("option_mergegroups")){let t=e.querySelectorAll("cl");for(let i of t){let o=i.removeChild(i.firstChild);for(;i.firstChild;){let c=o.getAttribute("lemma")||o.textContent,h=i.firstChild.getAttribute("lemma")||i.firstChild.textContent;for(o.setAttribute("lemma",c+h);i.firstChild.firstChild;)o.appendChild(i.firstChild.firstChild);i.firstChild.remove()}o.getAttribute("lemma")===o.textContent&&o.removeAttribute("lemma"),i.parentNode.insertBefore(o,i),i.parentNode.removeChild(i)}}if(n.get("option_insignificant")){let t=e.querySelectorAll('w[insignificant="true"]');for(let i of t)i.parentNode.removeChild(i)}if(n.get("option_binary")){let i=[...P.firsttext().querySelectorAll('w[binary="true"]')].map(o=>o.getAttribute("n"));for(let o of i){let c=e.querySelectorAll(`w[n="${o}"]:not(:empty)`);if(c.length===0)continue;let h=`[${c[0].textContent}]`;for(let g of c)g.textContent=h}}if(n.get("option_noempty")){let t=e.querySelectorAll("w:empty");for(let i of t)i.textContent="[]"}return n.get("option_basetext")?j.makeApp(n,e):e},makeHeader(n,e){let t=n.createElementNS(x.teins,"teiHeader"),i=n.createElementNS(x.teins,"fileDesc"),o=n.createElementNS(x.teins,"sourceDesc"),c=n.createElementNS(x.teins,"listWit");for(let h of P.teis(e)){let g=h.getAttribute("n"),m=n.createElementNS(x.teins,"witness");m.setAttribute("xml:id",g);let k=n.createElementNS(x.teins,"idno");k.setAttribute("type","siglum"),k.append(g),m.appendChild(k),c.appendChild(m)}return o.appendChild(c),i.appendChild(o),t.appendChild(i),t},makeApp(n,e){let t=n.get("option_basetext"),i=P.tei(t,e),o=n.get("option_app_normalize"),c=document.implementation.createDocument(x.teins,"",null);c.appendChild(i);let h=j.makeHeader(c,e);i.insertBefore(h,i.firstChild);let g=P.words(!1,i);for(let m of g){let k=m.getAttribute("n"),R=o&&m.getAttribute("lemma")||m.textContent,V=[],W=new Map,ne=P.words(k,e);for(let te of ne){let me=te.closest("TEI").getAttribute("n");if(o&&te.getAttribute("lemma")===R)V.push(me);else if(te.textContent===R)V.push(me);else{let ge=te.textContent===""?"[om.]":te.textContent,be=W.get(ge)||[];be.push(me),W.set(ge,be)}}if(W.size===0)for(;m.firstChild;)m.parentElement.insertBefore(m.firstChild,m);else{let te=c.createElementNS(x.teins,"app");te.setAttribute("n",k);let me=c.createElementNS(x.teins,"lem"),ge=V.map(be=>`#${be}`).join(" ");for(ge!==""&&me.setAttribute("wit",ge);m.firstChild;)me.appendChild(m.firstChild);te.appendChild(me);for(let[be,xe]of W){let Ae=c.createElementNS(x.teins,"rdg"),Te=xe.map(Me=>`#${Me}`).join(" ");Ae.setAttribute("wit",Te),Ae.append(be),te.appendChild(Ae)}m.parentElement.insertBefore(te,m),me.textContent.match(/\s$/)&&m.parentElement.insertBefore(c.createTextNode(" "),m)}m.remove()}return c},options(){return document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <input type="checkbox" id="option_insignificant" name="option_insignificant"><label for="option_insignificant">Remove insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_binary" name="option_binary"><label for="option_binary">Binarize marked lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_noempty" name="option_noempty"><label for="option_noempty">Gaps are significant</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups"><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`)},appOptions(){let n=document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <label for="option__basetext">Base text</label>
        <select id="option__basetext" name="option_basetext"></select>
      </div>
      <div>
        <input type="checkbox" id="option__app_insignificant" name="option_app_insignificant"><label for="option_app_insignificant">Ignore insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups" checked><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_app_normalize" name="option_app_normalize" checked><label for="option_app_normalize">Normalized spellings in positive apparatus</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings in negative apparatus</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`),e=n.getElementById("option__basetext"),t=[...P.trs()].map(i=>i.dataset.n);for(let i of t){let o=document.createElement("option");o.value=i,o.append(i),e.appendChild(o)}return n},showOptions:function(n,e){let t=e(),i=document.createElement("div");i.id="blackout",i.appendChild(t),document.body.appendChild(i);let o=function(h){h.preventDefault();var g=[];let m=document.getElementById("exportform").elements;for(let R of m)R.type==="checkbox"?g.push([R.name,R.checked]):g.push([R.name,R.value]);let k=j.processOptions(new Map(g));n(k),document.body.removeChild(i)};return i.querySelector("button").addEventListener("click",o),i.addEventListener("click",j.blackoutClick),i},blackoutClick:function(n){if(!n.target.closest(".popup")){let t=document.querySelector("#blackout");t.parentNode.removeChild(t)}}},ie={selectAll(n){let e=document.createRange();e.selectNodeContents(n);let t=window.getSelection();t.removeAllRanges(),t.addRange(e)},deselect(){let n=window.getSelection();n.removeAllRanges?n.removeAllRanges():n.empty&&n.empty()},treeMouseover(n){let e=n.target.classList.contains("tree-lemma")?n.target:n.target.closest(".tree-lemma");e&&(A.highlightTreeLemma(e.dataset.id),e.addEventListener("mouseout",A.unhighlightTrees));let t=n.target.dataset.reconstructed;if(!t)return;let i=document.createElement("div");i.id="tooltip",i.style.top=n.pageY+"px",i.style.left=n.pageX+"px",i.style.opacity=0,i.style.transition="opacity 0.2s ease-in",d.viewdiv.parentElement.appendChild(i);let o=document.createElement("div");if(o.appendChild(document.createTextNode(t)),this.script!==0?i.appendChild(Ot(o,x.scripts[this.script])):i.appendChild(o),n.target.classList.contains("reconstructed")){let c=n.target.parentNode.querySelector("span.tree-lemma");if(c&&c.dataset.hasOwnProperty("emended")){let h=document.createElement("div");h.classList.add("emphasis"),h.appendChild(document.createTextNode(c.textContent)),this.script!==0?i.prepend(Ot(h,x.scripts[this.script])):i.prepend(h)}}window.getComputedStyle(i).opacity,i.style.opacity=1,n.target.addEventListener("mouseout",O)},treeClick(n){n.target.classList.contains("witness")?f.text(n.target.dataset.key):n.target.classList.contains("reconstructed")?f.text(n.target.dataset.label):n.target.classList.contains("internal")&&B.startReconstruction(n),O()},keyDown(n){if(!d.editing&&n.key.substring(0,5)==="Arrow")ie.cycleVariant(n);else if(n.ctrlKey||n.metaKey)n.key==="Z"?B.redo():n.key==="z"&&B.undo();else if(!d.editing&&d.matrix&&!d.matrix.closed&n.key==="Enter"){let e=P.highlitcell();e&&(n.preventDefault(),B.startEditCell(e))}},cycleVariant(n){let e=P.highlitcell()||d.viewdiv.querySelector("td.highlit")||d.viewdiv.querySelector('td[data-n="0"]');switch(n.key){case"ArrowRight":{if(!d.matrix.closed&&e){let t=e.nextElementSibling;t&&ie.textClick({target:t})}else{let t=d.viewdiv.querySelector(".highlit"),i=t?t.dataset.n:0,o=parseInt(i)+1;for(;o<=d.maxlemma;){let c=d.viewdiv.querySelectorAll('[data-n="'+o+'"]');for(let h of c)if(h&&!h.classList.contains("invisible")){ie.textClick({target:h});return}o++}}break}case"ArrowLeft":{if(!d.matrix.closed&&e){let t=e.previousElementSibling;t&&ie.textClick({target:t})}else{let t=d.viewdiv.querySelector(".highlit"),i=t?t.dataset.n:0,o=parseInt(i)-1;for(;o>=0;){let c=d.viewdiv.querySelectorAll('[data-n="'+o+'"]');for(let h of c)if(h&&!h.classList.contains("invisible")){ie.textClick({target:h});return}if(o--,e){ie.textClick({target:e.previousElementSibling});return}}}break}case"ArrowUp":{if(d.matrix.closed||!e)return;let i=e.closest("tr").previousElementSibling;if(!i||!i.dataset.n)return;let o=i.querySelector(`td[data-n="${e.dataset.n}"]`);ie.textClick({target:o});break}case"ArrowDown":{if(d.matrix.closed||!e)return;let i=e.closest("tr").nextElementSibling;if(!i||i.tagName!=="TR")return;let o=i.querySelector(`td[data-n="${e.dataset.n}"]`);ie.textClick({target:o})}}},textClick(n,e=!1){if(n.target.closest("tr.header")){ie.matrixHeaderClick(n);return}let t=n.target.classList.contains("lemma")?n.target:n.target.closest(".lemma");if(t){if(!e&&n.ctrlKey){ie.rightClick(n);return}let i=t.dataset.n,o=P.highlitrow();if(A.unHighlightAll(),A.highlightLemma(i),A.repopulateTrees(i),Se.xScroll(i,o),t.tagName==="TD")t.classList.add("highlitcell");else{let c=t.closest(".text-box");if(c){let h=c.dataset.id;P.tr(h).querySelector(`td[data-n="${i}"]`).classList.add("highlitcell")}}}},textMouseup(){let n=z();A.highlightRange(n),E()},menuMouseover(n){let e=n.target.classList.contains("menubox")?n.target:n.target.closest(".menubox");if(e){let t=e.querySelector("ul");t&&(t.style.display="block"),e.classList.add("open")}},menuMouseout(n){let e=n.target.classList.contains("menubox")?n.target:n.target.closest(".menubox");if(e){let t=e.querySelector("ul");t&&(t.style.display="none"),e.classList.remove("open")}},menuClick(n){!n.target.parentElement||(n.target.parentElement.className==="ms"&&(ie.menuMouseout(n),f.text(n.target.dataset.name)),n.target.parentElement.className==="tree"&&(ie.menuMouseout(n),n.target.closest("li[data-name]")&&f.tree(n.target.dataset.stemmaid,n.target.dataset.treeid)))},thDragStart(n){n.dataTransfer.setData("text/plain",n.target.textContent),B.startMoveRow(n.target.parentNode,n)},trDragEnter(n){let e=n.target.nodeType===1?n.target.closest("tr"):n.target.parentElement.closest("tr");e&&e.classList.add("dragenter")},trDragLeave(n){let e=n.target.nodeType===1?n.target.closest("tr"):n.target.parentElement.closest("tr");e&&e.classList.remove("dragenter")},trDragDrop(n){n.preventDefault(),B.finishMoveRow(n)},matrixMousedown(n){if(n.button!==0)return;if(n.ctrlKey){ie.rightClick(n);return}let e=n.target.nodeType===1?n.target.closest(".lemma"):n.target.parentElement.closest(".lemma");if(e){if(e.isContentEditable)return;A.unHighlightAll(),A.highlightLemma(e.dataset.n);let t=d.matrix.boxdiv.querySelector("table");t.addEventListener("mouseover",ie.matrixMouseover),t.addEventListener("mouseup",ie.matrixMouseup)}},matrixMouseup(){let n=P.highlit();A.highlightRange(n);let e=d.matrix.boxdiv.querySelector("table");e.removeEventListener("mouseover",ie.matrixMouseover),e.removeEventListener("mouseup",ie.matrixMouseup)},matrixMouseover(n){let e=n.target.nodeType===1?n.target.closest(".lemma"):n.target.parentElement.closest(".lemma");e&&A.highlightLemma(e.dataset.n)},matrixHeaderClick(n){if(n.target.tagName!=="INPUT")return;let e=n.target.className;if(e!=="insignificant"&&e!=="binary")return;let t=n.target.closest("th").dataset.ref,i=P.firsttd(t).dataset[e]!=="true",o=new Map([[t,i]]);B.doMarkAs(e,o)},rightClick(n){let e=n.target.nodeType===1?n.target.closest("tr[data-n] th"):n.target.parentElement.closest("tr[data-n] th");if(e){n.preventDefault(),G.remove();let i=G.create(n),o=[{text:"move row",func:B.startMoveRow.bind(null,e.parentNode)},{text:"delete row",func:B.doDeleteRow.bind(null,e.parentNode.dataset.n)}];G.populate(i,o),G.show(i);return}let t=n.target.nodeType===1?n.target.closest("td.lemma"):n.target.parentElement.closest("td.lemma");if(t){n.preventDefault();let i=t.classList.contains("highlit")?function(){let h=P.highlit();return h.size===1&&!t.classList.contains("highlitcell")&&(A.unCelllightAll(),t.classList.add("highlitcell")),h}():(ie.textClick(n,!0),new Set([t.dataset.n])),o=i.size>1?[{text:"merge columns",func:B.startMerge.bind(null,i)},{text:"ungroup columns",alt:"group columns",toggle:le.grouped,func:B.startGroup.bind(null,!1)},{text:"delete columns",func:B.startRemoveCol.bind(null,i)}]:[{text:"edit cell",func:B.startEditCell.bind(null,t)},{text:"delete column",func:B.startRemoveCol.bind(null,i)},{text:"insert column",func:B.startInsertCol}];G.remove();let c=G.create(n);G.populate(c,o),G.show(c)}}},B={undo:function(){let n=d.undo.pop();n&&n[0](...n[1])},redo:function(){let n=d.redo.pop();n&&n[0](...n[1])},doStack:function(n,e="do"){e==="undo"?(n[1].push("redo"),d.redo.push(n)):e==="redo"?(n[1].push("undo"),d.undo.push(n)):(n[1].push("undo"),d.undo.push(n),d.redo=[])},doMulti:function(n,e){let t=[];for(let i of n){let o=i[0](...i[1],"multido");t.unshift(o)}B.doStack([B.doMulti,[t]],e)},startMoveRow:function(n,e){if(d.dragged=n,d.dragged.classList.add("dragging"),e.type!=="dragstart"){for(let t of P.trs())t.classList.add("moveinprogress");d.matrix.boxdiv.querySelector("table").addEventListener("mousedown",B.finishMoveRow)}},startMerge:function(n){let e=n===!1?P.highlit():n,t=P.clauses(e,!0);if(!t)B.doMerge(e,"do");else if(t[0]===null){let i=t.filter(o=>o!==null).map(o=>[B.doUngroup,[o]]).concat([[B.doMerge,[e]]]);B.doMulti(i,"do")}else{let i=P.clausesToRemove(t,e);if(!i)B.doMerge(e,"do");else{let o=i.map(c=>[B.doUngroup,[c]]).concat([[B.doMerge,[e]]]);B.doMulti(o,"do")}}},startGroup:function(n){let e=n===!1?P.highlit():n;le.grouped()?B.startUngroup(e):B.doGroup(e,"do")},startUngroup:function(n){let t=[...P.clauses(n)].map(i=>[B.doUngroup,[i]]);B.doMulti(t,"do")},startInsertCol:function(){let n=Math.max([...P.highlit()])||d.maxlemma;B.doInsertCol(n)},startRemoveCol:function(n){let e=n===!1?P.highlit():n,t=P.clauses(e);if(!t)B.doRemoveCol(e,"do");else{let i=P.clausesToRemove(t,e,1);if(!i)B.doRemoveCol(e,"do");else{let o=i.map(c=>[B.doUngroup,[c]]).concat([[B.doRemoveCol,[e]]]);B.doMulti(o,"do")}}},startRemoveEmpty:function(){let n=P.empty(),e=P.clauses(n);if(!e)B.doRemoveCol(n,"do");else{let t=P.clausesToRemove(e,n,1);if(!t)B.doRemoveCol(n,"do");else{let i=t.map(o=>[B.doUngroup,[o]]).concat([[B.doRemoveCol,[n]]]);B.doMulti(i,"do")}}},startEditCell:function(n){let e=n||P.highlitcell();!e||(B.unnormalize(e),e.dataset.oldContent=e.textContent,e.contentEditable="true",e.focus(),d.editing=!0,ie.selectAll(e),e.addEventListener("blur",B.finishEditCell),e.addEventListener("keydown",B.cellKeyDown))},cellKeyDown:function(n){switch(n.key){case"Enter":B.finishEditCell(n);break;case"Escape":B.finishEditCell(n,!0);break;case"ArrowRight":{let e=P.cursorPos(n.target);e[0]===e[1]&&(n.preventDefault(),B.finishEditCell(n),ie.cycleVariant({key:"ArrowRight"}),B.startEditCell(P.highlitcell()));break}case"ArrowLeft":{P.cursorPos(n.target)[0]===0&&(n.preventDefault(),B.finishEditCell(n),ie.cycleVariant({key:"ArrowLeft"}),B.startEditCell(P.highlitcell()));break}}},startMarkAs:function(n,e,t){let i=t.target.tagName==="INPUT"?t.target:t.target.querySelector("input"),o=e===!1?P.highlit():e,c=new Map([...o].map(h=>[h,!i.checked]));B.doMarkAs(n,c)},startNewRow:function(){let n=_e.row("new row"),e=n.querySelector("th");e.contentEditable=!0,e.addEventListener("blur",B.finishNewRow),e.addEventListener("keydown",B.thKeyDown),d.matrix.boxdiv.querySelector("tbody").appendChild(n),e.scrollIntoView(),e.focus(),document.execCommand("selectAll",!1,null),d.editing=!0},startRenameRow:function(){},startReconstruction:function(n){let e=n.target.dataset.key,t=n.target.closest(".tree-box").myTree,i=t.desc,o=document.createElement("div");o.id="blackout";let c=document.createRange().createContextualFragment(`<div id="reconstructionoptions" class="popup">
    <form id="reconstructionform">
      <div>
        <label for="reconstructed_node_name">Label for node:</label>
        <input type="text" id="reconstructed_node_name" name="reconstructed_node_name" placeholder="${i}-${e}" size="15">
      </div>
      <div style="width: 100%; display: flex; justify-content: center;padding-top: 1em;">
        <button type="submit">Add to matrix</button>
      </div>
    </form>
</div>`);o.appendChild(c),document.body.appendChild(o);let h=function(m){m.preventDefault();let k=o.querySelector("input"),R=k.value?k.value:k.placeholder;B.doReconstruction(t,e,R),document.body.removeChild(o)};o.querySelector("button").addEventListener("click",h),o.addEventListener("click",j.blackoutClick)},thKeyDown:function(n){n.key==="Enter"&&B.finishNewRow(n)},finishNewRow:function(n){let e=n.target,t=e.textContent;e.closest("tr").dataset.n=t;let i=_e.tei(t);d.xml.documentElement.appendChild(i),d.editing=!1,e.contentEditable=!1,e.removeEventListener("blur",B.finishNewRow),e.removeEventListener("keydown",B.thKeyDown),B.doStack([B.doDeleteRow,[t]],"do")},finishEditCell:function(n,e=!1){let t=n.target;d.editing=!1,t.contentEditable="false",t.removeEventListener("blur",B.finishEditCell),t.removeEventListener("keydown",B.cellKeyDown),t.blur(),ie.deselect();let i=t.textContent;if(i===""){let g=t.querySelector("br");g&&g.remove()}if(e||i===t.dataset.oldContent)return;t.hasOwnProperty("IAST")||(t.IAST=t.cloneNode(!0)),t.IAST.textContent=i;let o=parseInt(t.dataset.n),c=t.closest("tr"),h=c.dataset.n;if(B.xmlChangeCell(o,h,i),c.dataset.hasOwnProperty("treename")&&!t.dataset.hasOwnProperty("emended")){let g=B.doEmend(o,h,"multido"),m=[];m.push([B.doChangeCell,[o,h,t.dataset.oldContent]]),m.push(g),B.doStack([B.doMulti,[m]],"do")}else B.doStack([B.doChangeCell,[o,h,t.dataset.oldContent]],"do");delete t.dataset.oldContent,B.refresh(),Se.updateAllHeaders(!0),t.classList.add("highlitcell")},finishMoveRow:function(n){let e=n.target.nodeType===1?n.target.closest("tr"):n.target.parentElement.closest("tr");if(e&&B.doMoveRow(d.dragged,e,"do"),n.type!=="drop"){for(let t of P.trs())t.classList.remove("moveinprogress");d.matrix.boxdiv.querySelector("table").removeEventListener("mousedown",B.finishMoveRow)}else for(let t of P.trs())t.classList.remove("dragenter");d.dragged.classList.remove("dragging"),d.dragged=null},doReconstruction:function(n,e,t){let i=_e.row(t,"pending");i.dataset.treename=n.name,i.dataset.nodename=e;let o=i.querySelector("th"),c=document.createElement("div");c.id="spinner",o.prepend(c);let h=_e.tei(t);h.setAttribute("type","reconstructed"),h.setAttribute("corresp",n.name),h.setAttribute("select",`#${e}`);let g=[...P.tds(!1,i)],m=[...P.words(!1,h)];d.matrix.boxdiv.querySelector("tbody").appendChild(i),o.scrollIntoView();let k=new Blob(["("+Pe.fitch.toString()+")()"],{type:"application/javascript"}),R=new Worker(window.URL.createObjectURL(k)),V=P.serializedtexts(n.nexml),W=P.serializedlevels(n.levels);R.postMessage({readings:V,levels:W,num:0,id:e}),R.onmessage=function(ne){let te=ne.data.n,me=ne.data.result;if(g[te].textContent=me,g[te].IAST=g[te].cloneNode(!0),g[te].classList.remove("pending"),m[te].textContent=me,te<d.maxlemma)R.postMessage({readings:V,levels:W,num:te+1,id:e});else{o.removeChild(c),d.xml.documentElement.appendChild(h),Se.updateAllHeaders(),n.draw();let ge=P.highlit();ge.size>0&&A.repopulateTrees(...P.lowhigh(ge));let be=document.getElementById("menu").querySelector(".ms"),xe=document.createElement("li");xe.setAttribute("data-name",t),xe.appendChild(document.createTextNode(t)),be.appendChild(xe),B.doStack([B.doDeleteRow,[t]],"do")}}},doDeleteRow:function(n,e="do"){let t=P.tr(n),i=P.tei(n),c=[...P.teis()].indexOf(i);t.parentNode.removeChild(t),i.parentNode.removeChild(i),Se.updateAllHeaders(),pe(),b(),B.doStack([B.doUndeleteRow,[t,i,c]],e)},doUndeleteRow:function(n,e,t,i="do"){let o=e.getAttribute("n"),c=[...P.teis()];if(t===c.length)d.xml.documentElement.appendChild(e),d.matrix.boxdiv.querySelector("tbody").appendChild(n);else{let h=[...P.trs()];d.xml.documentElement.insertBefore(e,c[t]),h[t].parentNode.insertBefore(n,h[t])}Se.updateAllHeaders(),pe(),b(),B.doStack([B.doDeleteRow,[o]],i)},doMoveRow:function(n,e,t="do"){let i=n.parentNode,o=[...P.trs()],c=n.previousElementSibling,h=o.indexOf(n),g=e!==null?o.indexOf(e):null,m=function(){e===null?i.insertBefore(n,i.firstChild):e.nextElementSibling?i.insertBefore(n,e.nextElementSibling):i.appendChild(n)},k=function(){let R=d.xml.documentElement,V=[...P.teis()],W=V[h];if(g===null)R.insertBefore(W,V[0]);else{let ne=V[g];ne.nextElementSibling?R.insertBefore(W,ne.nextElementSibling):R.appendChild(W)}};if(m(),k(),t==="multido")return[B.doMoveRow,[n,c]];B.doStack([B.doMoveRow,[n,c]],t)},doMerge:function(n,e="do"){let t=function(h,g,m){let k=h();var R=[];for(let V of k){let W=[...m].map(me=>g(me,V)),ne=W.map(me=>me.cloneNode(!0));R.push(ne);for(let me of W)B.unnormalize(me);let te=W.reduce(function(me,ge){if(ge.hasChildNodes())for(;ge.firstChild;)me.appendChild(ge.firstChild);return ge.parentNode.removeChild(ge),me});te.normalize(),te.dataset?(delete te.dataset.normal,te.IAST=te.cloneNode(!0)):te.removeAttribute("lemma")}return[h,g,R]},i=t(P.trs,P.firsttd,n),o=t(P.texts,P.firstword,n),c=parseInt([...n][0]);if(B.renumber(c),B.restyleGroups(n),B.refresh(),Se.updateAllHeaders(),e==="multido")return[B.doUnmerge,[i,o]];B.doStack([B.doUnmerge,[i,o]],e)},doUnmerge:function(n,e,t="undo"){let i=function(g,m,k){let R=P.whichattr(k[0][0]),V=k[0].map(me=>me.getAttribute(R)),W=V[0],ne=g();for(var te=0;te<ne.length;te++){let me=k[te].pop(),ge=m(W,ne[te]);ge.parentNode.replaceChild(me,ge);for(let be of k[te])me.parentNode.insertBefore(be,me)}return V};i(...n);let o=i(...e),h=[...o].sort((g,m)=>parseInt(g)-parseInt(m))[0];if(B.renumber(h),B.reIAST(o),B.refresh(),B.restyleGroups(o),Se.updateAllHeaders(),t==="multido")return[B.doMerge,[o]];B.doStack([B.doMerge,[o]],t)},doGroup:function(n,e="do"){let t=[...n],i=t.shift(),o=P.texts();for(let h of o){let g=document.createElementNS("http://www.tei-c.org/ns/1.0","cl"),m=P.firstword(i,h);m.parentNode.insertBefore(g,m),g.appendChild(m);for(let k of n)g.appendChild(P.firstword(k,h))}let c=t.pop();for(let h of P.tds(i))h.classList.add("group-start");for(let h of P.tds(c))h.classList.add("group-end");for(let h of t)for(let g of P.tds(h))g.classList.add("group-internal");for(let h of d.textboxes)h.refresh();if(e==="multido")return[B.doUngroup,[n]];B.doStack([B.doUngroup,[n]],e)},doUngroup:function(n,e="do"){let t=P.texts();for(let o of t){let c;for(let h of n){let g=P.firstword(h,o);c||(c=g.closest("cl")),c.parentNode.insertBefore(g,c)}c.parentNode.removeChild(c)}let i=[...n].map(o=>[...P.tds(o)]).reduce((o,c)=>o.concat(c),[]);for(let o of i)o.classList.remove("group-start","group-internal","group-end");for(let o of d.textboxes)o.refresh();if(e==="multido")return[B.doGroup,[n]];B.doStack([B.doGroup,[n]],e)},doGroupWords:function(){let n=0,e=[];for(let t=0;t<=d.maxlemma;t++){let i=P.tds(t),o=i[0].classList;if(o.contains("group-start")||o.contains("group-internal")||o.contains("group-end")){n=t+1;continue}let c=i.length,h=0;if(t===d.maxlemma)h=c;else for(let g of i)(g.IAST?g.IAST.textContent:g.textContent).slice(-1)===" "&&h++;if(h/c>=.5)if(n===t){n++;continue}else{let g=P.range(n,t);e.push([B.doGroup,[g]]),n=t+1}}B.doMulti(e)},doRemoveCol:function(n,e="do"){let t=function(g,m,k){let R=g();var V=[];for(let W of R){let ne=[...k].map(me=>{let ge=m(me,W);return B.unnormalize(ge),ge}),te=ne.map(me=>me.cloneNode(!0));V.push(te);for(let me of ne)me.parentNode.removeChild(me)}return[g,m,V]},i=t(P.trs,P.firsttd,n),o=t(P.texts,P.firstword,n),c=[...n].sort((g,m)=>parseInt(g)-parseInt(m)),h=parseInt([...c][0])-1;if(B.renumber(h),B.refresh(),B.restyleGroups(n,!0),Se.updateAllHeaders(),e==="multido")return[B.doUnremoveCol,[i,o]];B.doStack([B.doUnremoveCol,[i,o]],e)},doUnremoveCol:function(n,e,t){let i=function(m,k,R){let V=P.whichattr(R[0][0]),W=R[0].map(ge=>ge.getAttribute(V)),ne=W[0],te=m();for(var me=0;me<te.length;me++){let ge=k(ne,te[me]);for(let be of R[me])ge.parentNode.insertBefore(be,ge)}return W};i(...n);let o=i(...e),c=[...o].sort((m,k)=>parseInt(m)-parseInt(k)),h=parseInt(c[0])-1;B.renumber(h);let g=document.querySelectorAll(".highlitcell");for(let m of g)m.classList.remove("highlitcell");if(B.reIAST(o),B.refresh(),B.restyleGroups(o,!0),Se.updateAllHeaders(),t==="multido")return[B.doRemoveCol,[o]];B.doStack([B.doRemoveCol,[o]],t)},doInsertCol:function(n,e="do"){let t=function(o,c,h,g){let m=o();for(let k of m){let R=c(g,k),V=h(g+1);R.insertAdjacentElement("afterend",V)}};t(P.trs,P.firsttd,_e.emptycell,n),t(P.texts,P.firstword,_e.emptyword,n),B.renumber(n),B.refresh(),B.restyleGroups([n,n+1],!0),Se.updateAllHeaders();let i=[n+1];if(e==="multido")return[B.doRemoveCol,[i]];B.doStack([B.doRemoveCol,[i]],e)},doEmend:function(n,e,t="do"){let i=[...P.trs()][e],o=P.firsttd(n,i);o.dataset.emended=!0;let c=P.tei(e).querySelector("text");if(P.firstword(n,c).setAttribute("emended","true"),t==="multido")return[B.doUnemend,[n,e]];B.doStack([B.doUnemend,[n,e]],t)},doUnemend:function(n,e,t="do"){let i=[...P.trs()][e],o=P.firsttd(n,i);delete o.dataset.emended;let c=P.tei(e).querySelector("text");if(P.firstword(n,c).removeAttribute("emended"),t==="multido")return[B.doEmend,[n,e]];B.doStack([B.doEmend,[n,e]],t)},doChangeCell:function(n,e,t,i="do"){let o=B.xmlChangeCell(n,e,t),c=B.htmlChangeCell(n,e,t);if(B.refresh(),Se.updateAllHeaders(!0),ie.textClick({target:c}),i==="multido")return[B.doChangeCell,[n,e,o]];B.doStack([B.doChangeCell,[n,e,o]],i)},htmlChangeCell:function(n,e,t){let i=P.tr(e),o=P.firsttd(n,i);return B.unnormalize(o),o.textContent=t,o.IAST&&(o.IAST=o.cloneNode(!0)),o},xmlChangeCell:function(n,e,t){let i=P.tei(e).querySelector("text"),o=P.firstword(n,i);B.unnormalize(o);let c=o.textContent;return o.childNodes.length===0?o.appendChild(document.createTextNode(t)):o.textContent=t,c},doMarkAs:function(n,e,t="do"){let i=[...e.keys()],o=P.attr(n,i);for(let c of i){let h=P.tds(c),g=P.words(c);if(e.get(c)===!0){for(let k of h)k.dataset[n]="true";for(let k of g)k.setAttribute(n,"true")}else{for(let k of h)delete k.dataset[n];for(let k of g)k.removeAttribute(n)}let m=P.checkbox(c,n);m.checked=e.get(c)}if(t==="multido")return[B.doMarkAs,[n,o]];B.doStack([B.doMarkAs,[n,o]],t)},refresh:function(){for(let n of d.textboxes)n.refresh();A.rehighlight(),le.anyhighlit()?A.repopulateTrees(...P.lowhigh(P.highlit())):A.clearTrees()},renumber:function(n=0){let e=function(t,i,o){let c=t();for(let g of c){let m=[...i(!1,g)],k=P.whichattr(m[0]);for(var h=parseInt(o)+1;h<m.length;h++)m[h].setAttribute(k,h)}};e(P.trs,P.tds,n),e(()=>[!0],P.ths,n),e(P.texts,P.words,n),d.maxlemma=P.maxlemma()},reIAST:function(n){let e=[...n].map(t=>[...P.lemmata(t)]).flat();for(let t of e)t.IAST=t.cloneNode(!0)},restyleGroups:function(n,e=!1){let i=e?function(c){var h=[...c];let g=parseInt(n[0])-1,m=parseInt(n[n.length-1])+1;return h.unshift(g),h.push(m),h}(n):n,o=function(c,h=!1){let g=new Set(["group-start","group-internal","group-end"]);h&&g.delete(h);for(let m of c){for(let k of g)m.classList.remove(k);h&&m.classList.add(h)}};for(let c of i){let h=P.firstword(c),g=P.tds(c);if(g.length===0)continue;let m=h.closest("cl");m?h===m.firstElementChild?o(g,"group-start"):h===m.lastElementChild?o(g,"group-end"):o(g,"group-internal"):o(g)}},startRenormalize:function(n){let e=n===!1?P.highlit():n;B.doRenormalize(Math.min(...e),Math.max(...e))},doRenormalize:function(n,e,t=!1,i="do"){let o=le.normalizedView(),c=new Map,h=[...P.trs()],g=[...P.texts()],m=t?[t]:[...h.keys()];for(let k of m){let R=new Map,V=g[k],W=[...P.words(!1,V)],ne=P.firstword(n,V),te=P.firstword(e,V),me=W.indexOf(ne),ge=W.indexOf(te),be=W.slice(me,ge+1),xe=h[k],Te=[...P.tds(!1,xe)].slice(me,ge+1),Me=be.map(De=>De.textContent),Re=w1(Me);for(let De=0;De<Re.length;De++){let qe=be[De],Fe=Re[De],rt=Me[De],Ve=Te[De],Xe=qe.hasAttribute("lemma")?qe.getAttribute("lemma"):!1;if(Xe!==!1){if(Xe===Fe)continue;R.set(Ve.dataset.n,Xe),B.unnormalize(qe),B.unnormalize(Ve)}else R.set(Ve.dataset.n,null);Fe!==rt&&(qe.setAttribute("lemma",Fe),Ve.dataset.normal=Fe,o&&(Ve.textContent=Fe))}c.set(k,R)}Se.updateAllHeaders(!0),Se.xScrollToHighlit(),B.doStack([B.doUnrenormalize,[c]],i)},doUnrenormalize:function(n,e="undo"){let t=le.normalizedView(),i=new Map,o=[...P.trs()],c=[...P.texts()];for(let[h,g]of n.entries()){let m=o[h],k=c[h],R=new Map;for(let[V,W]of g.entries()){let ne=P.firsttd(V,m),te=P.firstword(V,k),me=te.hasAttribute("lemma")?te.getAttribute("lemma"):null;R.set(V,me),W===null?(B.unnormalize(ne),B.unnormalize(te)):(ne.dataset.normal=W,te.setAttribute("lemma",W),t&&(ne.textContent=W))}i.set(h,R)}B.doStack([B.doUnrenormalize,[i]],e)},unnormalize:function(n){n.hasOwnProperty("IAST")&&(n.textContent=n.IAST.textContent),n.dataset&&n.dataset.hasOwnProperty("normal")&&delete n.dataset.normal,n.getAttribute("lemma")&&n.removeAttribute("lemma")}},Se={toggleNormalize:function(){le.normalizedView()?Se.showUnnormalized():Se.showNormalized()},showNormalized:function(n){if(n)n.updatescript();else{document.getElementById("views").classList.add("normalized");for(let t of d.textboxes)t.updatescript();d.matrix.updatescript(),le.anyhighlit()?A.repopulateTrees(...P.lowhigh(P.highlit())):A.clearTrees()}Se.updateAllHeaders(!0),Se.xScrollToHighlit()},showUnnormalized:function(){document.getElementById("views").classList.remove("normalized"),d.matrix.updatescript();for(let n of d.textboxes)n.updatescript();le.anyhighlit()?A.repopulateTrees(...P.lowhigh(P.highlit())):A.clearTrees(),Se.updateAllHeaders(!0),Se.xScrollToHighlit()},toggleHeader:function(){let n=d.matrix.boxdiv.querySelector("tr.header");n.style.display==="none"?n.style.display="table-row":n.style.display="none"},updateHeaders(n){for(let e of n){let t=P.firstth(e),[i,o]=P.readings(e),c=t.querySelector("span.readings"),h=i<2?i:`${i}(${o.size})`;c.textContent=h}},updateAllHeaders(n=!1){let e=[...P.trs()],t=e.map(g=>P.trWalker(g)),i=[...P.tds(!1,e[0])],o=[...P.ths()],c=d.matrix.boxdiv.querySelector("tr.header"),h=function(){let g=document.createElement("th"),m=document.createElement("span");m.classList.add("readings"),g.appendChild(m);let k=document.createElement("form");return k.innerHTML='<div><input class="insignificant" type="checkbox">Insignificant</div><div><input class="binary" type="checkbox">Binary</div>',g.appendChild(k),c.appendChild(g),g};for(let g=0;g<i.length;g++){let m=g>=o.length?h():o[g],k=i[g];m.dataset.ref=k.dataset.n;let R=0,V=new Set;for(let ne of t){let te=ne.nextNode().textContent;te!==""&&(R++,V.add(te))}let W=R<2?R:`${R}(${V.size})`;m.querySelector("span.readings").textContent=W,n||(m.querySelector("input.insignificant").checked=!!k.dataset.insignificant,m.querySelector("input.binary").checked=!!k.dataset.binary)}if(o.length>i.length)for(let g=i.length;g<o.length;g++)c.removeChild(o[g])},xScrollToHighlit:function(){let n=P.highlit();n.size>0&&Se.xScroll([...n][0])},xScroll:function(n,e){if(!n)return;let t=e||P.firsttr(),i=P.firsttd(n,t),o=i.getBoundingClientRect(),c=d.matrix.boxdiv,g=c.getBoundingClientRect().right,m=t.querySelector("th").getBoundingClientRect(),k=m.right,R=o.right>g,V=o.left+.1<k;R&&i.scrollIntoView({inline:"end",block:"nearest"}),V&&(i.scrollIntoView({inline:"start",block:"nearest"}),c.scroll({left:c.scrollLeft-m.width}))}},P={basename:function(){return d.filename.split(/\.[^.]+$/)[0]},range:function(n,e){return Array.from(Array(parseInt(e)-parseInt(n)+1).keys(),t=>t+n)},maxlemma:function(){return[...P.firsttext().querySelectorAll("w[n]")].length-1},lemmata:function(n,e){let t=e||document.querySelector("#views");return n===!1?t.querySelectorAll(".lemma"):t.querySelectorAll(`.lemma[data-n="${n}"]`)},tds:function(n,e){let t=e||d.matrix.boxdiv;return n===!1?t.querySelectorAll("td[data-n]"):t.querySelectorAll(`td[data-n="${n}"]`)},firsttd:function(n,e){return(e||d.matrix.boxdiv).querySelector(`td[data-n="${n}"]`)},tr:function(n){return d.matrix.boxdiv.querySelector(`tr[data-n="${n}"]`)},trs:function(n){return(n||d.matrix.boxdiv).querySelectorAll("tr[data-n]")},firsttr:function(n){return(n||d.matrix.boxdiv).querySelector("tr[data-n]")},lasttr:function(n){return(n||d.matrix.boxdiv).querySelector("tr[data-n]:last-of-type")},trWalker:function(n){return document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){if(e.tagName==="TD")return NodeFilter.FILTER_ACCEPT}},!1)},textWalker:function(n){return document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){if(e.tagName.toLowerCase()==="w")return NodeFilter.FILTER_ACCEPT}},!1)},tei:function(n,e=d.xml){return e.querySelector(`TEI[n="${n}"]`)},teis:function(n=d.xml){return n.querySelectorAll("TEI")},texts:function(n){return(n||d.xml).querySelectorAll("text")},serializedtexts:function(n){let e=[...n.querySelectorAll("otu[label]")].map(i=>i.getAttribute("label")),t=[...P.teis()].filter(i=>e.indexOf(i.getAttribute("n"))!==-1);return new Map(t.map(i=>[n.querySelector(`node[label="${i.getAttribute("n")}"]`).getAttribute("id"),[...i.querySelectorAll("w")].map(o=>le.normalizedView()&&o.hasAttribute("lemma")?o.getAttribute("lemma"):o.textContent)]))},serializedlevels:function(n){return n.map(e=>{if(e instanceof Map){let t=new Map;for(let[i,o]of e)t.set(i.getAttribute("id"),o.map(c=>c.getAttribute("id")));return t}else return e.map(t=>t.getAttribute("id"))})},firsttext:function(n){return n?d.xml.querySelector(`[n="${n}"] text`):d.xml.querySelector("text")},words:function(n,e){let t=e||d.xml;return n===!1?t.querySelectorAll("w[n]"):t.querySelectorAll(`w[n="${n}"]`)},firstword:function(n,e){return(e||d.xml).querySelector(`w[n="${n}"]`)},normal:function(n){return(n||document.getElementById("views")).querySelectorAll(".lemma[data-normal], .tree-lemma[data-normal]")},htmlreading:function(n){return le.normalizedView()&&n.dataset.normal?n.dataset.normal:n.IAST.textContent},xmlreading:function(n,e){let t=d.xml.querySelector(`TEI[n="${n}"] > text > w[n="${e}"]`);return le.normalizedView()&&t.hasAttribute("lemma")?t.getAttribute("lemma"):t.textContent},xmlreadings:function(n){return[...d.xml.querySelectorAll(`TEI[n="${n}"] > text > w`)].map(t=>{le.normalizedView()&&t.hasAttribute("lemma")?t.getAttribute("lemma"):t.textContent})},ths:function(){return d.matrix.boxdiv.querySelectorAll("th[data-ref]")},firstth:function(n){return d.matrix.boxdiv.querySelector(`th[data-ref="${n}"]`)},checkbox:function(n,e){return d.matrix.boxdiv.querySelector(`th[data-ref="${n}"] input.${e}`)},highlit:function(){let e=P.firsttr().querySelectorAll(".highlit"),t=new Set;for(let i of e)t.add(i.dataset.n);return t},highlitcell:function(){return d.matrix.boxdiv.querySelector("td.highlitcell")},highlitrow:function(){let n=P.highlitcell();return n?n.closest("tr"):!1},lowhigh:function(n){let e=[...n].sort((o,c)=>parseInt(o)-parseInt(c)),t=parseInt(e[0]),i=e.length>1?parseInt(e[e.length-1]):void 0;return[t,i]},readings:function(n,e){let t=e||d.matrix.boxdiv,i=P.tds(n,t);var o=0;let c=new Set;for(let h of i){let g=h.textContent;g!==""&&(o++,c.add(g))}return[o,c.size]},attr:function(n,e){let t=P.firsttr();var i=[];for(let o of e)P.firsttd(o,t).dataset[n]==="true"?i.push([o,!0]):i.push([o,!1]);return new Map(i)},whichattr:function(n){return n.hasAttribute("n")?"n":n.hasAttribute("data-n")?"data-n":n.hasAttribute("data-ref")?"data-ref":!1},clauses:function(n,e=!1){let t=P.firsttext();var i=!1;let o=new Set;for(let c of n){let g=P.firstword(c,t).closest("cl");g?o.add(g):e&&(i=!0)}if(o.size===0)return!1;{let c=[...o].map(h=>{let g=h.querySelectorAll("w");return new Set([...g].map(m=>m.getAttribute("n")))});return i?[null].concat(c):c}},clausesToRemove:function(n,e,t=0){let i=new Set;for(let o of n){let c=new Set(o);for(let h of e)c.delete(h);c.size<=t&&i.add(o)}return[...i]},empty:function(){let n=new Set,e=[...P.trs()],t=e.map(c=>P.trWalker(c)),i=e[0].querySelector("td:last-of-type").dataset.n;for(let c=0;c<=i;c++){var o=!0;for(let h of t){let g=h.nextNode();o&&g.textContent!==""&&(o=!1)}o&&n.add(c)}return n},prevNonempty:function(n,e){for(let t=n;t>=0;t--)if(e[t].textContent!=="")return t;return!1},nextNonempty:function(n,e){for(let t=n;t<e.length;t++)if(e[t].textContent!=="")return t;return!1},setIntersection:function(...n){let e=n[0];return new Set([...e].filter(t=>{for(let i=1;i<n.length;i++)if(!n[i].has(t))return!1;return!0}))},setUnion:function(...n){return new Set(n.reduce((e,t)=>(e=[...e,...t],e),[]))},cursorPos(n){let e=window.getSelection().getRangeAt(0),t=e.cloneRange();t.selectNodeContents(n);let i=t.toString().length;return t.setEnd(e.endContainer,e.endOffset),[t.toString().length,i]}},le={undo:function(){return d.undo.length>0},redo:function(){return d.redo.length>0},checkbox:function(n,e){if(!le.anyhighlit())return!1;let t=e===!1?P.highlit():e,i=P.attr(n,t);for(let o of i.values())if(o===!1)return!1;return!0},grouped:function(){let n=P.highlit();if(!n)return!1;let e=P.firsttr();for(let t of n){let i=P.firsttd(t,e);if(i.classList.contains("group-start")||i.classList.contains("group-internal")||i.classList.contains("group-end"))return!0}return!1},oneGrouped:function(){let n=P.highlit();if(n.size===0)return!1;if(n.size===1){let e=P.firsttr(),t=P.firsttd([...n][0],e);return!!(t.classList.contains("group-start")||t.classList.contains("group-end")||t.classList.contains("group-internal"))}return!0},anyhighlit:function(){return!!d.matrix.boxdiv.querySelector("td.highlit")},manyhighlit:function(){return P.highlit().size>1},highlitcell:function(){return!!d.matrix.boxdiv.querySelector("td.highlitcell")},normalizedView:function(){return document.getElementById("views").classList.contains("normalized")},anyNormalized:function(){return d.matrix.boxdiv.querySelector(".lemma[data-normal]")},headerView:function(){return d.matrix.boxdiv.querySelector("tr.header").style.display!=="none"}},_e={tei:function(n){let e=d.xml.createElementNS(x.teins,"TEI");e.setAttribute("n",n);let t=P.firsttext().cloneNode(!0);e.appendChild(t);for(let i of P.words(!1,t))for(i.removeAttribute("lemma");i.firstChild;)i.firstChild.remove();return e},emptycell:function(n){let e=document.createElement("td");return e.className="lemma",e.dataset.n=n,e},emptyword:function(n,e=d.xml){let t=e.createElementNS(x.teins,"w");return t.setAttribute("n",n),t},emptywords:function(n,e,t){let i=e||d.maxlemma,o=t||0;for(let c=o;c<=i;c++){let h=_e.emptyword(c);n.appendChild(h)}},row:function(n,e){let t=document.createElement("tr"),i=document.createElement("th");i.scope="row",i.draggable=!0,i.appendChild(document.createTextNode(n)),i.addEventListener("dragstart",ie.thDragStart),t.dataset.n=n,t.appendChild(i);let o=P.firsttr();for(let c of o.querySelectorAll("td")){let h=document.createElement("td");h.dataset.n=c.dataset.n,h.className=c.className,e&&h.classList.add(e),t.appendChild(h)}return t}},G={create:function(n){let e=document.createElement("div");return e.classList.add("contextmenu"),e.style.left=n.clientX-12+"px",e.style.top=n.clientY-22+"px",e},remove:function(){for(let n of document.querySelectorAll(".contextmenu"))n.parentNode.removeChild(n)},show:function(n){document.body.appendChild(n)},populate:function(n,e){let t=document.createElement("ul");for(let i of e){let o=document.createElement("li");if(i.hasOwnProperty("cond")){let c=document.createRange().createContextualFragment('<form><input type="checkbox"'+(i.cond()?" checked":"")+"></form>");o.appendChild(c)}if(i.hasOwnProperty("toggle")){let c=i.toggle()?i.text:i.alt;o.appendChild(document.createTextNode(c))}else o.appendChild(document.createTextNode(i.text));o.addEventListener("mouseup",i.func),t.appendChild(o)}n.appendChild(t)}};class we{constructor(e){this.name=e,this.box=document.createElement("div"),this.box.classList.add("menubox");let t=document.createElement("div");t.classList.add("heading"),t.appendChild(document.createTextNode(e)),this.box.appendChild(t),t.addEventListener("mouseover",this.checkConditions.bind(this)),this.box.addEventListener("mouseup",this.click.bind(this)),this.items=new Map,this.conditions=new Map}populate(e){let t=this.box.querySelector("ul")||function(i){let o=document.createElement("ul");return i.box.appendChild(o),o}(this);for(let i of e){let o=document.createElement("li");if(i.hasOwnProperty("checkbox")){let c=document.createElement("form"),h=document.createElement("input");h.type="checkbox",h.addEventListener("click",g=>g.preventDefault()),c.appendChild(h),o.appendChild(c),o.appendChild(document.createTextNode(i.text)),this.conditions.set(h,i.checkbox)}else if(i.hasOwnProperty("toggle")){let c=document.createElement("span");c.appendChild(document.createTextNode(i.text)),c.dataset.text=i.text,c.dataset.alt=i.alt,this.conditions.set(c,i.toggle),o.appendChild(c)}else o.appendChild(document.createTextNode(i.text));i.hasOwnProperty("greyout")&&this.conditions.set(o,i.greyout),this.items.set(o,i.func),t.appendChild(o)}}click(e){let t=e.target.tagName==="LI"?e.target:e.target.closest("li");if(t&&!t.classList.contains("greyedout")){let i=this.items.get(t);i&&(i(e),this.checkConditions())}}checkConditions(){let e=new Map;for(let[t,i]of this.conditions){let o=e.get(i)||function(){let c=i();return e.set(i,c),c}();t.tagName==="INPUT"?t.checked=o:t.tagName==="SPAN"?o?t.textContent=t.dataset.alt:t.textContent=t.dataset.text:t.tagName==="LI"&&(o?t.classList.remove("greyedout"):t.classList.add("greyedout"))}}}class ke{constructor(e){this.name=e,this.script=0}show(){d.descs.appendChild(this.descbox),le.normalizedView()&&Se.showNormalized(this),d.viewdiv.appendChild(this.boxdiv),this.closed=!1}clear(){for(;this.boxdiv.firstChild;)this.boxdiv.removeChild(this.boxdiv.firstChild);this.svgcontainer&&(this.clearsvg(),this.boxdiv.appendChild(this.svgcontainer))}destroy(){d.viewdiv.removeChild(this.boxdiv),d.descs.removeChild(this.descbox);let e=d.trees.indexOf(this);e>-1&&d.trees.splice(e,1);let t=d.textboxes.indexOf(this);t>-1&&d.textboxes.splice(t,1),this.closed=!0,this.name==="Matrix"&&(document.getElementById("matrixmenu").style.display="block"),b(),A.rehighlight()}pullout(){this.destroy();let e="menubar=no,location=no,status=no,height=620,width=620,scrollbars=yes,centerscreen=yes",t=window.mainWindow?window.mainWindow.comboView.getWindows().length:d.windows.length,i=window.open("slave.html","slave"+t,e);i.mainWindow=window.mainWindow?window.mainWindow:window,i.startbox=this.text?{text:{name:this.name}}:{tree:this.name},i.mainWindow.comboView.addWindow(i)}makeDescBox(){let e=document.createElement("div"),t=document.createElement("div");t.classList.add("closer"),t.innerHTML="x",t.title="close";let i=document.createElement("div");i.classList.add("scripter"),i.innerHTML="A",i.title="change script",e.appendChild(t),e.appendChild(i),e.appendChild(document.createTextNode(this.desc)),this.descbox=e,t.addEventListener("click",this.destroy.bind(this)),i.addEventListener("click",this.cyclescript.bind(this))}cyclescript(){this.script=this.script+1,this.script===x.scripts.length&&(this.script=0);let e=this.descbox.querySelector(".scripter");this.script===0?e.innerHTML="A":e.innerHTML=lt[x.scripts[this.script]]("a"),x.scripts[this.script]==="grantha"?e.classList.add("grantha"):e.classList.remove("grantha"),this.updatescript()}updatescript(){let e=this.boxdiv.querySelectorAll(".lemma,.tree-lemma");for(let t of e){let i=t.dataset.hasOwnProperty("normal");if(!i&&t.textContent.trim()==="")continue;let o=function(){if(le.normalizedView()&&i){let h=document.createElement("span");return h.appendChild(document.createTextNode(t.dataset.normal)),h}else return t.IAST.cloneNode(!0)}(),c=this.script===0?o:Ot(o,x.scripts[this.script]);for(t.innerHTML="";c.firstChild;)t.appendChild(c.firstChild)}x.scripts[this.script]==="grantha"?this.boxdiv.classList.add("grantha"):this.boxdiv.classList.remove("grantha"),this.boxdiv.classList.contains("matrix")&&Se.xScrollToHighlit()}}class ee extends ke{constructor(e,t){super(`#${e} #${t}`);this.stemmaid=e,this.id=t,this.nexml=d.treelist.get(this.name).cloneNode(!0),this.desc=this.nexml.querySelector("tree").getAttribute("label")}init(){this.makeDescBox();let e=document.createElement("div");e.classList.add("tree-box");var t,i=0;do t="tree"+i,i++;while(document.getElementById(t));e.id=t,this.boxdiv=e,this.boxdiv.addEventListener("mouseover",ie.treeMouseover.bind(this)),this.boxdiv.addEventListener("click",ie.treeClick),this.svgcontainer=document.createElement("div"),this.svgcontainer.id=this.boxdiv.id+"container",this.boxdiv.appendChild(this.svgcontainer),this.boxdiv.myTree=this,this.calcPaths(),this.jiggleroot(),this.findLevels(),this.labelInternal()}show(){d.descs.appendChild(this.descbox),d.viewdiv.appendChild(this.boxdiv)}jiggleroot(){let e=this.nexml.evaluate('//nex:node[@root="true"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,t=this.nexml.evaluate('//nex:edge[@source="'+e.id+'"]|//nex:edge[@target="'+e.id+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);if(t.snapshotLength===3){var i,o;for(let c=0;c<t.snapshotLength;c++){let h=t.snapshotItem(c),g=h.getAttribute("source"),m=h.getAttribute("target"),k=this.nexml.evaluate('//nex:node[@id="'+g+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,R=this.nexml.evaluate('//nex:node[@id="'+m+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!k.hasAttribute("otu")&&!R.hasAttribute("otu")){i=h,o=m===e.id?"target":"source";break}}if(i){let c=this.nexml.createElementNS(e.namespaceURI,"node");c.id="fakeroot",c.setAttribute("root","true"),e.removeAttribute("root"),e.parentElement.insertBefore(c,e);let h=this.nexml.createElementNS(e.namespaceURI,"edge");h.id="newrootedge",h.setAttribute("length","0"),h.setAttribute("source","fakeroot"),h.setAttribute("target",e.id),e.parentElement.insertBefore(h,i),i.setAttribute(o,c.id)}}}findLevels(){let e=this.nexml.querySelectorAll("edge"),t=[...this.nexml.querySelectorAll("node[otu]")],i=this.nexml;this.levels=[t];let o=function(g,m){let k=g.map(ge=>ge.id),R=new Map,V=new Map,W=[];for(let ge of m){let be=ge.getAttribute("target"),xe=ge.getAttribute("source"),Ae=(()=>k.indexOf(be)!==-1?{ancestor:i.getElementById(xe),child:i.getElementById(be)}:k.indexOf(xe)!==-1?{ancestor:i.getElementById(be),child:i.getElementById(xe)}:null)();if(Ae!==null)if(V.has(Ae.ancestor)){let Te=V.get(Ae.ancestor);R.set(Ae.ancestor,[Te.child,Ae.child]),W.push(ge),W.push(Te.edge)}else V.set(Ae.ancestor,{child:Ae.child,edge:ge})}let ne=[...R.keys()],te=[...V.keys()].reduce((ge,be)=>(ne.indexOf(be)===-1&&ge.push(V.get(be).child),ge),[]),me=[...m].reduce((ge,be)=>(W.indexOf(be)===-1&&ge.push(be),ge),[]);return{match:R,remainder:[...new Set(te)],edges:me}};var c=t,h=e;do{let g=o(c,h);this.levels.push(g.match),c=[...g.match.keys(),...g.remainder],h=g.edges}while(h.length>0)}labelInternal(){for(let e of this.nexml.querySelectorAll("node:not([label])"))e.setAttribute("label",e.id)}fitch1(){let e=new Map;for(let t of this.levels[0]){let i=t.getAttribute("label"),o=this.boxdiv.querySelector(`span.tree-lemma[data-id="${i}"]`),c=o?[P.htmlreading(o)]:[];e.set(t,new Set(c))}for(let t=1;t<this.levels.length;t++)for(let[i,o]of this.levels[t]){let c=o.map(m=>e.get(m)),h=P.setIntersection(...c),g=h.size>0?h:P.setUnion(...c);e.set(i,g)}return e}fitch2(e){let t=[...this.nexml.querySelectorAll("node[otu]")],i=new Map;for(let[o]of this.levels[this.levels.length-1])i.set(o,e.get(o));for(let o=this.levels.length-1;o>1;o--)for(let[c,h]of this.levels[o]){let g=i.get(c);for(let m of h){if(t.indexOf(m)!==-1)continue;let k=e.get(m);if(k.size===1)i.set(m,k);else{let R=P.setIntersection(g,k),V=R.size>0?R:k;i.set(m,V)}}}return i}fitch(){let e=this.fitch1(),t=function(o){let c=[...o].map(h=>h.trim()===""?"_":h);return c.length===1?c[0]:"{"+c.join(", ")+"}"},i=this.fitch2(e);for(let[o,c]of i){let h=this.boxdiv.querySelector(`span.internal[data-key="${o.id}"]`);h.dataset.reconstructed=t(c)}}clearsvg(){for(;this.svgcontainer.firstChild;)this.svgcontainer.removeChild(this.svgcontainer.firstChild)}removecolors(){let e=this.nexml.querySelectorAll("node[color]");for(let t=0;t<e.snapshotLength;t++)e.snapshotItem(t).removeAttribute("color")}drawlines(e,t){if(this.removecolors(),e){let g=this.getPath(...e.split(";")).path,m=new Set;for(let k of g)m.add(k.getAttribute("target")),m.add(k.getAttribute("source"));for(let k of m){let R=this.nexml.evaluate('//nex:node[@id="'+k+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;R.getAttribute("root")||R.setAttribute("color",t)}}let i=parseInt(window.getComputedStyle(this.svgcontainer,null).width)-15,o=parseInt(window.getComputedStyle(this.boxdiv,null).height)-10,c=function(){return o<600?600:o}();L.PhyloCanvas.Render.Style.line.stroke="rgb(162,164,170)",this.phylocanvas=new L.PhyloCanvas({nexml:this.nexml,fileSource:!0},this.svgcontainer.id,i,c);let h=this.svgcontainer.querySelectorAll('path:not([stroke="#a2a4aa"])');for(let g of h)g.style.strokeWidth="2"}draw(){this.clear(),this.drawlines(),this.makeLabels()}clearLabels(){for(let e of this.boxdiv.firstChild.querySelectorAll("text"))e.parentElement.removeChild(e)}makeLabels(){let e=[...P.texts()],t=new Set(e.map(o=>o.parentNode.getAttribute("n"))),i=new Map(e.filter(o=>o.parentNode.hasAttribute("corresp")&&o.parentNode.getAttribute("corresp")===this.name).map(o=>[o.parentNode.getAttribute("select").replace(/^#/,""),o.parentNode.getAttribute("n")]));for(let o of this.boxdiv.firstChild.querySelectorAll("text")){let c=document.createElement("div");c.setAttribute("class","tree-div");let h=parseInt(o.getAttribute("x")-5),g=parseInt(o.getAttribute("y"))-15;c.style.left=h+"px",c.style.top=g+"px";let m=o.textContent.trim();t.has(m)?c.innerHTML=`<span class="witness inactive" data-key="${m}">${m}</span><span class="tree-lemma ${m}" data-id="${m}"></span>`:m!=="fakeroot"?i.has(m)?c.innerHTML=`<span class="internal reconstructed" data-key="${m}" data-label="${i.get(m)}">${i.get(m)}</span><span class="tree-lemma invisible ${m}" data-id="${m}" data-label="${i.get(m)}"></span>`:c.innerHTML=`<span class="internal" data-key="${m}">0</span>`:c.innerHTML=`<span class="internal" data-key="${m}"></span>`,o.parentElement.removeChild(o),this.boxdiv.appendChild(c)}}clearlemmata(){for(let e of this.boxdiv.querySelectorAll("span.tree-lemma"))e.innerHTML="",e.dataset.hasOwnProperty("normal")&&delete e.dataset.normal,e.IAST=e.cloneNode(!0)}populate(e,t){let i=P.texts();for(let h of i){let g=h.parentNode.getAttribute("n"),m=this.boxdiv.querySelector(`span.tree-lemma[data-id="${g}"]`)||this.boxdiv.querySelector(`span.tree-lemma[data-label="${g}"]`);if(!!m){if(m.hasOwnProperty("IAST")||(m.IAST=m.cloneNode(!0)),m.IAST.innerHTML="",t){let k=[],R=[];var o=!1;for(let V=e;V<=t;V++){let W=P.firstword(V,h);k.push(W.innerHTML),W.hasAttribute("lemma")&&(R[V-e]=W.getAttribute("lemma")),W.hasAttribute("emended")&&(o=!0)}if(m.IAST.appendChild(M.transformString(k.join(" ").replace(/\s+/g," ").trim(),M.sheets.tree)),R.length!==0){let V=k.slice(0).map((ne,te)=>R.hasOwnProperty(te)?R[te]:ne),W=document.createElement("span");W.appendChild(M.transformString(V.join(" ").replace(/\s+/g," ").trim(),M.sheets.tree)),m.dataset.normal=W.innerHTML}o?m.dataset.emended=!0:m.dataset.hasOwnProperty("emended")&&delete m.dataset.emended}else{let k=P.firstword(e,h);m.IAST.appendChild(M.transformString(k.innerHTML,M.sheets.tree)),k.hasAttribute("lemma")?m.dataset.normal=k.getAttribute("lemma"):delete m.dataset.normal,k.hasAttribute("emended")?m.dataset.emended=!0:m.dataset.hasOwnProperty("emended")&&delete m.dataset.emended}le.normalizedView()&&m.dataset.hasOwnProperty("normal")?m.innerHTML=m.dataset.normal:m.innerHTML=m.IAST.innerHTML}}let c=this.boxdiv.querySelectorAll(".inactive");for(let h of c)h.classList.remove("inactive");this.fitch()}calcPaths(){this.nodes=[],this.paths=[],this.longest={path:[]},this.nsResolver=this.nexml.createNSResolver(this.nexml.ownerDocument==null?this.nexml.documentElement:this.nexml.ownerDocument.documentElement);let e=this.nexml.evaluate("//nex:node[@label]",this.nexml,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);for(let t=0;t<e.snapshotLength;t++)this.nodes.push(e.snapshotItem(t));for(let t=0;t<this.nodes.length;t++){let i=this.nodes[t],o=i.getAttribute("label"),c=i.id;for(let h=t+1;h<this.nodes.length;h++){let g=this.nodes[h],m=g.getAttribute("label"),k=g.id;this.paths.push({nodes:[o,m],path:this.pathFind(c,k)})}}for(let t of Object.keys(this.paths))this.paths[t].path.length>this.longest.path.length&&(this.longest=this.paths[t])}pathFind(e,t,i){i||(i=[]);let o=this.nexml.evaluate('//nex:edge[@source="'+e+'"]|//nex:edge[@target="'+e+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);var c;for(let h=0;h<o.snapshotLength;h++){let g=o.snapshotItem(h);if(c=[g],i.indexOf(g.id)!=-1)continue;i.push(g.id);let m=g.getAttribute("source")!==e?g.getAttribute("source"):g.getAttribute("target");if(m===t)return c;if(!this.nexml.evaluate('//nex:node[@id="'+m+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.hasAttribute("otu")){let R=this.pathFind(m,t,i);if(R)return c.concat(R);continue}}return!1}analyzeVariants(e,t){let i=[],o=[],c=function(R){return R.startsWith("<lg")?M.transformString(R,M.sheets.lg).firstChild.data.slice(1):R},h=function(R){return R.map(V=>c(V)).join(" ").replace(/\s+/g," ").trim()},g=le.normalizedView()?function(R,V){let W=P.firstword(R,V);return W.hasAttribute("lemma")?W.getAttribute("lemma"):W.textContent}:function(R,V){return P.firstword(R,V).textContent};for(let R of P.texts()){let V=R.parentNode.getAttribute("n");if(!this.nexml.querySelector(`otu[label="${V}"]`))continue;let W=t?h(P.range(e,t).map(ne=>g(ne,R))):c(g(e,R));W===""?i.hasOwnProperty("")?i[""].push(V):i[""]=[V]:i.hasOwnProperty(W)?i[W].push(V):i[W]=[V]}let m={};for(let R of Object.keys(i)){var k={length:0,branch_length:0,paths:[]};if(i[R].length===1)k=!1;else for(let V=0;V<i[R].length;V++)for(let W=V+1;W<i[R].length;W++){let ne=this.getPath(i[R][V],i[R][W]);if(ne.hasOwnProperty("path")||alert(ne),ne.path.length===k.length){let te=this.calcBranchLength(ne.path);te===k.branch_length?k.paths.push(ne):te>k.branch_length&&(k={length:ne.path.length,branch_length:te,paths:[ne]})}else ne.path.length>k.length&&(k={length:ne.path.length,branch_length:this.calcBranchLength(ne.path),paths:[ne]})}m[R]=k}for(let R of Object.keys(o))m[R]=o[R];return m}getPath(e,t){for(let i of this.paths)if(i.nodes.indexOf(e)>-1&&i.nodes.indexOf(t)>-1)return i;return!1}calcBranchLength(e){return e.map(t=>t.getAttribute("length")).reduce((t,i)=>parseFloat(t)+parseFloat(i))}colourizeVariants(e,t){let i=this.analyzeVariants(e,t);for(let o of this.boxdiv.querySelectorAll("span.tree-lemma")){let c=i.hasOwnProperty(o.dataset.id)?i[i[o.dataset.id]]:i[o.textContent],h={red:252,green:70,blue:107},g={red:63,green:94,blue:251};c?(o.style.color=H(c.length/this.longest.path.length,g,h),o.dataset.length=c.length,o.dataset.branch_length=c.branch_length,o.dataset.nodes=c.paths[0].nodes.join(";")):(o.style.color=H(1/this.longest.path.length,g,h),o.dataset.length=0,o.dataset.branch_length=0,o.dataset.nodes=""),o.textContent.trim()===""?(o.innerHTML='<span lang="en">┬а┬а┬а</span>',o.style.backgroundColor=o.style.color):o.style.backgroundColor=""}}}class X extends ke{constructor(e){super(e);this.desc=e,this.text=P.firsttext(e)}init(){this.makeTextBox(),this.makeDescBox(),this.descbox.style.maxWidth="595px",this.descbox.style.paddingLeft="5px",this.boxdiv.addEventListener("mouseup",ie.textMouseup)}refresh(){this.boxdiv.innerHTML="",this.boxdiv.appendChild(M.sheets.lemma.transformToFragment(this.text,document)),F(this.boxdiv);for(let e of P.lemmata(!1,this.boxdiv))e.IAST=e.cloneNode(!0);this.updatescript()}makeTextBox(){let e=document.createElement("div");e.dataset.id=this.name,e.classList.add("text-box"),e.appendChild(M.sheets.lemma.transformToFragment(this.text,document)),F(e);for(let t of P.lemmata(!1,e))t.IAST=t.cloneNode(!0);this.boxdiv=e}}class ae extends ke{constructor(){super(name);this.desc="Matrix",this.name="Matrix",this.makeDescBox(),this.makeViewBox(),this.descbox.style.maxWidth="100vw",this.descbox.style.paddingLeft="5px"}init(){this.makeTable()}makeViewBox(){let e=document.createElement("div");e.classList.add("matrix"),e.dataset.id=this.name,this.boxdiv=e}makeTable(){let e=document.createElement("div");e.classList.add("scroller"),e.append(M.sheets.matrix.transformToFragment(d.xml,document));for(let m of e.getElementsByTagName("th"))m.addEventListener("dragstart",ie.thDragStart);e.addEventListener("dragenter",ie.trDragEnter),e.addEventListener("dragleave",ie.trDragLeave),e.addEventListener("dragover",m=>m.preventDefault()),e.addEventListener("drop",ie.trDragDrop),e.addEventListener("mousedown",ie.matrixMousedown);let t=document.createElement("tr");t.classList.add("header");let i=document.createElement("td");i.classList.add("anchor"),t.appendChild(i);let o=[...P.trs(e)],c=o.map(m=>P.trWalker(m)),h=P.tds(!1,o[0]);for(let m of h){let k=document.createElement("th");k.dataset.ref=m.dataset.n;let R=0,V=new Set;for(let me of c){let ge=me.nextNode();ge.IAST=ge.cloneNode(!0);let be=ge.textContent;be!==""&&(R++,V.add(be))}let W=R<2?R:`${R}(${V.size})`,ne=document.createElement("span");ne.classList.add("readings"),ne.appendChild(document.createTextNode(W)),k.appendChild(ne);let te=document.createElement("form");te.innerHTML='<div><input class="insignificant" title="insignificant" type="checkbox"'+(m.dataset.insignificant?"checked":"")+'></div><div><input class="binary" title="binary" type="checkbox"'+(m.dataset.binary?"checked":"")+"></div>",k.appendChild(te),t.appendChild(k)}let g=e.querySelector("tbody");g.insertBefore(t,g.firstChild),this.boxdiv.append(e)}}let Pe={fitch:function(){var n,e,t,i;let o={setIntersection:function(...m){let k=m[0];return new Set([...k].filter(R=>{for(let V=1;V<m.length;V++)if(!m[V].has(R))return!1;return!0}))},setUnion:function(...m){return new Set(m.reduce((k,R)=>(k=[...k,...R],k),[]))}},c=function(m,k){let R=new Map;for(let V of e[0]){let W=n.get(V),ne=W?[W[m]]:[];R.set(V,new Set(ne))}for(let V=1;V<e.length;V++)for(let[W,ne]of e[V]){let te=ne.map(be=>R.get(be)),me=o.setIntersection(...te);if(W===k&&me.size===1)return[...me][0];let ge=me.size>0?me:o.setUnion(...te);R.set(W,ge)}return R},h=function(m,k){let R=e[0],V=new Map;for(let W of e[e.length-1])V.set(W[0],m.get(W[0]));for(let W=e.length-1;W>1;W--)for(let[ne,te]of e[W]){let me=V.get(ne);for(let ge of te){if(R.indexOf(ge)!==-1)continue;let be=m.get(ge),xe=o.setIntersection(me,be),Ae=xe.size>0?xe:be;if(ge===k)return Ae;V.set(ge,Ae)}}return V.get(k)},g=function(m,k){let R=c(k,m);return typeof R=="string"?R:function(W){if(W.size===1)return[...W][0].trim();let ne=[...W].map(te=>te.trim()===""?"_":te);return ne.length===1?ne[0]:"{"+ne.join(", ")+"}"}(h(R,m))};onmessage=function(m){n=m.data.readings,e=m.data.levels,t=m.data.num,i=m.data.id,postMessage({n:t,result:g(i,t)})}}};return{slaveinit:function(){comboView.init(),window.startbox!==void 0&&(window.startbox.tree?f.tree(window.startbox.tree.stemmaid,window.startbox.tree.id):window.startbox.text&&f.text(window.startbox.text.name,window.startbox.text.map))},maininit:function(){document.getElementById("comboview").style.display="block",comboView.init(),u()},init:function(){d.viewdiv=document.getElementById("views"),d.descs=document.getElementById("descs"),d.viewdiv.addEventListener("click",ie.textClick),document.addEventListener("keydown",ie.keyDown,{capture:!0}),document.addEventListener("contextmenu",ie.rightClick),document.addEventListener("mouseup",G.remove)},getWindows:function(){return d.windows},addWindow:function(n){d.windows.push(n)},getViewdiv:function(){return d.viewdiv},getTrees:function(){return d.trees}}}();window.addEventListener("load",window.comboView.maininit);
//# sourceMappingURL=script.js.map
