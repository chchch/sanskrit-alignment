"use strict";var De={};De.defaults={skip_sgml:!1,syncope:!1};var Ft=De.schemes={balinese:{vowels:"á¬… á¬† á¬‡ á¬ˆ á¬‰ á¬Š á¬‹ á¬Œ á¬ á¬  á¬ á¬  á¬‘ á¬’".split(" "),vowel_marks:"á¬µ á¬¶ á¬· á¬¸ á¬¹ á¬º á¬» á¬¼ á¬½ á­‚ á¬¾ á¬¿ á­ƒ á­€ á­".split(" "),other_marks:["á¬‚","á¬„","á¬",""],virama:["á­„"],consonants:"á¬“ á¬” á¬• á¬– á¬— á¬˜ á¬™ á¬š á¬› á¬œ á¬ á¬ á¬Ÿ á¬  á¬¡ á¬¢ á¬£ á¬¤ á¬¥ á¬¦ á¬§ á¬¨ á¬© á¬ª á¬« á¬¬ á¬­ á¬® á¬¯ á¬° á¬± á¬² á¬³".split(" "),symbols:"á­ á­‘ á­’ á­“ á­” á­• á­– á­— á­˜ á­™   á­ á­Ÿ".split(" "),zwj:["â€"],skip:[""]},bengali:{vowels:"à¦… à¦† à¦‡ à¦ˆ à¦‰ à¦Š à¦‹ à§  à¦Œ à§¡  à¦ à¦  à¦“ à¦”".split(" "),vowel_marks:"à¦¾ à¦¿ à§€ à§ à§‚ à§ƒ à§„ à§¢ à§£  à§‡ à§ˆ  à§‹ à§Œ".split(" "),other_marks:"à¦‚ à¦ƒ à¦".split(" "),virama:["à§"],consonants:"à¦• à¦– à¦— à¦˜ à¦™ à¦š à¦› à¦œ à¦ à¦ à¦Ÿ à¦  à¦¡ à¦¢ à¦£ à¦¤ à¦¥ à¦¦ à¦§ à¦¨ à¦ª à¦« à¦¬ à¦­ à¦® à¦¯ à¦° à¦² à¦¬ à¦¶ à¦· à¦¸ à¦¹ à¤³ à¦•à§à¦· à¦œà§à¦".split(" "),symbols:"à§¦ à§§ à§¨ à§© à§ª à§« à§¬ à§­ à§® à§¯ à¥ à¦½ à¥¤ à¥¥".split(" "),other:"    à¦¡ à¦¢  à¦¯ ".split(" ")},newa:{vowels:["ğ‘€","ğ‘","ğ‘‚","ğ‘ƒ","ğ‘„","ğ‘…","ğ‘†","ğ‘‡","ğ‘ˆ","ğ‘‰","","ğ‘Š","ğ‘‹","","ğ‘Œ","ğ‘"],vowel_marks:["ğ‘µ","ğ‘¶","ğ‘·","ğ‘¸","ğ‘¹","ğ‘º","ğ‘»","ğ‘¼","ğ‘½","","ğ‘¾","ğ‘¿","","ğ‘‘€","ğ‘‘"],other_marks:["ğ‘‘„","ğ‘‘…","ğ‘‘ƒ","ğ‘‘ ","ğ‘‘¡",""],virama:["ğ‘‘‚"],consonants:["ğ‘","ğ‘","ğ‘","ğ‘‘","ğ‘’","ğ‘”","ğ‘•","ğ‘–","ğ‘—","ğ‘˜","ğ‘š","ğ‘›","ğ‘œ","ğ‘","ğ‘","ğ‘Ÿ","ğ‘ ","ğ‘¡","ğ‘¢","ğ‘£","ğ‘¥","ğ‘¦","ğ‘§","ğ‘¨","ğ‘©","ğ‘«","ğ‘¬","ğ‘®","ğ‘°","ğ‘±","ğ‘²","ğ‘³","ğ‘´"],symbols:["ğ‘‘","ğ‘‘‘","ğ‘‘’","ğ‘‘“","ğ‘‘”","ğ‘‘•","ğ‘‘–","ğ‘‘—","ğ‘‘˜","ğ‘‘™","ğ‘‘‰","ğ‘‘‡","ğ‘‘‹","ğ‘‘Œ"]},sarada:{vowels:["ğ‘†ƒ","ğ‘†„","ğ‘†…","ğ‘††","ğ‘†‡","ğ‘†ˆ","ğ‘†‰","ğ‘†Š","ğ‘†‹","ğ‘†Œ","","ğ‘†","ğ‘†","","ğ‘†","ğ‘†"],vowel_marks:["ğ‘†³","ğ‘†´","ğ‘†µ","ğ‘†¶","ğ‘†·","ğ‘†¸","ğ‘†¹","ğ‘†º","ğ‘†»","","ğ‘†¼","ğ‘†½","","ğ‘†¾","ğ‘†¿"],other_marks:["ğ‘†","ğ‘†‚","ğ‘†€","ğ‘‡‚","ğ‘‡ƒ"],virama:["ğ‘‡€"],consonants:["ğ‘†‘","ğ‘†’","ğ‘†“","ğ‘†”","ğ‘†•","ğ‘†–","ğ‘†—","ğ‘†˜","ğ‘†™","ğ‘†š","ğ‘†›","ğ‘†œ","ğ‘†","ğ‘†","ğ‘†Ÿ","ğ‘† ","ğ‘†¡","ğ‘†¢","ğ‘†£","ğ‘†¤","ğ‘†¥","ğ‘†¦","ğ‘†§","ğ‘†¨","ğ‘†©","ğ‘†ª","ğ‘†«","ğ‘†¬","ğ‘†®","ğ‘†¯","ğ‘†°","ğ‘†±","ğ‘†²","ğ‘†­"],symbols:["ğ‘‡","ğ‘‡‘","ğ‘‡’","ğ‘‡“","ğ‘‡”","ğ‘‡•","ğ‘‡–","ğ‘‡—","ğ‘‡˜","ğ‘‡™","ğ‘‡„","ğ‘‡","ğ‘‡…","ğ‘‡†"]},devanagari:{vowels:"à¤… à¤† à¤‡ à¤ˆ à¤‰ à¤Š à¤‹ à¥  à¤Œ à¥¡ à¤ à¤ à¤ à¤’ à¤“ à¤” à¤ à¤ à¤“".split(" "),vowel_marks:"à¤¾ à¤¿ à¥€ à¥ à¥‚ à¥ƒ à¥„ à¥¢ à¥£ à¥† à¥‡ à¥ˆ à¥Š à¥‹ à¥Œ à¥ à¥à¥‡ à¥à¤¾ à¥à¥‹ à¥† à¥".split(" "),other_marks:"à¤‚ à¤ƒ à¤ á³µ á³¶ ê£½".split(" "),virama:["à¥"],consonants:"à¤• à¤– à¤— à¤˜ à¤™ à¤š à¤› à¤œ à¤ à¤ à¤Ÿ à¤  à¤¡ à¤¢ à¤£ à¤¤ à¤¥ à¤¦ à¤§ à¤¨ à¤ª à¤« à¤¬ à¤­ à¤® à¤¯ à¤° à¤² à¤µ à¤¶ à¤· à¤¸ à¤¹ à¤³".split(" "),symbols:"à¥¦ à¥§ à¥¨ à¥© à¥ª à¥« à¥¬ à¥­ à¥® à¥¯ à¥ à¤½ à¥¤ à¥¥".split(" "),zwj:["â€"],skip:[""],accent:["à¥‘","à¥’"],combo_accent:"à¤ƒà¥‘ à¤ƒà¥’ à¤‚à¥‘ à¤‚à¥’".split(" "),candra:["à¥…"],other:"à¤•à¤¼ à¤–à¤¼ à¤—à¤¼ à¤œà¤¼ à¤¡à¤¼ à¤¢à¤¼ à¤«à¤¼ à¤¯à¤¼ à¤±".split(" ")},gujarati:{vowels:"àª… àª† àª‡ àªˆ àª‰ àªŠ àª‹ à«  àªŒ à«¡  àª àª  àª“ àª”".split(" "),vowel_marks:"àª¾ àª¿ à«€ à« à«‚ à«ƒ à«„ à«¢ à«£  à«‡ à«ˆ  à«‹ à«Œ".split(" "),other_marks:"àª‚ àªƒ àª".split(" "),virama:["à«"],consonants:"àª• àª– àª— àª˜ àª™ àªš àª› àªœ àª àª àªŸ àª  àª¡ àª¢ àª£ àª¤ àª¥ àª¦ àª§ àª¨ àªª àª« àª¬ àª­ àª® àª¯ àª° àª² àªµ àª¶ àª· àª¸ àª¹ àª³".split(" "),symbols:"à«¦ à«§ à«¨ à«© à«ª à«« à«¬ à«­ à«® à«¯ à« àª½ à«¤ à«¥".split(" "),candra:["à«…"]},gurmukhi:{vowels:"à¨… à¨† à¨‡ à¨ˆ à¨‰ à¨Š      à¨ à¨  à¨“ à¨”".split(" "),vowel_marks:"à¨¾ à¨¿ à©€ à© à©‚      à©‡ à©ˆ  à©‹ à©Œ".split(" "),other_marks:"à¨‚ à¨ƒ à¨".split(" "),virama:["à©"],consonants:"à¨• à¨– à¨— à¨˜ à¨™ à¨š à¨› à¨œ à¨ à¨ à¨Ÿ à¨  à¨¡ à¨¢ à¨£ à¨¤ à¨¥ à¨¦ à¨§ à¨¨ à¨ª à¨« à¨¬ à¨­ à¨® à¨¯ à¨° à¨² à¨µ à¨¶ à¨¶ à¨¸ à¨¹ à¨³".split(" "),symbols:"à©¦ à©§ à©¨ à©© à©ª à©« à©¬ à©­ à©® à©¯ à¥ à¤½ à¥¤ à¥¥".split(" "),other:" à¨– à¨— à¨œ à¨¡  à¨«  ".split(" ")},kannada:{vowels:"à²… à²† à²‡ à²ˆ à²‰ à²Š à²‹ à³  à²Œ à³¡ à² à² à² à²’ à²“ à²”".split(" "),vowel_marks:"à²¾ à²¿ à³€ à³ à³‚ à³ƒ à³„ à³¢ à³£ à³† à³‡ à³ˆ à³Š à³‹ à³Œ".split(" "),other_marks:"à²‚ à²ƒ à¤".split(" "),virama:["à³"],consonants:"à²• à²– à²— à²˜ à²™ à²š à²› à²œ à² à² à²Ÿ à²  à²¡ à²¢ à²£ à²¤ à²¥ à²¦ à²§ à²¨ à²ª à²« à²¬ à²­ à²® à²¯ à²° à²² à²µ à²¶ à²· à²¸ à²¹ à²³".split(" "),symbols:"à³¦ à³§ à³¨ à³© à³ª à³« à³¬ à³­ à³® à³¯ à²“à²‚ à²½ à¥¤ à¥¥".split(" "),other:"      à²«  à²±".split(" ")},malayalam:{vowels:"à´… à´† à´‡ à´ˆ à´‰ à´Š à´‹ àµ  à´Œ àµ¡ à´ à´ à´ à´’ à´“ à´”".split(" "),vowel_marks:"à´¾ à´¿ àµ€ àµ àµ‚ àµƒ àµ„ àµ¢ àµ£ àµ† àµ‡ àµˆ àµŠ àµ‹ àµŒ".split(" "),other_marks:"à´‚ à´ƒ à¤".split(" "),virama:["àµ"],consonants:"à´• à´– à´— à´˜ à´™ à´š à´› à´œ à´ à´ à´Ÿ à´  à´¡ à´¢ à´£ à´¤ à´¥ à´¦ à´§ à´¨ à´ª à´« à´¬ à´­ à´® à´¯ à´° à´² à´µ à´¶ à´· à´¸ à´¹ à´³".split(" "),symbols:"àµ¦ àµ§ àµ¨ àµ© àµª àµ« àµ¬ àµ­ àµ® àµ¯ à´“à´‚ à´½ à¥¤ à¥¥".split(" "),other:"        à´±".split(" ")},oriya:{vowels:"à¬… à¬† à¬‡ à¬ˆ à¬‰ à¬Š à¬‹ à­  à¬Œ à­¡  à¬ à¬  à¬“ à¬”".split(" "),vowel_marks:"à¬¾ à¬¿ à­€ à­ à­‚ à­ƒ à­„ à­¢ à­£  à­‡ à­ˆ  à­‹ à­Œ".split(" "),other_marks:"à¬‚ à¬ƒ à¬".split(" "),virama:["à­"],consonants:"à¬• à¬– à¬— à¬˜ à¬™ à¬š à¬› à¬œ à¬ à¬ à¬Ÿ à¬  à¬¡ à¬¢ à¬£ à¬¤ à¬¥ à¬¦ à¬§ à¬¨ à¬ª à¬« à¬¬ à¬­ à¬® à¬¯ à¬° à¬² à¬µ à¬¶ à¬· à¬¸ à¬¹ à¬³".split(" "),symbols:"à­¦ à­§ à­¨ à­© à­ª à­« à­¬ à­­ à­® à­¯ à¬“à¬‚ à¬½ à¥¤ à¥¥".split(" "),other:"    à¬¡ à¬¢  à¬¯ ".split(" ")},tamil:{vowels:"à®… à®† à®‡ à®ˆ à®‰ à®Š     à® à® à® à®’ à®“ à®”".split(" "),vowel_marks:"à®¾ à®¿ à¯€ à¯ à¯‚     à¯† à¯‡ à¯ˆ à¯Š à¯‹ à¯Œ".split(" "),other_marks:"à®‚ à®ƒ ".split(" "),virama:["à¯"],consonants:"à®• à®• à®• à®• à®™ à®š à®š à®œ à®š à® à®Ÿ à®Ÿ à®Ÿ à®Ÿ à®£ à®¤ à®¤ à®¤ à®¤ à®¨ à®ª à®ª à®ª à®ª à®® à®¯ à®° à®² à®µ à®¶ à®· à®¸ à®¹ à®³".split(" "),symbols:"à¯¦ à¯§ à¯¨ à¯© à¯ª à¯« à¯¬ à¯­ à¯® à¯¯ à¯ à¤½ à¥¤ à¥¥".split(" "),other:"        à®±".split(" ")},telugu:{vowels:"à°… à°† à°‡ à°ˆ à°‰ à°Š à°‹ à±  à°Œ à±¡ à° à° à° à°’ à°“ à°”".split(" "),vowel_marks:"à°¾ à°¿ à±€ à± à±‚ à±ƒ à±„ à±¢ à±£ à±† à±‡ à±ˆ à±Š à±‹ à±Œ".split(" "),other_marks:"à°‚ à°ƒ à° á³² á³²".split(" "),virama:["à±"],consonants:"à°• à°– à°— à°˜ à°™ à°š à°› à°œ à° à° à°Ÿ à°  à°¡ à°¢ à°£ à°¤ à°¥ à°¦ à°§ à°¨ à°ª à°« à°¬ à°­ à°® à°¯ à°° à°² à°µ à°¶ à°· à°¸ à°¹ à°³".split(" "),symbols:"à±¦ à±§ à±¨ à±© à±ª à±« à±¬ à±­ à±® à±¯ à°“à°‚ à°½ à¥¤ à¥¥".split(" "),other:"        à°±".split(" ")},iast:{vowels:"a Ä i Ä« u Å« á¹› á¹ á¸· á¸¹ áº½ e ai Ãµ o au Ãª aÃ® Ã´ aÃ»".split(" "),other_marks:["á¹ƒ","á¸¥","mÌ","áº–","á¸«","oá¸¿"],virama:[""],consonants:"k kh g gh á¹… c ch j jh Ã± á¹­ á¹­h á¸ á¸h á¹‡ t th d dh n p ph b bh m y r l v Å› á¹£ s h á¸»".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oá¹ ' | ||".split(" ")},iso:{vowels:"a Ä i Ä« u Å« rÌ¥ rÌ¥Ì„ lÌ¥ lÌ¥Ì„ áº½ e ai Ãµ o au Ãª aÃ® Ã´ aÃ»".split(" "),other_marks:["á¹","á¸¥","mÌ","oá¸¿"],virama:[""],consonants:"k kh g gh á¹… c ch j jh Ã± á¹­ á¹­h á¸ á¸h á¹‡ t th d dh n p ph b bh m y r l v Å› á¹£ s h á¸· ká¹£ jÃ±".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 omÌ ' | ||".split(" ")},itrans:{vowels:"a A i I u U RRi RRI LLi LLI  e ai  o au".split(" "),other_marks:["M","H",".N"],virama:[""],consonants:"k kh g gh ~N ch Ch j jh ~n T Th D Dh N t th d dh n p ph b bh m y r l v sh Sh s h L kSh j~n".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM .a | ||".split(" "),candra:[".c"],zwj:["{}"],skip:"_",accent:["\\'","\\_"],combo_accent:"\\'H \\_H \\'M \\_M".split(" "),other:"q K G z .D .Dh f Y R".split(" ")},hk:{vowels:"a A i I u U R RR lR lRR  e ai  o au".split(" "),other_marks:"M H ~".split(" "),virama:[""],consonants:"k kh g gh G c ch j jh J T Th D Dh N t th d dh n p ph b bh m y r l v z S s h L kS jJ".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM ' | ||".split(" ")},slp1:{vowels:"a A i I u U f F x X áº½ e E Ãµ o O Ãª ÃŠ Ã´ Ã”".split(" "),other_marks:"M H mÌ áº– á¸« oá¸¿".split(" "),virama:[""],consonants:"k K g G N c C j J Y w W q Q R t T d D n p P b B m y r l v S z s h L".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oá¹ ' | ||".split(" ")},velthuis:{vowels:"a aa i ii u uu .r .rr .li .ll  e ai  o au".split(" "),other_marks:".m .h ".split(" "),virama:[""],consonants:'k kh g gh "n c ch j jh ~n .t .th .d .d .n t th d dh n p ph b bh m y r l v ~s .s s h L k.s j~n'.split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 o.m ' | ||".split(" ")},wx:{vowels:"a A i I u U q Q L   e E  o O".split(" "),other_marks:"M H z".split(" "),virama:[""],consonants:"k K g G f c C j J F t T d D N w W x X n p P b B m y r l v S R s h  kR jF".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oM ' | ||".split(" ")}},x1={},Jt={iast:{á¹›:["rÌ¥"],á¹ƒ:["á¹"]},itrans:{A:["aa"],I:["ii","ee"],U:["uu","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],"j~n":["GY","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":"\\_.m \\_.n \\`M \\`.m \\`.n".split(" "),".a":["~"],"|":["."],"||":[".."],z:["J"]}},Rt={};De.isRomanScheme=function(x){return x1.hasOwnProperty(x)};De.addBrahmicScheme=function(x,u){De.schemes[x]=u};De.addRomanScheme=function(x,u){"vowel_marks"in u||(u.vowel_marks=u.vowels.slice(1)),De.schemes[x]=u,x1[x]=!0};var b1=function(x){var u={};for(var k in x)!x.hasOwnProperty(k)||(u[k]=x[k].slice(0));return u};(function(){var x=Ft.kolkata=b1(Ft.iast),u="iast itrans hk kolkata slp1 velthuis wx".split(" ");x.vowels="a Ä i Ä« u Å« á¹› á¹ á¸· á¸¹ e Ä“ ai o Å au".split(" ");for(var k=0,S;S=u[k];k++)De.addRomanScheme(S,Ft[S]);var v=b1(Ft.itrans);v.vowels="a A i I u U Ri RRI LLi LLi e E ai o O au".split(" "),v.vowel_marks=v.vowels.slice(1),Jt.itrans_dravidian=Jt.itrans,De.addRomanScheme("itrans_dravidian",v)})();var U1=function(x,u){var k=Jt[x]||{},S={},v=De.schemes[x],R={},q=[],d={},f=De.schemes[u];for(var C in v)if(!!v.hasOwnProperty(C)){var T=v[C],H=f[C];if(H!==void 0)for(var z=0;z<T.length;z++){var L=T[z],D=H[z],O=k[L]||[],W=O.length,te=0;for(q.push(L.length),te=0;te<W;te++)q.push(O[te].length);if(C==="vowel_marks"||C==="virama")for(d[L]=D,te=0;te<W;te++)d[O[te]]=D;else{for(R[L]=D,te=0;te<W;te++)R[O[te]]=D;if(C==="consonants"||C==="other")for(S[L]=D,te=0;te<W;te++)S[O[te]]=D}}}return{consonants:S,fromRoman:De.isRomanScheme(x),letters:R,marks:d,maxTokenLength:Math.max.apply(Math,q),toRoman:De.isRomanScheme(u),virama:f.virama}},G1=function(x,u,k){for(var S=[],v=u.consonants,R=x.length,q=!1,d=u.letters,f=u.marks,C=u.maxTokenLength,T=k.skip_sgml,H=k.syncope,z,L,D="",O=u.toRoman,W=u.virama,te=!1,j=!1,$=!1,oe=0,he;(he=x.charAt(oe))||D;oe++){var pe=C-D.length;if(!(pe>0&&oe<R&&(D+=he,pe>1)))for(var U=0;U<C;U++){var re=D.substr(0,C-U);if(te===!0)te=re!==">";else if(re==="<")te=T;else if(re==="##"){$=!$,D=D.substr(2);break}if(j=te||$,(z=d[re])!==void 0&&!j){O?S.push(z):(q?(L=f[re])?S.push(L):re!=="a"&&(S.push(W),S.push(z)):S.push(z),q=re in v),D=D.substr(C-U);break}else U===C-1&&(q&&(q=!1,H||S.push(W)),S.push(re),D=D.substr(1))}}return q&&!H&&S.push(W),S.join("")},W1=function(x,u){for(var k=[],S=u.consonants,v=!1,R=!1,q=u.letters,d=u.marks,f,C=u.toRoman,T=!1,H=0,z;z=x.charAt(H);H++){if(z==="#"){v?(T=!T,v=!1):v=!0,R&&(k.push("a"),R=!1);continue}else if(T){k.push(z);continue}(f=d[z])!==void 0?(k.push(f),R=!1):(v&&(k.push("#"),v=!1),R&&(k.push("a"),R=!1),(f=q[z])?(k.push(f),R=C&&z in S):k.push(z))}return R&&k.push("a"),k.join("")};De.t=function(x,u,k,S){S=S||{};var v=Rt.options||{},R=De.defaults,q=Rt.from===u&&Rt.to===k,d;for(var f in R)if(R.hasOwnProperty(f)){var C=R[f];f in S&&(C=S[f]),S[f]=C,C!==v[f]&&(q=!1)}return q?d=Rt.map:(d=U1(u,k,S),Rt={from:u,map:d,options:S,to:k}),u==="itrans"&&(x=x.replace(/\{\\m\+\}/g,".h.N"),x=x.replace(/\.h/g,""),x=x.replace(/\\([^'`_]|$)/g,"##$1##")),d.fromRoman?G1(x,d,S):W1(x,d,S)};var Qt={};(function(x){"use strict";x.__type__="csv";var u=typeof jQuery!="undefined"&&jQuery.Deferred||typeof _!="undefined"&&_.Deferred||function(){var d,f,C=new Promise(function(T,H){d=T,f=H});return{resolve:d,reject:f,promise:function(){return C}}};x.fetch=function(d){var f=new u;if(d.file){var C=new FileReader,T=d.encoding||"UTF-8";C.onload=function(L){var D=x.extractFields(x.parse(L.target.result,d),d);D.useMemoryStore=!0,D.metadata={filename:d.file.name},f.resolve(D)},C.onerror=function(L){f.reject({error:{message:"Failed to load file. Code: "+L.target.error.code}})},C.readAsText(d.file,T)}else if(d.data){var H=x.extractFields(x.parse(d.data,d),d);H.useMemoryStore=!0,f.resolve(H)}else if(d.url){var z=window.fetch||function(L){var D=jQuery.get(L),O={then:function(W){return D.done(W),O},catch:function(W){return D.fail(W),O}};return O};z(d.url).then(function(L){return L.text?L.text():L}).then(function(L){var D=x.extractFields(x.parse(L,d),d);D.useMemoryStore=!0,f.resolve(D)}).catch(function(L,D){f.reject({error:{message:"Failed to load file. "+L.statusText+". Code: "+L.status,request:L}})})}return f.promise()},x.extractFields=function(d,f){return f.noHeaderRow!==!0&&d.length>0?{fields:d[0],records:d.slice(1)}:{records:d}},x.normalizeDialectOptions=function(d){var f={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var C in d)C==="trim"?f.skipinitialspace=d.trim:f[C.toLowerCase()]=d[C];return f},x.parse=function(d,f){(!f||f&&!f.lineterminator)&&(d=x.normalizeLineTerminator(d,f));var C=x.normalizeDialectOptions(f);d=q(d,C.lineterminator);var T="",H=!1,z=!1,L="",D=[],O=[],W,te;for(te=function(j){return z!==!0&&(j===""?j=null:C.skipinitialspace===!0&&(j=R(j)),k.test(j)?j=parseInt(j,10):S.test(j)&&(j=parseFloat(j,10))),j},W=0;W<d.length;W+=1)T=d.charAt(W),H===!1&&(T===C.delimiter||T===C.lineterminator)?(L=te(L),D.push(L),T===C.lineterminator&&(O.push(D),D=[]),L="",z=!1):T!==C.quotechar?L+=T:H?d.charAt(W+1)===C.quotechar?(L+=C.quotechar,W+=1):H=!1:(H=!0,z=!0);return L=te(L),D.push(L),O.push(D),C.skipinitialrows&&(O=O.slice(C.skipinitialrows)),O},x.normalizeLineTerminator=function(d,f){return f=f||{},f.lineterminator?d:d.replace(/(\r\n|\n|\r)/gm,`
`)},x.objectToArray=function(d){for(var f=[],C=[],T=[],H=0;H<d.fields.length;H++){var z=d.fields[H].id;T.push(z);var L=d.fields[H].label?d.fields[H].label:z;C.push(L)}f.push(C);for(var H=0;H<d.records.length;H++){for(var D=[],O=d.records[H],W=0;W<T.length;W++)D.push(O[T[W]]);f.push(D)}return f},x.serialize=function(d,f){var C=null;d instanceof Array?C=d:C=x.objectToArray(d);var T=x.normalizeDialectOptions(f),H="",z="",L="",D="",O,W,te;for(te=function(j){return j===null?j="":typeof j=="string"&&v.test(j)?(T.doublequote&&(j=j.replace(/"/g,'""')),j=T.quotechar+j+T.quotechar):typeof j=="number"&&(j=j.toString(10)),j},O=0;O<C.length;O+=1)for(H=C[O],W=0;W<H.length;W+=1)z=te(H[W]),W===H.length-1?(L+=z,D+=L+T.lineterminator,L=""):L+=z+T.delimiter,z="";return D};var k=/^\d+$/,S=/^\d*\.\d+$|^\d+\.\d*$/,v=/^\s|\s$|,|"|\n/,R=function(){return String.prototype.trim?function(d){return d.trim()}:function(d){return d.replace(/^\s*/,"").replace(/\s*$/,"")}}();function q(d,f){return d.charAt(d.length-f.length)!==f?d:d.substring(0,d.length-f.length)}})(Qt);function X1(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function J1(x,u,k){return k={path:u,exports:{},require:function(S,v){return Y1(S,v==null?k.path:v)}},x(k,k.exports),k.exports}function Y1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Q1=J1(function(x,u){(function(k,S){x.exports=S()})(window,function(){return function(k){var S={};function v(R){if(S[R])return S[R].exports;var q=S[R]={i:R,l:!1,exports:{}};return k[R].call(q.exports,q,q.exports,v),q.l=!0,q.exports}return v.m=k,v.c=S,v.d=function(R,q,d){v.o(R,q)||Object.defineProperty(R,q,{enumerable:!0,get:d})},v.r=function(R){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})},v.t=function(R,q){if(1&q&&(R=v(R)),8&q||4&q&&typeof R=="object"&&R&&R.__esModule)return R;var d=Object.create(null);if(v.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:R}),2&q&&typeof R!="string")for(var f in R)v.d(d,f,function(C){return R[C]}.bind(null,f));return d},v.n=function(R){var q=R&&R.__esModule?function(){return R.default}:function(){return R};return v.d(q,"a",q),q},v.o=function(R,q){return Object.prototype.hasOwnProperty.call(R,q)},v.p="",v(v.s=1)}([function(k,S,v){var R,q;R=[v(2)],(q=function(d){function f(e){if(f.is(e,"function"))return C?e():d.on("raphael.DOMload",e);if(f.is(e,o))return f._engine.create[j](f,e.splice(0,3+f.is(e[0],s))).add(e);var r=Array.prototype.slice.call(arguments,0);if(f.is(r[r.length-1],"function")){var a=r.pop();return C?a.call(f._engine.create[j](f,r)):d.on("raphael.DOMload",function(){a.call(f._engine.create[j](f,r))})}return f._engine.create[j](f,arguments)}f.version="2.3.0",f.eve=d;var C,T,H=/[, ]+/,z={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},L=/\{(\d+)\}/g,D="hasOwnProperty",O={doc:document,win:window},W={was:Object.prototype[D].call(O.win,"Raphael"),is:O.win.Raphael},te=function(){this.ca=this.customAttributes={}},j="apply",$="concat",oe="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,he="",pe=" ",U=String,re="split",I="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[re](pe),_e={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},xe=U.prototype.toLowerCase,me=Math,Se=me.max,X=me.min,we=me.abs,Ce=me.pow,ee=me.PI,s="number",o="array",h=Object.prototype.toString,t=(f._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),n={NaN:1,Infinity:1,"-Infinity":1},i=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,l=me.round,p=parseFloat,m=parseInt,b=U.prototype.toUpperCase,N=f._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},B=f._availableAnimAttrs={blur:s,"clip-rect":"csv",cx:s,cy:s,fill:"colour","fill-opacity":s,"font-size":s,height:s,opacity:s,path:"path",r:s,rx:s,ry:s,stroke:"colour","stroke-opacity":s,"stroke-width":s,transform:"transform",width:s,x:s,y:s},V=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,G={hs:1,rg:1},K=/,?([achlmqrstvxz]),?/gi,se=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,de=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ge=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,be=(f._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ve=function(e,r){return p(e)-p(r)},Ae=function(e){return e},ke=f._rectPath=function(e,r,a,c,g){return g?[["M",e+g,r],["l",a-2*g,0],["a",g,g,0,0,1,g,g],["l",0,c-2*g],["a",g,g,0,0,1,-g,g],["l",2*g-a,0],["a",g,g,0,0,1,-g,-g],["l",0,2*g-c],["a",g,g,0,0,1,g,-g],["z"]]:[["M",e,r],["l",a,0],["l",0,c],["l",-a,0],["z"]]},Le=function(e,r,a,c){return c==null&&(c=a),[["M",e,r],["m",0,-c],["a",a,c,0,1,1,0,2*c],["a",a,c,0,1,1,0,-2*c],["z"]]},Ne=f._getPath={path:function(e){return e.attr("path")},circle:function(e){var r=e.attrs;return Le(r.cx,r.cy,r.r)},ellipse:function(e){var r=e.attrs;return Le(r.cx,r.cy,r.rx,r.ry)},rect:function(e){var r=e.attrs;return ke(r.x,r.y,r.width,r.height,r.r)},image:function(e){var r=e.attrs;return ke(r.x,r.y,r.width,r.height)},text:function(e){var r=e._getBBox();return ke(r.x,r.y,r.width,r.height)},set:function(e){var r=e._getBBox();return ke(r.x,r.y,r.width,r.height)}},Me=f.mapPath=function(e,r){if(!r)return e;var a,c,g,w,P,A,E;for(g=0,P=(e=St(e)).length;g<P;g++)for(w=1,A=(E=e[g]).length;w<A;w+=2)a=r.x(E[w],E[w+1]),c=r.y(E[w],E[w+1]),E[w]=a,E[w+1]=c;return e};if(f._g=O,f.type=O.win.SVGAngle||O.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",f.type=="VML"){var Be,Oe=O.doc.createElement("div");if(Oe.innerHTML='<v:shape adj="1"/>',(Be=Oe.firstChild).style.behavior="url(#default#VML)",!Be||typeof Be.adj!="object")return f.type=he;Oe=null}function qe(e){if(typeof e=="function"||Object(e)!==e)return e;var r=new e.constructor;for(var a in e)e[D](a)&&(r[a]=qe(e[a]));return r}f.svg=!(f.vml=f.type=="VML"),f._Paper=te,f.fn=T=te.prototype=f.prototype,f._id=0,f.is=function(e,r){return(r=xe.call(r))=="finite"?!n[D](+e):r=="array"?e instanceof Array:r=="null"&&e===null||r==typeof e&&e!==null||r=="object"&&e===Object(e)||r=="array"&&Array.isArray&&Array.isArray(e)||h.call(e).slice(8,-1).toLowerCase()==r},f.angle=function(e,r,a,c,g,w){if(g==null){var P=e-a,A=r-c;return P||A?(180+180*me.atan2(-A,-P)/ee+360)%360:0}return f.angle(e,r,g,w)-f.angle(a,c,g,w)},f.rad=function(e){return e%360*ee/180},f.deg=function(e){return Math.round(180*e/ee%360*1e3)/1e3},f.snapTo=function(e,r,a){if(a=f.is(a,"finite")?a:10,f.is(e,o)){for(var c=e.length;c--;)if(we(e[c]-r)<=a)return e[c]}else{var g=r%(e=+e);if(g<a)return r-g;if(g>e-a)return r-g+e}return r};var je,wt;f.createUUID=(je=/[xy]/g,wt=function(e){var r=16*me.random()|0;return(e=="x"?r:3&r|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(je,wt).toUpperCase()}),f.setWindow=function(e){d("raphael.setWindow",f,O.win,e),O.win=e,O.doc=O.win.document,f._engine.initWin&&f._engine.initWin(O.win)};var Je=function(e){if(f.vml){var r,a=/^\s+|\s+$/g;try{var c=new ActiveXObject("htmlfile");c.write("<body>"),c.close(),r=c.body}catch(P){r=createPopup().document.body}var g=r.createTextRange();Je=ze(function(P){try{r.style.color=U(P).replace(a,he);var A=g.queryCommandValue("ForeColor");return"#"+("000000"+(A=(255&A)<<16|65280&A|(16711680&A)>>>16).toString(16)).slice(-6)}catch(E){return"none"}})}else{var w=O.doc.createElement("i");w.title="RaphaÃ«l Colour Picker",w.style.display="none",O.doc.body.appendChild(w),Je=ze(function(P){return w.style.color=P,O.doc.defaultView.getComputedStyle(w,he).getPropertyValue("color")})}return Je(e)},ot=function(){return"hsb("+[this.h,this.s,this.b]+")"},at=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ct=function(){return this.hex},lt=function(e,r,a){if(r==null&&f.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(a=e.b,r=e.g,e=e.r),r==null&&f.is(e,"string")){var c=f.getRGB(e);e=c.r,r=c.g,a=c.b}return(e>1||r>1||a>1)&&(e/=255,r/=255,a/=255),[e,r,a]},Nt=function(e,r,a,c){var g={r:e*=255,g:r*=255,b:a*=255,hex:f.rgb(e,r,a),toString:Ct};return f.is(c,"finite")&&(g.opacity=c),g};function ze(e,r,a){return function c(){var g=Array.prototype.slice.call(arguments,0),w=g.join("â€"),P=c.cache=c.cache||{},A=c.count=c.count||[];return P[D](w)?(function(E,F){for(var J=0,ae=E.length;J<ae;J++)if(E[J]===F)return E.push(E.splice(J,1)[0])}(A,w),a?a(P[w]):P[w]):(A.length>=1e3&&delete P[A.shift()],A.push(w),P[w]=e[j](r,g),a?a(P[w]):P[w])}}f.color=function(e){var r;return f.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(r=f.hsb2rgb(e),e.r=r.r,e.g=r.g,e.b=r.b,e.hex=r.hex):f.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(r=f.hsl2rgb(e),e.r=r.r,e.g=r.g,e.b=r.b,e.hex=r.hex):(f.is(e,"string")&&(e=f.getRGB(e)),f.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(r=f.rgb2hsl(e),e.h=r.h,e.s=r.s,e.l=r.l,r=f.rgb2hsb(e),e.v=r.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=Ct,e},f.hsb2rgb=function(e,r,a,c){var g,w,P,A,E;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(a=e.b,r=e.s,c=e.o,e=e.h),A=(E=a*r)*(1-we((e=(e*=360)%360/60)%2-1)),g=w=P=a-E,Nt(g+=[E,A,0,0,A,E][e=~~e],w+=[A,E,E,A,0,0][e],P+=[0,0,A,E,E,A][e],c)},f.hsl2rgb=function(e,r,a,c){var g,w,P,A,E;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(a=e.l,r=e.s,e=e.h),(e>1||r>1||a>1)&&(e/=360,r/=100,a/=100),A=(E=2*r*(a<.5?a:1-a))*(1-we((e=(e*=360)%360/60)%2-1)),g=w=P=a-E/2,Nt(g+=[E,A,0,0,A,E][e=~~e],w+=[A,E,E,A,0,0][e],P+=[0,0,A,E,E,A][e],c)},f.rgb2hsb=function(e,r,a){var c,g;return e=(a=lt(e,r,a))[0],r=a[1],a=a[2],{h:(((g=(c=Se(e,r,a))-X(e,r,a))==0?null:c==e?(r-a)/g:c==r?(a-e)/g+2:(e-r)/g+4)+360)%6*60/360,s:g==0?0:g/c,b:c,toString:ot}},f.rgb2hsl=function(e,r,a){var c,g,w,P;return e=(a=lt(e,r,a))[0],r=a[1],a=a[2],c=((g=Se(e,r,a))+(w=X(e,r,a)))/2,{h:(((P=g-w)==0?null:g==e?(r-a)/P:g==r?(a-e)/P+2:(e-r)/P+4)+360)%6*60/360,s:P==0?0:c<.5?P/(2*c):P/(2-2*c),l:c,toString:at}},f._path2string=function(){return this.join(",").replace(K,"$1")},f._preload=function(e,r){var a=O.doc.createElement("img");a.style.cssText="position:absolute;left:-9999em;top:-9999em",a.onload=function(){r.call(this),this.onload=null,O.doc.body.removeChild(this)},a.onerror=function(){O.doc.body.removeChild(this)},O.doc.body.appendChild(a),a.src=e};function Qe(){return this.hex}function ct(e,r){for(var a=[],c=0,g=e.length;g-2*!r>c;c+=2){var w=[{x:+e[c-2],y:+e[c-1]},{x:+e[c],y:+e[c+1]},{x:+e[c+2],y:+e[c+3]},{x:+e[c+4],y:+e[c+5]}];r?c?g-4==c?w[3]={x:+e[0],y:+e[1]}:g-2==c&&(w[2]={x:+e[0],y:+e[1]},w[3]={x:+e[2],y:+e[3]}):w[0]={x:+e[g-2],y:+e[g-1]}:g-4==c?w[3]=w[2]:c||(w[0]={x:+e[c],y:+e[c+1]}),a.push(["C",(-w[0].x+6*w[1].x+w[2].x)/6,(-w[0].y+6*w[1].y+w[2].y)/6,(w[1].x+6*w[2].x-w[3].x)/6,(w[1].y+6*w[2].y-w[3].y)/6,w[2].x,w[2].y])}return a}f.getRGB=ze(function(e){if(!e||(e=U(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Qe};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Qe};!G[D](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=Je(e));var r,a,c,g,w,P,A=e.match(t);return A?(A[2]&&(c=m(A[2].substring(5),16),a=m(A[2].substring(3,5),16),r=m(A[2].substring(1,3),16)),A[3]&&(c=m((w=A[3].charAt(3))+w,16),a=m((w=A[3].charAt(2))+w,16),r=m((w=A[3].charAt(1))+w,16)),A[4]&&(P=A[4][re](V),r=p(P[0]),P[0].slice(-1)=="%"&&(r*=2.55),a=p(P[1]),P[1].slice(-1)=="%"&&(a*=2.55),c=p(P[2]),P[2].slice(-1)=="%"&&(c*=2.55),A[1].toLowerCase().slice(0,4)=="rgba"&&(g=p(P[3])),P[3]&&P[3].slice(-1)=="%"&&(g/=100)),A[5]?(P=A[5][re](V),r=p(P[0]),P[0].slice(-1)=="%"&&(r*=2.55),a=p(P[1]),P[1].slice(-1)=="%"&&(a*=2.55),c=p(P[2]),P[2].slice(-1)=="%"&&(c*=2.55),(P[0].slice(-3)=="deg"||P[0].slice(-1)=="Â°")&&(r/=360),A[1].toLowerCase().slice(0,4)=="hsba"&&(g=p(P[3])),P[3]&&P[3].slice(-1)=="%"&&(g/=100),f.hsb2rgb(r,a,c,g)):A[6]?(P=A[6][re](V),r=p(P[0]),P[0].slice(-1)=="%"&&(r*=2.55),a=p(P[1]),P[1].slice(-1)=="%"&&(a*=2.55),c=p(P[2]),P[2].slice(-1)=="%"&&(c*=2.55),(P[0].slice(-3)=="deg"||P[0].slice(-1)=="Â°")&&(r/=360),A[1].toLowerCase().slice(0,4)=="hsla"&&(g=p(P[3])),P[3]&&P[3].slice(-1)=="%"&&(g/=100),f.hsl2rgb(r,a,c,g)):((A={r,g:a,b:c,toString:Qe}).hex="#"+(16777216|c|a<<8|r<<16).toString(16).slice(1),f.is(g,"finite")&&(A.opacity=g),A)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Qe}},f),f.hsb=ze(function(e,r,a){return f.hsb2rgb(e,r,a).hex}),f.hsl=ze(function(e,r,a){return f.hsl2rgb(e,r,a).hex}),f.rgb=ze(function(e,r,a){function c(g){return g+.5|0}return"#"+(16777216|c(a)|c(r)<<8|c(e)<<16).toString(16).slice(1)}),f.getColor=function(e){var r=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},a=this.hsb2rgb(r.h,r.s,r.b);return r.h+=.075,r.h>1&&(r.h=0,r.s-=.2,r.s<=0&&(this.getColor.start={h:0,s:1,b:r.b})),a.hex},f.getColor.reset=function(){delete this.start},f.parsePathString=function(e){if(!e)return null;var r=Ue(e);if(r.arr)return He(r.arr);var a={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},c=[];return f.is(e,o)&&f.is(e[0],o)&&(c=He(e)),c.length||U(e).replace(se,function(g,w,P){var A=[],E=w.toLowerCase();if(P.replace(ge,function(F,J){J&&A.push(+J)}),E=="m"&&A.length>2&&(c.push([w][$](A.splice(0,2))),E="l",w=w=="m"?"l":"L"),E=="r")c.push([w][$](A));else for(;A.length>=a[E]&&(c.push([w][$](A.splice(0,a[E]))),a[E]););}),c.toString=f._path2string,r.arr=He(c),c},f.parseTransformString=ze(function(e){if(!e)return null;var r=[];return f.is(e,o)&&f.is(e[0],o)&&(r=He(e)),r.length||U(e).replace(de,function(a,c,g){var w=[];xe.call(c),g.replace(ge,function(P,A){A&&w.push(+A)}),r.push([c][$](w))}),r.toString=f._path2string,r},this,function(e){if(!e)return e;for(var r=[],a=0;a<e.length;a++){for(var c=[],g=0;g<e[a].length;g++)c.push(e[a][g]);r.push(c)}return r});var Ue=function(e){var r=Ue.ps=Ue.ps||{};return r[e]?r[e].sleep=100:r[e]={sleep:100},setTimeout(function(){for(var a in r)r[D](a)&&a!=e&&(r[a].sleep--,!r[a].sleep&&delete r[a])}),r[e]};function ut(e,r,a,c,g){return e*(e*(-3*r+9*a-9*c+3*g)+6*r-12*a+6*c)-3*r+3*a}function Ge(e,r,a,c,g,w,P,A,E){E==null&&(E=1);for(var F=(E=E>1?1:E<0?0:E)/2,J=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ae=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0,Y=0;Y<12;Y++){var ne=F*J[Y]+F,le=ut(ne,e,a,g,P),ie=ut(ne,r,c,w,A),Q=le*le+ie*ie;Z+=ae[Y]*me.sqrt(Q)}return F*Z}function _t(e,r,a,c,g,w,P,A){if(!(Se(e,a)<X(g,P)||X(e,a)>Se(g,P)||Se(r,c)<X(w,A)||X(r,c)>Se(w,A))){var E=(e-a)*(w-A)-(r-c)*(g-P);if(E){var F=((e*c-r*a)*(g-P)-(e-a)*(g*A-w*P))/E,J=((e*c-r*a)*(w-A)-(r-c)*(g*A-w*P))/E,ae=+F.toFixed(2),Z=+J.toFixed(2);if(!(ae<+X(e,a).toFixed(2)||ae>+Se(e,a).toFixed(2)||ae<+X(g,P).toFixed(2)||ae>+Se(g,P).toFixed(2)||Z<+X(r,c).toFixed(2)||Z>+Se(r,c).toFixed(2)||Z<+X(w,A).toFixed(2)||Z>+Se(w,A).toFixed(2)))return{x:F,y:J}}}}function ht(e,r,a){var c=f.bezierBBox(e),g=f.bezierBBox(r);if(!f.isBBoxIntersect(c,g))return a?0:[];for(var w=Ge.apply(0,e),P=Ge.apply(0,r),A=Se(~~(w/5),1),E=Se(~~(P/5),1),F=[],J=[],ae={},Z=a?0:[],Y=0;Y<A+1;Y++){var ne=f.findDotsAtSegment.apply(f,e.concat(Y/A));F.push({x:ne.x,y:ne.y,t:Y/A})}for(Y=0;Y<E+1;Y++)ne=f.findDotsAtSegment.apply(f,r.concat(Y/E)),J.push({x:ne.x,y:ne.y,t:Y/E});for(Y=0;Y<A;Y++)for(var le=0;le<E;le++){var ie=F[Y],Q=F[Y+1],ye=J[le],ce=J[le+1],fe=we(Q.x-ie.x)<.001?"y":"x",ue=we(ce.x-ye.x)<.001?"y":"x",Ee=_t(ie.x,ie.y,Q.x,Q.y,ye.x,ye.y,ce.x,ce.y);if(Ee){if(ae[Ee.x.toFixed(4)]==Ee.y.toFixed(4))continue;ae[Ee.x.toFixed(4)]=Ee.y.toFixed(4);var Pe=ie.t+we((Ee[fe]-ie[fe])/(Q[fe]-ie[fe]))*(Q.t-ie.t),Re=ye.t+we((Ee[ue]-ye[ue])/(ce[ue]-ye[ue]))*(ce.t-ye.t);Pe>=0&&Pe<=1.001&&Re>=0&&Re<=1.001&&(a?Z++:Z.push({x:Ee.x,y:Ee.y,t1:X(Pe,1),t2:X(Re,1)}))}}return Z}function kt(e,r,a){e=f._path2curve(e),r=f._path2curve(r);for(var c,g,w,P,A,E,F,J,ae,Z,Y=a?0:[],ne=0,le=e.length;ne<le;ne++){var ie=e[ne];if(ie[0]=="M")c=A=ie[1],g=E=ie[2];else{ie[0]=="C"?(ae=[c,g].concat(ie.slice(1)),c=ae[6],g=ae[7]):(ae=[c,g,c,g,A,E,A,E],c=A,g=E);for(var Q=0,ye=r.length;Q<ye;Q++){var ce=r[Q];if(ce[0]=="M")w=F=ce[1],P=J=ce[2];else{ce[0]=="C"?(Z=[w,P].concat(ce.slice(1)),w=Z[6],P=Z[7]):(Z=[w,P,w,P,F,J,F,J],w=F,P=J);var fe=ht(ae,Z,a);if(a)Y+=fe;else{for(var ue=0,Ee=fe.length;ue<Ee;ue++)fe[ue].segment1=ne,fe[ue].segment2=Q,fe[ue].bez1=ae,fe[ue].bez2=Z;Y=Y.concat(fe)}}}}}return Y}f.findDotsAtSegment=function(e,r,a,c,g,w,P,A,E){var F=1-E,J=Ce(F,3),ae=Ce(F,2),Z=E*E,Y=Z*E,ne=J*e+3*ae*E*a+3*F*E*E*g+Y*P,le=J*r+3*ae*E*c+3*F*E*E*w+Y*A,ie=e+2*E*(a-e)+Z*(g-2*a+e),Q=r+2*E*(c-r)+Z*(w-2*c+r),ye=a+2*E*(g-a)+Z*(P-2*g+a),ce=c+2*E*(w-c)+Z*(A-2*w+c),fe=F*e+E*a,ue=F*r+E*c,Ee=F*g+E*P,Pe=F*w+E*A,Re=90-180*me.atan2(ie-ye,Q-ce)/ee;return(ie>ye||Q<ce)&&(Re+=180),{x:ne,y:le,m:{x:ie,y:Q},n:{x:ye,y:ce},start:{x:fe,y:ue},end:{x:Ee,y:Pe},alpha:Re}},f.bezierBBox=function(e,r,a,c,g,w,P,A){f.is(e,"array")||(e=[e,r,a,c,g,w,P,A]);var E=Mt.apply(null,e);return{x:E.min.x,y:E.min.y,x2:E.max.x,y2:E.max.y,width:E.max.x-E.min.x,height:E.max.y-E.min.y}},f.isPointInsideBBox=function(e,r,a){return r>=e.x&&r<=e.x2&&a>=e.y&&a<=e.y2},f.isBBoxIntersect=function(e,r){var a=f.isPointInsideBBox;return a(r,e.x,e.y)||a(r,e.x2,e.y)||a(r,e.x,e.y2)||a(r,e.x2,e.y2)||a(e,r.x,r.y)||a(e,r.x2,r.y)||a(e,r.x,r.y2)||a(e,r.x2,r.y2)||(e.x<r.x2&&e.x>r.x||r.x<e.x2&&r.x>e.x)&&(e.y<r.y2&&e.y>r.y||r.y<e.y2&&r.y>e.y)},f.pathIntersection=function(e,r){return kt(e,r)},f.pathIntersectionNumber=function(e,r){return kt(e,r,1)},f.isPointInsidePath=function(e,r,a){var c=f.pathBBox(e);return f.isPointInsideBBox(c,r,a)&&kt(e,[["M",r,a],["H",c.x2+10]],1)%2==1},f._removedFactory=function(e){return function(){d("raphael.log",null,"RaphaÃ«l: you are calling to method â€œ"+e+"â€ of removed object",e)}};var Ke=f.pathBBox=function(e){var r=Ue(e);if(r.bbox)return qe(r.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var a,c=0,g=0,w=[],P=[],A=0,E=(e=St(e)).length;A<E;A++)if((a=e[A])[0]=="M")c=a[1],g=a[2],w.push(c),P.push(g);else{var F=Mt(c,g,a[1],a[2],a[3],a[4],a[5],a[6]);w=w[$](F.min.x,F.max.x),P=P[$](F.min.y,F.max.y),c=a[5],g=a[6]}var J=X[j](0,w),ae=X[j](0,P),Z=Se[j](0,w),Y=Se[j](0,P),ne=Z-J,le=Y-ae,ie={x:J,y:ae,x2:Z,y2:Y,width:ne,height:le,cx:J+ne/2,cy:ae+le/2};return r.bbox=qe(ie),ie},He=function(e){var r=qe(e);return r.toString=f._path2string,r},Zt=f._pathToRelative=function(e){var r=Ue(e);if(r.rel)return He(r.rel);f.is(e,o)&&f.is(e&&e[0],o)||(e=f.parsePathString(e));var a=[],c=0,g=0,w=0,P=0,A=0;e[0][0]=="M"&&(w=c=e[0][1],P=g=e[0][2],A++,a.push(["M",c,g]));for(var E=A,F=e.length;E<F;E++){var J=a[E]=[],ae=e[E];if(ae[0]!=xe.call(ae[0]))switch(J[0]=xe.call(ae[0]),J[0]){case"a":J[1]=ae[1],J[2]=ae[2],J[3]=ae[3],J[4]=ae[4],J[5]=ae[5],J[6]=+(ae[6]-c).toFixed(3),J[7]=+(ae[7]-g).toFixed(3);break;case"v":J[1]=+(ae[1]-g).toFixed(3);break;case"m":w=ae[1],P=ae[2];default:for(var Z=1,Y=ae.length;Z<Y;Z++)J[Z]=+(ae[Z]-(Z%2?c:g)).toFixed(3)}else{J=a[E]=[],ae[0]=="m"&&(w=ae[1]+c,P=ae[2]+g);for(var ne=0,le=ae.length;ne<le;ne++)a[E][ne]=ae[ne]}var ie=a[E].length;switch(a[E][0]){case"z":c=w,g=P;break;case"h":c+=+a[E][ie-1];break;case"v":g+=+a[E][ie-1];break;default:c+=+a[E][ie-2],g+=+a[E][ie-1]}}return a.toString=f._path2string,r.rel=He(a),a},dt=f._pathToAbsolute=function(e){var r=Ue(e);if(r.abs)return He(r.abs);if(f.is(e,o)&&f.is(e&&e[0],o)||(e=f.parsePathString(e)),!e||!e.length)return[["M",0,0]];var a=[],c=0,g=0,w=0,P=0,A=0;e[0][0]=="M"&&(w=c=+e[0][1],P=g=+e[0][2],A++,a[0]=["M",c,g]);for(var E,F,J=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z",ae=A,Z=e.length;ae<Z;ae++){if(a.push(E=[]),(F=e[ae])[0]!=b.call(F[0]))switch(E[0]=b.call(F[0]),E[0]){case"A":E[1]=F[1],E[2]=F[2],E[3]=F[3],E[4]=F[4],E[5]=F[5],E[6]=+(F[6]+c),E[7]=+(F[7]+g);break;case"V":E[1]=+F[1]+g;break;case"H":E[1]=+F[1]+c;break;case"R":for(var Y=[c,g][$](F.slice(1)),ne=2,le=Y.length;ne<le;ne++)Y[ne]=+Y[ne]+c,Y[++ne]=+Y[ne]+g;a.pop(),a=a[$](ct(Y,J));break;case"M":w=+F[1]+c,P=+F[2]+g;default:for(ne=1,le=F.length;ne<le;ne++)E[ne]=+F[ne]+(ne%2?c:g)}else if(F[0]=="R")Y=[c,g][$](F.slice(1)),a.pop(),a=a[$](ct(Y,J)),E=["R"][$](F.slice(-2));else for(var ie=0,Q=F.length;ie<Q;ie++)E[ie]=F[ie];switch(E[0]){case"Z":c=w,g=P;break;case"H":c=E[1];break;case"V":g=E[1];break;case"M":w=E[E.length-2],P=E[E.length-1];default:c=E[E.length-2],g=E[E.length-1]}}return a.toString=f._path2string,r.abs=He(a),a},ft=function(e,r,a,c){return[e,r,a,c,a,c]},Ze=function(e,r,a,c,g,w){return[1/3*e+2/3*a,1/3*r+2/3*c,1/3*g+2/3*a,1/3*w+2/3*c,g,w]},Tt=function(e,r,a,c,g,w,P,A,E,F){var J,ae=120*ee/180,Z=ee/180*(+g||0),Y=[],ne=ze(function(v1,y1,zt){return{x:v1*me.cos(zt)-y1*me.sin(zt),y:v1*me.sin(zt)+y1*me.cos(zt)}});if(F)Pe=F[0],Re=F[1],ue=F[2],Ee=F[3];else{e=(J=ne(e,r,-Z)).x,r=J.y,A=(J=ne(A,E,-Z)).x,E=J.y;var le=(e-A)/2,ie=(r-E)/2,Q=le*le/(a*a)+ie*ie/(c*c);Q>1&&(a*=Q=me.sqrt(Q),c*=Q);var ye=a*a,ce=c*c,fe=(w==P?-1:1)*me.sqrt(we((ye*ce-ye*ie*ie-ce*le*le)/(ye*ie*ie+ce*le*le))),ue=fe*a*ie/c+(e+A)/2,Ee=fe*-c*le/a+(r+E)/2,Pe=me.asin(((r-Ee)/c).toFixed(9)),Re=me.asin(((E-Ee)/c).toFixed(9));(Pe=e<ue?ee-Pe:Pe)<0&&(Pe=2*ee+Pe),(Re=A<ue?ee-Re:Re)<0&&(Re=2*ee+Re),P&&Pe>Re&&(Pe-=2*ee),!P&&Re>Pe&&(Re-=2*ee)}var mt=Re-Pe;if(we(mt)>ae){var Et=Re,Ve=A,We=E;Re=Pe+ae*(P&&Re>Pe?1:-1),A=ue+a*me.cos(Re),E=Ee+c*me.sin(Re),Y=Tt(A,E,a,c,g,0,P,Ve,We,[Re,Et,ue,Ee])}mt=Re-Pe;var gt=me.cos(Pe),vt=me.sin(Pe),Dt=me.cos(Re),Ye=me.sin(Re),st=me.tan(mt/4),qt=4/3*a*st,d1=4/3*c*st,f1=[e,r],yt=[e+qt*vt,r-d1*gt],p1=[A+qt*Ye,E-d1*Dt],m1=[A,E];if(yt[0]=2*f1[0]-yt[0],yt[1]=2*f1[1]-yt[1],F)return[yt,p1,m1][$](Y);for(var g1=[],tt=0,j1=(Y=[yt,p1,m1][$](Y).join()[re](",")).length;tt<j1;tt++)g1[tt]=tt%2?ne(Y[tt-1],Y[tt],Z).y:ne(Y[tt],Y[tt+1],Z).x;return g1},nt=function(e,r,a,c,g,w,P,A,E){var F=1-E;return{x:Ce(F,3)*e+3*Ce(F,2)*E*a+3*F*E*E*g+Ce(E,3)*P,y:Ce(F,3)*r+3*Ce(F,2)*E*c+3*F*E*E*w+Ce(E,3)*A}},Mt=ze(function(e,r,a,c,g,w,P,A){var E,F=g-2*a+e-(P-2*g+a),J=2*(a-e)-2*(g-a),ae=e-a,Z=(-J+me.sqrt(J*J-4*F*ae))/2/F,Y=(-J-me.sqrt(J*J-4*F*ae))/2/F,ne=[r,A],le=[e,P];return we(Z)>"1e12"&&(Z=.5),we(Y)>"1e12"&&(Y=.5),Z>0&&Z<1&&(E=nt(e,r,a,c,g,w,P,A,Z),le.push(E.x),ne.push(E.y)),Y>0&&Y<1&&(E=nt(e,r,a,c,g,w,P,A,Y),le.push(E.x),ne.push(E.y)),F=w-2*c+r-(A-2*w+c),ae=r-c,Z=(-(J=2*(c-r)-2*(w-c))+me.sqrt(J*J-4*F*ae))/2/F,Y=(-J-me.sqrt(J*J-4*F*ae))/2/F,we(Z)>"1e12"&&(Z=.5),we(Y)>"1e12"&&(Y=.5),Z>0&&Z<1&&(E=nt(e,r,a,c,g,w,P,A,Z),le.push(E.x),ne.push(E.y)),Y>0&&Y<1&&(E=nt(e,r,a,c,g,w,P,A,Y),le.push(E.x),ne.push(E.y)),{min:{x:X[j](0,le),y:X[j](0,ne)},max:{x:Se[j](0,le),y:Se[j](0,ne)}}}),St=f._path2curve=ze(function(e,r){var a=!r&&Ue(e);if(!r&&a.curve)return He(a.curve);for(var c=dt(e),g=r&&dt(r),w={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},P={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},A=function(fe,ue,Ee){var Pe,Re;if(!fe)return["C",ue.x,ue.y,ue.x,ue.y,ue.x,ue.y];switch(!(fe[0]in{T:1,Q:1})&&(ue.qx=ue.qy=null),fe[0]){case"M":ue.X=fe[1],ue.Y=fe[2];break;case"A":fe=["C"][$](Tt[j](0,[ue.x,ue.y][$](fe.slice(1))));break;case"S":Ee=="C"||Ee=="S"?(Pe=2*ue.x-ue.bx,Re=2*ue.y-ue.by):(Pe=ue.x,Re=ue.y),fe=["C",Pe,Re][$](fe.slice(1));break;case"T":Ee=="Q"||Ee=="T"?(ue.qx=2*ue.x-ue.qx,ue.qy=2*ue.y-ue.qy):(ue.qx=ue.x,ue.qy=ue.y),fe=["C"][$](Ze(ue.x,ue.y,ue.qx,ue.qy,fe[1],fe[2]));break;case"Q":ue.qx=fe[1],ue.qy=fe[2],fe=["C"][$](Ze(ue.x,ue.y,fe[1],fe[2],fe[3],fe[4]));break;case"L":fe=["C"][$](ft(ue.x,ue.y,fe[1],fe[2]));break;case"H":fe=["C"][$](ft(ue.x,ue.y,fe[1],ue.y));break;case"V":fe=["C"][$](ft(ue.x,ue.y,ue.x,fe[1]));break;case"Z":fe=["C"][$](ft(ue.x,ue.y,ue.X,ue.Y))}return fe},E=function(fe,ue){if(fe[ue].length>7){fe[ue].shift();for(var Ee=fe[ue];Ee.length;)J[ue]="A",g&&(ae[ue]="A"),fe.splice(ue++,0,["C"][$](Ee.splice(0,6)));fe.splice(ue,1),le=Se(c.length,g&&g.length||0)}},F=function(fe,ue,Ee,Pe,Re){fe&&ue&&fe[Re][0]=="M"&&ue[Re][0]!="M"&&(ue.splice(Re,0,["M",Pe.x,Pe.y]),Ee.bx=0,Ee.by=0,Ee.x=fe[Re][1],Ee.y=fe[Re][2],le=Se(c.length,g&&g.length||0))},J=[],ae=[],Z="",Y="",ne=0,le=Se(c.length,g&&g.length||0);ne<le;ne++){c[ne]&&(Z=c[ne][0]),Z!="C"&&(J[ne]=Z,ne&&(Y=J[ne-1])),c[ne]=A(c[ne],w,Y),J[ne]!="A"&&Z=="C"&&(J[ne]="C"),E(c,ne),g&&(g[ne]&&(Z=g[ne][0]),Z!="C"&&(ae[ne]=Z,ne&&(Y=ae[ne-1])),g[ne]=A(g[ne],P,Y),ae[ne]!="A"&&Z=="C"&&(ae[ne]="C"),E(g,ne)),F(c,g,w,P,ne),F(g,c,P,w,ne);var ie=c[ne],Q=g&&g[ne],ye=ie.length,ce=g&&Q.length;w.x=ie[ye-2],w.y=ie[ye-1],w.bx=p(ie[ye-4])||w.x,w.by=p(ie[ye-3])||w.y,P.bx=g&&(p(Q[ce-4])||P.x),P.by=g&&(p(Q[ce-3])||P.y),P.x=g&&Q[ce-2],P.y=g&&Q[ce-1]}return g||(a.curve=He(c)),g?[c,g]:c},null,He),It=(f._parseDots=ze(function(e){for(var r=[],a=0,c=e.length;a<c;a++){var g={},w=e[a].match(/^([^:]*):?([\d\.]*)/);if(g.color=f.getRGB(w[1]),g.color.error)return null;g.opacity=g.color.opacity,g.color=g.color.hex,w[2]&&(g.offset=w[2]+"%"),r.push(g)}for(a=1,c=r.length-1;a<c;a++)if(!r[a].offset){for(var P=p(r[a-1].offset||0),A=0,E=a+1;E<c;E++)if(r[E].offset){A=r[E].offset;break}A||(A=100,E=c);for(var F=((A=p(A))-P)/(E-a+1);a<E;a++)P+=F,r[a].offset=P+"%"}return r}),f._tear=function(e,r){e==r.top&&(r.top=e.prev),e==r.bottom&&(r.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),D1=(f._tofront=function(e,r){r.top!==e&&(It(e,r),e.next=null,e.prev=r.top,r.top.next=e,r.top=e)},f._toback=function(e,r){r.bottom!==e&&(It(e,r),e.next=r.bottom,e.prev=null,r.bottom.prev=e,r.bottom=e)},f._insertafter=function(e,r,a){It(e,a),r==a.top&&(a.top=e),r.next&&(r.next.prev=e),e.next=r.next,e.prev=r,r.next=e},f._insertbefore=function(e,r,a){It(e,a),r==a.bottom&&(a.bottom=e),r.prev&&(r.prev.next=e),e.prev=r.prev,r.prev=e,e.next=r},f.toMatrix=function(e,r){var a=Ke(e),c={_:{transform:he},getBBox:function(){return a}};return e1(c,r),c.matrix}),e1=(f.transformPath=function(e,r){return Me(e,D1(e,r))},f._extractTransform=function(e,r){if(r==null)return e._.transform;r=U(r).replace(/\.{3}|\u2026/g,e._.transform||he);var a,c,g=f.parseTransformString(r),w=0,P=1,A=1,E=e._,F=new rt;if(E.transform=g||[],g)for(var J=0,ae=g.length;J<ae;J++){var Z,Y,ne,le,ie,Q=g[J],ye=Q.length,ce=U(Q[0]).toLowerCase(),fe=Q[0]!=ce,ue=fe?F.invert():0;ce=="t"&&ye==3?fe?(Z=ue.x(0,0),Y=ue.y(0,0),ne=ue.x(Q[1],Q[2]),le=ue.y(Q[1],Q[2]),F.translate(ne-Z,le-Y)):F.translate(Q[1],Q[2]):ce=="r"?ye==2?(ie=ie||e.getBBox(1),F.rotate(Q[1],ie.x+ie.width/2,ie.y+ie.height/2),w+=Q[1]):ye==4&&(fe?(ne=ue.x(Q[2],Q[3]),le=ue.y(Q[2],Q[3]),F.rotate(Q[1],ne,le)):F.rotate(Q[1],Q[2],Q[3]),w+=Q[1]):ce=="s"?ye==2||ye==3?(ie=ie||e.getBBox(1),F.scale(Q[1],Q[ye-1],ie.x+ie.width/2,ie.y+ie.height/2),P*=Q[1],A*=Q[ye-1]):ye==5&&(fe?(ne=ue.x(Q[3],Q[4]),le=ue.y(Q[3],Q[4]),F.scale(Q[1],Q[2],ne,le)):F.scale(Q[1],Q[2],Q[3],Q[4]),P*=Q[1],A*=Q[2]):ce=="m"&&ye==7&&F.add(Q[1],Q[2],Q[3],Q[4],Q[5],Q[6]),E.dirtyT=1,e.matrix=F}e.matrix=F,E.sx=P,E.sy=A,E.deg=w,E.dx=a=F.e,E.dy=c=F.f,P==1&&A==1&&!w&&E.bbox?(E.bbox.x+=+a,E.bbox.y+=+c):E.dirtyT=1}),t1=function(e){var r=e[0];switch(r.toLowerCase()){case"t":return[r,0,0];case"m":return[r,1,0,0,1,0,0];case"r":return e.length==4?[r,0,e[2],e[3]]:[r,0];case"s":return e.length==5?[r,1,1,e[3],e[4]]:e.length==3?[r,1,1]:[r,1]}},q1=f._equaliseTransform=function(e,r){r=U(r).replace(/\.{3}|\u2026/g,e),e=f.parseTransformString(e)||[],r=f.parseTransformString(r)||[];for(var a,c,g,w,P=Se(e.length,r.length),A=[],E=[],F=0;F<P;F++){if(g=e[F]||t1(r[F]),w=r[F]||t1(g),g[0]!=w[0]||g[0].toLowerCase()=="r"&&(g[2]!=w[2]||g[3]!=w[3])||g[0].toLowerCase()=="s"&&(g[3]!=w[3]||g[4]!=w[4]))return;for(A[F]=[],E[F]=[],a=0,c=Se(g.length,w.length);a<c;a++)a in g&&(A[F][a]=g[a]),a in w&&(E[F][a]=w[a])}return{from:A,to:E}};function rt(e,r,a,c,g,w){e!=null?(this.a=+e,this.b=+r,this.c=+a,this.d=+c,this.e=+g,this.f=+w):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}f._getContainer=function(e,r,a,c){var g;if((g=c!=null||f.is(e,"object")?e:O.doc.getElementById(e))!=null)return g.tagName?r==null?{container:g,width:g.style.pixelWidth||g.offsetWidth,height:g.style.pixelHeight||g.offsetHeight}:{container:g,width:r,height:a}:{container:1,x:e,y:r,width:a,height:c}},f.pathToRelative=Zt,f._engine={},f.path2curve=St,f.matrix=function(e,r,a,c,g,w){return new rt(e,r,a,c,g,w)},function(e){function r(c){return c[0]*c[0]+c[1]*c[1]}function a(c){var g=me.sqrt(r(c));c[0]&&(c[0]/=g),c[1]&&(c[1]/=g)}e.add=function(c,g,w,P,A,E){var F,J,ae,Z,Y=[[],[],[]],ne=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],le=[[c,w,A],[g,P,E],[0,0,1]];for(c&&c instanceof rt&&(le=[[c.a,c.c,c.e],[c.b,c.d,c.f],[0,0,1]]),F=0;F<3;F++)for(J=0;J<3;J++){for(Z=0,ae=0;ae<3;ae++)Z+=ne[F][ae]*le[ae][J];Y[F][J]=Z}this.a=Y[0][0],this.b=Y[1][0],this.c=Y[0][1],this.d=Y[1][1],this.e=Y[0][2],this.f=Y[1][2]},e.invert=function(){var c=this,g=c.a*c.d-c.b*c.c;return new rt(c.d/g,-c.b/g,-c.c/g,c.a/g,(c.c*c.f-c.d*c.e)/g,(c.b*c.e-c.a*c.f)/g)},e.clone=function(){return new rt(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(c,g){this.add(1,0,0,1,c,g)},e.scale=function(c,g,w,P){g==null&&(g=c),(w||P)&&this.add(1,0,0,1,w,P),this.add(c,0,0,g,0,0),(w||P)&&this.add(1,0,0,1,-w,-P)},e.rotate=function(c,g,w){c=f.rad(c),g=g||0,w=w||0;var P=+me.cos(c).toFixed(9),A=+me.sin(c).toFixed(9);this.add(P,A,-A,P,g,w),this.add(1,0,0,1,-g,-w)},e.x=function(c,g){return c*this.a+g*this.c+this.e},e.y=function(c,g){return c*this.b+g*this.d+this.f},e.get=function(c){return+this[U.fromCharCode(97+c)].toFixed(4)},e.toString=function(){return f.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var c={};c.dx=this.e,c.dy=this.f;var g=[[this.a,this.c],[this.b,this.d]];c.scalex=me.sqrt(r(g[0])),a(g[0]),c.shear=g[0][0]*g[1][0]+g[0][1]*g[1][1],g[1]=[g[1][0]-g[0][0]*c.shear,g[1][1]-g[0][1]*c.shear],c.scaley=me.sqrt(r(g[1])),a(g[1]),c.shear/=c.scaley;var w=-g[0][1],P=g[1][1];return P<0?(c.rotate=f.deg(me.acos(P)),w<0&&(c.rotate=360-c.rotate)):c.rotate=f.deg(me.asin(w)),c.isSimple=!(+c.shear.toFixed(9)||c.scalex.toFixed(9)!=c.scaley.toFixed(9)&&c.rotate),c.isSuperSimple=!+c.shear.toFixed(9)&&c.scalex.toFixed(9)==c.scaley.toFixed(9)&&!c.rotate,c.noRotation=!+c.shear.toFixed(9)&&!c.rotate,c},e.toTransformString=function(c){var g=c||this[re]();return g.isSimple?(g.scalex=+g.scalex.toFixed(4),g.scaley=+g.scaley.toFixed(4),g.rotate=+g.rotate.toFixed(4),(g.dx||g.dy?"t"+[g.dx,g.dy]:he)+(g.scalex!=1||g.scaley!=1?"s"+[g.scalex,g.scaley,0,0]:he)+(g.rotate?"r"+[g.rotate,0,0]:he)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(rt.prototype);for(var z1=function(){this.returnValue=!1},F1=function(){return this.originalEvent.preventDefault()},O1=function(){this.cancelBubble=!0},H1=function(){return this.originalEvent.stopPropagation()},n1=function(e){var r=O.doc.documentElement.scrollTop||O.doc.body.scrollTop,a=O.doc.documentElement.scrollLeft||O.doc.body.scrollLeft;return{x:e.clientX+a,y:e.clientY+r}},V1=O.doc.addEventListener?function(e,r,a,c){var g=function(P){var A=n1(P);return a.call(c,P,A.x,A.y)};if(e.addEventListener(r,g,!1),oe&&_e[r]){var w=function(P){for(var A=n1(P),E=P,F=0,J=P.targetTouches&&P.targetTouches.length;F<J;F++)if(P.targetTouches[F].target==e){(P=P.targetTouches[F]).originalEvent=E,P.preventDefault=F1,P.stopPropagation=H1;break}return a.call(c,P,A.x,A.y)};e.addEventListener(_e[r],w,!1)}return function(){return e.removeEventListener(r,g,!1),oe&&_e[r]&&e.removeEventListener(_e[r],w,!1),!0}}:O.doc.attachEvent?function(e,r,a,c){var g=function(w){w=w||O.win.event;var P=O.doc.documentElement.scrollTop||O.doc.body.scrollTop,A=O.doc.documentElement.scrollLeft||O.doc.body.scrollLeft,E=w.clientX+A,F=w.clientY+P;return w.preventDefault=w.preventDefault||z1,w.stopPropagation=w.stopPropagation||O1,a.call(c,w,E,F)};return e.attachEvent("on"+r,g),function(){return e.detachEvent("on"+r,g),!0}}:void 0,et=[],Vt=function(e){for(var r,a=e.clientX,c=e.clientY,g=O.doc.documentElement.scrollTop||O.doc.body.scrollTop,w=O.doc.documentElement.scrollLeft||O.doc.body.scrollLeft,P=et.length;P--;){if(r=et[P],oe&&e.touches){for(var A,E=e.touches.length;E--;)if((A=e.touches[E]).identifier==r.el._drag.id){a=A.clientX,c=A.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var F,J=r.el.node,ae=J.nextSibling,Z=J.parentNode,Y=J.style.display;O.win.opera&&Z.removeChild(J),J.style.display="none",F=r.el.paper.getElementByPoint(a,c),J.style.display=Y,O.win.opera&&(ae?Z.insertBefore(J,ae):Z.appendChild(J)),F&&d("raphael.drag.over."+r.el.id,r.el,F),a+=w,c+=g,d("raphael.drag.move."+r.el.id,r.move_scope||r.el,a-r.el._drag.x,c-r.el._drag.y,a,c,e)}},$t=function(e){f.unmousemove(Vt).unmouseup($t);for(var r,a=et.length;a--;)(r=et[a]).el._drag={},d("raphael.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,e);et=[]},Ie=f.el={},r1=I.length;r1--;)(function(e){f[e]=Ie[e]=function(r,a){return f.is(r,"function")&&(this.events=this.events||[],this.events.push({name:e,f:r,unbind:V1(this.shape||this.node||O.doc,e,r,a||this)})),this},f["un"+e]=Ie["un"+e]=function(r){for(var a=this.events||[],c=a.length;c--;)a[c].name!=e||!f.is(r,"undefined")&&a[c].f!=r||(a[c].unbind(),a.splice(c,1),!a.length&&delete this.events);return this}})(I[r1]);Ie.data=function(e,r){var a=be[this.id]=be[this.id]||{};if(arguments.length==0)return a;if(arguments.length==1){if(f.is(e,"object")){for(var c in e)e[D](c)&&this.data(c,e[c]);return this}return d("raphael.data.get."+this.id,this,a[e],e),a[e]}return a[e]=r,d("raphael.data.set."+this.id,this,r,e),this},Ie.removeData=function(e){return e==null?delete be[this.id]:be[this.id]&&delete be[this.id][e],this},Ie.getData=function(){return qe(be[this.id]||{})},Ie.hover=function(e,r,a,c){return this.mouseover(e,a).mouseout(r,c||a)},Ie.unhover=function(e,r){return this.unmouseover(e).unmouseout(r)};var pt=[];Ie.drag=function(e,r,a,c,g,w){function P(A){(A.originalEvent||A).preventDefault();var E=A.clientX,F=A.clientY,J=O.doc.documentElement.scrollTop||O.doc.body.scrollTop,ae=O.doc.documentElement.scrollLeft||O.doc.body.scrollLeft;if(this._drag.id=A.identifier,oe&&A.touches){for(var Z,Y=A.touches.length;Y--;)if(Z=A.touches[Y],this._drag.id=Z.identifier,Z.identifier==this._drag.id){E=Z.clientX,F=Z.clientY;break}}this._drag.x=E+ae,this._drag.y=F+J,!et.length&&f.mousemove(Vt).mouseup($t),et.push({el:this,move_scope:c,start_scope:g,end_scope:w}),r&&d.on("raphael.drag.start."+this.id,r),e&&d.on("raphael.drag.move."+this.id,e),a&&d.on("raphael.drag.end."+this.id,a),d("raphael.drag.start."+this.id,g||c||this,this._drag.x,this._drag.y,A)}return this._drag={},pt.push({el:this,start:P}),this.mousedown(P),this},Ie.onDragOver=function(e){e?d.on("raphael.drag.over."+this.id,e):d.unbind("raphael.drag.over."+this.id)},Ie.undrag=function(){for(var e=pt.length;e--;)pt[e].el==this&&(this.unmousedown(pt[e].start),pt.splice(e,1),d.unbind("raphael.drag.*."+this.id));!pt.length&&f.unmousemove(Vt).unmouseup($t),et=[]},T.circle=function(e,r,a){var c=f._engine.circle(this,e||0,r||0,a||0);return this.__set__&&this.__set__.push(c),c},T.rect=function(e,r,a,c,g){var w=f._engine.rect(this,e||0,r||0,a||0,c||0,g||0);return this.__set__&&this.__set__.push(w),w},T.ellipse=function(e,r,a,c){var g=f._engine.ellipse(this,e||0,r||0,a||0,c||0);return this.__set__&&this.__set__.push(g),g},T.path=function(e){e&&!f.is(e,"string")&&!f.is(e[0],o)&&(e+=he);var r=f._engine.path(f.format[j](f,arguments),this);return this.__set__&&this.__set__.push(r),r},T.image=function(e,r,a,c,g){var w=f._engine.image(this,e||"about:blank",r||0,a||0,c||0,g||0);return this.__set__&&this.__set__.push(w),w},T.text=function(e,r,a){var c=f._engine.text(this,e||0,r||0,U(a));return this.__set__&&this.__set__.push(c),c},T.set=function(e){!f.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var r=new Pt(e);return this.__set__&&this.__set__.push(r),r.paper=this,r.type="set",r},T.setStart=function(e){this.__set__=e||this.set()},T.setFinish=function(e){var r=this.__set__;return delete this.__set__,r},T.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},T.setSize=function(e,r){return f._engine.setSize.call(this,e,r)},T.setViewBox=function(e,r,a,c,g){return f._engine.setViewBox.call(this,e,r,a,c,g)},T.top=T.bottom=null,T.raphael=f;function i1(){return this.x+pe+this.y+pe+this.width+" Ã— "+this.height}T.getElementByPoint=function(e,r){var a,c,g,w,P,A,E,F=this.canvas,J=O.doc.elementFromPoint(e,r);if(O.win.opera&&J.tagName=="svg"){var ae=(c=(a=F).getBoundingClientRect(),g=a.ownerDocument,w=g.body,P=g.documentElement,A=P.clientTop||w.clientTop||0,E=P.clientLeft||w.clientLeft||0,{y:c.top+(O.win.pageYOffset||P.scrollTop||w.scrollTop)-A,x:c.left+(O.win.pageXOffset||P.scrollLeft||w.scrollLeft)-E}),Z=F.createSVGRect();Z.x=e-ae.x,Z.y=r-ae.y,Z.width=Z.height=1;var Y=F.getIntersectionList(Z,null);Y.length&&(J=Y[Y.length-1])}if(!J)return null;for(;J.parentNode&&J!=F.parentNode&&!J.raphael;)J=J.parentNode;return J==this.canvas.parentNode&&(J=F),J=J&&J.raphael?this.getById(J.raphaelid):null},T.getElementsByBBox=function(e){var r=this.set();return this.forEach(function(a){f.isBBoxIntersect(a.getBBox(),e)&&r.push(a)}),r},T.getById=function(e){for(var r=this.bottom;r;){if(r.id==e)return r;r=r.next}return null},T.forEach=function(e,r){for(var a=this.bottom;a;){if(e.call(r,a)===!1)return this;a=a.next}return this},T.getElementsByPoint=function(e,r){var a=this.set();return this.forEach(function(c){c.isPointInside(e,r)&&a.push(c)}),a},Ie.isPointInside=function(e,r){var a=this.realPath=Ne[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(a=f.transformPath(a,this.attr("transform"))),f.isPointInsidePath(a,e,r)},Ie.getBBox=function(e){if(this.removed)return{};var r=this._;return e?(!r.dirty&&r.bboxwt||(this.realPath=Ne[this.type](this),r.bboxwt=Ke(this.realPath),r.bboxwt.toString=i1,r.dirty=0),r.bboxwt):((r.dirty||r.dirtyT||!r.bbox)&&(!r.dirty&&this.realPath||(r.bboxwt=0,this.realPath=Ne[this.type](this)),r.bbox=Ke(Me(this.realPath,this.matrix)),r.bbox.toString=i1,r.dirty=r.dirtyT=0),r.bbox)},Ie.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Ie.glow=function(e){if(this.type=="text")return null;var r={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity==null?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},a=r.width/2,c=this.paper,g=c.set(),w=this.realPath||Ne[this.type](this);w=this.matrix?Me(w,this.matrix):w;for(var P=1;P<a+1;P++)g.push(c.path(w).attr({stroke:r.color,fill:r.fill?r.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(r.width/a*P).toFixed(3),opacity:+(r.opacity/a).toFixed(3)}));return g.insertBefore(this).translate(r.offsetx,r.offsety)};var jt=function(e,r,a,c,g,w,P,A,E){return E==null?Ge(e,r,a,c,g,w,P,A):f.findDotsAtSegment(e,r,a,c,g,w,P,A,function(F,J,ae,Z,Y,ne,le,ie,Q){if(!(Q<0||Ge(F,J,ae,Z,Y,ne,le,ie)<Q)){var ye,ce=.5,fe=1-ce;for(ye=Ge(F,J,ae,Z,Y,ne,le,ie,fe);we(ye-Q)>.01;)ye=Ge(F,J,ae,Z,Y,ne,le,ie,fe+=(ye<Q?1:-1)*(ce/=2));return fe}}(e,r,a,c,g,w,P,A,E))},Ut=function(e,r){return function(a,c,g){for(var w,P,A,E,F,J="",ae={},Z=0,Y=0,ne=(a=St(a)).length;Y<ne;Y++){if((A=a[Y])[0]=="M")w=+A[1],P=+A[2];else{if(Z+(E=jt(w,P,A[1],A[2],A[3],A[4],A[5],A[6]))>c){if(r&&!ae.start){if(J+=["C"+(F=jt(w,P,A[1],A[2],A[3],A[4],A[5],A[6],c-Z)).start.x,F.start.y,F.m.x,F.m.y,F.x,F.y],g)return J;ae.start=J,J=["M"+F.x,F.y+"C"+F.n.x,F.n.y,F.end.x,F.end.y,A[5],A[6]].join(),Z+=E,w=+A[5],P=+A[6];continue}if(!e&&!r)return{x:(F=jt(w,P,A[1],A[2],A[3],A[4],A[5],A[6],c-Z)).x,y:F.y,alpha:F.alpha}}Z+=E,w=+A[5],P=+A[6]}J+=A.shift()+A}return ae.end=J,(F=e?Z:r?ae:f.findDotsAtSegment(w,P,A[0],A[1],A[2],A[3],A[4],A[5],1)).alpha&&(F={x:F.x,y:F.y,alpha:F.alpha}),F}},s1=Ut(1),o1=Ut(),Gt=Ut(0,1);f.getTotalLength=s1,f.getPointAtLength=o1,f.getSubpath=function(e,r,a){if(this.getTotalLength(e)-a<1e-6)return Gt(e,r).end;var c=Gt(e,a,1);return r?Gt(c,r).end:c},Ie.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():s1(e)},Ie.getPointAtLength=function(e){var r=this.getPath();if(r)return o1(r,e)},Ie.getPath=function(){var e,r=f._getPath[this.type];if(this.type!="text"&&this.type!="set")return r&&(e=r(this)),e},Ie.getSubpath=function(e,r){var a=this.getPath();if(a)return f.getSubpath(a,e,r)};var $e=f.easing_formulas={linear:function(e){return e},"<":function(e){return Ce(e,1.7)},">":function(e){return Ce(e,.48)},"<>":function(e){var r=.48-e/1.04,a=me.sqrt(.1734+r*r),c=a-r,g=-a-r,w=Ce(we(c),1/3)*(c<0?-1:1)+Ce(we(g),1/3)*(g<0?-1:1)+.5;return 3*(1-w)*w*w+w*w*w},backIn:function(e){var r=1.70158;return e*e*((r+1)*e-r)},backOut:function(e){var r=1.70158;return(e-=1)*e*((r+1)*e+r)+1},elastic:function(e){return e==!!e?e:Ce(2,-10*e)*me.sin(2*ee*(e-.075)/.3)+1},bounce:function(e){var r=7.5625,a=2.75;return e<1/a?r*e*e:e<2/a?r*(e-=1.5/a)*e+.75:e<2.5/a?r*(e-=2.25/a)*e+.9375:r*(e-=2.625/a)*e+.984375}};$e.easeIn=$e["ease-in"]=$e["<"],$e.easeOut=$e["ease-out"]=$e[">"],$e.easeInOut=$e["ease-in-out"]=$e["<>"],$e["back-in"]=$e.backIn,$e["back-out"]=$e.backOut;var Te=[],a1=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},Wt=function(){for(var e=+new Date,r=0;r<Te.length;r++){var a=Te[r];if(!a.el.removed&&!a.paused){var c,g,w=e-a.start,P=a.ms,A=a.easing,E=a.from,F=a.diff,J=a.to,ae=(a.t,a.el),Z={},Y={};if(a.initstatus?(w=(a.initstatus*a.anim.top-a.prev)/(a.percent-a.prev)*P,a.status=a.initstatus,delete a.initstatus,a.stop&&Te.splice(r--,1)):a.status=(a.prev+(a.percent-a.prev)*(w/P))/a.anim.top,!(w<0))if(w<P){var ne=A(w/P);for(var le in E)if(E[D](le)){switch(B[le]){case s:c=+E[le]+ne*P*F[le];break;case"colour":c="rgb("+[Xt(l(E[le].r+ne*P*F[le].r)),Xt(l(E[le].g+ne*P*F[le].g)),Xt(l(E[le].b+ne*P*F[le].b))].join(",")+")";break;case"path":c=[];for(var ie=0,Q=E[le].length;ie<Q;ie++){c[ie]=[E[le][ie][0]];for(var ye=1,ce=E[le][ie].length;ye<ce;ye++)c[ie][ye]=+E[le][ie][ye]+ne*P*F[le][ie][ye];c[ie]=c[ie].join(pe)}c=c.join(pe);break;case"transform":if(F[le].real)for(c=[],ie=0,Q=E[le].length;ie<Q;ie++)for(c[ie]=[E[le][ie][0]],ye=1,ce=E[le][ie].length;ye<ce;ye++)c[ie][ye]=E[le][ie][ye]+ne*P*F[le][ie][ye];else{var fe=function(Ee){return+E[le][Ee]+ne*P*F[le][Ee]};c=[["m",fe(0),fe(1),fe(2),fe(3),fe(4),fe(5)]]}break;case"csv":if(le=="clip-rect")for(c=[],ie=4;ie--;)c[ie]=+E[le][ie]+ne*P*F[le][ie];break;default:var ue=[][$](E[le]);for(c=[],ie=ae.paper.customAttributes[le].length;ie--;)c[ie]=+ue[ie]+ne*P*F[le][ie]}Z[le]=c}ae.attr(Z),function(Ee,Pe,Re){setTimeout(function(){d("raphael.anim.frame."+Ee,Pe,Re)})}(ae.id,ae,a.anim)}else{if(function(Ee,Pe,Re){setTimeout(function(){d("raphael.anim.frame."+Pe.id,Pe,Re),d("raphael.anim.finish."+Pe.id,Pe,Re),f.is(Ee,"function")&&Ee.call(Pe)})}(a.callback,ae,a.anim),ae.attr(J),Te.splice(r--,1),a.repeat>1&&!a.next){for(g in J)J[D](g)&&(Y[g]=a.totalOrigin[g]);a.el.attr(Y),At(a.anim,a.el,a.anim.percents[0],null,a.totalOrigin,a.repeat-1)}a.next&&!a.stop&&At(a.anim,a.el,a.next,null,a.totalOrigin,a.repeat)}}}Te.length&&a1(Wt)},Xt=function(e){return e>255?255:e<0?0:e};function $1(e,r,a,c,g,w){var P=3*r,A=3*(c-r)-P,E=1-P-A,F=3*a,J=3*(g-a)-F,ae=1-F-J;function Z(Y){return((E*Y+A)*Y+P)*Y}return function(Y,ne){var le=function(ie,Q){var ye,ce,fe,ue,Ee,Pe;for(fe=ie,Pe=0;Pe<8;Pe++){if(ue=Z(fe)-ie,we(ue)<Q)return fe;if(we(Ee=(3*E*fe+2*A)*fe+P)<1e-6)break;fe-=ue/Ee}if(ce=1,(fe=ie)<(ye=0))return ye;if(fe>ce)return ce;for(;ye<ce;){if(ue=Z(fe),we(ue-ie)<Q)return fe;ie>ue?ye=fe:ce=fe,fe=(ce-ye)/2+ye}return fe}(Y,ne);return((ae*le+J)*le+F)*le}(e,1/(200*w))}function Xe(e,r){var a=[],c={};if(this.ms=r,this.times=1,e){for(var g in e)e[D](g)&&(c[p(g)]=e[g],a.push(p(g)));a.sort(ve)}this.anim=c,this.top=a[a.length-1],this.percents=a}function At(e,r,a,c,g,w){a=p(a);var P,A,E,F,J,ae,Z=e.ms,Y={},ne={},le={};if(c)for(Q=0,ye=Te.length;Q<ye;Q++){var ie=Te[Q];if(ie.el.id==r.id&&ie.anim==e){ie.percent!=a?(Te.splice(Q,1),E=1):A=ie,r.attr(ie.totalOrigin);break}}else c=+ne;for(var Q=0,ye=e.percents.length;Q<ye;Q++){if(e.percents[Q]==a||e.percents[Q]>c*e.top){a=e.percents[Q],J=e.percents[Q-1]||0,Z=Z/e.top*(a-J),F=e.percents[Q+1],P=e.anim[a];break}c&&r.attr(e.anim[e.percents[Q]])}if(P){if(A)A.initstatus=c,A.start=new Date-A.ms*c;else{for(var ce in P)if(P[D](ce)&&(B[D](ce)||r.paper.customAttributes[D](ce)))switch(Y[ce]=r.attr(ce),Y[ce]==null&&(Y[ce]=N[ce]),ne[ce]=P[ce],B[ce]){case s:le[ce]=(ne[ce]-Y[ce])/Z;break;case"colour":Y[ce]=f.getRGB(Y[ce]);var fe=f.getRGB(ne[ce]);le[ce]={r:(fe.r-Y[ce].r)/Z,g:(fe.g-Y[ce].g)/Z,b:(fe.b-Y[ce].b)/Z};break;case"path":var ue=St(Y[ce],ne[ce]),Ee=ue[1];for(Y[ce]=ue[0],le[ce]=[],Q=0,ye=Y[ce].length;Q<ye;Q++){le[ce][Q]=[0];for(var Pe=1,Re=Y[ce][Q].length;Pe<Re;Pe++)le[ce][Q][Pe]=(Ee[Q][Pe]-Y[ce][Q][Pe])/Z}break;case"transform":var mt=r._,Et=q1(mt[ce],ne[ce]);if(Et)for(Y[ce]=Et.from,ne[ce]=Et.to,le[ce]=[],le[ce].real=!0,Q=0,ye=Y[ce].length;Q<ye;Q++)for(le[ce][Q]=[Y[ce][Q][0]],Pe=1,Re=Y[ce][Q].length;Pe<Re;Pe++)le[ce][Q][Pe]=(ne[ce][Q][Pe]-Y[ce][Q][Pe])/Z;else{var Ve=r.matrix||new rt,We={_:{transform:mt.transform},getBBox:function(){return r.getBBox(1)}};Y[ce]=[Ve.a,Ve.b,Ve.c,Ve.d,Ve.e,Ve.f],e1(We,ne[ce]),ne[ce]=We._.transform,le[ce]=[(We.matrix.a-Ve.a)/Z,(We.matrix.b-Ve.b)/Z,(We.matrix.c-Ve.c)/Z,(We.matrix.d-Ve.d)/Z,(We.matrix.e-Ve.e)/Z,(We.matrix.f-Ve.f)/Z]}break;case"csv":var gt=U(P[ce])[re](H),vt=U(Y[ce])[re](H);if(ce=="clip-rect")for(Y[ce]=vt,le[ce]=[],Q=vt.length;Q--;)le[ce][Q]=(gt[Q]-Y[ce][Q])/Z;ne[ce]=gt;break;default:for(gt=[][$](P[ce]),vt=[][$](Y[ce]),le[ce]=[],Q=r.paper.customAttributes[ce].length;Q--;)le[ce][Q]=((gt[Q]||0)-(vt[Q]||0))/Z}var Dt=P.easing,Ye=f.easing_formulas[Dt];if(!Ye)if((Ye=U(Dt).match(i))&&Ye.length==5){var st=Ye;Ye=function(qt){return $1(qt,+st[1],+st[2],+st[3],+st[4],Z)}}else Ye=Ae;if(ie={anim:e,percent:a,timestamp:ae=P.start||e.start||+new Date,start:ae+(e.del||0),status:0,initstatus:c||0,stop:!1,ms:Z,easing:Ye,from:Y,diff:le,to:ne,el:r,callback:P.callback,prev:J,next:F,repeat:w||e.times,origin:r.attr(),totalOrigin:g},Te.push(ie),c&&!A&&!E&&(ie.stop=!0,ie.start=new Date-Z*c,Te.length==1))return Wt();E&&(ie.start=new Date-ie.ms*c),Te.length==1&&a1(Wt)}d("raphael.anim.start."+r.id,r,e)}}function l1(e){for(var r=0;r<Te.length;r++)Te[r].el.paper==e&&Te.splice(r--,1)}Ie.animateWith=function(e,r,a,c,g,w){if(this.removed)return w&&w.call(this),this;var P=a instanceof Xe?a:f.animation(a,c,g,w);At(P,this,P.percents[0],null,this.attr());for(var A=0,E=Te.length;A<E;A++)if(Te[A].anim==r&&Te[A].el==e){Te[E-1].start=Te[A].start;break}return this},Ie.onAnimation=function(e){return e?d.on("raphael.anim.frame."+this.id,e):d.unbind("raphael.anim.frame."+this.id),this},Xe.prototype.delay=function(e){var r=new Xe(this.anim,this.ms);return r.times=this.times,r.del=+e||0,r},Xe.prototype.repeat=function(e){var r=new Xe(this.anim,this.ms);return r.del=this.del,r.times=me.floor(Se(e,0))||1,r},f.animation=function(e,r,a,c){if(e instanceof Xe)return e;!f.is(a,"function")&&a||(c=c||a||null,a=null),e=Object(e),r=+r||0;var g,w,P={};for(w in e)e[D](w)&&p(w)!=w&&p(w)+"%"!=w&&(g=!0,P[w]=e[w]);if(g)return a&&(P.easing=a),c&&(P.callback=c),new Xe({100:P},r);if(c){var A=0;for(var E in e){var F=m(E);e[D](E)&&F>A&&(A=F)}!e[A+="%"].callback&&(e[A].callback=c)}return new Xe(e,r)},Ie.animate=function(e,r,a,c){if(this.removed)return c&&c.call(this),this;var g=e instanceof Xe?e:f.animation(e,r,a,c);return At(g,this,g.percents[0],null,this.attr()),this},Ie.setTime=function(e,r){return e&&r!=null&&this.status(e,X(r,e.ms)/e.ms),this},Ie.status=function(e,r){var a,c,g=[],w=0;if(r!=null)return At(e,this,-1,X(r,1)),this;for(a=Te.length;w<a;w++)if((c=Te[w]).el.id==this.id&&(!e||c.anim==e)){if(e)return c.status;g.push({anim:c.anim,status:c.status})}return e?0:g},Ie.pause=function(e){for(var r=0;r<Te.length;r++)Te[r].el.id!=this.id||e&&Te[r].anim!=e||d("raphael.anim.pause."+this.id,this,Te[r].anim)!==!1&&(Te[r].paused=!0);return this},Ie.resume=function(e){for(var r=0;r<Te.length;r++)if(Te[r].el.id==this.id&&(!e||Te[r].anim==e)){var a=Te[r];d("raphael.anim.resume."+this.id,this,a.anim)!==!1&&(delete a.paused,this.status(a.anim,a.status))}return this},Ie.stop=function(e){for(var r=0;r<Te.length;r++)Te[r].el.id!=this.id||e&&Te[r].anim!=e||d("raphael.anim.stop."+this.id,this,Te[r].anim)!==!1&&Te.splice(r--,1);return this},d.on("raphael.remove",l1),d.on("raphael.clear",l1),Ie.toString=function(){return"RaphaÃ«lâ€™s object"};var c1,u1,it,h1,Pt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var r=0,a=e.length;r<a;r++)!e[r]||e[r].constructor!=Ie.constructor&&e[r].constructor!=Pt||(this[this.items.length]=this.items[this.items.length]=e[r],this.length++)},Fe=Pt.prototype;for(var Yt in Fe.push=function(){for(var e,r,a=0,c=arguments.length;a<c;a++)!(e=arguments[a])||e.constructor!=Ie.constructor&&e.constructor!=Pt||(this[r=this.items.length]=this.items[r]=e,this.length++);return this},Fe.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Fe.forEach=function(e,r){for(var a=0,c=this.items.length;a<c;a++)if(e.call(r,this.items[a],a)===!1)return this;return this},Ie)Ie[D](Yt)&&(Fe[Yt]=function(e){return function(){var r=arguments;return this.forEach(function(a){a[e][j](a,r)})}}(Yt));return Fe.attr=function(e,r){if(e&&f.is(e,o)&&f.is(e[0],"object"))for(var a=0,c=e.length;a<c;a++)this.items[a].attr(e[a]);else for(var g=0,w=this.items.length;g<w;g++)this.items[g].attr(e,r);return this},Fe.clear=function(){for(;this.length;)this.pop()},Fe.splice=function(e,r,a){e=e<0?Se(this.length+e,0):e,r=Se(0,X(this.length-e,r));var c,g=[],w=[],P=[];for(c=2;c<arguments.length;c++)P.push(arguments[c]);for(c=0;c<r;c++)w.push(this[e+c]);for(;c<this.length-e;c++)g.push(this[e+c]);var A=P.length;for(c=0;c<A+g.length;c++)this.items[e+c]=this[e+c]=c<A?P[c]:g[c-A];for(c=this.items.length=this.length-=r-A;this[c];)delete this[c++];return new Pt(w)},Fe.exclude=function(e){for(var r=0,a=this.length;r<a;r++)if(this[r]==e)return this.splice(r,1),!0},Fe.animate=function(e,r,a,c){(f.is(a,"function")||!a)&&(c=a||null);var g,w,P=this.items.length,A=P,E=this;if(!P)return this;c&&(w=function(){!--P&&c.call(E)}),a=f.is(a,"string")?a:w;var F=f.animation(e,r,a,w);for(g=this.items[--A].animate(F);A--;)this.items[A]&&!this.items[A].removed&&this.items[A].animateWith(g,F,F),this.items[A]&&!this.items[A].removed||P--;return this},Fe.insertAfter=function(e){for(var r=this.items.length;r--;)this.items[r].insertAfter(e);return this},Fe.getBBox=function(){for(var e=[],r=[],a=[],c=[],g=this.items.length;g--;)if(!this.items[g].removed){var w=this.items[g].getBBox();e.push(w.x),r.push(w.y),a.push(w.x+w.width),c.push(w.y+w.height)}return{x:e=X[j](0,e),y:r=X[j](0,r),x2:a=Se[j](0,a),y2:c=Se[j](0,c),width:a-e,height:c-r}},Fe.clone=function(e){e=this.paper.set();for(var r=0,a=this.items.length;r<a;r++)e.push(this.items[r].clone());return e},Fe.toString=function(){return"RaphaÃ«lâ€˜s set"},Fe.glow=function(e){var r=this.paper.set();return this.forEach(function(a,c){var g=a.glow(e);g!=null&&g.forEach(function(w,P){r.push(w)})}),r},Fe.isPointInside=function(e,r){var a=!1;return this.forEach(function(c){if(c.isPointInside(e,r))return a=!0,!1}),a},f.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var r={w:e.w,face:{},glyphs:{}},a=e.face["font-family"];for(var c in e.face)e.face[D](c)&&(r.face[c]=e.face[c]);if(this.fonts[a]?this.fonts[a].push(r):this.fonts[a]=[r],!e.svg){for(var g in r.face["units-per-em"]=m(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[D](g)){var w=e.glyphs[g];if(r.glyphs[g]={w:w.w,k:{},d:w.d&&"M"+w.d.replace(/[mlcxtrv]/g,function(A){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[A]||"M"})+"z"},w.k)for(var P in w.k)w[D](P)&&(r.glyphs[g].k[P]=w.k[P])}}return e},T.getFont=function(e,r,a,c){if(c=c||"normal",a=a||"normal",r=+r||{normal:400,bold:700,lighter:300,bolder:800}[r]||400,f.fonts){var g,w=f.fonts[e];if(!w){var P=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,he)+"(\\s|$)","i");for(var A in f.fonts)if(f.fonts[D](A)&&P.test(A)){w=f.fonts[A];break}}if(w)for(var E=0,F=w.length;E<F&&((g=w[E]).face["font-weight"]!=r||g.face["font-style"]!=a&&g.face["font-style"]||g.face["font-stretch"]!=c);E++);return g}},T.print=function(e,r,a,c,g,w,P,A){w=w||"middle",P=Se(X(P||0,1),-1),A=Se(X(A||1,3),1);var E,F=U(a)[re](he),J=0,ae=0,Z=he;if(f.is(c,"string")&&(c=this.getFont(c)),c){E=(g||16)/c.face["units-per-em"];for(var Y=c.face.bbox[re](H),ne=+Y[0],le=Y[3]-Y[1],ie=0,Q=+Y[1]+(w=="baseline"?le+ +c.face.descent:le/2),ye=0,ce=F.length;ye<ce;ye++){if(F[ye]==`
`)J=0,ue=0,ae=0,ie+=le*A;else{var fe=ae&&c.glyphs[F[ye-1]]||{},ue=c.glyphs[F[ye]];J+=ae?(fe.w||c.w)+(fe.k&&fe.k[F[ye]]||0)+c.w*P:0,ae=1}ue&&ue.d&&(Z+=f.transformPath(ue.d,["t",J*E,ie*E,"s",E,E,ne,Q,"t",(e-ne)/E,(r-Q)/E]))}}return this.path(Z).attr({fill:"#000",stroke:"none"})},T.add=function(e){if(f.is(e,"array"))for(var r,a=this.set(),c=0,g=e.length;c<g;c++)r=e[c]||{},z[D](r.type)&&a.push(this[r.type]().attr(r));return a},f.format=function(e,r){var a=f.is(r,o)?[0][$](r):arguments;return e&&f.is(e,"string")&&a.length-1&&(e=e.replace(L,function(c,g){return a[++g]==null?he:a[g]})),e||he},f.fullfill=(c1=/\{([^\}]+)\}/g,u1=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,r){return String(e).replace(c1,function(a,c){return function(g,w,P){var A=P;return w.replace(u1,function(E,F,J,ae,Z){F=F||ae,A&&(F in A&&(A=A[F]),typeof A=="function"&&Z&&(A=A()))}),A=(A==null||A==P?g:A)+""}(a,c,r)})}),f.ninja=function(){if(W.was)O.win.Raphael=W.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return f},f.st=Fe,d.on("raphael.DOMload",function(){C=!0}),(it=document).readyState==null&&it.addEventListener&&(it.addEventListener("DOMContentLoaded",h1=function(){it.removeEventListener("DOMContentLoaded",h1,!1),it.readyState="complete"},!1),it.readyState="loading"),function e(){/in/.test(it.readyState)?setTimeout(e,9):f.eve("raphael.DOMload")}(),f}.apply(S,R))===void 0||(k.exports=q)},function(k,S,v){var R,q;R=[v(0),v(3),v(4)],(q=function(d){return d}.apply(S,R))===void 0||(k.exports=q)},function(k,S,v){var R,q,d,f,C,T,H,z,L,D,O,W,te,j;f="hasOwnProperty",C=/[\.\/]/,T=/\s*,\s*/,H=function($,oe){return $-oe},z={n:{}},L=function(){for(var $=0,oe=this.length;$<oe;$++)if(this[$]!==void 0)return this[$]},D=function(){for(var $=this.length;--$;)if(this[$]!==void 0)return this[$]},O=Object.prototype.toString,W=String,te=Array.isArray||function($){return $ instanceof Array||O.call($)=="[object Array]"},(j=function($,oe){var he,pe=d,U=Array.prototype.slice.call(arguments,2),re=j.listeners($),I=0,_e=[],xe={},me=[],Se=q;me.firstDefined=L,me.lastDefined=D,q=$,d=0;for(var X=0,we=re.length;X<we;X++)"zIndex"in re[X]&&(_e.push(re[X].zIndex),re[X].zIndex<0&&(xe[re[X].zIndex]=re[X]));for(_e.sort(H);_e[I]<0;)if(he=xe[_e[I++]],me.push(he.apply(oe,U)),d)return d=pe,me;for(X=0;X<we;X++)if("zIndex"in(he=re[X]))if(he.zIndex==_e[I]){if(me.push(he.apply(oe,U)),d)break;do if((he=xe[_e[++I]])&&me.push(he.apply(oe,U)),d)break;while(he)}else xe[he.zIndex]=he;else if(me.push(he.apply(oe,U)),d)break;return d=pe,q=Se,me})._events=z,j.listeners=function($){var oe,he,pe,U,re,I,_e,xe,me=te($)?$:$.split(C),Se=z,X=[Se],we=[];for(U=0,re=me.length;U<re;U++){for(xe=[],I=0,_e=X.length;I<_e;I++)for(he=[(Se=X[I].n)[me[U]],Se["*"]],pe=2;pe--;)(oe=he[pe])&&(xe.push(oe),we=we.concat(oe.f||[]));X=xe}return we},j.separator=function($){$?($="["+($=W($).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",C=new RegExp($)):C=/[\.\/]/},j.on=function($,oe){if(typeof oe!="function")return function(){};for(var he=te($)?te($[0])?$:[$]:W($).split(T),pe=0,U=he.length;pe<U;pe++)(function(re){for(var I,_e=te(re)?re:W(re).split(C),xe=z,me=0,Se=_e.length;me<Se;me++)xe=(xe=xe.n).hasOwnProperty(_e[me])&&xe[_e[me]]||(xe[_e[me]]={n:{}});for(xe.f=xe.f||[],me=0,Se=xe.f.length;me<Se;me++)if(xe.f[me]==oe){I=!0;break}!I&&xe.f.push(oe)})(he[pe]);return function(re){+re==+re&&(oe.zIndex=+re)}},j.f=function($){var oe=[].slice.call(arguments,1);return function(){j.apply(null,[$,null].concat(oe).concat([].slice.call(arguments,0)))}},j.stop=function(){d=1},j.nt=function($){var oe=te(q)?q.join("."):q;return $?new RegExp("(?:\\.|\\/|^)"+$+"(?:\\.|\\/|$)").test(oe):oe},j.nts=function(){return te(q)?q:q.split(C)},j.off=j.unbind=function($,oe){if($){var he=te($)?te($[0])?$:[$]:W($).split(T);if(he.length>1)for(var pe=0,U=he.length;pe<U;pe++)j.off(he[pe],oe);else{he=te($)?$:W($).split(C);var re,I,_e,xe,me,Se=[z];for(pe=0,U=he.length;pe<U;pe++)for(xe=0;xe<Se.length;xe+=_e.length-2){if(_e=[xe,1],re=Se[xe].n,he[pe]!="*")re[he[pe]]&&_e.push(re[he[pe]]);else for(I in re)re[f](I)&&_e.push(re[I]);Se.splice.apply(Se,_e)}for(pe=0,U=Se.length;pe<U;pe++)for(re=Se[pe];re.n;){if(oe){if(re.f){for(xe=0,me=re.f.length;xe<me;xe++)if(re.f[xe]==oe){re.f.splice(xe,1);break}!re.f.length&&delete re.f}for(I in re.n)if(re.n[f](I)&&re.n[I].f){var X=re.n[I].f;for(xe=0,me=X.length;xe<me;xe++)if(X[xe]==oe){X.splice(xe,1);break}!X.length&&delete re.n[I].f}}else for(I in delete re.f,re.n)re.n[f](I)&&re.n[I].f&&delete re.n[I].f;re=re.n}}}else j._events=z={n:{}}},j.once=function($,oe){var he=function(){return j.off($,he),oe.apply(this,arguments)};return j.on($,he)},j.version="0.5.0",j.toString=function(){return"You are running Eve 0.5.0"},k.exports?k.exports=j:(R=function(){return j}.apply(S,[]))===void 0||(k.exports=R)},function(k,S,v){var R,q;R=[v(0)],(q=function(d){if(!d||d.svg){var f="hasOwnProperty",C=String,T=parseFloat,H=parseInt,z=Math,L=z.max,D=z.abs,O=z.pow,W=/[, ]+/,te=d.eve,j="",$=" ",oe="http://www.w3.org/1999/xlink",he={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},pe={};d.toString=function(){return`Your browser supports SVG.
You are running RaphaÃ«l `+this.version};var U=function(t,n){if(n)for(var i in typeof t=="string"&&(t=U(t)),n)n[f](i)&&(i.substring(0,6)=="xlink:"?t.setAttributeNS(oe,i.substring(6),C(n[i])):t.setAttribute(i,C(n[i])));else(t=d._g.doc.createElementNS("http://www.w3.org/2000/svg",t)).style&&(t.style.webkitTapHighlightColor="rgba(0,0,0,0)");return t},re=function(t,n){var i="linear",l=t.id+n,p=.5,m=.5,b=t.node,N=t.paper,B=b.style,V=d._g.doc.getElementById(l);if(!V){if(n=(n=C(n).replace(d._radial_gradient,function(ve,Ae,ke){if(i="radial",Ae&&ke){p=T(Ae);var Le=2*((m=T(ke))>.5)-1;O(p-.5,2)+O(m-.5,2)>.25&&(m=z.sqrt(.25-O(p-.5,2))*Le+.5)&&m!=.5&&(m=m.toFixed(5)-1e-5*Le)}return j})).split(/\s*\-\s*/),i=="linear"){var G=n.shift();if(G=-T(G),isNaN(G))return null;var K=[0,0,z.cos(d.rad(G)),z.sin(d.rad(G))],se=1/(L(D(K[2]),D(K[3]))||1);K[2]*=se,K[3]*=se,K[2]<0&&(K[0]=-K[2],K[2]=0),K[3]<0&&(K[1]=-K[3],K[3]=0)}var de=d._parseDots(n);if(!de)return null;if(l=l.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&l!=t.gradient.id&&(N.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){V=U(i+"Gradient",{id:l}),t.gradient=V,U(V,i=="radial"?{fx:p,fy:m}:{x1:K[0],y1:K[1],x2:K[2],y2:K[3],gradientTransform:t.matrix.invert()}),N.defs.appendChild(V);for(var ge=0,be=de.length;ge<be;ge++)V.appendChild(U("stop",{offset:de[ge].offset?de[ge].offset:ge?"100%":"0%","stop-color":de[ge].color||"#fff","stop-opacity":isFinite(de[ge].opacity)?de[ge].opacity:1}))}}return U(b,{fill:I(l),opacity:1,"fill-opacity":1}),B.fill=j,B.opacity=1,B.fillOpacity=1,1},I=function(t){if((n=document.documentMode)&&(n===9||n===10))return"url('#"+t+"')";var n,i=document.location;return"url('"+(i.protocol+"//"+i.host+i.pathname+i.search)+"#"+t+"')"},_e=function(t){var n=t.getBBox(1);U(t.pattern,{patternTransform:t.matrix.invert()+" translate("+n.x+","+n.y+")"})},xe=function(t,n,i){if(t.type=="path"){for(var l,p,m,b,N,B=C(n).toLowerCase().split("-"),V=t.paper,G=i?"end":"start",K=t.node,se=t.attrs,de=se["stroke-width"],ge=B.length,be="classic",ve=3,Ae=3,ke=5;ge--;)switch(B[ge]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":be=B[ge];break;case"wide":Ae=5;break;case"narrow":Ae=2;break;case"long":ve=5;break;case"short":ve=2}if(be=="open"?(ve+=2,Ae+=2,ke+=2,m=1,b=i?4:1,N={fill:"none",stroke:se.stroke}):(b=m=ve/2,N={fill:se.stroke,stroke:"none"}),t._.arrows?i?(t._.arrows.endPath&&pe[t._.arrows.endPath]--,t._.arrows.endMarker&&pe[t._.arrows.endMarker]--):(t._.arrows.startPath&&pe[t._.arrows.startPath]--,t._.arrows.startMarker&&pe[t._.arrows.startMarker]--):t._.arrows={},be!="none"){var Le="raphael-marker-"+be,Ne="raphael-marker-"+G+be+ve+Ae+"-obj"+t.id;d._g.doc.getElementById(Le)?pe[Le]++:(V.defs.appendChild(U(U("path"),{"stroke-linecap":"round",d:he[be],id:Le})),pe[Le]=1);var Me,Be=d._g.doc.getElementById(Ne);Be?(pe[Ne]++,Me=Be.getElementsByTagName("use")[0]):(Be=U(U("marker"),{id:Ne,markerHeight:Ae,markerWidth:ve,orient:"auto",refX:b,refY:Ae/2}),Me=U(U("use"),{"xlink:href":"#"+Le,transform:(i?"rotate(180 "+ve/2+" "+Ae/2+") ":j)+"scale("+ve/ke+","+Ae/ke+")","stroke-width":(1/((ve/ke+Ae/ke)/2)).toFixed(4)}),Be.appendChild(Me),V.defs.appendChild(Be),pe[Ne]=1),U(Me,N);var Oe=m*(be!="diamond"&&be!="oval");i?(l=t._.arrows.startdx*de||0,p=d.getTotalLength(se.path)-Oe*de):(l=Oe*de,p=d.getTotalLength(se.path)-(t._.arrows.enddx*de||0)),(N={})["marker-"+G]="url(#"+Ne+")",(p||l)&&(N.d=d.getSubpath(se.path,l,p)),U(K,N),t._.arrows[G+"Path"]=Le,t._.arrows[G+"Marker"]=Ne,t._.arrows[G+"dx"]=Oe,t._.arrows[G+"Type"]=be,t._.arrows[G+"String"]=n}else i?(l=t._.arrows.startdx*de||0,p=d.getTotalLength(se.path)-l):(l=0,p=d.getTotalLength(se.path)-(t._.arrows.enddx*de||0)),t._.arrows[G+"Path"]&&U(K,{d:d.getSubpath(se.path,l,p)}),delete t._.arrows[G+"Path"],delete t._.arrows[G+"Marker"],delete t._.arrows[G+"dx"],delete t._.arrows[G+"Type"],delete t._.arrows[G+"String"];for(N in pe)if(pe[f](N)&&!pe[N]){var qe=d._g.doc.getElementById(N);qe&&qe.parentNode.removeChild(qe)}}},me={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},Se=function(t,n,i){if(n=me[C(n).toLowerCase()]){for(var l=t.attrs["stroke-width"]||"1",p={round:l,square:l,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,m=[],b=n.length;b--;)m[b]=n[b]*l+(b%2?1:-1)*p;U(t.node,{"stroke-dasharray":m.join(",")})}else U(t.node,{"stroke-dasharray":"none"})},X=function(t,n){var i=t.node,l=t.attrs,p=i.style.visibility;for(var m in i.style.visibility="hidden",n)if(n[f](m)){if(!d._availableAttrs[f](m))continue;var b=n[m];switch(l[m]=b,m){case"blur":t.blur(b);break;case"title":var N=i.getElementsByTagName("title");if(N.length&&(N=N[0]))N.firstChild.nodeValue=b;else{N=U("title");var B=d._g.doc.createTextNode(b);N.appendChild(B),i.appendChild(N)}break;case"href":case"target":var V=i.parentNode;if(V.tagName.toLowerCase()!="a"){var G=U("a");V.insertBefore(G,i),G.appendChild(i),V=G}m=="target"?V.setAttributeNS(oe,"show",b=="blank"?"new":b):V.setAttributeNS(oe,m,b);break;case"cursor":i.style.cursor=b;break;case"transform":t.transform(b);break;case"arrow-start":xe(t,b);break;case"arrow-end":xe(t,b,1);break;case"clip-rect":var K=C(b).split(W);if(K.length==4){t.clip&&t.clip.parentNode.parentNode.removeChild(t.clip.parentNode);var se=U("clipPath"),de=U("rect");se.id=d.createUUID(),U(de,{x:K[0],y:K[1],width:K[2],height:K[3]}),se.appendChild(de),t.paper.defs.appendChild(se),U(i,{"clip-path":"url(#"+se.id+")"}),t.clip=de}if(!b){var ge=i.getAttribute("clip-path");if(ge){var be=d._g.doc.getElementById(ge.replace(/(^url\(#|\)$)/g,j));be&&be.parentNode.removeChild(be),U(i,{"clip-path":j}),delete t.clip}}break;case"path":t.type=="path"&&(U(i,{d:b?l.path=d._pathToAbsolute(b):"M0,0"}),t._.dirty=1,t._.arrows&&("startString"in t._.arrows&&xe(t,t._.arrows.startString),"endString"in t._.arrows&&xe(t,t._.arrows.endString,1)));break;case"width":if(i.setAttribute(m,b),t._.dirty=1,!l.fx)break;m="x",b=l.x;case"x":l.fx&&(b=-l.x-(l.width||0));case"rx":if(m=="rx"&&t.type=="rect")break;case"cx":i.setAttribute(m,b),t.pattern&&_e(t),t._.dirty=1;break;case"height":if(i.setAttribute(m,b),t._.dirty=1,!l.fy)break;m="y",b=l.y;case"y":l.fy&&(b=-l.y-(l.height||0));case"ry":if(m=="ry"&&t.type=="rect")break;case"cy":i.setAttribute(m,b),t.pattern&&_e(t),t._.dirty=1;break;case"r":t.type=="rect"?U(i,{rx:b,ry:b}):i.setAttribute(m,b),t._.dirty=1;break;case"src":t.type=="image"&&i.setAttributeNS(oe,"href",b);break;case"stroke-width":t._.sx==1&&t._.sy==1||(b/=L(D(t._.sx),D(t._.sy))||1),i.setAttribute(m,b),l["stroke-dasharray"]&&Se(t,l["stroke-dasharray"],n),t._.arrows&&("startString"in t._.arrows&&xe(t,t._.arrows.startString),"endString"in t._.arrows&&xe(t,t._.arrows.endString,1));break;case"stroke-dasharray":Se(t,b,n);break;case"fill":var ve=C(b).match(d._ISURL);if(ve){se=U("pattern");var Ae=U("image");se.id=d.createUUID(),U(se,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),U(Ae,{x:0,y:0,"xlink:href":ve[1]}),se.appendChild(Ae),function(Be){d._preload(ve[1],function(){var Oe=this.offsetWidth,qe=this.offsetHeight;U(Be,{width:Oe,height:qe}),U(Ae,{width:Oe,height:qe})})}(se),t.paper.defs.appendChild(se),U(i,{fill:"url(#"+se.id+")"}),t.pattern=se,t.pattern&&_e(t);break}var ke=d.getRGB(b);if(ke.error){if((t.type=="circle"||t.type=="ellipse"||C(b).charAt()!="r")&&re(t,b)){if("opacity"in l||"fill-opacity"in l){var Le=d._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,j));if(Le){var Ne=Le.getElementsByTagName("stop");U(Ne[Ne.length-1],{"stop-opacity":("opacity"in l?l.opacity:1)*("fill-opacity"in l?l["fill-opacity"]:1)})}}l.gradient=b,l.fill="none";break}}else delete n.gradient,delete l.gradient,!d.is(l.opacity,"undefined")&&d.is(n.opacity,"undefined")&&U(i,{opacity:l.opacity}),!d.is(l["fill-opacity"],"undefined")&&d.is(n["fill-opacity"],"undefined")&&U(i,{"fill-opacity":l["fill-opacity"]});ke[f]("opacity")&&U(i,{"fill-opacity":ke.opacity>1?ke.opacity/100:ke.opacity});case"stroke":ke=d.getRGB(b),i.setAttribute(m,ke.hex),m=="stroke"&&ke[f]("opacity")&&U(i,{"stroke-opacity":ke.opacity>1?ke.opacity/100:ke.opacity}),m=="stroke"&&t._.arrows&&("startString"in t._.arrows&&xe(t,t._.arrows.startString),"endString"in t._.arrows&&xe(t,t._.arrows.endString,1));break;case"gradient":(t.type=="circle"||t.type=="ellipse"||C(b).charAt()!="r")&&re(t,b);break;case"opacity":l.gradient&&!l[f]("stroke-opacity")&&U(i,{"stroke-opacity":b>1?b/100:b});case"fill-opacity":if(l.gradient){(Le=d._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,j)))&&(Ne=Le.getElementsByTagName("stop"),U(Ne[Ne.length-1],{"stop-opacity":b}));break}default:m=="font-size"&&(b=H(b,10)+"px");var Me=m.replace(/(\-.)/g,function(Be){return Be.substring(1).toUpperCase()});i.style[Me]=b,t._.dirty=1,i.setAttribute(m,b)}}we(t,n),i.style.visibility=p},we=function(t,n){if(t.type=="text"&&(n[f]("text")||n[f]("font")||n[f]("font-size")||n[f]("x")||n[f]("y"))){var i=t.attrs,l=t.node,p=l.firstChild?H(d._g.doc.defaultView.getComputedStyle(l.firstChild,j).getPropertyValue("font-size"),10):10;if(n[f]("text")){for(i.text=n.text;l.firstChild;)l.removeChild(l.firstChild);for(var m,b=C(n.text).split(`
`),N=[],B=0,V=b.length;B<V;B++)m=U("tspan"),B&&U(m,{dy:1.2*p,x:i.x}),m.appendChild(d._g.doc.createTextNode(b[B])),l.appendChild(m),N[B]=m}else for(B=0,V=(N=l.getElementsByTagName("tspan")).length;B<V;B++)B?U(N[B],{dy:1.2*p,x:i.x}):U(N[0],{dy:0});U(l,{x:i.x,y:i.y}),t._.dirty=1;var G=t._getBBox(),K=i.y-(G.y+G.height/2);K&&d.is(K,"finite")&&U(N[0],{dy:K})}},Ce=function(t){return t.parentNode&&t.parentNode.tagName.toLowerCase()==="a"?t.parentNode:t},ee=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),t.raphaelid=this.id,this.matrix=d.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},s=d.el;ee.prototype=s,s.constructor=ee,d._engine.path=function(t,n){var i=U("path");n.canvas&&n.canvas.appendChild(i);var l=new ee(i,n);return l.type="path",X(l,{fill:"none",stroke:"#000",path:t}),l},s.rotate=function(t,n,i){if(this.removed)return this;if((t=C(t).split(W)).length-1&&(n=T(t[1]),i=T(t[2])),t=T(t[0]),i==null&&(n=i),n==null||i==null){var l=this.getBBox(1);n=l.x+l.width/2,i=l.y+l.height/2}return this.transform(this._.transform.concat([["r",t,n,i]])),this},s.scale=function(t,n,i,l){if(this.removed)return this;if((t=C(t).split(W)).length-1&&(n=T(t[1]),i=T(t[2]),l=T(t[3])),t=T(t[0]),n==null&&(n=t),l==null&&(i=l),i==null||l==null)var p=this.getBBox(1);return i=i==null?p.x+p.width/2:i,l=l==null?p.y+p.height/2:l,this.transform(this._.transform.concat([["s",t,n,i,l]])),this},s.translate=function(t,n){return this.removed?this:((t=C(t).split(W)).length-1&&(n=T(t[1])),t=T(t[0])||0,n=+n||0,this.transform(this._.transform.concat([["t",t,n]])),this)},s.transform=function(t){var n=this._;if(t==null)return n.transform;if(d._extractTransform(this,t),this.clip&&U(this.clip,{transform:this.matrix.invert()}),this.pattern&&_e(this),this.node&&U(this.node,{transform:this.matrix}),n.sx!=1||n.sy!=1){var i=this.attrs[f]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},s.hide=function(){return this.removed||(this.node.style.display="none"),this},s.show=function(){return this.removed||(this.node.style.display=""),this},s.remove=function(){var t=Ce(this.node);if(!this.removed&&t.parentNode){var n=this.paper;for(var i in n.__set__&&n.__set__.exclude(this),te.unbind("raphael.*.*."+this.id),this.gradient&&n.defs.removeChild(this.gradient),d._tear(this,n),t.parentNode.removeChild(t),this.removeData(),this)this[i]=typeof this[i]=="function"?d._removedFactory(i):null;this.removed=!0}},s._getBBox=function(){if(this.node.style.display=="none"){this.show();var t=!0}var n,i=!1;this.paper.canvas.parentElement?n=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(n=this.paper.canvas.parentNode.style),n&&n.display=="none"&&(i=!0,n.display="");var l={};try{l=this.node.getBBox()}catch(p){l={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{l=l||{},i&&(n.display="none")}return t&&this.hide(),l},s.attr=function(t,n){if(this.removed)return this;if(t==null){var i={};for(var l in this.attrs)this.attrs[f](l)&&(i[l]=this.attrs[l]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(n==null&&d.is(t,"string")){if(t=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(t=="transform")return this._.transform;for(var p=t.split(W),m={},b=0,N=p.length;b<N;b++)(t=p[b])in this.attrs?m[t]=this.attrs[t]:d.is(this.paper.customAttributes[t],"function")?m[t]=this.paper.customAttributes[t].def:m[t]=d._availableAttrs[t];return N-1?m:m[p[0]]}if(n==null&&d.is(t,"array")){for(m={},b=0,N=t.length;b<N;b++)m[t[b]]=this.attr(t[b]);return m}if(n!=null){var B={};B[t]=n}else t!=null&&d.is(t,"object")&&(B=t);for(var V in B)te("raphael.attr."+V+"."+this.id,this,B[V]);for(V in this.paper.customAttributes)if(this.paper.customAttributes[f](V)&&B[f](V)&&d.is(this.paper.customAttributes[V],"function")){var G=this.paper.customAttributes[V].apply(this,[].concat(B[V]));for(var K in this.attrs[V]=B[V],G)G[f](K)&&(B[K]=G[K])}return X(this,B),this},s.toFront=function(){if(this.removed)return this;var t=Ce(this.node);t.parentNode.appendChild(t);var n=this.paper;return n.top!=this&&d._tofront(this,n),this},s.toBack=function(){if(this.removed)return this;var t=Ce(this.node),n=t.parentNode;return n.insertBefore(t,n.firstChild),d._toback(this,this.paper),this.paper,this},s.insertAfter=function(t){if(this.removed||!t)return this;var n=Ce(this.node),i=Ce(t.node||t[t.length-1].node);return i.nextSibling?i.parentNode.insertBefore(n,i.nextSibling):i.parentNode.appendChild(n),d._insertafter(this,t,this.paper),this},s.insertBefore=function(t){if(this.removed||!t)return this;var n=Ce(this.node),i=Ce(t.node||t[0].node);return i.parentNode.insertBefore(n,i),d._insertbefore(this,t,this.paper),this},s.blur=function(t){var n=this;if(+t!=0){var i=U("filter"),l=U("feGaussianBlur");n.attrs.blur=t,i.id=d.createUUID(),U(l,{stdDeviation:+t||1.5}),i.appendChild(l),n.paper.defs.appendChild(i),n._blur=i,U(n.node,{filter:"url(#"+i.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter");return n},d._engine.circle=function(t,n,i,l){var p=U("circle");t.canvas&&t.canvas.appendChild(p);var m=new ee(p,t);return m.attrs={cx:n,cy:i,r:l,fill:"none",stroke:"#000"},m.type="circle",U(p,m.attrs),m},d._engine.rect=function(t,n,i,l,p,m){var b=U("rect");t.canvas&&t.canvas.appendChild(b);var N=new ee(b,t);return N.attrs={x:n,y:i,width:l,height:p,rx:m||0,ry:m||0,fill:"none",stroke:"#000"},N.type="rect",U(b,N.attrs),N},d._engine.ellipse=function(t,n,i,l,p){var m=U("ellipse");t.canvas&&t.canvas.appendChild(m);var b=new ee(m,t);return b.attrs={cx:n,cy:i,rx:l,ry:p,fill:"none",stroke:"#000"},b.type="ellipse",U(m,b.attrs),b},d._engine.image=function(t,n,i,l,p,m){var b=U("image");U(b,{x:i,y:l,width:p,height:m,preserveAspectRatio:"none"}),b.setAttributeNS(oe,"href",n),t.canvas&&t.canvas.appendChild(b);var N=new ee(b,t);return N.attrs={x:i,y:l,width:p,height:m,src:n},N.type="image",N},d._engine.text=function(t,n,i,l){var p=U("text");t.canvas&&t.canvas.appendChild(p);var m=new ee(p,t);return m.attrs={x:n,y:i,"text-anchor":"middle",text:l,"font-family":d._availableAttrs["font-family"],"font-size":d._availableAttrs["font-size"],stroke:"none",fill:"#000"},m.type="text",X(m,m.attrs),m},d._engine.setSize=function(t,n){return this.width=t||this.width,this.height=n||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},d._engine.create=function(){var t=d._getContainer.apply(0,arguments),n=t&&t.container;if(!n)throw new Error("SVG container not found.");var i,l=t.x,p=t.y,m=t.width,b=t.height,N=U("svg"),B="overflow:hidden;";return l=l||0,p=p||0,U(N,{height:b=b||342,version:1.1,width:m=m||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),n==1?(N.style.cssText=B+"position:absolute;left:"+l+"px;top:"+p+"px",d._g.doc.body.appendChild(N),i=1):(N.style.cssText=B+"position:relative",n.firstChild?n.insertBefore(N,n.firstChild):n.appendChild(N)),(n=new d._Paper).width=m,n.height=b,n.canvas=N,n.clear(),n._left=n._top=0,i&&(n.renderfix=function(){}),n.renderfix(),n},d._engine.setViewBox=function(t,n,i,l,p){te("raphael.setViewBox",this,this._viewBox,[t,n,i,l,p]);var m,b,N=this.getSize(),B=L(i/N.width,l/N.height),V=this.top,G=p?"xMidYMid meet":"xMinYMin";for(t==null?(this._vbSize&&(B=1),delete this._vbSize,m="0 0 "+this.width+$+this.height):(this._vbSize=B,m=t+$+n+$+i+$+l),U(this.canvas,{viewBox:m,preserveAspectRatio:G});B&&V;)b="stroke-width"in V.attrs?V.attrs["stroke-width"]:1,V.attr({"stroke-width":b}),V._.dirty=1,V._.dirtyT=1,V=V.prev;return this._viewBox=[t,n,i,l,!!p],this},d.prototype.renderfix=function(){var t,n=this.canvas,i=n.style;try{t=n.getScreenCTM()||n.createSVGMatrix()}catch(m){t=n.createSVGMatrix()}var l=-t.e%1,p=-t.f%1;(l||p)&&(l&&(this._left=(this._left+l)%1,i.left=this._left+"px"),p&&(this._top=(this._top+p)%1,i.top=this._top+"px"))},d.prototype.clear=function(){d.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=U("desc")).appendChild(d._g.doc.createTextNode("Created with RaphaÃ«l "+d.version)),t.appendChild(this.desc),t.appendChild(this.defs=U("defs"))},d.prototype.remove=function(){for(var t in te("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]=typeof this[t]=="function"?d._removedFactory(t):null};var o=d.st;for(var h in s)s[f](h)&&!o[f](h)&&(o[h]=function(t){return function(){var n=arguments;return this.forEach(function(i){i[t].apply(i,n)})}}(h))}}.apply(S,R))===void 0||(k.exports=q)},function(k,S,v){var R,q;R=[v(0)],(q=function(d){if(!d||d.vml){var f="hasOwnProperty",C=String,T=parseFloat,H=Math,z=H.round,L=H.max,D=H.min,O=H.abs,W=/[, ]+/,te=d.eve,j=" ",$="",oe={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},he=/([clmz]),?([^clmz]*)/gi,pe=/ progid:\S+Blur\([^\)]+\)/g,U=/-?[^,\s-]+/g,re="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",I=21600,_e={path:1,rect:1,image:1},xe={circle:1,ellipse:1},me=function(n,i,l){var p=d.matrix();return p.rotate(-n,.5,.5),{dx:p.x(i,l),dy:p.y(i,l)}},Se=function(n,i,l,p,m,b){var N=n._,B=n.matrix,V=N.fillpos,G=n.node,K=G.style,se=1,de="",ge=I/i,be=I/l;if(K.visibility="hidden",i&&l){if(G.coordsize=O(ge)+j+O(be),K.rotation=b*(i*l<0?-1:1),b){var ve=me(b,p,m);p=ve.dx,m=ve.dy}if(i<0&&(de+="x"),l<0&&(de+=" y")&&(se=-1),K.flip=de,G.coordorigin=p*-ge+j+m*-be,V||N.fillsize){var Ae=G.getElementsByTagName("fill");Ae=Ae&&Ae[0],G.removeChild(Ae),V&&(ve=me(b,B.x(V[0],V[1]),B.y(V[0],V[1])),Ae.position=ve.dx*se+j+ve.dy*se),N.fillsize&&(Ae.size=N.fillsize[0]*O(i)+j+N.fillsize[1]*O(l)),G.appendChild(Ae)}K.visibility="visible"}};d.toString=function(){return`Your browser doesnâ€™t support SVG. Falling down to VML.
You are running RaphaÃ«l `+this.version};var X,we=function(n,i,l){for(var p=C(i).toLowerCase().split("-"),m=l?"end":"start",b=p.length,N="classic",B="medium",V="medium";b--;)switch(p[b]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":N=p[b];break;case"wide":case"narrow":V=p[b];break;case"long":case"short":B=p[b]}var G=n.node.getElementsByTagName("stroke")[0];G[m+"arrow"]=N,G[m+"arrowlength"]=B,G[m+"arrowwidth"]=V},Ce=function(n,i){n.attrs=n.attrs||{};var l=n.node,p=n.attrs,m=l.style,b=_e[n.type]&&(i.x!=p.x||i.y!=p.y||i.width!=p.width||i.height!=p.height||i.cx!=p.cx||i.cy!=p.cy||i.rx!=p.rx||i.ry!=p.ry||i.r!=p.r),N=xe[n.type]&&(p.cx!=i.cx||p.cy!=i.cy||p.r!=i.r||p.rx!=i.rx||p.ry!=i.ry),B=n;for(var V in i)i[f](V)&&(p[V]=i[V]);if(b&&(p.path=d._getPath[n.type](n),n._.dirty=1),i.href&&(l.href=i.href),i.title&&(l.title=i.title),i.target&&(l.target=i.target),i.cursor&&(m.cursor=i.cursor),"blur"in i&&n.blur(i.blur),(i.path&&n.type=="path"||b)&&(l.path=function(ze){var Qe=/[ahqstv]/gi,ct=d._pathToAbsolute;if(C(ze).match(Qe)&&(ct=d._path2curve),Qe=/[clmz]/g,ct==d._pathToAbsolute&&!C(ze).match(Qe)){var Ue=C(ze).replace(he,function(Zt,dt,ft){var Ze=[],Tt=dt.toLowerCase()=="m",nt=oe[dt];return ft.replace(U,function(Mt){Tt&&Ze.length==2&&(nt+=Ze+oe[dt=="m"?"l":"L"],Ze=[]),Ze.push(z(Mt*I))}),nt+Ze});return Ue}var ut,Ge,_t=ct(ze);Ue=[];for(var ht=0,kt=_t.length;ht<kt;ht++){ut=_t[ht],(Ge=_t[ht][0].toLowerCase())=="z"&&(Ge="x");for(var Ke=1,He=ut.length;Ke<He;Ke++)Ge+=z(ut[Ke]*I)+(Ke!=He-1?",":$);Ue.push(Ge)}return Ue.join(j)}(~C(p.path).toLowerCase().indexOf("r")?d._pathToAbsolute(p.path):p.path),n._.dirty=1,n.type=="image"&&(n._.fillpos=[p.x,p.y],n._.fillsize=[p.width,p.height],Se(n,1,1,0,0,0))),"transform"in i&&n.transform(i.transform),N){var G=+p.cx,K=+p.cy,se=+p.rx||+p.r||0,de=+p.ry||+p.r||0;l.path=d.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",z((G-se)*I),z((K-de)*I),z((G+se)*I),z((K+de)*I),z(G*I)),n._.dirty=1}if("clip-rect"in i){var ge=C(i["clip-rect"]).split(W);if(ge.length==4){ge[2]=+ge[2]+ +ge[0],ge[3]=+ge[3]+ +ge[1];var be=l.clipRect||d._g.doc.createElement("div"),ve=be.style;ve.clip=d.format("rect({1}px {2}px {3}px {0}px)",ge),l.clipRect||(ve.position="absolute",ve.top=0,ve.left=0,ve.width=n.paper.width+"px",ve.height=n.paper.height+"px",l.parentNode.insertBefore(be,l),be.appendChild(l),l.clipRect=be)}i["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(n.textpath){var Ae=n.textpath.style;i.font&&(Ae.font=i.font),i["font-family"]&&(Ae.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,$)+'"'),i["font-size"]&&(Ae.fontSize=i["font-size"]),i["font-weight"]&&(Ae.fontWeight=i["font-weight"]),i["font-style"]&&(Ae.fontStyle=i["font-style"])}if("arrow-start"in i&&we(B,i["arrow-start"]),"arrow-end"in i&&we(B,i["arrow-end"],1),i.opacity!=null||i.fill!=null||i.src!=null||i.stroke!=null||i["stroke-width"]!=null||i["stroke-opacity"]!=null||i["fill-opacity"]!=null||i["stroke-dasharray"]!=null||i["stroke-miterlimit"]!=null||i["stroke-linejoin"]!=null||i["stroke-linecap"]!=null){var ke=l.getElementsByTagName("fill");if(!(ke=ke&&ke[0])&&(ke=X("fill")),n.type=="image"&&i.src&&(ke.src=i.src),i.fill&&(ke.on=!0),ke.on!=null&&i.fill!="none"&&i.fill!==null||(ke.on=!1),ke.on&&i.fill){var Le=C(i.fill).match(d._ISURL);if(Le){ke.parentNode==l&&l.removeChild(ke),ke.rotate=!0,ke.src=Le[1],ke.type="tile";var Ne=n.getBBox(1);ke.position=Ne.x+j+Ne.y,n._.fillpos=[Ne.x,Ne.y],d._preload(Le[1],function(){n._.fillsize=[this.offsetWidth,this.offsetHeight]})}else ke.color=d.getRGB(i.fill).hex,ke.src=$,ke.type="solid",d.getRGB(i.fill).error&&(B.type in{circle:1,ellipse:1}||C(i.fill).charAt()!="r")&&ee(B,i.fill,ke)&&(p.fill="none",p.gradient=i.fill,ke.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var Me=((+p["fill-opacity"]+1||2)-1)*((+p.opacity+1||2)-1)*((+d.getRGB(i.fill).o+1||2)-1);Me=D(L(Me,0),1),ke.opacity=Me,ke.src&&(ke.color="none")}l.appendChild(ke);var Be=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],Oe=!1;!Be&&(Oe=Be=X("stroke")),(i.stroke&&i.stroke!="none"||i["stroke-width"]||i["stroke-opacity"]!=null||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])&&(Be.on=!0),(i.stroke=="none"||i.stroke===null||Be.on==null||i.stroke==0||i["stroke-width"]==0)&&(Be.on=!1);var qe=d.getRGB(i.stroke);Be.on&&i.stroke&&(Be.color=qe.hex),Me=((+p["stroke-opacity"]+1||2)-1)*((+p.opacity+1||2)-1)*((+qe.o+1||2)-1);var je=.75*(T(i["stroke-width"])||1);if(Me=D(L(Me,0),1),i["stroke-width"]==null&&(je=p["stroke-width"]),i["stroke-width"]&&(Be.weight=je),je&&je<1&&(Me*=je)&&(Be.weight=1),Be.opacity=Me,i["stroke-linejoin"]&&(Be.joinstyle=i["stroke-linejoin"]||"miter"),Be.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(Be.endcap=i["stroke-linecap"]=="butt"?"flat":i["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in i){var wt={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Be.dashstyle=wt[f](i["stroke-dasharray"])?wt[i["stroke-dasharray"]]:$}Oe&&l.appendChild(Be)}if(B.type=="text"){B.paper.canvas.style.display=$;var Je=B.paper.span,ot=p.font&&p.font.match(/\d+(?:\.\d*)?(?=px)/);m=Je.style,p.font&&(m.font=p.font),p["font-family"]&&(m.fontFamily=p["font-family"]),p["font-weight"]&&(m.fontWeight=p["font-weight"]),p["font-style"]&&(m.fontStyle=p["font-style"]),ot=T(p["font-size"]||ot&&ot[0])||10,m.fontSize=100*ot+"px",B.textpath.string&&(Je.innerHTML=C(B.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var at=Je.getBoundingClientRect();B.W=p.w=(at.right-at.left)/100,B.H=p.h=(at.bottom-at.top)/100,B.X=p.x,B.Y=p.y+B.H/2,("x"in i||"y"in i)&&(B.path.v=d.format("m{0},{1}l{2},{1}",z(p.x*I),z(p.y*I),z(p.x*I)+1));for(var Ct=["x","y","text","font","font-family","font-weight","font-style","font-size"],lt=0,Nt=Ct.length;lt<Nt;lt++)if(Ct[lt]in i){B._.dirty=1;break}switch(p["text-anchor"]){case"start":B.textpath.style["v-text-align"]="left",B.bbx=B.W/2;break;case"end":B.textpath.style["v-text-align"]="right",B.bbx=-B.W/2;break;default:B.textpath.style["v-text-align"]="center",B.bbx=0}B.textpath.style["v-text-kern"]=!0}},ee=function(n,i,l){n.attrs=n.attrs||{},n.attrs;var p=Math.pow,m="linear",b=".5 .5";if(n.attrs.gradient=i,i=(i=C(i).replace(d._radial_gradient,function(se,de,ge){return m="radial",de&&ge&&(de=T(de),ge=T(ge),p(de-.5,2)+p(ge-.5,2)>.25&&(ge=H.sqrt(.25-p(de-.5,2))*(2*(ge>.5)-1)+.5),b=de+j+ge),$})).split(/\s*\-\s*/),m=="linear"){var N=i.shift();if(N=-T(N),isNaN(N))return null}var B=d._parseDots(i);if(!B)return null;if(n=n.shape||n.node,B.length){n.removeChild(l),l.on=!0,l.method="none",l.color=B[0].color,l.color2=B[B.length-1].color;for(var V=[],G=0,K=B.length;G<K;G++)B[G].offset&&V.push(B[G].offset+j+B[G].color);l.colors=V.length?V.join():"0% "+l.color,m=="radial"?(l.type="gradientTitle",l.focus="100%",l.focussize="0 0",l.focusposition=b,l.angle=0):(l.type="gradient",l.angle=(270-N)%360),n.appendChild(l)}return 1},s=function(n,i){this[0]=this.node=n,n.raphael=!0,this.id=d._oid++,n.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=i,this.matrix=d.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},o=d.el;s.prototype=o,o.constructor=s,o.transform=function(n){if(n==null)return this._.transform;var i,l=this.paper._viewBoxShift,p=l?"s"+[l.scale,l.scale]+"-1-1t"+[l.dx,l.dy]:$;l&&(i=n=C(n).replace(/\.{3}|\u2026/g,this._.transform||$)),d._extractTransform(this,p+n);var m,b=this.matrix.clone(),N=this.skew,B=this.node,V=~C(this.attrs.fill).indexOf("-"),G=!C(this.attrs.fill).indexOf("url(");if(b.translate(1,1),G||V||this.type=="image")if(N.matrix="1 0 0 1",N.offset="0 0",m=b.split(),V&&m.noRotation||!m.isSimple){B.style.filter=b.toFilter();var K=this.getBBox(),se=this.getBBox(1),de=K.x-se.x,ge=K.y-se.y;B.coordorigin=de*-I+j+ge*-I,Se(this,1,1,de,ge,0)}else B.style.filter=$,Se(this,m.scalex,m.scaley,m.dx,m.dy,m.rotate);else B.style.filter=$,N.matrix=C(b),N.offset=b.offset();return i!==null&&(this._.transform=i,d._extractTransform(this,i)),this},o.rotate=function(n,i,l){if(this.removed)return this;if(n!=null){if((n=C(n).split(W)).length-1&&(i=T(n[1]),l=T(n[2])),n=T(n[0]),l==null&&(i=l),i==null||l==null){var p=this.getBBox(1);i=p.x+p.width/2,l=p.y+p.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",n,i,l]])),this}},o.translate=function(n,i){return this.removed?this:((n=C(n).split(W)).length-1&&(i=T(n[1])),n=T(n[0])||0,i=+i||0,this._.bbox&&(this._.bbox.x+=n,this._.bbox.y+=i),this.transform(this._.transform.concat([["t",n,i]])),this)},o.scale=function(n,i,l,p){if(this.removed)return this;if((n=C(n).split(W)).length-1&&(i=T(n[1]),l=T(n[2]),p=T(n[3]),isNaN(l)&&(l=null),isNaN(p)&&(p=null)),n=T(n[0]),i==null&&(i=n),p==null&&(l=p),l==null||p==null)var m=this.getBBox(1);return l=l==null?m.x+m.width/2:l,p=p==null?m.y+m.height/2:p,this.transform(this._.transform.concat([["s",n,i,l,p]])),this._.dirtyT=1,this},o.hide=function(){return!this.removed&&(this.node.style.display="none"),this},o.show=function(){return!this.removed&&(this.node.style.display=$),this},o.auxGetBBox=d.el.getBBox,o.getBBox=function(){var n=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var i={},l=1/this.paper._viewBoxShift.scale;return i.x=n.x-this.paper._viewBoxShift.dx,i.x*=l,i.y=n.y-this.paper._viewBoxShift.dy,i.y*=l,i.width=n.width*l,i.height=n.height*l,i.x2=i.x+i.width,i.y2=i.y+i.height,i}return n},o._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},o.remove=function(){if(!this.removed&&this.node.parentNode){for(var n in this.paper.__set__&&this.paper.__set__.exclude(this),d.eve.unbind("raphael.*.*."+this.id),d._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[n]=typeof this[n]=="function"?d._removedFactory(n):null;this.removed=!0}},o.attr=function(n,i){if(this.removed)return this;if(n==null){var l={};for(var p in this.attrs)this.attrs[f](p)&&(l[p]=this.attrs[p]);return l.gradient&&l.fill=="none"&&(l.fill=l.gradient)&&delete l.gradient,l.transform=this._.transform,l}if(i==null&&d.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var m=n.split(W),b={},N=0,B=m.length;N<B;N++)(n=m[N])in this.attrs?b[n]=this.attrs[n]:d.is(this.paper.customAttributes[n],"function")?b[n]=this.paper.customAttributes[n].def:b[n]=d._availableAttrs[n];return B-1?b:b[m[0]]}if(this.attrs&&i==null&&d.is(n,"array")){for(b={},N=0,B=n.length;N<B;N++)b[n[N]]=this.attr(n[N]);return b}var V;for(var G in i!=null&&((V={})[n]=i),i==null&&d.is(n,"object")&&(V=n),V)te("raphael.attr."+G+"."+this.id,this,V[G]);if(V){for(G in this.paper.customAttributes)if(this.paper.customAttributes[f](G)&&V[f](G)&&d.is(this.paper.customAttributes[G],"function")){var K=this.paper.customAttributes[G].apply(this,[].concat(V[G]));for(var se in this.attrs[G]=V[G],K)K[f](se)&&(V[se]=K[se])}V.text&&this.type=="text"&&(this.textpath.string=V.text),Ce(this,V)}return this},o.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&d._tofront(this,this.paper),this},o.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),d._toback(this,this.paper)),this)},o.insertAfter=function(n){return this.removed?this:(n.constructor==d.st.constructor&&(n=n[n.length-1]),n.node.nextSibling?n.node.parentNode.insertBefore(this.node,n.node.nextSibling):n.node.parentNode.appendChild(this.node),d._insertafter(this,n,this.paper),this)},o.insertBefore=function(n){return this.removed?this:(n.constructor==d.st.constructor&&(n=n[0]),n.node.parentNode.insertBefore(this.node,n.node),d._insertbefore(this,n,this.paper),this)},o.blur=function(n){var i=this.node.runtimeStyle,l=i.filter;return l=l.replace(pe,$),+n!=0?(this.attrs.blur=n,i.filter=l+j+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+n||1.5)+")",i.margin=d.format("-{0}px 0 0 -{0}px",z(+n||1.5))):(i.filter=l,i.margin=0,delete this.attrs.blur),this},d._engine.path=function(n,i){var l=X("shape");l.style.cssText=re,l.coordsize=I+j+I,l.coordorigin=i.coordorigin;var p=new s(l,i),m={fill:"none",stroke:"#000"};n&&(m.path=n),p.type="path",p.path=[],p.Path=$,Ce(p,m),i.canvas&&i.canvas.appendChild(l);var b=X("skew");return b.on=!0,l.appendChild(b),p.skew=b,p.transform($),p},d._engine.rect=function(n,i,l,p,m,b){var N=d._rectPath(i,l,p,m,b),B=n.path(N),V=B.attrs;return B.X=V.x=i,B.Y=V.y=l,B.W=V.width=p,B.H=V.height=m,V.r=b,V.path=N,B.type="rect",B},d._engine.ellipse=function(n,i,l,p,m){var b=n.path();return b.attrs,b.X=i-p,b.Y=l-m,b.W=2*p,b.H=2*m,b.type="ellipse",Ce(b,{cx:i,cy:l,rx:p,ry:m}),b},d._engine.circle=function(n,i,l,p){var m=n.path();return m.attrs,m.X=i-p,m.Y=l-p,m.W=m.H=2*p,m.type="circle",Ce(m,{cx:i,cy:l,r:p}),m},d._engine.image=function(n,i,l,p,m,b){var N=d._rectPath(l,p,m,b),B=n.path(N).attr({stroke:"none"}),V=B.attrs,G=B.node,K=G.getElementsByTagName("fill")[0];return V.src=i,B.X=V.x=l,B.Y=V.y=p,B.W=V.width=m,B.H=V.height=b,V.path=N,B.type="image",K.parentNode==G&&G.removeChild(K),K.rotate=!0,K.src=i,K.type="tile",B._.fillpos=[l,p],B._.fillsize=[m,b],G.appendChild(K),Se(B,1,1,0,0,0),B},d._engine.text=function(n,i,l,p){var m=X("shape"),b=X("path"),N=X("textpath");i=i||0,l=l||0,p=p||"",b.v=d.format("m{0},{1}l{2},{1}",z(i*I),z(l*I),z(i*I)+1),b.textpathok=!0,N.string=C(p),N.on=!0,m.style.cssText=re,m.coordsize=I+j+I,m.coordorigin="0 0";var B=new s(m,n),V={fill:"#000",stroke:"none",font:d._availableAttrs.font,text:p};B.shape=m,B.path=b,B.textpath=N,B.type="text",B.attrs.text=C(p),B.attrs.x=i,B.attrs.y=l,B.attrs.w=1,B.attrs.h=1,Ce(B,V),m.appendChild(N),m.appendChild(b),n.canvas.appendChild(m);var G=X("skew");return G.on=!0,m.appendChild(G),B.skew=G,B.transform($),B},d._engine.setSize=function(n,i){var l=this.canvas.style;return this.width=n,this.height=i,n==+n&&(n+="px"),i==+i&&(i+="px"),l.width=n,l.height=i,l.clip="rect(0 "+n+" "+i+" 0)",this._viewBox&&d._engine.setViewBox.apply(this,this._viewBox),this},d._engine.setViewBox=function(n,i,l,p,m){d.eve("raphael.setViewBox",this,this._viewBox,[n,i,l,p,m]);var b,N,B=this.getSize(),V=B.width,G=B.height;return m&&(l*(b=G/p)<V&&(n-=(V-l*b)/2/b),p*(N=V/l)<G&&(i-=(G-p*N)/2/N)),this._viewBox=[n,i,l,p,!!m],this._viewBoxShift={dx:-n,dy:-i,scale:B},this.forEach(function(K){K.transform("...")}),this},d._engine.initWin=function(n){var i=n.document;i.styleSheets.length<31?i.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):i.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!i.namespaces.rvml&&i.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),X=function(l){return i.createElement("<rvml:"+l+' class="rvml">')}}catch(l){X=function(p){return i.createElement("<"+p+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},d._engine.initWin(d._g.win),d._engine.create=function(){var n=d._getContainer.apply(0,arguments),i=n.container,l=n.height,p=n.width,m=n.x,b=n.y;if(!i)throw new Error("VML container not found.");var N=new d._Paper,B=N.canvas=d._g.doc.createElement("div"),V=B.style;return m=m||0,b=b||0,p=p||512,l=l||342,N.width=p,N.height=l,p==+p&&(p+="px"),l==+l&&(l+="px"),N.coordsize=216e5+j+216e5,N.coordorigin="0 0",N.span=d._g.doc.createElement("span"),N.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",B.appendChild(N.span),V.cssText=d.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",p,l),i==1?(d._g.doc.body.appendChild(B),V.left=m+"px",V.top=b+"px",V.position="absolute"):i.firstChild?i.insertBefore(B,i.firstChild):i.appendChild(B),N.renderfix=function(){},N},d.prototype.clear=function(){d.eve("raphael.clear",this),this.canvas.innerHTML=$,this.span=d._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},d.prototype.remove=function(){for(var n in d.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[n]=typeof this[n]=="function"?d._removedFactory(n):null;return!0};var h=d.st;for(var t in o)o[f](t)&&!h[f](t)&&(h[t]=function(n){return function(){var i=arguments;return this.forEach(function(l){l[n].apply(l,i)})}}(t))}}.apply(S,R))===void 0||(k.exports=q)}])})}),K1=X1(Q1),Lt=K1;var M={};M.Common={nodeIdIncrement:0,activeNode:0,roundFloat:function(x,u){for(var k=0,S=1;k<u;)S*=10,k++;return Math.round(x*S)/S},apply:function(x,u){if(x&&typeof u=="object")for(var k in u)x[k]=u[k];return x},addRaphEventHandler:function(x,u,k,S){try{x[u](function(v,R){return function(q,d){var f=R;f.e=q,v(f)}}(k,S))}catch(v){}},isInteger:function(x){return!isNaN(parseInt(x))},isXMLSerializerAvailable:function(){return typeof XMLSerializer=="function"},createSvgEl:function(x,u){if(x=document.createElementNS("http://www.w3.org/2000/svg",x),u)for(var k in u)u.hasOwnProperty(k)&&x.setAttribute(k,String(u[k]));return x},createGradientEl:function(x,u,k){if(u.type!="radialGradient")return!1;var S=M.Common.createSvgEl("radialGradient",{id:x,gradientUnits:"userSpaceOnUse",cx:k[0],cy:k[1],r:k[2],fx:k[0],fy:k[1]});if(u.stop)for(var v=u.stop,R=0;R<v.length;R++){var q=v[R];q["@attributes"]?S.appendChild(M.Common.createSvgEl("stop",q["@attributes"])):(q._attributes&&delete q._attributes,q._children&&delete q._children,q.__proto__&&delete q.__proto__,S.appendChild(M.Common.createSvgEl("stop",q)))}return S},setCssStyle:function(x,u){var k=document.styleSheets[0];k.addRule?k.addRule(x,u):k.insertRule&&k.insertRule(x+" { "+u+" }",k.cssRules.length)}};M.PhyloCanvas=function(){var x,u,k,S,v;return function(R,q,d,f,C){if(this.getNewickObject=function(){return k},this.clear=function(){},this.scale=function(H){S.svg.scale(H)},this.getSvg=function(){return S},this.getPhylogram=function(){return x},this.getSvgSource=function(){if(Lt.svg&&M.Common.isXMLSerializerAvailable()){var H=new XMLSerializer;return H.serializeToString(S.svg.canvas)}else return!1},typeof R=="object")if(R.xml){if(R.fileSource)var T=R.xml;else var T=xt.textToXML(R.xml);T=xt.xmlToJSON(T),v=new M.PhyloCanvas.PhyloxmlParse(T)}else if(R.phyloxml){if(R.fileSource)var T=R.phyloxml;else var T=xt.textToXML(R.phyloxml);T=xt.xmlToJSON(T),v=new M.PhyloCanvas.PhyloxmlParse(T)}else if(R.nexml){if(R.fileSource)var T=R.nexml;else var T=xt.textToXML(R.nexml);T=xt.xmlToJSON(T),v=new M.PhyloCanvas.NexmlParse(T,R)}else R.json?v=new M.PhyloCanvas.PhyloxmlParse(R.json):R.newick?v=new M.PhyloCanvas.NewickParse(R.newick):R.nexmlJson?v=new M.PhyloCanvas.NexmlJsonParse(R):alert("Please set the format of input data");else v=new M.PhyloCanvas.NewickParse(R);u=q,S=new M.PhyloCanvas.Render.SVG(u,d,f),C=="circular"?x=new M.PhyloCanvas.Render.CircularPhylogram(S,v):x=new M.PhyloCanvas.Render.Phylogram(S,v)}}();M.PhyloCanvas.prototype={};M.PhyloCanvas.Node=function(){return function(x,u){this.id=M.Common.nodeIdIncrement+=1,this.level=0,this.len=0,this.newickLen=0,this.name="",this.type="",this.chart={},this.img=[],x&&M.Common.apply(this,x),this._countAllChildren=!1,this._countImmediateChildren=!1,this._midBranchPosition=!1,this.children=new Array,u&&u.children.push(this)}}();M.PhyloCanvas.Node.prototype={getCountAllChildren:function(){if(this._countAllChildren!==!1)return this._countAllChildren;var x=0;for(var u in this.children)if(M.Common.isInteger(u)){var k=this.children[u];k.children&&k.children.length>0?x+=k.getCountAllChildren():x++}return this._countAllChildren=x,x},getCountImmediateChildren:function(){if(this._countImmediateChildren!==!1)return this._countImmediateChildren;var x=0;for(var u in this.children){var k=this.children[u];x+=k.length}return this._countImmediateChildren=x,x},getMidbranchPosition:function(x){if(this._midBranchPosition!==!1)return this._midBranchPosition;for(var u=[0,0],k=0;k<this.children.length;k++){var S=this.children[k];S.children&&S.children.length>0?k==0&&x?(u[0]=S.getMidbranchPosition(!0),u[1]+=S.getCountAllChildren()-1):k==0?(u[0]=S.getMidbranchPosition(),u[1]+=S.getCountAllChildren()):k==this.children.length-1?u[1]+=S.getMidbranchPosition():u[1]+=S.getCountAllChildren():k==0&&x?u[0]=0:k==0?(u[0]=1,u[1]+=1):(k==this.children.length-1,u[1]+=1)}return this._midBranchPosition=u[1]>=u[0]?(u[1]+u[0])/2:u[0],this._midBranchPosition}};M.PhyloCanvas.NewickParse=function(){var x,u,k,S=0,v=0,R,q,d=function(L){for(var D=new M.PhyloCanvas.Node;u!==")"&&u!==",";)u===":"?(H(),D.len=M.Common.roundFloat(C(),4),D.len==0&&(D.len=1e-4)):u==="'"||u==='"'?(D.type="label",D.name=T(u)):(D.type="label",D.name=C());return D.level=L.level+1,D},f=function(L){var D=new M.PhyloCanvas.Node;for(L&&(D.level=L.level+1);u!==")";)H(),u==="("?D.children.push(f(D)):D.children.push(d(D));return H(),u!==":"&&u!==")"&&u!==","&&u!==";"&&(D.type="label",D.name=C()),u===":"&&(H(),D.len=M.Common.roundFloat(C(),4),D.len==0&&(D.len=1e-4),D.type="stem"),D},C=function(){for(var L="";u!==":"&&u!==")"&&u!==","&&u!==";";)L+=u,H();return L},T=function(L){for(var D="";u!==L;)D+=u,H();return D},H=function(){return u=x.charAt(k),k+=1,u},z=function(L,D){if(L.children&&L.children.length)for(var O=0;O<L.children.length;O++){var W=L.children[O];W.len===0&&(W.len=1),W.newickLen=M.Common.roundFloat(W.len+L.newickLen,4),W.level>S&&(S=W.level),W.newickLen>v&&(v=W.newickLen),W.children.length>0&&z(W,L)}return L};return function(L){this.getRoot=function(){return R},this.getLevels=function(){return S},this.getNewickLen=function(){return v},this.getValidate=function(){return q},S=0,v=0,x=L,k=0,H(),R=f(),R=z(R)}}();M.PhyloCanvas.NewickParse.prototype={};M.PhyloCanvas.PhyloxmlParse=function(){var x=0,u=0,k,S,v=function(d,f){var C=new M.PhyloCanvas.Node;if(f&&(C.level=f.level+1),d.clade&&d.clade.length)for(var T=0;T<d.clade.length;T++){var H=d.clade[T];C.children.push(v(H,C))}if(d.branch_length&&(typeof d.branch_length=="object"&&(d.branch_length=d.branch_length[0].Text),C.len=M.Common.roundFloat(d.branch_length,4),C.len==0&&(C.len=1e-4)),d.color?(C.red=d.color[0].red[0].Text,C.green=d.color[0].green[0].Text,C.blue=d.color[0].blue[0].Text):(C.red=0,C.green=0,C.blue=0),d.property&&d.property[0].applies_to=="node"&&d.property[0].ref=="style:font_color"&&(C.font_color_hex=d.property[0].Text),d.name?(C.type="label",C.name=d.name[0].Text,d.name[0]&&d.name[0].style&&(C.style=d.name[0].style),d.name[0]&&d.name[0].bgStyle&&(C.bgStyle=d.name[0].bgStyle)):d.confidence&&(C.name=d.confidence[0].Text),d.sequence&&d.sequence[0]&&d.sequence[0].name&&d.sequence[0].name[0]&&d.sequence[0].name[0].Text&&(C.sequenceName=d.sequence[0].name[0].Text),d.taxonomy&&d.taxonomy[0]&&(d.taxonomy[0].scientific_name&&d.taxonomy[0].scientific_name[0]&&d.taxonomy[0].scientific_name[0].Text&&(C.taxonomyScientificName=d.taxonomy[0].scientific_name[0].Text),d.taxonomy[0].common_name&&d.taxonomy[0].common_name[0]&&d.taxonomy[0].common_name[0].Text&&(C.taxonomyCommonName=d.taxonomy[0].common_name[0].Text)),d.sequence&&d.sequence[0]&&d.sequence[0].accession&&d.sequence[0].accession[0]&&d.sequence[0].accession[0].Text&&(C.sequenceAccession=d.sequence[0].accession[0].Text),d.point&&(C.LatLong=[d.point[0].lat[0].Text,d.point[0].long[0].Text]),C.name||(C.sequenceName?C.name=C.sequenceName:C.taxonomyScientificName?C.name=C.taxonomyScientificName:C.taxonomyCommonName?C.name=C.taxonomyCommonName:C.sequenceAccession&&(C.name=C.sequenceAccession),C.name&&(C.type="label")),d.annotation&&(d.annotation[0]&&d.annotation[0].desc&&d.annotation[0].desc[0]&&d.annotation[0].desc[0].Text&&(C.description=d.annotation[0].desc[0].Text),d.annotation[0]&&d.annotation[0].uri&&d.annotation[0].uri[0]&&d.annotation[0].uri[0].Text&&(C.uri=d.annotation[0].uri[0].Text),d.annotation[0]&&d.annotation[0].img))for(var T in d.annotation[0].img)M.Common.isInteger(T)&&(C.img[T]=d.annotation[0].img[T].Text);if(d.chart&&d.chart[0])for(var T in d.chart[0])T!="Text"&&T!="_children"&&(C.chart[T]=d.chart[0][T][0].Text);return C&&C.level>1&&(C.len||(S="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),C},R=function(d,f){if(d.children&&d.children.length)for(var C=0;C<d.children.length;C++){var T=d.children[C];T.newickLen=Math.round((T.len+d.newickLen)*1e4)/1e4,T.level>x&&(x=T.level),T.newickLen>u&&(u=T.newickLen),T.children.length>0&&R(T,d)}return d},q=function(d,f){for(var C in d)C!="_children"&&C!="Text"&&(C=="rectangular"||C=="circular"?q(d[C][0],C):(M.PhyloCanvas.Render.Parameters[C]||(M.PhyloCanvas.Render.Parameters[C]={}),M.PhyloCanvas.Render.Parameters.set(C,d[C][0].Text,f)))};return function(d){if(this.getRoot=function(){return k},this.getLevels=function(){return x},this.getNewickLen=function(){return u},this.getValidate=function(){return S},d.phylogeny&&d.phylogeny[0]&&d.phylogeny[0].clade&&(k=v(d.phylogeny[0].clade[0])),d.phylogeny&&d.phylogeny[0]&&d.phylogeny[0].render&&d.phylogeny[0].render[0]){var f=d.phylogeny[0].render[0];if(f&&f.styles){var C=f.styles[0];for(var T in C)if(T!="_children"&&T!="Text")if(C[T][0].type&&C[T][0].type=="radialGradient"&&Lt.svg)C[T][0].name=T,M.PhyloCanvas.Render.Style[T]=C[T][0],M.PhyloCanvas.Render.Style.jsphylosvgGradientList||(M.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),M.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(T);else{M.PhyloCanvas.Render.Style[T]||(M.PhyloCanvas.Render.Style[T]={});for(var H in C[T][0])H!="_attributes"&&H!="_children"&&H!="type"&&(M.PhyloCanvas.Render.Style[T][H.replace("_","-")]=C[T][0][H])}}if(f&&f.parameters&&q(f.parameters[0]),f&&f.charts){var z=f.charts[0];for(var T in z)if(T!="_children"&&T!="Text")for(var H in z[T])z[T][H].type=="binary"?(z[T][H].chart=T,M.PhyloCanvas.Render.Parameters.binaryCharts.push(z[T][H])):z[T][H].type=="integratedBinary"?(z[T][H].chart=T,M.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(z[T][H])):z[T][H].type=="bar"&&(z[T][H].chart=T,M.PhyloCanvas.Render.Parameters.barCharts.length==1&&M.PhyloCanvas.Render.Parameters.barCharts.shift(),M.PhyloCanvas.Render.Parameters.barCharts.push(z[T][H]))}}k=R(k)}}();M.PhyloCanvas.PhyloxmlParse.prototype={};M.PhyloCanvas.NexmlParse=function(){var x=0,u=0,k,S,v,R,q=function(C,T,H){var z=new M.PhyloCanvas.Node;H&&(z.level=H.level+1);for(var L=0;L<v.length;L++)if(v[L].source==C.id)for(var D=0;D<R.length;D++)v[L].target==R[D].id&&z.children.push(q(R[D],v[L].length,z));if(z&&z.level>0&&!z.len&&(z.len=1),T&&(z.len=M.Common.roundFloat(T,4),z.len==0&&(z.len=1e-4)),C.label&&(z.type="label",z.name=C.label,C.style&&(z.style=C.style)),C.color){let O=C.color.replace(/[a-z%\s\(\)]/g,"").split(",");z.red=O[0],z.green=O[1],z.blue=O[2]}else{let O=M.PhyloCanvas.Render.Style.line.stroke.replace(/[a-z%\s\(\)]/g,"").split(",");z.red=O[0],z.green=O[1],z.blue=O[2]}return z},d=function(C,T){if(C.children&&C.children.length)for(var H=0;H<C.children.length;H++){var z=C.children[H];z.newickLen=Math.round((z.len+C.newickLen)*1e4)/1e4,z.level>x&&(x=z.level),z.newickLen>u&&(u=z.newickLen),z.children.length>0&&d(z,C)}return C},f=function(C,T){for(var H in C)H!="_children"&&H!="Text"&&(H=="rectangular"||H=="circular"?f(C[H][0],H):(M.PhyloCanvas.Render.Parameters[H]||(M.PhyloCanvas.Render.Parameters[H]={}),M.PhyloCanvas.Render.Parameters.set(H,C[H][0].Text,T)))};return function(C,T){this.getRoot=function(){return k},this.getLevels=function(){return x},this.getNewickLen=function(){return u},this.getValidate=function(){return S},T.tree&&C.trees[0]&&C.trees[0].tree[T.tree-1]?(v=C.trees[0].tree[T.tree-1].edge,R=C.trees[0].tree[T.tree-1].node):(v=C.trees[0].tree[0].edge,R=C.trees[0].tree[0].node);for(var H=0;H<R.length;H++){var z=0;if(R[H].root&&R[H].root=="true"){k=R[H];break}for(var L=0;L<v.length;L++)v[L].target==R[H].id&&z++;if(z==0){k=R[H];break}}k?(k=q(k),k=d(k)):S="Error. Currently, only rooted NeXML trees are supported."}}();M.PhyloCanvas.NexmlParse.prototype={};M.PhyloCanvas.NexmlJsonParse=function(){var x=0,u=0,k,S,v=[],R=[],q=function(C,T,H){var z=new M.PhyloCanvas.Node;H&&(z.level=H.level+1);for(var L=0;L<v.length;L++)if(v[L].source==C.id)for(var D=0;D<R.length;D++)v[L].target==R[D].id&&z.children.push(q(R[D],v[L].length,z));return T&&(z.len=M.Common.roundFloat(T,4),z.len==0&&(z.len=1e-4)),C.label&&(z.type="label",z.name=C.label,C.accession&&(z.accession=C.accession),C.style&&(z.style=C.style),C.bgStyle&&(z.bgStyle=C.bgStyle)),C.chart&&(z.chart=C.chart),z&&z.level>1&&(z.len||(S="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),z},d=function(C,T){if(C.children&&C.children.length)for(var H=0;H<C.children.length;H++){var z=C.children[H];z.newickLen=Math.round((z.len+C.newickLen)*1e4)/1e4,z.level>x&&(x=z.level),z.newickLen>u&&(u=z.newickLen),z.children.length>0&&d(z,C)}return C},f=function(C,T){for(var H in C)H!="_children"&&H!="Text"&&(H=="rectangular"||H=="circular"?f(C[H],H):(M.PhyloCanvas.Render.Parameters[H]||(M.PhyloCanvas.Render.Parameters[H]={}),M.PhyloCanvas.Render.Parameters.set(H,C[H],T)))};return function(C){this.getRoot=function(){return k},this.getLevels=function(){return x},this.getNewickLen=function(){return u},this.getValidate=function(){return S};var T=C.nexmlJson.nexml,H=T.render;if(H&&H.styles){var z=H.styles;for(var L in z)if(L!="_children"&&L!="Text")if(z[L]["@attributes"].type&&z[L]["@attributes"].type=="radialGradient"&&Lt.svg)z[L].name=L,z[L].type=z[L]["@attributes"].type,M.PhyloCanvas.Render.Style[L]=z[L],M.PhyloCanvas.Render.Style.jsphylosvgGradientList||(M.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),M.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(L);else{M.PhyloCanvas.Render.Style[L]||(M.PhyloCanvas.Render.Style[L]={});for(var D in z[L]["@attributes"])D!="_attributes"&&D!="_children"&&D!="type"&&(M.PhyloCanvas.Render.Style[L][D.replace("_","-")]=z[L]["@attributes"][D])}}if(H&&H.parameters&&f(H.parameters),H&&H.charts){var O=H.charts;for(var L in O)O[L]["@attributes"].chart=L,O[L]["@attributes"].type=="binary"?M.PhyloCanvas.Render.Parameters.binaryCharts.push(O[L]["@attributes"]):O[L]["@attributes"].type=="integratedBinary"?M.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(O[L]["@attributes"]):O[L]["@attributes"].type=="bar"&&M.PhyloCanvas.Render.Parameters.barCharts.push(O[L]["@attributes"])}if(C.tree&&T.trees[0]&&T.trees[0].tree[C.tree-1])v=T.trees[0].tree[C.tree-1].edge,R=T.trees[0].tree[C.tree-1].node;else{for(var L=0;L<T.trees.tree.edge.length;L++)v.push(T.trees.tree.edge[L]["@attributes"]);for(var L=0;L<T.trees.tree.node.length;L++){var W=T.trees.tree.node[L]["@attributes"];W.label&&(W.chart=T.trees.tree.node[L].chart),R.push(W)}}for(var L=0;L<R.length;L++)R[L].root&&R[L].root=="true"&&(k=R[L]);k?(k=q(k),k=d(k)):S="Error. Currently, only rooted NeXML trees are supported."}}();M.PhyloCanvas.NexmlParse.prototype={};M.PhyloCanvas.Render={};M.PhyloCanvas.Render.Style={line:{stroke:"rgb(0,0,0)","stroke-width":1},text:{"font-family":"Verdana","font-size":12,"text-anchor":"start"},path:{stroke:"rgb(0,0,0)","stroke-width":1},connectedDash:{stroke:"rgb(200,200,200)","stroke-dasharray":". "},textSecantBg:{fill:"#EEE",stroke:"#DDD"},highlightedEdgeCircle:{fill:"black",stroke:"black"},barChart:{fill:"#003300",stroke:"#DDD"},getStyle:function(x,u){return this[x]?this[x]:this[u]}};M.PhyloCanvas.Render.Parameters={jsOverride:0,Rectangular:{bufferX:200,paddingX:10,paddingY:20,bufferInnerLabels:10,bufferOuterLabels:5,minHeightBetweenLeaves:10,alignPadding:0,alignRight:!1,showScaleBar:!1},Circular:{bufferRadius:.33,bufferAngle:20,initStartAngle:160,innerCircleRadius:0,minHeightBetweenLeaves:5,bufferInnerLabels:2,bufferOuterLabels:5},binaryCharts:[],integratedBinaryCharts:[],barCharts:[],binaryChartBufferInner:5,binaryChartBufferSiblings:.01,binaryChartThickness:15,binaryChartDisjointed:!1,barChartBufferInner:3,barChartHeight:50,barChartWidth:.5,set:function(x,u,k){this.jsOverride||(k?k=="circular"?this.Circular[x]=parseFloat(u):k=="rectangular"&&(this.Rectangular[x]=parseFloat(u)):this[x]=parseFloat(u))}};M.PhyloCanvas.Render.Line=function(){return function(x,u,k,S,v,R,q,d){this.type="line",this.attr=M.PhyloCanvas.Render.Style.line,this.attr.stroke=["rgb(",v,",",R,",",q,")"].join(""),this.x1=x,this.x2=u,this.y1=k,this.y2=S,d&&(M.Common.apply(this,d),d.attr&&(this.attr=d.attr))}}();M.PhyloCanvas.Render.Text=function(){return function(x,u,k,S){this.type="text",this.attr=M.PhyloCanvas.Render.Style.text,this.x=x,this.y=u,this.text=k,S&&(M.Common.apply(this,S),S.attr&&(this.attr=S.attr))}}();M.PhyloCanvas.Render.Path=function(){var x=M.PhyloCanvas.Render.Style.path;return function(u,k){this.type="path",this.attr=M.PhyloCanvas.Render.Style.path,this.path=u,k&&(M.Common.apply(this,k),k.attr&&(this.attr=k.attr))}}();M.PhyloCanvas.Render.Circle=function(){return function(x,u,k,S){this.type="circle",this.x=x,this.y=u,this.radius=k,S&&(M.Common.apply(this,S),S.attr&&(this.attr=S.attr))}}();M.PhyloCanvas.Render.SVG=function(){var x,u;return function(k,S,v){x=k,this.canvasSize=[S,v],this.svg=Lt(k,this.canvasSize[0],this.canvasSize[1])}}();M.PhyloCanvas.Render.SVG.prototype={render:function(){for(var x=this.phylogramObject.getDrawInstructs(),u=0;u<x.length;u++)if(x[u].type=="line")var k=this.svg.path(["M",x[u].x1,x[u].y1,"L",x[u].x2,x[u].y2]).attr(M.PhyloCanvas.Render.Style.line);else if(x[u].type=="path")var S=this.svg.path(x[u].path).attr(x[u].attr);else if(x[u].type=="circle")var S=this.svg.circle(x[u].x,x[u].y,x[u].radius).attr({stroke:"black",fill:"black"});else{var v=this.svg.text(x[u].x,x[u].y,x[u].text).attr(M.PhyloCanvas.Render.Style.text);x[u].attr&&v.attr(x[u].attr),x[u].rotate&&v.rotate(x[u].rotate);var R=v.getBBox(),q=Math.sqrt(R.height*R.height+R.width*R.width)}},draw:function(x){var u,k;if(x.type=="line")u=this.svg.path(["M",x.x1,x.y1,"L",x.x2,x.y2]).attr(M.PhyloCanvas.Render.Style.line);else if(x.type=="path")u=this.svg.path(x.path).attr(x.attr);else if(x.type=="circle")u=this.svg.circle(x.x,x.y,x.radius).attr({stroke:"black",fill:"black"});else if(x.type=="text"){u=this.svg.text(x.x,x.y,x.text).attr(M.PhyloCanvas.Render.Style.text),x.attr&&u.attr(x.attr),x.rotate&&u.rotate(x.rotate);var S=u.getBBox();k=Math.sqrt(S.height*S.height+S.width*S.width)}return[u,k]}};M.PhyloCanvas.Render.Phylogram=function(){var x,u=M.PhyloCanvas.Render.Parameters.Rectangular,k,S,v,R,q,d,f=!0,C=0,T=0,H,z,L,D,O,W,te,j,$,oe,he,pe,U=[],re=function(X){return X+Math.round(X/4)},I=function(X,we,Ce,ee){return["M",X,we,"L",Ce,we,"L",Ce,ee,"L",X,ee,"Z"]},_e=function(X,we){if(X.len&&f==!1&&X.children.length==0&&(C=M.Common.roundFloat(C+R,4)),X.children.length>0){var Ce=[],ee,s,o,h,t,n,i;if(X.len&&(ee=we,s=we=M.Common.roundFloat(we+v*X.len,4),o=C+X.getMidbranchPosition(f)*R,h=o,t=X.red,n=X.green,i=X.blue,x.draw(new M.PhyloCanvas.Render.Line(ee,s,o,h,t,n,i))),X.name){var l={};if(l=M.PhyloCanvas.Render.Style.getStyle("bootstrap","text"),X.font_color_hex?l.fill=X.font_color_hex:l.fill="#000000",X.uri&&(l.href=X.uri),X.description&&(l.title=X.description),X.level==0)var p=C+X.getMidbranchPosition(f)*R;else var p=h;x.draw(new M.PhyloCanvas.Render.Text((s||we)+5,p,X.name,{attr:l}))}if(X.children&&X.children.length)for(var m=0;m<X.children.length;m++){var b=X.children[m];Ce.push(_e(b,we))}for(var N=[],m=0;m<Ce.length;m++)Ce[m][0]&&N.push(Ce[m][0]),Ce[m][1]&&N.push(Ce[m][1]);for(var B=Math.min.apply(null,N),V=Math.max.apply(null,N),G=(B+V)/2,K="",se="",de="",ge=0,m=0;m<X.children.length;++m){var be=X.children[m];if(m==0)K=be.red,se=be.green,de=be.blue;else if(K==be.red&&se==be.green&&de==be.blue)ge=1;else{ge=0;break}}ge==0?M.PhyloCanvas.Render.Style.line.stroke="black":(t=X.children[0].red,n=X.children[0].green,i=X.children[0].blue,M.PhyloCanvas.Render.Style.line.stroke=["rgb(",t,",",n,",",i,")"].join("")),X.children.length==2?(t=X.children[0].red,n=X.children[0].green,i=X.children[0].blue,M.PhyloCanvas.Render.Style.line.stroke=["rgb(",t,",",n,",",i,")"].join(""),x.draw(new M.PhyloCanvas.Render.Path(["M",we+1e-4,B,"L",we,B,"L",we,G],{attr:M.PhyloCanvas.Render.Style.line})),t=X.children[1].red,n=X.children[1].green,i=X.children[1].blue,M.PhyloCanvas.Render.Style.line.stroke=["rgb(",t,",",n,",",i,")"].join(""),x.draw(new M.PhyloCanvas.Render.Path(["M",we,G,"L",we,V,"L",we+1e-4,V],{attr:M.PhyloCanvas.Render.Style.line}))):x.draw(new M.PhyloCanvas.Render.Path(["M",we+1e-4,B,"L",we,B,"L",we,V,"L",we+1e-4,V],{attr:M.PhyloCanvas.Render.Style.line}))}else{if(ee=we,s=M.Common.roundFloat(we+v*X.len,2),o=C,h=C,t=X.red,n=X.green,i=X.blue,X.y=C,U.push(X),x.draw(new M.PhyloCanvas.Render.Line(ee,s,o,h,t,n,i)),u.alignRight&&x.draw(new M.PhyloCanvas.Render.Path(["M",s,o,"L",u.alignPadding+q,h],{attr:M.PhyloCanvas.Render.Style.connectedDash})),X.name){var l={};X.style&&(l=M.PhyloCanvas.Render.Style.getStyle(X.style,"text")),X.font_color_hex?l.fill=X.font_color_hex:l.fill="#000000",l["text-anchor"]="start",X.uri&&(l.href=X.uri),X.description&&(l.title=X.description);var ve=x.draw(new M.PhyloCanvas.Render.Text(u.alignRight?q+u.bufferInnerLabels+u.alignPadding:s+u.bufferInnerLabels,h,X.name,{attr:l}));T=Math.max(ve[1],T),M.PhyloCanvas.Render.Parameters.mouseRollOver&&M.Common.addRaphEventHandler(ve[0],"mouseover",M.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:x,node:X,x:s,y:h,textEl:ve[0]}),M.PhyloCanvas.Render.Parameters.mouseRollOut&&M.Common.addRaphEventHandler(ve[0],"mouseout",M.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:x,node:X,x:s,y:h,textEl:ve[0]}),M.PhyloCanvas.Render.Parameters.onClickAction&&M.Common.addRaphEventHandler(ve[0],"click",M.PhyloCanvas.Render.Parameters.onClickAction,{svg:x,node:X,x:s,y:h,textEl:ve[0]})}f&&(f=!1)}return[o,h]},xe=function(){y=C+R,D=0,O=u.showScaleBar*v,x.draw(new M.PhyloCanvas.Render.Line(D,O,y,y)),x.draw(new M.PhyloCanvas.Render.Text((D+O)/2,y-8,u.showScaleBar))},me=function(X,we,Ce){for(var ee=(Ce&&Ce.bufferInner?Ce.bufferInner:0)|M.PhyloCanvas.Render.Parameters.binaryChartBufferInner,s=(Ce&&Ce.bufferSiblings?Ce.bufferSiblings*R:0)|(M.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?R*M.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:M.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),o=(Ce&&Ce.thickness?Ce.thickness:0)|M.PhyloCanvas.Render.Parameters.binaryChartThickness,h,t=0;t<U.length;t++){var n=U[t];x.draw(new M.PhyloCanvas.Render.Path(I(X+ee,n.y-R/2+s/2,X+ee+o,n.y+R/2-s/2),{attr:M.PhyloCanvas.Render.Style.getStyle(n.chart[we],"textSecantBg")}))}return X+ee+o},Se=function(X,we,Ce){for(var ee=[],s,o=Ce&&Ce.bufferInner?Ce.bufferInner:0|M.PhyloCanvas.Render.Parameters.barChartBufferInner,h=Ce&&Ce.height?Ce.height:0|M.PhyloCanvas.Render.Parameters.barChartHeight,t=Ce&&Ce.width?Ce.width<1?R*Ce.width:Ce.width:0|(M.PhyloCanvas.Render.Parameters.barChartWidth<1?R*M.PhyloCanvas.Render.Parameters.barChartWidth:M.PhyloCanvas.Render.Parameters.barChartWidth),n=0,i=0;i<U.length;i++)ee.push(U[i].chart[we]);s=Math.max.apply(null,ee),n=M.Common.roundFloat(h/s,4);for(var i=0;i<U.length;i++){var l=U[i];x.draw(new M.PhyloCanvas.Render.Path(I(X+o,l.y-t/2,X+o+n*l.chart[we],l.y+t/2),{attr:M.PhyloCanvas.Render.Style.getStyle(l.chart[we],"barChart")}))}return X+o+h};return function(X,we){this.getCanvasSize=function(){return[k,S]},this.getRoot=function(){return we.getRoot()},we.getValidate()&&x.draw(0,0,we.getValidate()),f=!0,x=X;var Ce=we.getRoot(),ee=we.getNewickLen();if(k=x.canvasSize[0],S=x.canvasSize[1],oe=u.bufferX,he=u.paddingX,pe=u.paddingY,d=u.minHeightBetweenLeaves,C=pe,v=Math.round((k-oe-he*2)/ee),R=Math.round((S-pe*2)/(u.showScaleBar?Ce.getCountAllChildren():Ce.getCountAllChildren()-1)),R<d&&(R=d),q=Math.round(k-oe-he*2),(M.PhyloCanvas.Render.Parameters.binaryCharts.length||M.PhyloCanvas.Render.Parameters.barCharts.length)&&(u.alignRight=!0),_e(Ce,he),u.showScaleBar&&xe(),H=q+T+u.bufferInnerLabels,M.PhyloCanvas.Render.Parameters.binaryCharts.length){var s=M.PhyloCanvas.Render.Parameters.binaryCharts;for(var o in s)H=me(H,s[o].chart,s[o])}if(M.PhyloCanvas.Render.Parameters.barCharts.length){var h=M.PhyloCanvas.Render.Parameters.barCharts;for(var o in h)L=Se(H,h[o].chart,h[o])}U=[],typeof bgLabelsHold!="undefined"&&(bgLabelsHold=[])}}();M.PhyloCanvas.Render.Phylogram.prototype={};M.PhyloCanvas.Render.CircularPhylogram=function(){var x,u=M.PhyloCanvas.Render.Parameters.Circular,k,S,v,R,q,d,f,C=!0,T=0,H,z,L,D=[],O=[],W,te,j,$=0,oe,he=Math.PI/180;function pe(ee,s){return s+=oe,[M.Common.roundFloat(H+ee*Math.sin(s*he),4),M.Common.roundFloat(z+ee*Math.cos(s*he),4)]}function U(ee){var s=_e(90-ee-oe);if(s>90&&s<270){s+=180;var o="end"}else var o="start";return[s,o]}function re(ee,s,o,h){var t=pe(ee,s),n=pe(ee,o),i=[],l,p=0;return Math.abs(_e(o-s))>180?l=1:l=-1,h&&h.invertSecant&&(l*=-1,p=1),h&&h.noMove||i.push("M"),i.push(t[0],t[1],"A",ee,ee,0,l<1?0:1,p,n[0],n[1]),i}function I(ee,s,o,h){var t=[],n=pe(s,ee),i=pe(o,ee);return h&&h.noMove||t.push("M"),t.push(n[0],n[1],"L",i[0],i[1]),t}function _e(ee){for(;ee>360||ee<0;)ee>360?ee-=360:ee<0&&(ee+=360);return ee}function xe(ee,s,o,h){if(!s&&ee.length>1)var h=ee[3],o=ee[2],s=ee[1],ee=ee[0];var t=Se("M",re(ee,o,h,{noMove:1,invertSecant:0}),"L",re(s,h,o,{noMove:1,invertSecant:1}),"Z");return t}function me(ee,s){if(s=s,ee.len&&(C?T=te||1:ee.children.length==0&&(T=M.Common.roundFloat(T+q,4))),ee.children.length>0){var o=[],h,t,n,i;if(h=s,t=s+=M.Common.roundFloat(R*ee.len,4),ee.name,ee.children&&ee.children.length)for(var l=0;l<ee.children.length;l++){var p=ee.children[l],m=me(p,s);m>0&&o.push(m)}var b=M.Common.roundFloat(Math.min.apply(null,o),4),N=M.Common.roundFloat(Math.max.apply(null,o),4);ee.level!=0&&x.draw(new M.PhyloCanvas.Render.Path(Se("M",pe(s+.01,b),"L",re(s,b,N,{noMove:!0}),"L",pe(s+.01,N)))),ee.len&&(n=M.Common.roundFloat(b+(N-b)/2,4),x.draw(new M.PhyloCanvas.Render.Path(I(n,h,t))))}else if(ee.y=T,D.push(ee),h=s,t=s=M.Common.roundFloat(s+R*ee.len),n=T,x.draw(new M.PhyloCanvas.Render.Path(I(n,h,t))),x.draw(new M.PhyloCanvas.Render.Path(I(n,t,L),{attr:M.PhyloCanvas.Render.Style.connectedDash})),ee.name){var B=pe(L+u.bufferInnerLabels,n),V=U(n),G=V[0],K=V[1],se={};ee.style&&M.Common.apply(se,M.PhyloCanvas.Render.Style.getStyle(ee.style,"text")),ee.font_color_hex?se.fill=ee.font_color_hex:se.fill="#000000",se["text-anchor"]=K,ee.uri&&(se.href=ee.uri),ee.description&&(se.title=ee.description);var de=x.draw(new M.PhyloCanvas.Render.Text(B[0],B[1],ee.name,{attr:se,rotate:[G,B[0],B[1]]}));ee.bgStyle&&O.push([ee.bgStyle,n]);var B=pe(t,n);M.PhyloCanvas.Render.Parameters.mouseRollOver&&M.Common.addRaphEventHandler(de[0],"mouseover",M.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:x,node:ee,x:B[0],y:B[1],textEl:de[0]}),M.PhyloCanvas.Render.Parameters.mouseRollOut&&M.Common.addRaphEventHandler(de[0],"mouseout",M.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:x,node:ee,x:B[0],y:B[1],textEl:de[0]}),M.PhyloCanvas.Render.Parameters.onClickAction&&M.Common.addRaphEventHandler(de[0],"click",M.PhyloCanvas.Render.Parameters.onClickAction,{svg:x,node:ee,x:B[0],y:B[1],textEl:de[0]}),$=Math.max(de[1],$)}return C&&(C=!1),n}function Se(ee){for(var s=ee,o=1;o<arguments.length;o++)s=s.concat(arguments[o]);return s}function X(){var ee=[];if(O.length>0){if(M.PhyloCanvas.Render.Style.jsphylosvgGradientList)for(var s=0;s<M.PhyloCanvas.Render.Style.jsphylosvgGradientList.length;s++){var o=M.PhyloCanvas.Render.Style.jsphylosvgGradientList[s],h=M.Common.createGradientEl(o,M.PhyloCanvas.Render.Style[o],[H,z,L+$+u.bufferOuterLabels]);x.svg.defs.appendChild(h)}for(var s=0;s<O.length;s++){if(s!=O.length-1&&O[s][0]==O[s+1][0]){O[s+1][2]=O[s][2]?O[s][2]:O[s][1];continue}var ee=xe(L,L+$+u.bufferOuterLabels,O[s][2]?O[s][2]-q/2:O[s][1]-q/2,O[s][1]+q/2),t=M.PhyloCanvas.Render.Style.getStyle(O[s][0],"textSecantBg"),n=x.draw(new M.PhyloCanvas.Render.Path(ee,{attr:t.type?{}:t}));t.type&&t.type=="radialGradient"&&n[0].node.setAttribute("fill","url(#"+t.name+")"),t.type&&t.type=="radialGradient"&&n[0].node.setAttribute("stroke","none"),n[0].toBack()}}var ee=xe(L,L+$+u.bufferOuterLabels,(te||1)-q/2,360-q/2),n=x.draw(new M.PhyloCanvas.Render.Path(ee,{attr:M.PhyloCanvas.Render.Style.textSecantBg}));return n[0].toBack(),L+$+u.bufferOuterLabels}function we(ee,s,o){for(var h=o&&o.bufferInner?parseFloat(o.bufferInner):M.PhyloCanvas.Render.Parameters.binaryChartBufferInner,t=(o&&o.bufferSiblings?o.bufferSiblings*q:0)|(M.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?q*M.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:M.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),n=o&&o.thickness?parseFloat(o.thickness):M.PhyloCanvas.Render.Parameters.binaryChartThickness,i=(o&&o.disjointed?o.disjointed:!1)|M.PhyloCanvas.Render.Parameters.binaryChartDisjointed,l=o&&o.isInternal?o.isInternal:!1,p=!0,m,b=0;b<D.length;b++){var N=D[b];if((!D[b+1]||N.chart[s]!==D[b+1].chart[s]||i)&&N.chart[s]!="none"){var B=M.PhyloCanvas.Render.Style.getStyle(N.chart[s],"textSecantBg");if(l)var V=[L-h-n,L-h,(m||N.y)-q/2+(p&&!i?0:t/2),N.y+q/2-(b==D.length-1&&!i?0:t/2)];else var V=[ee+h,ee+h+n,(m||N.y)-q/2+(p&&!i?0:t/2),N.y+q/2-(b==D.length-1&&!i?0:t/2)];if(B.label){var G=M.PhyloCanvas.Render.Style.getStyle(B.labelStyle,"text"),K=pe((V[0]+V[1])/2,(V[2]+V[3])/2),se=U((V[2]+V[3])/2),de=_e(se[0]+(G.rotate?parseFloat(G.rotate):0)),ge=_e(90-(V[2]+V[3])/2-oe);ge>90&&ge<270&&(de+=180),G["text-anchor"]||(G["text-anchor"]="middle"),N.font_color_hex?B.fill=N.font_color_hex:B.fill="#000000";var be=x.draw(new M.PhyloCanvas.Render.Text(K[0],K[1],B.label,{attr:G,rotate:de}));be[0].toBack()}if(B.borderStyle){var ve=M.PhyloCanvas.Render.Style.getStyle(B.borderStyle,"textSecantBg"),Ae=[L,ve.fullsize?V[1]:V[0],V[2],V[3]],ke=x.draw(new M.PhyloCanvas.Render.Path(xe(Ae),{attr:ve}));ke[0].toBack()}var Le=x.draw(new M.PhyloCanvas.Render.Path(xe(V),{attr:B}));Le[0].toBack(),m=0,p=!1}else m||(m=N.y),N.chart[s]=="none"&&(m=0);p=!1}return l?ee:ee+h+n}function Ce(ee,s,o){for(var h=[],t,n=o&&o.bufferInner?parseFloat(o.bufferInner):M.PhyloCanvas.Render.Parameters.barChartBufferInner,i=o&&o.height?parseFloat(o.height):M.PhyloCanvas.Render.Parameters.barChartHeight?M.PhyloCanvas.Render.Parameters.barChartHeight:0,l=o&&o.width?parseFloat(o.width)<1?q*parseFloat(o.width):parseFloat(o.width):0|(M.PhyloCanvas.Render.Parameters.barChartWidth<1?q*M.PhyloCanvas.Render.Parameters.barChartWidth:M.PhyloCanvas.Render.Parameters.barChartWidth),p=0,m=0;m<D.length;m++)h.push(D[m].chart[s]);t=Math.max.apply(null,h),p=M.Common.roundFloat(i/t,4);for(var m=0;m<D.length;m++){var b=D[m];b.chart[s]>0&&x.draw(new M.PhyloCanvas.Render.Path(xe(ee+n,ee+n+p*b.chart[s],b.y-l/2,b.y+l/2),{attr:M.PhyloCanvas.Render.Style.getStyle(b.chart[s],"barChart")}))}return ee+n+i}return function(ee,s,o){if(this.getCanvasSize=function(){return[k,S]},this.getRoot=function(){return s.getRoot()},s.getValidate()){ee.draw({type:"text",x:0,y:ee.canvasSize[1]/3,text:s.getValidate()});return}x=ee;var h=s.getRoot(),t=s.getNewickLen();if(k=x.canvasSize[0],S=x.canvasSize[1],H=k/2,z=S/2,v=Math.min.apply(null,[k,S]),o=u.bufferRadius>1?u.bufferRadius:M.Common.roundFloat(v*u.bufferRadius,4),te=u.bufferAngle,f=u.innerCircleRadius,d=u.minHeightBetweenLeaves,oe=u.initStartAngle,L=Math.round((v-o-f)/2),R=(L-f)/t,q=M.Common.roundFloat((360-te)/h.getCountAllChildren(),4),me(h,f),j=L+$+u.bufferOuterLabels,M.PhyloCanvas.Render.Parameters.integratedBinaryCharts.length){var n=M.PhyloCanvas.Render.Parameters.integratedBinaryCharts;for(var i in n){var l=n[i].bufferInner?n[i].bufferInner:M.PhyloCanvas.Render.Parameters.binaryChartBufferInner,p=n[i].thickness?n[i].thickness:M.PhyloCanvas.Render.Parameters.binaryChartThickness;j=we(j-p-l,n[i].chart,n[i])}}if(j=X(),M.PhyloCanvas.Render.Parameters.binaryCharts.length){var m=M.PhyloCanvas.Render.Parameters.binaryCharts;for(var i in m)j=we(j,m[i].chart,m[i])}if(M.PhyloCanvas.Render.Parameters.barCharts.length){var b=M.PhyloCanvas.Render.Parameters.barCharts;for(var i in b)j=Ce(j,b[i].chart,b[i])}D=[],O=[]}}();M.PhyloCanvas.Render.CircularPhylogram.prototype={};var xt=function(){var x=function(S){if(!!S&&typeof S=="object"){let v=function(){};return v.prototype=S,new v}},u=function(S){var v="";!!S&&typeof S=="string"&&(v=S);var R=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return R.test(v)},k={xmlToJSON:function(S){try{let f=function(L){return L.replace(/^\s+|\s+$/gm,"")},C=function(L){var D=/-/g,O=String(L).replace(D,"_");return O},T=function(L,D){if(D.attributes.length>0){var O=D.attributes.length-1,W;L._attributes=[];do W=String(C(D.attributes[O].name)),L._attributes.push(W),L[W]=f(D.attributes[O].value);while(O--)}},H=function(L){L.getNodeByAttribute=function(D,O){if(this.length>0){var W,te=this.length-1;try{do if(W=this[te],W[D]==O)return W;while(te--)}catch(j){return!1}return!1}},L.contains=function(D,O){if(this.length>0){var W=this.length-1;try{do if(this[W][D]==O)return!0;while(W--)}catch(te){return!1}return!1}},L.indexOf=function(D,O){var W=-1;if(this.length>0){var te=this.length-1;try{do this[te][D]==O&&(W=te);while(te--)}catch(j){return-1}return W}},L.SortByAttribute=function(D,O){if(this.length){let W=function(j,$){var oe=j[$];return oe=u(oe)?parseFloat(oe):oe,oe},te=function(j,$){var oe=0,he,pe;return he=W(j,D),pe=W($,D),he<pe?oe=-1:pe<he&&(oe=1),O&&(oe=O.toUpperCase()=="DESC"?0-oe:oe),oe};this.sort(te)}},L.SortByValue=function(D){if(this.length){let O=function(te){var j=te.Text;return j=u(j)?parseFloat(j):j,j},W=function(te,j){var $=0,oe,he;return oe=O(te),he=O(j),oe<he?$=-1:he<oe&&($=1),D&&($=D.toUpperCase()=="DESC"?0-$:$),$};this.sort(W)}},L.SortByNode=function(D,O){if(this.length){let W=function(j,$){var oe=j[$][0].Text;return oe=u(oe)?parseFloat(oe):oe,oe},te=function(j,$){var oe=0,he,pe;return he=W(j,D),pe=W($,D),he<pe?oe=-1:pe<he&&(oe=1),O&&(oe=O.toUpperCase()=="DESC"?0-oe:oe),oe};this.sort(te)}}},z=function(L,D){var O,W,te,j="";if(!D)return null;if(D.attributes.length>0&&T(L,D),L.Text="",D.hasChildNodes()){var $=D.childNodes.length-1,oe=0;do switch(W=D.childNodes[oe],W.nodeType){case 1:L._children=[],O=W.localName?W.localName:W.baseName,O=C(O),j!=O&&L._children.push(O),L[O]||(L[O]=[]),te={},L[O].push(te),W.attributes.length>0&&T(te,W),L[O].contains||H(L[O]),j=O,W.hasChildNodes()&&z(te,W);break;case 3:L.Text+=f(W.nodeValue);break;case 4:L.Text+=W.text?f(W.text):f(W.nodeValue);break}while(oe++<$)}};if(!S)return null;var v={};v.typeOf="JSXBObject";var R=S.nodeType==9?S.documentElement:S;if(v.RootName=R.nodeName||"",S.nodeType==3||S.nodeType==4)return S.nodeValue;var q=function(){var L={activate:function(){var D=[];return D&&(D.getNodesByAttribute=function(O,W){if(!!D&&D.length>0){var te=[],j,$=D.length-1;try{do j=D[$],j[O]===W&&te.push(j);while($--);return te.reverse(),te}catch(oe){return null}return null}},D.getNodeByAttribute=function(O,W){if(!!D&&D.length>0){var te,j=D.length-1;try{do if(te=D[j],te[O]===W)return te;while(j--)}catch($){return null}return null}},D.getNodesByValue=function(O){if(!!D&&D.length>0){var W=[],te,j=D.length-1;try{do te=D[j],!!te.Text&&te.Text===O&&W.push(te);while(j--);return W}catch($){return null}return null}},D.contains=function(O,W){if(!!D&&D.length>0){var te=D.length-1;try{do if(D[te][O]===W)return!0;while(te--)}catch(j){return!1}return!1}},D.indexOf=function(O,W){var te=-1;if(!!D&&D.length>0){var j=D.length-1;try{do D[j][O]===W&&(te=j);while(j--)}catch($){return-1}return te}},D.SortByAttribute=function(O,W){if(!!D&&D.length>0){let te=function($,oe){var he=$[oe];return he=bam.validation.isNumeric(he)?parseFloat(he):he,he},j=function($,oe){var he,pe;he=te($,O),pe=te(oe,O);var U=he<pe?-1:pe<he?1:0;return W&&(U=W.toUpperCase()==="DESC"?0-U:U),U};D.sort(j)}},D.SortByValue=function(O){if(!!D&&D.length>0){let W=function(j){var $=j.Text;return $=bam.validation.isNumeric($)?parseFloat($):$,$},te=function(j,$){var oe,he;oe=W(j),he=W($);var pe=oe<he?-1:he<oe?1:0;return O&&(pe=O.toUpperCase()==="DESC"?0-pe:pe),pe};D.sort(te)}},D.SortByNode=function(O,W){if(!!D&&D.length>0){let te=function($,oe){var he=$[oe][0].Text;return he=bam.validation.isNumeric(he)?parseFloat(he):he,he},j=function($,oe){var he,pe;he=te($,O),pe=te(oe,O);var U=he<pe?-1:pe<he?1:0;return W&&(U=W.toUpperCase()==="DESC"?0-U:U),U};D.sort(j)}}),D}};return L}(),d=function(){var L=x(q);return L.activate()};return z(v,R),S=null,R=null,v}catch(f){return null}},textToXML:function(S){var v=null;try{v=document.all?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser,v.async=!1}catch(q){throw new Error("XML Parser could not be instantiated")}var R;try{document.all?R=v.loadXML(S)?v:!1:R=v.parseFromString(S,"text/xml")}catch(q){throw new Error("Error parsing XML string")}return R}};return k}();import{showSaveFilePicker as Kt}from"https://cdn.jsdelivr.net/npm/native-file-system-adapter/mod.js";var w1=function(){let x=[{name:"valapalagilaka",search:"á¹™",replace:()=>"r"},{name:"short e",search:"áº½",replace:()=>"e"},{name:"short o",search:"Ãµ",replace:()=>"o"},{name:"pá¹›á¹£á¹­hamÄtrÄ e",search:"Ãª",replace:()=>"e"},{name:"pá¹›á¹£á¹­hamÄtrÄ o",search:"Ã´",replace:()=>"o"},{name:"pá¹›á¹£á¹­hamÄtrÄ ai",search:"ÃŠ",replace:()=>"E"},{name:"pá¹›á¹£á¹­hamÄtrÄ au",search:"Ã”",replace:()=>"O"},{name:"candrabindu",search:"mÌ",replace:()=>"M"},{name:"oá¹ƒkÄras",search:"oá¹",replace:()=>"oM"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"(?:kK|gG|cC|jJ|wW|qQ|tT|dD|pP|bB)",replace:q=>q[0].slice(-1)},{name:"geminated m after h",search:"(?:Mhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rfi]|p[aA])tt|tt(?=[rvy]\\S)",replace:q=>`${q[1]}t`},{name:"geminated consonants after r",search:"([rf]\\s*)([kgcjwqdpbRnmyvl])\\2{1,2}",replace:q=>`${q[1]}${q[2]}`},{name:"final nasal variants",search:"(?:M[lSs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnNYR](?=[pPbBmdDtTnwWqQcCjJkKgG])",replace:()=>"M"},{name:"final anusvÄra variants",search:"M?[mN](?!\\S)|n(?=\\s+[tdn])|Y(?=\\s+[jc])",replace:()=>"M"},{name:"visarga aá¸¥ before voiced consonants",search:"(?<!\\sB)(?:a[Hr]|[o])(?=\\s+['gGjJqQdDnbBmrylvh])",replace:()=>"aH"},{name:"visarga aá¸¥ before vowels",search:"aH(?=\\s+[AiIeuUof])",replace:()=>"a"},{name:"visarga aá¸¥ before unvoiced consonants and space + anusvÄra",search:"o\\s+(?=[kKcCwWtTpPszSM])",replace:()=>"aH a"},{name:"visarga Äá¸¥ variants",search:"AH(?=\\s+[aAiIeEuUogGjJqQdDbBnmyrlvh])",replace:()=>"A"},{name:"other visarga variants",search:"H?[rszS](?!\\S)",replace:()=>"H"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"z(?=[kK])|s(?=s)",replace:()=>"H"},{name:"final au/Äv",search:"Av(?!\\S)",replace:()=>"O"},{name:"final su",search:"(?<=[sz])v(?=\\s+[aAiIuUoOeE])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aAuUoOeE])",replace:()=>"y"},{name:"kcch/kÅ›",search:"k(\\s*)(?:S|c?C)",replace:q=>`k${q[1]}S`},{name:"cÅ›/tÅ›",search:"[tc](\\s*)S",replace:q=>`c${q[1]}C`},{name:"cch/ch",search:"([aAiIuUeEoO])C",replace:q=>`${q[1]}cC`},{name:"final t + hi",search:"d(\\s+)D(?=[iy](?:\\s|$))",replace:q=>`t${q[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aAiIeEuUoOgGdDbByrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:q=>`${q[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aAuUeEoO])",replace:()=>"i"},{name:"bhd for bdh",search:"Bd",replace:()=>"bD"}],u=[{name:"valapalagilaka",search:"á¹™",replace:()=>"r"},{name:"short e",search:"áº½",replace:()=>"e"},{name:"short o",search:"Ãµ",replace:()=>"o"},{name:"pá¹›á¹£á¹­hamÄtrÄ e",search:"Ãª",replace:()=>"e"},{name:"pá¹›á¹£á¹­hamÄtrÄ o",search:"Ã´",replace:()=>"o"},{name:"pá¹›á¹£á¹­hamÄtrÄ ai",search:"aÃ®",replace:()=>"ai"},{name:"pá¹›á¹£á¹­hamÄtrÄ au",search:"aÃ»",replace:()=>"au"},{name:"candrabindu",search:"mÌ",replace:()=>"á¹ƒ"},{name:"oá¹ƒkÄras",search:"oá¹",replace:()=>"oá¹ƒ"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"([kgcjá¹­á¸tdpb]){2}h",replace:q=>`${q[1]}h`},{name:"geminated m after h",search:"(?:á¹ƒhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rá¹›i]|p[aÄ])tt|tt(?=[rvy]\\S)",replace:q=>`${q[1]}t`},{name:"geminated consonants after r",search:"([rá¹›]\\s*)([kgcjá¹­á¸á¹‡tdnpbmyvl])\\2{1,2}",replace:q=>`${q[1]}${q[2]}`},{name:"final nasal variants",search:"(?:á¹ƒ[lá¹£s]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mná¹…Ã±á¹‡](?=[pbmdtná¹­á¸cjkg])",replace:()=>"á¹ƒ"},{name:"final anusvÄra variants",search:"á¹ƒ?[má¹…](?!\\S)|n(?=\\s+[tdn])|Ã±(?=\\s+[jc])",replace:()=>"á¹ƒ"},{name:"visarga aá¸¥ before voiced consonants",search:"(?:a[á¸¥r]|[o])(?=\\s+['gjá¸dnbmyrlvh])",replace:()=>"aá¸¥"},{name:"visarga aá¸¥ before vowels",search:"aá¸¥(?=\\s+[ÄiÄ«euÅ«oá¹›])",replace:()=>"a"},{name:"visarga aá¸¥ before unvoiced consonants and space + anusvÄra",search:"o\\s+(?=[kcá¹­tpÅ›á¹£sá¹ƒ])",replace:()=>"aá¸¥ a"},{name:"visarga Äá¸¥ variants",search:"Äá¸¥(?=\\s+[aÄiÄ«euÅ«ogjá¸dnbmyrlvh])",replace:()=>"Ä"},{name:"other visarga variants",search:"á¸¥?[rÅ›á¹£s](?!\\S)",replace:()=>"á¸¥"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"á¹£(?=k)|s(?=s)",replace:()=>"s"},{name:"final au/Äv",search:"Äv(?!\\S)",replace:()=>"au"},{name:"final su",search:"(?<=[sá¹£])v(?=\\s+[aÄiÄ«uÅ«oe])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aÄuÅ«eo])",replace:()=>"y"},{name:"kcch/kÅ›",search:"k(\\s*)(?:Å›|c?ch)",replace:q=>`k${q[1]}Å›`},{name:"cÅ›/tÅ›",search:"[tc](\\s*)Å›",replace:q=>`c${q[1]}ch`},{name:"cch/ch",search:"([aÄiÄ«uÅ«eo])ch",replace:q=>`${q[1]}cch`},{name:"final t + hi",search:"d(\\s+)dh(?=[iy](?:\\s|$))",replace:q=>`t${q[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aÄiÄ«euÅ«ogdbyrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:q=>`${q[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aÄuÅ«eo])",replace:()=>"i"},{name:"bhd for bdh",search:"bhd",replace:()=>"bdh"}],k={none:{name:"remove spaces",search:"\\s",replace:()=>""},collapse:{name:"collapse spaces",search:"\\s+",replace:()=>" "}},S=function(q,d){let f=d.join(""),C=[],T=[...f.matchAll(q.search)],H=0,z=null;for(let L of d){let D=H+L.length,O=L,W=0;if(z)if(z.length<=L.length)O=v(L,0,z.length,z.text),W=z.text.length-z.length,z=null;else{O=z.text.slice(0,L.length);let j=z.text.slice(L.length);z={length:z.length-L.length,text:j};continue}for(;T.length>0&&T[0].index<D;){let te=T.shift(),j=te.index-H+W,$=q.replace(te);if(te.index+te[0].length<D)O=v(O,j,te[0].length,$),W=W+$.length-te[0].length;else{let oe=L.length-j+W,he=$.slice(0,oe);O=O.slice(0,j)+he;let pe=$.slice(oe);z={length:te[0].length-oe,text:pe}}}C.push(O),H=D}return C},v=function(q,d,f,C){return q.slice(0,d)+C+q.slice(d+f)};return function(q){let d=q.map(f=>De.t(f,"iast","slp1"));for(let f of[...x,k.none])d=S(f,d);return d.map(f=>De.t(f,"slp1","iast"))}}();var Bt={smush:function(x,u){return x.toLowerCase().replace(/([á¸drmvynhs]) ([aÄiÄ«uÅ«á¹›eoÃ©Ã³])/g,"$1$2"+u).replace(/([kgcjá¹­á¸tdpb]) h/g,"$1â€Œ"+u+"h").replace(/([kgcjÃ±á¸tdnpbmrlyvÅ›á¹£sá¹™]) ([kgcjá¹­á¸tdnpbmyrlvÅ›á¹£shá¸»])/g,"$1"+u+"$2").replace(/([oÃ³eÃ©Ä]) ([á¹ƒ'])/g,"$1"+u+"$2").replace(/^á¹ƒ/,"'â€á¹ƒ").replace(/^á¸¥/,"'â€á¸¥").replace(/^_y/,"'â€y").replace(/Ã¼/g,"â€Œu").replace(/Ã¯/g,"â€Œi").replace(/_{1,2}(?=\s*)/g,function(k){if(k==="__")return"â€";if(k==="_")return"â€Œ"})},iast:function(x,u){let k=u||"devanagari";return De.t(x,k,"iast",{skip_sgml:!0})},devanagari:function(x,u){let k=u||"",S={skip_sgml:!0},v=x.replace(/á¹™/g,"r").replace(/^_Ä/,"à¤½â€à¤¾"),R=Bt.smush(v,k);return De.t(R,"iast","devanagari",S).replace(/Â¯/g,"ê£»")},malayalam:function(x,u){let k=u||"",S={skip_sgml:!0},v={à´•:"àµ¿",à´¤:"àµ½",à´¨:"àµ»",à´®:"àµ”",à´°:"àµ¼"},R=x.replace(/^_Ä/,"à´½â€à´¾"),q=Bt.smush(R,k).replace(/e/g,"áº½").replace(/o/g,"Ãµ").replace(/á¹™/g,"r").replace(/á¹/g,"á¹ƒ").replace(/á¸¿/g,"á¹ƒ").replace(/Ã­/g,"i").replace(/Ãº/g,"u").replace(/Ã©/g,"e");return De.t(q,"iast","malayalam",S).replace(/(^|[^àµ])à´°àµ(?=\S)/g,"$1àµ").replace(/([à´•à´¤à´¨à´®à´°])àµ(?![^\s\u200C,â€”â€™â€•])/g,function(f,C){return v[C]})},grantha:function(x,u){let k=u||"",S={skip_sgml:!0},v=new Map([["à´¸","î‡“"],["à´°","àµ¼"],["à´¯","î‡‹"],["à´š","î†¶"],["à´¦","î‡‚"],["à´¶","î‡’"]]),R=new RegExp("(["+[...v.keys()].join("")+"])àµ(?![^â€Œ ,â€”â€™â€•])","g"),q=x.replace(/^_Ä/,"à´½â€à´¾"),d=Bt.smush(q,k).replace(/e/g,"áº½").replace(/o/g,"Ãµ").replace(/á¹™/g,"r").replace(/á¹/g,"á¹ƒ").replace(/á¸¿/g,"á¹ƒ").replace(/Ã­/g,"i").replace(/Ãº/g,"u").replace(/Ã©/g,"e");return De.t(d,"iast","malayalam",S).replace(/(^|[^àµ])à´°àµ(?=\S)/g,"$1àµ").replace(R,(C,T)=>v.get(T)).replace(/à´•àµà´·à´¿/g,"à®•à¯à®·à®¿")},telugu:function(x,u){var k=u||"";let S={skip_sgml:!0},v=x.replace(/^_Ä/,"à°½â€à°¾"),R=Bt.smush(v,k).replace(/e/g,"áº½").replace(/o/g,"Ãµ").replace(/á¹™/g,"râ€").replace(/á¹/g,"á¹ƒ").replace(/á¸¿/g,"á¹ƒ").replace(/Ã­/g,"i").replace(/Ãº/g,"u").replace(/Ã©/g,"e");return De.t(R,"iast","telugu",S)}},Ot=function(x,u,k=!1,S="sa"){let v=Bt[u],R=x.cloneNode(!0),q=function(d,f){let C=d.childNodes;for(let T of C)if(T.nodeType!==8){if(T.nodeType===3){if(f!=="sa")continue;T.data=v(T.data,k)}else if(T.hasChildNodes()){let H=T.getAttribute("lang")||f;H==="sa"&&T.classList.contains("subst")&&Z1(T,u),q(T,H)}}};return q(R,S),R},C1=function(x,u=!1){if(x.nodeType===3)return x;let k=document.createTreeWalker(x,NodeFilter.SHOW_TEXT,null,!1);if(u){let S;for(;k.nextNode();)S=k.currentNode;return S}else return k.nextNode},Z1=function(x,u){if(x.firstChild.nodeType!==3&&x.lastChild.nodeType!==3)return;let k=x.childNodes,S=/^[aÄiÄ«uÅ«eoá¹›á¹á¸·á¹ƒá¸¥]/,v=/[kgá¹…cjÃ±á¹­á¸á¹‡tdnpbmyrlvá¹£Å›sh]$/,R=["Ä","i","Ä«","e","o","_","ai","au"],q=["h","k","Å›","y","g","gh","c","ch","jh","á¹­h","á¸","á¸h","t","th","d","dh","n","p","ph","bh","m","r","á¸»","v","á¹£","s"];var d=!1,f=[],C=[];let T=k[0].nodeType===3;for(let H of k){if(H.nodeType>3)continue;let z=H.textContent.trim();if(z!==""){if(z==="a"){H.textContent="";continue}if(z.match(v)){let L=C1(H,!0);L.textContent=L.textContent.replace(/\s+$/,"")+"a",u==="telugu"&&q.indexOf(z)>=0&&f.push(H)}if(H===x.lastChild&&H.nodeType===3){let L=document.createElement("span");L.appendChild(H.cloneNode(!1)),x.replaceChild(L,H),H=L,H.classList.add("aalt")}else T&&z.match(S)&&H.classList.add("aalt");switch(u){case"devanagari":(z==="i"||z==="Ã©")&&C.unshift(H);break;case"grantha":case"malayalam":if(z==="e"||z==="ai")C.unshift(H);else if(z==="o"){let L=H.cloneNode(!0);_1("o","e",L),C.unshift(L),_1("o","Ä",H)}break;case"telugu":!d&&R.indexOf(z)>=0&&(d=!0);break}}}for(let H of C)x.insertBefore(H,x.firstChild);if(d)for(let H of f){let z=C1(H,!0);z.textContent=z.textContent+"â€à±"}},_1=function(x,u,k){let S=document.createTreeWalker(k,NodeFilter.SHOW_TEXT,null,!1);for(;S.nextNode();)S.currentNode.textContent.match(x)&&(S.currentNode.textContent=u)};"use strict";var en=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,115,116,114,105,112,45,115,112,97,99,101,32,101,108,101,109,101,110,116,115,61,34,42,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,47,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,97,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,45,45,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,33,45,45,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,45,45,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),k1=en;"use strict";var tn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,32,32,32,32,60,120,115,108,58,111,117,116,112,117,116,32,105,110,100,101,110,116,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,72,101,97,100,101,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,120,101,110,111,68,97,116,97,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),S1=tn;"use strict";var nn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,97,98,108,101,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,114,101,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,100,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,115,101,108,101,99,116,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,104,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,99,111,112,101,34,62,114,111,119,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,114,97,103,103,97,98,108,101,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,100,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,97,114,101,110,116,58,58,120,58,99,108,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,39,49,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,115,116,97,114,116,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,101,110,100,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,105,110,116,101,114,110,97,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,105,110,115,105,103,110,105,102,105,99,97,110,116,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,105,110,115,105,103,110,105,102,105,99,97,110,116,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,98,105,110,97,114,121,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,98,105,110,97,114,121,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),A1=nn;"use strict";var rn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,116,114,101,101,45,118,101,114,115,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,108,97,110,103,34,62,101,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,91,118,101,114,115,101,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,93,60,47,120,115,108,58,116,101,120,116,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),P1=rn;"use strict";var sn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,101,109,101,110,100,101,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,110,111,116,40,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,105,110,118,105,115,105,98,108,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,48,48,65,48,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,55,51,59,60,47,120,115,108,58,116,101,120,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,99,108,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,114,111,117,112,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),E1=sn;"use strict";var on=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),R1=on;var bt=function(x){let k=new DOMParser().parseFromString(x,"text/xml"),S=new XSLTProcessor;return S.importStylesheet(k),S},L1=function(x,u){this.transformString=function(k,S){let v=x.xml.createElementNS(u.teins,"ab");return v.innerHTML=k,S.transformToFragment(v,document)},this.sheets={csv:bt(k1),xml:bt(S1),matrix:bt(A1),lemma:bt(E1),lg:bt(R1),tree:bt(P1)}};var B1=function(x){this.basename=function(){return x.filename.split(/\.[^.]+$/)[0]},this.range=function(u,k){return Array.from(Array(parseInt(k)-parseInt(u)+1).keys(),S=>S+u)},this.maxlemma=function(){return[...this.firsttext().querySelectorAll("w[n]")].length-1},this.lemmata=function(u,k){let S=k||document.querySelector("#views");return u===!1?S.querySelectorAll(".lemma"):S.querySelectorAll(`.lemma[data-n="${u}"]`)},this.tds=function(u,k){let S=k||x.matrix.boxdiv;return u===!1?S.querySelectorAll("td[data-n]"):S.querySelectorAll(`td[data-n="${u}"]`)},this.firsttd=function(u,k){return(k||x.matrix.boxdiv).querySelector(`td[data-n="${u}"]`)},this.tr=function(u){return x.matrix.boxdiv.querySelector(`tr[data-n="${u}"]`)},this.trs=function(u){return(u||x.matrix.boxdiv).querySelectorAll("tr[data-n]")},this.firsttr=function(u){return(u||x.matrix.boxdiv).querySelector("tr[data-n]")},this.lasttr=function(u){return(u||x.matrix.boxdiv).querySelector("tr[data-n]:last-of-type")},this.trWalker=function(u){return document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT,{acceptNode:function(k){if(k.tagName==="TD")return NodeFilter.FILTER_ACCEPT}},!1)},this.textWalker=function(u){return document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT,{acceptNode:function(k){if(k.tagName.toLowerCase()==="w")return NodeFilter.FILTER_ACCEPT}},!1)},this.tei=function(u,k=x.xml){return k.querySelector(`TEI[n="${u}"]`)},this.teis=function(u=x.xml){return u.querySelectorAll("TEI")},this.texts=function(u){return(u||x.xml).querySelectorAll("text")},this.serializedtexts=function(u,k){let S=[...u.querySelectorAll("otu[label]")].map(R=>R.getAttribute("label")),v=[...this.teis()].filter(R=>S.indexOf(R.getAttribute("n"))!==-1);return new Map(v.map(R=>[u.querySelector(`node[label="${R.getAttribute("n")}"]`).getAttribute("id"),[...R.querySelectorAll("w")].map(q=>k&&q.hasAttribute("lemma")?q.getAttribute("lemma"):q.textContent)]))},this.serializedlevels=function(u){return u.map(k=>{if(k instanceof Map){let S=new Map;for(let[v,R]of k)S.set(v.getAttribute("id"),R.map(q=>q.getAttribute("id")));return S}else return k.map(S=>S.getAttribute("id"))})},this.firsttext=function(u){return u?x.xml.querySelector(`[n="${u}"] text`):x.xml.querySelector("text")},this.words=function(u,k){let S=k||x.xml;return u===!1?S.querySelectorAll("w[n]"):S.querySelectorAll(`w[n="${u}"]`)},this.firstword=function(u,k){return(k||x.xml).querySelector(`w[n="${u}"]`)},this.normal=function(u){return(u||document.getElementById("views")).querySelectorAll(".lemma[data-normal], .tree-lemma[data-normal]")},this.htmlreading=function(u,k){return k&&u.dataset.normal?u.dataset.normal:u.IAST.textContent},this.ths=function(){return x.matrix.boxdiv.querySelectorAll("th[data-ref]")},this.firstth=function(u){return x.matrix.boxdiv.querySelector(`th[data-ref="${u}"]`)},this.checkbox=function(u,k){return x.matrix.boxdiv.querySelector(`th[data-ref="${u}"] input.${k}`)},this.highlit=function(){let k=this.firsttr().querySelectorAll(".highlit"),S=new Set;for(let v of k)S.add(v.dataset.n);return S},this.highlitcell=function(){return x.matrix.boxdiv.querySelector("td.highlitcell")},this.highlitrow=function(){let u=this.highlitcell();return u?u.closest("tr"):!1},this.lowhigh=function(u){let k=[...u].sort((R,q)=>parseInt(R)-parseInt(q)),S=parseInt(k[0]),v=k.length>1?parseInt(k[k.length-1]):void 0;return[S,v]},this.readings=function(u,k){let S=k||x.matrix.boxdiv,v=this.tds(u,S);var R=0;let q=new Set;for(let d of v){let f=d.textContent;f!==""&&(R++,q.add(f))}return[R,q.size]},this.attr=function(u,k){let S=this.firsttr();var v=[];for(let R of k)this.firsttd(R,S).dataset[u]==="true"?v.push([R,!0]):v.push([R,!1]);return new Map(v)},this.whichattr=function(u){return u.hasAttribute("n")?"n":u.hasAttribute("data-n")?"data-n":u.hasAttribute("data-ref")?"data-ref":!1},this.clauses=function(u,k=!1){let S=this.firsttext();var v=!1;let R=new Set;for(let q of u){let f=this.firstword(q,S).closest("cl");f?R.add(f):k&&(v=!0)}if(R.size===0)return!1;{let q=[...R].map(d=>{let f=d.querySelectorAll("w");return new Set([...f].map(C=>C.getAttribute("n")))});return v?[null].concat(q):q}},this.clausesToRemove=function(u,k,S=0){let v=new Set;for(let R of u){let q=new Set(R);for(let d of k)q.delete(d);q.size<=S&&v.add(R)}return[...v]},this.empty=function(){let u=new Set,k=[...this.trs()],S=k.map(q=>this.trWalker(q)),v=k[0].querySelector("td:last-of-type").dataset.n;for(let q=0;q<=v;q++){var R=!0;for(let d of S){let f=d.nextNode();R&&f.textContent!==""&&(R=!1)}R&&u.add(q)}return u},this.prevNonempty=function(u,k){for(let S=u;S>=0;S--)if(k[S].textContent!=="")return S;return!1},this.nextNonempty=function(u,k){for(let S=u;S<k.length;S++)if(k[S].textContent!=="")return S;return!1},this.setIntersection=function(...u){let k=u[0];return new Set([...k].filter(S=>{for(let v=1;v<u.length;v++)if(!u[v].has(S))return!1;return!0}))},this.setUnion=function(...u){return new Set(u.reduce((k,S)=>(k=[...k,...S],k),[]))},this.cursorPos=function(u){let k=window.getSelection().getRangeAt(0),S=k.cloneRange();S.selectNodeContents(u);let v=S.toString().length;return S.setEnd(k.endContainer,k.endOffset),[S.toString().length,v]},this.selection=function(){let u=window.getSelection();if(u.isCollapsed)return!1;let k=u.rangeCount>1?u.getRangeAt(1).cloneContents():u.getRangeAt(0).cloneContents();if(!k)return!1;let S=new Set,v=k.querySelectorAll(".lemma");for(let R of v)S.add(R.dataset.n);return S}};var N1=function(x,u){let k=this;this.undo=function(){return x.undo.length>0},this.redo=function(){return x.redo.length>0},this.checkbox=function(S,v){if(!k.anyhighlit())return!1;let R=v===!1?u.highlit():v,q=u.attr(S,R);for(let d of q.values())if(d===!1)return!1;return!0},this.grouped=function(){let S=u.highlit();if(!S)return!1;let v=u.firsttr();for(let R of S){let q=u.firsttd(R,v);if(q.classList.contains("group-start")||q.classList.contains("group-internal")||q.classList.contains("group-end"))return!0}return!1},this.oneGrouped=function(){let S=u.highlit();if(S.size===0)return!1;if(S.size===1){let v=u.firsttr(),R=u.firsttd([...S][0],v);return!!(R.classList.contains("group-start")||R.classList.contains("group-end")||R.classList.contains("group-internal"))}return!0},this.anyhighlit=function(){return!!x.matrix.boxdiv.querySelector("td.highlit")},this.manyhighlit=function(){return u.highlit().size>1},this.highlitcell=function(){return!!x.matrix.boxdiv.querySelector("td.highlitcell")},this.normalizedView=function(){return document.getElementById("views").classList.contains("normalized")},this.anyNormalized=function(){return x.matrix.boxdiv.querySelector(".lemma[data-normal]")},this.headerView=function(){return x.matrix.boxdiv.querySelector("tr.header").style.display!=="none"}};var T1=function(){var x,u,k,S;let v={setIntersection:function(...f){let C=f[0];return new Set([...C].filter(T=>{for(let H=1;H<f.length;H++)if(!f[H].has(T))return!1;return!0}))},setUnion:function(...f){return new Set(f.reduce((C,T)=>(C=[...C,...T],C),[]))}},R=function(f,C){let T=new Map;for(let H of u[0]){let z=x.get(H),L=z?[z[f]]:[];T.set(H,new Set(L))}for(let H=1;H<u.length;H++)for(let[z,L]of u[H]){let D=L.map(te=>T.get(te)),O=v.setIntersection(...D);if(z===C&&O.size===1)return[...O][0];let W=O.size>0?O:v.setUnion(...D);T.set(z,W)}return T},q=function(f,C){let T=u[0],H=new Map;for(let z of u[u.length-1])H.set(z[0],f.get(z[0]));for(let z=u.length-1;z>1;z--)for(let[L,D]of u[z]){let O=H.get(L);for(let W of D){if(T.indexOf(W)!==-1)continue;let te=f.get(W),j=v.setIntersection(O,te),$=j.size>0?j:te;if(W===C)return $;H.set(W,$)}}return H.get(C)},d=function(f,C){let T=R(C,f);return typeof T=="string"?T:function(z){if(z.size===1)return[...z][0].trim();let L=[...z].map(D=>D.trim()===""?"_":D);return L.length===1?L[0]:"{"+L.join(", ")+"}"}(q(T,f))};onmessage=function(f){x=f.data.readings,u=f.data.levels,k=f.data.num,S=f.data.id,postMessage({n:k,result:d(S,k)})}};function Ht(x){var u=[],k=0;if(this.trie=this.createTrie(x.patterns),this.leftMin=x.leftmin,this.rightMin=x.rightmin,this.exceptions={},x.exceptions)for(u=x.exceptions.split(/,\s?/g);k<u.length;k+=1)this.exceptions[u[k].replace(/\u2027/g,"").toLowerCase()]=new RegExp("("+u[k].split("â€§").join(")(")+")","i")}Ht.prototype.createTrie=function(x){var u=0,k=0,S=0,v=0,R=null,q=null,d=null,f=null,C={_points:[]},T;for(u in x)if(x.hasOwnProperty(u))for(T=x[u].match(new RegExp(".{1,"+ +u+"}","g")),k=0;k<T.length;k+=1){for(R=T[k].replace(/[0-9]/g,"").split(""),q=T[k].split(/\D/),f=C,S=0;S<R.length;S+=1)d=R[S].charCodeAt(0),f[d]||(f[d]={}),f=f[d];for(f._points=[],v=0;v<q.length;v+=1)f._points[v]=q[v]||0}return C};Ht.prototype.hyphenateText=function(x,u){u=u||4;for(var k=x.split(/([a-zA-Z0-9_\u0027\u00AD\u00DF-\u00EA\u00EB\u00EC-\u00EF\u00F1-\u00F6\u00F8-\u00FD\u0101\u0103\u0105\u0107\u0109\u010D\u010F\u0111\u0113\u0117\u0119\u011B\u011D\u011F\u0123\u0125\u012B\u012F\u0131\u0135\u0137\u013C\u013E\u0142\u0144\u0146\u0148\u0151\u0153\u0155\u0159\u015B\u015D\u015F\u0161\u0165\u016B\u016D\u016F\u0171\u0173\u017A\u017C\u017E\u017F\u0219\u021B\u02BC\u0390\u03AC-\u03CE\u03F2\u0401\u0410-\u044F\u0451\u0454\u0456\u0457\u045E\u0491\u0531-\u0556\u0561-\u0587\u0902\u0903\u0905-\u090B\u090E-\u0910\u0912\u0914-\u0928\u092A-\u0939\u093E-\u0943\u0946-\u0948\u094A-\u094D\u0982\u0983\u0985-\u098B\u098F\u0990\u0994-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BE-\u09C3\u09C7\u09C8\u09CB-\u09CD\u09D7\u0A02\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A14-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A82\u0A83\u0A85-\u0A8B\u0A8F\u0A90\u0A94-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABE-\u0AC3\u0AC7\u0AC8\u0ACB-\u0ACD\u0B02\u0B03\u0B05-\u0B0B\u0B0F\u0B10\u0B14-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3E-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B57\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C02\u0C03\u0C05-\u0C0B\u0C0E-\u0C10\u0C12\u0C14-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C43\u0C46-\u0C48\u0C4A-\u0C4D\u0C82\u0C83\u0C85-\u0C8B\u0C8E-\u0C90\u0C92\u0C94-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBE-\u0CC3\u0CC6-\u0CC8\u0CCA-\u0CCD\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D7A-\u0D7F\u1F00-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB2-\u1FB4\u1FB6\u1FB7\u1FBD\u1FBF\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD2\u1FD3\u1FD6\u1FD7\u1FE2-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u200D\u2019]+)/gi),S=0;S<k.length;S+=1)k[S].indexOf("/")!==-1?S!==0&&S!==k.length-1&&!/\s+\/|\/\s+/.test(k[S])&&(k[S]+="â€‹"):k[S].length>u&&(k[S]=this.hyphenate(k[S]).join("Â­"));return k.join("")};Ht.prototype.hyphenate=function(x){var u,k=[],S,v,R,q,d,f=[],C,T=x.toLowerCase(),H,z,L=Math.max,D=this.trie,O=[""];if(this.exceptions.hasOwnProperty(T))return x.match(this.exceptions[T]).slice(1);if(x.indexOf("Â­")!==-1)return[x];for(x="_"+x+"_",u=x.toLowerCase().split(""),S=x.split(""),C=u.length,v=0;v<C;v+=1)f[v]=0,k[v]=u[v].charCodeAt(0);for(v=0;v<C;v+=1)for(d=D,R=v;R<C&&(d=d[k[R]],d);R+=1)if(H=d._points,H)for(q=0,z=H.length;q<z;q+=1)f[v+q]=L(f[v+q],H[q]);for(v=1;v<C-1;v+=1)v>this.leftMin&&v<C-this.rightMin&&f[v]%2?O.push(S[v]):O[O.length-1]+=S[v];return O};var an=Ht,M1=an;var I1={id:"sa",leftmin:2,rightmin:2,patterns:{2:"a1e1i1o1u1Ã©1Ã­1Ã¯1Ã³1Ãº1Ã¼1Ä1Ä«1Å«1á¸·1á¸¹1á¹›1á¹1",3:"2b_2c_2d_2g_2h_2j_2k_2l_2m_2n_2p_2r_2s_2t_2v_2y_2Ã±_2Å›_2á¸_2á¸¥12á¸«12á¸·_2á¹12á¹ƒ12á¹…_2á¹‡_2á¹­_2áº–1lÌ¥1rÌ¥1",4:"2bh_2ch_2dh_2gh_2jh_2kh_2mÌ12ph_2rb_2rd_2rg_2rk_2rp_2rt_2rá¸_2rá¹­_2th_2á¸h_2á¹­h_a2i1a2u1a3Ã¯1a3Ã¼1lÌ¥Ì„1rÌ¥Ì„1"}};window.comboView=function(){let x={teins:"http://www.tei-c.org/ns/1.0",scripts:["iast","devanagari","telugu","grantha","malayalam"]},u={filename:null,xml:null,treelist:new Map,trees:[],textboxes:[],matrix:null,viewdiv:null,descs:null,maxlemma:null,windows:[window],dragged:null,undo:[],redo:[],editing:!1},k=new M1(I1),S=new L1(u,x),v=new B1(u),R=new N1(u,v),q=function(){let s=document.getElementById("tooltip");s&&s.remove()},d=function(){let s=document.getElementById("left_menu");s.innerHTML=`<div id="matrixmenu" class="menubox">
    <div class="heading">Matrix</div>
      <ul>
        <li>select CSV/XML file(s): <input type="file" id="file" name="file" accept=".xml,.csv" multiple/></li>
      </ul>
</div>
<div style="display: none" id="mssmenu" class="menubox">
    <div class="heading">Texts</div>
    <ul class="ms">
    </ul>
</div>
<div style="display: none" id="treemenu" class="menubox">
    <div class="heading">Trees</div>
        <ul class="tree">
            <li>select NeXML file: <input type="file" id="treefile" name="treefile" accept=".xml"/></li>
        </ul>
    </div>
`;let o=document.getElementById("menu");o.addEventListener("mouseover",re.menuMouseover),o.addEventListener("mouseout",re.menuMouseout),o.addEventListener("click",re.menuClick),o.querySelector("#file").addEventListener("change",D.bind(null,O),!1),o.querySelector("#treefile").addEventListener("change",D.bind(null,W),!1)},f={matrix:function(){return u.matrix=new ee,u.matrix.init(),u.matrix.show(),document.getElementById("matrixmenu").style.display="none",C(),L.rehighlight(),u.matrix},text:function(s){let o=new Ce(s);return u.textboxes.push(o),o.init(),o.show(),C(),L.rehighlight(),document.querySelector(".highlit")||re.textClick({target:o.boxdiv.querySelector(".lemma:not(.invisible)")}),o},tree:function(s,o){let h=new we(s,o);return u.trees.push(h),h.init(),h.show(),C(),L.rehighlight(),h}},C=function(){for(let s of u.trees)s.draw()},T=function(){let s=window.getSelection?window.getSelection():document.selection;s&&(s.removeAllRanges?s.removeAllRanges():s.empty&&s.empty())},H=function(s){let o=document.createTreeWalker(s,NodeFilter.SHOW_TEXT);for(;o.nextNode();){let h=z(o.currentNode.nodeValue);o.currentNode.nodeValue=h}},z=function(s){return k.hyphenateText(s.replace(/ \|/g,"Â |").replace(/\| (?=\d)/g,"|Â ").replace(/\|\|/g,"à¥¥").replace(/\|/g,"à¥¤"))},L={getAllWindows:function(){return window.mainWindow?window.mainWindow.comboView.getWindows():u.windows},forEachWindow:function(s){let o=L.getAllWindows();for(let h of o)if(!h.closed&&s(h)===!1)break},highlightLemma:function(s,o){var h=!!o;L.forEachWindow(t=>{let n=t.comboView.getViewdiv().querySelectorAll('[data-n="'+s+'"]');for(let l of n)(!h||!l.classList.contains("invisible"))&&l.classList.add("highlit");let i=t.comboView.getViewdiv().querySelectorAll('[data-n-trans="'+s+'"]');for(let l of i)l.classList.add("translit")})},highlightRange:function(s){if(!s||s.size===0)return;L.unHighlightAll();let[o,h]=v.lowhigh(s);if(h!==void 0)for(let t=o;t<=h;t++)L.highlightLemma(t,!0);else L.highlightLemma(o);L.repopulateTrees(o,h);for(let t of u.viewdiv.querySelectorAll(".text-box"))t.querySelector(".highlit")||t.querySelector('[data-n="'+o+'"]').classList.add("highlit");_e.xScroll(o)},highlightAll:function(){R.anyhighlit()?L.unHighlightAll():L.highlightRange(new Set([0,v.maxlemma()]))},unHighlightAll:function(){L.forEachWindow(s=>{let o=s.comboView.getViewdiv().querySelectorAll(".highlit");for(let t of o)t.classList.remove("highlit");let h=s.comboView.getViewdiv().querySelectorAll(".translit");for(let t of h)t.classList.remove("translit");L.unCelllightAll()})},unCelllightAll:function(){L.forEachWindow(s=>{let o=s.comboView.getViewdiv().querySelectorAll(".highlitcell");for(let h of o)h.classList.remove("highlitcell")})},rehighlight:function(){var s;if(L.forEachWindow(h=>{if(s=h.document.querySelectorAll(".highlit"),s.length>0)return!1}),s.length>0){var o=new Set;for(let h of s)o.add(h.dataset.n);L.highlightRange(o)}},clearTrees:function(){L.forEachWindow(s=>{let o=s.comboView.getTrees();for(let h of o)h.clearlemmata()})},repopulateTrees:function(s,o){L.forEachWindow(h=>{let t=h.comboView.getTrees();for(let n of t)n.populate(s,o),n.colourizeVariants(s,o),n.updatescript()})},highlightTreeLemma:function(s){L.forEachWindow(o=>{let h=o.comboView.getTrees();for(let t of h){let n=t.boxdiv.querySelector('.tree-lemma[data-id="'+s+'"]'),i=t.boxdiv.querySelectorAll(".tree-lemma");for(let l of i)(n.dataset.nodes&&l.dataset.nodes===n.dataset.nodes||!n.dataset.nodes&&l.dataset.id===n.dataset.id)&&l.classList.add("highlit");t.clearLabels()}})},unhighlightTrees:function(){L.forEachWindow(s=>{let o=s.comboView.getViewdiv().querySelectorAll(".tree-lemma.highlit");for(let t of o)t.classList.remove("highlit");let h=s.comboView.getTrees();for(let t of h)t.clearLabels()})}},D=function(s,o){let h=o.target.files[0],t=[...o.target.files].slice(1),n=new FileReader;n.onload=s.bind(null,h,t),n.readAsText(h)},O=function(s,o,h){u.filename=s.name,document.title=document.title+`: ${u.filename}`,u.filename.split(".").pop()==="csv"?j(s,o,h):$(s,o,h)},W=function(s,o,h){let t=h.target.result,i=new DOMParser().parseFromString(t,"text/xml"),l=u.xml.querySelector("teiHeader > xenoData")||function(){let m=u.xml.querySelector("teiHeader")||function(){let N=u.xml.createElementNS(x.teins,"teiHeader");return u.xml.documentElement.appendChild(N),N}(),b=u.xml.createElementNS(x.teins,"xenoData");return m.appendChild(b),b}(),p=u.xml.createElementNS(x.teins,"stemma");p.setAttribute("format","nexml"),p.id="stemma"+[...l.querySelectorAll("stemma")].length,p.appendChild(i.firstChild.cloneNode(!0)),l.appendChild(p),te(i,p.id)},te=function(s,o,h=!0){let t=s.querySelectorAll("tree"),n=document.querySelector("#treemenu ul");for(let i of t){let l=i.id,p=s.cloneNode(!0);for(let N of p.querySelectorAll("tree"))N.id!==l&&N.parentNode.removeChild(N);let m=i.getAttribute("label")||"New Tree "+u.treelist.size;u.treelist.set(`#${o} #${l}`,p);let b=document.createElement("li");b.dataset.name=m,b.dataset.treeid=l,b.dataset.stemmaid=o,b.appendChild(document.createTextNode(m)),n.insertBefore(b,n.lastElementChild),h&&f.tree(o,l)}},j=function(s,o,h){let t=Qt.parse(h.target.result,{delimiter:","});u.xml=document.implementation.createDocument(x.teins,"",null);let n=u.xml.createElementNS(x.teins,"teiCorpus"),i=u.xml.createElementNS(x.teins,"teiHeader");n.appendChild(i),u.xml.appendChild(n);for(let l of t){let p=l[0],m=l.slice(1),b=u.xml.createElementNS(x.teins,"TEI");b.setAttribute("n",p);let N=u.xml.createElementNS(x.teins,"text");for(let B=0;B<m.length;B++){let V=m[B],G=u.xml.createElementNS(x.teins,"w");V&&G.appendChild(document.createTextNode(V)),G.setAttribute("n",B),N.appendChild(G)}b.appendChild(N),n.appendChild(b)}u.xml.normalize(),u.maxlemma=v.maxlemma(),pe()},$=function(s,o,h){let t=new DOMParser;u.xml=t.parseFromString(h.target.result,"text/xml");let n=u.xml.querySelectorAll("teiHeader xenoData stemma nexml");for(let i of n){let l=document.implementation.createDocument("http://www.nexml.org/2009","",null);l.appendChild(i.cloneNode(!0)),te(l,i.closest("stemma").id,!1)}u.maxlemma=v.maxlemma(),o.length>0?oe(o):pe()},oe=function(s){let o=s[0],h=s.slice(1),t=function(l,p){let m=new Set(l);for(let b of p)m.delete(b);return m},n=function(l,p){let b=new DOMParser().parseFromString(p.target.result,"text/xml"),N=new Map;for(let ve of v.teis()){let Ae=ve.getAttribute("n");N.set(Ae,ve)}let B=new Set(N.keys()),V=new Map;for(let ve of b.querySelectorAll("TEI")){let Ae=ve.getAttribute("n");V.set(Ae,ve)}let G=new Set(V.keys()),K=t(B,G),se=t(G,B);for(let ve of se)xe.tei(ve);let de=[...b.querySelector("text").querySelectorAll("w[n]")].length,ge=u.maxlemma+de;for(let[ve,Ae]of V)if(N.has(ve)){let ke=N.get(ve).querySelector("text"),Ne=Ae.querySelector("text").querySelectorAll("w[n]");var be=u.maxlemma+1;for(let Me of Ne)Me.setAttribute("n",be),ke.appendChild(Me),be=be+1}else{let ke=u.xml.createElementNS(x.teins,"TEI");ke.setAttribute("n",ve);let Le=u.xml.createElementNS(x.teins,"text");xe.emptywords(Le,ge,0),ke.appendChild(Le),u.xml.documentElement.appendChild(ke)}for(let ve of K){let Ae=N.get(ve).querySelector("text");xe.emptywords(Ae,ge,u.maxlemma+1)}u.maxlemma=v.maxlemma(),l.length>0?oe(l):pe()},i=new FileReader;i.onload=n.bind(null,h),i.readAsText(o)},he=function(){var s="";let o=[...v.teis()].map(h=>h.getAttribute("n"));for(let h of o)s+=`<li data-name="${h}">${h}</li>`;document.getElementById("menu").querySelector(".ms").innerHTML=s},pe=function(){he();let s=new Se("Export");s.populate([{text:"TEI corpus",func:U.showOptions.bind(null,U.xml,U.options)},{text:"TEI apparatus",func:U.showOptions.bind(null,U.xml,U.appOptions)},{text:"CSV",func:U.showOptions.bind(null,U.csv,U.options)},{text:"NEXUS",func:U.showOptions.bind(null,U.nexus,U.options)}]);let o=new Se("Edit");o.populate([{text:"Undo",greyout:R.undo,func:I.undo},{text:"Redo",greyout:R.redo,func:I.redo},{text:"Select all",alt:"Deselect all",toggle:R.anyhighlit,func:L.highlightAll},{text:"(Re)normalize columns",greyout:R.anyhighlit,func:I.startRenormalize.bind(null,!1)},{text:"Delete column",greyout:R.anyhighlit,func:I.startRemoveCol.bind(null,!1)},{text:"Delete empty columns",func:I.startRemoveEmpty},{text:"Merge columns",greyout:R.manyhighlit,func:I.startMerge.bind(null,!1)},{text:"Group columns",alt:"Ungroup columns",greyout:R.oneGrouped,toggle:R.grouped,func:I.startGroup.bind(null,!1)},{text:"Group words",func:I.doGroupWords},{text:"Edit cell",greyout:R.highlitcell,func:I.startEditCell.bind(null,!1)},{text:"Insert row",func:I.startNewRow},{text:"Insert column",greyout:R.anyhighlit,func:I.startInsertCol},{text:"Mark insignificant",checkbox:R.checkbox.bind(null,"insignificant",!1),greyout:R.anyhighlit,func:I.startMarkAs.bind(null,"insignificant",!1)},{text:"Mark binary",checkbox:R.checkbox.bind(null,"binary",!1),greyout:R.anyhighlit,func:I.startMarkAs.bind(null,"binary",!1)}]);let h=new Se("View");h.populate([{text:"Header",checkbox:R.headerView,func:_e.toggleHeader},{text:"Normalized",checkbox:R.normalizedView,greyout:R.anyNormalized,func:_e.toggleNormalize}]);let t=document.getElementById("left_menu");t.appendChild(h.box),t.appendChild(o.box),t.appendChild(s.box);let n=document.getElementById("views");n.style.justifyContent="flex-start",n.removeChild(n.querySelector("#splash")),f.matrix();let i=document.getElementById("matrixmenu");i.addEventListener("click",f.matrix),i.removeChild(i.querySelector("ul")),document.getElementById("mssmenu").style.display="block",document.getElementById("treemenu").style.display="block"},U={write:async function(s,o){let h=await o.createWritable();h.write(s),h.close()},xml:async function(s){let o=new XMLSerializer().serializeToString(S.sheets.xml.transformToDocument(s)),h=new Blob([o],{type:"text/xml;charset=utf-8"}),t=v.basename()+".xml",n=await Kt({_preferPolyfill:!1,suggestedName:t,types:[{description:"TEI XML",accept:{"text/xml":[".xml"]}}]});U.write(h,n)},csv:async function(s){let o=S.sheets.csv.transformToDocument(s).documentElement.textContent,h=new Blob([o],{type:"text/csv;charset=utf-8"}),t=v.basename()+".csv",n=await Kt({_preferPolyfill:!1,suggestedName:t,types:[{description:"CSV file",accept:{"text/csv":[".csv"]}}]});U.write(h,n)},nexus:async function(s){let o=[...v.texts(s)],h=o.length,t="0 1 2 3 4 5 6 7 8 9 A B C D E F G H K L M N P Q R S T U V W X Y Z a b c d e f g h k l m n p q r s t u v w x y z",[n,...i]=t.split(" "),l="-",p=o.map(be=>"'"+be.parentElement.getAttribute("n")+"'"),m=o.map(be=>v.textWalker(be)),b=o[0].querySelectorAll("w").length,N=[],B=p.map(be=>[be+" "]);for(let be=0;be<b;be++){let ve=new Set,Ae=[];for(let Le=0;Le<m.length;Le++){let Me=m[Le].nextNode(),Be=De.t(Me.textContent.trim().toLowerCase(),"iast","hk").replace(/'/g,"()");Ae.push(Be),Be!==""&&Be!=="[]"&&ve.add(Be)}N.push(["[]",...ve]);let ke=new Map([...ve].map((Le,Ne)=>[Le,i[Ne]]));for(let Le=0;Le<Ae.length;Le++){let Ne=(Me=>{switch(Ae[Me]){case"":return l;case"[]":return n;default:return ke.get(Ae[Me])}})(Le);B[Le].push(Ne)}}let V=N.map((be,ve)=>ve+1+" / "+[...be].map(Ae=>`'${Ae}'`).join(" ")).join(`,
`),G=B.map(be=>be.join("")).map(be=>be.replace(/0{8,}/g,ve=>ve.replace(/0/g,"-"))).reduce((be,ve)=>be+`
`+ve),K=`#NEXUS

BEGIN TAXA;
  DIMENSIONS NTAX=${h};
  TAXLABELS ${p.join(" ")};
END;

BEGIN CHARACTERS;
  DIMENSIONS
    NCHAR=${b};
  FORMAT 
    DATATYPE=STANDARD 
    RESPECTCASE 
    GAP=${l} 
    MISSING=? 
    SYMBOLS="${t}";
  CHARSTATELABELS
${V}
;
MATRIX
${G}
;
END;
`,se=new Blob([K],{type:"text/nexus;charset=iso8859-1"}),de=v.basename()+".nex",ge=await Kt({_preferPolyfill:!1,suggestedName:de,types:[{description:"NEXUS file",accept:{"text/nexus":[".nex"]}}]});U.write(se,ge)},processOptions:function(s){let o=u.xml.cloneNode(!0);if(s.get("option_normalize")){let h=o.querySelectorAll("w[lemma]");for(let t of h)t.textContent=t.getAttribute("lemma")}if(s.get("option_mergegroups")){let h=o.querySelectorAll("cl");for(let t of h){let n=t.removeChild(t.firstChild);for(;t.firstChild;){let i=n.getAttribute("lemma")||n.textContent,l=t.firstChild.getAttribute("lemma")||t.firstChild.textContent;for(n.setAttribute("lemma",i+l);t.firstChild.firstChild;)n.appendChild(t.firstChild.firstChild);t.firstChild.remove()}n.getAttribute("lemma")===n.textContent&&n.removeAttribute("lemma"),t.parentNode.insertBefore(n,t),t.parentNode.removeChild(t)}}if(s.get("option_insignificant")){let h=o.querySelectorAll('w[insignificant="true"]');for(let t of h)t.parentNode.removeChild(t)}if(s.get("option_binary")){let t=[...v.firsttext().querySelectorAll('w[binary="true"]')].map(n=>n.getAttribute("n"));for(let n of t){let i=o.querySelectorAll(`w[n="${n}"]:not(:empty)`);if(i.length===0)continue;let l=`[${i[0].textContent}]`;for(let p of i)p.textContent=l}}if(s.get("option_noempty")){let h=o.querySelectorAll("w:empty");for(let t of h)t.textContent="[]"}return s.get("option_basetext")?U.makeApp(s,o):o},makeHeader(s,o){let h=s.createElementNS(x.teins,"teiHeader"),t=s.createElementNS(x.teins,"fileDesc"),n=s.createElementNS(x.teins,"sourceDesc"),i=s.createElementNS(x.teins,"listWit");for(let l of v.teis(o)){let p=l.getAttribute("n"),m=s.createElementNS(x.teins,"witness");m.setAttribute("xml:id",p);let b=s.createElementNS(x.teins,"idno");b.setAttribute("type","siglum"),b.append(p),m.appendChild(b),i.appendChild(m)}return n.appendChild(i),t.appendChild(n),h.appendChild(t),h},makeApp(s,o){let h=s.get("option_basetext"),t=v.tei(h,o),n=s.get("option_app_normalize"),i=document.implementation.createDocument(x.teins,"",null);i.appendChild(t);let l=U.makeHeader(i,o);t.insertBefore(l,t.firstChild);let p=v.words(!1,t);for(let m of p){let b=m.getAttribute("n"),N=n&&m.getAttribute("lemma")||m.textContent,B=[],V=new Map,G=v.words(b,o);for(let K of G){let se=K.closest("TEI").getAttribute("n");if(n&&K.getAttribute("lemma")===N)B.push(se);else if(K.textContent===N)B.push(se);else{let de=K.textContent===""?"[om.]":K.textContent,ge=V.get(de)||[];ge.push(se),V.set(de,ge)}}if(V.size===0)for(;m.firstChild;)m.parentElement.insertBefore(m.firstChild,m);else{let K=i.createElementNS(x.teins,"app");K.setAttribute("n",b);let se=i.createElementNS(x.teins,"lem"),de=B.map(ge=>`#${ge}`).join(" ");for(de!==""&&se.setAttribute("wit",de);m.firstChild;)se.appendChild(m.firstChild);K.appendChild(se);for(let[ge,be]of V){let ve=i.createElementNS(x.teins,"rdg"),Ae=be.map(ke=>`#${ke}`).join(" ");ve.setAttribute("wit",Ae),ve.append(ge),K.appendChild(ve)}m.parentElement.insertBefore(K,m),se.textContent.match(/\s$/)&&m.parentElement.insertBefore(i.createTextNode(" "),m)}m.remove()}return i},options(){return document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <input type="checkbox" id="option_insignificant" name="option_insignificant"><label for="option_insignificant">Remove insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_binary" name="option_binary"><label for="option_binary">Binarize marked lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_noempty" name="option_noempty"><label for="option_noempty">Gaps are significant</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups"><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`)},appOptions(){let s=document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <label for="option__basetext">Base text</label>
        <select id="option__basetext" name="option_basetext"></select>
      </div>
      <div>
        <input type="checkbox" id="option__app_insignificant" name="option_app_insignificant"><label for="option_app_insignificant">Ignore insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups" checked><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_app_normalize" name="option_app_normalize" checked><label for="option_app_normalize">Normalized spellings in positive apparatus</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings in negative apparatus</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`),o=s.getElementById("option__basetext"),h=[...v.trs()].map(t=>t.dataset.n);for(let t of h){let n=document.createElement("option");n.value=t,n.append(t),o.appendChild(n)}return s},showOptions:function(s,o){let h=o(),t=document.createElement("div");t.id="blackout",t.appendChild(h),document.body.appendChild(t);let n=function(l){l.preventDefault();var p=[];let m=document.getElementById("exportform").elements;for(let N of m)N.type==="checkbox"?p.push([N.name,N.checked]):p.push([N.name,N.value]);let b=U.processOptions(new Map(p));s(b),document.body.removeChild(t)};return t.querySelector("button").addEventListener("click",n),t.addEventListener("click",U.blackoutClick),t},blackoutClick:function(s){if(!s.target.closest(".popup")){let h=document.querySelector("#blackout");h.parentNode.removeChild(h)}}},re={selectAll(s){let o=document.createRange();o.selectNodeContents(s);let h=window.getSelection();h.removeAllRanges(),h.addRange(o)},deselect(){let s=window.getSelection();s.removeAllRanges?s.removeAllRanges():s.empty&&s.empty()},treeMouseover(s){let o=s.target.classList.contains("tree-lemma")?s.target:s.target.closest(".tree-lemma");o&&(L.highlightTreeLemma(o.dataset.id),o.addEventListener("mouseout",L.unhighlightTrees));let h=s.target.dataset.reconstructed;if(!h)return;let t=document.createElement("div");t.id="tooltip",t.style.top=s.pageY+"px",t.style.left=s.pageX+"px",t.style.opacity=0,t.style.transition="opacity 0.2s ease-in",u.viewdiv.parentElement.appendChild(t);let n=document.createElement("div");if(n.appendChild(document.createTextNode(h)),this.script!==0?t.appendChild(Ot(n,x.scripts[this.script])):t.appendChild(n),s.target.classList.contains("reconstructed")){let i=s.target.parentNode.querySelector("span.tree-lemma");if(i&&i.dataset.hasOwnProperty("emended")){let l=document.createElement("div");l.classList.add("emphasis"),l.appendChild(document.createTextNode(i.textContent)),this.script!==0?t.prepend(Ot(l,x.scripts[this.script])):t.prepend(l)}}window.getComputedStyle(t).opacity,t.style.opacity=1,s.target.addEventListener("mouseout",q)},treeClick(s){s.target.classList.contains("witness")?f.text(s.target.dataset.key):s.target.classList.contains("reconstructed")?f.text(s.target.dataset.label):s.target.classList.contains("internal")&&I.startReconstruction(s),q()},keyDown(s){if(!u.editing&&s.key.substring(0,5)==="Arrow")re.cycleVariant(s);else if(s.ctrlKey||s.metaKey)s.key==="Z"?I.redo():s.key==="z"&&I.undo();else if(!u.editing&&u.matrix&&!u.matrix.closed&s.key==="Enter"){let o=v.highlitcell();o&&(s.preventDefault(),I.startEditCell(o))}},cycleVariant(s){let o=v.highlitcell()||u.viewdiv.querySelector("td.highlit")||u.viewdiv.querySelector('td[data-n="0"]');switch(s.key){case"ArrowRight":{if(!u.matrix.closed&&o){let h=o.nextElementSibling;h&&re.textClick({target:h})}else{let h=u.viewdiv.querySelector(".highlit"),t=h?h.dataset.n:0,n=parseInt(t)+1;for(;n<=u.maxlemma;){let i=u.viewdiv.querySelectorAll('[data-n="'+n+'"]');for(let l of i)if(l&&!l.classList.contains("invisible")){re.textClick({target:l});return}n++}}break}case"ArrowLeft":{if(!u.matrix.closed&&o){let h=o.previousElementSibling;h&&re.textClick({target:h})}else{let h=u.viewdiv.querySelector(".highlit"),t=h?h.dataset.n:0,n=parseInt(t)-1;for(;n>=0;){let i=u.viewdiv.querySelectorAll('[data-n="'+n+'"]');for(let l of i)if(l&&!l.classList.contains("invisible")){re.textClick({target:l});return}if(n--,o){re.textClick({target:o.previousElementSibling});return}}}break}case"ArrowUp":{if(u.matrix.closed||!o)return;let t=o.closest("tr").previousElementSibling;if(!t||!t.dataset.n)return;let n=t.querySelector(`td[data-n="${o.dataset.n}"]`);re.textClick({target:n});break}case"ArrowDown":{if(u.matrix.closed||!o)return;let t=o.closest("tr").nextElementSibling;if(!t||t.tagName!=="TR")return;let n=t.querySelector(`td[data-n="${o.dataset.n}"]`);re.textClick({target:n})}}},textClick(s,o=!1){if(s.target.closest("tr.header")){re.matrixHeaderClick(s);return}let h=s.target.classList.contains("lemma")?s.target:s.target.closest(".lemma");if(h){if(!o&&s.ctrlKey){re.rightClick(s);return}let t=h.dataset.n,n=v.highlitrow();if(L.unHighlightAll(),L.highlightLemma(t),L.repopulateTrees(t),_e.xScroll(t,n),h.tagName==="TD")h.classList.add("highlitcell");else{let i=h.closest(".text-box");if(i){let l=i.dataset.id;v.tr(l).querySelector(`td[data-n="${t}"]`).classList.add("highlitcell")}}}},textMouseup(){let s=v.selection();L.highlightRange(s),T()},menuMouseover(s){let o=s.target.classList.contains("menubox")?s.target:s.target.closest(".menubox");if(o){let h=o.querySelector("ul");h&&(h.style.display="block"),o.classList.add("open")}},menuMouseout(s){let o=s.target.classList.contains("menubox")?s.target:s.target.closest(".menubox");if(o){let h=o.querySelector("ul");h&&(h.style.display="none"),o.classList.remove("open")}},menuClick(s){!s.target.parentElement||(s.target.parentElement.className==="ms"&&(re.menuMouseout(s),f.text(s.target.dataset.name)),s.target.parentElement.className==="tree"&&(re.menuMouseout(s),s.target.closest("li[data-name]")&&f.tree(s.target.dataset.stemmaid,s.target.dataset.treeid)))},thDragStart(s){s.dataTransfer.setData("text/plain",s.target.textContent),I.startMoveRow(s.target.parentNode,s)},trDragEnter(s){let o=s.target.nodeType===1?s.target.closest("tr"):s.target.parentElement.closest("tr");o&&o.classList.add("dragenter")},trDragLeave(s){let o=s.target.nodeType===1?s.target.closest("tr"):s.target.parentElement.closest("tr");o&&o.classList.remove("dragenter")},trDragDrop(s){s.preventDefault(),I.finishMoveRow(s)},matrixMousedown(s){if(s.button!==0)return;if(s.ctrlKey){re.rightClick(s);return}let o=s.target.nodeType===1?s.target.closest(".lemma"):s.target.parentElement.closest(".lemma");if(o){if(o.isContentEditable)return;L.unHighlightAll(),L.highlightLemma(o.dataset.n);let h=u.matrix.boxdiv.querySelector("table");h.addEventListener("mouseover",re.matrixMouseover),h.addEventListener("mouseup",re.matrixMouseup)}},matrixMouseup(){let s=v.highlit();L.highlightRange(s);let o=u.matrix.boxdiv.querySelector("table");o.removeEventListener("mouseover",re.matrixMouseover),o.removeEventListener("mouseup",re.matrixMouseup)},matrixMouseover(s){let o=s.target.nodeType===1?s.target.closest(".lemma"):s.target.parentElement.closest(".lemma");o&&L.highlightLemma(o.dataset.n)},matrixHeaderClick(s){if(s.target.tagName!=="INPUT")return;let o=s.target.className;if(o!=="insignificant"&&o!=="binary")return;let h=s.target.closest("th").dataset.ref,t=v.firsttd(h).dataset[o]!=="true",n=new Map([[h,t]]);I.doMarkAs(o,n)},rightClick(s){let o=s.target.nodeType===1?s.target.closest("tr[data-n] th"):s.target.parentElement.closest("tr[data-n] th");if(o){s.preventDefault(),me.remove();let t=me.create(s),n=[{text:"move row",func:I.startMoveRow.bind(null,o.parentNode)},{text:"delete row",func:I.doDeleteRow.bind(null,o.parentNode.dataset.n)}];me.populate(t,n),me.show(t);return}let h=s.target.nodeType===1?s.target.closest("td.lemma"):s.target.parentElement.closest("td.lemma");if(h){s.preventDefault();let t=h.classList.contains("highlit")?function(){let l=v.highlit();return l.size===1&&!h.classList.contains("highlitcell")&&(L.unCelllightAll(),h.classList.add("highlitcell")),l}():(re.textClick(s,!0),new Set([h.dataset.n])),n=t.size>1?[{text:"merge columns",func:I.startMerge.bind(null,t)},{text:"ungroup columns",alt:"group columns",toggle:R.grouped,func:I.startGroup.bind(null,!1)},{text:"delete columns",func:I.startRemoveCol.bind(null,t)}]:[{text:"edit cell",func:I.startEditCell.bind(null,h)},{text:"delete column",func:I.startRemoveCol.bind(null,t)},{text:"insert column",func:I.startInsertCol}];me.remove();let i=me.create(s);me.populate(i,n),me.show(i)}}},I={undo:function(){let s=u.undo.pop();s&&s[0](...s[1])},redo:function(){let s=u.redo.pop();s&&s[0](...s[1])},doStack:function(s,o="do"){o==="undo"?(s[1].push("redo"),u.redo.push(s)):o==="redo"?(s[1].push("undo"),u.undo.push(s)):(s[1].push("undo"),u.undo.push(s),u.redo=[])},doMulti:function(s,o){let h=[];for(let t of s){let n=t[0](...t[1],"multido");h.unshift(n)}I.doStack([I.doMulti,[h]],o)},startMoveRow:function(s,o){if(u.dragged=s,u.dragged.classList.add("dragging"),o.type!=="dragstart"){for(let h of v.trs())h.classList.add("moveinprogress");u.matrix.boxdiv.querySelector("table").addEventListener("mousedown",I.finishMoveRow)}},startMerge:function(s){let o=s===!1?v.highlit():s,h=v.clauses(o,!0);if(!h)I.doMerge(o,"do");else if(h[0]===null){let t=h.filter(n=>n!==null).map(n=>[I.doUngroup,[n]]).concat([[I.doMerge,[o]]]);I.doMulti(t,"do")}else{let t=v.clausesToRemove(h,o);if(!t)I.doMerge(o,"do");else{let n=t.map(i=>[I.doUngroup,[i]]).concat([[I.doMerge,[o]]]);I.doMulti(n,"do")}}},startGroup:function(s){let o=s===!1?v.highlit():s;R.grouped()?I.startUngroup(o):I.doGroup(o,"do")},startUngroup:function(s){let h=[...v.clauses(s)].map(t=>[I.doUngroup,[t]]);I.doMulti(h,"do")},startInsertCol:function(){let s=Math.max([...v.highlit()])||u.maxlemma;I.doInsertCol(s)},startRemoveCol:function(s){let o=s===!1?v.highlit():s,h=v.clauses(o);if(!h)I.doRemoveCol(o,"do");else{let t=v.clausesToRemove(h,o,1);if(!t)I.doRemoveCol(o,"do");else{let n=t.map(i=>[I.doUngroup,[i]]).concat([[I.doRemoveCol,[o]]]);I.doMulti(n,"do")}}},startRemoveEmpty:function(){let s=v.empty(),o=v.clauses(s);if(!o)I.doRemoveCol(s,"do");else{let h=v.clausesToRemove(o,s,1);if(!h)I.doRemoveCol(s,"do");else{let t=h.map(n=>[I.doUngroup,[n]]).concat([[I.doRemoveCol,[s]]]);I.doMulti(t,"do")}}},startEditCell:function(s){let o=s||v.highlitcell();!o||(I.unnormalize(o),o.dataset.oldContent=o.textContent,o.contentEditable="true",o.focus(),u.editing=!0,re.selectAll(o),o.addEventListener("blur",I.finishEditCell),o.addEventListener("keydown",I.cellKeyDown))},cellKeyDown:function(s){switch(s.key){case"Enter":I.finishEditCell(s);break;case"Escape":I.finishEditCell(s,!0);break;case"ArrowRight":{let o=v.cursorPos(s.target);o[0]===o[1]&&(s.preventDefault(),I.finishEditCell(s),re.cycleVariant({key:"ArrowRight"}),I.startEditCell(v.highlitcell()));break}case"ArrowLeft":{v.cursorPos(s.target)[0]===0&&(s.preventDefault(),I.finishEditCell(s),re.cycleVariant({key:"ArrowLeft"}),I.startEditCell(v.highlitcell()));break}}},startMarkAs:function(s,o,h){let t=h.target.tagName==="INPUT"?h.target:h.target.querySelector("input"),n=o===!1?v.highlit():o,i=new Map([...n].map(l=>[l,!t.checked]));I.doMarkAs(s,i)},startNewRow:function(){let s=xe.row("new row"),o=s.querySelector("th");o.contentEditable=!0,o.addEventListener("blur",I.finishNewRow),o.addEventListener("keydown",I.thKeyDown),u.matrix.boxdiv.querySelector("tbody").appendChild(s),o.scrollIntoView(),o.focus(),document.execCommand("selectAll",!1,null),u.editing=!0},startRenameRow:function(){},startReconstruction:function(s){let o=s.target.dataset.key,h=s.target.closest(".tree-box").myTree,t=h.desc,n=document.createElement("div");n.id="blackout";let i=document.createRange().createContextualFragment(`<div id="reconstructionoptions" class="popup">
    <form id="reconstructionform">
      <div>
        <label for="reconstructed_node_name">Label for node:</label>
        <input type="text" id="reconstructed_node_name" name="reconstructed_node_name" placeholder="${t}-${o}" size="15">
      </div>
      <div style="width: 100%; display: flex; justify-content: center;padding-top: 1em;">
        <button type="submit">Add to matrix</button>
      </div>
    </form>
</div>`);n.appendChild(i),document.body.appendChild(n);let l=function(m){m.preventDefault();let b=n.querySelector("input"),N=b.value?b.value:b.placeholder;I.doReconstruction(h,o,N),document.body.removeChild(n)};n.querySelector("button").addEventListener("click",l),n.addEventListener("click",U.blackoutClick)},thKeyDown:function(s){s.key==="Enter"&&I.finishNewRow(s)},finishNewRow:function(s){let o=s.target,h=o.textContent;o.closest("tr").dataset.n=h;let t=xe.tei(h);u.xml.documentElement.appendChild(t),u.editing=!1,o.contentEditable=!1,o.removeEventListener("blur",I.finishNewRow),o.removeEventListener("keydown",I.thKeyDown),I.doStack([I.doDeleteRow,[h]],"do")},finishEditCell:function(s,o=!1){let h=s.target;u.editing=!1,h.contentEditable="false",h.removeEventListener("blur",I.finishEditCell),h.removeEventListener("keydown",I.cellKeyDown),h.blur(),re.deselect();let t=h.textContent;if(t===""){let p=h.querySelector("br");p&&p.remove()}if(o||t===h.dataset.oldContent)return;h.hasOwnProperty("IAST")||(h.IAST=h.cloneNode(!0)),h.IAST.textContent=t;let n=parseInt(h.dataset.n),i=h.closest("tr"),l=i.dataset.n;if(I.xmlChangeCell(n,l,t),i.dataset.hasOwnProperty("treename")&&!h.dataset.hasOwnProperty("emended")){let p=I.doEmend(n,l,"multido"),m=[];m.push([I.doChangeCell,[n,l,h.dataset.oldContent]]),m.push(p),I.doStack([I.doMulti,[m]],"do")}else I.doStack([I.doChangeCell,[n,l,h.dataset.oldContent]],"do");delete h.dataset.oldContent,I.refresh(),_e.updateAllHeaders(!0),h.classList.add("highlitcell")},finishMoveRow:function(s){let o=s.target.nodeType===1?s.target.closest("tr"):s.target.parentElement.closest("tr");if(o&&I.doMoveRow(u.dragged,o,"do"),s.type!=="drop"){for(let h of v.trs())h.classList.remove("moveinprogress");u.matrix.boxdiv.querySelector("table").removeEventListener("mousedown",I.finishMoveRow)}else for(let h of v.trs())h.classList.remove("dragenter");u.dragged.classList.remove("dragging"),u.dragged=null},doReconstruction:function(s,o,h){let t=xe.row(h,"pending");t.dataset.treename=s.name,t.dataset.nodename=o;let n=t.querySelector("th"),i=document.createElement("div");i.id="spinner",n.prepend(i);let l=xe.tei(h);l.setAttribute("type","reconstructed"),l.setAttribute("corresp",s.name),l.setAttribute("select",`#${o}`);let p=[...v.tds(!1,t)],m=[...v.words(!1,l)];u.matrix.boxdiv.querySelector("tbody").appendChild(t),n.scrollIntoView();let b=new Blob(["("+T1.toString()+")()"],{type:"application/javascript"}),N=new Worker(window.URL.createObjectURL(b)),B=R.normalizedView(),V=v.serializedtexts(s.nexml,B),G=v.serializedlevels(s.levels,B);N.postMessage({readings:V,levels:G,num:0,id:o}),N.onmessage=function(K){let se=K.data.n,de=K.data.result;if(p[se].textContent=de,p[se].IAST=p[se].cloneNode(!0),p[se].classList.remove("pending"),m[se].textContent=de,se<u.maxlemma)N.postMessage({readings:V,levels:G,num:se+1,id:o});else{n.removeChild(i),u.xml.documentElement.appendChild(l),_e.updateAllHeaders(),s.draw();let ge=v.highlit();ge.size>0&&L.repopulateTrees(...v.lowhigh(ge));let be=document.getElementById("menu").querySelector(".ms"),ve=document.createElement("li");ve.setAttribute("data-name",h),ve.appendChild(document.createTextNode(h)),be.appendChild(ve),I.doStack([I.doDeleteRow,[h]],"do")}}},doDeleteRow:function(s,o="do"){let h=v.tr(s),t=v.tei(s),i=[...v.teis()].indexOf(t);h.parentNode.removeChild(h),t.parentNode.removeChild(t),_e.updateAllHeaders(),he(),C(),I.doStack([I.doUndeleteRow,[h,t,i]],o)},doUndeleteRow:function(s,o,h,t="do"){let n=o.getAttribute("n"),i=[...v.teis()];if(h===i.length)u.xml.documentElement.appendChild(o),u.matrix.boxdiv.querySelector("tbody").appendChild(s);else{let l=[...v.trs()];u.xml.documentElement.insertBefore(o,i[h]),l[h].parentNode.insertBefore(s,l[h])}_e.updateAllHeaders(),he(),C(),I.doStack([I.doDeleteRow,[n]],t)},doMoveRow:function(s,o,h="do"){let t=s.parentNode,n=[...v.trs()],i=s.previousElementSibling,l=n.indexOf(s),p=o!==null?n.indexOf(o):null,m=function(){o===null?t.insertBefore(s,t.firstChild):o.nextElementSibling?t.insertBefore(s,o.nextElementSibling):t.appendChild(s)},b=function(){let N=u.xml.documentElement,B=[...v.teis()],V=B[l];if(p===null)N.insertBefore(V,B[0]);else{let G=B[p];G.nextElementSibling?N.insertBefore(V,G.nextElementSibling):N.appendChild(V)}};if(m(),b(),h==="multido")return[I.doMoveRow,[s,i]];I.doStack([I.doMoveRow,[s,i]],h)},doMerge:function(s,o="do"){let h=function(l,p,m){let b=l();var N=[];for(let B of b){let V=[...m].map(se=>p(se,B)),G=V.map(se=>se.cloneNode(!0));N.push(G);for(let se of V)I.unnormalize(se);let K=V.reduce(function(se,de){if(de.hasChildNodes())for(;de.firstChild;)se.appendChild(de.firstChild);return de.parentNode.removeChild(de),se});K.normalize(),K.dataset?(delete K.dataset.normal,K.IAST=K.cloneNode(!0)):K.removeAttribute("lemma")}return[l,p,N]},t=h(v.trs,v.firsttd,s),n=h(v.texts,v.firstword,s),i=parseInt([...s][0]);if(I.renumber(i),I.restyleGroups(s),I.refresh(),_e.updateAllHeaders(),o==="multido")return[I.doUnmerge,[t,n]];I.doStack([I.doUnmerge,[t,n]],o)},doUnmerge:function(s,o,h="undo"){let t=function(p,m,b){let N=v.whichattr(b[0][0]),B=b[0].map(se=>se.getAttribute(N)),V=B[0],G=p();for(var K=0;K<G.length;K++){let se=b[K].pop(),de=m(V,G[K]);de.parentNode.replaceChild(se,de);for(let ge of b[K])se.parentNode.insertBefore(ge,se)}return B};t(...s);let n=t(...o),l=[...n].sort((p,m)=>parseInt(p)-parseInt(m))[0];if(I.renumber(l),I.reIAST(n),I.refresh(),I.restyleGroups(n),_e.updateAllHeaders(),h==="multido")return[I.doMerge,[n]];I.doStack([I.doMerge,[n]],h)},doGroup:function(s,o="do"){let h=[...s],t=h.shift(),n=v.texts();for(let l of n){let p=document.createElementNS("http://www.tei-c.org/ns/1.0","cl"),m=v.firstword(t,l);m.parentNode.insertBefore(p,m),p.appendChild(m);for(let b of s)p.appendChild(v.firstword(b,l))}let i=h.pop();for(let l of v.tds(t))l.classList.add("group-start");for(let l of v.tds(i))l.classList.add("group-end");for(let l of h)for(let p of v.tds(l))p.classList.add("group-internal");for(let l of u.textboxes)l.refresh();if(o==="multido")return[I.doUngroup,[s]];I.doStack([I.doUngroup,[s]],o)},doUngroup:function(s,o="do"){let h=v.texts();for(let n of h){let i;for(let l of s){let p=v.firstword(l,n);i||(i=p.closest("cl")),i.parentNode.insertBefore(p,i)}i.parentNode.removeChild(i)}let t=[...s].map(n=>[...v.tds(n)]).reduce((n,i)=>n.concat(i),[]);for(let n of t)n.classList.remove("group-start","group-internal","group-end");for(let n of u.textboxes)n.refresh();if(o==="multido")return[I.doGroup,[s]];I.doStack([I.doGroup,[s]],o)},doGroupWords:function(){let s=0,o=[];for(let h=0;h<=u.maxlemma;h++){let t=v.tds(h),n=t[0].classList;if(n.contains("group-start")||n.contains("group-internal")||n.contains("group-end")){s=h+1;continue}let i=t.length,l=0;if(h===u.maxlemma)l=i;else for(let p of t)(p.IAST?p.IAST.textContent:p.textContent).slice(-1)===" "&&l++;if(l/i>=.5)if(s===h){s++;continue}else{let p=v.range(s,h);o.push([I.doGroup,[p]]),s=h+1}}I.doMulti(o)},doRemoveCol:function(s,o="do"){let h=function(p,m,b){let N=p();var B=[];for(let V of N){let G=[...b].map(se=>{let de=m(se,V);return I.unnormalize(de),de}),K=G.map(se=>se.cloneNode(!0));B.push(K);for(let se of G)se.parentNode.removeChild(se)}return[p,m,B]},t=h(v.trs,v.firsttd,s),n=h(v.texts,v.firstword,s),i=[...s].sort((p,m)=>parseInt(p)-parseInt(m)),l=parseInt([...i][0])-1;if(I.renumber(l),I.refresh(),I.restyleGroups(s,!0),_e.updateAllHeaders(),o==="multido")return[I.doUnremoveCol,[t,n]];I.doStack([I.doUnremoveCol,[t,n]],o)},doUnremoveCol:function(s,o,h){let t=function(m,b,N){let B=v.whichattr(N[0][0]),V=N[0].map(de=>de.getAttribute(B)),G=V[0],K=m();for(var se=0;se<K.length;se++){let de=b(G,K[se]);for(let ge of N[se])de.parentNode.insertBefore(ge,de)}return V};t(...s);let n=t(...o),i=[...n].sort((m,b)=>parseInt(m)-parseInt(b)),l=parseInt(i[0])-1;I.renumber(l);let p=document.querySelectorAll(".highlitcell");for(let m of p)m.classList.remove("highlitcell");if(I.reIAST(n),I.refresh(),I.restyleGroups(n,!0),_e.updateAllHeaders(),h==="multido")return[I.doRemoveCol,[n]];I.doStack([I.doRemoveCol,[n]],h)},doInsertCol:function(s,o="do"){let h=function(n,i,l,p){let m=n();for(let b of m){let N=i(p,b),B=l(p+1);N.insertAdjacentElement("afterend",B)}};h(v.trs,v.firsttd,xe.emptycell,s),h(v.texts,v.firstword,xe.emptyword,s),I.renumber(s),I.refresh(),I.restyleGroups([s,s+1],!0),_e.updateAllHeaders();let t=[s+1];if(o==="multido")return[I.doRemoveCol,[t]];I.doStack([I.doRemoveCol,[t]],o)},doEmend:function(s,o,h="do"){let t=[...v.trs()][o],n=v.firsttd(s,t);n.dataset.emended=!0;let i=v.tei(o).querySelector("text");if(v.firstword(s,i).setAttribute("emended","true"),h==="multido")return[I.doUnemend,[s,o]];I.doStack([I.doUnemend,[s,o]],h)},doUnemend:function(s,o,h="do"){let t=[...v.trs()][o],n=v.firsttd(s,t);delete n.dataset.emended;let i=v.tei(o).querySelector("text");if(v.firstword(s,i).removeAttribute("emended"),h==="multido")return[I.doEmend,[s,o]];I.doStack([I.doEmend,[s,o]],h)},doChangeCell:function(s,o,h,t="do"){let n=I.xmlChangeCell(s,o,h),i=I.htmlChangeCell(s,o,h);if(I.refresh(),_e.updateAllHeaders(!0),re.textClick({target:i}),t==="multido")return[I.doChangeCell,[s,o,n]];I.doStack([I.doChangeCell,[s,o,n]],t)},htmlChangeCell:function(s,o,h){let t=v.tr(o),n=v.firsttd(s,t);return I.unnormalize(n),n.textContent=h,n.IAST&&(n.IAST=n.cloneNode(!0)),n},xmlChangeCell:function(s,o,h){let t=v.tei(o).querySelector("text"),n=v.firstword(s,t);I.unnormalize(n);let i=n.textContent;return n.childNodes.length===0?n.appendChild(document.createTextNode(h)):n.textContent=h,i},doMarkAs:function(s,o,h="do"){let t=[...o.keys()],n=v.attr(s,t);for(let i of t){let l=v.tds(i),p=v.words(i);if(o.get(i)===!0){for(let b of l)b.dataset[s]="true";for(let b of p)b.setAttribute(s,"true")}else{for(let b of l)delete b.dataset[s];for(let b of p)b.removeAttribute(s)}let m=v.checkbox(i,s);m.checked=o.get(i)}if(h==="multido")return[I.doMarkAs,[s,n]];I.doStack([I.doMarkAs,[s,n]],h)},refresh:function(){for(let s of u.textboxes)s.refresh();L.rehighlight(),R.anyhighlit()?L.repopulateTrees(...v.lowhigh(v.highlit())):L.clearTrees()},renumber:function(s=0){let o=function(h,t,n){let i=h();for(let p of i){let m=[...t(!1,p)],b=v.whichattr(m[0]);for(var l=parseInt(n)+1;l<m.length;l++)m[l].setAttribute(b,l)}};o(v.trs,v.tds,s),o(()=>[!0],v.ths,s),o(v.texts,v.words,s),u.maxlemma=v.maxlemma()},reIAST:function(s){let o=[...s].map(h=>[...v.lemmata(h)]).flat();for(let h of o)h.IAST=h.cloneNode(!0)},restyleGroups:function(s,o=!1){let t=o?function(i){var l=[...i];let p=parseInt(s[0])-1,m=parseInt(s[s.length-1])+1;return l.unshift(p),l.push(m),l}(s):s,n=function(i,l=!1){let p=new Set(["group-start","group-internal","group-end"]);l&&p.delete(l);for(let m of i){for(let b of p)m.classList.remove(b);l&&m.classList.add(l)}};for(let i of t){let l=v.firstword(i),p=v.tds(i);if(p.length===0)continue;let m=l.closest("cl");m?l===m.firstElementChild?n(p,"group-start"):l===m.lastElementChild?n(p,"group-end"):n(p,"group-internal"):n(p)}},startRenormalize:function(s){let o=s===!1?v.highlit():s;I.doRenormalize(Math.min(...o),Math.max(...o))},doRenormalize:function(s,o,h=!1,t="do"){let n=R.normalizedView(),i=new Map,l=[...v.trs()],p=[...v.texts()],m=h?[h]:[...l.keys()];for(let b of m){let N=new Map,B=p[b],V=[...v.words(!1,B)],G=v.firstword(s,B),K=v.firstword(o,B),se=V.indexOf(G),de=V.indexOf(K),ge=V.slice(se,de+1),be=l[b],Ae=[...v.tds(!1,be)].slice(se,de+1),ke=ge.map(Ne=>Ne.textContent),Le=w1(ke);for(let Ne=0;Ne<Le.length;Ne++){let Me=ge[Ne],Be=Le[Ne],Oe=ke[Ne],qe=Ae[Ne],je=Me.hasAttribute("lemma")?Me.getAttribute("lemma"):!1;if(je!==!1){if(je===Be)continue;N.set(qe.dataset.n,je),I.unnormalize(Me),I.unnormalize(qe)}else N.set(qe.dataset.n,null);Be!==Oe&&(Me.setAttribute("lemma",Be),qe.dataset.normal=Be,n&&(qe.textContent=Be))}i.set(b,N)}_e.updateAllHeaders(!0),_e.xScrollToHighlit(),I.doStack([I.doUnrenormalize,[i]],t)},doUnrenormalize:function(s,o="undo"){let h=R.normalizedView(),t=new Map,n=[...v.trs()],i=[...v.texts()];for(let[l,p]of s.entries()){let m=n[l],b=i[l],N=new Map;for(let[B,V]of p.entries()){let G=v.firsttd(B,m),K=v.firstword(B,b),se=K.hasAttribute("lemma")?K.getAttribute("lemma"):null;N.set(B,se),V===null?(I.unnormalize(G),I.unnormalize(K)):(G.dataset.normal=V,K.setAttribute("lemma",V),h&&(G.textContent=V))}t.set(l,N)}I.doStack([I.doUnrenormalize,[t]],o)},unnormalize:function(s){s.hasOwnProperty("IAST")&&(s.textContent=s.IAST.textContent),s.dataset&&s.dataset.hasOwnProperty("normal")&&delete s.dataset.normal,s.getAttribute("lemma")&&s.removeAttribute("lemma")}},_e={toggleNormalize:function(){R.normalizedView()?_e.showUnnormalized():_e.showNormalized()},showNormalized:function(s){if(s)s.updatescript();else{document.getElementById("views").classList.add("normalized");for(let h of u.textboxes)h.updatescript();u.matrix.updatescript(),R.anyhighlit()?L.repopulateTrees(...v.lowhigh(v.highlit())):L.clearTrees()}_e.updateAllHeaders(!0),_e.xScrollToHighlit()},showUnnormalized:function(){document.getElementById("views").classList.remove("normalized"),u.matrix.updatescript();for(let s of u.textboxes)s.updatescript();R.anyhighlit()?L.repopulateTrees(...v.lowhigh(v.highlit())):L.clearTrees(),_e.updateAllHeaders(!0),_e.xScrollToHighlit()},toggleHeader:function(){let s=u.matrix.boxdiv.querySelector("tr.header");s.style.display==="none"?s.style.display="table-row":s.style.display="none"},updateHeaders(s){for(let o of s){let h=v.firstth(o),[t,n]=v.readings(o),i=h.querySelector("span.readings"),l=t<2?t:`${t}(${n.size})`;i.textContent=l}},updateAllHeaders(s=!1){let o=[...v.trs()],h=o.map(p=>v.trWalker(p)),t=[...v.tds(!1,o[0])],n=[...v.ths()],i=u.matrix.boxdiv.querySelector("tr.header"),l=function(){let p=document.createElement("th"),m=document.createElement("span");m.classList.add("readings"),p.appendChild(m);let b=document.createElement("form");return b.innerHTML='<div><input class="insignificant" type="checkbox">Insignificant</div><div><input class="binary" type="checkbox">Binary</div>',p.appendChild(b),i.appendChild(p),p};for(let p=0;p<t.length;p++){let m=p>=n.length?l():n[p],b=t[p];m.dataset.ref=b.dataset.n;let N=0,B=new Set;for(let G of h){let K=G.nextNode().textContent;K!==""&&(N++,B.add(K))}let V=N<2?N:`${N}(${B.size})`;m.querySelector("span.readings").textContent=V,s||(m.querySelector("input.insignificant").checked=!!b.dataset.insignificant,m.querySelector("input.binary").checked=!!b.dataset.binary)}if(n.length>t.length)for(let p=t.length;p<n.length;p++)i.removeChild(n[p])},xScrollToHighlit:function(){let s=v.highlit();s.size>0&&_e.xScroll([...s][0])},xScroll:function(s,o){if(!s)return;let h=o||v.firsttr(),t=v.firsttd(s,h),n=t.getBoundingClientRect(),i=u.matrix.boxdiv,p=i.getBoundingClientRect().right,m=h.querySelector("th").getBoundingClientRect(),b=m.right,N=n.right>p,B=n.left+.1<b;N&&t.scrollIntoView({inline:"end",block:"nearest"}),B&&(t.scrollIntoView({inline:"start",block:"nearest"}),i.scroll({left:i.scrollLeft-m.width}))}},xe={tei:function(s){let o=u.xml.createElementNS(x.teins,"TEI");o.setAttribute("n",s);let h=v.firsttext().cloneNode(!0);o.appendChild(h);for(let t of v.words(!1,h))for(t.removeAttribute("lemma");t.firstChild;)t.firstChild.remove();return o},emptycell:function(s){let o=document.createElement("td");return o.className="lemma",o.dataset.n=s,o},emptyword:function(s,o=u.xml){let h=o.createElementNS(x.teins,"w");return h.setAttribute("n",s),h},emptywords:function(s,o,h){let t=o||u.maxlemma,n=h||0;for(let i=n;i<=t;i++){let l=xe.emptyword(i);s.appendChild(l)}},row:function(s,o){let h=document.createElement("tr"),t=document.createElement("th");t.scope="row",t.draggable=!0,t.appendChild(document.createTextNode(s)),t.addEventListener("dragstart",re.thDragStart),h.dataset.n=s,h.appendChild(t);let n=v.firsttr();for(let i of n.querySelectorAll("td")){let l=document.createElement("td");l.dataset.n=i.dataset.n,l.className=i.className,o&&l.classList.add(o),h.appendChild(l)}return h}},me={create:function(s){let o=document.createElement("div");return o.classList.add("contextmenu"),o.style.left=s.clientX-12+"px",o.style.top=s.clientY-22+"px",o},remove:function(){for(let s of document.querySelectorAll(".contextmenu"))s.parentNode.removeChild(s)},show:function(s){document.body.appendChild(s)},populate:function(s,o){let h=document.createElement("ul");for(let t of o){let n=document.createElement("li");if(t.hasOwnProperty("cond")){let i=document.createRange().createContextualFragment('<form><input type="checkbox"'+(t.cond()?" checked":"")+"></form>");n.appendChild(i)}if(t.hasOwnProperty("toggle")){let i=t.toggle()?t.text:t.alt;n.appendChild(document.createTextNode(i))}else n.appendChild(document.createTextNode(t.text));n.addEventListener("mouseup",t.func),h.appendChild(n)}s.appendChild(h)}};class Se{constructor(o){this.name=o,this.box=document.createElement("div"),this.box.classList.add("menubox");let h=document.createElement("div");h.classList.add("heading"),h.appendChild(document.createTextNode(o)),this.box.appendChild(h),h.addEventListener("mouseover",this.checkConditions.bind(this)),this.box.addEventListener("mouseup",this.click.bind(this)),this.items=new Map,this.conditions=new Map}populate(o){let h=this.box.querySelector("ul")||function(t){let n=document.createElement("ul");return t.box.appendChild(n),n}(this);for(let t of o){let n=document.createElement("li");if(t.hasOwnProperty("checkbox")){let i=document.createElement("form"),l=document.createElement("input");l.type="checkbox",l.addEventListener("click",p=>p.preventDefault()),i.appendChild(l),n.appendChild(i),n.appendChild(document.createTextNode(t.text)),this.conditions.set(l,t.checkbox)}else if(t.hasOwnProperty("toggle")){let i=document.createElement("span");i.appendChild(document.createTextNode(t.text)),i.dataset.text=t.text,i.dataset.alt=t.alt,this.conditions.set(i,t.toggle),n.appendChild(i)}else n.appendChild(document.createTextNode(t.text));t.hasOwnProperty("greyout")&&this.conditions.set(n,t.greyout),this.items.set(n,t.func),h.appendChild(n)}}click(o){let h=o.target.tagName==="LI"?o.target:o.target.closest("li");if(h&&!h.classList.contains("greyedout")){let t=this.items.get(h);t&&(t(o),this.checkConditions())}}checkConditions(){let o=new Map;for(let[h,t]of this.conditions){let n=o.get(t)||function(){let i=t();return o.set(t,i),i}();h.tagName==="INPUT"?h.checked=n:h.tagName==="SPAN"?n?h.textContent=h.dataset.alt:h.textContent=h.dataset.text:h.tagName==="LI"&&(n?h.classList.remove("greyedout"):h.classList.add("greyedout"))}}}class X{constructor(o){this.name=o,this.script=0}show(){u.descs.appendChild(this.descbox),R.normalizedView()&&_e.showNormalized(this),u.viewdiv.appendChild(this.boxdiv),this.closed=!1}clear(){for(;this.boxdiv.firstChild;)this.boxdiv.removeChild(this.boxdiv.firstChild);this.svgcontainer&&(this.clearsvg(),this.boxdiv.appendChild(this.svgcontainer))}destroy(){u.viewdiv.removeChild(this.boxdiv),u.descs.removeChild(this.descbox);let o=u.trees.indexOf(this);o>-1&&u.trees.splice(o,1);let h=u.textboxes.indexOf(this);h>-1&&u.textboxes.splice(h,1),this.closed=!0,this.name==="Matrix"&&(document.getElementById("matrixmenu").style.display="block"),C(),L.rehighlight()}pullout(){this.destroy();let o="menubar=no,location=no,status=no,height=620,width=620,scrollbars=yes,centerscreen=yes",h=window.mainWindow?window.mainWindow.comboView.getWindows().length:u.windows.length,t=window.open("slave.html","slave"+h,o);t.mainWindow=window.mainWindow?window.mainWindow:window,t.startbox=this.text?{text:{name:this.name}}:{tree:this.name},t.mainWindow.comboView.addWindow(t)}makeDescBox(){let o=document.createElement("div"),h=document.createElement("div");h.classList.add("closer"),h.innerHTML="x",h.title="close";let t=document.createElement("div");t.classList.add("scripter"),t.innerHTML="A",t.title="change script",o.appendChild(h),o.appendChild(t),o.appendChild(document.createTextNode(this.desc)),this.descbox=o,h.addEventListener("click",this.destroy.bind(this)),t.addEventListener("click",this.cyclescript.bind(this))}cyclescript(){this.script=this.script+1,this.script===x.scripts.length&&(this.script=0);let o=this.descbox.querySelector(".scripter");this.script===0?o.innerHTML="A":o.innerHTML=to[x.scripts[this.script]]("a"),x.scripts[this.script]==="grantha"?o.classList.add("grantha"):o.classList.remove("grantha"),this.updatescript()}updatescript(){let o=this.boxdiv.querySelectorAll(".lemma,.tree-lemma");for(let h of o){let t=h.dataset.hasOwnProperty("normal");if(!t&&h.textContent.trim()==="")continue;let n=function(){if(R.normalizedView()&&t){let l=document.createElement("span");return l.appendChild(document.createTextNode(h.dataset.normal)),l}else return h.IAST.cloneNode(!0)}(),i=this.script===0?n:Ot(n,x.scripts[this.script]);for(h.innerHTML="";i.firstChild;)h.appendChild(i.firstChild)}x.scripts[this.script]==="grantha"?this.boxdiv.classList.add("grantha"):this.boxdiv.classList.remove("grantha"),this.boxdiv.classList.contains("matrix")&&_e.xScrollToHighlit()}}class we extends X{constructor(o,h){super(`#${o} #${h}`);this.stemmaid=o,this.id=h,this.nexml=u.treelist.get(this.name).cloneNode(!0),this.desc=this.nexml.querySelector("tree").getAttribute("label")}init(){this.makeDescBox();let o=document.createElement("div");o.classList.add("tree-box");var h,t=0;do h="tree"+t,t++;while(document.getElementById(h));o.id=h,this.boxdiv=o,this.boxdiv.addEventListener("mouseover",re.treeMouseover.bind(this)),this.boxdiv.addEventListener("click",re.treeClick),this.svgcontainer=document.createElement("div"),this.svgcontainer.id=this.boxdiv.id+"container",this.boxdiv.appendChild(this.svgcontainer),this.boxdiv.myTree=this,this.calcPaths(),this.jiggleroot(),this.findLevels(),this.labelInternal()}show(){u.descs.appendChild(this.descbox),u.viewdiv.appendChild(this.boxdiv)}jiggleroot(){let o=this.nexml.evaluate('//nex:node[@root="true"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,h=this.nexml.evaluate('//nex:edge[@source="'+o.id+'"]|//nex:edge[@target="'+o.id+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);if(h.snapshotLength===3){var t,n;for(let i=0;i<h.snapshotLength;i++){let l=h.snapshotItem(i),p=l.getAttribute("source"),m=l.getAttribute("target"),b=this.nexml.evaluate('//nex:node[@id="'+p+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,N=this.nexml.evaluate('//nex:node[@id="'+m+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!b.hasAttribute("otu")&&!N.hasAttribute("otu")){t=l,n=m===o.id?"target":"source";break}}if(t){let i=this.nexml.createElementNS(o.namespaceURI,"node");i.id="fakeroot",i.setAttribute("root","true"),o.removeAttribute("root"),o.parentElement.insertBefore(i,o);let l=this.nexml.createElementNS(o.namespaceURI,"edge");l.id="newrootedge",l.setAttribute("length","0"),l.setAttribute("source","fakeroot"),l.setAttribute("target",o.id),o.parentElement.insertBefore(l,t),t.setAttribute(n,i.id)}}}findLevels(){let o=this.nexml.querySelectorAll("edge"),h=[...this.nexml.querySelectorAll("node[otu]")],t=this.nexml;this.levels=[h];let n=function(p,m){let b=p.map(de=>de.id),N=new Map,B=new Map,V=[];for(let de of m){let ge=de.getAttribute("target"),be=de.getAttribute("source"),ve=(()=>b.indexOf(ge)!==-1?{ancestor:t.getElementById(be),child:t.getElementById(ge)}:b.indexOf(be)!==-1?{ancestor:t.getElementById(ge),child:t.getElementById(be)}:null)();if(ve!==null)if(B.has(ve.ancestor)){let Ae=B.get(ve.ancestor);N.set(ve.ancestor,[Ae.child,ve.child]),V.push(de),V.push(Ae.edge)}else B.set(ve.ancestor,{child:ve.child,edge:de})}let G=[...N.keys()],K=[...B.keys()].reduce((de,ge)=>(G.indexOf(ge)===-1&&de.push(B.get(ge).child),de),[]),se=[...m].reduce((de,ge)=>(V.indexOf(ge)===-1&&de.push(ge),de),[]);return{match:N,remainder:[...new Set(K)],edges:se}};var i=h,l=o;do{let p=n(i,l);this.levels.push(p.match),i=[...p.match.keys(),...p.remainder],l=p.edges}while(l.length>0)}labelInternal(){for(let o of this.nexml.querySelectorAll("node:not([label])"))o.setAttribute("label",o.id)}fitch1(){let o=new Map;for(let h of this.levels[0]){let t=h.getAttribute("label"),n=this.boxdiv.querySelector(`span.tree-lemma[data-id="${t}"]`),i=n?[v.htmlreading(n,R.normalizedView())]:[];o.set(h,new Set(i))}for(let h=1;h<this.levels.length;h++)for(let[t,n]of this.levels[h]){let i=n.map(m=>o.get(m)),l=v.setIntersection(...i),p=l.size>0?l:v.setUnion(...i);o.set(t,p)}return o}fitch2(o){let h=[...this.nexml.querySelectorAll("node[otu]")],t=new Map;for(let[n]of this.levels[this.levels.length-1])t.set(n,o.get(n));for(let n=this.levels.length-1;n>1;n--)for(let[i,l]of this.levels[n]){let p=t.get(i);for(let m of l){if(h.indexOf(m)!==-1)continue;let b=o.get(m);if(b.size===1)t.set(m,b);else{let N=v.setIntersection(p,b),B=N.size>0?N:b;t.set(m,B)}}}return t}fitch(){let o=this.fitch1(),h=function(n){let i=[...n].map(l=>l.trim()===""?"_":l);return i.length===1?i[0]:"{"+i.join(", ")+"}"},t=this.fitch2(o);for(let[n,i]of t){let l=this.boxdiv.querySelector(`span.internal[data-key="${n.id}"]`);l.dataset.reconstructed=h(i)}}clearsvg(){for(;this.svgcontainer.firstChild;)this.svgcontainer.removeChild(this.svgcontainer.firstChild)}removecolors(){let o=this.nexml.querySelectorAll("node[color]");for(let h=0;h<o.snapshotLength;h++)o.snapshotItem(h).removeAttribute("color")}drawlines(o,h){if(this.removecolors(),o){let p=this.getPath(...o.split(";")).path,m=new Set;for(let b of p)m.add(b.getAttribute("target")),m.add(b.getAttribute("source"));for(let b of m){let N=this.nexml.evaluate('//nex:node[@id="'+b+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;N.getAttribute("root")||N.setAttribute("color",h)}}let t=parseInt(window.getComputedStyle(this.svgcontainer,null).width)-15,n=parseInt(window.getComputedStyle(this.boxdiv,null).height)-10,i=function(){return n<600?600:n}();M.PhyloCanvas.Render.Style.line.stroke="rgb(162,164,170)",this.phylocanvas=new M.PhyloCanvas({nexml:this.nexml,fileSource:!0},this.svgcontainer.id,t,i);let l=this.svgcontainer.querySelectorAll('path:not([stroke="#a2a4aa"])');for(let p of l)p.style.strokeWidth="2"}draw(){this.clear(),this.drawlines(),this.makeLabels()}clearLabels(){for(let o of this.boxdiv.firstChild.querySelectorAll("text"))o.parentElement.removeChild(o)}makeLabels(){let o=[...v.texts()],h=new Set(o.map(n=>n.parentNode.getAttribute("n"))),t=new Map(o.filter(n=>n.parentNode.hasAttribute("corresp")&&n.parentNode.getAttribute("corresp")===this.name).map(n=>[n.parentNode.getAttribute("select").replace(/^#/,""),n.parentNode.getAttribute("n")]));for(let n of this.boxdiv.firstChild.querySelectorAll("text")){let i=document.createElement("div");i.setAttribute("class","tree-div");let l=parseInt(n.getAttribute("x")-5),p=parseInt(n.getAttribute("y"))-15;i.style.left=l+"px",i.style.top=p+"px";let m=n.textContent.trim();h.has(m)?i.innerHTML=`<span class="witness inactive" data-key="${m}">${m}</span><span class="tree-lemma ${m}" data-id="${m}"></span>`:m!=="fakeroot"?t.has(m)?i.innerHTML=`<span class="internal reconstructed" data-key="${m}" data-label="${t.get(m)}">${t.get(m)}</span><span class="tree-lemma invisible ${m}" data-id="${m}" data-label="${t.get(m)}"></span>`:i.innerHTML=`<span class="internal" data-key="${m}">0</span>`:i.innerHTML=`<span class="internal" data-key="${m}"></span>`,n.parentElement.removeChild(n),this.boxdiv.appendChild(i)}}clearlemmata(){for(let o of this.boxdiv.querySelectorAll("span.tree-lemma"))o.innerHTML="",o.dataset.hasOwnProperty("normal")&&delete o.dataset.normal,o.IAST=o.cloneNode(!0)}populate(o,h){let t=v.texts();for(let l of t){let p=l.parentNode.getAttribute("n"),m=this.boxdiv.querySelector(`span.tree-lemma[data-id="${p}"]`)||this.boxdiv.querySelector(`span.tree-lemma[data-label="${p}"]`);if(!!m){if(m.hasOwnProperty("IAST")||(m.IAST=m.cloneNode(!0)),m.IAST.innerHTML="",h){let b=[],N=[];var n=!1;for(let B=o;B<=h;B++){let V=v.firstword(B,l);b.push(V.innerHTML),V.hasAttribute("lemma")&&(N[B-o]=V.getAttribute("lemma")),V.hasAttribute("emended")&&(n=!0)}if(m.IAST.appendChild(S.transformString(b.join(" ").replace(/\s+/g," ").trim(),S.sheets.tree)),N.length!==0){let B=b.slice(0).map((G,K)=>N.hasOwnProperty(K)?N[K]:G),V=document.createElement("span");V.appendChild(S.transformString(B.join(" ").replace(/\s+/g," ").trim(),S.sheets.tree)),m.dataset.normal=V.innerHTML}n?m.dataset.emended=!0:m.dataset.hasOwnProperty("emended")&&delete m.dataset.emended}else{let b=v.firstword(o,l);m.IAST.appendChild(S.transformString(b.innerHTML,S.sheets.tree)),b.hasAttribute("lemma")?m.dataset.normal=b.getAttribute("lemma"):delete m.dataset.normal,b.hasAttribute("emended")?m.dataset.emended=!0:m.dataset.hasOwnProperty("emended")&&delete m.dataset.emended}R.normalizedView()&&m.dataset.hasOwnProperty("normal")?m.innerHTML=m.dataset.normal:m.innerHTML=m.IAST.innerHTML}}let i=this.boxdiv.querySelectorAll(".inactive");for(let l of i)l.classList.remove("inactive");this.fitch()}calcPaths(){this.nodes=[],this.paths=[],this.longest={path:[]},this.nsResolver=this.nexml.createNSResolver(this.nexml.ownerDocument==null?this.nexml.documentElement:this.nexml.ownerDocument.documentElement);let o=this.nexml.evaluate("//nex:node[@label]",this.nexml,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);for(let h=0;h<o.snapshotLength;h++)this.nodes.push(o.snapshotItem(h));for(let h=0;h<this.nodes.length;h++){let t=this.nodes[h],n=t.getAttribute("label"),i=t.id;for(let l=h+1;l<this.nodes.length;l++){let p=this.nodes[l],m=p.getAttribute("label"),b=p.id;this.paths.push({nodes:[n,m],path:this.pathFind(i,b)})}}for(let h of Object.keys(this.paths))this.paths[h].path.length>this.longest.path.length&&(this.longest=this.paths[h])}pathFind(o,h,t){t||(t=[]);let n=this.nexml.evaluate('//nex:edge[@source="'+o+'"]|//nex:edge[@target="'+o+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);var i;for(let l=0;l<n.snapshotLength;l++){let p=n.snapshotItem(l);if(i=[p],t.indexOf(p.id)!=-1)continue;t.push(p.id);let m=p.getAttribute("source")!==o?p.getAttribute("source"):p.getAttribute("target");if(m===h)return i;if(!this.nexml.evaluate('//nex:node[@id="'+m+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.hasAttribute("otu")){let N=this.pathFind(m,h,t);if(N)return i.concat(N);continue}}return!1}analyzeVariants(o,h){let t=[],n=[],i=function(N){return N.startsWith("<lg")?S.transformString(N,S.sheets.lg).firstChild.data.slice(1):N},l=function(N){return N.map(B=>i(B)).join(" ").replace(/\s+/g," ").trim()},p=R.normalizedView()?function(N,B){let V=v.firstword(N,B);return V.hasAttribute("lemma")?V.getAttribute("lemma"):V.textContent}:function(N,B){return v.firstword(N,B).textContent};for(let N of v.texts()){let B=N.parentNode.getAttribute("n");if(!this.nexml.querySelector(`otu[label="${B}"]`))continue;let V=h?l(v.range(o,h).map(G=>p(G,N))):i(p(o,N));V===""?t.hasOwnProperty("")?t[""].push(B):t[""]=[B]:t.hasOwnProperty(V)?t[V].push(B):t[V]=[B]}let m={};for(let N of Object.keys(t)){var b={length:0,branch_length:0,paths:[]};if(t[N].length===1)b=!1;else for(let B=0;B<t[N].length;B++)for(let V=B+1;V<t[N].length;V++){let G=this.getPath(t[N][B],t[N][V]);if(G.hasOwnProperty("path")||alert(G),G.path.length===b.length){let K=this.calcBranchLength(G.path);K===b.branch_length?b.paths.push(G):K>b.branch_length&&(b={length:G.path.length,branch_length:K,paths:[G]})}else G.path.length>b.length&&(b={length:G.path.length,branch_length:this.calcBranchLength(G.path),paths:[G]})}m[N]=b}for(let N of Object.keys(n))m[N]=n[N];return m}getPath(o,h){for(let t of this.paths)if(t.nodes.indexOf(o)>-1&&t.nodes.indexOf(h)>-1)return t;return!1}calcBranchLength(o){return o.map(h=>h.getAttribute("length")).reduce((h,t)=>parseFloat(h)+parseFloat(t))}pickColour(o,h,t,n){var i=h,l=t,p=o;n&&(p=p*2,p>=1&&(p-=1,i=t,l=n));let m=l.red-i.red,b=l.green-i.green,N=l.blue-i.blue,B={red:parseInt(Math.floor(i.red+m*p),10),green:parseInt(Math.floor(i.green+b*p),10),blue:parseInt(Math.floor(i.blue+N*p),10)};return"rgb("+B.red+","+B.green+","+B.blue+")"}colourizeVariants(o,h){let t=this.analyzeVariants(o,h);for(let n of this.boxdiv.querySelectorAll("span.tree-lemma")){let i=t.hasOwnProperty(n.dataset.id)?t[t[n.dataset.id]]:t[n.textContent],l={red:252,green:70,blue:107},p={red:63,green:94,blue:251};i?(n.style.color=this.pickColour(i.length/this.longest.path.length,p,l),n.dataset.length=i.length,n.dataset.branch_length=i.branch_length,n.dataset.nodes=i.paths[0].nodes.join(";")):(n.style.color=this.pickColour(1/this.longest.path.length,p,l),n.dataset.length=0,n.dataset.branch_length=0,n.dataset.nodes=""),n.textContent.trim()===""?(n.innerHTML='<span lang="en">Â Â Â </span>',n.style.backgroundColor=n.style.color):n.style.backgroundColor=""}}}class Ce extends X{constructor(o){super(o);this.desc=o,this.text=v.firsttext(o)}init(){this.makeTextBox(),this.makeDescBox(),this.descbox.style.maxWidth="595px",this.descbox.style.paddingLeft="5px",this.boxdiv.addEventListener("mouseup",re.textMouseup)}refresh(){this.boxdiv.innerHTML="",this.boxdiv.appendChild(S.sheets.lemma.transformToFragment(this.text,document)),H(this.boxdiv);for(let o of v.lemmata(!1,this.boxdiv))o.IAST=o.cloneNode(!0);this.updatescript()}makeTextBox(){let o=document.createElement("div");o.dataset.id=this.name,o.classList.add("text-box"),o.appendChild(S.sheets.lemma.transformToFragment(this.text,document)),H(o);for(let h of v.lemmata(!1,o))h.IAST=h.cloneNode(!0);this.boxdiv=o}}class ee extends X{constructor(){super(name);this.desc="Matrix",this.name="Matrix",this.makeDescBox(),this.makeViewBox(),this.descbox.style.maxWidth="100vw",this.descbox.style.paddingLeft="5px"}init(){this.makeTable()}makeViewBox(){let o=document.createElement("div");o.classList.add("matrix"),o.dataset.id=this.name,this.boxdiv=o}makeTable(){let o=document.createElement("div");o.classList.add("scroller"),o.append(S.sheets.matrix.transformToFragment(u.xml,document));for(let m of o.getElementsByTagName("th"))m.addEventListener("dragstart",re.thDragStart);o.addEventListener("dragenter",re.trDragEnter),o.addEventListener("dragleave",re.trDragLeave),o.addEventListener("dragover",m=>m.preventDefault()),o.addEventListener("drop",re.trDragDrop),o.addEventListener("mousedown",re.matrixMousedown);let h=document.createElement("tr");h.classList.add("header");let t=document.createElement("td");t.classList.add("anchor"),h.appendChild(t);let n=[...v.trs(o)],i=n.map(m=>v.trWalker(m)),l=v.tds(!1,n[0]);for(let m of l){let b=document.createElement("th");b.dataset.ref=m.dataset.n;let N=0,B=new Set;for(let se of i){let de=se.nextNode();de.IAST=de.cloneNode(!0);let ge=de.textContent;ge!==""&&(N++,B.add(ge))}let V=N<2?N:`${N}(${B.size})`,G=document.createElement("span");G.classList.add("readings"),G.appendChild(document.createTextNode(V)),b.appendChild(G);let K=document.createElement("form");K.innerHTML='<div><input class="insignificant" title="insignificant" type="checkbox"'+(m.dataset.insignificant?"checked":"")+'></div><div><input class="binary" title="binary" type="checkbox"'+(m.dataset.binary?"checked":"")+"></div>",b.appendChild(K),h.appendChild(b)}let p=o.querySelector("tbody");p.insertBefore(h,p.firstChild),this.boxdiv.append(o)}}return{slaveinit:function(){comboView.init(),window.startbox!==void 0&&(window.startbox.tree?f.tree(window.startbox.tree.stemmaid,window.startbox.tree.id):window.startbox.text&&f.text(window.startbox.text.name,window.startbox.text.map))},maininit:function(){document.getElementById("comboview").style.display="block",comboView.init(),d()},init:function(){u.viewdiv=document.getElementById("views"),u.descs=document.getElementById("descs"),u.viewdiv.addEventListener("click",re.textClick),document.addEventListener("keydown",re.keyDown,{capture:!0}),document.addEventListener("contextmenu",re.rightClick),document.addEventListener("mouseup",me.remove)},getWindows:function(){return u.windows},addWindow:function(s){u.windows.push(s)},getViewdiv:function(){return u.viewdiv},getTrees:function(){return u.trees}}}();window.addEventListener("load",window.comboView.maininit);
//# sourceMappingURL=script.js.map
