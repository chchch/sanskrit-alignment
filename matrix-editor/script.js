"use strict";var De={};De.defaults={skip_sgml:!1,syncope:!1};var Ft=De.schemes={balinese:{vowels:"á¬… á¬† á¬‡ á¬ˆ á¬‰ á¬Š á¬‹ á¬Œ á¬ á¬  á¬ á¬  á¬‘ á¬’".split(" "),vowel_marks:"á¬µ á¬¶ á¬· á¬¸ á¬¹ á¬º á¬» á¬¼ á¬½ á­‚ á¬¾ á¬¿ á­ƒ á­€ á­".split(" "),other_marks:["á¬‚","á¬„","á¬",""],virama:["á­„"],consonants:"á¬“ á¬” á¬• á¬– á¬— á¬˜ á¬™ á¬š á¬› á¬œ á¬ á¬ á¬Ÿ á¬  á¬¡ á¬¢ á¬£ á¬¤ á¬¥ á¬¦ á¬§ á¬¨ á¬© á¬ª á¬« á¬¬ á¬­ á¬® á¬¯ á¬° á¬± á¬² á¬³".split(" "),symbols:"á­ á­‘ á­’ á­“ á­” á­• á­– á­— á­˜ á­™   á­ á­Ÿ".split(" "),zwj:["â€"],skip:[""]},bengali:{vowels:"à¦… à¦† à¦‡ à¦ˆ à¦‰ à¦Š à¦‹ à§  à¦Œ à§¡  à¦ à¦  à¦“ à¦”".split(" "),vowel_marks:"à¦¾ à¦¿ à§€ à§ à§‚ à§ƒ à§„ à§¢ à§£  à§‡ à§ˆ  à§‹ à§Œ".split(" "),other_marks:"à¦‚ à¦ƒ à¦".split(" "),virama:["à§"],consonants:"à¦• à¦– à¦— à¦˜ à¦™ à¦š à¦› à¦œ à¦ à¦ à¦Ÿ à¦  à¦¡ à¦¢ à¦£ à¦¤ à¦¥ à¦¦ à¦§ à¦¨ à¦ª à¦« à¦¬ à¦­ à¦® à¦¯ à¦° à¦² à¦¬ à¦¶ à¦· à¦¸ à¦¹ à¤³ à¦•à§à¦· à¦œà§à¦".split(" "),symbols:"à§¦ à§§ à§¨ à§© à§ª à§« à§¬ à§­ à§® à§¯ à¥ à¦½ à¥¤ à¥¥".split(" "),other:"    à¦¡ à¦¢  à¦¯ ".split(" ")},newa:{vowels:["ğ‘€","ğ‘","ğ‘‚","ğ‘ƒ","ğ‘„","ğ‘…","ğ‘†","ğ‘‡","ğ‘ˆ","ğ‘‰","","ğ‘Š","ğ‘‹","","ğ‘Œ","ğ‘"],vowel_marks:["ğ‘µ","ğ‘¶","ğ‘·","ğ‘¸","ğ‘¹","ğ‘º","ğ‘»","ğ‘¼","ğ‘½","","ğ‘¾","ğ‘¿","","ğ‘‘€","ğ‘‘"],other_marks:["ğ‘‘„","ğ‘‘…","ğ‘‘ƒ","ğ‘‘ ","ğ‘‘¡",""],virama:["ğ‘‘‚"],consonants:["ğ‘","ğ‘","ğ‘","ğ‘‘","ğ‘’","ğ‘”","ğ‘•","ğ‘–","ğ‘—","ğ‘˜","ğ‘š","ğ‘›","ğ‘œ","ğ‘","ğ‘","ğ‘Ÿ","ğ‘ ","ğ‘¡","ğ‘¢","ğ‘£","ğ‘¥","ğ‘¦","ğ‘§","ğ‘¨","ğ‘©","ğ‘«","ğ‘¬","ğ‘®","ğ‘°","ğ‘±","ğ‘²","ğ‘³","ğ‘´"],symbols:["ğ‘‘","ğ‘‘‘","ğ‘‘’","ğ‘‘“","ğ‘‘”","ğ‘‘•","ğ‘‘–","ğ‘‘—","ğ‘‘˜","ğ‘‘™","ğ‘‘‰","ğ‘‘‡","ğ‘‘‹","ğ‘‘Œ"]},sarada:{vowels:["ğ‘†ƒ","ğ‘†„","ğ‘†…","ğ‘††","ğ‘†‡","ğ‘†ˆ","ğ‘†‰","ğ‘†Š","ğ‘†‹","ğ‘†Œ","","ğ‘†","ğ‘†","","ğ‘†","ğ‘†"],vowel_marks:["ğ‘†³","ğ‘†´","ğ‘†µ","ğ‘†¶","ğ‘†·","ğ‘†¸","ğ‘†¹","ğ‘†º","ğ‘†»","","ğ‘†¼","ğ‘†½","","ğ‘†¾","ğ‘†¿"],other_marks:["ğ‘†","ğ‘†‚","ğ‘†€","ğ‘‡‚","ğ‘‡ƒ"],virama:["ğ‘‡€"],consonants:["ğ‘†‘","ğ‘†’","ğ‘†“","ğ‘†”","ğ‘†•","ğ‘†–","ğ‘†—","ğ‘†˜","ğ‘†™","ğ‘†š","ğ‘†›","ğ‘†œ","ğ‘†","ğ‘†","ğ‘†Ÿ","ğ‘† ","ğ‘†¡","ğ‘†¢","ğ‘†£","ğ‘†¤","ğ‘†¥","ğ‘†¦","ğ‘†§","ğ‘†¨","ğ‘†©","ğ‘†ª","ğ‘†«","ğ‘†¬","ğ‘†®","ğ‘†¯","ğ‘†°","ğ‘†±","ğ‘†²","ğ‘†­"],symbols:["ğ‘‡","ğ‘‡‘","ğ‘‡’","ğ‘‡“","ğ‘‡”","ğ‘‡•","ğ‘‡–","ğ‘‡—","ğ‘‡˜","ğ‘‡™","ğ‘‡„","ğ‘‡","ğ‘‡…","ğ‘‡†"]},devanagari:{vowels:"à¤… à¤† à¤‡ à¤ˆ à¤‰ à¤Š à¤‹ à¥  à¤Œ à¥¡ à¤ à¤ à¤ à¤’ à¤“ à¤” à¤ à¤ à¤“".split(" "),vowel_marks:"à¤¾ à¤¿ à¥€ à¥ à¥‚ à¥ƒ à¥„ à¥¢ à¥£ à¥† à¥‡ à¥ˆ à¥Š à¥‹ à¥Œ à¥ à¥à¥‡ à¥à¤¾ à¥à¥‹ à¥† à¥".split(" "),other_marks:"à¤‚ à¤ƒ à¤ á³µ á³¶ ê£½".split(" "),virama:["à¥"],consonants:"à¤• à¤– à¤— à¤˜ à¤™ à¤š à¤› à¤œ à¤ à¤ à¤Ÿ à¤  à¤¡ à¤¢ à¤£ à¤¤ à¤¥ à¤¦ à¤§ à¤¨ à¤ª à¤« à¤¬ à¤­ à¤® à¤¯ à¤° à¤² à¤µ à¤¶ à¤· à¤¸ à¤¹ à¤³".split(" "),symbols:"à¥¦ à¥§ à¥¨ à¥© à¥ª à¥« à¥¬ à¥­ à¥® à¥¯ à¥ à¤½ à¥¤ à¥¥".split(" "),zwj:["â€"],skip:[""],accent:["à¥‘","à¥’"],combo_accent:"à¤ƒà¥‘ à¤ƒà¥’ à¤‚à¥‘ à¤‚à¥’".split(" "),candra:["à¥…"],other:"à¤•à¤¼ à¤–à¤¼ à¤—à¤¼ à¤œà¤¼ à¤¡à¤¼ à¤¢à¤¼ à¤«à¤¼ à¤¯à¤¼ à¤±".split(" ")},gujarati:{vowels:"àª… àª† àª‡ àªˆ àª‰ àªŠ àª‹ à«  àªŒ à«¡  àª àª  àª“ àª”".split(" "),vowel_marks:"àª¾ àª¿ à«€ à« à«‚ à«ƒ à«„ à«¢ à«£  à«‡ à«ˆ  à«‹ à«Œ".split(" "),other_marks:"àª‚ àªƒ àª".split(" "),virama:["à«"],consonants:"àª• àª– àª— àª˜ àª™ àªš àª› àªœ àª àª àªŸ àª  àª¡ àª¢ àª£ àª¤ àª¥ àª¦ àª§ àª¨ àªª àª« àª¬ àª­ àª® àª¯ àª° àª² àªµ àª¶ àª· àª¸ àª¹ àª³".split(" "),symbols:"à«¦ à«§ à«¨ à«© à«ª à«« à«¬ à«­ à«® à«¯ à« àª½ à«¤ à«¥".split(" "),candra:["à«…"]},gurmukhi:{vowels:"à¨… à¨† à¨‡ à¨ˆ à¨‰ à¨Š      à¨ à¨  à¨“ à¨”".split(" "),vowel_marks:"à¨¾ à¨¿ à©€ à© à©‚      à©‡ à©ˆ  à©‹ à©Œ".split(" "),other_marks:"à¨‚ à¨ƒ à¨".split(" "),virama:["à©"],consonants:"à¨• à¨– à¨— à¨˜ à¨™ à¨š à¨› à¨œ à¨ à¨ à¨Ÿ à¨  à¨¡ à¨¢ à¨£ à¨¤ à¨¥ à¨¦ à¨§ à¨¨ à¨ª à¨« à¨¬ à¨­ à¨® à¨¯ à¨° à¨² à¨µ à¨¶ à¨¶ à¨¸ à¨¹ à¨³".split(" "),symbols:"à©¦ à©§ à©¨ à©© à©ª à©« à©¬ à©­ à©® à©¯ à¥ à¤½ à¥¤ à¥¥".split(" "),other:" à¨– à¨— à¨œ à¨¡  à¨«  ".split(" ")},kannada:{vowels:"à²… à²† à²‡ à²ˆ à²‰ à²Š à²‹ à³  à²Œ à³¡ à² à² à² à²’ à²“ à²”".split(" "),vowel_marks:"à²¾ à²¿ à³€ à³ à³‚ à³ƒ à³„ à³¢ à³£ à³† à³‡ à³ˆ à³Š à³‹ à³Œ".split(" "),other_marks:"à²‚ à²ƒ à¤".split(" "),virama:["à³"],consonants:"à²• à²– à²— à²˜ à²™ à²š à²› à²œ à² à² à²Ÿ à²  à²¡ à²¢ à²£ à²¤ à²¥ à²¦ à²§ à²¨ à²ª à²« à²¬ à²­ à²® à²¯ à²° à²² à²µ à²¶ à²· à²¸ à²¹ à²³".split(" "),symbols:"à³¦ à³§ à³¨ à³© à³ª à³« à³¬ à³­ à³® à³¯ à²“à²‚ à²½ à¥¤ à¥¥".split(" "),other:"      à²«  à²±".split(" ")},malayalam:{vowels:"à´… à´† à´‡ à´ˆ à´‰ à´Š à´‹ àµ  à´Œ àµ¡ à´ à´ à´ à´’ à´“ à´”".split(" "),vowel_marks:"à´¾ à´¿ àµ€ àµ àµ‚ àµƒ àµ„ àµ¢ àµ£ àµ† àµ‡ àµˆ àµŠ àµ‹ àµŒ".split(" "),other_marks:"à´‚ à´ƒ à¤".split(" "),virama:["àµ"],consonants:"à´• à´– à´— à´˜ à´™ à´š à´› à´œ à´ à´ à´Ÿ à´  à´¡ à´¢ à´£ à´¤ à´¥ à´¦ à´§ à´¨ à´ª à´« à´¬ à´­ à´® à´¯ à´° à´² à´µ à´¶ à´· à´¸ à´¹ à´³".split(" "),symbols:"àµ¦ àµ§ àµ¨ àµ© àµª àµ« àµ¬ àµ­ àµ® àµ¯ à´“à´‚ à´½ à¥¤ à¥¥".split(" "),other:"        à´±".split(" ")},oriya:{vowels:"à¬… à¬† à¬‡ à¬ˆ à¬‰ à¬Š à¬‹ à­  à¬Œ à­¡  à¬ à¬  à¬“ à¬”".split(" "),vowel_marks:"à¬¾ à¬¿ à­€ à­ à­‚ à­ƒ à­„ à­¢ à­£  à­‡ à­ˆ  à­‹ à­Œ".split(" "),other_marks:"à¬‚ à¬ƒ à¬".split(" "),virama:["à­"],consonants:"à¬• à¬– à¬— à¬˜ à¬™ à¬š à¬› à¬œ à¬ à¬ à¬Ÿ à¬  à¬¡ à¬¢ à¬£ à¬¤ à¬¥ à¬¦ à¬§ à¬¨ à¬ª à¬« à¬¬ à¬­ à¬® à¬¯ à¬° à¬² à¬µ à¬¶ à¬· à¬¸ à¬¹ à¬³".split(" "),symbols:"à­¦ à­§ à­¨ à­© à­ª à­« à­¬ à­­ à­® à­¯ à¬“à¬‚ à¬½ à¥¤ à¥¥".split(" "),other:"    à¬¡ à¬¢  à¬¯ ".split(" ")},tamil:{vowels:"à®… à®† à®‡ à®ˆ à®‰ à®Š     à® à® à® à®’ à®“ à®”".split(" "),vowel_marks:"à®¾ à®¿ à¯€ à¯ à¯‚     à¯† à¯‡ à¯ˆ à¯Š à¯‹ à¯Œ".split(" "),other_marks:"à®‚ à®ƒ ".split(" "),virama:["à¯"],consonants:"à®• à®• à®• à®• à®™ à®š à®š à®œ à®š à® à®Ÿ à®Ÿ à®Ÿ à®Ÿ à®£ à®¤ à®¤ à®¤ à®¤ à®¨ à®ª à®ª à®ª à®ª à®® à®¯ à®° à®² à®µ à®¶ à®· à®¸ à®¹ à®³".split(" "),symbols:"à¯¦ à¯§ à¯¨ à¯© à¯ª à¯« à¯¬ à¯­ à¯® à¯¯ à¯ à¤½ à¥¤ à¥¥".split(" "),other:"        à®±".split(" ")},telugu:{vowels:"à°… à°† à°‡ à°ˆ à°‰ à°Š à°‹ à±  à°Œ à±¡ à° à° à° à°’ à°“ à°”".split(" "),vowel_marks:"à°¾ à°¿ à±€ à± à±‚ à±ƒ à±„ à±¢ à±£ à±† à±‡ à±ˆ à±Š à±‹ à±Œ".split(" "),other_marks:"à°‚ à°ƒ à° á³² á³²".split(" "),virama:["à±"],consonants:"à°• à°– à°— à°˜ à°™ à°š à°› à°œ à° à° à°Ÿ à°  à°¡ à°¢ à°£ à°¤ à°¥ à°¦ à°§ à°¨ à°ª à°« à°¬ à°­ à°® à°¯ à°° à°² à°µ à°¶ à°· à°¸ à°¹ à°³".split(" "),symbols:"à±¦ à±§ à±¨ à±© à±ª à±« à±¬ à±­ à±® à±¯ à°“à°‚ à°½ à¥¤ à¥¥".split(" "),other:"        à°±".split(" ")},iast:{vowels:"a Ä i Ä« u Å« á¹› á¹ á¸· á¸¹ áº½ e ai Ãµ o au Ãª aÃ® Ã´ aÃ»".split(" "),other_marks:["á¹ƒ","á¸¥","mÌ","áº–","á¸«","oá¸¿"],virama:[""],consonants:"k kh g gh á¹… c ch j jh Ã± á¹­ á¹­h á¸ á¸h á¹‡ t th d dh n p ph b bh m y r l v Å› á¹£ s h á¸»".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oá¹ ' | ||".split(" ")},iso:{vowels:"a Ä i Ä« u Å« rÌ¥ rÌ¥Ì„ lÌ¥ lÌ¥Ì„ áº½ e ai Ãµ o au Ãª aÃ® Ã´ aÃ»".split(" "),other_marks:["á¹","á¸¥","mÌ","oá¸¿"],virama:[""],consonants:"k kh g gh á¹… c ch j jh Ã± á¹­ á¹­h á¸ á¸h á¹‡ t th d dh n p ph b bh m y r l v Å› á¹£ s h á¸· ká¹£ jÃ±".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 omÌ ' | ||".split(" ")},itrans:{vowels:"a A i I u U RRi RRI LLi LLI  e ai  o au".split(" "),other_marks:["M","H",".N"],virama:[""],consonants:"k kh g gh ~N ch Ch j jh ~n T Th D Dh N t th d dh n p ph b bh m y r l v sh Sh s h L kSh j~n".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM .a | ||".split(" "),candra:[".c"],zwj:["{}"],skip:"_",accent:["\\'","\\_"],combo_accent:"\\'H \\_H \\'M \\_M".split(" "),other:"q K G z .D .Dh f Y R".split(" ")},hk:{vowels:"a A i I u U R RR lR lRR  e ai  o au".split(" "),other_marks:"M H ~".split(" "),virama:[""],consonants:"k kh g gh G c ch j jh J T Th D Dh N t th d dh n p ph b bh m y r l v z S s h L kS jJ".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM ' | ||".split(" ")},slp1:{vowels:"a A i I u U f F x X áº½ e E Ãµ o O Ãª ÃŠ Ã´ Ã”".split(" "),other_marks:"M H mÌ áº– á¸« oá¸¿".split(" "),virama:[""],consonants:"k K g G N c C j J Y w W q Q R t T d D n p P b B m y r l v S z s h L".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oá¹ ' | ||".split(" ")},velthuis:{vowels:"a aa i ii u uu .r .rr .li .ll  e ai  o au".split(" "),other_marks:".m .h ".split(" "),virama:[""],consonants:'k kh g gh "n c ch j jh ~n .t .th .d .d .n t th d dh n p ph b bh m y r l v ~s .s s h L k.s j~n'.split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 o.m ' | ||".split(" ")},wx:{vowels:"a A i I u U q Q L   e E  o O".split(" "),other_marks:"M H z".split(" "),virama:[""],consonants:"k K g G f c C j J F t T d D N w W x X n p P b B m y r l v S R s h  kR jF".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oM ' | ||".split(" ")}},x1={},Jt={iast:{á¹›:["rÌ¥"],á¹ƒ:["á¹"]},itrans:{A:["aa"],I:["ii","ee"],U:["uu","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],"j~n":["GY","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":"\\_.m \\_.n \\`M \\`.m \\`.n".split(" "),".a":["~"],"|":["."],"||":[".."],z:["J"]}},Rt={};De.isRomanScheme=function(x){return x1.hasOwnProperty(x)};De.addBrahmicScheme=function(x,f){De.schemes[x]=f};De.addRomanScheme=function(x,f){"vowel_marks"in f||(f.vowel_marks=f.vowels.slice(1)),De.schemes[x]=f,x1[x]=!0};var b1=function(x){var f={};for(var M in x)!x.hasOwnProperty(M)||(f[M]=x[M].slice(0));return f};(function(){var x=Ft.kolkata=b1(Ft.iast),f="iast itrans hk kolkata slp1 velthuis wx".split(" ");x.vowels="a Ä i Ä« u Å« á¹› á¹ á¸· á¸¹ e Ä“ ai o Å au".split(" ");for(var M=0,w;w=f[M];M++)De.addRomanScheme(w,Ft[w]);var R=b1(Ft.itrans);R.vowels="a A i I u U Ri RRI LLi LLi e E ai o O au".split(" "),R.vowel_marks=R.vowels.slice(1),Jt.itrans_dravidian=Jt.itrans,De.addRomanScheme("itrans_dravidian",R)})();var U1=function(x,f){var M=Jt[x]||{},w={},R=De.schemes[x],p={},N=[],u={},d=De.schemes[f];for(var b in R)if(!!R.hasOwnProperty(b)){var P=R[b],O=d[b];if(O!==void 0)for(var H=0;H<P.length;H++){var I=P[H],L=O[H],F=M[I]||[],j=F.length,re=0;for(N.push(I.length),re=0;re<j;re++)N.push(F[re].length);if(b==="vowel_marks"||b==="virama")for(u[I]=L,re=0;re<j;re++)u[F[re]]=L;else{for(p[I]=L,re=0;re<j;re++)p[F[re]]=L;if(b==="consonants"||b==="other")for(w[I]=L,re=0;re<j;re++)w[F[re]]=L}}}return{consonants:w,fromRoman:De.isRomanScheme(x),letters:p,marks:u,maxTokenLength:Math.max.apply(Math,N),toRoman:De.isRomanScheme(f),virama:d.virama}},j1=function(x,f,M){for(var w=[],R=f.consonants,p=x.length,N=!1,u=f.letters,d=f.marks,b=f.maxTokenLength,P=M.skip_sgml,O=M.syncope,H,I,L="",F=f.toRoman,j=f.virama,re=!1,$=!1,U=!1,oe=0,he;(he=x.charAt(oe))||L;oe++){var ge=b-L.length;if(!(ge>0&&oe<p&&(L+=he,ge>1)))for(var G=0;G<b;G++){var fe=L.substr(0,b-G);if(re===!0)re=fe!==">";else if(fe==="<")re=P;else if(fe==="##"){U=!U,L=L.substr(2);break}if($=re||U,(H=u[fe])!==void 0&&!$){F?w.push(H):(N?(I=d[fe])?w.push(I):fe!=="a"&&(w.push(j),w.push(H)):w.push(H),N=fe in R),L=L.substr(b-G);break}else G===b-1&&(N&&(N=!1,O||w.push(j)),w.push(fe),L=L.substr(1))}}return N&&!O&&w.push(j),w.join("")},G1=function(x,f){for(var M=[],w=f.consonants,R=!1,p=!1,N=f.letters,u=f.marks,d,b=f.toRoman,P=!1,O=0,H;H=x.charAt(O);O++){if(H==="#"){R?(P=!P,R=!1):R=!0,p&&(M.push("a"),p=!1);continue}else if(P){M.push(H);continue}(d=u[H])!==void 0?(M.push(d),p=!1):(R&&(M.push("#"),R=!1),p&&(M.push("a"),p=!1),(d=N[H])?(M.push(d),p=b&&H in w):M.push(H))}return p&&M.push("a"),M.join("")};De.t=function(x,f,M,w){w=w||{};var R=Rt.options||{},p=De.defaults,N=Rt.from===f&&Rt.to===M,u;for(var d in p)if(p.hasOwnProperty(d)){var b=p[d];d in w&&(b=w[d]),w[d]=b,b!==R[d]&&(N=!1)}return N?u=Rt.map:(u=U1(f,M,w),Rt={from:f,map:u,options:w,to:M}),f==="itrans"&&(x=x.replace(/\{\\m\+\}/g,".h.N"),x=x.replace(/\.h/g,""),x=x.replace(/\\([^'`_]|$)/g,"##$1##")),u.fromRoman?j1(x,u,w):G1(x,u,w)};var Qt={};(function(x){"use strict";x.__type__="csv";var f=typeof jQuery!="undefined"&&jQuery.Deferred||typeof _!="undefined"&&_.Deferred||function(){var u,d,b=new Promise(function(P,O){u=P,d=O});return{resolve:u,reject:d,promise:function(){return b}}};x.fetch=function(u){var d=new f;if(u.file){var b=new FileReader,P=u.encoding||"UTF-8";b.onload=function(I){var L=x.extractFields(x.parse(I.target.result,u),u);L.useMemoryStore=!0,L.metadata={filename:u.file.name},d.resolve(L)},b.onerror=function(I){d.reject({error:{message:"Failed to load file. Code: "+I.target.error.code}})},b.readAsText(u.file,P)}else if(u.data){var O=x.extractFields(x.parse(u.data,u),u);O.useMemoryStore=!0,d.resolve(O)}else if(u.url){var H=window.fetch||function(I){var L=jQuery.get(I),F={then:function(j){return L.done(j),F},catch:function(j){return L.fail(j),F}};return F};H(u.url).then(function(I){return I.text?I.text():I}).then(function(I){var L=x.extractFields(x.parse(I,u),u);L.useMemoryStore=!0,d.resolve(L)}).catch(function(I,L){d.reject({error:{message:"Failed to load file. "+I.statusText+". Code: "+I.status,request:I}})})}return d.promise()},x.extractFields=function(u,d){return d.noHeaderRow!==!0&&u.length>0?{fields:u[0],records:u.slice(1)}:{records:u}},x.normalizeDialectOptions=function(u){var d={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var b in u)b==="trim"?d.skipinitialspace=u.trim:d[b.toLowerCase()]=u[b];return d},x.parse=function(u,d){(!d||d&&!d.lineterminator)&&(u=x.normalizeLineTerminator(u,d));var b=x.normalizeDialectOptions(d);u=N(u,b.lineterminator);var P="",O=!1,H=!1,I="",L=[],F=[],j,re;for(re=function($){return H!==!0&&($===""?$=null:b.skipinitialspace===!0&&($=p($)),M.test($)?$=parseInt($,10):w.test($)&&($=parseFloat($,10))),$},j=0;j<u.length;j+=1)P=u.charAt(j),O===!1&&(P===b.delimiter||P===b.lineterminator)?(I=re(I),L.push(I),P===b.lineterminator&&(F.push(L),L=[]),I="",H=!1):P!==b.quotechar?I+=P:O?u.charAt(j+1)===b.quotechar?(I+=b.quotechar,j+=1):O=!1:(O=!0,H=!0);return I=re(I),L.push(I),F.push(L),b.skipinitialrows&&(F=F.slice(b.skipinitialrows)),F},x.normalizeLineTerminator=function(u,d){return d=d||{},d.lineterminator?u:u.replace(/(\r\n|\n|\r)/gm,`
`)},x.objectToArray=function(u){for(var d=[],b=[],P=[],O=0;O<u.fields.length;O++){var H=u.fields[O].id;P.push(H);var I=u.fields[O].label?u.fields[O].label:H;b.push(I)}d.push(b);for(var O=0;O<u.records.length;O++){for(var L=[],F=u.records[O],j=0;j<P.length;j++)L.push(F[P[j]]);d.push(L)}return d},x.serialize=function(u,d){var b=null;u instanceof Array?b=u:b=x.objectToArray(u);var P=x.normalizeDialectOptions(d),O="",H="",I="",L="",F,j,re;for(re=function($){return $===null?$="":typeof $=="string"&&R.test($)?(P.doublequote&&($=$.replace(/"/g,'""')),$=P.quotechar+$+P.quotechar):typeof $=="number"&&($=$.toString(10)),$},F=0;F<b.length;F+=1)for(O=b[F],j=0;j<O.length;j+=1)H=re(O[j]),j===O.length-1?(I+=H,L+=I+P.lineterminator,I=""):I+=H+P.delimiter,H="";return L};var M=/^\d+$/,w=/^\d*\.\d+$|^\d+\.\d*$/,R=/^\s|\s$|,|"|\n/,p=function(){return String.prototype.trim?function(u){return u.trim()}:function(u){return u.replace(/^\s*/,"").replace(/\s*$/,"")}}();function N(u,d){return u.charAt(u.length-d.length)!==d?u:u.substring(0,u.length-d.length)}})(Qt);function W1(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function Y1(x,f,M){return M={path:f,exports:{},require:function(w,R){return X1(w,R==null?M.path:R)}},x(M,M.exports),M.exports}function X1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var J1=Y1(function(x,f){(function(M,w){x.exports=w()})(window,function(){return function(M){var w={};function R(p){if(w[p])return w[p].exports;var N=w[p]={i:p,l:!1,exports:{}};return M[p].call(N.exports,N,N.exports,R),N.l=!0,N.exports}return R.m=M,R.c=w,R.d=function(p,N,u){R.o(p,N)||Object.defineProperty(p,N,{enumerable:!0,get:u})},R.r=function(p){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},R.t=function(p,N){if(1&N&&(p=R(p)),8&N||4&N&&typeof p=="object"&&p&&p.__esModule)return p;var u=Object.create(null);if(R.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:p}),2&N&&typeof p!="string")for(var d in p)R.d(u,d,function(b){return p[b]}.bind(null,d));return u},R.n=function(p){var N=p&&p.__esModule?function(){return p.default}:function(){return p};return R.d(N,"a",N),N},R.o=function(p,N){return Object.prototype.hasOwnProperty.call(p,N)},R.p="",R(R.s=1)}([function(M,w,R){var p,N;p=[R(2)],(N=function(u){function d(e){if(d.is(e,"function"))return b?e():u.on("raphael.DOMload",e);if(d.is(e,s))return d._engine.create[$](d,e.splice(0,3+d.is(e[0],X))).add(e);var i=Array.prototype.slice.call(arguments,0);if(d.is(i[i.length-1],"function")){var o=i.pop();return b?o.call(d._engine.create[$](d,i)):u.on("raphael.DOMload",function(){o.call(d._engine.create[$](d,i))})}return d._engine.create[$](d,arguments)}d.version="2.3.0",d.eve=u;var b,P,O=/[, ]+/,H={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},I=/\{(\d+)\}/g,L="hasOwnProperty",F={doc:document,win:window},j={was:Object.prototype[L].call(F.win,"Raphael"),is:F.win.Raphael},re=function(){this.ca=this.customAttributes={}},$="apply",U="concat",oe="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,he="",ge=" ",G=String,fe="split",de="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[fe](ge),q={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},ye=G.prototype.toLowerCase,ve=Math,ke=ve.max,W=ve.min,Ce=ve.abs,Se=ve.pow,ee=ve.PI,X="number",s="array",l=Object.prototype.toString,n=(d._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),t={NaN:1,Infinity:1,"-Infinity":1},r=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,a=ve.round,h=parseFloat,g=parseInt,v=G.prototype.toUpperCase,B=d._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},k=d._availableAnimAttrs={blur:X,"clip-rect":"csv",cx:X,cy:X,fill:"colour","fill-opacity":X,"font-size":X,height:X,opacity:X,path:"path",r:X,rx:X,ry:X,stroke:"colour","stroke-opacity":X,"stroke-width":X,transform:"transform",width:X,x:X,y:X},D=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,V={hs:1,rg:1},Q=/,?([achlmqrstvxz]),?/gi,te=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ue=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,me=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,xe=(d._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),be=function(e,i){return h(e)-h(i)},Ae=function(e){return e},we=d._rectPath=function(e,i,o,c,m){return m?[["M",e+m,i],["l",o-2*m,0],["a",m,m,0,0,1,m,m],["l",0,c-2*m],["a",m,m,0,0,1,-m,m],["l",2*m-o,0],["a",m,m,0,0,1,-m,-m],["l",0,2*m-c],["a",m,m,0,0,1,m,-m],["z"]]:[["M",e,i],["l",o,0],["l",0,c],["l",-o,0],["z"]]},Ne=function(e,i,o,c){return c==null&&(c=o),[["M",e,i],["m",0,-c],["a",o,c,0,1,1,0,2*c],["a",o,c,0,1,1,0,-2*c],["z"]]},Be=d._getPath={path:function(e){return e.attr("path")},circle:function(e){var i=e.attrs;return Ne(i.cx,i.cy,i.r)},ellipse:function(e){var i=e.attrs;return Ne(i.cx,i.cy,i.rx,i.ry)},rect:function(e){var i=e.attrs;return we(i.x,i.y,i.width,i.height,i.r)},image:function(e){var i=e.attrs;return we(i.x,i.y,i.width,i.height)},text:function(e){var i=e._getBBox();return we(i.x,i.y,i.width,i.height)},set:function(e){var i=e._getBBox();return we(i.x,i.y,i.width,i.height)}},Te=d.mapPath=function(e,i){if(!i)return e;var o,c,m,C,A,S,E;for(m=0,A=(e=St(e)).length;m<A;m++)for(C=1,S=(E=e[m]).length;C<S;C+=2)o=i.x(E[C],E[C+1]),c=i.y(E[C],E[C+1]),E[C]=o,E[C+1]=c;return e};if(d._g=F,d.type=F.win.SVGAngle||F.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",d.type=="VML"){var Le,qe=F.doc.createElement("div");if(qe.innerHTML='<v:shape adj="1"/>',(Le=qe.firstChild).style.behavior="url(#default#VML)",!Le||typeof Le.adj!="object")return d.type=he;qe=null}function ze(e){if(typeof e=="function"||Object(e)!==e)return e;var i=new e.constructor;for(var o in e)e[L](o)&&(i[o]=ze(e[o]));return i}d.svg=!(d.vml=d.type=="VML"),d._Paper=re,d.fn=P=re.prototype=d.prototype,d._id=0,d.is=function(e,i){return(i=ye.call(i))=="finite"?!t[L](+e):i=="array"?e instanceof Array:i=="null"&&e===null||i==typeof e&&e!==null||i=="object"&&e===Object(e)||i=="array"&&Array.isArray&&Array.isArray(e)||l.call(e).slice(8,-1).toLowerCase()==i},d.angle=function(e,i,o,c,m,C){if(m==null){var A=e-o,S=i-c;return A||S?(180+180*ve.atan2(-S,-A)/ee+360)%360:0}return d.angle(e,i,m,C)-d.angle(o,c,m,C)},d.rad=function(e){return e%360*ee/180},d.deg=function(e){return Math.round(180*e/ee%360*1e3)/1e3},d.snapTo=function(e,i,o){if(o=d.is(o,"finite")?o:10,d.is(e,s)){for(var c=e.length;c--;)if(Ce(e[c]-i)<=o)return e[c]}else{var m=i%(e=+e);if(m<o)return i-m;if(m>e-o)return i-m+e}return i};var He,Xe;d.createUUID=(He=/[xy]/g,Xe=function(e){var i=16*ve.random()|0;return(e=="x"?i:3&i|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(He,Xe).toUpperCase()}),d.setWindow=function(e){u("raphael.setWindow",d,F.win,e),F.win=e,F.doc=F.win.document,d._engine.initWin&&d._engine.initWin(F.win)};var Qe=function(e){if(d.vml){var i,o=/^\s+|\s+$/g;try{var c=new ActiveXObject("htmlfile");c.write("<body>"),c.close(),i=c.body}catch(A){i=createPopup().document.body}var m=i.createTextRange();Qe=Fe(function(A){try{i.style.color=G(A).replace(o,he);var S=m.queryCommandValue("ForeColor");return"#"+("000000"+(S=(255&S)<<16|65280&S|(16711680&S)>>>16).toString(16)).slice(-6)}catch(E){return"none"}})}else{var C=F.doc.createElement("i");C.title="RaphaÃ«l Colour Picker",C.style.display="none",F.doc.body.appendChild(C),Qe=Fe(function(A){return C.style.color=A,F.doc.defaultView.getComputedStyle(C,he).getPropertyValue("color")})}return Qe(e)},at=function(){return"hsb("+[this.h,this.s,this.b]+")"},lt=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ct=function(){return this.hex},ct=function(e,i,o){if(i==null&&d.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(o=e.b,i=e.g,e=e.r),i==null&&d.is(e,"string")){var c=d.getRGB(e);e=c.r,i=c.g,o=c.b}return(e>1||i>1||o>1)&&(e/=255,i/=255,o/=255),[e,i,o]},Nt=function(e,i,o,c){var m={r:e*=255,g:i*=255,b:o*=255,hex:d.rgb(e,i,o),toString:Ct};return d.is(c,"finite")&&(m.opacity=c),m};function Fe(e,i,o){return function c(){var m=Array.prototype.slice.call(arguments,0),C=m.join("â€"),A=c.cache=c.cache||{},S=c.count=c.count||[];return A[L](C)?(function(E,z){for(var J=0,se=E.length;J<se;J++)if(E[J]===z)return E.push(E.splice(J,1)[0])}(S,C),o?o(A[C]):A[C]):(S.length>=1e3&&delete A[S.shift()],S.push(C),A[C]=e[$](i,m),o?o(A[C]):A[C])}}d.color=function(e){var i;return d.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(i=d.hsb2rgb(e),e.r=i.r,e.g=i.g,e.b=i.b,e.hex=i.hex):d.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(i=d.hsl2rgb(e),e.r=i.r,e.g=i.g,e.b=i.b,e.hex=i.hex):(d.is(e,"string")&&(e=d.getRGB(e)),d.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(i=d.rgb2hsl(e),e.h=i.h,e.s=i.s,e.l=i.l,i=d.rgb2hsb(e),e.v=i.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=Ct,e},d.hsb2rgb=function(e,i,o,c){var m,C,A,S,E;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(o=e.b,i=e.s,c=e.o,e=e.h),S=(E=o*i)*(1-Ce((e=(e*=360)%360/60)%2-1)),m=C=A=o-E,Nt(m+=[E,S,0,0,S,E][e=~~e],C+=[S,E,E,S,0,0][e],A+=[0,0,S,E,E,S][e],c)},d.hsl2rgb=function(e,i,o,c){var m,C,A,S,E;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(o=e.l,i=e.s,e=e.h),(e>1||i>1||o>1)&&(e/=360,i/=100,o/=100),S=(E=2*i*(o<.5?o:1-o))*(1-Ce((e=(e*=360)%360/60)%2-1)),m=C=A=o-E/2,Nt(m+=[E,S,0,0,S,E][e=~~e],C+=[S,E,E,S,0,0][e],A+=[0,0,S,E,E,S][e],c)},d.rgb2hsb=function(e,i,o){var c,m;return e=(o=ct(e,i,o))[0],i=o[1],o=o[2],{h:(((m=(c=ke(e,i,o))-W(e,i,o))==0?null:c==e?(i-o)/m:c==i?(o-e)/m+2:(e-i)/m+4)+360)%6*60/360,s:m==0?0:m/c,b:c,toString:at}},d.rgb2hsl=function(e,i,o){var c,m,C,A;return e=(o=ct(e,i,o))[0],i=o[1],o=o[2],c=((m=ke(e,i,o))+(C=W(e,i,o)))/2,{h:(((A=m-C)==0?null:m==e?(i-o)/A:m==i?(o-e)/A+2:(e-i)/A+4)+360)%6*60/360,s:A==0?0:c<.5?A/(2*c):A/(2-2*c),l:c,toString:lt}},d._path2string=function(){return this.join(",").replace(Q,"$1")},d._preload=function(e,i){var o=F.doc.createElement("img");o.style.cssText="position:absolute;left:-9999em;top:-9999em",o.onload=function(){i.call(this),this.onload=null,F.doc.body.removeChild(this)},o.onerror=function(){F.doc.body.removeChild(this)},F.doc.body.appendChild(o),o.src=e};function Ke(){return this.hex}function ut(e,i){for(var o=[],c=0,m=e.length;m-2*!i>c;c+=2){var C=[{x:+e[c-2],y:+e[c-1]},{x:+e[c],y:+e[c+1]},{x:+e[c+2],y:+e[c+3]},{x:+e[c+4],y:+e[c+5]}];i?c?m-4==c?C[3]={x:+e[0],y:+e[1]}:m-2==c&&(C[2]={x:+e[0],y:+e[1]},C[3]={x:+e[2],y:+e[3]}):C[0]={x:+e[m-2],y:+e[m-1]}:m-4==c?C[3]=C[2]:c||(C[0]={x:+e[c],y:+e[c+1]}),o.push(["C",(-C[0].x+6*C[1].x+C[2].x)/6,(-C[0].y+6*C[1].y+C[2].y)/6,(C[1].x+6*C[2].x-C[3].x)/6,(C[1].y+6*C[2].y-C[3].y)/6,C[2].x,C[2].y])}return o}d.getRGB=Fe(function(e){if(!e||(e=G(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ke};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Ke};!V[L](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=Qe(e));var i,o,c,m,C,A,S=e.match(n);return S?(S[2]&&(c=g(S[2].substring(5),16),o=g(S[2].substring(3,5),16),i=g(S[2].substring(1,3),16)),S[3]&&(c=g((C=S[3].charAt(3))+C,16),o=g((C=S[3].charAt(2))+C,16),i=g((C=S[3].charAt(1))+C,16)),S[4]&&(A=S[4][fe](D),i=h(A[0]),A[0].slice(-1)=="%"&&(i*=2.55),o=h(A[1]),A[1].slice(-1)=="%"&&(o*=2.55),c=h(A[2]),A[2].slice(-1)=="%"&&(c*=2.55),S[1].toLowerCase().slice(0,4)=="rgba"&&(m=h(A[3])),A[3]&&A[3].slice(-1)=="%"&&(m/=100)),S[5]?(A=S[5][fe](D),i=h(A[0]),A[0].slice(-1)=="%"&&(i*=2.55),o=h(A[1]),A[1].slice(-1)=="%"&&(o*=2.55),c=h(A[2]),A[2].slice(-1)=="%"&&(c*=2.55),(A[0].slice(-3)=="deg"||A[0].slice(-1)=="Â°")&&(i/=360),S[1].toLowerCase().slice(0,4)=="hsba"&&(m=h(A[3])),A[3]&&A[3].slice(-1)=="%"&&(m/=100),d.hsb2rgb(i,o,c,m)):S[6]?(A=S[6][fe](D),i=h(A[0]),A[0].slice(-1)=="%"&&(i*=2.55),o=h(A[1]),A[1].slice(-1)=="%"&&(o*=2.55),c=h(A[2]),A[2].slice(-1)=="%"&&(c*=2.55),(A[0].slice(-3)=="deg"||A[0].slice(-1)=="Â°")&&(i/=360),S[1].toLowerCase().slice(0,4)=="hsla"&&(m=h(A[3])),A[3]&&A[3].slice(-1)=="%"&&(m/=100),d.hsl2rgb(i,o,c,m)):((S={r:i,g:o,b:c,toString:Ke}).hex="#"+(16777216|c|o<<8|i<<16).toString(16).slice(1),d.is(m,"finite")&&(S.opacity=m),S)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ke}},d),d.hsb=Fe(function(e,i,o){return d.hsb2rgb(e,i,o).hex}),d.hsl=Fe(function(e,i,o){return d.hsl2rgb(e,i,o).hex}),d.rgb=Fe(function(e,i,o){function c(m){return m+.5|0}return"#"+(16777216|c(o)|c(i)<<8|c(e)<<16).toString(16).slice(1)}),d.getColor=function(e){var i=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},o=this.hsb2rgb(i.h,i.s,i.b);return i.h+=.075,i.h>1&&(i.h=0,i.s-=.2,i.s<=0&&(this.getColor.start={h:0,s:1,b:i.b})),o.hex},d.getColor.reset=function(){delete this.start},d.parsePathString=function(e){if(!e)return null;var i=je(e);if(i.arr)return Ve(i.arr);var o={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},c=[];return d.is(e,s)&&d.is(e[0],s)&&(c=Ve(e)),c.length||G(e).replace(te,function(m,C,A){var S=[],E=C.toLowerCase();if(A.replace(me,function(z,J){J&&S.push(+J)}),E=="m"&&S.length>2&&(c.push([C][U](S.splice(0,2))),E="l",C=C=="m"?"l":"L"),E=="r")c.push([C][U](S));else for(;S.length>=o[E]&&(c.push([C][U](S.splice(0,o[E]))),o[E]););}),c.toString=d._path2string,i.arr=Ve(c),c},d.parseTransformString=Fe(function(e){if(!e)return null;var i=[];return d.is(e,s)&&d.is(e[0],s)&&(i=Ve(e)),i.length||G(e).replace(ue,function(o,c,m){var C=[];ye.call(c),m.replace(me,function(A,S){S&&C.push(+S)}),i.push([c][U](C))}),i.toString=d._path2string,i},this,function(e){if(!e)return e;for(var i=[],o=0;o<e.length;o++){for(var c=[],m=0;m<e[o].length;m++)c.push(e[o][m]);i.push(c)}return i});var je=function(e){var i=je.ps=je.ps||{};return i[e]?i[e].sleep=100:i[e]={sleep:100},setTimeout(function(){for(var o in i)i[L](o)&&o!=e&&(i[o].sleep--,!i[o].sleep&&delete i[o])}),i[e]};function ht(e,i,o,c,m){return e*(e*(-3*i+9*o-9*c+3*m)+6*i-12*o+6*c)-3*i+3*o}function Ge(e,i,o,c,m,C,A,S,E){E==null&&(E=1);for(var z=(E=E>1?1:E<0?0:E)/2,J=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],se=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0,Y=0;Y<12;Y++){var ne=z*J[Y]+z,ae=ht(ne,e,o,m,A),ie=ht(ne,i,c,C,S),K=ae*ae+ie*ie;Z+=se[Y]*ve.sqrt(K)}return z*Z}function _t(e,i,o,c,m,C,A,S){if(!(ke(e,o)<W(m,A)||W(e,o)>ke(m,A)||ke(i,c)<W(C,S)||W(i,c)>ke(C,S))){var E=(e-o)*(C-S)-(i-c)*(m-A);if(E){var z=((e*c-i*o)*(m-A)-(e-o)*(m*S-C*A))/E,J=((e*c-i*o)*(C-S)-(i-c)*(m*S-C*A))/E,se=+z.toFixed(2),Z=+J.toFixed(2);if(!(se<+W(e,o).toFixed(2)||se>+ke(e,o).toFixed(2)||se<+W(m,A).toFixed(2)||se>+ke(m,A).toFixed(2)||Z<+W(i,c).toFixed(2)||Z>+ke(i,c).toFixed(2)||Z<+W(C,S).toFixed(2)||Z>+ke(C,S).toFixed(2)))return{x:z,y:J}}}}function dt(e,i,o){var c=d.bezierBBox(e),m=d.bezierBBox(i);if(!d.isBBoxIntersect(c,m))return o?0:[];for(var C=Ge.apply(0,e),A=Ge.apply(0,i),S=ke(~~(C/5),1),E=ke(~~(A/5),1),z=[],J=[],se={},Z=o?0:[],Y=0;Y<S+1;Y++){var ne=d.findDotsAtSegment.apply(d,e.concat(Y/S));z.push({x:ne.x,y:ne.y,t:Y/S})}for(Y=0;Y<E+1;Y++)ne=d.findDotsAtSegment.apply(d,i.concat(Y/E)),J.push({x:ne.x,y:ne.y,t:Y/E});for(Y=0;Y<S;Y++)for(var ae=0;ae<E;ae++){var ie=z[Y],K=z[Y+1],_e=J[ae],le=J[ae+1],pe=Ce(K.x-ie.x)<.001?"y":"x",ce=Ce(le.x-_e.x)<.001?"y":"x",Ee=_t(ie.x,ie.y,K.x,K.y,_e.x,_e.y,le.x,le.y);if(Ee){if(se[Ee.x.toFixed(4)]==Ee.y.toFixed(4))continue;se[Ee.x.toFixed(4)]=Ee.y.toFixed(4);var Pe=ie.t+Ce((Ee[pe]-ie[pe])/(K[pe]-ie[pe]))*(K.t-ie.t),Re=_e.t+Ce((Ee[ce]-_e[ce])/(le[ce]-_e[ce]))*(le.t-_e.t);Pe>=0&&Pe<=1.001&&Re>=0&&Re<=1.001&&(o?Z++:Z.push({x:Ee.x,y:Ee.y,t1:W(Pe,1),t2:W(Re,1)}))}}return Z}function kt(e,i,o){e=d._path2curve(e),i=d._path2curve(i);for(var c,m,C,A,S,E,z,J,se,Z,Y=o?0:[],ne=0,ae=e.length;ne<ae;ne++){var ie=e[ne];if(ie[0]=="M")c=S=ie[1],m=E=ie[2];else{ie[0]=="C"?(se=[c,m].concat(ie.slice(1)),c=se[6],m=se[7]):(se=[c,m,c,m,S,E,S,E],c=S,m=E);for(var K=0,_e=i.length;K<_e;K++){var le=i[K];if(le[0]=="M")C=z=le[1],A=J=le[2];else{le[0]=="C"?(Z=[C,A].concat(le.slice(1)),C=Z[6],A=Z[7]):(Z=[C,A,C,A,z,J,z,J],C=z,A=J);var pe=dt(se,Z,o);if(o)Y+=pe;else{for(var ce=0,Ee=pe.length;ce<Ee;ce++)pe[ce].segment1=ne,pe[ce].segment2=K,pe[ce].bez1=se,pe[ce].bez2=Z;Y=Y.concat(pe)}}}}}return Y}d.findDotsAtSegment=function(e,i,o,c,m,C,A,S,E){var z=1-E,J=Se(z,3),se=Se(z,2),Z=E*E,Y=Z*E,ne=J*e+3*se*E*o+3*z*E*E*m+Y*A,ae=J*i+3*se*E*c+3*z*E*E*C+Y*S,ie=e+2*E*(o-e)+Z*(m-2*o+e),K=i+2*E*(c-i)+Z*(C-2*c+i),_e=o+2*E*(m-o)+Z*(A-2*m+o),le=c+2*E*(C-c)+Z*(S-2*C+c),pe=z*e+E*o,ce=z*i+E*c,Ee=z*m+E*A,Pe=z*C+E*S,Re=90-180*ve.atan2(ie-_e,K-le)/ee;return(ie>_e||K<le)&&(Re+=180),{x:ne,y:ae,m:{x:ie,y:K},n:{x:_e,y:le},start:{x:pe,y:ce},end:{x:Ee,y:Pe},alpha:Re}},d.bezierBBox=function(e,i,o,c,m,C,A,S){d.is(e,"array")||(e=[e,i,o,c,m,C,A,S]);var E=Mt.apply(null,e);return{x:E.min.x,y:E.min.y,x2:E.max.x,y2:E.max.y,width:E.max.x-E.min.x,height:E.max.y-E.min.y}},d.isPointInsideBBox=function(e,i,o){return i>=e.x&&i<=e.x2&&o>=e.y&&o<=e.y2},d.isBBoxIntersect=function(e,i){var o=d.isPointInsideBBox;return o(i,e.x,e.y)||o(i,e.x2,e.y)||o(i,e.x,e.y2)||o(i,e.x2,e.y2)||o(e,i.x,i.y)||o(e,i.x2,i.y)||o(e,i.x,i.y2)||o(e,i.x2,i.y2)||(e.x<i.x2&&e.x>i.x||i.x<e.x2&&i.x>e.x)&&(e.y<i.y2&&e.y>i.y||i.y<e.y2&&i.y>e.y)},d.pathIntersection=function(e,i){return kt(e,i)},d.pathIntersectionNumber=function(e,i){return kt(e,i,1)},d.isPointInsidePath=function(e,i,o){var c=d.pathBBox(e);return d.isPointInsideBBox(c,i,o)&&kt(e,[["M",i,o],["H",c.x2+10]],1)%2==1},d._removedFactory=function(e){return function(){u("raphael.log",null,"RaphaÃ«l: you are calling to method â€œ"+e+"â€ of removed object",e)}};var Ze=d.pathBBox=function(e){var i=je(e);if(i.bbox)return ze(i.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var o,c=0,m=0,C=[],A=[],S=0,E=(e=St(e)).length;S<E;S++)if((o=e[S])[0]=="M")c=o[1],m=o[2],C.push(c),A.push(m);else{var z=Mt(c,m,o[1],o[2],o[3],o[4],o[5],o[6]);C=C[U](z.min.x,z.max.x),A=A[U](z.min.y,z.max.y),c=o[5],m=o[6]}var J=W[$](0,C),se=W[$](0,A),Z=ke[$](0,C),Y=ke[$](0,A),ne=Z-J,ae=Y-se,ie={x:J,y:se,x2:Z,y2:Y,width:ne,height:ae,cx:J+ne/2,cy:se+ae/2};return i.bbox=ze(ie),ie},Ve=function(e){var i=ze(e);return i.toString=d._path2string,i},Zt=d._pathToRelative=function(e){var i=je(e);if(i.rel)return Ve(i.rel);d.is(e,s)&&d.is(e&&e[0],s)||(e=d.parsePathString(e));var o=[],c=0,m=0,C=0,A=0,S=0;e[0][0]=="M"&&(C=c=e[0][1],A=m=e[0][2],S++,o.push(["M",c,m]));for(var E=S,z=e.length;E<z;E++){var J=o[E]=[],se=e[E];if(se[0]!=ye.call(se[0]))switch(J[0]=ye.call(se[0]),J[0]){case"a":J[1]=se[1],J[2]=se[2],J[3]=se[3],J[4]=se[4],J[5]=se[5],J[6]=+(se[6]-c).toFixed(3),J[7]=+(se[7]-m).toFixed(3);break;case"v":J[1]=+(se[1]-m).toFixed(3);break;case"m":C=se[1],A=se[2];default:for(var Z=1,Y=se.length;Z<Y;Z++)J[Z]=+(se[Z]-(Z%2?c:m)).toFixed(3)}else{J=o[E]=[],se[0]=="m"&&(C=se[1]+c,A=se[2]+m);for(var ne=0,ae=se.length;ne<ae;ne++)o[E][ne]=se[ne]}var ie=o[E].length;switch(o[E][0]){case"z":c=C,m=A;break;case"h":c+=+o[E][ie-1];break;case"v":m+=+o[E][ie-1];break;default:c+=+o[E][ie-2],m+=+o[E][ie-1]}}return o.toString=d._path2string,i.rel=Ve(o),o},ft=d._pathToAbsolute=function(e){var i=je(e);if(i.abs)return Ve(i.abs);if(d.is(e,s)&&d.is(e&&e[0],s)||(e=d.parsePathString(e)),!e||!e.length)return[["M",0,0]];var o=[],c=0,m=0,C=0,A=0,S=0;e[0][0]=="M"&&(C=c=+e[0][1],A=m=+e[0][2],S++,o[0]=["M",c,m]);for(var E,z,J=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z",se=S,Z=e.length;se<Z;se++){if(o.push(E=[]),(z=e[se])[0]!=v.call(z[0]))switch(E[0]=v.call(z[0]),E[0]){case"A":E[1]=z[1],E[2]=z[2],E[3]=z[3],E[4]=z[4],E[5]=z[5],E[6]=+(z[6]+c),E[7]=+(z[7]+m);break;case"V":E[1]=+z[1]+m;break;case"H":E[1]=+z[1]+c;break;case"R":for(var Y=[c,m][U](z.slice(1)),ne=2,ae=Y.length;ne<ae;ne++)Y[ne]=+Y[ne]+c,Y[++ne]=+Y[ne]+m;o.pop(),o=o[U](ut(Y,J));break;case"M":C=+z[1]+c,A=+z[2]+m;default:for(ne=1,ae=z.length;ne<ae;ne++)E[ne]=+z[ne]+(ne%2?c:m)}else if(z[0]=="R")Y=[c,m][U](z.slice(1)),o.pop(),o=o[U](ut(Y,J)),E=["R"][U](z.slice(-2));else for(var ie=0,K=z.length;ie<K;ie++)E[ie]=z[ie];switch(E[0]){case"Z":c=C,m=A;break;case"H":c=E[1];break;case"V":m=E[1];break;case"M":C=E[E.length-2],A=E[E.length-1];default:c=E[E.length-2],m=E[E.length-1]}}return o.toString=d._path2string,i.abs=Ve(o),o},pt=function(e,i,o,c){return[e,i,o,c,o,c]},et=function(e,i,o,c,m,C){return[1/3*e+2/3*o,1/3*i+2/3*c,1/3*m+2/3*o,1/3*C+2/3*c,m,C]},Tt=function(e,i,o,c,m,C,A,S,E,z){var J,se=120*ee/180,Z=ee/180*(+m||0),Y=[],ne=Fe(function(v1,y1,zt){return{x:v1*ve.cos(zt)-y1*ve.sin(zt),y:v1*ve.sin(zt)+y1*ve.cos(zt)}});if(z)Pe=z[0],Re=z[1],ce=z[2],Ee=z[3];else{e=(J=ne(e,i,-Z)).x,i=J.y,S=(J=ne(S,E,-Z)).x,E=J.y;var ae=(e-S)/2,ie=(i-E)/2,K=ae*ae/(o*o)+ie*ie/(c*c);K>1&&(o*=K=ve.sqrt(K),c*=K);var _e=o*o,le=c*c,pe=(C==A?-1:1)*ve.sqrt(Ce((_e*le-_e*ie*ie-le*ae*ae)/(_e*ie*ie+le*ae*ae))),ce=pe*o*ie/c+(e+S)/2,Ee=pe*-c*ae/o+(i+E)/2,Pe=ve.asin(((i-Ee)/c).toFixed(9)),Re=ve.asin(((E-Ee)/c).toFixed(9));(Pe=e<ce?ee-Pe:Pe)<0&&(Pe=2*ee+Pe),(Re=S<ce?ee-Re:Re)<0&&(Re=2*ee+Re),A&&Pe>Re&&(Pe-=2*ee),!A&&Re>Pe&&(Re-=2*ee)}var gt=Re-Pe;if(Ce(gt)>se){var Et=Re,$e=S,We=E;Re=Pe+se*(A&&Re>Pe?1:-1),S=ce+o*ve.cos(Re),E=Ee+c*ve.sin(Re),Y=Tt(S,E,o,c,m,0,A,$e,We,[Re,Et,ce,Ee])}gt=Re-Pe;var vt=ve.cos(Pe),yt=ve.sin(Pe),Dt=ve.cos(Re),Je=ve.sin(Re),ot=ve.tan(gt/4),qt=4/3*o*ot,d1=4/3*c*ot,f1=[e,i],xt=[e+qt*yt,i-d1*vt],p1=[S+qt*Je,E-d1*Dt],m1=[S,E];if(xt[0]=2*f1[0]-xt[0],xt[1]=2*f1[1]-xt[1],z)return[xt,p1,m1][U](Y);for(var g1=[],nt=0,$1=(Y=[xt,p1,m1][U](Y).join()[fe](",")).length;nt<$1;nt++)g1[nt]=nt%2?ne(Y[nt-1],Y[nt],Z).y:ne(Y[nt],Y[nt+1],Z).x;return g1},rt=function(e,i,o,c,m,C,A,S,E){var z=1-E;return{x:Se(z,3)*e+3*Se(z,2)*E*o+3*z*E*E*m+Se(E,3)*A,y:Se(z,3)*i+3*Se(z,2)*E*c+3*z*E*E*C+Se(E,3)*S}},Mt=Fe(function(e,i,o,c,m,C,A,S){var E,z=m-2*o+e-(A-2*m+o),J=2*(o-e)-2*(m-o),se=e-o,Z=(-J+ve.sqrt(J*J-4*z*se))/2/z,Y=(-J-ve.sqrt(J*J-4*z*se))/2/z,ne=[i,S],ae=[e,A];return Ce(Z)>"1e12"&&(Z=.5),Ce(Y)>"1e12"&&(Y=.5),Z>0&&Z<1&&(E=rt(e,i,o,c,m,C,A,S,Z),ae.push(E.x),ne.push(E.y)),Y>0&&Y<1&&(E=rt(e,i,o,c,m,C,A,S,Y),ae.push(E.x),ne.push(E.y)),z=C-2*c+i-(S-2*C+c),se=i-c,Z=(-(J=2*(c-i)-2*(C-c))+ve.sqrt(J*J-4*z*se))/2/z,Y=(-J-ve.sqrt(J*J-4*z*se))/2/z,Ce(Z)>"1e12"&&(Z=.5),Ce(Y)>"1e12"&&(Y=.5),Z>0&&Z<1&&(E=rt(e,i,o,c,m,C,A,S,Z),ae.push(E.x),ne.push(E.y)),Y>0&&Y<1&&(E=rt(e,i,o,c,m,C,A,S,Y),ae.push(E.x),ne.push(E.y)),{min:{x:W[$](0,ae),y:W[$](0,ne)},max:{x:ke[$](0,ae),y:ke[$](0,ne)}}}),St=d._path2curve=Fe(function(e,i){var o=!i&&je(e);if(!i&&o.curve)return Ve(o.curve);for(var c=ft(e),m=i&&ft(i),C={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},A={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},S=function(pe,ce,Ee){var Pe,Re;if(!pe)return["C",ce.x,ce.y,ce.x,ce.y,ce.x,ce.y];switch(!(pe[0]in{T:1,Q:1})&&(ce.qx=ce.qy=null),pe[0]){case"M":ce.X=pe[1],ce.Y=pe[2];break;case"A":pe=["C"][U](Tt[$](0,[ce.x,ce.y][U](pe.slice(1))));break;case"S":Ee=="C"||Ee=="S"?(Pe=2*ce.x-ce.bx,Re=2*ce.y-ce.by):(Pe=ce.x,Re=ce.y),pe=["C",Pe,Re][U](pe.slice(1));break;case"T":Ee=="Q"||Ee=="T"?(ce.qx=2*ce.x-ce.qx,ce.qy=2*ce.y-ce.qy):(ce.qx=ce.x,ce.qy=ce.y),pe=["C"][U](et(ce.x,ce.y,ce.qx,ce.qy,pe[1],pe[2]));break;case"Q":ce.qx=pe[1],ce.qy=pe[2],pe=["C"][U](et(ce.x,ce.y,pe[1],pe[2],pe[3],pe[4]));break;case"L":pe=["C"][U](pt(ce.x,ce.y,pe[1],pe[2]));break;case"H":pe=["C"][U](pt(ce.x,ce.y,pe[1],ce.y));break;case"V":pe=["C"][U](pt(ce.x,ce.y,ce.x,pe[1]));break;case"Z":pe=["C"][U](pt(ce.x,ce.y,ce.X,ce.Y))}return pe},E=function(pe,ce){if(pe[ce].length>7){pe[ce].shift();for(var Ee=pe[ce];Ee.length;)J[ce]="A",m&&(se[ce]="A"),pe.splice(ce++,0,["C"][U](Ee.splice(0,6)));pe.splice(ce,1),ae=ke(c.length,m&&m.length||0)}},z=function(pe,ce,Ee,Pe,Re){pe&&ce&&pe[Re][0]=="M"&&ce[Re][0]!="M"&&(ce.splice(Re,0,["M",Pe.x,Pe.y]),Ee.bx=0,Ee.by=0,Ee.x=pe[Re][1],Ee.y=pe[Re][2],ae=ke(c.length,m&&m.length||0))},J=[],se=[],Z="",Y="",ne=0,ae=ke(c.length,m&&m.length||0);ne<ae;ne++){c[ne]&&(Z=c[ne][0]),Z!="C"&&(J[ne]=Z,ne&&(Y=J[ne-1])),c[ne]=S(c[ne],C,Y),J[ne]!="A"&&Z=="C"&&(J[ne]="C"),E(c,ne),m&&(m[ne]&&(Z=m[ne][0]),Z!="C"&&(se[ne]=Z,ne&&(Y=se[ne-1])),m[ne]=S(m[ne],A,Y),se[ne]!="A"&&Z=="C"&&(se[ne]="C"),E(m,ne)),z(c,m,C,A,ne),z(m,c,A,C,ne);var ie=c[ne],K=m&&m[ne],_e=ie.length,le=m&&K.length;C.x=ie[_e-2],C.y=ie[_e-1],C.bx=h(ie[_e-4])||C.x,C.by=h(ie[_e-3])||C.y,A.bx=m&&(h(K[le-4])||A.x),A.by=m&&(h(K[le-3])||A.y),A.x=m&&K[le-2],A.y=m&&K[le-1]}return m||(o.curve=Ve(c)),m?[c,m]:c},null,Ve),It=(d._parseDots=Fe(function(e){for(var i=[],o=0,c=e.length;o<c;o++){var m={},C=e[o].match(/^([^:]*):?([\d\.]*)/);if(m.color=d.getRGB(C[1]),m.color.error)return null;m.opacity=m.color.opacity,m.color=m.color.hex,C[2]&&(m.offset=C[2]+"%"),i.push(m)}for(o=1,c=i.length-1;o<c;o++)if(!i[o].offset){for(var A=h(i[o-1].offset||0),S=0,E=o+1;E<c;E++)if(i[E].offset){S=i[E].offset;break}S||(S=100,E=c);for(var z=((S=h(S))-A)/(E-o+1);o<E;o++)A+=z,i[o].offset=A+"%"}return i}),d._tear=function(e,i){e==i.top&&(i.top=e.prev),e==i.bottom&&(i.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),I1=(d._tofront=function(e,i){i.top!==e&&(It(e,i),e.next=null,e.prev=i.top,i.top.next=e,i.top=e)},d._toback=function(e,i){i.bottom!==e&&(It(e,i),e.next=i.bottom,e.prev=null,i.bottom.prev=e,i.bottom=e)},d._insertafter=function(e,i,o){It(e,o),i==o.top&&(o.top=e),i.next&&(i.next.prev=e),e.next=i.next,e.prev=i,i.next=e},d._insertbefore=function(e,i,o){It(e,o),i==o.bottom&&(o.bottom=e),i.prev&&(i.prev.next=e),e.prev=i.prev,i.prev=e,e.next=i},d.toMatrix=function(e,i){var o=Ze(e),c={_:{transform:he},getBBox:function(){return o}};return e1(c,i),c.matrix}),e1=(d.transformPath=function(e,i){return Te(e,I1(e,i))},d._extractTransform=function(e,i){if(i==null)return e._.transform;i=G(i).replace(/\.{3}|\u2026/g,e._.transform||he);var o,c,m=d.parseTransformString(i),C=0,A=1,S=1,E=e._,z=new it;if(E.transform=m||[],m)for(var J=0,se=m.length;J<se;J++){var Z,Y,ne,ae,ie,K=m[J],_e=K.length,le=G(K[0]).toLowerCase(),pe=K[0]!=le,ce=pe?z.invert():0;le=="t"&&_e==3?pe?(Z=ce.x(0,0),Y=ce.y(0,0),ne=ce.x(K[1],K[2]),ae=ce.y(K[1],K[2]),z.translate(ne-Z,ae-Y)):z.translate(K[1],K[2]):le=="r"?_e==2?(ie=ie||e.getBBox(1),z.rotate(K[1],ie.x+ie.width/2,ie.y+ie.height/2),C+=K[1]):_e==4&&(pe?(ne=ce.x(K[2],K[3]),ae=ce.y(K[2],K[3]),z.rotate(K[1],ne,ae)):z.rotate(K[1],K[2],K[3]),C+=K[1]):le=="s"?_e==2||_e==3?(ie=ie||e.getBBox(1),z.scale(K[1],K[_e-1],ie.x+ie.width/2,ie.y+ie.height/2),A*=K[1],S*=K[_e-1]):_e==5&&(pe?(ne=ce.x(K[3],K[4]),ae=ce.y(K[3],K[4]),z.scale(K[1],K[2],ne,ae)):z.scale(K[1],K[2],K[3],K[4]),A*=K[1],S*=K[2]):le=="m"&&_e==7&&z.add(K[1],K[2],K[3],K[4],K[5],K[6]),E.dirtyT=1,e.matrix=z}e.matrix=z,E.sx=A,E.sy=S,E.deg=C,E.dx=o=z.e,E.dy=c=z.f,A==1&&S==1&&!C&&E.bbox?(E.bbox.x+=+o,E.bbox.y+=+c):E.dirtyT=1}),t1=function(e){var i=e[0];switch(i.toLowerCase()){case"t":return[i,0,0];case"m":return[i,1,0,0,1,0,0];case"r":return e.length==4?[i,0,e[2],e[3]]:[i,0];case"s":return e.length==5?[i,1,1,e[3],e[4]]:e.length==3?[i,1,1]:[i,1]}},D1=d._equaliseTransform=function(e,i){i=G(i).replace(/\.{3}|\u2026/g,e),e=d.parseTransformString(e)||[],i=d.parseTransformString(i)||[];for(var o,c,m,C,A=ke(e.length,i.length),S=[],E=[],z=0;z<A;z++){if(m=e[z]||t1(i[z]),C=i[z]||t1(m),m[0]!=C[0]||m[0].toLowerCase()=="r"&&(m[2]!=C[2]||m[3]!=C[3])||m[0].toLowerCase()=="s"&&(m[3]!=C[3]||m[4]!=C[4]))return;for(S[z]=[],E[z]=[],o=0,c=ke(m.length,C.length);o<c;o++)o in m&&(S[z][o]=m[o]),o in C&&(E[z][o]=C[o])}return{from:S,to:E}};function it(e,i,o,c,m,C){e!=null?(this.a=+e,this.b=+i,this.c=+o,this.d=+c,this.e=+m,this.f=+C):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}d._getContainer=function(e,i,o,c){var m;if((m=c!=null||d.is(e,"object")?e:F.doc.getElementById(e))!=null)return m.tagName?i==null?{container:m,width:m.style.pixelWidth||m.offsetWidth,height:m.style.pixelHeight||m.offsetHeight}:{container:m,width:i,height:o}:{container:1,x:e,y:i,width:o,height:c}},d.pathToRelative=Zt,d._engine={},d.path2curve=St,d.matrix=function(e,i,o,c,m,C){return new it(e,i,o,c,m,C)},function(e){function i(c){return c[0]*c[0]+c[1]*c[1]}function o(c){var m=ve.sqrt(i(c));c[0]&&(c[0]/=m),c[1]&&(c[1]/=m)}e.add=function(c,m,C,A,S,E){var z,J,se,Z,Y=[[],[],[]],ne=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],ae=[[c,C,S],[m,A,E],[0,0,1]];for(c&&c instanceof it&&(ae=[[c.a,c.c,c.e],[c.b,c.d,c.f],[0,0,1]]),z=0;z<3;z++)for(J=0;J<3;J++){for(Z=0,se=0;se<3;se++)Z+=ne[z][se]*ae[se][J];Y[z][J]=Z}this.a=Y[0][0],this.b=Y[1][0],this.c=Y[0][1],this.d=Y[1][1],this.e=Y[0][2],this.f=Y[1][2]},e.invert=function(){var c=this,m=c.a*c.d-c.b*c.c;return new it(c.d/m,-c.b/m,-c.c/m,c.a/m,(c.c*c.f-c.d*c.e)/m,(c.b*c.e-c.a*c.f)/m)},e.clone=function(){return new it(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(c,m){this.add(1,0,0,1,c,m)},e.scale=function(c,m,C,A){m==null&&(m=c),(C||A)&&this.add(1,0,0,1,C,A),this.add(c,0,0,m,0,0),(C||A)&&this.add(1,0,0,1,-C,-A)},e.rotate=function(c,m,C){c=d.rad(c),m=m||0,C=C||0;var A=+ve.cos(c).toFixed(9),S=+ve.sin(c).toFixed(9);this.add(A,S,-S,A,m,C),this.add(1,0,0,1,-m,-C)},e.x=function(c,m){return c*this.a+m*this.c+this.e},e.y=function(c,m){return c*this.b+m*this.d+this.f},e.get=function(c){return+this[G.fromCharCode(97+c)].toFixed(4)},e.toString=function(){return d.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var c={};c.dx=this.e,c.dy=this.f;var m=[[this.a,this.c],[this.b,this.d]];c.scalex=ve.sqrt(i(m[0])),o(m[0]),c.shear=m[0][0]*m[1][0]+m[0][1]*m[1][1],m[1]=[m[1][0]-m[0][0]*c.shear,m[1][1]-m[0][1]*c.shear],c.scaley=ve.sqrt(i(m[1])),o(m[1]),c.shear/=c.scaley;var C=-m[0][1],A=m[1][1];return A<0?(c.rotate=d.deg(ve.acos(A)),C<0&&(c.rotate=360-c.rotate)):c.rotate=d.deg(ve.asin(C)),c.isSimple=!(+c.shear.toFixed(9)||c.scalex.toFixed(9)!=c.scaley.toFixed(9)&&c.rotate),c.isSuperSimple=!+c.shear.toFixed(9)&&c.scalex.toFixed(9)==c.scaley.toFixed(9)&&!c.rotate,c.noRotation=!+c.shear.toFixed(9)&&!c.rotate,c},e.toTransformString=function(c){var m=c||this[fe]();return m.isSimple?(m.scalex=+m.scalex.toFixed(4),m.scaley=+m.scaley.toFixed(4),m.rotate=+m.rotate.toFixed(4),(m.dx||m.dy?"t"+[m.dx,m.dy]:he)+(m.scalex!=1||m.scaley!=1?"s"+[m.scalex,m.scaley,0,0]:he)+(m.rotate?"r"+[m.rotate,0,0]:he)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(it.prototype);for(var q1=function(){this.returnValue=!1},z1=function(){return this.originalEvent.preventDefault()},F1=function(){this.cancelBubble=!0},O1=function(){return this.originalEvent.stopPropagation()},n1=function(e){var i=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,o=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft;return{x:e.clientX+o,y:e.clientY+i}},H1=F.doc.addEventListener?function(e,i,o,c){var m=function(A){var S=n1(A);return o.call(c,A,S.x,S.y)};if(e.addEventListener(i,m,!1),oe&&q[i]){var C=function(A){for(var S=n1(A),E=A,z=0,J=A.targetTouches&&A.targetTouches.length;z<J;z++)if(A.targetTouches[z].target==e){(A=A.targetTouches[z]).originalEvent=E,A.preventDefault=z1,A.stopPropagation=O1;break}return o.call(c,A,S.x,S.y)};e.addEventListener(q[i],C,!1)}return function(){return e.removeEventListener(i,m,!1),oe&&q[i]&&e.removeEventListener(q[i],C,!1),!0}}:F.doc.attachEvent?function(e,i,o,c){var m=function(C){C=C||F.win.event;var A=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,S=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft,E=C.clientX+S,z=C.clientY+A;return C.preventDefault=C.preventDefault||q1,C.stopPropagation=C.stopPropagation||F1,o.call(c,C,E,z)};return e.attachEvent("on"+i,m),function(){return e.detachEvent("on"+i,m),!0}}:void 0,tt=[],Vt=function(e){for(var i,o=e.clientX,c=e.clientY,m=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,C=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft,A=tt.length;A--;){if(i=tt[A],oe&&e.touches){for(var S,E=e.touches.length;E--;)if((S=e.touches[E]).identifier==i.el._drag.id){o=S.clientX,c=S.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var z,J=i.el.node,se=J.nextSibling,Z=J.parentNode,Y=J.style.display;F.win.opera&&Z.removeChild(J),J.style.display="none",z=i.el.paper.getElementByPoint(o,c),J.style.display=Y,F.win.opera&&(se?Z.insertBefore(J,se):Z.appendChild(J)),z&&u("raphael.drag.over."+i.el.id,i.el,z),o+=C,c+=m,u("raphael.drag.move."+i.el.id,i.move_scope||i.el,o-i.el._drag.x,c-i.el._drag.y,o,c,e)}},$t=function(e){d.unmousemove(Vt).unmouseup($t);for(var i,o=tt.length;o--;)(i=tt[o]).el._drag={},u("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,e);tt=[]},Ie=d.el={},r1=de.length;r1--;)(function(e){d[e]=Ie[e]=function(i,o){return d.is(i,"function")&&(this.events=this.events||[],this.events.push({name:e,f:i,unbind:H1(this.shape||this.node||F.doc,e,i,o||this)})),this},d["un"+e]=Ie["un"+e]=function(i){for(var o=this.events||[],c=o.length;c--;)o[c].name!=e||!d.is(i,"undefined")&&o[c].f!=i||(o[c].unbind(),o.splice(c,1),!o.length&&delete this.events);return this}})(de[r1]);Ie.data=function(e,i){var o=xe[this.id]=xe[this.id]||{};if(arguments.length==0)return o;if(arguments.length==1){if(d.is(e,"object")){for(var c in e)e[L](c)&&this.data(c,e[c]);return this}return u("raphael.data.get."+this.id,this,o[e],e),o[e]}return o[e]=i,u("raphael.data.set."+this.id,this,i,e),this},Ie.removeData=function(e){return e==null?delete xe[this.id]:xe[this.id]&&delete xe[this.id][e],this},Ie.getData=function(){return ze(xe[this.id]||{})},Ie.hover=function(e,i,o,c){return this.mouseover(e,o).mouseout(i,c||o)},Ie.unhover=function(e,i){return this.unmouseover(e).unmouseout(i)};var mt=[];Ie.drag=function(e,i,o,c,m,C){function A(S){(S.originalEvent||S).preventDefault();var E=S.clientX,z=S.clientY,J=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,se=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft;if(this._drag.id=S.identifier,oe&&S.touches){for(var Z,Y=S.touches.length;Y--;)if(Z=S.touches[Y],this._drag.id=Z.identifier,Z.identifier==this._drag.id){E=Z.clientX,z=Z.clientY;break}}this._drag.x=E+se,this._drag.y=z+J,!tt.length&&d.mousemove(Vt).mouseup($t),tt.push({el:this,move_scope:c,start_scope:m,end_scope:C}),i&&u.on("raphael.drag.start."+this.id,i),e&&u.on("raphael.drag.move."+this.id,e),o&&u.on("raphael.drag.end."+this.id,o),u("raphael.drag.start."+this.id,m||c||this,this._drag.x,this._drag.y,S)}return this._drag={},mt.push({el:this,start:A}),this.mousedown(A),this},Ie.onDragOver=function(e){e?u.on("raphael.drag.over."+this.id,e):u.unbind("raphael.drag.over."+this.id)},Ie.undrag=function(){for(var e=mt.length;e--;)mt[e].el==this&&(this.unmousedown(mt[e].start),mt.splice(e,1),u.unbind("raphael.drag.*."+this.id));!mt.length&&d.unmousemove(Vt).unmouseup($t),tt=[]},P.circle=function(e,i,o){var c=d._engine.circle(this,e||0,i||0,o||0);return this.__set__&&this.__set__.push(c),c},P.rect=function(e,i,o,c,m){var C=d._engine.rect(this,e||0,i||0,o||0,c||0,m||0);return this.__set__&&this.__set__.push(C),C},P.ellipse=function(e,i,o,c){var m=d._engine.ellipse(this,e||0,i||0,o||0,c||0);return this.__set__&&this.__set__.push(m),m},P.path=function(e){e&&!d.is(e,"string")&&!d.is(e[0],s)&&(e+=he);var i=d._engine.path(d.format[$](d,arguments),this);return this.__set__&&this.__set__.push(i),i},P.image=function(e,i,o,c,m){var C=d._engine.image(this,e||"about:blank",i||0,o||0,c||0,m||0);return this.__set__&&this.__set__.push(C),C},P.text=function(e,i,o){var c=d._engine.text(this,e||0,i||0,G(o));return this.__set__&&this.__set__.push(c),c},P.set=function(e){!d.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var i=new Pt(e);return this.__set__&&this.__set__.push(i),i.paper=this,i.type="set",i},P.setStart=function(e){this.__set__=e||this.set()},P.setFinish=function(e){var i=this.__set__;return delete this.__set__,i},P.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},P.setSize=function(e,i){return d._engine.setSize.call(this,e,i)},P.setViewBox=function(e,i,o,c,m){return d._engine.setViewBox.call(this,e,i,o,c,m)},P.top=P.bottom=null,P.raphael=d;function i1(){return this.x+ge+this.y+ge+this.width+" Ã— "+this.height}P.getElementByPoint=function(e,i){var o,c,m,C,A,S,E,z=this.canvas,J=F.doc.elementFromPoint(e,i);if(F.win.opera&&J.tagName=="svg"){var se=(c=(o=z).getBoundingClientRect(),m=o.ownerDocument,C=m.body,A=m.documentElement,S=A.clientTop||C.clientTop||0,E=A.clientLeft||C.clientLeft||0,{y:c.top+(F.win.pageYOffset||A.scrollTop||C.scrollTop)-S,x:c.left+(F.win.pageXOffset||A.scrollLeft||C.scrollLeft)-E}),Z=z.createSVGRect();Z.x=e-se.x,Z.y=i-se.y,Z.width=Z.height=1;var Y=z.getIntersectionList(Z,null);Y.length&&(J=Y[Y.length-1])}if(!J)return null;for(;J.parentNode&&J!=z.parentNode&&!J.raphael;)J=J.parentNode;return J==this.canvas.parentNode&&(J=z),J=J&&J.raphael?this.getById(J.raphaelid):null},P.getElementsByBBox=function(e){var i=this.set();return this.forEach(function(o){d.isBBoxIntersect(o.getBBox(),e)&&i.push(o)}),i},P.getById=function(e){for(var i=this.bottom;i;){if(i.id==e)return i;i=i.next}return null},P.forEach=function(e,i){for(var o=this.bottom;o;){if(e.call(i,o)===!1)return this;o=o.next}return this},P.getElementsByPoint=function(e,i){var o=this.set();return this.forEach(function(c){c.isPointInside(e,i)&&o.push(c)}),o},Ie.isPointInside=function(e,i){var o=this.realPath=Be[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(o=d.transformPath(o,this.attr("transform"))),d.isPointInsidePath(o,e,i)},Ie.getBBox=function(e){if(this.removed)return{};var i=this._;return e?(!i.dirty&&i.bboxwt||(this.realPath=Be[this.type](this),i.bboxwt=Ze(this.realPath),i.bboxwt.toString=i1,i.dirty=0),i.bboxwt):((i.dirty||i.dirtyT||!i.bbox)&&(!i.dirty&&this.realPath||(i.bboxwt=0,this.realPath=Be[this.type](this)),i.bbox=Ze(Te(this.realPath,this.matrix)),i.bbox.toString=i1,i.dirty=i.dirtyT=0),i.bbox)},Ie.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Ie.glow=function(e){if(this.type=="text")return null;var i={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity==null?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},o=i.width/2,c=this.paper,m=c.set(),C=this.realPath||Be[this.type](this);C=this.matrix?Te(C,this.matrix):C;for(var A=1;A<o+1;A++)m.push(c.path(C).attr({stroke:i.color,fill:i.fill?i.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(i.width/o*A).toFixed(3),opacity:+(i.opacity/o).toFixed(3)}));return m.insertBefore(this).translate(i.offsetx,i.offsety)};var Ut=function(e,i,o,c,m,C,A,S,E){return E==null?Ge(e,i,o,c,m,C,A,S):d.findDotsAtSegment(e,i,o,c,m,C,A,S,function(z,J,se,Z,Y,ne,ae,ie,K){if(!(K<0||Ge(z,J,se,Z,Y,ne,ae,ie)<K)){var _e,le=.5,pe=1-le;for(_e=Ge(z,J,se,Z,Y,ne,ae,ie,pe);Ce(_e-K)>.01;)_e=Ge(z,J,se,Z,Y,ne,ae,ie,pe+=(_e<K?1:-1)*(le/=2));return pe}}(e,i,o,c,m,C,A,S,E))},jt=function(e,i){return function(o,c,m){for(var C,A,S,E,z,J="",se={},Z=0,Y=0,ne=(o=St(o)).length;Y<ne;Y++){if((S=o[Y])[0]=="M")C=+S[1],A=+S[2];else{if(Z+(E=Ut(C,A,S[1],S[2],S[3],S[4],S[5],S[6]))>c){if(i&&!se.start){if(J+=["C"+(z=Ut(C,A,S[1],S[2],S[3],S[4],S[5],S[6],c-Z)).start.x,z.start.y,z.m.x,z.m.y,z.x,z.y],m)return J;se.start=J,J=["M"+z.x,z.y+"C"+z.n.x,z.n.y,z.end.x,z.end.y,S[5],S[6]].join(),Z+=E,C=+S[5],A=+S[6];continue}if(!e&&!i)return{x:(z=Ut(C,A,S[1],S[2],S[3],S[4],S[5],S[6],c-Z)).x,y:z.y,alpha:z.alpha}}Z+=E,C=+S[5],A=+S[6]}J+=S.shift()+S}return se.end=J,(z=e?Z:i?se:d.findDotsAtSegment(C,A,S[0],S[1],S[2],S[3],S[4],S[5],1)).alpha&&(z={x:z.x,y:z.y,alpha:z.alpha}),z}},s1=jt(1),o1=jt(),Gt=jt(0,1);d.getTotalLength=s1,d.getPointAtLength=o1,d.getSubpath=function(e,i,o){if(this.getTotalLength(e)-o<1e-6)return Gt(e,i).end;var c=Gt(e,o,1);return i?Gt(c,i).end:c},Ie.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():s1(e)},Ie.getPointAtLength=function(e){var i=this.getPath();if(i)return o1(i,e)},Ie.getPath=function(){var e,i=d._getPath[this.type];if(this.type!="text"&&this.type!="set")return i&&(e=i(this)),e},Ie.getSubpath=function(e,i){var o=this.getPath();if(o)return d.getSubpath(o,e,i)};var Ue=d.easing_formulas={linear:function(e){return e},"<":function(e){return Se(e,1.7)},">":function(e){return Se(e,.48)},"<>":function(e){var i=.48-e/1.04,o=ve.sqrt(.1734+i*i),c=o-i,m=-o-i,C=Se(Ce(c),1/3)*(c<0?-1:1)+Se(Ce(m),1/3)*(m<0?-1:1)+.5;return 3*(1-C)*C*C+C*C*C},backIn:function(e){var i=1.70158;return e*e*((i+1)*e-i)},backOut:function(e){var i=1.70158;return(e-=1)*e*((i+1)*e+i)+1},elastic:function(e){return e==!!e?e:Se(2,-10*e)*ve.sin(2*ee*(e-.075)/.3)+1},bounce:function(e){var i=7.5625,o=2.75;return e<1/o?i*e*e:e<2/o?i*(e-=1.5/o)*e+.75:e<2.5/o?i*(e-=2.25/o)*e+.9375:i*(e-=2.625/o)*e+.984375}};Ue.easeIn=Ue["ease-in"]=Ue["<"],Ue.easeOut=Ue["ease-out"]=Ue[">"],Ue.easeInOut=Ue["ease-in-out"]=Ue["<>"],Ue["back-in"]=Ue.backIn,Ue["back-out"]=Ue.backOut;var Me=[],a1=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},Wt=function(){for(var e=+new Date,i=0;i<Me.length;i++){var o=Me[i];if(!o.el.removed&&!o.paused){var c,m,C=e-o.start,A=o.ms,S=o.easing,E=o.from,z=o.diff,J=o.to,se=(o.t,o.el),Z={},Y={};if(o.initstatus?(C=(o.initstatus*o.anim.top-o.prev)/(o.percent-o.prev)*A,o.status=o.initstatus,delete o.initstatus,o.stop&&Me.splice(i--,1)):o.status=(o.prev+(o.percent-o.prev)*(C/A))/o.anim.top,!(C<0))if(C<A){var ne=S(C/A);for(var ae in E)if(E[L](ae)){switch(k[ae]){case X:c=+E[ae]+ne*A*z[ae];break;case"colour":c="rgb("+[Xt(a(E[ae].r+ne*A*z[ae].r)),Xt(a(E[ae].g+ne*A*z[ae].g)),Xt(a(E[ae].b+ne*A*z[ae].b))].join(",")+")";break;case"path":c=[];for(var ie=0,K=E[ae].length;ie<K;ie++){c[ie]=[E[ae][ie][0]];for(var _e=1,le=E[ae][ie].length;_e<le;_e++)c[ie][_e]=+E[ae][ie][_e]+ne*A*z[ae][ie][_e];c[ie]=c[ie].join(ge)}c=c.join(ge);break;case"transform":if(z[ae].real)for(c=[],ie=0,K=E[ae].length;ie<K;ie++)for(c[ie]=[E[ae][ie][0]],_e=1,le=E[ae][ie].length;_e<le;_e++)c[ie][_e]=E[ae][ie][_e]+ne*A*z[ae][ie][_e];else{var pe=function(Ee){return+E[ae][Ee]+ne*A*z[ae][Ee]};c=[["m",pe(0),pe(1),pe(2),pe(3),pe(4),pe(5)]]}break;case"csv":if(ae=="clip-rect")for(c=[],ie=4;ie--;)c[ie]=+E[ae][ie]+ne*A*z[ae][ie];break;default:var ce=[][U](E[ae]);for(c=[],ie=se.paper.customAttributes[ae].length;ie--;)c[ie]=+ce[ie]+ne*A*z[ae][ie]}Z[ae]=c}se.attr(Z),function(Ee,Pe,Re){setTimeout(function(){u("raphael.anim.frame."+Ee,Pe,Re)})}(se.id,se,o.anim)}else{if(function(Ee,Pe,Re){setTimeout(function(){u("raphael.anim.frame."+Pe.id,Pe,Re),u("raphael.anim.finish."+Pe.id,Pe,Re),d.is(Ee,"function")&&Ee.call(Pe)})}(o.callback,se,o.anim),se.attr(J),Me.splice(i--,1),o.repeat>1&&!o.next){for(m in J)J[L](m)&&(Y[m]=o.totalOrigin[m]);o.el.attr(Y),At(o.anim,o.el,o.anim.percents[0],null,o.totalOrigin,o.repeat-1)}o.next&&!o.stop&&At(o.anim,o.el,o.next,null,o.totalOrigin,o.repeat)}}}Me.length&&a1(Wt)},Xt=function(e){return e>255?255:e<0?0:e};function V1(e,i,o,c,m,C){var A=3*i,S=3*(c-i)-A,E=1-A-S,z=3*o,J=3*(m-o)-z,se=1-z-J;function Z(Y){return((E*Y+S)*Y+A)*Y}return function(Y,ne){var ae=function(ie,K){var _e,le,pe,ce,Ee,Pe;for(pe=ie,Pe=0;Pe<8;Pe++){if(ce=Z(pe)-ie,Ce(ce)<K)return pe;if(Ce(Ee=(3*E*pe+2*S)*pe+A)<1e-6)break;pe-=ce/Ee}if(le=1,(pe=ie)<(_e=0))return _e;if(pe>le)return le;for(;_e<le;){if(ce=Z(pe),Ce(ce-ie)<K)return pe;ie>ce?_e=pe:le=pe,pe=(le-_e)/2+_e}return pe}(Y,ne);return((se*ae+J)*ae+z)*ae}(e,1/(200*C))}function Ye(e,i){var o=[],c={};if(this.ms=i,this.times=1,e){for(var m in e)e[L](m)&&(c[h(m)]=e[m],o.push(h(m)));o.sort(be)}this.anim=c,this.top=o[o.length-1],this.percents=o}function At(e,i,o,c,m,C){o=h(o);var A,S,E,z,J,se,Z=e.ms,Y={},ne={},ae={};if(c)for(K=0,_e=Me.length;K<_e;K++){var ie=Me[K];if(ie.el.id==i.id&&ie.anim==e){ie.percent!=o?(Me.splice(K,1),E=1):S=ie,i.attr(ie.totalOrigin);break}}else c=+ne;for(var K=0,_e=e.percents.length;K<_e;K++){if(e.percents[K]==o||e.percents[K]>c*e.top){o=e.percents[K],J=e.percents[K-1]||0,Z=Z/e.top*(o-J),z=e.percents[K+1],A=e.anim[o];break}c&&i.attr(e.anim[e.percents[K]])}if(A){if(S)S.initstatus=c,S.start=new Date-S.ms*c;else{for(var le in A)if(A[L](le)&&(k[L](le)||i.paper.customAttributes[L](le)))switch(Y[le]=i.attr(le),Y[le]==null&&(Y[le]=B[le]),ne[le]=A[le],k[le]){case X:ae[le]=(ne[le]-Y[le])/Z;break;case"colour":Y[le]=d.getRGB(Y[le]);var pe=d.getRGB(ne[le]);ae[le]={r:(pe.r-Y[le].r)/Z,g:(pe.g-Y[le].g)/Z,b:(pe.b-Y[le].b)/Z};break;case"path":var ce=St(Y[le],ne[le]),Ee=ce[1];for(Y[le]=ce[0],ae[le]=[],K=0,_e=Y[le].length;K<_e;K++){ae[le][K]=[0];for(var Pe=1,Re=Y[le][K].length;Pe<Re;Pe++)ae[le][K][Pe]=(Ee[K][Pe]-Y[le][K][Pe])/Z}break;case"transform":var gt=i._,Et=D1(gt[le],ne[le]);if(Et)for(Y[le]=Et.from,ne[le]=Et.to,ae[le]=[],ae[le].real=!0,K=0,_e=Y[le].length;K<_e;K++)for(ae[le][K]=[Y[le][K][0]],Pe=1,Re=Y[le][K].length;Pe<Re;Pe++)ae[le][K][Pe]=(ne[le][K][Pe]-Y[le][K][Pe])/Z;else{var $e=i.matrix||new it,We={_:{transform:gt.transform},getBBox:function(){return i.getBBox(1)}};Y[le]=[$e.a,$e.b,$e.c,$e.d,$e.e,$e.f],e1(We,ne[le]),ne[le]=We._.transform,ae[le]=[(We.matrix.a-$e.a)/Z,(We.matrix.b-$e.b)/Z,(We.matrix.c-$e.c)/Z,(We.matrix.d-$e.d)/Z,(We.matrix.e-$e.e)/Z,(We.matrix.f-$e.f)/Z]}break;case"csv":var vt=G(A[le])[fe](O),yt=G(Y[le])[fe](O);if(le=="clip-rect")for(Y[le]=yt,ae[le]=[],K=yt.length;K--;)ae[le][K]=(vt[K]-Y[le][K])/Z;ne[le]=vt;break;default:for(vt=[][U](A[le]),yt=[][U](Y[le]),ae[le]=[],K=i.paper.customAttributes[le].length;K--;)ae[le][K]=((vt[K]||0)-(yt[K]||0))/Z}var Dt=A.easing,Je=d.easing_formulas[Dt];if(!Je)if((Je=G(Dt).match(r))&&Je.length==5){var ot=Je;Je=function(qt){return V1(qt,+ot[1],+ot[2],+ot[3],+ot[4],Z)}}else Je=Ae;if(ie={anim:e,percent:o,timestamp:se=A.start||e.start||+new Date,start:se+(e.del||0),status:0,initstatus:c||0,stop:!1,ms:Z,easing:Je,from:Y,diff:ae,to:ne,el:i,callback:A.callback,prev:J,next:z,repeat:C||e.times,origin:i.attr(),totalOrigin:m},Me.push(ie),c&&!S&&!E&&(ie.stop=!0,ie.start=new Date-Z*c,Me.length==1))return Wt();E&&(ie.start=new Date-ie.ms*c),Me.length==1&&a1(Wt)}u("raphael.anim.start."+i.id,i,e)}}function l1(e){for(var i=0;i<Me.length;i++)Me[i].el.paper==e&&Me.splice(i--,1)}Ie.animateWith=function(e,i,o,c,m,C){if(this.removed)return C&&C.call(this),this;var A=o instanceof Ye?o:d.animation(o,c,m,C);At(A,this,A.percents[0],null,this.attr());for(var S=0,E=Me.length;S<E;S++)if(Me[S].anim==i&&Me[S].el==e){Me[E-1].start=Me[S].start;break}return this},Ie.onAnimation=function(e){return e?u.on("raphael.anim.frame."+this.id,e):u.unbind("raphael.anim.frame."+this.id),this},Ye.prototype.delay=function(e){var i=new Ye(this.anim,this.ms);return i.times=this.times,i.del=+e||0,i},Ye.prototype.repeat=function(e){var i=new Ye(this.anim,this.ms);return i.del=this.del,i.times=ve.floor(ke(e,0))||1,i},d.animation=function(e,i,o,c){if(e instanceof Ye)return e;!d.is(o,"function")&&o||(c=c||o||null,o=null),e=Object(e),i=+i||0;var m,C,A={};for(C in e)e[L](C)&&h(C)!=C&&h(C)+"%"!=C&&(m=!0,A[C]=e[C]);if(m)return o&&(A.easing=o),c&&(A.callback=c),new Ye({100:A},i);if(c){var S=0;for(var E in e){var z=g(E);e[L](E)&&z>S&&(S=z)}!e[S+="%"].callback&&(e[S].callback=c)}return new Ye(e,i)},Ie.animate=function(e,i,o,c){if(this.removed)return c&&c.call(this),this;var m=e instanceof Ye?e:d.animation(e,i,o,c);return At(m,this,m.percents[0],null,this.attr()),this},Ie.setTime=function(e,i){return e&&i!=null&&this.status(e,W(i,e.ms)/e.ms),this},Ie.status=function(e,i){var o,c,m=[],C=0;if(i!=null)return At(e,this,-1,W(i,1)),this;for(o=Me.length;C<o;C++)if((c=Me[C]).el.id==this.id&&(!e||c.anim==e)){if(e)return c.status;m.push({anim:c.anim,status:c.status})}return e?0:m},Ie.pause=function(e){for(var i=0;i<Me.length;i++)Me[i].el.id!=this.id||e&&Me[i].anim!=e||u("raphael.anim.pause."+this.id,this,Me[i].anim)!==!1&&(Me[i].paused=!0);return this},Ie.resume=function(e){for(var i=0;i<Me.length;i++)if(Me[i].el.id==this.id&&(!e||Me[i].anim==e)){var o=Me[i];u("raphael.anim.resume."+this.id,this,o.anim)!==!1&&(delete o.paused,this.status(o.anim,o.status))}return this},Ie.stop=function(e){for(var i=0;i<Me.length;i++)Me[i].el.id!=this.id||e&&Me[i].anim!=e||u("raphael.anim.stop."+this.id,this,Me[i].anim)!==!1&&Me.splice(i--,1);return this},u.on("raphael.remove",l1),u.on("raphael.clear",l1),Ie.toString=function(){return"RaphaÃ«lâ€™s object"};var c1,u1,st,h1,Pt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var i=0,o=e.length;i<o;i++)!e[i]||e[i].constructor!=Ie.constructor&&e[i].constructor!=Pt||(this[this.items.length]=this.items[this.items.length]=e[i],this.length++)},Oe=Pt.prototype;for(var Yt in Oe.push=function(){for(var e,i,o=0,c=arguments.length;o<c;o++)!(e=arguments[o])||e.constructor!=Ie.constructor&&e.constructor!=Pt||(this[i=this.items.length]=this.items[i]=e,this.length++);return this},Oe.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Oe.forEach=function(e,i){for(var o=0,c=this.items.length;o<c;o++)if(e.call(i,this.items[o],o)===!1)return this;return this},Ie)Ie[L](Yt)&&(Oe[Yt]=function(e){return function(){var i=arguments;return this.forEach(function(o){o[e][$](o,i)})}}(Yt));return Oe.attr=function(e,i){if(e&&d.is(e,s)&&d.is(e[0],"object"))for(var o=0,c=e.length;o<c;o++)this.items[o].attr(e[o]);else for(var m=0,C=this.items.length;m<C;m++)this.items[m].attr(e,i);return this},Oe.clear=function(){for(;this.length;)this.pop()},Oe.splice=function(e,i,o){e=e<0?ke(this.length+e,0):e,i=ke(0,W(this.length-e,i));var c,m=[],C=[],A=[];for(c=2;c<arguments.length;c++)A.push(arguments[c]);for(c=0;c<i;c++)C.push(this[e+c]);for(;c<this.length-e;c++)m.push(this[e+c]);var S=A.length;for(c=0;c<S+m.length;c++)this.items[e+c]=this[e+c]=c<S?A[c]:m[c-S];for(c=this.items.length=this.length-=i-S;this[c];)delete this[c++];return new Pt(C)},Oe.exclude=function(e){for(var i=0,o=this.length;i<o;i++)if(this[i]==e)return this.splice(i,1),!0},Oe.animate=function(e,i,o,c){(d.is(o,"function")||!o)&&(c=o||null);var m,C,A=this.items.length,S=A,E=this;if(!A)return this;c&&(C=function(){!--A&&c.call(E)}),o=d.is(o,"string")?o:C;var z=d.animation(e,i,o,C);for(m=this.items[--S].animate(z);S--;)this.items[S]&&!this.items[S].removed&&this.items[S].animateWith(m,z,z),this.items[S]&&!this.items[S].removed||A--;return this},Oe.insertAfter=function(e){for(var i=this.items.length;i--;)this.items[i].insertAfter(e);return this},Oe.getBBox=function(){for(var e=[],i=[],o=[],c=[],m=this.items.length;m--;)if(!this.items[m].removed){var C=this.items[m].getBBox();e.push(C.x),i.push(C.y),o.push(C.x+C.width),c.push(C.y+C.height)}return{x:e=W[$](0,e),y:i=W[$](0,i),x2:o=ke[$](0,o),y2:c=ke[$](0,c),width:o-e,height:c-i}},Oe.clone=function(e){e=this.paper.set();for(var i=0,o=this.items.length;i<o;i++)e.push(this.items[i].clone());return e},Oe.toString=function(){return"RaphaÃ«lâ€˜s set"},Oe.glow=function(e){var i=this.paper.set();return this.forEach(function(o,c){var m=o.glow(e);m!=null&&m.forEach(function(C,A){i.push(C)})}),i},Oe.isPointInside=function(e,i){var o=!1;return this.forEach(function(c){if(c.isPointInside(e,i))return o=!0,!1}),o},d.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var i={w:e.w,face:{},glyphs:{}},o=e.face["font-family"];for(var c in e.face)e.face[L](c)&&(i.face[c]=e.face[c]);if(this.fonts[o]?this.fonts[o].push(i):this.fonts[o]=[i],!e.svg){for(var m in i.face["units-per-em"]=g(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[L](m)){var C=e.glyphs[m];if(i.glyphs[m]={w:C.w,k:{},d:C.d&&"M"+C.d.replace(/[mlcxtrv]/g,function(S){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[S]||"M"})+"z"},C.k)for(var A in C.k)C[L](A)&&(i.glyphs[m].k[A]=C.k[A])}}return e},P.getFont=function(e,i,o,c){if(c=c||"normal",o=o||"normal",i=+i||{normal:400,bold:700,lighter:300,bolder:800}[i]||400,d.fonts){var m,C=d.fonts[e];if(!C){var A=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,he)+"(\\s|$)","i");for(var S in d.fonts)if(d.fonts[L](S)&&A.test(S)){C=d.fonts[S];break}}if(C)for(var E=0,z=C.length;E<z&&((m=C[E]).face["font-weight"]!=i||m.face["font-style"]!=o&&m.face["font-style"]||m.face["font-stretch"]!=c);E++);return m}},P.print=function(e,i,o,c,m,C,A,S){C=C||"middle",A=ke(W(A||0,1),-1),S=ke(W(S||1,3),1);var E,z=G(o)[fe](he),J=0,se=0,Z=he;if(d.is(c,"string")&&(c=this.getFont(c)),c){E=(m||16)/c.face["units-per-em"];for(var Y=c.face.bbox[fe](O),ne=+Y[0],ae=Y[3]-Y[1],ie=0,K=+Y[1]+(C=="baseline"?ae+ +c.face.descent:ae/2),_e=0,le=z.length;_e<le;_e++){if(z[_e]==`
`)J=0,ce=0,se=0,ie+=ae*S;else{var pe=se&&c.glyphs[z[_e-1]]||{},ce=c.glyphs[z[_e]];J+=se?(pe.w||c.w)+(pe.k&&pe.k[z[_e]]||0)+c.w*A:0,se=1}ce&&ce.d&&(Z+=d.transformPath(ce.d,["t",J*E,ie*E,"s",E,E,ne,K,"t",(e-ne)/E,(i-K)/E]))}}return this.path(Z).attr({fill:"#000",stroke:"none"})},P.add=function(e){if(d.is(e,"array"))for(var i,o=this.set(),c=0,m=e.length;c<m;c++)i=e[c]||{},H[L](i.type)&&o.push(this[i.type]().attr(i));return o},d.format=function(e,i){var o=d.is(i,s)?[0][U](i):arguments;return e&&d.is(e,"string")&&o.length-1&&(e=e.replace(I,function(c,m){return o[++m]==null?he:o[m]})),e||he},d.fullfill=(c1=/\{([^\}]+)\}/g,u1=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,i){return String(e).replace(c1,function(o,c){return function(m,C,A){var S=A;return C.replace(u1,function(E,z,J,se,Z){z=z||se,S&&(z in S&&(S=S[z]),typeof S=="function"&&Z&&(S=S()))}),S=(S==null||S==A?m:S)+""}(o,c,i)})}),d.ninja=function(){if(j.was)F.win.Raphael=j.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return d},d.st=Oe,u.on("raphael.DOMload",function(){b=!0}),(st=document).readyState==null&&st.addEventListener&&(st.addEventListener("DOMContentLoaded",h1=function(){st.removeEventListener("DOMContentLoaded",h1,!1),st.readyState="complete"},!1),st.readyState="loading"),function e(){/in/.test(st.readyState)?setTimeout(e,9):d.eve("raphael.DOMload")}(),d}.apply(w,p))===void 0||(M.exports=N)},function(M,w,R){var p,N;p=[R(0),R(3),R(4)],(N=function(u){return u}.apply(w,p))===void 0||(M.exports=N)},function(M,w,R){var p,N,u,d,b,P,O,H,I,L,F,j,re,$;d="hasOwnProperty",b=/[\.\/]/,P=/\s*,\s*/,O=function(U,oe){return U-oe},H={n:{}},I=function(){for(var U=0,oe=this.length;U<oe;U++)if(this[U]!==void 0)return this[U]},L=function(){for(var U=this.length;--U;)if(this[U]!==void 0)return this[U]},F=Object.prototype.toString,j=String,re=Array.isArray||function(U){return U instanceof Array||F.call(U)=="[object Array]"},($=function(U,oe){var he,ge=u,G=Array.prototype.slice.call(arguments,2),fe=$.listeners(U),de=0,q=[],ye={},ve=[],ke=N;ve.firstDefined=I,ve.lastDefined=L,N=U,u=0;for(var W=0,Ce=fe.length;W<Ce;W++)"zIndex"in fe[W]&&(q.push(fe[W].zIndex),fe[W].zIndex<0&&(ye[fe[W].zIndex]=fe[W]));for(q.sort(O);q[de]<0;)if(he=ye[q[de++]],ve.push(he.apply(oe,G)),u)return u=ge,ve;for(W=0;W<Ce;W++)if("zIndex"in(he=fe[W]))if(he.zIndex==q[de]){if(ve.push(he.apply(oe,G)),u)break;do if((he=ye[q[++de]])&&ve.push(he.apply(oe,G)),u)break;while(he)}else ye[he.zIndex]=he;else if(ve.push(he.apply(oe,G)),u)break;return u=ge,N=ke,ve})._events=H,$.listeners=function(U){var oe,he,ge,G,fe,de,q,ye,ve=re(U)?U:U.split(b),ke=H,W=[ke],Ce=[];for(G=0,fe=ve.length;G<fe;G++){for(ye=[],de=0,q=W.length;de<q;de++)for(he=[(ke=W[de].n)[ve[G]],ke["*"]],ge=2;ge--;)(oe=he[ge])&&(ye.push(oe),Ce=Ce.concat(oe.f||[]));W=ye}return Ce},$.separator=function(U){U?(U="["+(U=j(U).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",b=new RegExp(U)):b=/[\.\/]/},$.on=function(U,oe){if(typeof oe!="function")return function(){};for(var he=re(U)?re(U[0])?U:[U]:j(U).split(P),ge=0,G=he.length;ge<G;ge++)(function(fe){for(var de,q=re(fe)?fe:j(fe).split(b),ye=H,ve=0,ke=q.length;ve<ke;ve++)ye=(ye=ye.n).hasOwnProperty(q[ve])&&ye[q[ve]]||(ye[q[ve]]={n:{}});for(ye.f=ye.f||[],ve=0,ke=ye.f.length;ve<ke;ve++)if(ye.f[ve]==oe){de=!0;break}!de&&ye.f.push(oe)})(he[ge]);return function(fe){+fe==+fe&&(oe.zIndex=+fe)}},$.f=function(U){var oe=[].slice.call(arguments,1);return function(){$.apply(null,[U,null].concat(oe).concat([].slice.call(arguments,0)))}},$.stop=function(){u=1},$.nt=function(U){var oe=re(N)?N.join("."):N;return U?new RegExp("(?:\\.|\\/|^)"+U+"(?:\\.|\\/|$)").test(oe):oe},$.nts=function(){return re(N)?N:N.split(b)},$.off=$.unbind=function(U,oe){if(U){var he=re(U)?re(U[0])?U:[U]:j(U).split(P);if(he.length>1)for(var ge=0,G=he.length;ge<G;ge++)$.off(he[ge],oe);else{he=re(U)?U:j(U).split(b);var fe,de,q,ye,ve,ke=[H];for(ge=0,G=he.length;ge<G;ge++)for(ye=0;ye<ke.length;ye+=q.length-2){if(q=[ye,1],fe=ke[ye].n,he[ge]!="*")fe[he[ge]]&&q.push(fe[he[ge]]);else for(de in fe)fe[d](de)&&q.push(fe[de]);ke.splice.apply(ke,q)}for(ge=0,G=ke.length;ge<G;ge++)for(fe=ke[ge];fe.n;){if(oe){if(fe.f){for(ye=0,ve=fe.f.length;ye<ve;ye++)if(fe.f[ye]==oe){fe.f.splice(ye,1);break}!fe.f.length&&delete fe.f}for(de in fe.n)if(fe.n[d](de)&&fe.n[de].f){var W=fe.n[de].f;for(ye=0,ve=W.length;ye<ve;ye++)if(W[ye]==oe){W.splice(ye,1);break}!W.length&&delete fe.n[de].f}}else for(de in delete fe.f,fe.n)fe.n[d](de)&&fe.n[de].f&&delete fe.n[de].f;fe=fe.n}}}else $._events=H={n:{}}},$.once=function(U,oe){var he=function(){return $.off(U,he),oe.apply(this,arguments)};return $.on(U,he)},$.version="0.5.0",$.toString=function(){return"You are running Eve 0.5.0"},M.exports?M.exports=$:(p=function(){return $}.apply(w,[]))===void 0||(M.exports=p)},function(M,w,R){var p,N;p=[R(0)],(N=function(u){if(!u||u.svg){var d="hasOwnProperty",b=String,P=parseFloat,O=parseInt,H=Math,I=H.max,L=H.abs,F=H.pow,j=/[, ]+/,re=u.eve,$="",U=" ",oe="http://www.w3.org/1999/xlink",he={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},ge={};u.toString=function(){return`Your browser supports SVG.
You are running RaphaÃ«l `+this.version};var G=function(n,t){if(t)for(var r in typeof n=="string"&&(n=G(n)),t)t[d](r)&&(r.substring(0,6)=="xlink:"?n.setAttributeNS(oe,r.substring(6),b(t[r])):n.setAttribute(r,b(t[r])));else(n=u._g.doc.createElementNS("http://www.w3.org/2000/svg",n)).style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},fe=function(n,t){var r="linear",a=n.id+t,h=.5,g=.5,v=n.node,B=n.paper,k=v.style,D=u._g.doc.getElementById(a);if(!D){if(t=(t=b(t).replace(u._radial_gradient,function(be,Ae,we){if(r="radial",Ae&&we){h=P(Ae);var Ne=2*((g=P(we))>.5)-1;F(h-.5,2)+F(g-.5,2)>.25&&(g=H.sqrt(.25-F(h-.5,2))*Ne+.5)&&g!=.5&&(g=g.toFixed(5)-1e-5*Ne)}return $})).split(/\s*\-\s*/),r=="linear"){var V=t.shift();if(V=-P(V),isNaN(V))return null;var Q=[0,0,H.cos(u.rad(V)),H.sin(u.rad(V))],te=1/(I(L(Q[2]),L(Q[3]))||1);Q[2]*=te,Q[3]*=te,Q[2]<0&&(Q[0]=-Q[2],Q[2]=0),Q[3]<0&&(Q[1]=-Q[3],Q[3]=0)}var ue=u._parseDots(t);if(!ue)return null;if(a=a.replace(/[\(\)\s,\xb0#]/g,"_"),n.gradient&&a!=n.gradient.id&&(B.defs.removeChild(n.gradient),delete n.gradient),!n.gradient){D=G(r+"Gradient",{id:a}),n.gradient=D,G(D,r=="radial"?{fx:h,fy:g}:{x1:Q[0],y1:Q[1],x2:Q[2],y2:Q[3],gradientTransform:n.matrix.invert()}),B.defs.appendChild(D);for(var me=0,xe=ue.length;me<xe;me++)D.appendChild(G("stop",{offset:ue[me].offset?ue[me].offset:me?"100%":"0%","stop-color":ue[me].color||"#fff","stop-opacity":isFinite(ue[me].opacity)?ue[me].opacity:1}))}}return G(v,{fill:de(a),opacity:1,"fill-opacity":1}),k.fill=$,k.opacity=1,k.fillOpacity=1,1},de=function(n){if((t=document.documentMode)&&(t===9||t===10))return"url('#"+n+"')";var t,r=document.location;return"url('"+(r.protocol+"//"+r.host+r.pathname+r.search)+"#"+n+"')"},q=function(n){var t=n.getBBox(1);G(n.pattern,{patternTransform:n.matrix.invert()+" translate("+t.x+","+t.y+")"})},ye=function(n,t,r){if(n.type=="path"){for(var a,h,g,v,B,k=b(t).toLowerCase().split("-"),D=n.paper,V=r?"end":"start",Q=n.node,te=n.attrs,ue=te["stroke-width"],me=k.length,xe="classic",be=3,Ae=3,we=5;me--;)switch(k[me]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":xe=k[me];break;case"wide":Ae=5;break;case"narrow":Ae=2;break;case"long":be=5;break;case"short":be=2}if(xe=="open"?(be+=2,Ae+=2,we+=2,g=1,v=r?4:1,B={fill:"none",stroke:te.stroke}):(v=g=be/2,B={fill:te.stroke,stroke:"none"}),n._.arrows?r?(n._.arrows.endPath&&ge[n._.arrows.endPath]--,n._.arrows.endMarker&&ge[n._.arrows.endMarker]--):(n._.arrows.startPath&&ge[n._.arrows.startPath]--,n._.arrows.startMarker&&ge[n._.arrows.startMarker]--):n._.arrows={},xe!="none"){var Ne="raphael-marker-"+xe,Be="raphael-marker-"+V+xe+be+Ae+"-obj"+n.id;u._g.doc.getElementById(Ne)?ge[Ne]++:(D.defs.appendChild(G(G("path"),{"stroke-linecap":"round",d:he[xe],id:Ne})),ge[Ne]=1);var Te,Le=u._g.doc.getElementById(Be);Le?(ge[Be]++,Te=Le.getElementsByTagName("use")[0]):(Le=G(G("marker"),{id:Be,markerHeight:Ae,markerWidth:be,orient:"auto",refX:v,refY:Ae/2}),Te=G(G("use"),{"xlink:href":"#"+Ne,transform:(r?"rotate(180 "+be/2+" "+Ae/2+") ":$)+"scale("+be/we+","+Ae/we+")","stroke-width":(1/((be/we+Ae/we)/2)).toFixed(4)}),Le.appendChild(Te),D.defs.appendChild(Le),ge[Be]=1),G(Te,B);var qe=g*(xe!="diamond"&&xe!="oval");r?(a=n._.arrows.startdx*ue||0,h=u.getTotalLength(te.path)-qe*ue):(a=qe*ue,h=u.getTotalLength(te.path)-(n._.arrows.enddx*ue||0)),(B={})["marker-"+V]="url(#"+Be+")",(h||a)&&(B.d=u.getSubpath(te.path,a,h)),G(Q,B),n._.arrows[V+"Path"]=Ne,n._.arrows[V+"Marker"]=Be,n._.arrows[V+"dx"]=qe,n._.arrows[V+"Type"]=xe,n._.arrows[V+"String"]=t}else r?(a=n._.arrows.startdx*ue||0,h=u.getTotalLength(te.path)-a):(a=0,h=u.getTotalLength(te.path)-(n._.arrows.enddx*ue||0)),n._.arrows[V+"Path"]&&G(Q,{d:u.getSubpath(te.path,a,h)}),delete n._.arrows[V+"Path"],delete n._.arrows[V+"Marker"],delete n._.arrows[V+"dx"],delete n._.arrows[V+"Type"],delete n._.arrows[V+"String"];for(B in ge)if(ge[d](B)&&!ge[B]){var ze=u._g.doc.getElementById(B);ze&&ze.parentNode.removeChild(ze)}}},ve={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},ke=function(n,t,r){if(t=ve[b(t).toLowerCase()]){for(var a=n.attrs["stroke-width"]||"1",h={round:a,square:a,butt:0}[n.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,g=[],v=t.length;v--;)g[v]=t[v]*a+(v%2?1:-1)*h;G(n.node,{"stroke-dasharray":g.join(",")})}else G(n.node,{"stroke-dasharray":"none"})},W=function(n,t){var r=n.node,a=n.attrs,h=r.style.visibility;for(var g in r.style.visibility="hidden",t)if(t[d](g)){if(!u._availableAttrs[d](g))continue;var v=t[g];switch(a[g]=v,g){case"blur":n.blur(v);break;case"title":var B=r.getElementsByTagName("title");if(B.length&&(B=B[0]))B.firstChild.nodeValue=v;else{B=G("title");var k=u._g.doc.createTextNode(v);B.appendChild(k),r.appendChild(B)}break;case"href":case"target":var D=r.parentNode;if(D.tagName.toLowerCase()!="a"){var V=G("a");D.insertBefore(V,r),V.appendChild(r),D=V}g=="target"?D.setAttributeNS(oe,"show",v=="blank"?"new":v):D.setAttributeNS(oe,g,v);break;case"cursor":r.style.cursor=v;break;case"transform":n.transform(v);break;case"arrow-start":ye(n,v);break;case"arrow-end":ye(n,v,1);break;case"clip-rect":var Q=b(v).split(j);if(Q.length==4){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var te=G("clipPath"),ue=G("rect");te.id=u.createUUID(),G(ue,{x:Q[0],y:Q[1],width:Q[2],height:Q[3]}),te.appendChild(ue),n.paper.defs.appendChild(te),G(r,{"clip-path":"url(#"+te.id+")"}),n.clip=ue}if(!v){var me=r.getAttribute("clip-path");if(me){var xe=u._g.doc.getElementById(me.replace(/(^url\(#|\)$)/g,$));xe&&xe.parentNode.removeChild(xe),G(r,{"clip-path":$}),delete n.clip}}break;case"path":n.type=="path"&&(G(r,{d:v?a.path=u._pathToAbsolute(v):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&ye(n,n._.arrows.startString),"endString"in n._.arrows&&ye(n,n._.arrows.endString,1)));break;case"width":if(r.setAttribute(g,v),n._.dirty=1,!a.fx)break;g="x",v=a.x;case"x":a.fx&&(v=-a.x-(a.width||0));case"rx":if(g=="rx"&&n.type=="rect")break;case"cx":r.setAttribute(g,v),n.pattern&&q(n),n._.dirty=1;break;case"height":if(r.setAttribute(g,v),n._.dirty=1,!a.fy)break;g="y",v=a.y;case"y":a.fy&&(v=-a.y-(a.height||0));case"ry":if(g=="ry"&&n.type=="rect")break;case"cy":r.setAttribute(g,v),n.pattern&&q(n),n._.dirty=1;break;case"r":n.type=="rect"?G(r,{rx:v,ry:v}):r.setAttribute(g,v),n._.dirty=1;break;case"src":n.type=="image"&&r.setAttributeNS(oe,"href",v);break;case"stroke-width":n._.sx==1&&n._.sy==1||(v/=I(L(n._.sx),L(n._.sy))||1),r.setAttribute(g,v),a["stroke-dasharray"]&&ke(n,a["stroke-dasharray"],t),n._.arrows&&("startString"in n._.arrows&&ye(n,n._.arrows.startString),"endString"in n._.arrows&&ye(n,n._.arrows.endString,1));break;case"stroke-dasharray":ke(n,v,t);break;case"fill":var be=b(v).match(u._ISURL);if(be){te=G("pattern");var Ae=G("image");te.id=u.createUUID(),G(te,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),G(Ae,{x:0,y:0,"xlink:href":be[1]}),te.appendChild(Ae),function(Le){u._preload(be[1],function(){var qe=this.offsetWidth,ze=this.offsetHeight;G(Le,{width:qe,height:ze}),G(Ae,{width:qe,height:ze})})}(te),n.paper.defs.appendChild(te),G(r,{fill:"url(#"+te.id+")"}),n.pattern=te,n.pattern&&q(n);break}var we=u.getRGB(v);if(we.error){if((n.type=="circle"||n.type=="ellipse"||b(v).charAt()!="r")&&fe(n,v)){if("opacity"in a||"fill-opacity"in a){var Ne=u._g.doc.getElementById(r.getAttribute("fill").replace(/^url\(#|\)$/g,$));if(Ne){var Be=Ne.getElementsByTagName("stop");G(Be[Be.length-1],{"stop-opacity":("opacity"in a?a.opacity:1)*("fill-opacity"in a?a["fill-opacity"]:1)})}}a.gradient=v,a.fill="none";break}}else delete t.gradient,delete a.gradient,!u.is(a.opacity,"undefined")&&u.is(t.opacity,"undefined")&&G(r,{opacity:a.opacity}),!u.is(a["fill-opacity"],"undefined")&&u.is(t["fill-opacity"],"undefined")&&G(r,{"fill-opacity":a["fill-opacity"]});we[d]("opacity")&&G(r,{"fill-opacity":we.opacity>1?we.opacity/100:we.opacity});case"stroke":we=u.getRGB(v),r.setAttribute(g,we.hex),g=="stroke"&&we[d]("opacity")&&G(r,{"stroke-opacity":we.opacity>1?we.opacity/100:we.opacity}),g=="stroke"&&n._.arrows&&("startString"in n._.arrows&&ye(n,n._.arrows.startString),"endString"in n._.arrows&&ye(n,n._.arrows.endString,1));break;case"gradient":(n.type=="circle"||n.type=="ellipse"||b(v).charAt()!="r")&&fe(n,v);break;case"opacity":a.gradient&&!a[d]("stroke-opacity")&&G(r,{"stroke-opacity":v>1?v/100:v});case"fill-opacity":if(a.gradient){(Ne=u._g.doc.getElementById(r.getAttribute("fill").replace(/^url\(#|\)$/g,$)))&&(Be=Ne.getElementsByTagName("stop"),G(Be[Be.length-1],{"stop-opacity":v}));break}default:g=="font-size"&&(v=O(v,10)+"px");var Te=g.replace(/(\-.)/g,function(Le){return Le.substring(1).toUpperCase()});r.style[Te]=v,n._.dirty=1,r.setAttribute(g,v)}}Ce(n,t),r.style.visibility=h},Ce=function(n,t){if(n.type=="text"&&(t[d]("text")||t[d]("font")||t[d]("font-size")||t[d]("x")||t[d]("y"))){var r=n.attrs,a=n.node,h=a.firstChild?O(u._g.doc.defaultView.getComputedStyle(a.firstChild,$).getPropertyValue("font-size"),10):10;if(t[d]("text")){for(r.text=t.text;a.firstChild;)a.removeChild(a.firstChild);for(var g,v=b(t.text).split(`
`),B=[],k=0,D=v.length;k<D;k++)g=G("tspan"),k&&G(g,{dy:1.2*h,x:r.x}),g.appendChild(u._g.doc.createTextNode(v[k])),a.appendChild(g),B[k]=g}else for(k=0,D=(B=a.getElementsByTagName("tspan")).length;k<D;k++)k?G(B[k],{dy:1.2*h,x:r.x}):G(B[0],{dy:0});G(a,{x:r.x,y:r.y}),n._.dirty=1;var V=n._getBBox(),Q=r.y-(V.y+V.height/2);Q&&u.is(Q,"finite")&&G(B[0],{dy:Q})}},Se=function(n){return n.parentNode&&n.parentNode.tagName.toLowerCase()==="a"?n.parentNode:n},ee=function(n,t){this[0]=this.node=n,n.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),n.raphaelid=this.id,this.matrix=u.matrix(),this.realPath=null,this.paper=t,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null},X=u.el;ee.prototype=X,X.constructor=ee,u._engine.path=function(n,t){var r=G("path");t.canvas&&t.canvas.appendChild(r);var a=new ee(r,t);return a.type="path",W(a,{fill:"none",stroke:"#000",path:n}),a},X.rotate=function(n,t,r){if(this.removed)return this;if((n=b(n).split(j)).length-1&&(t=P(n[1]),r=P(n[2])),n=P(n[0]),r==null&&(t=r),t==null||r==null){var a=this.getBBox(1);t=a.x+a.width/2,r=a.y+a.height/2}return this.transform(this._.transform.concat([["r",n,t,r]])),this},X.scale=function(n,t,r,a){if(this.removed)return this;if((n=b(n).split(j)).length-1&&(t=P(n[1]),r=P(n[2]),a=P(n[3])),n=P(n[0]),t==null&&(t=n),a==null&&(r=a),r==null||a==null)var h=this.getBBox(1);return r=r==null?h.x+h.width/2:r,a=a==null?h.y+h.height/2:a,this.transform(this._.transform.concat([["s",n,t,r,a]])),this},X.translate=function(n,t){return this.removed?this:((n=b(n).split(j)).length-1&&(t=P(n[1])),n=P(n[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",n,t]])),this)},X.transform=function(n){var t=this._;if(n==null)return t.transform;if(u._extractTransform(this,n),this.clip&&G(this.clip,{transform:this.matrix.invert()}),this.pattern&&q(this),this.node&&G(this.node,{transform:this.matrix}),t.sx!=1||t.sy!=1){var r=this.attrs[d]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},X.hide=function(){return this.removed||(this.node.style.display="none"),this},X.show=function(){return this.removed||(this.node.style.display=""),this},X.remove=function(){var n=Se(this.node);if(!this.removed&&n.parentNode){var t=this.paper;for(var r in t.__set__&&t.__set__.exclude(this),re.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),u._tear(this,t),n.parentNode.removeChild(n),this.removeData(),this)this[r]=typeof this[r]=="function"?u._removedFactory(r):null;this.removed=!0}},X._getBBox=function(){if(this.node.style.display=="none"){this.show();var n=!0}var t,r=!1;this.paper.canvas.parentElement?t=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(t=this.paper.canvas.parentNode.style),t&&t.display=="none"&&(r=!0,t.display="");var a={};try{a=this.node.getBBox()}catch(h){a={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{a=a||{},r&&(t.display="none")}return n&&this.hide(),a},X.attr=function(n,t){if(this.removed)return this;if(n==null){var r={};for(var a in this.attrs)this.attrs[d](a)&&(r[a]=this.attrs[a]);return r.gradient&&r.fill=="none"&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(t==null&&u.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(n=="transform")return this._.transform;for(var h=n.split(j),g={},v=0,B=h.length;v<B;v++)(n=h[v])in this.attrs?g[n]=this.attrs[n]:u.is(this.paper.customAttributes[n],"function")?g[n]=this.paper.customAttributes[n].def:g[n]=u._availableAttrs[n];return B-1?g:g[h[0]]}if(t==null&&u.is(n,"array")){for(g={},v=0,B=n.length;v<B;v++)g[n[v]]=this.attr(n[v]);return g}if(t!=null){var k={};k[n]=t}else n!=null&&u.is(n,"object")&&(k=n);for(var D in k)re("raphael.attr."+D+"."+this.id,this,k[D]);for(D in this.paper.customAttributes)if(this.paper.customAttributes[d](D)&&k[d](D)&&u.is(this.paper.customAttributes[D],"function")){var V=this.paper.customAttributes[D].apply(this,[].concat(k[D]));for(var Q in this.attrs[D]=k[D],V)V[d](Q)&&(k[Q]=V[Q])}return W(this,k),this},X.toFront=function(){if(this.removed)return this;var n=Se(this.node);n.parentNode.appendChild(n);var t=this.paper;return t.top!=this&&u._tofront(this,t),this},X.toBack=function(){if(this.removed)return this;var n=Se(this.node),t=n.parentNode;return t.insertBefore(n,t.firstChild),u._toback(this,this.paper),this.paper,this},X.insertAfter=function(n){if(this.removed||!n)return this;var t=Se(this.node),r=Se(n.node||n[n.length-1].node);return r.nextSibling?r.parentNode.insertBefore(t,r.nextSibling):r.parentNode.appendChild(t),u._insertafter(this,n,this.paper),this},X.insertBefore=function(n){if(this.removed||!n)return this;var t=Se(this.node),r=Se(n.node||n[0].node);return r.parentNode.insertBefore(t,r),u._insertbefore(this,n,this.paper),this},X.blur=function(n){var t=this;if(+n!=0){var r=G("filter"),a=G("feGaussianBlur");t.attrs.blur=n,r.id=u.createUUID(),G(a,{stdDeviation:+n||1.5}),r.appendChild(a),t.paper.defs.appendChild(r),t._blur=r,G(t.node,{filter:"url(#"+r.id+")"})}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter");return t},u._engine.circle=function(n,t,r,a){var h=G("circle");n.canvas&&n.canvas.appendChild(h);var g=new ee(h,n);return g.attrs={cx:t,cy:r,r:a,fill:"none",stroke:"#000"},g.type="circle",G(h,g.attrs),g},u._engine.rect=function(n,t,r,a,h,g){var v=G("rect");n.canvas&&n.canvas.appendChild(v);var B=new ee(v,n);return B.attrs={x:t,y:r,width:a,height:h,rx:g||0,ry:g||0,fill:"none",stroke:"#000"},B.type="rect",G(v,B.attrs),B},u._engine.ellipse=function(n,t,r,a,h){var g=G("ellipse");n.canvas&&n.canvas.appendChild(g);var v=new ee(g,n);return v.attrs={cx:t,cy:r,rx:a,ry:h,fill:"none",stroke:"#000"},v.type="ellipse",G(g,v.attrs),v},u._engine.image=function(n,t,r,a,h,g){var v=G("image");G(v,{x:r,y:a,width:h,height:g,preserveAspectRatio:"none"}),v.setAttributeNS(oe,"href",t),n.canvas&&n.canvas.appendChild(v);var B=new ee(v,n);return B.attrs={x:r,y:a,width:h,height:g,src:t},B.type="image",B},u._engine.text=function(n,t,r,a){var h=G("text");n.canvas&&n.canvas.appendChild(h);var g=new ee(h,n);return g.attrs={x:t,y:r,"text-anchor":"middle",text:a,"font-family":u._availableAttrs["font-family"],"font-size":u._availableAttrs["font-size"],stroke:"none",fill:"#000"},g.type="text",W(g,g.attrs),g},u._engine.setSize=function(n,t){return this.width=n||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},u._engine.create=function(){var n=u._getContainer.apply(0,arguments),t=n&&n.container;if(!t)throw new Error("SVG container not found.");var r,a=n.x,h=n.y,g=n.width,v=n.height,B=G("svg"),k="overflow:hidden;";return a=a||0,h=h||0,G(B,{height:v=v||342,version:1.1,width:g=g||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),t==1?(B.style.cssText=k+"position:absolute;left:"+a+"px;top:"+h+"px",u._g.doc.body.appendChild(B),r=1):(B.style.cssText=k+"position:relative",t.firstChild?t.insertBefore(B,t.firstChild):t.appendChild(B)),(t=new u._Paper).width=g,t.height=v,t.canvas=B,t.clear(),t._left=t._top=0,r&&(t.renderfix=function(){}),t.renderfix(),t},u._engine.setViewBox=function(n,t,r,a,h){re("raphael.setViewBox",this,this._viewBox,[n,t,r,a,h]);var g,v,B=this.getSize(),k=I(r/B.width,a/B.height),D=this.top,V=h?"xMidYMid meet":"xMinYMin";for(n==null?(this._vbSize&&(k=1),delete this._vbSize,g="0 0 "+this.width+U+this.height):(this._vbSize=k,g=n+U+t+U+r+U+a),G(this.canvas,{viewBox:g,preserveAspectRatio:V});k&&D;)v="stroke-width"in D.attrs?D.attrs["stroke-width"]:1,D.attr({"stroke-width":v}),D._.dirty=1,D._.dirtyT=1,D=D.prev;return this._viewBox=[n,t,r,a,!!h],this},u.prototype.renderfix=function(){var n,t=this.canvas,r=t.style;try{n=t.getScreenCTM()||t.createSVGMatrix()}catch(g){n=t.createSVGMatrix()}var a=-n.e%1,h=-n.f%1;(a||h)&&(a&&(this._left=(this._left+a)%1,r.left=this._left+"px"),h&&(this._top=(this._top+h)%1,r.top=this._top+"px"))},u.prototype.clear=function(){u.eve("raphael.clear",this);for(var n=this.canvas;n.firstChild;)n.removeChild(n.firstChild);this.bottom=this.top=null,(this.desc=G("desc")).appendChild(u._g.doc.createTextNode("Created with RaphaÃ«l "+u.version)),n.appendChild(this.desc),n.appendChild(this.defs=G("defs"))},u.prototype.remove=function(){for(var n in re("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[n]=typeof this[n]=="function"?u._removedFactory(n):null};var s=u.st;for(var l in X)X[d](l)&&!s[d](l)&&(s[l]=function(n){return function(){var t=arguments;return this.forEach(function(r){r[n].apply(r,t)})}}(l))}}.apply(w,p))===void 0||(M.exports=N)},function(M,w,R){var p,N;p=[R(0)],(N=function(u){if(!u||u.vml){var d="hasOwnProperty",b=String,P=parseFloat,O=Math,H=O.round,I=O.max,L=O.min,F=O.abs,j=/[, ]+/,re=u.eve,$=" ",U="",oe={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},he=/([clmz]),?([^clmz]*)/gi,ge=/ progid:\S+Blur\([^\)]+\)/g,G=/-?[^,\s-]+/g,fe="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",de=21600,q={path:1,rect:1,image:1},ye={circle:1,ellipse:1},ve=function(t,r,a){var h=u.matrix();return h.rotate(-t,.5,.5),{dx:h.x(r,a),dy:h.y(r,a)}},ke=function(t,r,a,h,g,v){var B=t._,k=t.matrix,D=B.fillpos,V=t.node,Q=V.style,te=1,ue="",me=de/r,xe=de/a;if(Q.visibility="hidden",r&&a){if(V.coordsize=F(me)+$+F(xe),Q.rotation=v*(r*a<0?-1:1),v){var be=ve(v,h,g);h=be.dx,g=be.dy}if(r<0&&(ue+="x"),a<0&&(ue+=" y")&&(te=-1),Q.flip=ue,V.coordorigin=h*-me+$+g*-xe,D||B.fillsize){var Ae=V.getElementsByTagName("fill");Ae=Ae&&Ae[0],V.removeChild(Ae),D&&(be=ve(v,k.x(D[0],D[1]),k.y(D[0],D[1])),Ae.position=be.dx*te+$+be.dy*te),B.fillsize&&(Ae.size=B.fillsize[0]*F(r)+$+B.fillsize[1]*F(a)),V.appendChild(Ae)}Q.visibility="visible"}};u.toString=function(){return`Your browser doesnâ€™t support SVG. Falling down to VML.
You are running RaphaÃ«l `+this.version};var W,Ce=function(t,r,a){for(var h=b(r).toLowerCase().split("-"),g=a?"end":"start",v=h.length,B="classic",k="medium",D="medium";v--;)switch(h[v]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":B=h[v];break;case"wide":case"narrow":D=h[v];break;case"long":case"short":k=h[v]}var V=t.node.getElementsByTagName("stroke")[0];V[g+"arrow"]=B,V[g+"arrowlength"]=k,V[g+"arrowwidth"]=D},Se=function(t,r){t.attrs=t.attrs||{};var a=t.node,h=t.attrs,g=a.style,v=q[t.type]&&(r.x!=h.x||r.y!=h.y||r.width!=h.width||r.height!=h.height||r.cx!=h.cx||r.cy!=h.cy||r.rx!=h.rx||r.ry!=h.ry||r.r!=h.r),B=ye[t.type]&&(h.cx!=r.cx||h.cy!=r.cy||h.r!=r.r||h.rx!=r.rx||h.ry!=r.ry),k=t;for(var D in r)r[d](D)&&(h[D]=r[D]);if(v&&(h.path=u._getPath[t.type](t),t._.dirty=1),r.href&&(a.href=r.href),r.title&&(a.title=r.title),r.target&&(a.target=r.target),r.cursor&&(g.cursor=r.cursor),"blur"in r&&t.blur(r.blur),(r.path&&t.type=="path"||v)&&(a.path=function(Fe){var Ke=/[ahqstv]/gi,ut=u._pathToAbsolute;if(b(Fe).match(Ke)&&(ut=u._path2curve),Ke=/[clmz]/g,ut==u._pathToAbsolute&&!b(Fe).match(Ke)){var je=b(Fe).replace(he,function(Zt,ft,pt){var et=[],Tt=ft.toLowerCase()=="m",rt=oe[ft];return pt.replace(G,function(Mt){Tt&&et.length==2&&(rt+=et+oe[ft=="m"?"l":"L"],et=[]),et.push(H(Mt*de))}),rt+et});return je}var ht,Ge,_t=ut(Fe);je=[];for(var dt=0,kt=_t.length;dt<kt;dt++){ht=_t[dt],(Ge=_t[dt][0].toLowerCase())=="z"&&(Ge="x");for(var Ze=1,Ve=ht.length;Ze<Ve;Ze++)Ge+=H(ht[Ze]*de)+(Ze!=Ve-1?",":U);je.push(Ge)}return je.join($)}(~b(h.path).toLowerCase().indexOf("r")?u._pathToAbsolute(h.path):h.path),t._.dirty=1,t.type=="image"&&(t._.fillpos=[h.x,h.y],t._.fillsize=[h.width,h.height],ke(t,1,1,0,0,0))),"transform"in r&&t.transform(r.transform),B){var V=+h.cx,Q=+h.cy,te=+h.rx||+h.r||0,ue=+h.ry||+h.r||0;a.path=u.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",H((V-te)*de),H((Q-ue)*de),H((V+te)*de),H((Q+ue)*de),H(V*de)),t._.dirty=1}if("clip-rect"in r){var me=b(r["clip-rect"]).split(j);if(me.length==4){me[2]=+me[2]+ +me[0],me[3]=+me[3]+ +me[1];var xe=a.clipRect||u._g.doc.createElement("div"),be=xe.style;be.clip=u.format("rect({1}px {2}px {3}px {0}px)",me),a.clipRect||(be.position="absolute",be.top=0,be.left=0,be.width=t.paper.width+"px",be.height=t.paper.height+"px",a.parentNode.insertBefore(xe,a),xe.appendChild(a),a.clipRect=xe)}r["clip-rect"]||a.clipRect&&(a.clipRect.style.clip="auto")}if(t.textpath){var Ae=t.textpath.style;r.font&&(Ae.font=r.font),r["font-family"]&&(Ae.fontFamily='"'+r["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,U)+'"'),r["font-size"]&&(Ae.fontSize=r["font-size"]),r["font-weight"]&&(Ae.fontWeight=r["font-weight"]),r["font-style"]&&(Ae.fontStyle=r["font-style"])}if("arrow-start"in r&&Ce(k,r["arrow-start"]),"arrow-end"in r&&Ce(k,r["arrow-end"],1),r.opacity!=null||r.fill!=null||r.src!=null||r.stroke!=null||r["stroke-width"]!=null||r["stroke-opacity"]!=null||r["fill-opacity"]!=null||r["stroke-dasharray"]!=null||r["stroke-miterlimit"]!=null||r["stroke-linejoin"]!=null||r["stroke-linecap"]!=null){var we=a.getElementsByTagName("fill");if(!(we=we&&we[0])&&(we=W("fill")),t.type=="image"&&r.src&&(we.src=r.src),r.fill&&(we.on=!0),we.on!=null&&r.fill!="none"&&r.fill!==null||(we.on=!1),we.on&&r.fill){var Ne=b(r.fill).match(u._ISURL);if(Ne){we.parentNode==a&&a.removeChild(we),we.rotate=!0,we.src=Ne[1],we.type="tile";var Be=t.getBBox(1);we.position=Be.x+$+Be.y,t._.fillpos=[Be.x,Be.y],u._preload(Ne[1],function(){t._.fillsize=[this.offsetWidth,this.offsetHeight]})}else we.color=u.getRGB(r.fill).hex,we.src=U,we.type="solid",u.getRGB(r.fill).error&&(k.type in{circle:1,ellipse:1}||b(r.fill).charAt()!="r")&&ee(k,r.fill,we)&&(h.fill="none",h.gradient=r.fill,we.rotate=!1)}if("fill-opacity"in r||"opacity"in r){var Te=((+h["fill-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+u.getRGB(r.fill).o+1||2)-1);Te=L(I(Te,0),1),we.opacity=Te,we.src&&(we.color="none")}a.appendChild(we);var Le=a.getElementsByTagName("stroke")&&a.getElementsByTagName("stroke")[0],qe=!1;!Le&&(qe=Le=W("stroke")),(r.stroke&&r.stroke!="none"||r["stroke-width"]||r["stroke-opacity"]!=null||r["stroke-dasharray"]||r["stroke-miterlimit"]||r["stroke-linejoin"]||r["stroke-linecap"])&&(Le.on=!0),(r.stroke=="none"||r.stroke===null||Le.on==null||r.stroke==0||r["stroke-width"]==0)&&(Le.on=!1);var ze=u.getRGB(r.stroke);Le.on&&r.stroke&&(Le.color=ze.hex),Te=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+ze.o+1||2)-1);var He=.75*(P(r["stroke-width"])||1);if(Te=L(I(Te,0),1),r["stroke-width"]==null&&(He=h["stroke-width"]),r["stroke-width"]&&(Le.weight=He),He&&He<1&&(Te*=He)&&(Le.weight=1),Le.opacity=Te,r["stroke-linejoin"]&&(Le.joinstyle=r["stroke-linejoin"]||"miter"),Le.miterlimit=r["stroke-miterlimit"]||8,r["stroke-linecap"]&&(Le.endcap=r["stroke-linecap"]=="butt"?"flat":r["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in r){var Xe={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Le.dashstyle=Xe[d](r["stroke-dasharray"])?Xe[r["stroke-dasharray"]]:U}qe&&a.appendChild(Le)}if(k.type=="text"){k.paper.canvas.style.display=U;var Qe=k.paper.span,at=h.font&&h.font.match(/\d+(?:\.\d*)?(?=px)/);g=Qe.style,h.font&&(g.font=h.font),h["font-family"]&&(g.fontFamily=h["font-family"]),h["font-weight"]&&(g.fontWeight=h["font-weight"]),h["font-style"]&&(g.fontStyle=h["font-style"]),at=P(h["font-size"]||at&&at[0])||10,g.fontSize=100*at+"px",k.textpath.string&&(Qe.innerHTML=b(k.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var lt=Qe.getBoundingClientRect();k.W=h.w=(lt.right-lt.left)/100,k.H=h.h=(lt.bottom-lt.top)/100,k.X=h.x,k.Y=h.y+k.H/2,("x"in r||"y"in r)&&(k.path.v=u.format("m{0},{1}l{2},{1}",H(h.x*de),H(h.y*de),H(h.x*de)+1));for(var Ct=["x","y","text","font","font-family","font-weight","font-style","font-size"],ct=0,Nt=Ct.length;ct<Nt;ct++)if(Ct[ct]in r){k._.dirty=1;break}switch(h["text-anchor"]){case"start":k.textpath.style["v-text-align"]="left",k.bbx=k.W/2;break;case"end":k.textpath.style["v-text-align"]="right",k.bbx=-k.W/2;break;default:k.textpath.style["v-text-align"]="center",k.bbx=0}k.textpath.style["v-text-kern"]=!0}},ee=function(t,r,a){t.attrs=t.attrs||{},t.attrs;var h=Math.pow,g="linear",v=".5 .5";if(t.attrs.gradient=r,r=(r=b(r).replace(u._radial_gradient,function(te,ue,me){return g="radial",ue&&me&&(ue=P(ue),me=P(me),h(ue-.5,2)+h(me-.5,2)>.25&&(me=O.sqrt(.25-h(ue-.5,2))*(2*(me>.5)-1)+.5),v=ue+$+me),U})).split(/\s*\-\s*/),g=="linear"){var B=r.shift();if(B=-P(B),isNaN(B))return null}var k=u._parseDots(r);if(!k)return null;if(t=t.shape||t.node,k.length){t.removeChild(a),a.on=!0,a.method="none",a.color=k[0].color,a.color2=k[k.length-1].color;for(var D=[],V=0,Q=k.length;V<Q;V++)k[V].offset&&D.push(k[V].offset+$+k[V].color);a.colors=D.length?D.join():"0% "+a.color,g=="radial"?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=v,a.angle=0):(a.type="gradient",a.angle=(270-B)%360),t.appendChild(a)}return 1},X=function(t,r){this[0]=this.node=t,t.raphael=!0,this.id=u._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=r,this.matrix=u.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},s=u.el;X.prototype=s,s.constructor=X,s.transform=function(t){if(t==null)return this._.transform;var r,a=this.paper._viewBoxShift,h=a?"s"+[a.scale,a.scale]+"-1-1t"+[a.dx,a.dy]:U;a&&(r=t=b(t).replace(/\.{3}|\u2026/g,this._.transform||U)),u._extractTransform(this,h+t);var g,v=this.matrix.clone(),B=this.skew,k=this.node,D=~b(this.attrs.fill).indexOf("-"),V=!b(this.attrs.fill).indexOf("url(");if(v.translate(1,1),V||D||this.type=="image")if(B.matrix="1 0 0 1",B.offset="0 0",g=v.split(),D&&g.noRotation||!g.isSimple){k.style.filter=v.toFilter();var Q=this.getBBox(),te=this.getBBox(1),ue=Q.x-te.x,me=Q.y-te.y;k.coordorigin=ue*-de+$+me*-de,ke(this,1,1,ue,me,0)}else k.style.filter=U,ke(this,g.scalex,g.scaley,g.dx,g.dy,g.rotate);else k.style.filter=U,B.matrix=b(v),B.offset=v.offset();return r!==null&&(this._.transform=r,u._extractTransform(this,r)),this},s.rotate=function(t,r,a){if(this.removed)return this;if(t!=null){if((t=b(t).split(j)).length-1&&(r=P(t[1]),a=P(t[2])),t=P(t[0]),a==null&&(r=a),r==null||a==null){var h=this.getBBox(1);r=h.x+h.width/2,a=h.y+h.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,r,a]])),this}},s.translate=function(t,r){return this.removed?this:((t=b(t).split(j)).length-1&&(r=P(t[1])),t=P(t[0])||0,r=+r||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=r),this.transform(this._.transform.concat([["t",t,r]])),this)},s.scale=function(t,r,a,h){if(this.removed)return this;if((t=b(t).split(j)).length-1&&(r=P(t[1]),a=P(t[2]),h=P(t[3]),isNaN(a)&&(a=null),isNaN(h)&&(h=null)),t=P(t[0]),r==null&&(r=t),h==null&&(a=h),a==null||h==null)var g=this.getBBox(1);return a=a==null?g.x+g.width/2:a,h=h==null?g.y+g.height/2:h,this.transform(this._.transform.concat([["s",t,r,a,h]])),this._.dirtyT=1,this},s.hide=function(){return!this.removed&&(this.node.style.display="none"),this},s.show=function(){return!this.removed&&(this.node.style.display=U),this},s.auxGetBBox=u.el.getBBox,s.getBBox=function(){var t=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var r={},a=1/this.paper._viewBoxShift.scale;return r.x=t.x-this.paper._viewBoxShift.dx,r.x*=a,r.y=t.y-this.paper._viewBoxShift.dy,r.y*=a,r.width=t.width*a,r.height=t.height*a,r.x2=r.x+r.width,r.y2=r.y+r.height,r}return t},s._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},s.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),u.eve.unbind("raphael.*.*."+this.id),u._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]=typeof this[t]=="function"?u._removedFactory(t):null;this.removed=!0}},s.attr=function(t,r){if(this.removed)return this;if(t==null){var a={};for(var h in this.attrs)this.attrs[d](h)&&(a[h]=this.attrs[h]);return a.gradient&&a.fill=="none"&&(a.fill=a.gradient)&&delete a.gradient,a.transform=this._.transform,a}if(r==null&&u.is(t,"string")){if(t=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var g=t.split(j),v={},B=0,k=g.length;B<k;B++)(t=g[B])in this.attrs?v[t]=this.attrs[t]:u.is(this.paper.customAttributes[t],"function")?v[t]=this.paper.customAttributes[t].def:v[t]=u._availableAttrs[t];return k-1?v:v[g[0]]}if(this.attrs&&r==null&&u.is(t,"array")){for(v={},B=0,k=t.length;B<k;B++)v[t[B]]=this.attr(t[B]);return v}var D;for(var V in r!=null&&((D={})[t]=r),r==null&&u.is(t,"object")&&(D=t),D)re("raphael.attr."+V+"."+this.id,this,D[V]);if(D){for(V in this.paper.customAttributes)if(this.paper.customAttributes[d](V)&&D[d](V)&&u.is(this.paper.customAttributes[V],"function")){var Q=this.paper.customAttributes[V].apply(this,[].concat(D[V]));for(var te in this.attrs[V]=D[V],Q)Q[d](te)&&(D[te]=Q[te])}D.text&&this.type=="text"&&(this.textpath.string=D.text),Se(this,D)}return this},s.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&u._tofront(this,this.paper),this},s.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),u._toback(this,this.paper)),this)},s.insertAfter=function(t){return this.removed?this:(t.constructor==u.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),u._insertafter(this,t,this.paper),this)},s.insertBefore=function(t){return this.removed?this:(t.constructor==u.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),u._insertbefore(this,t,this.paper),this)},s.blur=function(t){var r=this.node.runtimeStyle,a=r.filter;return a=a.replace(ge,U),+t!=0?(this.attrs.blur=t,r.filter=a+$+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",r.margin=u.format("-{0}px 0 0 -{0}px",H(+t||1.5))):(r.filter=a,r.margin=0,delete this.attrs.blur),this},u._engine.path=function(t,r){var a=W("shape");a.style.cssText=fe,a.coordsize=de+$+de,a.coordorigin=r.coordorigin;var h=new X(a,r),g={fill:"none",stroke:"#000"};t&&(g.path=t),h.type="path",h.path=[],h.Path=U,Se(h,g),r.canvas&&r.canvas.appendChild(a);var v=W("skew");return v.on=!0,a.appendChild(v),h.skew=v,h.transform(U),h},u._engine.rect=function(t,r,a,h,g,v){var B=u._rectPath(r,a,h,g,v),k=t.path(B),D=k.attrs;return k.X=D.x=r,k.Y=D.y=a,k.W=D.width=h,k.H=D.height=g,D.r=v,D.path=B,k.type="rect",k},u._engine.ellipse=function(t,r,a,h,g){var v=t.path();return v.attrs,v.X=r-h,v.Y=a-g,v.W=2*h,v.H=2*g,v.type="ellipse",Se(v,{cx:r,cy:a,rx:h,ry:g}),v},u._engine.circle=function(t,r,a,h){var g=t.path();return g.attrs,g.X=r-h,g.Y=a-h,g.W=g.H=2*h,g.type="circle",Se(g,{cx:r,cy:a,r:h}),g},u._engine.image=function(t,r,a,h,g,v){var B=u._rectPath(a,h,g,v),k=t.path(B).attr({stroke:"none"}),D=k.attrs,V=k.node,Q=V.getElementsByTagName("fill")[0];return D.src=r,k.X=D.x=a,k.Y=D.y=h,k.W=D.width=g,k.H=D.height=v,D.path=B,k.type="image",Q.parentNode==V&&V.removeChild(Q),Q.rotate=!0,Q.src=r,Q.type="tile",k._.fillpos=[a,h],k._.fillsize=[g,v],V.appendChild(Q),ke(k,1,1,0,0,0),k},u._engine.text=function(t,r,a,h){var g=W("shape"),v=W("path"),B=W("textpath");r=r||0,a=a||0,h=h||"",v.v=u.format("m{0},{1}l{2},{1}",H(r*de),H(a*de),H(r*de)+1),v.textpathok=!0,B.string=b(h),B.on=!0,g.style.cssText=fe,g.coordsize=de+$+de,g.coordorigin="0 0";var k=new X(g,t),D={fill:"#000",stroke:"none",font:u._availableAttrs.font,text:h};k.shape=g,k.path=v,k.textpath=B,k.type="text",k.attrs.text=b(h),k.attrs.x=r,k.attrs.y=a,k.attrs.w=1,k.attrs.h=1,Se(k,D),g.appendChild(B),g.appendChild(v),t.canvas.appendChild(g);var V=W("skew");return V.on=!0,g.appendChild(V),k.skew=V,k.transform(U),k},u._engine.setSize=function(t,r){var a=this.canvas.style;return this.width=t,this.height=r,t==+t&&(t+="px"),r==+r&&(r+="px"),a.width=t,a.height=r,a.clip="rect(0 "+t+" "+r+" 0)",this._viewBox&&u._engine.setViewBox.apply(this,this._viewBox),this},u._engine.setViewBox=function(t,r,a,h,g){u.eve("raphael.setViewBox",this,this._viewBox,[t,r,a,h,g]);var v,B,k=this.getSize(),D=k.width,V=k.height;return g&&(a*(v=V/h)<D&&(t-=(D-a*v)/2/v),h*(B=D/a)<V&&(r-=(V-h*B)/2/B)),this._viewBox=[t,r,a,h,!!g],this._viewBoxShift={dx:-t,dy:-r,scale:k},this.forEach(function(Q){Q.transform("...")}),this},u._engine.initWin=function(t){var r=t.document;r.styleSheets.length<31?r.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):r.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!r.namespaces.rvml&&r.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),W=function(a){return r.createElement("<rvml:"+a+' class="rvml">')}}catch(a){W=function(h){return r.createElement("<"+h+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},u._engine.initWin(u._g.win),u._engine.create=function(){var t=u._getContainer.apply(0,arguments),r=t.container,a=t.height,h=t.width,g=t.x,v=t.y;if(!r)throw new Error("VML container not found.");var B=new u._Paper,k=B.canvas=u._g.doc.createElement("div"),D=k.style;return g=g||0,v=v||0,h=h||512,a=a||342,B.width=h,B.height=a,h==+h&&(h+="px"),a==+a&&(a+="px"),B.coordsize=216e5+$+216e5,B.coordorigin="0 0",B.span=u._g.doc.createElement("span"),B.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",k.appendChild(B.span),D.cssText=u.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",h,a),r==1?(u._g.doc.body.appendChild(k),D.left=g+"px",D.top=v+"px",D.position="absolute"):r.firstChild?r.insertBefore(k,r.firstChild):r.appendChild(k),B.renderfix=function(){},B},u.prototype.clear=function(){u.eve("raphael.clear",this),this.canvas.innerHTML=U,this.span=u._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},u.prototype.remove=function(){for(var t in u.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]=typeof this[t]=="function"?u._removedFactory(t):null;return!0};var l=u.st;for(var n in s)s[d](n)&&!l[d](n)&&(l[n]=function(t){return function(){var r=arguments;return this.forEach(function(a){a[t].apply(a,r)})}}(n))}}.apply(w,p))===void 0||(M.exports=N)}])})}),Q1=W1(J1),Lt=Q1;var T={};T.Common={nodeIdIncrement:0,activeNode:0,roundFloat:function(x,f){for(var M=0,w=1;M<f;)w*=10,M++;return Math.round(x*w)/w},apply:function(x,f){if(x&&typeof f=="object")for(var M in f)x[M]=f[M];return x},addRaphEventHandler:function(x,f,M,w){try{x[f](function(R,p){return function(N,u){var d=p;d.e=N,R(d)}}(M,w))}catch(R){}},isInteger:function(x){return!isNaN(parseInt(x))},isXMLSerializerAvailable:function(){return typeof XMLSerializer=="function"},createSvgEl:function(x,f){if(x=document.createElementNS("http://www.w3.org/2000/svg",x),f)for(var M in f)f.hasOwnProperty(M)&&x.setAttribute(M,String(f[M]));return x},createGradientEl:function(x,f,M){if(f.type!="radialGradient")return!1;var w=T.Common.createSvgEl("radialGradient",{id:x,gradientUnits:"userSpaceOnUse",cx:M[0],cy:M[1],r:M[2],fx:M[0],fy:M[1]});if(f.stop)for(var R=f.stop,p=0;p<R.length;p++){var N=R[p];N["@attributes"]?w.appendChild(T.Common.createSvgEl("stop",N["@attributes"])):(N._attributes&&delete N._attributes,N._children&&delete N._children,N.__proto__&&delete N.__proto__,w.appendChild(T.Common.createSvgEl("stop",N)))}return w},setCssStyle:function(x,f){var M=document.styleSheets[0];M.addRule?M.addRule(x,f):M.insertRule&&M.insertRule(x+" { "+f+" }",M.cssRules.length)}};T.PhyloCanvas=function(){var x,f,M,w,R;return function(p,N,u,d,b){if(this.getNewickObject=function(){return M},this.clear=function(){},this.scale=function(O){w.svg.scale(O)},this.getSvg=function(){return w},this.getPhylogram=function(){return x},this.getSvgSource=function(){if(Lt.svg&&T.Common.isXMLSerializerAvailable()){var O=new XMLSerializer;return O.serializeToString(w.svg.canvas)}else return!1},typeof p=="object")if(p.xml){if(p.fileSource)var P=p.xml;else var P=bt.textToXML(p.xml);P=bt.xmlToJSON(P),R=new T.PhyloCanvas.PhyloxmlParse(P)}else if(p.phyloxml){if(p.fileSource)var P=p.phyloxml;else var P=bt.textToXML(p.phyloxml);P=bt.xmlToJSON(P),R=new T.PhyloCanvas.PhyloxmlParse(P)}else if(p.nexml){if(p.fileSource)var P=p.nexml;else var P=bt.textToXML(p.nexml);P=bt.xmlToJSON(P),R=new T.PhyloCanvas.NexmlParse(P,p)}else p.json?R=new T.PhyloCanvas.PhyloxmlParse(p.json):p.newick?R=new T.PhyloCanvas.NewickParse(p.newick):p.nexmlJson?R=new T.PhyloCanvas.NexmlJsonParse(p):alert("Please set the format of input data");else R=new T.PhyloCanvas.NewickParse(p);f=N,w=new T.PhyloCanvas.Render.SVG(f,u,d),b=="circular"?x=new T.PhyloCanvas.Render.CircularPhylogram(w,R):x=new T.PhyloCanvas.Render.Phylogram(w,R)}}();T.PhyloCanvas.prototype={};T.PhyloCanvas.Node=function(){return function(x,f){this.id=T.Common.nodeIdIncrement+=1,this.level=0,this.len=0,this.newickLen=0,this.name="",this.type="",this.chart={},this.img=[],x&&T.Common.apply(this,x),this._countAllChildren=!1,this._countImmediateChildren=!1,this._midBranchPosition=!1,this.children=new Array,f&&f.children.push(this)}}();T.PhyloCanvas.Node.prototype={getCountAllChildren:function(){if(this._countAllChildren!==!1)return this._countAllChildren;var x=0;for(var f in this.children)if(T.Common.isInteger(f)){var M=this.children[f];M.children&&M.children.length>0?x+=M.getCountAllChildren():x++}return this._countAllChildren=x,x},getCountImmediateChildren:function(){if(this._countImmediateChildren!==!1)return this._countImmediateChildren;var x=0;for(var f in this.children){var M=this.children[f];x+=M.length}return this._countImmediateChildren=x,x},getMidbranchPosition:function(x){if(this._midBranchPosition!==!1)return this._midBranchPosition;for(var f=[0,0],M=0;M<this.children.length;M++){var w=this.children[M];w.children&&w.children.length>0?M==0&&x?(f[0]=w.getMidbranchPosition(!0),f[1]+=w.getCountAllChildren()-1):M==0?(f[0]=w.getMidbranchPosition(),f[1]+=w.getCountAllChildren()):M==this.children.length-1?f[1]+=w.getMidbranchPosition():f[1]+=w.getCountAllChildren():M==0&&x?f[0]=0:M==0?(f[0]=1,f[1]+=1):(M==this.children.length-1,f[1]+=1)}return this._midBranchPosition=f[1]>=f[0]?(f[1]+f[0])/2:f[0],this._midBranchPosition}};T.PhyloCanvas.NewickParse=function(){var x,f,M,w=0,R=0,p,N,u=function(I){for(var L=new T.PhyloCanvas.Node;f!==")"&&f!==",";)f===":"?(O(),L.len=T.Common.roundFloat(b(),4),L.len==0&&(L.len=1e-4)):f==="'"||f==='"'?(L.type="label",L.name=P(f)):(L.type="label",L.name=b());return L.level=I.level+1,L},d=function(I){var L=new T.PhyloCanvas.Node;for(I&&(L.level=I.level+1);f!==")";)O(),f==="("?L.children.push(d(L)):L.children.push(u(L));return O(),f!==":"&&f!==")"&&f!==","&&f!==";"&&(L.type="label",L.name=b()),f===":"&&(O(),L.len=T.Common.roundFloat(b(),4),L.len==0&&(L.len=1e-4),L.type="stem"),L},b=function(){for(var I="";f!==":"&&f!==")"&&f!==","&&f!==";";)I+=f,O();return I},P=function(I){for(var L="";f!==I;)L+=f,O();return L},O=function(){return f=x.charAt(M),M+=1,f},H=function(I,L){if(I.children&&I.children.length)for(var F=0;F<I.children.length;F++){var j=I.children[F];j.len===0&&(j.len=1),j.newickLen=T.Common.roundFloat(j.len+I.newickLen,4),j.level>w&&(w=j.level),j.newickLen>R&&(R=j.newickLen),j.children.length>0&&H(j,I)}return I};return function(I){this.getRoot=function(){return p},this.getLevels=function(){return w},this.getNewickLen=function(){return R},this.getValidate=function(){return N},w=0,R=0,x=I,M=0,O(),p=d(),p=H(p)}}();T.PhyloCanvas.NewickParse.prototype={};T.PhyloCanvas.PhyloxmlParse=function(){var x=0,f=0,M,w,R=function(u,d){var b=new T.PhyloCanvas.Node;if(d&&(b.level=d.level+1),u.clade&&u.clade.length)for(var P=0;P<u.clade.length;P++){var O=u.clade[P];b.children.push(R(O,b))}if(u.branch_length&&(typeof u.branch_length=="object"&&(u.branch_length=u.branch_length[0].Text),b.len=T.Common.roundFloat(u.branch_length,4),b.len==0&&(b.len=1e-4)),u.color?(b.red=u.color[0].red[0].Text,b.green=u.color[0].green[0].Text,b.blue=u.color[0].blue[0].Text):(b.red=0,b.green=0,b.blue=0),u.property&&u.property[0].applies_to=="node"&&u.property[0].ref=="style:font_color"&&(b.font_color_hex=u.property[0].Text),u.name?(b.type="label",b.name=u.name[0].Text,u.name[0]&&u.name[0].style&&(b.style=u.name[0].style),u.name[0]&&u.name[0].bgStyle&&(b.bgStyle=u.name[0].bgStyle)):u.confidence&&(b.name=u.confidence[0].Text),u.sequence&&u.sequence[0]&&u.sequence[0].name&&u.sequence[0].name[0]&&u.sequence[0].name[0].Text&&(b.sequenceName=u.sequence[0].name[0].Text),u.taxonomy&&u.taxonomy[0]&&(u.taxonomy[0].scientific_name&&u.taxonomy[0].scientific_name[0]&&u.taxonomy[0].scientific_name[0].Text&&(b.taxonomyScientificName=u.taxonomy[0].scientific_name[0].Text),u.taxonomy[0].common_name&&u.taxonomy[0].common_name[0]&&u.taxonomy[0].common_name[0].Text&&(b.taxonomyCommonName=u.taxonomy[0].common_name[0].Text)),u.sequence&&u.sequence[0]&&u.sequence[0].accession&&u.sequence[0].accession[0]&&u.sequence[0].accession[0].Text&&(b.sequenceAccession=u.sequence[0].accession[0].Text),u.point&&(b.LatLong=[u.point[0].lat[0].Text,u.point[0].long[0].Text]),b.name||(b.sequenceName?b.name=b.sequenceName:b.taxonomyScientificName?b.name=b.taxonomyScientificName:b.taxonomyCommonName?b.name=b.taxonomyCommonName:b.sequenceAccession&&(b.name=b.sequenceAccession),b.name&&(b.type="label")),u.annotation&&(u.annotation[0]&&u.annotation[0].desc&&u.annotation[0].desc[0]&&u.annotation[0].desc[0].Text&&(b.description=u.annotation[0].desc[0].Text),u.annotation[0]&&u.annotation[0].uri&&u.annotation[0].uri[0]&&u.annotation[0].uri[0].Text&&(b.uri=u.annotation[0].uri[0].Text),u.annotation[0]&&u.annotation[0].img))for(var P in u.annotation[0].img)T.Common.isInteger(P)&&(b.img[P]=u.annotation[0].img[P].Text);if(u.chart&&u.chart[0])for(var P in u.chart[0])P!="Text"&&P!="_children"&&(b.chart[P]=u.chart[0][P][0].Text);return b&&b.level>1&&(b.len||(w="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),b},p=function(u,d){if(u.children&&u.children.length)for(var b=0;b<u.children.length;b++){var P=u.children[b];P.newickLen=Math.round((P.len+u.newickLen)*1e4)/1e4,P.level>x&&(x=P.level),P.newickLen>f&&(f=P.newickLen),P.children.length>0&&p(P,u)}return u},N=function(u,d){for(var b in u)b!="_children"&&b!="Text"&&(b=="rectangular"||b=="circular"?N(u[b][0],b):(T.PhyloCanvas.Render.Parameters[b]||(T.PhyloCanvas.Render.Parameters[b]={}),T.PhyloCanvas.Render.Parameters.set(b,u[b][0].Text,d)))};return function(u){if(this.getRoot=function(){return M},this.getLevels=function(){return x},this.getNewickLen=function(){return f},this.getValidate=function(){return w},u.phylogeny&&u.phylogeny[0]&&u.phylogeny[0].clade&&(M=R(u.phylogeny[0].clade[0])),u.phylogeny&&u.phylogeny[0]&&u.phylogeny[0].render&&u.phylogeny[0].render[0]){var d=u.phylogeny[0].render[0];if(d&&d.styles){var b=d.styles[0];for(var P in b)if(P!="_children"&&P!="Text")if(b[P][0].type&&b[P][0].type=="radialGradient"&&Lt.svg)b[P][0].name=P,T.PhyloCanvas.Render.Style[P]=b[P][0],T.PhyloCanvas.Render.Style.jsphylosvgGradientList||(T.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),T.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(P);else{T.PhyloCanvas.Render.Style[P]||(T.PhyloCanvas.Render.Style[P]={});for(var O in b[P][0])O!="_attributes"&&O!="_children"&&O!="type"&&(T.PhyloCanvas.Render.Style[P][O.replace("_","-")]=b[P][0][O])}}if(d&&d.parameters&&N(d.parameters[0]),d&&d.charts){var H=d.charts[0];for(var P in H)if(P!="_children"&&P!="Text")for(var O in H[P])H[P][O].type=="binary"?(H[P][O].chart=P,T.PhyloCanvas.Render.Parameters.binaryCharts.push(H[P][O])):H[P][O].type=="integratedBinary"?(H[P][O].chart=P,T.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(H[P][O])):H[P][O].type=="bar"&&(H[P][O].chart=P,T.PhyloCanvas.Render.Parameters.barCharts.length==1&&T.PhyloCanvas.Render.Parameters.barCharts.shift(),T.PhyloCanvas.Render.Parameters.barCharts.push(H[P][O]))}}M=p(M)}}();T.PhyloCanvas.PhyloxmlParse.prototype={};T.PhyloCanvas.NexmlParse=function(){var x=0,f=0,M,w,R,p,N=function(b,P,O){var H=new T.PhyloCanvas.Node;O&&(H.level=O.level+1);for(var I=0;I<R.length;I++)if(R[I].source==b.id)for(var L=0;L<p.length;L++)R[I].target==p[L].id&&H.children.push(N(p[L],R[I].length,H));if(H&&H.level>0&&!H.len&&(H.len=1),P&&(H.len=T.Common.roundFloat(P,4),H.len==0&&(H.len=1e-4)),b.label&&(H.type="label",H.name=b.label,b.style&&(H.style=b.style)),b.color){let F=b.color.replace(/[a-z%\s\(\)]/g,"").split(",");H.red=F[0],H.green=F[1],H.blue=F[2]}else{let F=T.PhyloCanvas.Render.Style.line.stroke.replace(/[a-z%\s\(\)]/g,"").split(",");H.red=F[0],H.green=F[1],H.blue=F[2]}return H},u=function(b,P){if(b.children&&b.children.length)for(var O=0;O<b.children.length;O++){var H=b.children[O];H.newickLen=Math.round((H.len+b.newickLen)*1e4)/1e4,H.level>x&&(x=H.level),H.newickLen>f&&(f=H.newickLen),H.children.length>0&&u(H,b)}return b},d=function(b,P){for(var O in b)O!="_children"&&O!="Text"&&(O=="rectangular"||O=="circular"?d(b[O][0],O):(T.PhyloCanvas.Render.Parameters[O]||(T.PhyloCanvas.Render.Parameters[O]={}),T.PhyloCanvas.Render.Parameters.set(O,b[O][0].Text,P)))};return function(b,P){this.getRoot=function(){return M},this.getLevels=function(){return x},this.getNewickLen=function(){return f},this.getValidate=function(){return w},P.tree&&b.trees[0]&&b.trees[0].tree[P.tree-1]?(R=b.trees[0].tree[P.tree-1].edge,p=b.trees[0].tree[P.tree-1].node):(R=b.trees[0].tree[0].edge,p=b.trees[0].tree[0].node);for(var O=0;O<p.length;O++){var H=0;if(p[O].root&&p[O].root=="true"){M=p[O];break}for(var I=0;I<R.length;I++)R[I].target==p[O].id&&H++;if(H==0){M=p[O];break}}M?(M=N(M),M=u(M)):w="Error. Currently, only rooted NeXML trees are supported."}}();T.PhyloCanvas.NexmlParse.prototype={};T.PhyloCanvas.NexmlJsonParse=function(){var x=0,f=0,M,w,R=[],p=[],N=function(b,P,O){var H=new T.PhyloCanvas.Node;O&&(H.level=O.level+1);for(var I=0;I<R.length;I++)if(R[I].source==b.id)for(var L=0;L<p.length;L++)R[I].target==p[L].id&&H.children.push(N(p[L],R[I].length,H));return P&&(H.len=T.Common.roundFloat(P,4),H.len==0&&(H.len=1e-4)),b.label&&(H.type="label",H.name=b.label,b.accession&&(H.accession=b.accession),b.style&&(H.style=b.style),b.bgStyle&&(H.bgStyle=b.bgStyle)),b.chart&&(H.chart=b.chart),H&&H.level>1&&(H.len||(w="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),H},u=function(b,P){if(b.children&&b.children.length)for(var O=0;O<b.children.length;O++){var H=b.children[O];H.newickLen=Math.round((H.len+b.newickLen)*1e4)/1e4,H.level>x&&(x=H.level),H.newickLen>f&&(f=H.newickLen),H.children.length>0&&u(H,b)}return b},d=function(b,P){for(var O in b)O!="_children"&&O!="Text"&&(O=="rectangular"||O=="circular"?d(b[O],O):(T.PhyloCanvas.Render.Parameters[O]||(T.PhyloCanvas.Render.Parameters[O]={}),T.PhyloCanvas.Render.Parameters.set(O,b[O],P)))};return function(b){this.getRoot=function(){return M},this.getLevels=function(){return x},this.getNewickLen=function(){return f},this.getValidate=function(){return w};var P=b.nexmlJson.nexml,O=P.render;if(O&&O.styles){var H=O.styles;for(var I in H)if(I!="_children"&&I!="Text")if(H[I]["@attributes"].type&&H[I]["@attributes"].type=="radialGradient"&&Lt.svg)H[I].name=I,H[I].type=H[I]["@attributes"].type,T.PhyloCanvas.Render.Style[I]=H[I],T.PhyloCanvas.Render.Style.jsphylosvgGradientList||(T.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),T.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(I);else{T.PhyloCanvas.Render.Style[I]||(T.PhyloCanvas.Render.Style[I]={});for(var L in H[I]["@attributes"])L!="_attributes"&&L!="_children"&&L!="type"&&(T.PhyloCanvas.Render.Style[I][L.replace("_","-")]=H[I]["@attributes"][L])}}if(O&&O.parameters&&d(O.parameters),O&&O.charts){var F=O.charts;for(var I in F)F[I]["@attributes"].chart=I,F[I]["@attributes"].type=="binary"?T.PhyloCanvas.Render.Parameters.binaryCharts.push(F[I]["@attributes"]):F[I]["@attributes"].type=="integratedBinary"?T.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(F[I]["@attributes"]):F[I]["@attributes"].type=="bar"&&T.PhyloCanvas.Render.Parameters.barCharts.push(F[I]["@attributes"])}if(b.tree&&P.trees[0]&&P.trees[0].tree[b.tree-1])R=P.trees[0].tree[b.tree-1].edge,p=P.trees[0].tree[b.tree-1].node;else{for(var I=0;I<P.trees.tree.edge.length;I++)R.push(P.trees.tree.edge[I]["@attributes"]);for(var I=0;I<P.trees.tree.node.length;I++){var j=P.trees.tree.node[I]["@attributes"];j.label&&(j.chart=P.trees.tree.node[I].chart),p.push(j)}}for(var I=0;I<p.length;I++)p[I].root&&p[I].root=="true"&&(M=p[I]);M?(M=N(M),M=u(M)):w="Error. Currently, only rooted NeXML trees are supported."}}();T.PhyloCanvas.NexmlParse.prototype={};T.PhyloCanvas.Render={};T.PhyloCanvas.Render.Style={line:{stroke:"rgb(0,0,0)","stroke-width":1},text:{"font-family":"Verdana","font-size":12,"text-anchor":"start"},path:{stroke:"rgb(0,0,0)","stroke-width":1},connectedDash:{stroke:"rgb(200,200,200)","stroke-dasharray":". "},textSecantBg:{fill:"#EEE",stroke:"#DDD"},highlightedEdgeCircle:{fill:"black",stroke:"black"},barChart:{fill:"#003300",stroke:"#DDD"},getStyle:function(x,f){return this[x]?this[x]:this[f]}};T.PhyloCanvas.Render.Parameters={jsOverride:0,Rectangular:{bufferX:200,paddingX:10,paddingY:20,bufferInnerLabels:10,bufferOuterLabels:5,minHeightBetweenLeaves:10,alignPadding:0,alignRight:!1,showScaleBar:!1},Circular:{bufferRadius:.33,bufferAngle:20,initStartAngle:160,innerCircleRadius:0,minHeightBetweenLeaves:5,bufferInnerLabels:2,bufferOuterLabels:5},binaryCharts:[],integratedBinaryCharts:[],barCharts:[],binaryChartBufferInner:5,binaryChartBufferSiblings:.01,binaryChartThickness:15,binaryChartDisjointed:!1,barChartBufferInner:3,barChartHeight:50,barChartWidth:.5,set:function(x,f,M){this.jsOverride||(M?M=="circular"?this.Circular[x]=parseFloat(f):M=="rectangular"&&(this.Rectangular[x]=parseFloat(f)):this[x]=parseFloat(f))}};T.PhyloCanvas.Render.Line=function(){return function(x,f,M,w,R,p,N,u){this.type="line",this.attr=T.PhyloCanvas.Render.Style.line,this.attr.stroke=["rgb(",R,",",p,",",N,")"].join(""),this.x1=x,this.x2=f,this.y1=M,this.y2=w,u&&(T.Common.apply(this,u),u.attr&&(this.attr=u.attr))}}();T.PhyloCanvas.Render.Text=function(){return function(x,f,M,w){this.type="text",this.attr=T.PhyloCanvas.Render.Style.text,this.x=x,this.y=f,this.text=M,w&&(T.Common.apply(this,w),w.attr&&(this.attr=w.attr))}}();T.PhyloCanvas.Render.Path=function(){var x=T.PhyloCanvas.Render.Style.path;return function(f,M){this.type="path",this.attr=T.PhyloCanvas.Render.Style.path,this.path=f,M&&(T.Common.apply(this,M),M.attr&&(this.attr=M.attr))}}();T.PhyloCanvas.Render.Circle=function(){return function(x,f,M,w){this.type="circle",this.x=x,this.y=f,this.radius=M,w&&(T.Common.apply(this,w),w.attr&&(this.attr=w.attr))}}();T.PhyloCanvas.Render.SVG=function(){var x,f;return function(M,w,R){x=M,this.canvasSize=[w,R],this.svg=Lt(M,this.canvasSize[0],this.canvasSize[1])}}();T.PhyloCanvas.Render.SVG.prototype={render:function(){for(var x=this.phylogramObject.getDrawInstructs(),f=0;f<x.length;f++)if(x[f].type=="line")var M=this.svg.path(["M",x[f].x1,x[f].y1,"L",x[f].x2,x[f].y2]).attr(T.PhyloCanvas.Render.Style.line);else if(x[f].type=="path")var w=this.svg.path(x[f].path).attr(x[f].attr);else if(x[f].type=="circle")var w=this.svg.circle(x[f].x,x[f].y,x[f].radius).attr({stroke:"black",fill:"black"});else{var R=this.svg.text(x[f].x,x[f].y,x[f].text).attr(T.PhyloCanvas.Render.Style.text);x[f].attr&&R.attr(x[f].attr),x[f].rotate&&R.rotate(x[f].rotate);var p=R.getBBox(),N=Math.sqrt(p.height*p.height+p.width*p.width)}},draw:function(x){var f,M;if(x.type=="line")f=this.svg.path(["M",x.x1,x.y1,"L",x.x2,x.y2]).attr(T.PhyloCanvas.Render.Style.line);else if(x.type=="path")f=this.svg.path(x.path).attr(x.attr);else if(x.type=="circle")f=this.svg.circle(x.x,x.y,x.radius).attr({stroke:"black",fill:"black"});else if(x.type=="text"){f=this.svg.text(x.x,x.y,x.text).attr(T.PhyloCanvas.Render.Style.text),x.attr&&f.attr(x.attr),x.rotate&&f.rotate(x.rotate);var w=f.getBBox();M=Math.sqrt(w.height*w.height+w.width*w.width)}return[f,M]}};T.PhyloCanvas.Render.Phylogram=function(){var x,f=T.PhyloCanvas.Render.Parameters.Rectangular,M,w,R,p,N,u,d=!0,b=0,P=0,O,H,I,L,F,j,re,$,U,oe,he,ge,G=[],fe=function(W){return W+Math.round(W/4)},de=function(W,Ce,Se,ee){return["M",W,Ce,"L",Se,Ce,"L",Se,ee,"L",W,ee,"Z"]},q=function(W,Ce){if(W.len&&d==!1&&W.children.length==0&&(b=T.Common.roundFloat(b+p,4)),W.children.length>0){var Se=[],ee,X,s,l,n,t,r;if(W.len&&(ee=Ce,X=Ce=T.Common.roundFloat(Ce+R*W.len,4),s=b+W.getMidbranchPosition(d)*p,l=s,n=W.red,t=W.green,r=W.blue,x.draw(new T.PhyloCanvas.Render.Line(ee,X,s,l,n,t,r))),W.name){var a={};if(a=T.PhyloCanvas.Render.Style.getStyle("bootstrap","text"),W.font_color_hex?a.fill=W.font_color_hex:a.fill="#000000",W.uri&&(a.href=W.uri),W.description&&(a.title=W.description),W.level==0)var h=b+W.getMidbranchPosition(d)*p;else var h=l;x.draw(new T.PhyloCanvas.Render.Text((X||Ce)+5,h,W.name,{attr:a}))}if(W.children&&W.children.length)for(var g=0;g<W.children.length;g++){var v=W.children[g];Se.push(q(v,Ce))}for(var B=[],g=0;g<Se.length;g++)Se[g][0]&&B.push(Se[g][0]),Se[g][1]&&B.push(Se[g][1]);for(var k=Math.min.apply(null,B),D=Math.max.apply(null,B),V=(k+D)/2,Q="",te="",ue="",me=0,g=0;g<W.children.length;++g){var xe=W.children[g];if(g==0)Q=xe.red,te=xe.green,ue=xe.blue;else if(Q==xe.red&&te==xe.green&&ue==xe.blue)me=1;else{me=0;break}}me==0?T.PhyloCanvas.Render.Style.line.stroke="black":(n=W.children[0].red,t=W.children[0].green,r=W.children[0].blue,T.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",t,",",r,")"].join("")),W.children.length==2?(n=W.children[0].red,t=W.children[0].green,r=W.children[0].blue,T.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",t,",",r,")"].join(""),x.draw(new T.PhyloCanvas.Render.Path(["M",Ce+1e-4,k,"L",Ce,k,"L",Ce,V],{attr:T.PhyloCanvas.Render.Style.line})),n=W.children[1].red,t=W.children[1].green,r=W.children[1].blue,T.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",t,",",r,")"].join(""),x.draw(new T.PhyloCanvas.Render.Path(["M",Ce,V,"L",Ce,D,"L",Ce+1e-4,D],{attr:T.PhyloCanvas.Render.Style.line}))):x.draw(new T.PhyloCanvas.Render.Path(["M",Ce+1e-4,k,"L",Ce,k,"L",Ce,D,"L",Ce+1e-4,D],{attr:T.PhyloCanvas.Render.Style.line}))}else{if(ee=Ce,X=T.Common.roundFloat(Ce+R*W.len,2),s=b,l=b,n=W.red,t=W.green,r=W.blue,W.y=b,G.push(W),x.draw(new T.PhyloCanvas.Render.Line(ee,X,s,l,n,t,r)),f.alignRight&&x.draw(new T.PhyloCanvas.Render.Path(["M",X,s,"L",f.alignPadding+N,l],{attr:T.PhyloCanvas.Render.Style.connectedDash})),W.name){var a={};W.style&&(a=T.PhyloCanvas.Render.Style.getStyle(W.style,"text")),W.font_color_hex?a.fill=W.font_color_hex:a.fill="#000000",a["text-anchor"]="start",W.uri&&(a.href=W.uri),W.description&&(a.title=W.description);var be=x.draw(new T.PhyloCanvas.Render.Text(f.alignRight?N+f.bufferInnerLabels+f.alignPadding:X+f.bufferInnerLabels,l,W.name,{attr:a}));P=Math.max(be[1],P),T.PhyloCanvas.Render.Parameters.mouseRollOver&&T.Common.addRaphEventHandler(be[0],"mouseover",T.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:x,node:W,x:X,y:l,textEl:be[0]}),T.PhyloCanvas.Render.Parameters.mouseRollOut&&T.Common.addRaphEventHandler(be[0],"mouseout",T.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:x,node:W,x:X,y:l,textEl:be[0]}),T.PhyloCanvas.Render.Parameters.onClickAction&&T.Common.addRaphEventHandler(be[0],"click",T.PhyloCanvas.Render.Parameters.onClickAction,{svg:x,node:W,x:X,y:l,textEl:be[0]})}d&&(d=!1)}return[s,l]},ye=function(){y=b+p,L=0,F=f.showScaleBar*R,x.draw(new T.PhyloCanvas.Render.Line(L,F,y,y)),x.draw(new T.PhyloCanvas.Render.Text((L+F)/2,y-8,f.showScaleBar))},ve=function(W,Ce,Se){for(var ee=(Se&&Se.bufferInner?Se.bufferInner:0)|T.PhyloCanvas.Render.Parameters.binaryChartBufferInner,X=(Se&&Se.bufferSiblings?Se.bufferSiblings*p:0)|(T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?p*T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),s=(Se&&Se.thickness?Se.thickness:0)|T.PhyloCanvas.Render.Parameters.binaryChartThickness,l,n=0;n<G.length;n++){var t=G[n];x.draw(new T.PhyloCanvas.Render.Path(de(W+ee,t.y-p/2+X/2,W+ee+s,t.y+p/2-X/2),{attr:T.PhyloCanvas.Render.Style.getStyle(t.chart[Ce],"textSecantBg")}))}return W+ee+s},ke=function(W,Ce,Se){for(var ee=[],X,s=Se&&Se.bufferInner?Se.bufferInner:0|T.PhyloCanvas.Render.Parameters.barChartBufferInner,l=Se&&Se.height?Se.height:0|T.PhyloCanvas.Render.Parameters.barChartHeight,n=Se&&Se.width?Se.width<1?p*Se.width:Se.width:0|(T.PhyloCanvas.Render.Parameters.barChartWidth<1?p*T.PhyloCanvas.Render.Parameters.barChartWidth:T.PhyloCanvas.Render.Parameters.barChartWidth),t=0,r=0;r<G.length;r++)ee.push(G[r].chart[Ce]);X=Math.max.apply(null,ee),t=T.Common.roundFloat(l/X,4);for(var r=0;r<G.length;r++){var a=G[r];x.draw(new T.PhyloCanvas.Render.Path(de(W+s,a.y-n/2,W+s+t*a.chart[Ce],a.y+n/2),{attr:T.PhyloCanvas.Render.Style.getStyle(a.chart[Ce],"barChart")}))}return W+s+l};return function(W,Ce){this.getCanvasSize=function(){return[M,w]},this.getRoot=function(){return Ce.getRoot()},Ce.getValidate()&&x.draw(0,0,Ce.getValidate()),d=!0,x=W;var Se=Ce.getRoot(),ee=Ce.getNewickLen();if(M=x.canvasSize[0],w=x.canvasSize[1],oe=f.bufferX,he=f.paddingX,ge=f.paddingY,u=f.minHeightBetweenLeaves,b=ge,R=Math.round((M-oe-he*2)/ee),p=Math.round((w-ge*2)/(f.showScaleBar?Se.getCountAllChildren():Se.getCountAllChildren()-1)),p<u&&(p=u),N=Math.round(M-oe-he*2),(T.PhyloCanvas.Render.Parameters.binaryCharts.length||T.PhyloCanvas.Render.Parameters.barCharts.length)&&(f.alignRight=!0),q(Se,he),f.showScaleBar&&ye(),O=N+P+f.bufferInnerLabels,T.PhyloCanvas.Render.Parameters.binaryCharts.length){var X=T.PhyloCanvas.Render.Parameters.binaryCharts;for(var s in X)O=ve(O,X[s].chart,X[s])}if(T.PhyloCanvas.Render.Parameters.barCharts.length){var l=T.PhyloCanvas.Render.Parameters.barCharts;for(var s in l)I=ke(O,l[s].chart,l[s])}G=[],typeof bgLabelsHold!="undefined"&&(bgLabelsHold=[])}}();T.PhyloCanvas.Render.Phylogram.prototype={};T.PhyloCanvas.Render.CircularPhylogram=function(){var x,f=T.PhyloCanvas.Render.Parameters.Circular,M,w,R,p,N,u,d,b=!0,P=0,O,H,I,L=[],F=[],j,re,$,U=0,oe,he=Math.PI/180;function ge(ee,X){return X+=oe,[T.Common.roundFloat(O+ee*Math.sin(X*he),4),T.Common.roundFloat(H+ee*Math.cos(X*he),4)]}function G(ee){var X=q(90-ee-oe);if(X>90&&X<270){X+=180;var s="end"}else var s="start";return[X,s]}function fe(ee,X,s,l){var n=ge(ee,X),t=ge(ee,s),r=[],a,h=0;return Math.abs(q(s-X))>180?a=1:a=-1,l&&l.invertSecant&&(a*=-1,h=1),l&&l.noMove||r.push("M"),r.push(n[0],n[1],"A",ee,ee,0,a<1?0:1,h,t[0],t[1]),r}function de(ee,X,s,l){var n=[],t=ge(X,ee),r=ge(s,ee);return l&&l.noMove||n.push("M"),n.push(t[0],t[1],"L",r[0],r[1]),n}function q(ee){for(;ee>360||ee<0;)ee>360?ee-=360:ee<0&&(ee+=360);return ee}function ye(ee,X,s,l){if(!X&&ee.length>1)var l=ee[3],s=ee[2],X=ee[1],ee=ee[0];var n=ke("M",fe(ee,s,l,{noMove:1,invertSecant:0}),"L",fe(X,l,s,{noMove:1,invertSecant:1}),"Z");return n}function ve(ee,X){if(X=X,ee.len&&(b?P=re||1:ee.children.length==0&&(P=T.Common.roundFloat(P+N,4))),ee.children.length>0){var s=[],l,n,t,r;if(l=X,n=X+=T.Common.roundFloat(p*ee.len,4),ee.name,ee.children&&ee.children.length)for(var a=0;a<ee.children.length;a++){var h=ee.children[a],g=ve(h,X);g>0&&s.push(g)}var v=T.Common.roundFloat(Math.min.apply(null,s),4),B=T.Common.roundFloat(Math.max.apply(null,s),4);ee.level!=0&&x.draw(new T.PhyloCanvas.Render.Path(ke("M",ge(X+.01,v),"L",fe(X,v,B,{noMove:!0}),"L",ge(X+.01,B)))),ee.len&&(t=T.Common.roundFloat(v+(B-v)/2,4),x.draw(new T.PhyloCanvas.Render.Path(de(t,l,n))))}else if(ee.y=P,L.push(ee),l=X,n=X=T.Common.roundFloat(X+p*ee.len),t=P,x.draw(new T.PhyloCanvas.Render.Path(de(t,l,n))),x.draw(new T.PhyloCanvas.Render.Path(de(t,n,I),{attr:T.PhyloCanvas.Render.Style.connectedDash})),ee.name){var k=ge(I+f.bufferInnerLabels,t),D=G(t),V=D[0],Q=D[1],te={};ee.style&&T.Common.apply(te,T.PhyloCanvas.Render.Style.getStyle(ee.style,"text")),ee.font_color_hex?te.fill=ee.font_color_hex:te.fill="#000000",te["text-anchor"]=Q,ee.uri&&(te.href=ee.uri),ee.description&&(te.title=ee.description);var ue=x.draw(new T.PhyloCanvas.Render.Text(k[0],k[1],ee.name,{attr:te,rotate:[V,k[0],k[1]]}));ee.bgStyle&&F.push([ee.bgStyle,t]);var k=ge(n,t);T.PhyloCanvas.Render.Parameters.mouseRollOver&&T.Common.addRaphEventHandler(ue[0],"mouseover",T.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:x,node:ee,x:k[0],y:k[1],textEl:ue[0]}),T.PhyloCanvas.Render.Parameters.mouseRollOut&&T.Common.addRaphEventHandler(ue[0],"mouseout",T.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:x,node:ee,x:k[0],y:k[1],textEl:ue[0]}),T.PhyloCanvas.Render.Parameters.onClickAction&&T.Common.addRaphEventHandler(ue[0],"click",T.PhyloCanvas.Render.Parameters.onClickAction,{svg:x,node:ee,x:k[0],y:k[1],textEl:ue[0]}),U=Math.max(ue[1],U)}return b&&(b=!1),t}function ke(ee){for(var X=ee,s=1;s<arguments.length;s++)X=X.concat(arguments[s]);return X}function W(){var ee=[];if(F.length>0){if(T.PhyloCanvas.Render.Style.jsphylosvgGradientList)for(var X=0;X<T.PhyloCanvas.Render.Style.jsphylosvgGradientList.length;X++){var s=T.PhyloCanvas.Render.Style.jsphylosvgGradientList[X],l=T.Common.createGradientEl(s,T.PhyloCanvas.Render.Style[s],[O,H,I+U+f.bufferOuterLabels]);x.svg.defs.appendChild(l)}for(var X=0;X<F.length;X++){if(X!=F.length-1&&F[X][0]==F[X+1][0]){F[X+1][2]=F[X][2]?F[X][2]:F[X][1];continue}var ee=ye(I,I+U+f.bufferOuterLabels,F[X][2]?F[X][2]-N/2:F[X][1]-N/2,F[X][1]+N/2),n=T.PhyloCanvas.Render.Style.getStyle(F[X][0],"textSecantBg"),t=x.draw(new T.PhyloCanvas.Render.Path(ee,{attr:n.type?{}:n}));n.type&&n.type=="radialGradient"&&t[0].node.setAttribute("fill","url(#"+n.name+")"),n.type&&n.type=="radialGradient"&&t[0].node.setAttribute("stroke","none"),t[0].toBack()}}var ee=ye(I,I+U+f.bufferOuterLabels,(re||1)-N/2,360-N/2),t=x.draw(new T.PhyloCanvas.Render.Path(ee,{attr:T.PhyloCanvas.Render.Style.textSecantBg}));return t[0].toBack(),I+U+f.bufferOuterLabels}function Ce(ee,X,s){for(var l=s&&s.bufferInner?parseFloat(s.bufferInner):T.PhyloCanvas.Render.Parameters.binaryChartBufferInner,n=(s&&s.bufferSiblings?s.bufferSiblings*N:0)|(T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?N*T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:T.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),t=s&&s.thickness?parseFloat(s.thickness):T.PhyloCanvas.Render.Parameters.binaryChartThickness,r=(s&&s.disjointed?s.disjointed:!1)|T.PhyloCanvas.Render.Parameters.binaryChartDisjointed,a=s&&s.isInternal?s.isInternal:!1,h=!0,g,v=0;v<L.length;v++){var B=L[v];if((!L[v+1]||B.chart[X]!==L[v+1].chart[X]||r)&&B.chart[X]!="none"){var k=T.PhyloCanvas.Render.Style.getStyle(B.chart[X],"textSecantBg");if(a)var D=[I-l-t,I-l,(g||B.y)-N/2+(h&&!r?0:n/2),B.y+N/2-(v==L.length-1&&!r?0:n/2)];else var D=[ee+l,ee+l+t,(g||B.y)-N/2+(h&&!r?0:n/2),B.y+N/2-(v==L.length-1&&!r?0:n/2)];if(k.label){var V=T.PhyloCanvas.Render.Style.getStyle(k.labelStyle,"text"),Q=ge((D[0]+D[1])/2,(D[2]+D[3])/2),te=G((D[2]+D[3])/2),ue=q(te[0]+(V.rotate?parseFloat(V.rotate):0)),me=q(90-(D[2]+D[3])/2-oe);me>90&&me<270&&(ue+=180),V["text-anchor"]||(V["text-anchor"]="middle"),B.font_color_hex?k.fill=B.font_color_hex:k.fill="#000000";var xe=x.draw(new T.PhyloCanvas.Render.Text(Q[0],Q[1],k.label,{attr:V,rotate:ue}));xe[0].toBack()}if(k.borderStyle){var be=T.PhyloCanvas.Render.Style.getStyle(k.borderStyle,"textSecantBg"),Ae=[I,be.fullsize?D[1]:D[0],D[2],D[3]],we=x.draw(new T.PhyloCanvas.Render.Path(ye(Ae),{attr:be}));we[0].toBack()}var Ne=x.draw(new T.PhyloCanvas.Render.Path(ye(D),{attr:k}));Ne[0].toBack(),g=0,h=!1}else g||(g=B.y),B.chart[X]=="none"&&(g=0);h=!1}return a?ee:ee+l+t}function Se(ee,X,s){for(var l=[],n,t=s&&s.bufferInner?parseFloat(s.bufferInner):T.PhyloCanvas.Render.Parameters.barChartBufferInner,r=s&&s.height?parseFloat(s.height):T.PhyloCanvas.Render.Parameters.barChartHeight?T.PhyloCanvas.Render.Parameters.barChartHeight:0,a=s&&s.width?parseFloat(s.width)<1?N*parseFloat(s.width):parseFloat(s.width):0|(T.PhyloCanvas.Render.Parameters.barChartWidth<1?N*T.PhyloCanvas.Render.Parameters.barChartWidth:T.PhyloCanvas.Render.Parameters.barChartWidth),h=0,g=0;g<L.length;g++)l.push(L[g].chart[X]);n=Math.max.apply(null,l),h=T.Common.roundFloat(r/n,4);for(var g=0;g<L.length;g++){var v=L[g];v.chart[X]>0&&x.draw(new T.PhyloCanvas.Render.Path(ye(ee+t,ee+t+h*v.chart[X],v.y-a/2,v.y+a/2),{attr:T.PhyloCanvas.Render.Style.getStyle(v.chart[X],"barChart")}))}return ee+t+r}return function(ee,X,s){if(this.getCanvasSize=function(){return[M,w]},this.getRoot=function(){return X.getRoot()},X.getValidate()){ee.draw({type:"text",x:0,y:ee.canvasSize[1]/3,text:X.getValidate()});return}x=ee;var l=X.getRoot(),n=X.getNewickLen();if(M=x.canvasSize[0],w=x.canvasSize[1],O=M/2,H=w/2,R=Math.min.apply(null,[M,w]),s=f.bufferRadius>1?f.bufferRadius:T.Common.roundFloat(R*f.bufferRadius,4),re=f.bufferAngle,d=f.innerCircleRadius,u=f.minHeightBetweenLeaves,oe=f.initStartAngle,I=Math.round((R-s-d)/2),p=(I-d)/n,N=T.Common.roundFloat((360-re)/l.getCountAllChildren(),4),ve(l,d),$=I+U+f.bufferOuterLabels,T.PhyloCanvas.Render.Parameters.integratedBinaryCharts.length){var t=T.PhyloCanvas.Render.Parameters.integratedBinaryCharts;for(var r in t){var a=t[r].bufferInner?t[r].bufferInner:T.PhyloCanvas.Render.Parameters.binaryChartBufferInner,h=t[r].thickness?t[r].thickness:T.PhyloCanvas.Render.Parameters.binaryChartThickness;$=Ce($-h-a,t[r].chart,t[r])}}if($=W(),T.PhyloCanvas.Render.Parameters.binaryCharts.length){var g=T.PhyloCanvas.Render.Parameters.binaryCharts;for(var r in g)$=Ce($,g[r].chart,g[r])}if(T.PhyloCanvas.Render.Parameters.barCharts.length){var v=T.PhyloCanvas.Render.Parameters.barCharts;for(var r in v)$=Se($,v[r].chart,v[r])}L=[],F=[]}}();T.PhyloCanvas.Render.CircularPhylogram.prototype={};var bt=function(){var x=function(w){if(!!w&&typeof w=="object"){let R=function(){};return R.prototype=w,new R}},f=function(w){var R="";!!w&&typeof w=="string"&&(R=w);var p=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return p.test(R)},M={xmlToJSON:function(w){try{let d=function(I){return I.replace(/^\s+|\s+$/gm,"")},b=function(I){var L=/-/g,F=String(I).replace(L,"_");return F},P=function(I,L){if(L.attributes.length>0){var F=L.attributes.length-1,j;I._attributes=[];do j=String(b(L.attributes[F].name)),I._attributes.push(j),I[j]=d(L.attributes[F].value);while(F--)}},O=function(I){I.getNodeByAttribute=function(L,F){if(this.length>0){var j,re=this.length-1;try{do if(j=this[re],j[L]==F)return j;while(re--)}catch($){return!1}return!1}},I.contains=function(L,F){if(this.length>0){var j=this.length-1;try{do if(this[j][L]==F)return!0;while(j--)}catch(re){return!1}return!1}},I.indexOf=function(L,F){var j=-1;if(this.length>0){var re=this.length-1;try{do this[re][L]==F&&(j=re);while(re--)}catch($){return-1}return j}},I.SortByAttribute=function(L,F){if(this.length){let j=function($,U){var oe=$[U];return oe=f(oe)?parseFloat(oe):oe,oe},re=function($,U){var oe=0,he,ge;return he=j($,L),ge=j(U,L),he<ge?oe=-1:ge<he&&(oe=1),F&&(oe=F.toUpperCase()=="DESC"?0-oe:oe),oe};this.sort(re)}},I.SortByValue=function(L){if(this.length){let F=function(re){var $=re.Text;return $=f($)?parseFloat($):$,$},j=function(re,$){var U=0,oe,he;return oe=F(re),he=F($),oe<he?U=-1:he<oe&&(U=1),L&&(U=L.toUpperCase()=="DESC"?0-U:U),U};this.sort(j)}},I.SortByNode=function(L,F){if(this.length){let j=function($,U){var oe=$[U][0].Text;return oe=f(oe)?parseFloat(oe):oe,oe},re=function($,U){var oe=0,he,ge;return he=j($,L),ge=j(U,L),he<ge?oe=-1:ge<he&&(oe=1),F&&(oe=F.toUpperCase()=="DESC"?0-oe:oe),oe};this.sort(re)}}},H=function(I,L){var F,j,re,$="";if(!L)return null;if(L.attributes.length>0&&P(I,L),I.Text="",L.hasChildNodes()){var U=L.childNodes.length-1,oe=0;do switch(j=L.childNodes[oe],j.nodeType){case 1:I._children=[],F=j.localName?j.localName:j.baseName,F=b(F),$!=F&&I._children.push(F),I[F]||(I[F]=[]),re={},I[F].push(re),j.attributes.length>0&&P(re,j),I[F].contains||O(I[F]),$=F,j.hasChildNodes()&&H(re,j);break;case 3:I.Text+=d(j.nodeValue);break;case 4:I.Text+=j.text?d(j.text):d(j.nodeValue);break}while(oe++<U)}};if(!w)return null;var R={};R.typeOf="JSXBObject";var p=w.nodeType==9?w.documentElement:w;if(R.RootName=p.nodeName||"",w.nodeType==3||w.nodeType==4)return w.nodeValue;var N=function(){var I={activate:function(){var L=[];return L&&(L.getNodesByAttribute=function(F,j){if(!!L&&L.length>0){var re=[],$,U=L.length-1;try{do $=L[U],$[F]===j&&re.push($);while(U--);return re.reverse(),re}catch(oe){return null}return null}},L.getNodeByAttribute=function(F,j){if(!!L&&L.length>0){var re,$=L.length-1;try{do if(re=L[$],re[F]===j)return re;while($--)}catch(U){return null}return null}},L.getNodesByValue=function(F){if(!!L&&L.length>0){var j=[],re,$=L.length-1;try{do re=L[$],!!re.Text&&re.Text===F&&j.push(re);while($--);return j}catch(U){return null}return null}},L.contains=function(F,j){if(!!L&&L.length>0){var re=L.length-1;try{do if(L[re][F]===j)return!0;while(re--)}catch($){return!1}return!1}},L.indexOf=function(F,j){var re=-1;if(!!L&&L.length>0){var $=L.length-1;try{do L[$][F]===j&&(re=$);while($--)}catch(U){return-1}return re}},L.SortByAttribute=function(F,j){if(!!L&&L.length>0){let re=function(U,oe){var he=U[oe];return he=bam.validation.isNumeric(he)?parseFloat(he):he,he},$=function(U,oe){var he,ge;he=re(U,F),ge=re(oe,F);var G=he<ge?-1:ge<he?1:0;return j&&(G=j.toUpperCase()==="DESC"?0-G:G),G};L.sort($)}},L.SortByValue=function(F){if(!!L&&L.length>0){let j=function($){var U=$.Text;return U=bam.validation.isNumeric(U)?parseFloat(U):U,U},re=function($,U){var oe,he;oe=j($),he=j(U);var ge=oe<he?-1:he<oe?1:0;return F&&(ge=F.toUpperCase()==="DESC"?0-ge:ge),ge};L.sort(re)}},L.SortByNode=function(F,j){if(!!L&&L.length>0){let re=function(U,oe){var he=U[oe][0].Text;return he=bam.validation.isNumeric(he)?parseFloat(he):he,he},$=function(U,oe){var he,ge;he=re(U,F),ge=re(oe,F);var G=he<ge?-1:ge<he?1:0;return j&&(G=j.toUpperCase()==="DESC"?0-G:G),G};L.sort($)}}),L}};return I}(),u=function(){var I=x(N);return I.activate()};return H(R,p),w=null,p=null,R}catch(d){return null}},textToXML:function(w){var R=null;try{R=document.all?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser,R.async=!1}catch(N){throw new Error("XML Parser could not be instantiated")}var p;try{document.all?p=R.loadXML(w)?R:!1:p=R.parseFromString(w,"text/xml")}catch(N){throw new Error("Error parsing XML string")}return p}};return M}();import{showSaveFilePicker as Kt}from"https://cdn.jsdelivr.net/npm/native-file-system-adapter/mod.js";var w1=function(){let x=[{name:"valapalagilaka",search:"á¹™",replace:()=>"r"},{name:"short e",search:"áº½",replace:()=>"e"},{name:"short o",search:"Ãµ",replace:()=>"o"},{name:"pá¹›á¹£á¹­hamÄtrÄ e",search:"Ãª",replace:()=>"e"},{name:"pá¹›á¹£á¹­hamÄtrÄ o",search:"Ã´",replace:()=>"o"},{name:"pá¹›á¹£á¹­hamÄtrÄ ai",search:"ÃŠ",replace:()=>"E"},{name:"pá¹›á¹£á¹­hamÄtrÄ au",search:"Ã”",replace:()=>"O"},{name:"candrabindu",search:"mÌ",replace:()=>"M"},{name:"oá¹ƒkÄras",search:"oá¹",replace:()=>"oM"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"(?:kK|gG|cC|jJ|wW|qQ|tT|dD|pP|bB)",replace:N=>N[0].slice(-1)},{name:"geminated m after h",search:"(?:Mhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rfi]|p[aA])tt|tt(?=[rvy]\\S)",replace:N=>`${N[1]}t`},{name:"geminated consonants after r",search:"([rf]\\s*)([kgcjwqdpbRnmyvl])\\2{1,2}",replace:N=>`${N[1]}${N[2]}`},{name:"final nasal variants",search:"(?:M[lSs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnNYR](?=[pPbBmdDtTnwWqQcCjJkKgG])",replace:()=>"M"},{name:"final anusvÄra variants",search:"M?[mN](?!\\S)|n(?=\\s+[tdn])|Y(?=\\s+[jc])",replace:()=>"M"},{name:"visarga aá¸¥ before voiced consonants",search:"(?<!\\sB)(?:a[Hr]|[o])(?=\\s+['gGjJqQdDnbBmrylvh])",replace:()=>"aH"},{name:"visarga aá¸¥ before vowels",search:"aH(?=\\s+[AiIeuUof])",replace:()=>"a"},{name:"visarga aá¸¥ before unvoiced consonants and space + anusvÄra",search:"o\\s+(?=[kKcCwWtTpPszSM])",replace:()=>"aH a"},{name:"visarga Äá¸¥ variants",search:"AH(?=\\s+[aAiIeEuUogGjJqQdDbBnmyrlvh])",replace:()=>"A"},{name:"other visarga variants",search:"H?[rszS](?!\\S)",replace:()=>"H"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"z(?=[kK])|s(?=s)",replace:()=>"H"},{name:"final au/Äv",search:"Av(?!\\S)",replace:()=>"O"},{name:"final su",search:"(?<=[sz])v(?=\\s+[aAiIuUoOeE])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aAuUoOeE])",replace:()=>"y"},{name:"kcch/kÅ›",search:"k(\\s*)(?:S|c?C)",replace:N=>`k${N[1]}S`},{name:"cÅ›/tÅ›",search:"[tc](\\s*)S",replace:N=>`c${N[1]}C`},{name:"cch/ch",search:"([aAiIuUeEoO])C",replace:N=>`${N[1]}cC`},{name:"final t + hi",search:"d(\\s+)D(?=[iy](?:\\s|$))",replace:N=>`t${N[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aAiIeEuUoOgGdDbByrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:N=>`${N[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aAuUeEoO])",replace:()=>"i"},{name:"bhd for bdh",search:"Bd",replace:()=>"bD"}],f=[{name:"valapalagilaka",search:"á¹™",replace:()=>"r"},{name:"short e",search:"áº½",replace:()=>"e"},{name:"short o",search:"Ãµ",replace:()=>"o"},{name:"pá¹›á¹£á¹­hamÄtrÄ e",search:"Ãª",replace:()=>"e"},{name:"pá¹›á¹£á¹­hamÄtrÄ o",search:"Ã´",replace:()=>"o"},{name:"pá¹›á¹£á¹­hamÄtrÄ ai",search:"aÃ®",replace:()=>"ai"},{name:"pá¹›á¹£á¹­hamÄtrÄ au",search:"aÃ»",replace:()=>"au"},{name:"candrabindu",search:"mÌ",replace:()=>"á¹ƒ"},{name:"oá¹ƒkÄras",search:"oá¹",replace:()=>"oá¹ƒ"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"([kgcjá¹­á¸tdpb]){2}h",replace:N=>`${N[1]}h`},{name:"geminated m after h",search:"(?:á¹ƒhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rá¹›i]|p[aÄ])tt|tt(?=[rvy]\\S)",replace:N=>`${N[1]}t`},{name:"geminated consonants after r",search:"([rá¹›]\\s*)([kgcjá¹­á¸á¹‡tdnpbmyvl])\\2{1,2}",replace:N=>`${N[1]}${N[2]}`},{name:"final nasal variants",search:"(?:á¹ƒ[lá¹£s]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mná¹…Ã±á¹‡](?=[pbmdtná¹­á¸cjkg])",replace:()=>"á¹ƒ"},{name:"final anusvÄra variants",search:"á¹ƒ?[má¹…](?!\\S)|n(?=\\s+[tdn])|Ã±(?=\\s+[jc])",replace:()=>"á¹ƒ"},{name:"visarga aá¸¥ before voiced consonants",search:"(?:a[á¸¥r]|[o])(?=\\s+['gjá¸dnbmyrlvh])",replace:()=>"aá¸¥"},{name:"visarga aá¸¥ before vowels",search:"aá¸¥(?=\\s+[ÄiÄ«euÅ«oá¹›])",replace:()=>"a"},{name:"visarga aá¸¥ before unvoiced consonants and space + anusvÄra",search:"o\\s+(?=[kcá¹­tpÅ›á¹£sá¹ƒ])",replace:()=>"aá¸¥ a"},{name:"visarga Äá¸¥ variants",search:"Äá¸¥(?=\\s+[aÄiÄ«euÅ«ogjá¸dnbmyrlvh])",replace:()=>"Ä"},{name:"other visarga variants",search:"á¸¥?[rÅ›á¹£s](?!\\S)",replace:()=>"á¸¥"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"á¹£(?=k)|s(?=s)",replace:()=>"s"},{name:"final au/Äv",search:"Äv(?!\\S)",replace:()=>"au"},{name:"final su",search:"(?<=[sá¹£])v(?=\\s+[aÄiÄ«uÅ«oe])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aÄuÅ«eo])",replace:()=>"y"},{name:"kcch/kÅ›",search:"k(\\s*)(?:Å›|c?ch)",replace:N=>`k${N[1]}Å›`},{name:"cÅ›/tÅ›",search:"[tc](\\s*)Å›",replace:N=>`c${N[1]}ch`},{name:"cch/ch",search:"([aÄiÄ«uÅ«eo])ch",replace:N=>`${N[1]}cch`},{name:"final t + hi",search:"d(\\s+)dh(?=[iy](?:\\s|$))",replace:N=>`t${N[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aÄiÄ«euÅ«ogdbyrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:N=>`${N[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aÄuÅ«eo])",replace:()=>"i"},{name:"bhd for bdh",search:"bhd",replace:()=>"bdh"}],M={none:{name:"remove spaces",search:"\\s",replace:()=>""},collapse:{name:"collapse spaces",search:"\\s+",replace:()=>" "}},w=function(N,u){let d=u.join(""),b=[],P=[...d.matchAll(N.search)],O=0,H=null;for(let I of u){let L=O+I.length,F=I,j=0;if(H)if(H.length<=I.length)F=R(I,0,H.length,H.text),j=H.text.length-H.length,H=null;else{F=H.text.slice(0,I.length);let $=H.text.slice(I.length);H={length:H.length-I.length,text:$};continue}for(;P.length>0&&P[0].index<L;){let re=P.shift(),$=re.index-O+j,U=N.replace(re);if(re.index+re[0].length<L)F=R(F,$,re[0].length,U),j=j+U.length-re[0].length;else{let oe=I.length-$+j,he=U.slice(0,oe);F=F.slice(0,$)+he;let ge=U.slice(oe);H={length:re[0].length-oe,text:ge}}}b.push(F),O=L}return b},R=function(N,u,d,b){return N.slice(0,u)+b+N.slice(u+d)};return function(N){let u=N.map(d=>De.t(d,"iast","slp1"));for(let d of[...x,M.none])u=w(d,u);return u.map(d=>De.t(d,"slp1","iast"))}}();var Bt={smush:function(x,f){return x.toLowerCase().replace(/([á¸drmvynhs]) ([aÄiÄ«uÅ«á¹›eoÃ©Ã³])/g,"$1$2"+f).replace(/([kgcjá¹­á¸tdpb]) h/g,"$1â€Œ"+f+"h").replace(/([kgcjÃ±á¸tdnpbmrlyvÅ›á¹£sá¹™]) ([kgcjá¹­á¸tdnpbmyrlvÅ›á¹£shá¸»])/g,"$1"+f+"$2").replace(/([oÃ³eÃ©Ä]) ([á¹ƒ'])/g,"$1"+f+"$2").replace(/^á¹ƒ/,"'â€á¹ƒ").replace(/^á¸¥/,"'â€á¸¥").replace(/^_y/,"'â€y").replace(/Ã¼/g,"â€Œu").replace(/Ã¯/g,"â€Œi").replace(/_{1,2}(?=\s*)/g,function(M){if(M==="__")return"â€";if(M==="_")return"â€Œ"})},iast:function(x,f){let M=f||"devanagari";return De.t(x,M,"iast",{skip_sgml:!0})},devanagari:function(x,f){let M=f||"",w={skip_sgml:!0},R=x.replace(/á¹™/g,"r").replace(/^_Ä/,"à¤½â€à¤¾"),p=Bt.smush(R,M);return De.t(p,"iast","devanagari",w).replace(/Â¯/g,"ê£»")},malayalam:function(x,f){let M=f||"",w={skip_sgml:!0},R={à´•:"àµ¿",à´¤:"àµ½",à´¨:"àµ»",à´®:"àµ”",à´°:"àµ¼"},p=x.replace(/^_Ä/,"à´½â€à´¾"),N=Bt.smush(p,M).replace(/e/g,"áº½").replace(/o/g,"Ãµ").replace(/á¹™/g,"r").replace(/á¹/g,"á¹ƒ").replace(/á¸¿/g,"á¹ƒ").replace(/Ã­/g,"i").replace(/Ãº/g,"u").replace(/Ã©/g,"e");return De.t(N,"iast","malayalam",w).replace(/(^|[^àµ])à´°àµ(?=\S)/g,"$1àµ").replace(/([à´•à´¤à´¨à´®à´°])àµ(?![^\s\u200C,â€”â€™â€•])/g,function(d,b){return R[b]})},grantha:function(x,f){let M=f||"",w={skip_sgml:!0},R=new Map([["à´¸","î‡“"],["à´°","àµ¼"],["à´¯","î‡‹"],["à´š","î†¶"],["à´¦","î‡‚"],["à´¶","î‡’"]]),p=new RegExp("(["+[...R.keys()].join("")+"])àµ(?![^â€Œ ,â€”â€™â€•])","g"),N=x.replace(/^_Ä/,"à´½â€à´¾"),u=Bt.smush(N,M).replace(/e/g,"áº½").replace(/o/g,"Ãµ").replace(/á¹™/g,"r").replace(/á¹/g,"á¹ƒ").replace(/á¸¿/g,"á¹ƒ").replace(/Ã­/g,"i").replace(/Ãº/g,"u").replace(/Ã©/g,"e");return De.t(u,"iast","malayalam",w).replace(/(^|[^àµ])à´°àµ(?=\S)/g,"$1àµ").replace(p,(b,P)=>R.get(P)).replace(/à´•àµà´·à´¿/g,"à®•à¯à®·à®¿")},telugu:function(x,f){var M=f||"";let w={skip_sgml:!0},R=x.replace(/^_Ä/,"à°½â€à°¾"),p=Bt.smush(R,M).replace(/e/g,"áº½").replace(/o/g,"Ãµ").replace(/á¹™/g,"râ€").replace(/á¹/g,"á¹ƒ").replace(/á¸¿/g,"á¹ƒ").replace(/Ã­/g,"i").replace(/Ãº/g,"u").replace(/Ã©/g,"e");return De.t(p,"iast","telugu",w)}},Ot=function(x,f,M=!1,w="sa"){let R=Bt[f],p=x.cloneNode(!0),N=function(u,d){let b=u.childNodes;for(let P of b)if(P.nodeType!==8){if(P.nodeType===3){if(d!=="sa")continue;P.data=R(P.data,M)}else if(P.hasChildNodes()){let O=P.getAttribute("lang")||d;O==="sa"&&P.classList.contains("subst")&&K1(P,f),N(P,O)}}};return N(p,w),p},C1=function(x,f=!1){if(x.nodeType===3)return x;let M=document.createTreeWalker(x,NodeFilter.SHOW_TEXT,null,!1);if(f){let w;for(;M.nextNode();)w=M.currentNode;return w}else return M.nextNode},K1=function(x,f){if(x.firstChild.nodeType!==3&&x.lastChild.nodeType!==3)return;let M=x.childNodes,w=/^[aÄiÄ«uÅ«eoá¹›á¹á¸·á¹ƒá¸¥]/,R=/[kgá¹…cjÃ±á¹­á¸á¹‡tdnpbmyrlvá¹£Å›sh]$/,p=["Ä","i","Ä«","e","o","_","ai","au"],N=["h","k","Å›","y","g","gh","c","ch","jh","á¹­h","á¸","á¸h","t","th","d","dh","n","p","ph","bh","m","r","á¸»","v","á¹£","s"];var u=!1,d=[],b=[];let P=M[0].nodeType===3;for(let O of M){if(O.nodeType>3)continue;let H=O.textContent.trim();if(H!==""){if(H==="a"){O.textContent="";continue}if(H.match(R)){let I=C1(O,!0);I.textContent=I.textContent.replace(/\s+$/,"")+"a",f==="telugu"&&N.indexOf(H)>=0&&d.push(O)}if(O===x.lastChild&&O.nodeType===3){let I=document.createElement("span");I.appendChild(O.cloneNode(!1)),x.replaceChild(I,O),O=I,O.classList.add("aalt")}else P&&H.match(w)&&O.classList.add("aalt");switch(f){case"devanagari":(H==="i"||H==="Ã©")&&b.unshift(O);break;case"grantha":case"malayalam":if(H==="e"||H==="ai")b.unshift(O);else if(H==="o"){let I=O.cloneNode(!0);_1("o","e",I),b.unshift(I),_1("o","Ä",O)}break;case"telugu":!u&&p.indexOf(H)>=0&&(u=!0);break}}}for(let O of b)x.insertBefore(O,x.firstChild);if(u)for(let O of d){let H=C1(O,!0);H.textContent=H.textContent+"â€à±"}},_1=function(x,f,M){let w=document.createTreeWalker(M,NodeFilter.SHOW_TEXT,null,!1);for(;w.nextNode();)w.currentNode.textContent.match(x)&&(w.currentNode.textContent=f)};"use strict";var Z1=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,115,116,114,105,112,45,115,112,97,99,101,32,101,108,101,109,101,110,116,115,61,34,42,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,47,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,97,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,45,45,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,33,45,45,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,45,45,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),k1=Z1;"use strict";var en=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,32,32,32,32,60,120,115,108,58,111,117,116,112,117,116,32,105,110,100,101,110,116,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,72,101,97,100,101,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,120,101,110,111,68,97,116,97,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),S1=en;"use strict";var tn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,97,98,108,101,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,114,101,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,100,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,115,101,108,101,99,116,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,104,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,99,111,112,101,34,62,114,111,119,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,114,97,103,103,97,98,108,101,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,100,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,97,114,101,110,116,58,58,120,58,99,108,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,39,49,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,115,116,97,114,116,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,101,110,100,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,105,110,116,101,114,110,97,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,105,110,115,105,103,110,105,102,105,99,97,110,116,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,105,110,115,105,103,110,105,102,105,99,97,110,116,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,98,105,110,97,114,121,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,98,105,110,97,114,121,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),A1=tn;"use strict";var nn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,116,114,101,101,45,118,101,114,115,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,108,97,110,103,34,62,101,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,91,118,101,114,115,101,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,93,60,47,120,115,108,58,116,101,120,116,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),P1=nn;"use strict";var rn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,101,109,101,110,100,101,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,110,111,116,40,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,105,110,118,105,115,105,98,108,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,48,48,65,48,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,55,51,59,60,47,120,115,108,58,116,101,120,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,99,108,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,114,111,117,112,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),E1=rn;"use strict";var sn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),R1=sn;var wt=function(x){let M=new DOMParser().parseFromString(x,"text/xml"),w=new XSLTProcessor;return w.importStylesheet(M),w},L1=function(x,f){this.transformString=function(M,w){let R=x.xml.createElementNS(f.teins,"ab");return R.innerHTML=M,w.transformToFragment(R,document)},this.sheets={csv:wt(k1),xml:wt(S1),matrix:wt(A1),lemma:wt(E1),lg:wt(R1),tree:wt(P1)}};var B1=function(x){let f={basename(){return x.filename.split(/\.[^.]+$/)[0]},range(w,R){return Array.from(Array(parseInt(R)-parseInt(w)+1).keys(),p=>p+w)},maxlemma(){return[...f.firsttext().querySelectorAll("w[n]")].length-1},lemmata(w,R){let p=R||document.querySelector("#views");return w===!1?p.querySelectorAll(".lemma"):p.querySelectorAll(`.lemma[data-n="${w}"]`)},tds(w,R){let p=R||x.matrix.boxdiv;return w===!1?p.querySelectorAll("td[data-n]"):p.querySelectorAll(`td[data-n="${w}"]`)},firsttd(w,R){return(R||x.matrix.boxdiv).querySelector(`td[data-n="${w}"]`)},tr(w){return x.matrix.boxdiv.querySelector(`tr[data-n="${w}"]`)},trs(w){return(w||x.matrix.boxdiv).querySelectorAll("tr[data-n]")},firsttr(w){return(w||x.matrix.boxdiv).querySelector("tr[data-n]")},lasttr(w){return(w||x.matrix.boxdiv).querySelector("tr[data-n]:last-of-type")},trWalker(w){return document.createNodeIterator(w,NodeFilter.SHOW_ELEMENT,{acceptNode:function(R){if(R.tagName==="TD")return NodeFilter.FILTER_ACCEPT}},!1)},textWalker(w){return document.createNodeIterator(w,NodeFilter.SHOW_ELEMENT,{acceptNode:function(R){if(R.tagName.toLowerCase()==="w")return NodeFilter.FILTER_ACCEPT}},!1)},tei(w,R=x.xml){return R.querySelector(`TEI[n="${w}"]`)},teis(w=x.xml){return w.querySelectorAll("TEI")},texts(w){return(w||x.xml).querySelectorAll("text")},serializedtexts(w,R){let p=[...w.querySelectorAll("otu[label]")].map(u=>u.getAttribute("label"));return[...f.teis()].filter(u=>p.indexOf(u.getAttribute("n"))!==-1).map(u=>[w.querySelector(`node[label="${u.getAttribute("n")}"]`).getAttribute("id"),[...u.querySelectorAll("w")].map(d=>R&&d.hasAttribute("lemma")?d.getAttribute("lemma"):d.textContent)])},serializedlevels(w){return w.map(R=>{if(R instanceof Map){let p=new Map;for(let[N,u]of R)p.set(N.getAttribute("id"),u.map(d=>d.getAttribute("id")));return p}else return R.map(p=>p.getAttribute("id"))})},firsttext(w){return w?x.xml.querySelector(`[n="${w}"] text`):x.xml.querySelector("text")},words(w,R){let p=R||x.xml;return w===!1?p.querySelectorAll("w[n]"):p.querySelectorAll(`w[n="${w}"]`)},firstword(w,R){return(R||x.xml).querySelector(`w[n="${w}"]`)},normal(w){return(w||document.getElementById("views")).querySelectorAll(".lemma[data-normal], .tree-lemma[data-normal]")},htmlreading(w,R){return R&&w.dataset.normal?w.dataset.normal:w.IAST.textContent},ths(){return x.matrix.boxdiv.querySelectorAll("th[data-ref]")},firstth(w){return x.matrix.boxdiv.querySelector(`th[data-ref="${w}"]`)},checkbox(w,R){return x.matrix.boxdiv.querySelector(`th[data-ref="${w}"] input.${R}`)},highlit(){let R=f.firsttr().querySelectorAll(".highlit"),p=new Set;for(let N of R)p.add(N.dataset.n);return p},highlitcell(){return x.matrix.boxdiv.querySelector("td.highlitcell")},highlitrow(){let w=f.highlitcell();return w?w.closest("tr"):!1},lowhigh(w){let R=[...w].sort((u,d)=>parseInt(u)-parseInt(d)),p=parseInt(R[0]),N=R.length>1?parseInt(R[R.length-1]):void 0;return[p,N]},readings(w,R){let p=R||x.matrix.boxdiv,N=f.tds(w,p);var u=0;let d=new Set;for(let b of N){let P=b.textContent;P!==""&&(u++,d.add(P))}return[u,d.size]},attr(w,R){let p=f.firsttr();var N=[];for(let u of R)f.firsttd(u,p).dataset[w]==="true"?N.push([u,!0]):N.push([u,!1]);return new Map(N)},whichattr(w){return w.hasAttribute("n")?"n":w.hasAttribute("data-n")?"data-n":w.hasAttribute("data-ref")?"data-ref":!1},clauses(w,R=!1){let p=f.firsttext();var N=!1;let u=new Set;for(let d of w){let P=f.firstword(d,p).closest("cl");P?u.add(P):R&&(N=!0)}if(u.size===0)return!1;{let d=[...u].map(b=>{let P=b.querySelectorAll("w");return new Set([...P].map(O=>O.getAttribute("n")))});return N?[null].concat(d):d}},clausesToRemove(w,R,p=0){let N=new Set;for(let u of w){let d=new Set(u);for(let b of R)d.delete(b);d.size<=p&&N.add(u)}return[...N]},empty(){let w=new Set,R=[...f.trs()],p=R.map(d=>f.trWalker(d)),N=R[0].querySelector("td:last-of-type").dataset.n;for(let d=0;d<=N;d++){var u=!0;for(let b of p){let P=b.nextNode();u&&P.textContent!==""&&(u=!1)}u&&w.add(d)}return w},prevNonempty(w,R){for(let p=w;p>=0;p--)if(R[p].textContent!=="")return p;return!1},nextNonempty(w,R){for(let p=w;p<R.length;p++)if(R[p].textContent!=="")return p;return!1},cursorPos(w){let R=window.getSelection().getRangeAt(0),p=R.cloneRange();p.selectNodeContents(w);let N=p.toString().length;return p.setEnd(R.endContainer,R.endOffset),[p.toString().length,N]},selection(){let w=window.getSelection();if(w.isCollapsed)return!1;let R=w.rangeCount>1?w.getRangeAt(1).cloneContents():w.getRangeAt(0).cloneContents();if(!R)return!1;let p=new Set,N=R.querySelectorAll(".lemma");for(let u of N)p.add(u.dataset.n);return p}},M={undo(){return x.undo.length>0},redo(){return x.redo.length>0},checkbox(w,R=null){if(!M.anyhighlit())return!1;let p=R===null?f.highlit():R,N=f.attr(w,p);for(let u of N.values())if(u===!1)return!1;return!0},grouped(){let w=f.highlit();if(!w)return!1;let R=f.firsttr();for(let p of w){let N=f.firsttd(p,R);if(N.classList.contains("group-start")||N.classList.contains("group-internal")||N.classList.contains("group-end"))return!0}return!1},oneGrouped(){let w=f.highlit();if(w.size===0)return!1;if(w.size===1){let R=f.firsttr(),p=f.firsttd([...w][0],R);return!!(p.classList.contains("group-start")||p.classList.contains("group-end")||p.classList.contains("group-internal"))}return!0},anyhighlit(){return!!x.matrix.boxdiv.querySelector("td.highlit")},manyhighlit(){return f.highlit().size>1},highlitcell(){return!!x.matrix.boxdiv.querySelector("td.highlitcell")},normalizedView(){return document.getElementById("views").classList.contains("normalized")},anyNormalized(){return x.matrix.boxdiv.querySelector(".lemma[data-normal]")},headerView(){return x.matrix.boxdiv.querySelector("tr.header").style.display!=="none"}};return{find:f,check:M}};var N1=function(x,f){let M={Intersection:function(...u){let d=u[0];return new Set([...d].filter(b=>{for(let P=1;P<u.length;P++)if(!u[P].has(b))return!1;return!0}))},Union:function(...u){return new Set(u.reduce((d,b)=>(d=[...d,...b],d),[]))}},w=function(u){let d=new Map;for(let b of f[0]){let P=x.get(b),O=P!==void 0?[P]:[];d.set(b,new Set(O))}for(let b=1;b<f.length;b++)for(let[P,O]of f[b]){let H=O.map(F=>d.get(F)),I=M.Intersection(...H);if(u&&P===u&&I.size===1)return[...I][0];let L=I.size>0?I:M.Union(...H);d.set(P,L)}return d},R=function(u,d){let b=f[0],P=new Map;for(let O of f[f.length-1])P.set(O[0],u.get(O[0]));for(let O=f.length-1;O>1;O--)for(let[H,I]of f[O]){let L=P.get(H);for(let F of I){if(b.indexOf(F)!==-1)continue;let j=u.get(F),re=(()=>{if(j.size===1)return j;let $=M.Intersection(L,j);return $.size>0?$:j})();if(d&&F===d)return re;P.set(F,re)}}return d?P.get(d):P},p=function(u=null){let d=w(u);if(typeof d=="string")return d;let b=R(d,u);return u?N(b):new Map(Array.from(b,([P,O])=>[P,N(O,!0)]))},N=function(u,d=!1){if(!d&&u.size===1)return[...u][0].trim();let b=[...u].map(P=>P.trim()===""?"_":P);return b.length===1?b[0]:"{"+b.join(", ")+"}"};return{run:p}};function Ht(x){var f=[],M=0;if(this.trie=this.createTrie(x.patterns),this.leftMin=x.leftmin,this.rightMin=x.rightmin,this.exceptions={},x.exceptions)for(f=x.exceptions.split(/,\s?/g);M<f.length;M+=1)this.exceptions[f[M].replace(/\u2027/g,"").toLowerCase()]=new RegExp("("+f[M].split("â€§").join(")(")+")","i")}Ht.prototype.createTrie=function(x){var f=0,M=0,w=0,R=0,p=null,N=null,u=null,d=null,b={_points:[]},P;for(f in x)if(x.hasOwnProperty(f))for(P=x[f].match(new RegExp(".{1,"+ +f+"}","g")),M=0;M<P.length;M+=1){for(p=P[M].replace(/[0-9]/g,"").split(""),N=P[M].split(/\D/),d=b,w=0;w<p.length;w+=1)u=p[w].charCodeAt(0),d[u]||(d[u]={}),d=d[u];for(d._points=[],R=0;R<N.length;R+=1)d._points[R]=N[R]||0}return b};Ht.prototype.hyphenateText=function(x,f){f=f||4;for(var M=x.split(/([a-zA-Z0-9_\u0027\u00AD\u00DF-\u00EA\u00EB\u00EC-\u00EF\u00F1-\u00F6\u00F8-\u00FD\u0101\u0103\u0105\u0107\u0109\u010D\u010F\u0111\u0113\u0117\u0119\u011B\u011D\u011F\u0123\u0125\u012B\u012F\u0131\u0135\u0137\u013C\u013E\u0142\u0144\u0146\u0148\u0151\u0153\u0155\u0159\u015B\u015D\u015F\u0161\u0165\u016B\u016D\u016F\u0171\u0173\u017A\u017C\u017E\u017F\u0219\u021B\u02BC\u0390\u03AC-\u03CE\u03F2\u0401\u0410-\u044F\u0451\u0454\u0456\u0457\u045E\u0491\u0531-\u0556\u0561-\u0587\u0902\u0903\u0905-\u090B\u090E-\u0910\u0912\u0914-\u0928\u092A-\u0939\u093E-\u0943\u0946-\u0948\u094A-\u094D\u0982\u0983\u0985-\u098B\u098F\u0990\u0994-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BE-\u09C3\u09C7\u09C8\u09CB-\u09CD\u09D7\u0A02\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A14-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A82\u0A83\u0A85-\u0A8B\u0A8F\u0A90\u0A94-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABE-\u0AC3\u0AC7\u0AC8\u0ACB-\u0ACD\u0B02\u0B03\u0B05-\u0B0B\u0B0F\u0B10\u0B14-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3E-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B57\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C02\u0C03\u0C05-\u0C0B\u0C0E-\u0C10\u0C12\u0C14-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C43\u0C46-\u0C48\u0C4A-\u0C4D\u0C82\u0C83\u0C85-\u0C8B\u0C8E-\u0C90\u0C92\u0C94-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBE-\u0CC3\u0CC6-\u0CC8\u0CCA-\u0CCD\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D7A-\u0D7F\u1F00-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB2-\u1FB4\u1FB6\u1FB7\u1FBD\u1FBF\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD2\u1FD3\u1FD6\u1FD7\u1FE2-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u200D\u2019]+)/gi),w=0;w<M.length;w+=1)M[w].indexOf("/")!==-1?w!==0&&w!==M.length-1&&!/\s+\/|\/\s+/.test(M[w])&&(M[w]+="â€‹"):M[w].length>f&&(M[w]=this.hyphenate(M[w]).join("Â­"));return M.join("")};Ht.prototype.hyphenate=function(x){var f,M=[],w,R,p,N,u,d=[],b,P=x.toLowerCase(),O,H,I=Math.max,L=this.trie,F=[""];if(this.exceptions.hasOwnProperty(P))return x.match(this.exceptions[P]).slice(1);if(x.indexOf("Â­")!==-1)return[x];for(x="_"+x+"_",f=x.toLowerCase().split(""),w=x.split(""),b=f.length,R=0;R<b;R+=1)d[R]=0,M[R]=f[R].charCodeAt(0);for(R=0;R<b;R+=1)for(u=L,p=R;p<b&&(u=u[M[p]],u);p+=1)if(O=u._points,O)for(N=0,H=O.length;N<H;N+=1)d[R+N]=I(d[R+N],O[N]);for(R=1;R<b-1;R+=1)R>this.leftMin&&R<b-this.rightMin&&d[R]%2?F.push(w[R]):F[F.length-1]+=w[R];return F};var on=Ht,T1=on;var M1={id:"sa",leftmin:2,rightmin:2,patterns:{2:"a1e1i1o1u1Ã©1Ã­1Ã¯1Ã³1Ãº1Ã¼1Ä1Ä«1Å«1á¸·1á¸¹1á¹›1á¹1",3:"2b_2c_2d_2g_2h_2j_2k_2l_2m_2n_2p_2r_2s_2t_2v_2y_2Ã±_2Å›_2á¸_2á¸¥12á¸«12á¸·_2á¹12á¹ƒ12á¹…_2á¹‡_2á¹­_2áº–1lÌ¥1rÌ¥1",4:"2bh_2ch_2dh_2gh_2jh_2kh_2mÌ12ph_2rb_2rd_2rg_2rk_2rp_2rt_2rá¸_2rá¹­_2th_2á¸h_2á¹­h_a2i1a2u1a3Ã¯1a3Ã¼1lÌ¥Ì„1rÌ¥Ì„1"}};window.comboView=function(){let x={teins:"http://www.tei-c.org/ns/1.0",scripts:["iast","devanagari","telugu","grantha","malayalam"]},f={filename:null,xml:null,treelist:new Map,trees:[],textboxes:[],matrix:null,viewdiv:null,descs:null,maxlemma:null,windows:[window],dragged:null,undo:[],redo:[],editing:!1},M=new T1(M1),w=new L1(f,x),R=new B1(f),p=R.find,N=R.check,u=function(){let s=document.getElementById("tooltip");s&&s.remove()},d=function(){let s=document.getElementById("left_menu");s.innerHTML=`<div id="matrixmenu" class="menubox">
    <div class="heading">Matrix</div>
      <ul>
        <li>select CSV/XML file(s): <input type="file" id="file" name="file" accept=".xml,.csv" multiple/></li>
      </ul>
</div>
<div style="display: none" id="mssmenu" class="menubox">
    <div class="heading">Texts</div>
    <ul class="ms">
    </ul>
</div>
<div style="display: none" id="treemenu" class="menubox">
    <div class="heading">Trees</div>
        <ul class="tree">
            <li>select NeXML file: <input type="file" id="treefile" name="treefile" accept=".xml"/></li>
        </ul>
    </div>
`;let l=document.getElementById("menu");l.addEventListener("mouseover",de.menuMouseover),l.addEventListener("mouseout",de.menuMouseout),l.addEventListener("click",de.menuClick),l.querySelector("#file").addEventListener("change",F.bind(null,j),!1),l.querySelector("#treefile").addEventListener("change",F.bind(null,re),!1)},b={matrix:function(){return f.matrix=new X,f.matrix.init(),f.matrix.show(),document.getElementById("matrixmenu").style.display="none",P(),L.rehighlight(),f.matrix},text:function(s){let l=new ee(s);return f.textboxes.push(l),l.init(),l.show(),P(),L.rehighlight(),document.querySelector(".highlit")||de.textClick({target:l.boxdiv.querySelector(".lemma:not(.invisible)")}),l},tree:function(s,l){let n=new Se(s,l);return f.trees.push(n),n.init(),n.show(),P(),L.rehighlight(),n}},P=function(){for(let s of f.trees)s.draw()},O=function(){let s=window.getSelection?window.getSelection():document.selection;s&&(s.removeAllRanges?s.removeAllRanges():s.empty&&s.empty())},H=function(s){let l=document.createTreeWalker(s,NodeFilter.SHOW_TEXT);for(;l.nextNode();){let n=I(l.currentNode.nodeValue);l.currentNode.nodeValue=n}},I=function(s){return M.hyphenateText(s.replace(/ \|/g,"Â |").replace(/\| (?=\d)/g,"|Â ").replace(/\|\|/g,"à¥¥").replace(/\|/g,"à¥¤"))},L={getAllWindows:function(){return window.mainWindow?window.mainWindow.comboView.getWindows():f.windows},forEachWindow:function(s){let l=L.getAllWindows();for(let n of l)if(!n.closed&&s(n)===!1)break},highlightLemma:function(s,l){var n=!!l;L.forEachWindow(t=>{let r=t.comboView.getViewdiv().querySelectorAll('[data-n="'+s+'"]');for(let h of r)(!n||!h.classList.contains("invisible"))&&h.classList.add("highlit");let a=t.comboView.getViewdiv().querySelectorAll('[data-n-trans="'+s+'"]');for(let h of a)h.classList.add("translit")})},highlightRange:function(s){if(!s||s.size===0)return;L.unHighlightAll();let[l,n]=p.lowhigh(s);if(n!==void 0)for(let t=l;t<=n;t++)L.highlightLemma(t,!0);else L.highlightLemma(l);L.repopulateTrees(l,n);for(let t of f.viewdiv.querySelectorAll(".text-box"))t.querySelector(".highlit")||t.querySelector('[data-n="'+l+'"]').classList.add("highlit");ye.xScroll(l)},highlightAll:function(){N.anyhighlit()?L.unHighlightAll():L.highlightRange(new Set([0,p.maxlemma()]))},unHighlightAll:function(){L.forEachWindow(s=>{let l=s.comboView.getViewdiv().querySelectorAll(".highlit");for(let t of l)t.classList.remove("highlit");let n=s.comboView.getViewdiv().querySelectorAll(".translit");for(let t of n)t.classList.remove("translit");L.unCelllightAll()})},unCelllightAll:function(){L.forEachWindow(s=>{let l=s.comboView.getViewdiv().querySelectorAll(".highlitcell");for(let n of l)n.classList.remove("highlitcell")})},rehighlight:function(){var s;if(L.forEachWindow(n=>{if(s=n.document.querySelectorAll(".highlit"),s.length>0)return!1}),s.length>0){var l=new Set;for(let n of s)l.add(n.dataset.n);L.highlightRange(l)}},clearTrees:function(){L.forEachWindow(s=>{let l=s.comboView.getTrees();for(let n of l)n.clearlemmata()})},repopulateTrees:function(s,l){L.forEachWindow(n=>{let t=n.comboView.getTrees();for(let r of t)r.populate(s,l),r.colourizeVariants(s,l),r.updatescript()})},highlightTreeLemma:function(s){L.forEachWindow(l=>{let n=l.comboView.getTrees();for(let t of n){let r=t.boxdiv.querySelector('.tree-lemma[data-id="'+s+'"]'),a=t.boxdiv.querySelectorAll(".tree-lemma");for(let h of a)(r.dataset.nodes&&h.dataset.nodes===r.dataset.nodes||!r.dataset.nodes&&h.dataset.id===r.dataset.id)&&h.classList.add("highlit");t.clearLabels()}})},unhighlightTrees:function(){L.forEachWindow(s=>{let l=s.comboView.getViewdiv().querySelectorAll(".tree-lemma.highlit");for(let t of l)t.classList.remove("highlit");let n=s.comboView.getTrees();for(let t of n)t.clearLabels()})}},F=function(s,l){let n=l.target.files[0],t=[...l.target.files].slice(1),r=new FileReader;r.onload=s.bind(null,n,t),r.readAsText(n)},j=function(s,l,n){f.filename=s.name,document.title=document.title+`: ${f.filename}`,f.filename.split(".").pop()==="csv"?U(s,l,n):oe(s,l,n)},re=function(s,l,n){let t=n.target.result,a=new DOMParser().parseFromString(t,"text/xml"),h=f.xml.querySelector("teiHeader > xenoData")||function(){let v=f.xml.querySelector("teiHeader")||function(){let k=f.xml.createElementNS(x.teins,"teiHeader");return f.xml.documentElement.appendChild(k),k}(),B=f.xml.createElementNS(x.teins,"xenoData");return v.appendChild(B),B}(),g=f.xml.createElementNS(x.teins,"stemma");g.setAttribute("format","nexml"),g.id="stemma"+[...h.querySelectorAll("stemma")].length,g.appendChild(a.firstChild.cloneNode(!0)),h.appendChild(g),$(a,g.id)},$=function(s,l,n=!0){let t=s.querySelectorAll("tree"),r=document.querySelector("#treemenu ul");for(let a of t){let h=a.id,g=s.cloneNode(!0);for(let k of g.querySelectorAll("tree"))k.id!==h&&k.parentNode.removeChild(k);let v=a.getAttribute("label")||"New Tree "+f.treelist.size;f.treelist.set(`#${l} #${h}`,g);let B=document.createElement("li");B.dataset.name=v,B.dataset.treeid=h,B.dataset.stemmaid=l,B.appendChild(document.createTextNode(v)),r.insertBefore(B,r.lastElementChild),n&&b.tree(l,h)}},U=function(s,l,n){let t=Qt.parse(n.target.result,{delimiter:","});f.xml=document.implementation.createDocument(x.teins,"",null);let r=f.xml.createElementNS(x.teins,"teiCorpus"),a=f.xml.createElementNS(x.teins,"teiHeader");r.appendChild(a),f.xml.appendChild(r);for(let h of t){let g=h[0],v=h.slice(1),B=f.xml.createElementNS(x.teins,"TEI");B.setAttribute("n",g);let k=f.xml.createElementNS(x.teins,"text");for(let D=0;D<v.length;D++){let V=v[D],Q=f.xml.createElementNS(x.teins,"w");V&&Q.appendChild(document.createTextNode(V)),Q.setAttribute("n",D),k.appendChild(Q)}B.appendChild(k),r.appendChild(B)}f.xml.normalize(),f.maxlemma=p.maxlemma(),G()},oe=function(s,l,n){let t=new DOMParser;f.xml=t.parseFromString(n.target.result,"text/xml");let r=f.xml.querySelectorAll("teiHeader xenoData stemma nexml");for(let a of r){let h=document.implementation.createDocument("http://www.nexml.org/2009","",null);h.appendChild(a.cloneNode(!0)),$(h,a.closest("stemma").id,!1)}f.maxlemma=p.maxlemma(),l.length>0?he(l):G()},he=function(s){let l=s[0],n=s.slice(1),t=function(h,g){let v=new Set(h);for(let B of g)v.delete(B);return v},r=function(h,g){let B=new DOMParser().parseFromString(g.target.result,"text/xml"),k=new Map;for(let Ae of p.teis()){let we=Ae.getAttribute("n");k.set(we,Ae)}let D=new Set(k.keys()),V=new Map;for(let Ae of B.querySelectorAll("TEI")){let we=Ae.getAttribute("n");V.set(we,Ae)}let Q=new Set(V.keys()),te=t(D,Q),ue=t(Q,D);for(let Ae of ue)ve.tei(Ae);let me=[...B.querySelector("text").querySelectorAll("w[n]")].length,xe=f.maxlemma+me;for(let[Ae,we]of V)if(k.has(Ae)){let Ne=k.get(Ae).querySelector("text"),Te=we.querySelector("text").querySelectorAll("w[n]");var be=f.maxlemma+1;for(let Le of Te)Le.setAttribute("n",be),Ne.appendChild(Le),be=be+1}else{let Ne=f.xml.createElementNS(x.teins,"TEI");Ne.setAttribute("n",Ae);let Be=f.xml.createElementNS(x.teins,"text");ve.emptywords(Be,xe,0),Ne.appendChild(Be),f.xml.documentElement.appendChild(Ne)}for(let Ae of te){let we=k.get(Ae).querySelector("text");ve.emptywords(we,xe,f.maxlemma+1)}f.maxlemma=p.maxlemma(),h.length>0?he(h):G()},a=new FileReader;a.onload=r.bind(null,n),a.readAsText(l)},ge=function(){var s="";let l=[...p.teis()].map(n=>n.getAttribute("n"));for(let n of l)s+=`<li data-name="${n}">${n}</li>`;document.getElementById("menu").querySelector(".ms").innerHTML=s},G=function(){ge();let s=new W("Export");s.populate([{text:"TEI corpus",func:fe.showOptions.bind(null,fe.xml,fe.options)},{text:"TEI apparatus",func:fe.showOptions.bind(null,fe.xml,fe.appOptions)},{text:"CSV",func:fe.showOptions.bind(null,fe.csv,fe.options)},{text:"NEXUS",func:fe.showOptions.bind(null,fe.nexus,fe.options)}]);let l=new W("Edit");l.populate([{text:"Undo",greyout:N.undo,func:q.undo},{text:"Redo",greyout:N.redo,func:q.redo},{text:"Select all",alt:"Deselect all",toggle:N.anyhighlit,func:L.highlightAll},{text:"(Re)normalize columns",greyout:N.anyhighlit,func:q.startRenormalize.bind(null,!1)},{text:"Delete column",greyout:N.anyhighlit,func:q.startRemoveCol.bind(null,!1)},{text:"Delete empty columns",func:q.startRemoveEmpty},{text:"Merge columns",greyout:N.manyhighlit,func:q.startMerge.bind(null,!1)},{text:"Group columns",alt:"Ungroup columns",greyout:N.oneGrouped,toggle:N.grouped,func:q.startGroup.bind(null,!1)},{text:"Group words",func:q.doGroupWords},{text:"Edit cell",greyout:N.highlitcell,func:q.startEditCell.bind(null,!1)},{text:"Insert row",func:q.startNewRow},{text:"Insert column",greyout:N.anyhighlit,func:q.startInsertCol},{text:"Mark insignificant",checkbox:N.checkbox.bind(null,"insignificant"),greyout:N.anyhighlit,func:q.startMarkAs.bind(null,"insignificant",!1)},{text:"Mark binary",checkbox:N.checkbox.bind(null,"binary"),greyout:N.anyhighlit,func:q.startMarkAs.bind(null,"binary",!1)}]);let n=new W("View");n.populate([{text:"Header",checkbox:N.headerView,func:ye.toggleHeader},{text:"Normalized",checkbox:N.normalizedView,greyout:N.anyNormalized,func:ye.toggleNormalize}]);let t=document.getElementById("left_menu");t.appendChild(n.box),t.appendChild(l.box),t.appendChild(s.box);let r=document.getElementById("views");r.style.justifyContent="flex-start",r.removeChild(r.querySelector("#splash")),b.matrix();let a=document.getElementById("matrixmenu");a.addEventListener("click",b.matrix),a.removeChild(a.querySelector("ul")),document.getElementById("mssmenu").style.display="block",document.getElementById("treemenu").style.display="block"},fe={write:async function(s,l){let n=await l.createWritable();n.write(s),n.close()},xml:async function(s){let l=new XMLSerializer().serializeToString(w.sheets.xml.transformToDocument(s)),n=new Blob([l],{type:"text/xml;charset=utf-8"}),t=p.basename()+".xml",r=await Kt({_preferPolyfill:!1,suggestedName:t,types:[{description:"TEI XML",accept:{"text/xml":[".xml"]}}]});fe.write(n,r)},csv:async function(s){let l=w.sheets.csv.transformToDocument(s).documentElement.textContent,n=new Blob([l],{type:"text/csv;charset=utf-8"}),t=p.basename()+".csv",r=await Kt({_preferPolyfill:!1,suggestedName:t,types:[{description:"CSV file",accept:{"text/csv":[".csv"]}}]});fe.write(n,r)},nexus:async function(s){let l=[...p.texts(s)],n=l.length,t="0 1 2 3 4 5 6 7 8 9 A B C D E F G H K L M N P Q R S T U V W X Y Z a b c d e f g h k l m n p q r s t u v w x y z",[r,...a]=t.split(" "),h="-",g=l.map(be=>"'"+be.parentElement.getAttribute("n")+"'"),v=l.map(be=>p.textWalker(be)),B=l[0].querySelectorAll("w").length,k=[],D=g.map(be=>[be+" "]);for(let be=0;be<B;be++){let Ae=new Set,we=[];for(let Be=0;Be<v.length;Be++){let Le=v[Be].nextNode(),qe=De.t(Le.textContent.trim().toLowerCase(),"iast","hk").replace(/'/g,"()");we.push(qe),qe!==""&&qe!=="[]"&&Ae.add(qe)}k.push(["[]",...Ae]);let Ne=new Map([...Ae].map((Be,Te)=>[Be,a[Te]]));for(let Be=0;Be<we.length;Be++){let Te=(Le=>{switch(we[Le]){case"":return h;case"[]":return r;default:return Ne.get(we[Le])}})(Be);D[Be].push(Te)}}let V=k.map((be,Ae)=>Ae+1+" / "+[...be].map(we=>`'${we}'`).join(" ")).join(`,
`),Q=D.map(be=>be.join("")).map(be=>be.replace(/0{8,}/g,Ae=>Ae.replace(/0/g,"-"))).reduce((be,Ae)=>be+`
`+Ae),te=`#NEXUS

BEGIN TAXA;
  DIMENSIONS NTAX=${n};
  TAXLABELS ${g.join(" ")};
END;

BEGIN CHARACTERS;
  DIMENSIONS
    NCHAR=${B};
  FORMAT 
    DATATYPE=STANDARD 
    RESPECTCASE 
    GAP=${h} 
    MISSING=? 
    SYMBOLS="${t}";
  CHARSTATELABELS
${V}
;
MATRIX
${Q}
;
END;
`,ue=new Blob([te],{type:"text/nexus;charset=iso8859-1"}),me=p.basename()+".nex",xe=await Kt({_preferPolyfill:!1,suggestedName:me,types:[{description:"NEXUS file",accept:{"text/nexus":[".nex"]}}]});fe.write(ue,xe)},processOptions:function(s){let l=f.xml.cloneNode(!0);if(s.get("option_normalize")){let n=l.querySelectorAll("w[lemma]");for(let t of n)t.textContent=t.getAttribute("lemma")}if(s.get("option_mergegroups")){let n=l.querySelectorAll("cl");for(let t of n){let r=t.removeChild(t.firstChild);for(;t.firstChild;){let a=r.getAttribute("lemma")||r.textContent,h=t.firstChild.getAttribute("lemma")||t.firstChild.textContent;for(r.setAttribute("lemma",a+h);t.firstChild.firstChild;)r.appendChild(t.firstChild.firstChild);t.firstChild.remove()}r.getAttribute("lemma")===r.textContent&&r.removeAttribute("lemma"),t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t)}}if(s.get("option_insignificant")){let n=l.querySelectorAll('w[insignificant="true"]');for(let t of n)t.parentNode.removeChild(t)}if(s.get("option_binary")){let t=[...p.firsttext().querySelectorAll('w[binary="true"]')].map(r=>r.getAttribute("n"));for(let r of t){let a=l.querySelectorAll(`w[n="${r}"]:not(:empty)`);if(a.length===0)continue;let h=`[${a[0].textContent}]`;for(let g of a)g.textContent=h}}if(s.get("option_noempty")){let n=l.querySelectorAll("w:empty");for(let t of n)t.textContent="[]"}return s.get("option_basetext")?fe.makeApp(s,l):l},makeHeader(s,l){let n=s.createElementNS(x.teins,"teiHeader"),t=s.createElementNS(x.teins,"fileDesc"),r=s.createElementNS(x.teins,"sourceDesc"),a=s.createElementNS(x.teins,"listWit");for(let h of p.teis(l)){let g=h.getAttribute("n"),v=s.createElementNS(x.teins,"witness");v.setAttribute("xml:id",g);let B=s.createElementNS(x.teins,"idno");B.setAttribute("type","siglum"),B.append(g),v.appendChild(B),a.appendChild(v)}return r.appendChild(a),t.appendChild(r),n.appendChild(t),n},makeApp(s,l){let n=s.get("option_basetext"),t=p.tei(n,l),r=s.get("option_app_normalize"),a=document.implementation.createDocument(x.teins,"",null);a.appendChild(t);let h=fe.makeHeader(a,l);t.insertBefore(h,t.firstChild);let g=p.words(!1,t);for(let v of g){let B=v.getAttribute("n"),k=r&&v.getAttribute("lemma")||v.textContent,D=[],V=new Map,Q=p.words(B,l);for(let te of Q){let ue=te.closest("TEI").getAttribute("n");if(r&&te.getAttribute("lemma")===k)D.push(ue);else if(te.textContent===k)D.push(ue);else{let me=te.textContent===""?"[om.]":te.textContent,xe=V.get(me)||[];xe.push(ue),V.set(me,xe)}}if(V.size===0)for(;v.firstChild;)v.parentElement.insertBefore(v.firstChild,v);else{let te=a.createElementNS(x.teins,"app");te.setAttribute("n",B);let ue=a.createElementNS(x.teins,"lem"),me=D.map(xe=>`#${xe}`).join(" ");for(me!==""&&ue.setAttribute("wit",me);v.firstChild;)ue.appendChild(v.firstChild);te.appendChild(ue);for(let[xe,be]of V){let Ae=a.createElementNS(x.teins,"rdg"),we=be.map(Ne=>`#${Ne}`).join(" ");Ae.setAttribute("wit",we),Ae.append(xe),te.appendChild(Ae)}v.parentElement.insertBefore(te,v),ue.textContent.match(/\s$/)&&v.parentElement.insertBefore(a.createTextNode(" "),v)}v.remove()}return a},options(){return document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <input type="checkbox" id="option_insignificant" name="option_insignificant"><label for="option_insignificant">Remove insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_binary" name="option_binary"><label for="option_binary">Binarize marked lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_noempty" name="option_noempty"><label for="option_noempty">Gaps are significant</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups"><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`)},appOptions(){let s=document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <label for="option__basetext">Base text</label>
        <select id="option__basetext" name="option_basetext"></select>
      </div>
      <div>
        <input type="checkbox" id="option__app_insignificant" name="option_app_insignificant"><label for="option_app_insignificant">Ignore insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups" checked><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_app_normalize" name="option_app_normalize" checked><label for="option_app_normalize">Normalized spellings in positive apparatus</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings in negative apparatus</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`),l=s.getElementById("option__basetext"),n=[...p.trs()].map(t=>t.dataset.n);for(let t of n){let r=document.createElement("option");r.value=t,r.append(t),l.appendChild(r)}return s},showOptions:function(s,l){let n=l(),t=document.createElement("div");t.id="blackout",t.appendChild(n),document.body.appendChild(t);let r=function(h){h.preventDefault();var g=[];let v=document.getElementById("exportform").elements;for(let k of v)k.type==="checkbox"?g.push([k.name,k.checked]):g.push([k.name,k.value]);let B=fe.processOptions(new Map(g));s(B),document.body.removeChild(t)};return t.querySelector("button").addEventListener("click",r),t.addEventListener("click",fe.blackoutClick),t},blackoutClick:function(s){if(!s.target.closest(".popup")){let n=document.querySelector("#blackout");n.parentNode.removeChild(n)}}},de={selectAll(s){let l=document.createRange();l.selectNodeContents(s);let n=window.getSelection();n.removeAllRanges(),n.addRange(l)},deselect(){let s=window.getSelection();s.removeAllRanges?s.removeAllRanges():s.empty&&s.empty()},treeMouseover(s){let l=s.target.classList.contains("tree-lemma")?s.target:s.target.closest(".tree-lemma");l&&(L.highlightTreeLemma(l.dataset.id),l.addEventListener("mouseout",L.unhighlightTrees));let n=s.target.dataset.reconstructed;if(!n)return;let t=document.createElement("div");t.id="tooltip",t.style.top=s.pageY+"px",t.style.left=s.pageX+"px",t.style.opacity=0,t.style.transition="opacity 0.2s ease-in",f.viewdiv.parentElement.appendChild(t);let r=document.createElement("div");if(r.appendChild(document.createTextNode(n)),this.script!==0?t.appendChild(Ot(r,x.scripts[this.script])):t.appendChild(r),s.target.classList.contains("reconstructed")){let a=s.target.parentNode.querySelector("span.tree-lemma");if(a&&a.dataset.hasOwnProperty("emended")){let h=document.createElement("div");h.classList.add("emphasis"),h.appendChild(document.createTextNode(a.textContent)),this.script!==0?t.prepend(Ot(h,x.scripts[this.script])):t.prepend(h)}}window.getComputedStyle(t).opacity,t.style.opacity=1,s.target.addEventListener("mouseout",u)},treeClick(s){s.target.classList.contains("witness")?b.text(s.target.dataset.key):s.target.classList.contains("reconstructed")?b.text(s.target.dataset.label):s.target.classList.contains("internal")&&q.startReconstruction(s),u()},keyDown(s){if(!f.editing&&s.key.substring(0,5)==="Arrow")de.cycleVariant(s);else if(s.ctrlKey||s.metaKey)s.key==="Z"?q.redo():s.key==="z"&&q.undo();else if(!f.editing&&f.matrix&&!f.matrix.closed&s.key==="Enter"){let l=p.highlitcell();l&&(s.preventDefault(),q.startEditCell(l))}},cycleVariant(s){let l=p.highlitcell()||f.viewdiv.querySelector("td.highlit")||f.viewdiv.querySelector('td[data-n="0"]');switch(s.key){case"ArrowRight":{if(!f.matrix.closed&&l){let n=l.nextElementSibling;n&&de.textClick({target:n})}else{let n=f.viewdiv.querySelector(".highlit"),t=n?n.dataset.n:0,r=parseInt(t)+1;for(;r<=f.maxlemma;){let a=f.viewdiv.querySelectorAll('[data-n="'+r+'"]');for(let h of a)if(h&&!h.classList.contains("invisible")){de.textClick({target:h});return}r++}}break}case"ArrowLeft":{if(!f.matrix.closed&&l){let n=l.previousElementSibling;n&&de.textClick({target:n})}else{let n=f.viewdiv.querySelector(".highlit"),t=n?n.dataset.n:0,r=parseInt(t)-1;for(;r>=0;){let a=f.viewdiv.querySelectorAll('[data-n="'+r+'"]');for(let h of a)if(h&&!h.classList.contains("invisible")){de.textClick({target:h});return}if(r--,l){de.textClick({target:l.previousElementSibling});return}}}break}case"ArrowUp":{if(f.matrix.closed||!l)return;let t=l.closest("tr").previousElementSibling;if(!t||!t.dataset.n)return;let r=t.querySelector(`td[data-n="${l.dataset.n}"]`);de.textClick({target:r});break}case"ArrowDown":{if(f.matrix.closed||!l)return;let t=l.closest("tr").nextElementSibling;if(!t||t.tagName!=="TR")return;let r=t.querySelector(`td[data-n="${l.dataset.n}"]`);de.textClick({target:r})}}},textClick(s,l=!1){if(s.target.closest("tr.header")){de.matrixHeaderClick(s);return}let n=s.target.classList.contains("lemma")?s.target:s.target.closest(".lemma");if(n){if(!l&&s.ctrlKey){de.rightClick(s);return}let t=n.dataset.n,r=p.highlitrow();if(L.unHighlightAll(),L.highlightLemma(t),L.repopulateTrees(t),ye.xScroll(t,r),n.tagName==="TD")n.classList.add("highlitcell");else{let a=n.closest(".text-box");if(a){let h=a.dataset.id;p.tr(h).querySelector(`td[data-n="${t}"]`).classList.add("highlitcell")}}}},textMouseup(){let s=p.selection();L.highlightRange(s),O()},menuMouseover(s){let l=s.target.classList.contains("menubox")?s.target:s.target.closest(".menubox");if(l){let n=l.querySelector("ul");n&&(n.style.display="block"),l.classList.add("open")}},menuMouseout(s){let l=s.target.classList.contains("menubox")?s.target:s.target.closest(".menubox");if(l){let n=l.querySelector("ul");n&&(n.style.display="none"),l.classList.remove("open")}},menuClick(s){!s.target.parentElement||(s.target.parentElement.className==="ms"&&(de.menuMouseout(s),b.text(s.target.dataset.name)),s.target.parentElement.className==="tree"&&(de.menuMouseout(s),s.target.closest("li[data-name]")&&b.tree(s.target.dataset.stemmaid,s.target.dataset.treeid)))},thDragStart(s){s.dataTransfer.setData("text/plain",s.target.textContent),q.startMoveRow(s.target.parentNode,s)},trDragEnter(s){let l=s.target.nodeType===1?s.target.closest("tr"):s.target.parentElement.closest("tr");l&&l.classList.add("dragenter")},trDragLeave(s){let l=s.target.nodeType===1?s.target.closest("tr"):s.target.parentElement.closest("tr");l&&l.classList.remove("dragenter")},trDragDrop(s){s.preventDefault(),q.finishMoveRow(s)},matrixMousedown(s){if(s.button!==0)return;if(s.ctrlKey){de.rightClick(s);return}let l=s.target.nodeType===1?s.target.closest(".lemma"):s.target.parentElement.closest(".lemma");if(l){if(l.isContentEditable)return;L.unHighlightAll(),L.highlightLemma(l.dataset.n);let n=f.matrix.boxdiv.querySelector("table");n.addEventListener("mouseover",de.matrixMouseover),n.addEventListener("mouseup",de.matrixMouseup)}},matrixMouseup(){let s=p.highlit();L.highlightRange(s);let l=f.matrix.boxdiv.querySelector("table");l.removeEventListener("mouseover",de.matrixMouseover),l.removeEventListener("mouseup",de.matrixMouseup)},matrixMouseover(s){let l=s.target.nodeType===1?s.target.closest(".lemma"):s.target.parentElement.closest(".lemma");l&&L.highlightLemma(l.dataset.n)},matrixHeaderClick(s){if(s.target.tagName!=="INPUT")return;let l=s.target.className;if(l!=="insignificant"&&l!=="binary")return;let n=s.target.closest("th").dataset.ref,t=p.firsttd(n).dataset[l]!=="true",r=new Map([[n,t]]);q.doMarkAs(l,r)},rightClick(s){let l=s.target.nodeType===1?s.target.closest("tr[data-n] th"):s.target.parentElement.closest("tr[data-n] th");if(l){s.preventDefault(),ke.remove();let t=ke.create(s),r=[{text:"move row",func:q.startMoveRow.bind(null,l.parentNode)},{text:"delete row",func:q.doDeleteRow.bind(null,l.parentNode.dataset.n)}];ke.populate(t,r),ke.show(t);return}let n=s.target.nodeType===1?s.target.closest("td.lemma"):s.target.parentElement.closest("td.lemma");if(n){s.preventDefault();let t=n.classList.contains("highlit")?function(){let h=p.highlit();return h.size===1&&!n.classList.contains("highlitcell")&&(L.unCelllightAll(),n.classList.add("highlitcell")),h}():(de.textClick(s,!0),new Set([n.dataset.n])),r=t.size>1?[{text:"merge columns",func:q.startMerge.bind(null,t)},{text:"ungroup columns",alt:"group columns",toggle:N.grouped,func:q.startGroup.bind(null,!1)},{text:"delete columns",func:q.startRemoveCol.bind(null,t)}]:[{text:"edit cell",func:q.startEditCell.bind(null,n)},{text:"delete column",func:q.startRemoveCol.bind(null,t)},{text:"insert column",func:q.startInsertCol}];ke.remove();let a=ke.create(s);ke.populate(a,r),ke.show(a)}}},q={undo:function(){let s=f.undo.pop();s&&s[0](...s[1])},redo:function(){let s=f.redo.pop();s&&s[0](...s[1])},doStack:function(s,l="do"){l==="undo"?(s[1].push("redo"),f.redo.push(s)):l==="redo"?(s[1].push("undo"),f.undo.push(s)):(s[1].push("undo"),f.undo.push(s),f.redo=[])},doMulti:function(s,l){let n=[];for(let t of s){let r=t[0](...t[1],"multido");n.unshift(r)}q.doStack([q.doMulti,[n]],l)},startMoveRow:function(s,l){if(f.dragged=s,f.dragged.classList.add("dragging"),l.type!=="dragstart"){for(let n of p.trs())n.classList.add("moveinprogress");f.matrix.boxdiv.querySelector("table").addEventListener("mousedown",q.finishMoveRow)}},startMerge:function(s){let l=s===!1?p.highlit():s,n=p.clauses(l,!0);if(!n)q.doMerge(l,"do");else if(n[0]===null){let t=n.filter(r=>r!==null).map(r=>[q.doUngroup,[r]]).concat([[q.doMerge,[l]]]);q.doMulti(t,"do")}else{let t=p.clausesToRemove(n,l);if(!t)q.doMerge(l,"do");else{let r=t.map(a=>[q.doUngroup,[a]]).concat([[q.doMerge,[l]]]);q.doMulti(r,"do")}}},startGroup:function(s){let l=s===!1?p.highlit():s;N.grouped()?q.startUngroup(l):q.doGroup(l,"do")},startUngroup:function(s){let n=[...p.clauses(s)].map(t=>[q.doUngroup,[t]]);q.doMulti(n,"do")},startInsertCol:function(){let s=Math.max([...p.highlit()])||f.maxlemma;q.doInsertCol(s)},startRemoveCol:function(s){let l=s===!1?p.highlit():s,n=p.clauses(l);if(!n)q.doRemoveCol(l,"do");else{let t=p.clausesToRemove(n,l,1);if(!t)q.doRemoveCol(l,"do");else{let r=t.map(a=>[q.doUngroup,[a]]).concat([[q.doRemoveCol,[l]]]);q.doMulti(r,"do")}}},startRemoveEmpty:function(){let s=p.empty(),l=p.clauses(s);if(!l)q.doRemoveCol(s,"do");else{let n=p.clausesToRemove(l,s,1);if(!n)q.doRemoveCol(s,"do");else{let t=n.map(r=>[q.doUngroup,[r]]).concat([[q.doRemoveCol,[s]]]);q.doMulti(t,"do")}}},startEditCell:function(s){let l=s||p.highlitcell();!l||(q.unnormalize(l),l.dataset.oldContent=l.textContent,l.contentEditable="true",l.focus(),f.editing=!0,de.selectAll(l),l.addEventListener("blur",q.finishEditCell),l.addEventListener("keydown",q.cellKeyDown))},cellKeyDown:function(s){switch(s.key){case"Enter":q.finishEditCell(s);break;case"Escape":q.finishEditCell(s,!0);break;case"ArrowRight":{let l=p.cursorPos(s.target);l[0]===l[1]&&(s.preventDefault(),q.finishEditCell(s),de.cycleVariant({key:"ArrowRight"}),q.startEditCell(p.highlitcell()));break}case"ArrowLeft":{p.cursorPos(s.target)[0]===0&&(s.preventDefault(),q.finishEditCell(s),de.cycleVariant({key:"ArrowLeft"}),q.startEditCell(p.highlitcell()));break}}},startMarkAs:function(s,l,n){let t=n.target.tagName==="INPUT"?n.target:n.target.querySelector("input"),r=l===!1?p.highlit():l,a=new Map([...r].map(h=>[h,!t.checked]));q.doMarkAs(s,a)},startNewRow:function(){let s=ve.row("new row"),l=s.querySelector("th");l.contentEditable=!0,l.addEventListener("blur",q.finishNewRow),l.addEventListener("keydown",q.thKeyDown),f.matrix.boxdiv.querySelector("tbody").appendChild(s),l.scrollIntoView(),l.focus(),document.execCommand("selectAll",!1,null),f.editing=!0},startRenameRow:function(){},startReconstruction:function(s){let l=s.target.dataset.key,n=s.target.closest(".tree-box").myTree,t=n.desc,r=document.createElement("div");r.id="blackout";let a=document.createRange().createContextualFragment(`<div id="reconstructionoptions" class="popup">
    <form id="reconstructionform">
      <div>
        <label for="reconstructed_node_name">Label for node:</label>
        <input type="text" id="reconstructed_node_name" name="reconstructed_node_name" placeholder="${t}-${l}" size="15">
      </div>
      <div style="width: 100%; display: flex; justify-content: center;padding-top: 1em;">
        <button type="submit">Add to matrix</button>
      </div>
    </form>
</div>`);r.appendChild(a),document.body.appendChild(r);let h=function(v){v.preventDefault();let B=r.querySelector("input"),k=B.value?B.value:B.placeholder;q.doReconstruction(n,l,k),document.body.removeChild(r)};r.querySelector("button").addEventListener("click",h),r.addEventListener("click",fe.blackoutClick)},thKeyDown:function(s){s.key==="Enter"&&q.finishNewRow(s)},finishNewRow:function(s){let l=s.target,n=l.textContent;l.closest("tr").dataset.n=n;let t=ve.tei(n);f.xml.documentElement.appendChild(t),f.editing=!1,l.contentEditable=!1,l.removeEventListener("blur",q.finishNewRow),l.removeEventListener("keydown",q.thKeyDown),q.doStack([q.doDeleteRow,[n]],"do")},finishEditCell:function(s,l=!1){let n=s.target;f.editing=!1,n.contentEditable="false",n.removeEventListener("blur",q.finishEditCell),n.removeEventListener("keydown",q.cellKeyDown),n.blur(),de.deselect();let t=n.textContent;if(t===""){let g=n.querySelector("br");g&&g.remove()}if(l||t===n.dataset.oldContent)return;n.hasOwnProperty("IAST")||(n.IAST=n.cloneNode(!0)),n.IAST.textContent=t;let r=parseInt(n.dataset.n),a=n.closest("tr"),h=a.dataset.n;if(q.xmlChangeCell(r,h,t),a.dataset.hasOwnProperty("treename")&&!n.dataset.hasOwnProperty("emended")){let g=q.doEmend(r,h,"multido"),v=[];v.push([q.doChangeCell,[r,h,n.dataset.oldContent]]),v.push(g),q.doStack([q.doMulti,[v]],"do")}else q.doStack([q.doChangeCell,[r,h,n.dataset.oldContent]],"do");delete n.dataset.oldContent,q.refresh(),ye.updateAllHeaders(!0),n.classList.add("highlitcell")},finishMoveRow:function(s){let l=s.target.nodeType===1?s.target.closest("tr"):s.target.parentElement.closest("tr");if(l&&q.doMoveRow(f.dragged,l,"do"),s.type!=="drop"){for(let n of p.trs())n.classList.remove("moveinprogress");f.matrix.boxdiv.querySelector("table").removeEventListener("mousedown",q.finishMoveRow)}else for(let n of p.trs())n.classList.remove("dragenter");f.dragged.classList.remove("dragging"),f.dragged=null},doReconstruction:function(s,l,n){let t=ve.row(n,"pending");t.dataset.treename=s.name,t.dataset.nodename=l;let r=t.querySelector("th"),a=document.createElement("div");a.id="spinner",r.prepend(a);let h=ve.tei(n);h.setAttribute("type","reconstructed"),h.setAttribute("corresp",s.name),h.setAttribute("select",`#${l}`);let g=[...p.tds(!1,t)],v=[...p.words(!1,h)];f.matrix.boxdiv.querySelector("tbody").appendChild(t),r.scrollIntoView();let B=new Worker("./worker.js"),k=N.normalizedView(),D=p.serializedtexts(s.nexml,k),V=new Map(D.map(Q=>[Q[0],Q[1][0]]));B.postMessage({readings:V,levels:s.levels,num:0,id:l}),B.onmessage=function(Q){let te=Q.data.n,ue=Q.data.result;if(g[te].textContent=ue,g[te].IAST=g[te].cloneNode(!0),g[te].classList.remove("pending"),v[te].textContent=ue,te<f.maxlemma){let me=new Map(D.map(xe=>[xe[0],xe[1][te+1]]));B.postMessage({readings:me,levels:s.levels,num:te+1,id:l})}else{r.removeChild(a),f.xml.documentElement.appendChild(h),ye.updateAllHeaders(),s.draw();let me=p.highlit();me.size>0&&L.repopulateTrees(...p.lowhigh(me));let xe=document.getElementById("menu").querySelector(".ms"),be=document.createElement("li");be.setAttribute("data-name",n),be.appendChild(document.createTextNode(n)),xe.appendChild(be),q.doStack([q.doDeleteRow,[n]],"do")}}},doDeleteRow:function(s,l="do"){let n=p.tr(s),t=p.tei(s),a=[...p.teis()].indexOf(t);n.parentNode.removeChild(n),t.parentNode.removeChild(t),ye.updateAllHeaders(),ge(),P(),q.doStack([q.doUndeleteRow,[n,t,a]],l)},doUndeleteRow:function(s,l,n,t="do"){let r=l.getAttribute("n"),a=[...p.teis()];if(n===a.length)f.xml.documentElement.appendChild(l),f.matrix.boxdiv.querySelector("tbody").appendChild(s);else{let h=[...p.trs()];f.xml.documentElement.insertBefore(l,a[n]),h[n].parentNode.insertBefore(s,h[n])}ye.updateAllHeaders(),ge(),P(),q.doStack([q.doDeleteRow,[r]],t)},doMoveRow:function(s,l,n="do"){let t=s.parentNode,r=[...p.trs()],a=s.previousElementSibling,h=r.indexOf(s),g=l!==null?r.indexOf(l):null,v=function(){l===null?t.insertBefore(s,t.firstChild):l.nextElementSibling?t.insertBefore(s,l.nextElementSibling):t.appendChild(s)},B=function(){let k=f.xml.documentElement,D=[...p.teis()],V=D[h];if(g===null)k.insertBefore(V,D[0]);else{let Q=D[g];Q.nextElementSibling?k.insertBefore(V,Q.nextElementSibling):k.appendChild(V)}};if(v(),B(),n==="multido")return[q.doMoveRow,[s,a]];q.doStack([q.doMoveRow,[s,a]],n)},doMerge:function(s,l="do"){let n=function(h,g,v){let B=h();var k=[];for(let D of B){let V=[...v].map(ue=>g(ue,D)),Q=V.map(ue=>ue.cloneNode(!0));k.push(Q);for(let ue of V)q.unnormalize(ue);let te=V.reduce(function(ue,me){if(me.hasChildNodes())for(;me.firstChild;)ue.appendChild(me.firstChild);return me.parentNode.removeChild(me),ue});te.normalize(),te.dataset?(delete te.dataset.normal,te.IAST=te.cloneNode(!0)):te.removeAttribute("lemma")}return[h,g,k]},t=n(p.trs,p.firsttd,s),r=n(p.texts,p.firstword,s),a=parseInt([...s][0]);if(q.renumber(a),q.restyleGroups(s),q.refresh(),ye.updateAllHeaders(),l==="multido")return[q.doUnmerge,[t,r]];q.doStack([q.doUnmerge,[t,r]],l)},doUnmerge:function(s,l,n="undo"){let t=function(g,v,B){let k=p.whichattr(B[0][0]),D=B[0].map(ue=>ue.getAttribute(k)),V=D[0],Q=g();for(var te=0;te<Q.length;te++){let ue=B[te].pop(),me=v(V,Q[te]);me.parentNode.replaceChild(ue,me);for(let xe of B[te])ue.parentNode.insertBefore(xe,ue)}return D};t(...s);let r=t(...l),h=[...r].sort((g,v)=>parseInt(g)-parseInt(v))[0];if(q.renumber(h),q.reIAST(r),q.refresh(),q.restyleGroups(r),ye.updateAllHeaders(),n==="multido")return[q.doMerge,[r]];q.doStack([q.doMerge,[r]],n)},doGroup:function(s,l="do"){let n=[...s],t=n.shift(),r=p.texts();for(let h of r){let g=document.createElementNS("http://www.tei-c.org/ns/1.0","cl"),v=p.firstword(t,h);v.parentNode.insertBefore(g,v),g.appendChild(v);for(let B of s)g.appendChild(p.firstword(B,h))}let a=n.pop();for(let h of p.tds(t))h.classList.add("group-start");for(let h of p.tds(a))h.classList.add("group-end");for(let h of n)for(let g of p.tds(h))g.classList.add("group-internal");for(let h of f.textboxes)h.refresh();if(l==="multido")return[q.doUngroup,[s]];q.doStack([q.doUngroup,[s]],l)},doUngroup:function(s,l="do"){let n=p.texts();for(let r of n){let a;for(let h of s){let g=p.firstword(h,r);a||(a=g.closest("cl")),a.parentNode.insertBefore(g,a)}a.parentNode.removeChild(a)}let t=[...s].map(r=>[...p.tds(r)]).reduce((r,a)=>r.concat(a),[]);for(let r of t)r.classList.remove("group-start","group-internal","group-end");for(let r of f.textboxes)r.refresh();if(l==="multido")return[q.doGroup,[s]];q.doStack([q.doGroup,[s]],l)},doGroupWords:function(){let s=0,l=[];for(let n=0;n<=f.maxlemma;n++){let t=p.tds(n),r=t[0].classList;if(r.contains("group-start")||r.contains("group-internal")||r.contains("group-end")){s=n+1;continue}let a=t.length,h=0;if(n===f.maxlemma)h=a;else for(let g of t)(g.IAST?g.IAST.textContent:g.textContent).slice(-1)===" "&&h++;if(h/a>=.5)if(s===n){s++;continue}else{let g=p.range(s,n);l.push([q.doGroup,[g]]),s=n+1}}q.doMulti(l)},doRemoveCol:function(s,l="do"){let n=function(g,v,B){let k=g();var D=[];for(let V of k){let Q=[...B].map(ue=>{let me=v(ue,V);return q.unnormalize(me),me}),te=Q.map(ue=>ue.cloneNode(!0));D.push(te);for(let ue of Q)ue.parentNode.removeChild(ue)}return[g,v,D]},t=n(p.trs,p.firsttd,s),r=n(p.texts,p.firstword,s),a=[...s].sort((g,v)=>parseInt(g)-parseInt(v)),h=parseInt([...a][0])-1;if(q.renumber(h),q.refresh(),q.restyleGroups(s,!0),ye.updateAllHeaders(),l==="multido")return[q.doUnremoveCol,[t,r]];q.doStack([q.doUnremoveCol,[t,r]],l)},doUnremoveCol:function(s,l,n){let t=function(v,B,k){let D=p.whichattr(k[0][0]),V=k[0].map(me=>me.getAttribute(D)),Q=V[0],te=v();for(var ue=0;ue<te.length;ue++){let me=B(Q,te[ue]);for(let xe of k[ue])me.parentNode.insertBefore(xe,me)}return V};t(...s);let r=t(...l),a=[...r].sort((v,B)=>parseInt(v)-parseInt(B)),h=parseInt(a[0])-1;q.renumber(h);let g=document.querySelectorAll(".highlitcell");for(let v of g)v.classList.remove("highlitcell");if(q.reIAST(r),q.refresh(),q.restyleGroups(r,!0),ye.updateAllHeaders(),n==="multido")return[q.doRemoveCol,[r]];q.doStack([q.doRemoveCol,[r]],n)},doInsertCol:function(s,l="do"){let n=function(r,a,h,g){let v=r();for(let B of v){let k=a(g,B),D=h(g+1);k.insertAdjacentElement("afterend",D)}};n(p.trs,p.firsttd,ve.emptycell,s),n(p.texts,p.firstword,ve.emptyword,s),q.renumber(s),q.refresh(),q.restyleGroups([s,s+1],!0),ye.updateAllHeaders();let t=[s+1];if(l==="multido")return[q.doRemoveCol,[t]];q.doStack([q.doRemoveCol,[t]],l)},doEmend:function(s,l,n="do"){let t=[...p.trs()][l],r=p.firsttd(s,t);r.dataset.emended=!0;let a=p.tei(l).querySelector("text");if(p.firstword(s,a).setAttribute("emended","true"),n==="multido")return[q.doUnemend,[s,l]];q.doStack([q.doUnemend,[s,l]],n)},doUnemend:function(s,l,n="do"){let t=[...p.trs()][l],r=p.firsttd(s,t);delete r.dataset.emended;let a=p.tei(l).querySelector("text");if(p.firstword(s,a).removeAttribute("emended"),n==="multido")return[q.doEmend,[s,l]];q.doStack([q.doEmend,[s,l]],n)},doChangeCell:function(s,l,n,t="do"){let r=q.xmlChangeCell(s,l,n),a=q.htmlChangeCell(s,l,n);if(q.refresh(),ye.updateAllHeaders(!0),de.textClick({target:a}),t==="multido")return[q.doChangeCell,[s,l,r]];q.doStack([q.doChangeCell,[s,l,r]],t)},htmlChangeCell:function(s,l,n){let t=p.tr(l),r=p.firsttd(s,t);return q.unnormalize(r),r.textContent=n,r.IAST&&(r.IAST=r.cloneNode(!0)),r},xmlChangeCell:function(s,l,n){let t=p.tei(l).querySelector("text"),r=p.firstword(s,t);q.unnormalize(r);let a=r.textContent;return r.childNodes.length===0?r.appendChild(document.createTextNode(n)):r.textContent=n,a},doMarkAs:function(s,l,n="do"){let t=[...l.keys()],r=p.attr(s,t);for(let a of t){let h=p.tds(a),g=p.words(a);if(l.get(a)===!0){for(let B of h)B.dataset[s]="true";for(let B of g)B.setAttribute(s,"true")}else{for(let B of h)delete B.dataset[s];for(let B of g)B.removeAttribute(s)}let v=p.checkbox(a,s);v.checked=l.get(a)}if(n==="multido")return[q.doMarkAs,[s,r]];q.doStack([q.doMarkAs,[s,r]],n)},refresh:function(){for(let s of f.textboxes)s.refresh();L.rehighlight(),N.anyhighlit()?L.repopulateTrees(...p.lowhigh(p.highlit())):L.clearTrees()},renumber:function(s=0){let l=function(n,t,r){let a=n();for(let g of a){let v=[...t(!1,g)],B=p.whichattr(v[0]);for(var h=parseInt(r)+1;h<v.length;h++)v[h].setAttribute(B,h)}};l(p.trs,p.tds,s),l(()=>[!0],p.ths,s),l(p.texts,p.words,s),f.maxlemma=p.maxlemma()},reIAST:function(s){let l=[...s].map(n=>[...p.lemmata(n)]).flat();for(let n of l)n.IAST=n.cloneNode(!0)},restyleGroups:function(s,l=!1){let t=l?function(a){var h=[...a];let g=parseInt(s[0])-1,v=parseInt(s[s.length-1])+1;return h.unshift(g),h.push(v),h}(s):s,r=function(a,h=!1){let g=new Set(["group-start","group-internal","group-end"]);h&&g.delete(h);for(let v of a){for(let B of g)v.classList.remove(B);h&&v.classList.add(h)}};for(let a of t){let h=p.firstword(a),g=p.tds(a);if(g.length===0)continue;let v=h.closest("cl");v?h===v.firstElementChild?r(g,"group-start"):h===v.lastElementChild?r(g,"group-end"):r(g,"group-internal"):r(g)}},startRenormalize:function(s){let l=s===!1?p.highlit():s;q.doRenormalize(Math.min(...l),Math.max(...l))},doRenormalize:function(s,l,n=!1,t="do"){let r=N.normalizedView(),a=new Map,h=[...p.trs()],g=[...p.texts()],v=n?[n]:[...h.keys()];for(let B of v){let k=new Map,D=g[B],V=[...p.words(!1,D)],Q=p.firstword(s,D),te=p.firstword(l,D),ue=V.indexOf(Q),me=V.indexOf(te),xe=V.slice(ue,me+1),be=h[B],we=[...p.tds(!1,be)].slice(ue,me+1),Ne=xe.map(Te=>Te.textContent),Be=w1(Ne);for(let Te=0;Te<Be.length;Te++){let Le=xe[Te],qe=Be[Te],ze=Ne[Te],He=we[Te],Xe=Le.hasAttribute("lemma")?Le.getAttribute("lemma"):!1;if(Xe!==!1){if(Xe===qe)continue;k.set(He.dataset.n,Xe),q.unnormalize(Le),q.unnormalize(He)}else k.set(He.dataset.n,null);qe!==ze&&(Le.setAttribute("lemma",qe),He.dataset.normal=qe,r&&(He.textContent=qe))}a.set(B,k)}ye.updateAllHeaders(!0),ye.xScrollToHighlit(),q.doStack([q.doUnrenormalize,[a]],t)},doUnrenormalize:function(s,l="undo"){let n=N.normalizedView(),t=new Map,r=[...p.trs()],a=[...p.texts()];for(let[h,g]of s.entries()){let v=r[h],B=a[h],k=new Map;for(let[D,V]of g.entries()){let Q=p.firsttd(D,v),te=p.firstword(D,B),ue=te.hasAttribute("lemma")?te.getAttribute("lemma"):null;k.set(D,ue),V===null?(q.unnormalize(Q),q.unnormalize(te)):(Q.dataset.normal=V,te.setAttribute("lemma",V),n&&(Q.textContent=V))}t.set(h,k)}q.doStack([q.doUnrenormalize,[t]],l)},unnormalize:function(s){s.hasOwnProperty("IAST")&&(s.textContent=s.IAST.textContent),s.dataset&&s.dataset.hasOwnProperty("normal")&&delete s.dataset.normal,s.getAttribute("lemma")&&s.removeAttribute("lemma")}},ye={toggleNormalize:function(){N.normalizedView()?ye.showUnnormalized():ye.showNormalized()},showNormalized:function(s){if(s)s.updatescript();else{document.getElementById("views").classList.add("normalized");for(let n of f.textboxes)n.updatescript();f.matrix.updatescript(),N.anyhighlit()?L.repopulateTrees(...p.lowhigh(p.highlit())):L.clearTrees()}ye.updateAllHeaders(!0),ye.xScrollToHighlit()},showUnnormalized:function(){document.getElementById("views").classList.remove("normalized"),f.matrix.updatescript();for(let s of f.textboxes)s.updatescript();N.anyhighlit()?L.repopulateTrees(...p.lowhigh(p.highlit())):L.clearTrees(),ye.updateAllHeaders(!0),ye.xScrollToHighlit()},toggleHeader:function(){let s=f.matrix.boxdiv.querySelector("tr.header");s.style.display==="none"?s.style.display="table-row":s.style.display="none"},updateHeaders(s){for(let l of s){let n=p.firstth(l),[t,r]=p.readings(l),a=n.querySelector("span.readings"),h=t<2?t:`${t}(${r.size})`;a.textContent=h}},updateAllHeaders(s=!1){let l=[...p.trs()],n=l.map(g=>p.trWalker(g)),t=[...p.tds(!1,l[0])],r=[...p.ths()],a=f.matrix.boxdiv.querySelector("tr.header"),h=function(){let g=document.createElement("th"),v=document.createElement("span");v.classList.add("readings"),g.appendChild(v);let B=document.createElement("form");return B.innerHTML='<div><input class="insignificant" type="checkbox">Insignificant</div><div><input class="binary" type="checkbox">Binary</div>',g.appendChild(B),a.appendChild(g),g};for(let g=0;g<t.length;g++){let v=g>=r.length?h():r[g],B=t[g];v.dataset.ref=B.dataset.n;let k=0,D=new Set;for(let Q of n){let te=Q.nextNode().textContent;te!==""&&(k++,D.add(te))}let V=k<2?k:`${k}(${D.size})`;v.querySelector("span.readings").textContent=V,s||(v.querySelector("input.insignificant").checked=!!B.dataset.insignificant,v.querySelector("input.binary").checked=!!B.dataset.binary)}if(r.length>t.length)for(let g=t.length;g<r.length;g++)a.removeChild(r[g])},xScrollToHighlit:function(){let s=p.highlit();s.size>0&&ye.xScroll([...s][0])},xScroll:function(s,l){if(!s)return;let n=l||p.firsttr(),t=p.firsttd(s,n),r=t.getBoundingClientRect(),a=f.matrix.boxdiv,g=a.getBoundingClientRect().right,v=n.querySelector("th").getBoundingClientRect(),B=v.right,k=r.right>g,D=r.left+.1<B;k&&t.scrollIntoView({inline:"end",block:"nearest"}),D&&(t.scrollIntoView({inline:"start",block:"nearest"}),a.scroll({left:a.scrollLeft-v.width}))}},ve={tei:function(s){let l=f.xml.createElementNS(x.teins,"TEI");l.setAttribute("n",s);let n=p.firsttext().cloneNode(!0);l.appendChild(n);for(let t of p.words(!1,n))for(t.removeAttribute("lemma");t.firstChild;)t.firstChild.remove();return l},emptycell:function(s){let l=document.createElement("td");return l.className="lemma",l.dataset.n=s,l},emptyword:function(s,l=f.xml){let n=l.createElementNS(x.teins,"w");return n.setAttribute("n",s),n},emptywords:function(s,l,n){let t=l||f.maxlemma,r=n||0;for(let a=r;a<=t;a++){let h=ve.emptyword(a);s.appendChild(h)}},row:function(s,l){let n=document.createElement("tr"),t=document.createElement("th");t.scope="row",t.draggable=!0,t.appendChild(document.createTextNode(s)),t.addEventListener("dragstart",de.thDragStart),n.dataset.n=s,n.appendChild(t);let r=p.firsttr();for(let a of r.querySelectorAll("td")){let h=document.createElement("td");h.dataset.n=a.dataset.n,h.className=a.className,l&&h.classList.add(l),n.appendChild(h)}return n}},ke={create:function(s){let l=document.createElement("div");return l.classList.add("contextmenu"),l.style.left=s.clientX-12+"px",l.style.top=s.clientY-22+"px",l},remove:function(){for(let s of document.querySelectorAll(".contextmenu"))s.parentNode.removeChild(s)},show:function(s){document.body.appendChild(s)},populate:function(s,l){let n=document.createElement("ul");for(let t of l){let r=document.createElement("li");if(t.hasOwnProperty("cond")){let a=document.createRange().createContextualFragment('<form><input type="checkbox"'+(t.cond()?" checked":"")+"></form>");r.appendChild(a)}if(t.hasOwnProperty("toggle")){let a=t.toggle()?t.text:t.alt;r.appendChild(document.createTextNode(a))}else r.appendChild(document.createTextNode(t.text));r.addEventListener("mouseup",t.func),n.appendChild(r)}s.appendChild(n)}};class W{constructor(l){this.name=l,this.box=document.createElement("div"),this.box.classList.add("menubox");let n=document.createElement("div");n.classList.add("heading"),n.appendChild(document.createTextNode(l)),this.box.appendChild(n),n.addEventListener("mouseover",this.checkConditions.bind(this)),this.box.addEventListener("mouseup",this.click.bind(this)),this.items=new Map,this.conditions=new Map}populate(l){let n=this.box.querySelector("ul")||function(t){let r=document.createElement("ul");return t.box.appendChild(r),r}(this);for(let t of l){let r=document.createElement("li");if(t.hasOwnProperty("checkbox")){let a=document.createElement("form"),h=document.createElement("input");h.type="checkbox",h.addEventListener("click",g=>g.preventDefault()),a.appendChild(h),r.appendChild(a),r.appendChild(document.createTextNode(t.text)),this.conditions.set(h,t.checkbox)}else if(t.hasOwnProperty("toggle")){let a=document.createElement("span");a.appendChild(document.createTextNode(t.text)),a.dataset.text=t.text,a.dataset.alt=t.alt,this.conditions.set(a,t.toggle),r.appendChild(a)}else r.appendChild(document.createTextNode(t.text));t.hasOwnProperty("greyout")&&this.conditions.set(r,t.greyout),this.items.set(r,t.func),n.appendChild(r)}}click(l){let n=l.target.tagName==="LI"?l.target:l.target.closest("li");if(n&&!n.classList.contains("greyedout")){let t=this.items.get(n);t&&(t(l),this.checkConditions())}}checkConditions(){let l=new Map;for(let[n,t]of this.conditions){let r=l.get(t)||function(){let a=t();return l.set(t,a),a}();n.tagName==="INPUT"?n.checked=r:n.tagName==="SPAN"?r?n.textContent=n.dataset.alt:n.textContent=n.dataset.text:n.tagName==="LI"&&(r?n.classList.remove("greyedout"):n.classList.add("greyedout"))}}}class Ce{constructor(l){this.name=l,this.script=0}show(){f.descs.appendChild(this.descbox),N.normalizedView()&&ye.showNormalized(this),f.viewdiv.appendChild(this.boxdiv),this.closed=!1}clear(){for(;this.boxdiv.firstChild;)this.boxdiv.removeChild(this.boxdiv.firstChild);this.svgcontainer&&(this.clearsvg(),this.boxdiv.appendChild(this.svgcontainer))}destroy(){f.viewdiv.removeChild(this.boxdiv),f.descs.removeChild(this.descbox);let l=f.trees.indexOf(this);l>-1&&f.trees.splice(l,1);let n=f.textboxes.indexOf(this);n>-1&&f.textboxes.splice(n,1),this.closed=!0,this.name==="Matrix"&&(document.getElementById("matrixmenu").style.display="block"),P(),L.rehighlight()}pullout(){this.destroy();let l="menubar=no,location=no,status=no,height=620,width=620,scrollbars=yes,centerscreen=yes",n=window.mainWindow?window.mainWindow.comboView.getWindows().length:f.windows.length,t=window.open("slave.html","slave"+n,l);t.mainWindow=window.mainWindow?window.mainWindow:window,t.startbox=this.text?{text:{name:this.name}}:{tree:this.name},t.mainWindow.comboView.addWindow(t)}makeDescBox(){let l=document.createElement("div"),n=document.createElement("div");n.classList.add("closer"),n.innerHTML="x",n.title="close";let t=document.createElement("div");t.classList.add("scripter"),t.innerHTML="A",t.title="change script",l.appendChild(n),l.appendChild(t),l.appendChild(document.createTextNode(this.desc)),this.descbox=l,n.addEventListener("click",this.destroy.bind(this)),t.addEventListener("click",this.cyclescript.bind(this))}cyclescript(){this.script=this.script+1,this.script===x.scripts.length&&(this.script=0);let l=this.descbox.querySelector(".scripter");this.script===0?l.innerHTML="A":l.innerHTML=to[x.scripts[this.script]]("a"),x.scripts[this.script]==="grantha"?l.classList.add("grantha"):l.classList.remove("grantha"),this.updatescript()}updatescript(){let l=this.boxdiv.querySelectorAll(".lemma,.tree-lemma");for(let n of l){let t=n.dataset.hasOwnProperty("normal");if(!t&&n.textContent.trim()==="")continue;let r=function(){if(N.normalizedView()&&t){let h=document.createElement("span");return h.appendChild(document.createTextNode(n.dataset.normal)),h}else return n.IAST.cloneNode(!0)}(),a=this.script===0?r:Ot(r,x.scripts[this.script]);for(n.innerHTML="";a.firstChild;)n.appendChild(a.firstChild)}x.scripts[this.script]==="grantha"?this.boxdiv.classList.add("grantha"):this.boxdiv.classList.remove("grantha"),this.boxdiv.classList.contains("matrix")&&ye.xScrollToHighlit()}}class Se extends Ce{constructor(l,n){super(`#${l} #${n}`);this.stemmaid=l,this.id=n,this.nexml=f.treelist.get(this.name).cloneNode(!0),this.desc=this.nexml.querySelector("tree").getAttribute("label")}init(){this.makeDescBox();let l=document.createElement("div");l.classList.add("tree-box");var n,t=0;do n="tree"+t,t++;while(document.getElementById(n));l.id=n,this.boxdiv=l,this.boxdiv.addEventListener("mouseover",de.treeMouseover.bind(this)),this.boxdiv.addEventListener("click",de.treeClick),this.svgcontainer=document.createElement("div"),this.svgcontainer.id=this.boxdiv.id+"container",this.boxdiv.appendChild(this.svgcontainer),this.boxdiv.myTree=this,this.calcPaths(),this.jiggleroot(),this.findLevels(),this.labelInternal()}show(){f.descs.appendChild(this.descbox),f.viewdiv.appendChild(this.boxdiv)}jiggleroot(){let l=this.nexml.evaluate('//nex:node[@root="true"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,n=this.nexml.evaluate('//nex:edge[@source="'+l.id+'"]|//nex:edge[@target="'+l.id+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);if(n.snapshotLength===3){var t,r;for(let a=0;a<n.snapshotLength;a++){let h=n.snapshotItem(a),g=h.getAttribute("source"),v=h.getAttribute("target"),B=this.nexml.evaluate('//nex:node[@id="'+g+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,k=this.nexml.evaluate('//nex:node[@id="'+v+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!B.hasAttribute("otu")&&!k.hasAttribute("otu")){t=h,r=v===l.id?"target":"source";break}}if(t){let a=this.nexml.createElementNS(l.namespaceURI,"node");a.id="fakeroot",a.setAttribute("root","true"),l.removeAttribute("root"),l.parentElement.insertBefore(a,l);let h=this.nexml.createElementNS(l.namespaceURI,"edge");h.id="newrootedge",h.setAttribute("length","0"),h.setAttribute("source","fakeroot"),h.setAttribute("target",l.id),l.parentElement.insertBefore(h,t),t.setAttribute(r,a.id)}}}findLevels(){let l=this.nexml.querySelectorAll("edge"),n=[...this.nexml.querySelectorAll("node[otu]")],t=this.nexml,r=[n],a=function(v,B){let k=v.map(xe=>xe.id),D=new Map,V=new Map,Q=[];for(let xe of B){let be=xe.getAttribute("target"),Ae=xe.getAttribute("source"),we=(()=>k.indexOf(be)!==-1?{ancestor:t.getElementById(Ae),child:t.getElementById(be)}:k.indexOf(Ae)!==-1?{ancestor:t.getElementById(be),child:t.getElementById(Ae)}:null)();if(we!==null)if(V.has(we.ancestor)){let Ne=V.get(we.ancestor);D.set(we.ancestor,[Ne.child,we.child]),Q.push(xe),Q.push(Ne.edge)}else V.set(we.ancestor,{child:we.child,edge:xe})}let te=[...D.keys()],ue=[...V.keys()].reduce((xe,be)=>(te.indexOf(be)===-1&&xe.push(V.get(be).child),xe),[]),me=[...B].reduce((xe,be)=>(Q.indexOf(be)===-1&&xe.push(be),xe),[]);return{match:D,remainder:[...new Set(ue)],edges:me}};var h=n,g=l;do{let v=a(h,g);r.push(v.match),h=[...v.match.keys(),...v.remainder],g=v.edges}while(g.length>0);this.levels=p.serializedlevels(r)}labelInternal(){for(let l of this.nexml.querySelectorAll("node:not([label])"))l.setAttribute("label",l.id)}fitch(){let l=new Map(this.levels[0].map(t=>{let r=N.normalizedView(),a=this.nexml.querySelector(`node[id="${t}"]`).getAttribute("label"),h=this.boxdiv.querySelector(`span.tree-lemma[data-id="${a}"]`),g=h?p.htmlreading(h,r):void 0;return[t,g]})),n=new N1(l,this.levels).run();for(let[t,r]of n){let a=this.boxdiv.querySelector(`span.internal[data-key="${t}"]`);a.dataset.reconstructed=r}}clearsvg(){for(;this.svgcontainer.firstChild;)this.svgcontainer.removeChild(this.svgcontainer.firstChild)}removecolors(){let l=this.nexml.querySelectorAll("node[color]");for(let n=0;n<l.snapshotLength;n++)l.snapshotItem(n).removeAttribute("color")}drawlines(l,n){if(this.removecolors(),l){let g=this.getPath(...l.split(";")).path,v=new Set;for(let B of g)v.add(B.getAttribute("target")),v.add(B.getAttribute("source"));for(let B of v){let k=this.nexml.evaluate('//nex:node[@id="'+B+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;k.getAttribute("root")||k.setAttribute("color",n)}}let t=parseInt(window.getComputedStyle(this.svgcontainer,null).width)-15,r=parseInt(window.getComputedStyle(this.boxdiv,null).height)-10,a=function(){return r<600?600:r}();T.PhyloCanvas.Render.Style.line.stroke="rgb(162,164,170)",this.phylocanvas=new T.PhyloCanvas({nexml:this.nexml,fileSource:!0},this.svgcontainer.id,t,a);let h=this.svgcontainer.querySelectorAll('path:not([stroke="#a2a4aa"])');for(let g of h)g.style.strokeWidth="2"}draw(){this.clear(),this.drawlines(),this.makeLabels()}clearLabels(){for(let l of this.boxdiv.firstChild.querySelectorAll("text"))l.parentElement.removeChild(l)}makeLabels(){let l=[...p.texts()],n=new Set(l.map(r=>r.parentNode.getAttribute("n"))),t=new Map(l.filter(r=>r.parentNode.hasAttribute("corresp")&&r.parentNode.getAttribute("corresp")===this.name).map(r=>[r.parentNode.getAttribute("select").replace(/^#/,""),r.parentNode.getAttribute("n")]));for(let r of this.boxdiv.firstChild.querySelectorAll("text")){let a=document.createElement("div");a.setAttribute("class","tree-div");let h=parseInt(r.getAttribute("x")-5),g=parseInt(r.getAttribute("y"))-15;a.style.left=h+"px",a.style.top=g+"px";let v=r.textContent.trim();n.has(v)?a.innerHTML=`<span class="witness inactive" data-key="${v}">${v}</span><span class="tree-lemma ${v}" data-id="${v}"></span>`:v!=="fakeroot"?t.has(v)?a.innerHTML=`<span class="internal reconstructed" data-key="${v}" data-label="${t.get(v)}">${t.get(v)}</span><span class="tree-lemma invisible ${v}" data-id="${v}" data-label="${t.get(v)}"></span>`:a.innerHTML=`<span class="internal" data-key="${v}">0</span>`:a.innerHTML=`<span class="internal" data-key="${v}"></span>`,r.parentElement.removeChild(r),this.boxdiv.appendChild(a)}}clearlemmata(){for(let l of this.boxdiv.querySelectorAll("span.tree-lemma"))l.innerHTML="",l.dataset.hasOwnProperty("normal")&&delete l.dataset.normal,l.IAST=l.cloneNode(!0)}populate(l,n){let t=p.texts();for(let h of t){let g=h.parentNode.getAttribute("n"),v=this.boxdiv.querySelector(`span.tree-lemma[data-id="${g}"]`)||this.boxdiv.querySelector(`span.tree-lemma[data-label="${g}"]`);if(!!v){if(v.hasOwnProperty("IAST")||(v.IAST=v.cloneNode(!0)),v.IAST.innerHTML="",n){let B=[],k=[];var r=!1;for(let D=l;D<=n;D++){let V=p.firstword(D,h);B.push(V.innerHTML),V.hasAttribute("lemma")&&(k[D-l]=V.getAttribute("lemma")),V.hasAttribute("emended")&&(r=!0)}if(v.IAST.appendChild(w.transformString(B.join(" ").replace(/\s+/g," ").trim(),w.sheets.tree)),k.length!==0){let D=B.slice(0).map((Q,te)=>k.hasOwnProperty(te)?k[te]:Q),V=document.createElement("span");V.appendChild(w.transformString(D.join(" ").replace(/\s+/g," ").trim(),w.sheets.tree)),v.dataset.normal=V.innerHTML}r?v.dataset.emended=!0:v.dataset.hasOwnProperty("emended")&&delete v.dataset.emended}else{let B=p.firstword(l,h);v.IAST.appendChild(w.transformString(B.innerHTML,w.sheets.tree)),B.hasAttribute("lemma")?v.dataset.normal=B.getAttribute("lemma"):delete v.dataset.normal,B.hasAttribute("emended")?v.dataset.emended=!0:v.dataset.hasOwnProperty("emended")&&delete v.dataset.emended}N.normalizedView()&&v.dataset.hasOwnProperty("normal")?v.innerHTML=v.dataset.normal:v.innerHTML=v.IAST.innerHTML}}let a=this.boxdiv.querySelectorAll(".inactive");for(let h of a)h.classList.remove("inactive");this.fitch()}calcPaths(){this.nodes=[],this.paths=[],this.longest={path:[]},this.nsResolver=this.nexml.createNSResolver(this.nexml.ownerDocument==null?this.nexml.documentElement:this.nexml.ownerDocument.documentElement);let l=this.nexml.evaluate("//nex:node[@label]",this.nexml,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);for(let n=0;n<l.snapshotLength;n++)this.nodes.push(l.snapshotItem(n));for(let n=0;n<this.nodes.length;n++){let t=this.nodes[n],r=t.getAttribute("label"),a=t.id;for(let h=n+1;h<this.nodes.length;h++){let g=this.nodes[h],v=g.getAttribute("label"),B=g.id;this.paths.push({nodes:[r,v],path:this.pathFind(a,B)})}}for(let n of Object.keys(this.paths))this.paths[n].path.length>this.longest.path.length&&(this.longest=this.paths[n])}pathFind(l,n,t){t||(t=[]);let r=this.nexml.evaluate('//nex:edge[@source="'+l+'"]|//nex:edge[@target="'+l+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);var a;for(let h=0;h<r.snapshotLength;h++){let g=r.snapshotItem(h);if(a=[g],t.indexOf(g.id)!=-1)continue;t.push(g.id);let v=g.getAttribute("source")!==l?g.getAttribute("source"):g.getAttribute("target");if(v===n)return a;if(!this.nexml.evaluate('//nex:node[@id="'+v+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.hasAttribute("otu")){let k=this.pathFind(v,n,t);if(k)return a.concat(k);continue}}return!1}analyzeVariants(l,n){let t=[],r=[],a=function(k){return k.startsWith("<lg")?w.transformString(k,w.sheets.lg).firstChild.data.slice(1):k},h=function(k){return k.map(D=>a(D)).join(" ").replace(/\s+/g," ").trim()},g=N.normalizedView()?function(k,D){let V=p.firstword(k,D);return V.hasAttribute("lemma")?V.getAttribute("lemma"):V.textContent}:function(k,D){return p.firstword(k,D).textContent};for(let k of p.texts()){let D=k.parentNode.getAttribute("n");if(!this.nexml.querySelector(`otu[label="${D}"]`))continue;let V=n?h(p.range(l,n).map(Q=>g(Q,k))):a(g(l,k));V===""?t.hasOwnProperty("")?t[""].push(D):t[""]=[D]:t.hasOwnProperty(V)?t[V].push(D):t[V]=[D]}let v={};for(let k of Object.keys(t)){var B={length:0,branch_length:0,paths:[]};if(t[k].length===1)B=!1;else for(let D=0;D<t[k].length;D++)for(let V=D+1;V<t[k].length;V++){let Q=this.getPath(t[k][D],t[k][V]);if(Q.hasOwnProperty("path")||alert(Q),Q.path.length===B.length){let te=this.calcBranchLength(Q.path);te===B.branch_length?B.paths.push(Q):te>B.branch_length&&(B={length:Q.path.length,branch_length:te,paths:[Q]})}else Q.path.length>B.length&&(B={length:Q.path.length,branch_length:this.calcBranchLength(Q.path),paths:[Q]})}v[k]=B}for(let k of Object.keys(r))v[k]=r[k];return v}getPath(l,n){for(let t of this.paths)if(t.nodes.indexOf(l)>-1&&t.nodes.indexOf(n)>-1)return t;return!1}calcBranchLength(l){return l.map(n=>n.getAttribute("length")).reduce((n,t)=>parseFloat(n)+parseFloat(t))}pickColour(l,n,t,r){var a=n,h=t,g=l;r&&(g=g*2,g>=1&&(g-=1,a=t,h=r));let v=h.red-a.red,B=h.green-a.green,k=h.blue-a.blue,D={red:parseInt(Math.floor(a.red+v*g),10),green:parseInt(Math.floor(a.green+B*g),10),blue:parseInt(Math.floor(a.blue+k*g),10)};return"rgb("+D.red+","+D.green+","+D.blue+")"}colourizeVariants(l,n){let t=this.analyzeVariants(l,n);for(let r of this.boxdiv.querySelectorAll("span.tree-lemma")){let a=t.hasOwnProperty(r.dataset.id)?t[t[r.dataset.id]]:t[r.textContent],h={red:252,green:70,blue:107},g={red:63,green:94,blue:251};a?(r.style.color=this.pickColour(a.length/this.longest.path.length,g,h),r.dataset.length=a.length,r.dataset.branch_length=a.branch_length,r.dataset.nodes=a.paths[0].nodes.join(";")):(r.style.color=this.pickColour(1/this.longest.path.length,g,h),r.dataset.length=0,r.dataset.branch_length=0,r.dataset.nodes=""),r.textContent.trim()===""?(r.innerHTML='<span lang="en">Â Â Â </span>',r.style.backgroundColor=r.style.color):r.style.backgroundColor=""}}}class ee extends Ce{constructor(l){super(l);this.desc=l,this.text=p.firsttext(l)}init(){this.makeTextBox(),this.makeDescBox(),this.descbox.style.maxWidth="595px",this.descbox.style.paddingLeft="5px",this.boxdiv.addEventListener("mouseup",de.textMouseup)}refresh(){this.boxdiv.innerHTML="",this.boxdiv.appendChild(w.sheets.lemma.transformToFragment(this.text,document)),H(this.boxdiv);for(let l of p.lemmata(!1,this.boxdiv))l.IAST=l.cloneNode(!0);this.updatescript()}makeTextBox(){let l=document.createElement("div");l.dataset.id=this.name,l.classList.add("text-box"),l.appendChild(w.sheets.lemma.transformToFragment(this.text,document)),H(l);for(let n of p.lemmata(!1,l))n.IAST=n.cloneNode(!0);this.boxdiv=l}}class X extends Ce{constructor(){super(name);this.desc="Matrix",this.name="Matrix",this.makeDescBox(),this.makeViewBox(),this.descbox.style.maxWidth="100vw",this.descbox.style.paddingLeft="5px"}init(){this.makeTable()}makeViewBox(){let l=document.createElement("div");l.classList.add("matrix"),l.dataset.id=this.name,this.boxdiv=l}makeTable(){let l=document.createElement("div");l.classList.add("scroller"),l.append(w.sheets.matrix.transformToFragment(f.xml,document));for(let v of l.getElementsByTagName("th"))v.addEventListener("dragstart",de.thDragStart);l.addEventListener("dragenter",de.trDragEnter),l.addEventListener("dragleave",de.trDragLeave),l.addEventListener("dragover",v=>v.preventDefault()),l.addEventListener("drop",de.trDragDrop),l.addEventListener("mousedown",de.matrixMousedown);let n=document.createElement("tr");n.classList.add("header");let t=document.createElement("td");t.classList.add("anchor"),n.appendChild(t);let r=[...p.trs(l)],a=r.map(v=>p.trWalker(v)),h=p.tds(!1,r[0]);for(let v of h){let B=document.createElement("th");B.dataset.ref=v.dataset.n;let k=0,D=new Set;for(let ue of a){let me=ue.nextNode();me.IAST=me.cloneNode(!0);let xe=me.textContent;xe!==""&&(k++,D.add(xe))}let V=k<2?k:`${k}(${D.size})`,Q=document.createElement("span");Q.classList.add("readings"),Q.appendChild(document.createTextNode(V)),B.appendChild(Q);let te=document.createElement("form");te.innerHTML='<div><input class="insignificant" title="insignificant" type="checkbox"'+(v.dataset.insignificant?"checked":"")+'></div><div><input class="binary" title="binary" type="checkbox"'+(v.dataset.binary?"checked":"")+"></div>",B.appendChild(te),n.appendChild(B)}let g=l.querySelector("tbody");g.insertBefore(n,g.firstChild),this.boxdiv.append(l)}}return{slaveinit:function(){comboView.init(),window.startbox!==void 0&&(window.startbox.tree?b.tree(window.startbox.tree.stemmaid,window.startbox.tree.id):window.startbox.text&&b.text(window.startbox.text.name,window.startbox.text.map))},maininit:function(){document.getElementById("comboview").style.display="block",comboView.init(),d()},init:function(){f.viewdiv=document.getElementById("views"),f.descs=document.getElementById("descs"),f.viewdiv.addEventListener("click",de.textClick),document.addEventListener("keydown",de.keyDown,{capture:!0}),document.addEventListener("contextmenu",de.rightClick),document.addEventListener("mouseup",ke.remove)},getWindows:function(){return f.windows},addWindow:function(s){f.windows.push(s)},getViewdiv:function(){return f.viewdiv},getTrees:function(){return f.trees}}}();window.addEventListener("load",window.comboView.maininit);
//# sourceMappingURL=script.js.map
