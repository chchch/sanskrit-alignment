var Jt={};(function(f){"use strict";f.__type__="csv";var S=typeof jQuery!="undefined"&&jQuery.Deferred||typeof _!="undefined"&&_.Deferred||function(){var s,u,v=new Promise(function(b,B){s=b,u=B});return{resolve:s,reject:u,promise:function(){return v}}};f.fetch=function(s){var u=new S;if(s.file){var v=new FileReader,b=s.encoding||"UTF-8";v.onload=function(D){var M=f.extractFields(f.parse(D.target.result,s),s);M.useMemoryStore=!0,M.metadata={filename:s.file.name},u.resolve(M)},v.onerror=function(D){u.reject({error:{message:"Failed to load file. Code: "+D.target.error.code}})},v.readAsText(s.file,b)}else if(s.data){var B=f.extractFields(f.parse(s.data,s),s);B.useMemoryStore=!0,u.resolve(B)}else if(s.url){var q=window.fetch||function(D){var M=jQuery.get(D),L={then:function(W){return M.done(W),L},catch:function(W){return M.fail(W),L}};return L};q(s.url).then(function(D){return D.text?D.text():D}).then(function(D){var M=f.extractFields(f.parse(D,s),s);M.useMemoryStore=!0,u.resolve(M)}).catch(function(D,M){u.reject({error:{message:"Failed to load file. "+D.statusText+". Code: "+D.status,request:D}})})}return u.promise()},f.extractFields=function(s,u){return u.noHeaderRow!==!0&&s.length>0?{fields:s[0],records:s.slice(1)}:{records:s}},f.normalizeDialectOptions=function(s){var u={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var v in s)v==="trim"?u.skipinitialspace=s.trim:u[v.toLowerCase()]=s[v];return u},f.parse=function(s,u){(!u||u&&!u.lineterminator)&&(s=f.normalizeLineTerminator(s,u));var v=f.normalizeDialectOptions(u);s=d(s,v.lineterminator);var b="",B=!1,q=!1,D="",M=[],L=[],W,Y;for(Y=function($){return q!==!0&&($===""?$=null:v.skipinitialspace===!0&&($=C($)),T.test($)?$=parseInt($,10):O.test($)&&($=parseFloat($,10))),$},W=0;W<s.length;W+=1)b=s.charAt(W),B===!1&&(b===v.delimiter||b===v.lineterminator)?(D=Y(D),M.push(D),b===v.lineterminator&&(L.push(M),M=[]),D="",q=!1):b!==v.quotechar?D+=b:B?s.charAt(W+1)===v.quotechar?(D+=v.quotechar,W+=1):B=!1:(B=!0,q=!0);return D=Y(D),M.push(D),L.push(M),v.skipinitialrows&&(L=L.slice(v.skipinitialrows)),L},f.normalizeLineTerminator=function(s,u){return u=u||{},u.lineterminator?s:s.replace(/(\r\n|\n|\r)/gm,`
`)},f.objectToArray=function(s){for(var u=[],v=[],b=[],B=0;B<s.fields.length;B++){var q=s.fields[B].id;b.push(q);var D=s.fields[B].label?s.fields[B].label:q;v.push(D)}u.push(v);for(var B=0;B<s.records.length;B++){for(var M=[],L=s.records[B],W=0;W<b.length;W++)M.push(L[b[W]]);u.push(M)}return u},f.serialize=function(s,u){var v=null;s instanceof Array?v=s:v=f.objectToArray(s);var b=f.normalizeDialectOptions(u),B="",q="",D="",M="",L,W,Y;for(Y=function($){return $===null?$="":typeof $=="string"&&w.test($)?(b.doublequote&&($=$.replace(/"/g,'""')),$=b.quotechar+$+b.quotechar):typeof $=="number"&&($=$.toString(10)),$},L=0;L<v.length;L+=1)for(B=v[L],W=0;W<B.length;W+=1)q=Y(B[W]),W===B.length-1?(D+=q,M+=D+b.lineterminator,D=""):D+=q+b.delimiter,q="";return M};var T=/^\d+$/,O=/^\d*\.\d+$|^\d+\.\d*$/,w=/^\s|\s$|,|"|\n/,C=function(){return String.prototype.trim?function(s){return s.trim()}:function(s){return s.replace(/^\s*/,"").replace(/\s*$/,"")}}();function d(s,u){return s.charAt(s.length-u.length)!==u?s:s.substring(0,s.length-u.length)}})(Jt);function G1(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}function X1(f,S,T){return T={path:S,exports:{},require:function(O,w){return W1(O,w==null?T.path:w)}},f(T,T.exports),T.exports}function W1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Y1=X1(function(f,S){(function(T,O){f.exports=O()})(window,function(){return function(T){var O={};function w(C){if(O[C])return O[C].exports;var d=O[C]={i:C,l:!1,exports:{}};return T[C].call(d.exports,d,d.exports,w),d.l=!0,d.exports}return w.m=T,w.c=O,w.d=function(C,d,s){w.o(C,d)||Object.defineProperty(C,d,{enumerable:!0,get:s})},w.r=function(C){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},w.t=function(C,d){if(1&d&&(C=w(C)),8&d||4&d&&typeof C=="object"&&C&&C.__esModule)return C;var s=Object.create(null);if(w.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:C}),2&d&&typeof C!="string")for(var u in C)w.d(s,u,function(v){return C[v]}.bind(null,u));return s},w.n=function(C){var d=C&&C.__esModule?function(){return C.default}:function(){return C};return w.d(d,"a",d),d},w.o=function(C,d){return Object.prototype.hasOwnProperty.call(C,d)},w.p="",w(w.s=1)}([function(T,O,w){var C,d;C=[w(2)],(d=function(s){function u(e){if(u.is(e,"function"))return v?e():s.on("raphael.DOMload",e);if(u.is(e,l))return u._engine.create[$](u,e.splice(0,3+u.is(e[0],a))).add(e);var t=Array.prototype.slice.call(arguments,0);if(u.is(t[t.length-1],"function")){var o=t.pop();return v?o.call(u._engine.create[$](u,t)):s.on("raphael.DOMload",function(){o.call(u._engine.create[$](u,t))})}return u._engine.create[$](u,arguments)}u.version="2.3.0",u.eve=s;var v,b,B=/[, ]+/,q={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},D=/\{(\d+)\}/g,M="hasOwnProperty",L={doc:document,win:window},W={was:Object.prototype[M].call(L.win,"Raphael"),is:L.win.Raphael},Y=function(){this.ca=this.customAttributes={}},$="apply",j="concat",se="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,ue="",pe=" ",U=String,oe="split",ne="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[oe](pe),F={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},me=U.prototype.toLowerCase,de=Math,be=de.max,X=de.min,xe=de.abs,Ce=de.pow,ee=de.PI,a="number",l="array",p=Object.prototype.toString,n=(u._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),r={NaN:1,Infinity:1,"-Infinity":1},i=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,h=de.round,g=parseFloat,x=parseInt,A=U.prototype.toUpperCase,I=u._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},N=u._availableAnimAttrs={blur:a,"clip-rect":"csv",cx:a,cy:a,fill:"colour","fill-opacity":a,"font-size":a,height:a,opacity:a,path:"path",r:a,rx:a,ry:a,stroke:"colour","stroke-opacity":a,"stroke-width":a,transform:"transform",width:a,x:a,y:a},V=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,G={hs:1,rg:1},re=/,?([achlmqrstvxz]),?/gi,ge=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ye=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ve=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,_e=(u._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),Se=function(e,t){return g(e)-g(t)},Ae=function(e){return e},ke=u._rectPath=function(e,t,o,c,m){return m?[["M",e+m,t],["l",o-2*m,0],["a",m,m,0,0,1,m,m],["l",0,c-2*m],["a",m,m,0,0,1,-m,m],["l",2*m-o,0],["a",m,m,0,0,1,-m,-m],["l",0,2*m-c],["a",m,m,0,0,1,m,-m],["z"]]:[["M",e,t],["l",o,0],["l",0,c],["l",-o,0],["z"]]},Le=function(e,t,o,c){return c==null&&(c=o),[["M",e,t],["m",0,-c],["a",o,c,0,1,1,0,2*c],["a",o,c,0,1,1,0,-2*c],["z"]]},Me=u._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return Le(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return Le(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return ke(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return ke(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return ke(t.x,t.y,t.width,t.height)},set:function(e){var t=e._getBBox();return ke(t.x,t.y,t.width,t.height)}},Ie=u.mapPath=function(e,t){if(!t)return e;var o,c,m,k,E,P,R;for(m=0,E=(e=St(e)).length;m<E;m++)for(k=1,P=(R=e[m]).length;k<P;k+=2)o=t.x(R[k],R[k+1]),c=t.y(R[k],R[k+1]),R[k]=o,R[k+1]=c;return e};if(u._g=L,u.type=L.win.SVGAngle||L.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",u.type=="VML"){var Ne,qe=L.doc.createElement("div");if(qe.innerHTML='<v:shape adj="1"/>',(Ne=qe.firstChild).style.behavior="url(#default#VML)",!Ne||typeof Ne.adj!="object")return u.type=ue;qe=null}function ze(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var o in e)e[M](o)&&(t[o]=ze(e[o]));return t}u.svg=!(u.vml=u.type=="VML"),u._Paper=Y,u.fn=b=Y.prototype=u.prototype,u._id=0,u.is=function(e,t){return(t=me.call(t))=="finite"?!r[M](+e):t=="array"?e instanceof Array:t=="null"&&e===null||t==typeof e&&e!==null||t=="object"&&e===Object(e)||t=="array"&&Array.isArray&&Array.isArray(e)||p.call(e).slice(8,-1).toLowerCase()==t},u.angle=function(e,t,o,c,m,k){if(m==null){var E=e-o,P=t-c;return E||P?(180+180*de.atan2(-P,-E)/ee+360)%360:0}return u.angle(e,t,m,k)-u.angle(o,c,m,k)},u.rad=function(e){return e%360*ee/180},u.deg=function(e){return Math.round(180*e/ee%360*1e3)/1e3},u.snapTo=function(e,t,o){if(o=u.is(o,"finite")?o:10,u.is(e,l)){for(var c=e.length;c--;)if(xe(e[c]-t)<=o)return e[c]}else{var m=t%(e=+e);if(m<o)return t-m;if(m>e-o)return t-m+e}return t};var Ye,wt;u.createUUID=(Ye=/[xy]/g,wt=function(e){var t=16*de.random()|0;return(e=="x"?t:3&t|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Ye,wt).toUpperCase()}),u.setWindow=function(e){s("raphael.setWindow",u,L.win,e),L.win=e,L.doc=L.win.document,u._engine.initWin&&u._engine.initWin(L.win)};var Je=function(e){if(u.vml){var t,o=/^\s+|\s+$/g;try{var c=new ActiveXObject("htmlfile");c.write("<body>"),c.close(),t=c.body}catch(E){t=createPopup().document.body}var m=t.createTextRange();Je=Fe(function(E){try{t.style.color=U(E).replace(o,ue);var P=m.queryCommandValue("ForeColor");return"#"+("000000"+(P=(255&P)<<16|65280&P|(16711680&P)>>>16).toString(16)).slice(-6)}catch(R){return"none"}})}else{var k=L.doc.createElement("i");k.title="Raphaël Colour Picker",k.style.display="none",L.doc.body.appendChild(k),Je=Fe(function(E){return k.style.color=E,L.doc.defaultView.getComputedStyle(k,ue).getPropertyValue("color")})}return Je(e)},at=function(){return"hsb("+[this.h,this.s,this.b]+")"},ot=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ct=function(){return this.hex},lt=function(e,t,o){if(t==null&&u.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(o=e.b,t=e.g,e=e.r),t==null&&u.is(e,"string")){var c=u.getRGB(e);e=c.r,t=c.g,o=c.b}return(e>1||t>1||o>1)&&(e/=255,t/=255,o/=255),[e,t,o]},Nt=function(e,t,o,c){var m={r:e*=255,g:t*=255,b:o*=255,hex:u.rgb(e,t,o),toString:Ct};return u.is(c,"finite")&&(m.opacity=c),m};function Fe(e,t,o){return function c(){var m=Array.prototype.slice.call(arguments,0),k=m.join("␀"),E=c.cache=c.cache||{},P=c.count=c.count||[];return E[M](k)?(function(R,H){for(var Q=0,ae=R.length;Q<ae;Q++)if(R[Q]===H)return R.push(R.splice(Q,1)[0])}(P,k),o?o(E[k]):E[k]):(P.length>=1e3&&delete E[P.shift()],P.push(k),E[k]=e[$](t,m),o?o(E[k]):E[k])}}u.color=function(e){var t;return u.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=u.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):u.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=u.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):(u.is(e,"string")&&(e=u.getRGB(e)),u.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(t=u.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=u.rgb2hsb(e),e.v=t.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=Ct,e},u.hsb2rgb=function(e,t,o,c){var m,k,E,P,R;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(o=e.b,t=e.s,c=e.o,e=e.h),P=(R=o*t)*(1-xe((e=(e*=360)%360/60)%2-1)),m=k=E=o-R,Nt(m+=[R,P,0,0,P,R][e=~~e],k+=[P,R,R,P,0,0][e],E+=[0,0,P,R,R,P][e],c)},u.hsl2rgb=function(e,t,o,c){var m,k,E,P,R;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(o=e.l,t=e.s,e=e.h),(e>1||t>1||o>1)&&(e/=360,t/=100,o/=100),P=(R=2*t*(o<.5?o:1-o))*(1-xe((e=(e*=360)%360/60)%2-1)),m=k=E=o-R/2,Nt(m+=[R,P,0,0,P,R][e=~~e],k+=[P,R,R,P,0,0][e],E+=[0,0,P,R,R,P][e],c)},u.rgb2hsb=function(e,t,o){var c,m;return e=(o=lt(e,t,o))[0],t=o[1],o=o[2],{h:(((m=(c=be(e,t,o))-X(e,t,o))==0?null:c==e?(t-o)/m:c==t?(o-e)/m+2:(e-t)/m+4)+360)%6*60/360,s:m==0?0:m/c,b:c,toString:at}},u.rgb2hsl=function(e,t,o){var c,m,k,E;return e=(o=lt(e,t,o))[0],t=o[1],o=o[2],c=((m=be(e,t,o))+(k=X(e,t,o)))/2,{h:(((E=m-k)==0?null:m==e?(t-o)/E:m==t?(o-e)/E+2:(e-t)/E+4)+360)%6*60/360,s:E==0?0:c<.5?E/(2*c):E/(2-2*c),l:c,toString:ot}},u._path2string=function(){return this.join(",").replace(re,"$1")},u._preload=function(e,t){var o=L.doc.createElement("img");o.style.cssText="position:absolute;left:-9999em;top:-9999em",o.onload=function(){t.call(this),this.onload=null,L.doc.body.removeChild(this)},o.onerror=function(){L.doc.body.removeChild(this)},L.doc.body.appendChild(o),o.src=e};function Qe(){return this.hex}function ct(e,t){for(var o=[],c=0,m=e.length;m-2*!t>c;c+=2){var k=[{x:+e[c-2],y:+e[c-1]},{x:+e[c],y:+e[c+1]},{x:+e[c+2],y:+e[c+3]},{x:+e[c+4],y:+e[c+5]}];t?c?m-4==c?k[3]={x:+e[0],y:+e[1]}:m-2==c&&(k[2]={x:+e[0],y:+e[1]},k[3]={x:+e[2],y:+e[3]}):k[0]={x:+e[m-2],y:+e[m-1]}:m-4==c?k[3]=k[2]:c||(k[0]={x:+e[c],y:+e[c+1]}),o.push(["C",(-k[0].x+6*k[1].x+k[2].x)/6,(-k[0].y+6*k[1].y+k[2].y)/6,(k[1].x+6*k[2].x-k[3].x)/6,(k[1].y+6*k[2].y-k[3].y)/6,k[2].x,k[2].y])}return o}u.getRGB=Fe(function(e){if(!e||(e=U(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Qe};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Qe};!G[M](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=Je(e));var t,o,c,m,k,E,P=e.match(n);return P?(P[2]&&(c=x(P[2].substring(5),16),o=x(P[2].substring(3,5),16),t=x(P[2].substring(1,3),16)),P[3]&&(c=x((k=P[3].charAt(3))+k,16),o=x((k=P[3].charAt(2))+k,16),t=x((k=P[3].charAt(1))+k,16)),P[4]&&(E=P[4][oe](V),t=g(E[0]),E[0].slice(-1)=="%"&&(t*=2.55),o=g(E[1]),E[1].slice(-1)=="%"&&(o*=2.55),c=g(E[2]),E[2].slice(-1)=="%"&&(c*=2.55),P[1].toLowerCase().slice(0,4)=="rgba"&&(m=g(E[3])),E[3]&&E[3].slice(-1)=="%"&&(m/=100)),P[5]?(E=P[5][oe](V),t=g(E[0]),E[0].slice(-1)=="%"&&(t*=2.55),o=g(E[1]),E[1].slice(-1)=="%"&&(o*=2.55),c=g(E[2]),E[2].slice(-1)=="%"&&(c*=2.55),(E[0].slice(-3)=="deg"||E[0].slice(-1)=="°")&&(t/=360),P[1].toLowerCase().slice(0,4)=="hsba"&&(m=g(E[3])),E[3]&&E[3].slice(-1)=="%"&&(m/=100),u.hsb2rgb(t,o,c,m)):P[6]?(E=P[6][oe](V),t=g(E[0]),E[0].slice(-1)=="%"&&(t*=2.55),o=g(E[1]),E[1].slice(-1)=="%"&&(o*=2.55),c=g(E[2]),E[2].slice(-1)=="%"&&(c*=2.55),(E[0].slice(-3)=="deg"||E[0].slice(-1)=="°")&&(t/=360),P[1].toLowerCase().slice(0,4)=="hsla"&&(m=g(E[3])),E[3]&&E[3].slice(-1)=="%"&&(m/=100),u.hsl2rgb(t,o,c,m)):((P={r:t,g:o,b:c,toString:Qe}).hex="#"+(16777216|c|o<<8|t<<16).toString(16).slice(1),u.is(m,"finite")&&(P.opacity=m),P)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Qe}},u),u.hsb=Fe(function(e,t,o){return u.hsb2rgb(e,t,o).hex}),u.hsl=Fe(function(e,t,o){return u.hsl2rgb(e,t,o).hex}),u.rgb=Fe(function(e,t,o){function c(m){return m+.5|0}return"#"+(16777216|c(o)|c(t)<<8|c(e)<<16).toString(16).slice(1)}),u.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},o=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),o.hex},u.getColor.reset=function(){delete this.start},u.parsePathString=function(e){if(!e)return null;var t=je(e);if(t.arr)return He(t.arr);var o={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},c=[];return u.is(e,l)&&u.is(e[0],l)&&(c=He(e)),c.length||U(e).replace(ge,function(m,k,E){var P=[],R=k.toLowerCase();if(E.replace(ve,function(H,Q){Q&&P.push(+Q)}),R=="m"&&P.length>2&&(c.push([k][j](P.splice(0,2))),R="l",k=k=="m"?"l":"L"),R=="r")c.push([k][j](P));else for(;P.length>=o[R]&&(c.push([k][j](P.splice(0,o[R]))),o[R]););}),c.toString=u._path2string,t.arr=He(c),c},u.parseTransformString=Fe(function(e){if(!e)return null;var t=[];return u.is(e,l)&&u.is(e[0],l)&&(t=He(e)),t.length||U(e).replace(ye,function(o,c,m){var k=[];me.call(c),m.replace(ve,function(E,P){P&&k.push(+P)}),t.push([c][j](k))}),t.toString=u._path2string,t},this,function(e){if(!e)return e;for(var t=[],o=0;o<e.length;o++){for(var c=[],m=0;m<e[o].length;m++)c.push(e[o][m]);t.push(c)}return t});var je=function(e){var t=je.ps=je.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var o in t)t[M](o)&&o!=e&&(t[o].sleep--,!t[o].sleep&&delete t[o])}),t[e]};function ut(e,t,o,c,m){return e*(e*(-3*t+9*o-9*c+3*m)+6*t-12*o+6*c)-3*t+3*o}function Ue(e,t,o,c,m,k,E,P,R){R==null&&(R=1);for(var H=(R=R>1?1:R<0?0:R)/2,Q=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ae=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0,J=0;J<12;J++){var te=H*Q[J]+H,le=ut(te,e,o,m,E),ie=ut(te,t,c,k,P),K=le*le+ie*ie;Z+=ae[J]*de.sqrt(K)}return H*Z}function kt(e,t,o,c,m,k,E,P){if(!(be(e,o)<X(m,E)||X(e,o)>be(m,E)||be(t,c)<X(k,P)||X(t,c)>be(k,P))){var R=(e-o)*(k-P)-(t-c)*(m-E);if(R){var H=((e*c-t*o)*(m-E)-(e-o)*(m*P-k*E))/R,Q=((e*c-t*o)*(k-P)-(t-c)*(m*P-k*E))/R,ae=+H.toFixed(2),Z=+Q.toFixed(2);if(!(ae<+X(e,o).toFixed(2)||ae>+be(e,o).toFixed(2)||ae<+X(m,E).toFixed(2)||ae>+be(m,E).toFixed(2)||Z<+X(t,c).toFixed(2)||Z>+be(t,c).toFixed(2)||Z<+X(k,P).toFixed(2)||Z>+be(k,P).toFixed(2)))return{x:H,y:Q}}}}function ht(e,t,o){var c=u.bezierBBox(e),m=u.bezierBBox(t);if(!u.isBBoxIntersect(c,m))return o?0:[];for(var k=Ue.apply(0,e),E=Ue.apply(0,t),P=be(~~(k/5),1),R=be(~~(E/5),1),H=[],Q=[],ae={},Z=o?0:[],J=0;J<P+1;J++){var te=u.findDotsAtSegment.apply(u,e.concat(J/P));H.push({x:te.x,y:te.y,t:J/P})}for(J=0;J<R+1;J++)te=u.findDotsAtSegment.apply(u,t.concat(J/R)),Q.push({x:te.x,y:te.y,t:J/R});for(J=0;J<P;J++)for(var le=0;le<R;le++){var ie=H[J],K=H[J+1],we=Q[le],ce=Q[le+1],fe=xe(K.x-ie.x)<.001?"y":"x",he=xe(ce.x-we.x)<.001?"y":"x",Ee=kt(ie.x,ie.y,K.x,K.y,we.x,we.y,ce.x,ce.y);if(Ee){if(ae[Ee.x.toFixed(4)]==Ee.y.toFixed(4))continue;ae[Ee.x.toFixed(4)]=Ee.y.toFixed(4);var Pe=ie.t+xe((Ee[fe]-ie[fe])/(K[fe]-ie[fe]))*(K.t-ie.t),Re=we.t+xe((Ee[he]-we[he])/(ce[he]-we[he]))*(ce.t-we.t);Pe>=0&&Pe<=1.001&&Re>=0&&Re<=1.001&&(o?Z++:Z.push({x:Ee.x,y:Ee.y,t1:X(Pe,1),t2:X(Re,1)}))}}return Z}function _t(e,t,o){e=u._path2curve(e),t=u._path2curve(t);for(var c,m,k,E,P,R,H,Q,ae,Z,J=o?0:[],te=0,le=e.length;te<le;te++){var ie=e[te];if(ie[0]=="M")c=P=ie[1],m=R=ie[2];else{ie[0]=="C"?(ae=[c,m].concat(ie.slice(1)),c=ae[6],m=ae[7]):(ae=[c,m,c,m,P,R,P,R],c=P,m=R);for(var K=0,we=t.length;K<we;K++){var ce=t[K];if(ce[0]=="M")k=H=ce[1],E=Q=ce[2];else{ce[0]=="C"?(Z=[k,E].concat(ce.slice(1)),k=Z[6],E=Z[7]):(Z=[k,E,k,E,H,Q,H,Q],k=H,E=Q);var fe=ht(ae,Z,o);if(o)J+=fe;else{for(var he=0,Ee=fe.length;he<Ee;he++)fe[he].segment1=te,fe[he].segment2=K,fe[he].bez1=ae,fe[he].bez2=Z;J=J.concat(fe)}}}}}return J}u.findDotsAtSegment=function(e,t,o,c,m,k,E,P,R){var H=1-R,Q=Ce(H,3),ae=Ce(H,2),Z=R*R,J=Z*R,te=Q*e+3*ae*R*o+3*H*R*R*m+J*E,le=Q*t+3*ae*R*c+3*H*R*R*k+J*P,ie=e+2*R*(o-e)+Z*(m-2*o+e),K=t+2*R*(c-t)+Z*(k-2*c+t),we=o+2*R*(m-o)+Z*(E-2*m+o),ce=c+2*R*(k-c)+Z*(P-2*k+c),fe=H*e+R*o,he=H*t+R*c,Ee=H*m+R*E,Pe=H*k+R*P,Re=90-180*de.atan2(ie-we,K-ce)/ee;return(ie>we||K<ce)&&(Re+=180),{x:te,y:le,m:{x:ie,y:K},n:{x:we,y:ce},start:{x:fe,y:he},end:{x:Ee,y:Pe},alpha:Re}},u.bezierBBox=function(e,t,o,c,m,k,E,P){u.is(e,"array")||(e=[e,t,o,c,m,k,E,P]);var R=Mt.apply(null,e);return{x:R.min.x,y:R.min.y,x2:R.max.x,y2:R.max.y,width:R.max.x-R.min.x,height:R.max.y-R.min.y}},u.isPointInsideBBox=function(e,t,o){return t>=e.x&&t<=e.x2&&o>=e.y&&o<=e.y2},u.isBBoxIntersect=function(e,t){var o=u.isPointInsideBBox;return o(t,e.x,e.y)||o(t,e.x2,e.y)||o(t,e.x,e.y2)||o(t,e.x2,e.y2)||o(e,t.x,t.y)||o(e,t.x2,t.y)||o(e,t.x,t.y2)||o(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)},u.pathIntersection=function(e,t){return _t(e,t)},u.pathIntersectionNumber=function(e,t){return _t(e,t,1)},u.isPointInsidePath=function(e,t,o){var c=u.pathBBox(e);return u.isPointInsideBBox(c,t,o)&&_t(e,[["M",t,o],["H",c.x2+10]],1)%2==1},u._removedFactory=function(e){return function(){s("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var Ke=u.pathBBox=function(e){var t=je(e);if(t.bbox)return ze(t.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var o,c=0,m=0,k=[],E=[],P=0,R=(e=St(e)).length;P<R;P++)if((o=e[P])[0]=="M")c=o[1],m=o[2],k.push(c),E.push(m);else{var H=Mt(c,m,o[1],o[2],o[3],o[4],o[5],o[6]);k=k[j](H.min.x,H.max.x),E=E[j](H.min.y,H.max.y),c=o[5],m=o[6]}var Q=X[$](0,k),ae=X[$](0,E),Z=be[$](0,k),J=be[$](0,E),te=Z-Q,le=J-ae,ie={x:Q,y:ae,x2:Z,y2:J,width:te,height:le,cx:Q+te/2,cy:ae+le/2};return t.bbox=ze(ie),ie},He=function(e){var t=ze(e);return t.toString=u._path2string,t},Zt=u._pathToRelative=function(e){var t=je(e);if(t.rel)return He(t.rel);u.is(e,l)&&u.is(e&&e[0],l)||(e=u.parsePathString(e));var o=[],c=0,m=0,k=0,E=0,P=0;e[0][0]=="M"&&(k=c=e[0][1],E=m=e[0][2],P++,o.push(["M",c,m]));for(var R=P,H=e.length;R<H;R++){var Q=o[R]=[],ae=e[R];if(ae[0]!=me.call(ae[0]))switch(Q[0]=me.call(ae[0]),Q[0]){case"a":Q[1]=ae[1],Q[2]=ae[2],Q[3]=ae[3],Q[4]=ae[4],Q[5]=ae[5],Q[6]=+(ae[6]-c).toFixed(3),Q[7]=+(ae[7]-m).toFixed(3);break;case"v":Q[1]=+(ae[1]-m).toFixed(3);break;case"m":k=ae[1],E=ae[2];default:for(var Z=1,J=ae.length;Z<J;Z++)Q[Z]=+(ae[Z]-(Z%2?c:m)).toFixed(3)}else{Q=o[R]=[],ae[0]=="m"&&(k=ae[1]+c,E=ae[2]+m);for(var te=0,le=ae.length;te<le;te++)o[R][te]=ae[te]}var ie=o[R].length;switch(o[R][0]){case"z":c=k,m=E;break;case"h":c+=+o[R][ie-1];break;case"v":m+=+o[R][ie-1];break;default:c+=+o[R][ie-2],m+=+o[R][ie-1]}}return o.toString=u._path2string,t.rel=He(o),o},dt=u._pathToAbsolute=function(e){var t=je(e);if(t.abs)return He(t.abs);if(u.is(e,l)&&u.is(e&&e[0],l)||(e=u.parsePathString(e)),!e||!e.length)return[["M",0,0]];var o=[],c=0,m=0,k=0,E=0,P=0;e[0][0]=="M"&&(k=c=+e[0][1],E=m=+e[0][2],P++,o[0]=["M",c,m]);for(var R,H,Q=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z",ae=P,Z=e.length;ae<Z;ae++){if(o.push(R=[]),(H=e[ae])[0]!=A.call(H[0]))switch(R[0]=A.call(H[0]),R[0]){case"A":R[1]=H[1],R[2]=H[2],R[3]=H[3],R[4]=H[4],R[5]=H[5],R[6]=+(H[6]+c),R[7]=+(H[7]+m);break;case"V":R[1]=+H[1]+m;break;case"H":R[1]=+H[1]+c;break;case"R":for(var J=[c,m][j](H.slice(1)),te=2,le=J.length;te<le;te++)J[te]=+J[te]+c,J[++te]=+J[te]+m;o.pop(),o=o[j](ct(J,Q));break;case"M":k=+H[1]+c,E=+H[2]+m;default:for(te=1,le=H.length;te<le;te++)R[te]=+H[te]+(te%2?c:m)}else if(H[0]=="R")J=[c,m][j](H.slice(1)),o.pop(),o=o[j](ct(J,Q)),R=["R"][j](H.slice(-2));else for(var ie=0,K=H.length;ie<K;ie++)R[ie]=H[ie];switch(R[0]){case"Z":c=k,m=E;break;case"H":c=R[1];break;case"V":m=R[1];break;case"M":k=R[R.length-2],E=R[R.length-1];default:c=R[R.length-2],m=R[R.length-1]}}return o.toString=u._path2string,t.abs=He(o),o},ft=function(e,t,o,c){return[e,t,o,c,o,c]},Ze=function(e,t,o,c,m,k){return[1/3*e+2/3*o,1/3*t+2/3*c,1/3*m+2/3*o,1/3*k+2/3*c,m,k]},Tt=function(e,t,o,c,m,k,E,P,R,H){var Q,ae=120*ee/180,Z=ee/180*(+m||0),J=[],te=Fe(function(v1,y1,zt){return{x:v1*de.cos(zt)-y1*de.sin(zt),y:v1*de.sin(zt)+y1*de.cos(zt)}});if(H)Pe=H[0],Re=H[1],he=H[2],Ee=H[3];else{e=(Q=te(e,t,-Z)).x,t=Q.y,P=(Q=te(P,R,-Z)).x,R=Q.y;var le=(e-P)/2,ie=(t-R)/2,K=le*le/(o*o)+ie*ie/(c*c);K>1&&(o*=K=de.sqrt(K),c*=K);var we=o*o,ce=c*c,fe=(k==E?-1:1)*de.sqrt(xe((we*ce-we*ie*ie-ce*le*le)/(we*ie*ie+ce*le*le))),he=fe*o*ie/c+(e+P)/2,Ee=fe*-c*le/o+(t+R)/2,Pe=de.asin(((t-Ee)/c).toFixed(9)),Re=de.asin(((R-Ee)/c).toFixed(9));(Pe=e<he?ee-Pe:Pe)<0&&(Pe=2*ee+Pe),(Re=P<he?ee-Re:Re)<0&&(Re=2*ee+Re),E&&Pe>Re&&(Pe-=2*ee),!E&&Re>Pe&&(Re-=2*ee)}var mt=Re-Pe;if(xe(mt)>ae){var Et=Re,Ve=P,Ge=R;Re=Pe+ae*(E&&Re>Pe?1:-1),P=he+o*de.cos(Re),R=Ee+c*de.sin(Re),J=Tt(P,R,o,c,m,0,E,Ve,Ge,[Re,Et,he,Ee])}mt=Re-Pe;var gt=de.cos(Pe),vt=de.sin(Pe),Dt=de.cos(Re),Xe=de.sin(Re),st=de.tan(mt/4),qt=4/3*o*st,d1=4/3*c*st,f1=[e,t],yt=[e+qt*vt,t-d1*gt],p1=[P+qt*Xe,R-d1*Dt],m1=[P,R];if(yt[0]=2*f1[0]-yt[0],yt[1]=2*f1[1]-yt[1],H)return[yt,p1,m1][j](J);for(var g1=[],tt=0,U1=(J=[yt,p1,m1][j](J).join()[oe](",")).length;tt<U1;tt++)g1[tt]=tt%2?te(J[tt-1],J[tt],Z).y:te(J[tt],J[tt+1],Z).x;return g1},nt=function(e,t,o,c,m,k,E,P,R){var H=1-R;return{x:Ce(H,3)*e+3*Ce(H,2)*R*o+3*H*R*R*m+Ce(R,3)*E,y:Ce(H,3)*t+3*Ce(H,2)*R*c+3*H*R*R*k+Ce(R,3)*P}},Mt=Fe(function(e,t,o,c,m,k,E,P){var R,H=m-2*o+e-(E-2*m+o),Q=2*(o-e)-2*(m-o),ae=e-o,Z=(-Q+de.sqrt(Q*Q-4*H*ae))/2/H,J=(-Q-de.sqrt(Q*Q-4*H*ae))/2/H,te=[t,P],le=[e,E];return xe(Z)>"1e12"&&(Z=.5),xe(J)>"1e12"&&(J=.5),Z>0&&Z<1&&(R=nt(e,t,o,c,m,k,E,P,Z),le.push(R.x),te.push(R.y)),J>0&&J<1&&(R=nt(e,t,o,c,m,k,E,P,J),le.push(R.x),te.push(R.y)),H=k-2*c+t-(P-2*k+c),ae=t-c,Z=(-(Q=2*(c-t)-2*(k-c))+de.sqrt(Q*Q-4*H*ae))/2/H,J=(-Q-de.sqrt(Q*Q-4*H*ae))/2/H,xe(Z)>"1e12"&&(Z=.5),xe(J)>"1e12"&&(J=.5),Z>0&&Z<1&&(R=nt(e,t,o,c,m,k,E,P,Z),le.push(R.x),te.push(R.y)),J>0&&J<1&&(R=nt(e,t,o,c,m,k,E,P,J),le.push(R.x),te.push(R.y)),{min:{x:X[$](0,le),y:X[$](0,te)},max:{x:be[$](0,le),y:be[$](0,te)}}}),St=u._path2curve=Fe(function(e,t){var o=!t&&je(e);if(!t&&o.curve)return He(o.curve);for(var c=dt(e),m=t&&dt(t),k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},E={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},P=function(fe,he,Ee){var Pe,Re;if(!fe)return["C",he.x,he.y,he.x,he.y,he.x,he.y];switch(!(fe[0]in{T:1,Q:1})&&(he.qx=he.qy=null),fe[0]){case"M":he.X=fe[1],he.Y=fe[2];break;case"A":fe=["C"][j](Tt[$](0,[he.x,he.y][j](fe.slice(1))));break;case"S":Ee=="C"||Ee=="S"?(Pe=2*he.x-he.bx,Re=2*he.y-he.by):(Pe=he.x,Re=he.y),fe=["C",Pe,Re][j](fe.slice(1));break;case"T":Ee=="Q"||Ee=="T"?(he.qx=2*he.x-he.qx,he.qy=2*he.y-he.qy):(he.qx=he.x,he.qy=he.y),fe=["C"][j](Ze(he.x,he.y,he.qx,he.qy,fe[1],fe[2]));break;case"Q":he.qx=fe[1],he.qy=fe[2],fe=["C"][j](Ze(he.x,he.y,fe[1],fe[2],fe[3],fe[4]));break;case"L":fe=["C"][j](ft(he.x,he.y,fe[1],fe[2]));break;case"H":fe=["C"][j](ft(he.x,he.y,fe[1],he.y));break;case"V":fe=["C"][j](ft(he.x,he.y,he.x,fe[1]));break;case"Z":fe=["C"][j](ft(he.x,he.y,he.X,he.Y))}return fe},R=function(fe,he){if(fe[he].length>7){fe[he].shift();for(var Ee=fe[he];Ee.length;)Q[he]="A",m&&(ae[he]="A"),fe.splice(he++,0,["C"][j](Ee.splice(0,6)));fe.splice(he,1),le=be(c.length,m&&m.length||0)}},H=function(fe,he,Ee,Pe,Re){fe&&he&&fe[Re][0]=="M"&&he[Re][0]!="M"&&(he.splice(Re,0,["M",Pe.x,Pe.y]),Ee.bx=0,Ee.by=0,Ee.x=fe[Re][1],Ee.y=fe[Re][2],le=be(c.length,m&&m.length||0))},Q=[],ae=[],Z="",J="",te=0,le=be(c.length,m&&m.length||0);te<le;te++){c[te]&&(Z=c[te][0]),Z!="C"&&(Q[te]=Z,te&&(J=Q[te-1])),c[te]=P(c[te],k,J),Q[te]!="A"&&Z=="C"&&(Q[te]="C"),R(c,te),m&&(m[te]&&(Z=m[te][0]),Z!="C"&&(ae[te]=Z,te&&(J=ae[te-1])),m[te]=P(m[te],E,J),ae[te]!="A"&&Z=="C"&&(ae[te]="C"),R(m,te)),H(c,m,k,E,te),H(m,c,E,k,te);var ie=c[te],K=m&&m[te],we=ie.length,ce=m&&K.length;k.x=ie[we-2],k.y=ie[we-1],k.bx=g(ie[we-4])||k.x,k.by=g(ie[we-3])||k.y,E.bx=m&&(g(K[ce-4])||E.x),E.by=m&&(g(K[ce-3])||E.y),E.x=m&&K[ce-2],E.y=m&&K[ce-1]}return m||(o.curve=He(c)),m?[c,m]:c},null,He),It=(u._parseDots=Fe(function(e){for(var t=[],o=0,c=e.length;o<c;o++){var m={},k=e[o].match(/^([^:]*):?([\d\.]*)/);if(m.color=u.getRGB(k[1]),m.color.error)return null;m.opacity=m.color.opacity,m.color=m.color.hex,k[2]&&(m.offset=k[2]+"%"),t.push(m)}for(o=1,c=t.length-1;o<c;o++)if(!t[o].offset){for(var E=g(t[o-1].offset||0),P=0,R=o+1;R<c;R++)if(t[R].offset){P=t[R].offset;break}P||(P=100,R=c);for(var H=((P=g(P))-E)/(R-o+1);o<R;o++)E+=H,t[o].offset=E+"%"}return t}),u._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),q1=(u._tofront=function(e,t){t.top!==e&&(It(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},u._toback=function(e,t){t.bottom!==e&&(It(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},u._insertafter=function(e,t,o){It(e,o),t==o.top&&(o.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},u._insertbefore=function(e,t,o){It(e,o),t==o.bottom&&(o.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},u.toMatrix=function(e,t){var o=Ke(e),c={_:{transform:ue},getBBox:function(){return o}};return e1(c,t),c.matrix}),e1=(u.transformPath=function(e,t){return Ie(e,q1(e,t))},u._extractTransform=function(e,t){if(t==null)return e._.transform;t=U(t).replace(/\.{3}|\u2026/g,e._.transform||ue);var o,c,m=u.parseTransformString(t),k=0,E=1,P=1,R=e._,H=new rt;if(R.transform=m||[],m)for(var Q=0,ae=m.length;Q<ae;Q++){var Z,J,te,le,ie,K=m[Q],we=K.length,ce=U(K[0]).toLowerCase(),fe=K[0]!=ce,he=fe?H.invert():0;ce=="t"&&we==3?fe?(Z=he.x(0,0),J=he.y(0,0),te=he.x(K[1],K[2]),le=he.y(K[1],K[2]),H.translate(te-Z,le-J)):H.translate(K[1],K[2]):ce=="r"?we==2?(ie=ie||e.getBBox(1),H.rotate(K[1],ie.x+ie.width/2,ie.y+ie.height/2),k+=K[1]):we==4&&(fe?(te=he.x(K[2],K[3]),le=he.y(K[2],K[3]),H.rotate(K[1],te,le)):H.rotate(K[1],K[2],K[3]),k+=K[1]):ce=="s"?we==2||we==3?(ie=ie||e.getBBox(1),H.scale(K[1],K[we-1],ie.x+ie.width/2,ie.y+ie.height/2),E*=K[1],P*=K[we-1]):we==5&&(fe?(te=he.x(K[3],K[4]),le=he.y(K[3],K[4]),H.scale(K[1],K[2],te,le)):H.scale(K[1],K[2],K[3],K[4]),E*=K[1],P*=K[2]):ce=="m"&&we==7&&H.add(K[1],K[2],K[3],K[4],K[5],K[6]),R.dirtyT=1,e.matrix=H}e.matrix=H,R.sx=E,R.sy=P,R.deg=k,R.dx=o=H.e,R.dy=c=H.f,E==1&&P==1&&!k&&R.bbox?(R.bbox.x+=+o,R.bbox.y+=+c):R.dirtyT=1}),t1=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return e.length==4?[t,0,e[2],e[3]]:[t,0];case"s":return e.length==5?[t,1,1,e[3],e[4]]:e.length==3?[t,1,1]:[t,1]}},z1=u._equaliseTransform=function(e,t){t=U(t).replace(/\.{3}|\u2026/g,e),e=u.parseTransformString(e)||[],t=u.parseTransformString(t)||[];for(var o,c,m,k,E=be(e.length,t.length),P=[],R=[],H=0;H<E;H++){if(m=e[H]||t1(t[H]),k=t[H]||t1(m),m[0]!=k[0]||m[0].toLowerCase()=="r"&&(m[2]!=k[2]||m[3]!=k[3])||m[0].toLowerCase()=="s"&&(m[3]!=k[3]||m[4]!=k[4]))return;for(P[H]=[],R[H]=[],o=0,c=be(m.length,k.length);o<c;o++)o in m&&(P[H][o]=m[o]),o in k&&(R[H][o]=k[o])}return{from:P,to:R}};function rt(e,t,o,c,m,k){e!=null?(this.a=+e,this.b=+t,this.c=+o,this.d=+c,this.e=+m,this.f=+k):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}u._getContainer=function(e,t,o,c){var m;if((m=c!=null||u.is(e,"object")?e:L.doc.getElementById(e))!=null)return m.tagName?t==null?{container:m,width:m.style.pixelWidth||m.offsetWidth,height:m.style.pixelHeight||m.offsetHeight}:{container:m,width:t,height:o}:{container:1,x:e,y:t,width:o,height:c}},u.pathToRelative=Zt,u._engine={},u.path2curve=St,u.matrix=function(e,t,o,c,m,k){return new rt(e,t,o,c,m,k)},function(e){function t(c){return c[0]*c[0]+c[1]*c[1]}function o(c){var m=de.sqrt(t(c));c[0]&&(c[0]/=m),c[1]&&(c[1]/=m)}e.add=function(c,m,k,E,P,R){var H,Q,ae,Z,J=[[],[],[]],te=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],le=[[c,k,P],[m,E,R],[0,0,1]];for(c&&c instanceof rt&&(le=[[c.a,c.c,c.e],[c.b,c.d,c.f],[0,0,1]]),H=0;H<3;H++)for(Q=0;Q<3;Q++){for(Z=0,ae=0;ae<3;ae++)Z+=te[H][ae]*le[ae][Q];J[H][Q]=Z}this.a=J[0][0],this.b=J[1][0],this.c=J[0][1],this.d=J[1][1],this.e=J[0][2],this.f=J[1][2]},e.invert=function(){var c=this,m=c.a*c.d-c.b*c.c;return new rt(c.d/m,-c.b/m,-c.c/m,c.a/m,(c.c*c.f-c.d*c.e)/m,(c.b*c.e-c.a*c.f)/m)},e.clone=function(){return new rt(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(c,m){this.add(1,0,0,1,c,m)},e.scale=function(c,m,k,E){m==null&&(m=c),(k||E)&&this.add(1,0,0,1,k,E),this.add(c,0,0,m,0,0),(k||E)&&this.add(1,0,0,1,-k,-E)},e.rotate=function(c,m,k){c=u.rad(c),m=m||0,k=k||0;var E=+de.cos(c).toFixed(9),P=+de.sin(c).toFixed(9);this.add(E,P,-P,E,m,k),this.add(1,0,0,1,-m,-k)},e.x=function(c,m){return c*this.a+m*this.c+this.e},e.y=function(c,m){return c*this.b+m*this.d+this.f},e.get=function(c){return+this[U.fromCharCode(97+c)].toFixed(4)},e.toString=function(){return u.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var c={};c.dx=this.e,c.dy=this.f;var m=[[this.a,this.c],[this.b,this.d]];c.scalex=de.sqrt(t(m[0])),o(m[0]),c.shear=m[0][0]*m[1][0]+m[0][1]*m[1][1],m[1]=[m[1][0]-m[0][0]*c.shear,m[1][1]-m[0][1]*c.shear],c.scaley=de.sqrt(t(m[1])),o(m[1]),c.shear/=c.scaley;var k=-m[0][1],E=m[1][1];return E<0?(c.rotate=u.deg(de.acos(E)),k<0&&(c.rotate=360-c.rotate)):c.rotate=u.deg(de.asin(k)),c.isSimple=!(+c.shear.toFixed(9)||c.scalex.toFixed(9)!=c.scaley.toFixed(9)&&c.rotate),c.isSuperSimple=!+c.shear.toFixed(9)&&c.scalex.toFixed(9)==c.scaley.toFixed(9)&&!c.rotate,c.noRotation=!+c.shear.toFixed(9)&&!c.rotate,c},e.toTransformString=function(c){var m=c||this[oe]();return m.isSimple?(m.scalex=+m.scalex.toFixed(4),m.scaley=+m.scaley.toFixed(4),m.rotate=+m.rotate.toFixed(4),(m.dx||m.dy?"t"+[m.dx,m.dy]:ue)+(m.scalex!=1||m.scaley!=1?"s"+[m.scalex,m.scaley,0,0]:ue)+(m.rotate?"r"+[m.rotate,0,0]:ue)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(rt.prototype);for(var F1=function(){this.returnValue=!1},O1=function(){return this.originalEvent.preventDefault()},H1=function(){this.cancelBubble=!0},V1=function(){return this.originalEvent.stopPropagation()},n1=function(e){var t=L.doc.documentElement.scrollTop||L.doc.body.scrollTop,o=L.doc.documentElement.scrollLeft||L.doc.body.scrollLeft;return{x:e.clientX+o,y:e.clientY+t}},$1=L.doc.addEventListener?function(e,t,o,c){var m=function(E){var P=n1(E);return o.call(c,E,P.x,P.y)};if(e.addEventListener(t,m,!1),se&&F[t]){var k=function(E){for(var P=n1(E),R=E,H=0,Q=E.targetTouches&&E.targetTouches.length;H<Q;H++)if(E.targetTouches[H].target==e){(E=E.targetTouches[H]).originalEvent=R,E.preventDefault=O1,E.stopPropagation=V1;break}return o.call(c,E,P.x,P.y)};e.addEventListener(F[t],k,!1)}return function(){return e.removeEventListener(t,m,!1),se&&F[t]&&e.removeEventListener(F[t],k,!1),!0}}:L.doc.attachEvent?function(e,t,o,c){var m=function(k){k=k||L.win.event;var E=L.doc.documentElement.scrollTop||L.doc.body.scrollTop,P=L.doc.documentElement.scrollLeft||L.doc.body.scrollLeft,R=k.clientX+P,H=k.clientY+E;return k.preventDefault=k.preventDefault||F1,k.stopPropagation=k.stopPropagation||H1,o.call(c,k,R,H)};return e.attachEvent("on"+t,m),function(){return e.detachEvent("on"+t,m),!0}}:void 0,et=[],Vt=function(e){for(var t,o=e.clientX,c=e.clientY,m=L.doc.documentElement.scrollTop||L.doc.body.scrollTop,k=L.doc.documentElement.scrollLeft||L.doc.body.scrollLeft,E=et.length;E--;){if(t=et[E],se&&e.touches){for(var P,R=e.touches.length;R--;)if((P=e.touches[R]).identifier==t.el._drag.id){o=P.clientX,c=P.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var H,Q=t.el.node,ae=Q.nextSibling,Z=Q.parentNode,J=Q.style.display;L.win.opera&&Z.removeChild(Q),Q.style.display="none",H=t.el.paper.getElementByPoint(o,c),Q.style.display=J,L.win.opera&&(ae?Z.insertBefore(Q,ae):Z.appendChild(Q)),H&&s("raphael.drag.over."+t.el.id,t.el,H),o+=k,c+=m,s("raphael.drag.move."+t.el.id,t.move_scope||t.el,o-t.el._drag.x,c-t.el._drag.y,o,c,e)}},$t=function(e){u.unmousemove(Vt).unmouseup($t);for(var t,o=et.length;o--;)(t=et[o]).el._drag={},s("raphael.drag.end."+t.el.id,t.end_scope||t.start_scope||t.move_scope||t.el,e);et=[]},Te=u.el={},r1=ne.length;r1--;)(function(e){u[e]=Te[e]=function(t,o){return u.is(t,"function")&&(this.events=this.events||[],this.events.push({name:e,f:t,unbind:$1(this.shape||this.node||L.doc,e,t,o||this)})),this},u["un"+e]=Te["un"+e]=function(t){for(var o=this.events||[],c=o.length;c--;)o[c].name!=e||!u.is(t,"undefined")&&o[c].f!=t||(o[c].unbind(),o.splice(c,1),!o.length&&delete this.events);return this}})(ne[r1]);Te.data=function(e,t){var o=_e[this.id]=_e[this.id]||{};if(arguments.length==0)return o;if(arguments.length==1){if(u.is(e,"object")){for(var c in e)e[M](c)&&this.data(c,e[c]);return this}return s("raphael.data.get."+this.id,this,o[e],e),o[e]}return o[e]=t,s("raphael.data.set."+this.id,this,t,e),this},Te.removeData=function(e){return e==null?delete _e[this.id]:_e[this.id]&&delete _e[this.id][e],this},Te.getData=function(){return ze(_e[this.id]||{})},Te.hover=function(e,t,o,c){return this.mouseover(e,o).mouseout(t,c||o)},Te.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var pt=[];Te.drag=function(e,t,o,c,m,k){function E(P){(P.originalEvent||P).preventDefault();var R=P.clientX,H=P.clientY,Q=L.doc.documentElement.scrollTop||L.doc.body.scrollTop,ae=L.doc.documentElement.scrollLeft||L.doc.body.scrollLeft;if(this._drag.id=P.identifier,se&&P.touches){for(var Z,J=P.touches.length;J--;)if(Z=P.touches[J],this._drag.id=Z.identifier,Z.identifier==this._drag.id){R=Z.clientX,H=Z.clientY;break}}this._drag.x=R+ae,this._drag.y=H+Q,!et.length&&u.mousemove(Vt).mouseup($t),et.push({el:this,move_scope:c,start_scope:m,end_scope:k}),t&&s.on("raphael.drag.start."+this.id,t),e&&s.on("raphael.drag.move."+this.id,e),o&&s.on("raphael.drag.end."+this.id,o),s("raphael.drag.start."+this.id,m||c||this,this._drag.x,this._drag.y,P)}return this._drag={},pt.push({el:this,start:E}),this.mousedown(E),this},Te.onDragOver=function(e){e?s.on("raphael.drag.over."+this.id,e):s.unbind("raphael.drag.over."+this.id)},Te.undrag=function(){for(var e=pt.length;e--;)pt[e].el==this&&(this.unmousedown(pt[e].start),pt.splice(e,1),s.unbind("raphael.drag.*."+this.id));!pt.length&&u.unmousemove(Vt).unmouseup($t),et=[]},b.circle=function(e,t,o){var c=u._engine.circle(this,e||0,t||0,o||0);return this.__set__&&this.__set__.push(c),c},b.rect=function(e,t,o,c,m){var k=u._engine.rect(this,e||0,t||0,o||0,c||0,m||0);return this.__set__&&this.__set__.push(k),k},b.ellipse=function(e,t,o,c){var m=u._engine.ellipse(this,e||0,t||0,o||0,c||0);return this.__set__&&this.__set__.push(m),m},b.path=function(e){e&&!u.is(e,"string")&&!u.is(e[0],l)&&(e+=ue);var t=u._engine.path(u.format[$](u,arguments),this);return this.__set__&&this.__set__.push(t),t},b.image=function(e,t,o,c,m){var k=u._engine.image(this,e||"about:blank",t||0,o||0,c||0,m||0);return this.__set__&&this.__set__.push(k),k},b.text=function(e,t,o){var c=u._engine.text(this,e||0,t||0,U(o));return this.__set__&&this.__set__.push(c),c},b.set=function(e){!u.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var t=new Pt(e);return this.__set__&&this.__set__.push(t),t.paper=this,t.type="set",t},b.setStart=function(e){this.__set__=e||this.set()},b.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},b.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},b.setSize=function(e,t){return u._engine.setSize.call(this,e,t)},b.setViewBox=function(e,t,o,c,m){return u._engine.setViewBox.call(this,e,t,o,c,m)},b.top=b.bottom=null,b.raphael=u;function i1(){return this.x+pe+this.y+pe+this.width+" × "+this.height}b.getElementByPoint=function(e,t){var o,c,m,k,E,P,R,H=this.canvas,Q=L.doc.elementFromPoint(e,t);if(L.win.opera&&Q.tagName=="svg"){var ae=(c=(o=H).getBoundingClientRect(),m=o.ownerDocument,k=m.body,E=m.documentElement,P=E.clientTop||k.clientTop||0,R=E.clientLeft||k.clientLeft||0,{y:c.top+(L.win.pageYOffset||E.scrollTop||k.scrollTop)-P,x:c.left+(L.win.pageXOffset||E.scrollLeft||k.scrollLeft)-R}),Z=H.createSVGRect();Z.x=e-ae.x,Z.y=t-ae.y,Z.width=Z.height=1;var J=H.getIntersectionList(Z,null);J.length&&(Q=J[J.length-1])}if(!Q)return null;for(;Q.parentNode&&Q!=H.parentNode&&!Q.raphael;)Q=Q.parentNode;return Q==this.canvas.parentNode&&(Q=H),Q=Q&&Q.raphael?this.getById(Q.raphaelid):null},b.getElementsByBBox=function(e){var t=this.set();return this.forEach(function(o){u.isBBoxIntersect(o.getBBox(),e)&&t.push(o)}),t},b.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},b.forEach=function(e,t){for(var o=this.bottom;o;){if(e.call(t,o)===!1)return this;o=o.next}return this},b.getElementsByPoint=function(e,t){var o=this.set();return this.forEach(function(c){c.isPointInside(e,t)&&o.push(c)}),o},Te.isPointInside=function(e,t){var o=this.realPath=Me[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(o=u.transformPath(o,this.attr("transform"))),u.isPointInsidePath(o,e,t)},Te.getBBox=function(e){if(this.removed)return{};var t=this._;return e?(!t.dirty&&t.bboxwt||(this.realPath=Me[this.type](this),t.bboxwt=Ke(this.realPath),t.bboxwt.toString=i1,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&(!t.dirty&&this.realPath||(t.bboxwt=0,this.realPath=Me[this.type](this)),t.bbox=Ke(Ie(this.realPath,this.matrix)),t.bbox.toString=i1,t.dirty=t.dirtyT=0),t.bbox)},Te.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Te.glow=function(e){if(this.type=="text")return null;var t={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity==null?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},o=t.width/2,c=this.paper,m=c.set(),k=this.realPath||Me[this.type](this);k=this.matrix?Ie(k,this.matrix):k;for(var E=1;E<o+1;E++)m.push(c.path(k).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/o*E).toFixed(3),opacity:+(t.opacity/o).toFixed(3)}));return m.insertBefore(this).translate(t.offsetx,t.offsety)};var jt=function(e,t,o,c,m,k,E,P,R){return R==null?Ue(e,t,o,c,m,k,E,P):u.findDotsAtSegment(e,t,o,c,m,k,E,P,function(H,Q,ae,Z,J,te,le,ie,K){if(!(K<0||Ue(H,Q,ae,Z,J,te,le,ie)<K)){var we,ce=.5,fe=1-ce;for(we=Ue(H,Q,ae,Z,J,te,le,ie,fe);xe(we-K)>.01;)we=Ue(H,Q,ae,Z,J,te,le,ie,fe+=(we<K?1:-1)*(ce/=2));return fe}}(e,t,o,c,m,k,E,P,R))},Ut=function(e,t){return function(o,c,m){for(var k,E,P,R,H,Q="",ae={},Z=0,J=0,te=(o=St(o)).length;J<te;J++){if((P=o[J])[0]=="M")k=+P[1],E=+P[2];else{if(Z+(R=jt(k,E,P[1],P[2],P[3],P[4],P[5],P[6]))>c){if(t&&!ae.start){if(Q+=["C"+(H=jt(k,E,P[1],P[2],P[3],P[4],P[5],P[6],c-Z)).start.x,H.start.y,H.m.x,H.m.y,H.x,H.y],m)return Q;ae.start=Q,Q=["M"+H.x,H.y+"C"+H.n.x,H.n.y,H.end.x,H.end.y,P[5],P[6]].join(),Z+=R,k=+P[5],E=+P[6];continue}if(!e&&!t)return{x:(H=jt(k,E,P[1],P[2],P[3],P[4],P[5],P[6],c-Z)).x,y:H.y,alpha:H.alpha}}Z+=R,k=+P[5],E=+P[6]}Q+=P.shift()+P}return ae.end=Q,(H=e?Z:t?ae:u.findDotsAtSegment(k,E,P[0],P[1],P[2],P[3],P[4],P[5],1)).alpha&&(H={x:H.x,y:H.y,alpha:H.alpha}),H}},s1=Ut(1),a1=Ut(),Gt=Ut(0,1);u.getTotalLength=s1,u.getPointAtLength=a1,u.getSubpath=function(e,t,o){if(this.getTotalLength(e)-o<1e-6)return Gt(e,t).end;var c=Gt(e,o,1);return t?Gt(c,t).end:c},Te.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():s1(e)},Te.getPointAtLength=function(e){var t=this.getPath();if(t)return a1(t,e)},Te.getPath=function(){var e,t=u._getPath[this.type];if(this.type!="text"&&this.type!="set")return t&&(e=t(this)),e},Te.getSubpath=function(e,t){var o=this.getPath();if(o)return u.getSubpath(o,e,t)};var $e=u.easing_formulas={linear:function(e){return e},"<":function(e){return Ce(e,1.7)},">":function(e){return Ce(e,.48)},"<>":function(e){var t=.48-e/1.04,o=de.sqrt(.1734+t*t),c=o-t,m=-o-t,k=Ce(xe(c),1/3)*(c<0?-1:1)+Ce(xe(m),1/3)*(m<0?-1:1)+.5;return 3*(1-k)*k*k+k*k*k},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:Ce(2,-10*e)*de.sin(2*ee*(e-.075)/.3)+1},bounce:function(e){var t=7.5625,o=2.75;return e<1/o?t*e*e:e<2/o?t*(e-=1.5/o)*e+.75:e<2.5/o?t*(e-=2.25/o)*e+.9375:t*(e-=2.625/o)*e+.984375}};$e.easeIn=$e["ease-in"]=$e["<"],$e.easeOut=$e["ease-out"]=$e[">"],$e.easeInOut=$e["ease-in-out"]=$e["<>"],$e["back-in"]=$e.backIn,$e["back-out"]=$e.backOut;var Be=[],o1=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},Wt=function(){for(var e=+new Date,t=0;t<Be.length;t++){var o=Be[t];if(!o.el.removed&&!o.paused){var c,m,k=e-o.start,E=o.ms,P=o.easing,R=o.from,H=o.diff,Q=o.to,ae=(o.t,o.el),Z={},J={};if(o.initstatus?(k=(o.initstatus*o.anim.top-o.prev)/(o.percent-o.prev)*E,o.status=o.initstatus,delete o.initstatus,o.stop&&Be.splice(t--,1)):o.status=(o.prev+(o.percent-o.prev)*(k/E))/o.anim.top,!(k<0))if(k<E){var te=P(k/E);for(var le in R)if(R[M](le)){switch(N[le]){case a:c=+R[le]+te*E*H[le];break;case"colour":c="rgb("+[Xt(h(R[le].r+te*E*H[le].r)),Xt(h(R[le].g+te*E*H[le].g)),Xt(h(R[le].b+te*E*H[le].b))].join(",")+")";break;case"path":c=[];for(var ie=0,K=R[le].length;ie<K;ie++){c[ie]=[R[le][ie][0]];for(var we=1,ce=R[le][ie].length;we<ce;we++)c[ie][we]=+R[le][ie][we]+te*E*H[le][ie][we];c[ie]=c[ie].join(pe)}c=c.join(pe);break;case"transform":if(H[le].real)for(c=[],ie=0,K=R[le].length;ie<K;ie++)for(c[ie]=[R[le][ie][0]],we=1,ce=R[le][ie].length;we<ce;we++)c[ie][we]=R[le][ie][we]+te*E*H[le][ie][we];else{var fe=function(Ee){return+R[le][Ee]+te*E*H[le][Ee]};c=[["m",fe(0),fe(1),fe(2),fe(3),fe(4),fe(5)]]}break;case"csv":if(le=="clip-rect")for(c=[],ie=4;ie--;)c[ie]=+R[le][ie]+te*E*H[le][ie];break;default:var he=[][j](R[le]);for(c=[],ie=ae.paper.customAttributes[le].length;ie--;)c[ie]=+he[ie]+te*E*H[le][ie]}Z[le]=c}ae.attr(Z),function(Ee,Pe,Re){setTimeout(function(){s("raphael.anim.frame."+Ee,Pe,Re)})}(ae.id,ae,o.anim)}else{if(function(Ee,Pe,Re){setTimeout(function(){s("raphael.anim.frame."+Pe.id,Pe,Re),s("raphael.anim.finish."+Pe.id,Pe,Re),u.is(Ee,"function")&&Ee.call(Pe)})}(o.callback,ae,o.anim),ae.attr(Q),Be.splice(t--,1),o.repeat>1&&!o.next){for(m in Q)Q[M](m)&&(J[m]=o.totalOrigin[m]);o.el.attr(J),At(o.anim,o.el,o.anim.percents[0],null,o.totalOrigin,o.repeat-1)}o.next&&!o.stop&&At(o.anim,o.el,o.next,null,o.totalOrigin,o.repeat)}}}Be.length&&o1(Wt)},Xt=function(e){return e>255?255:e<0?0:e};function j1(e,t,o,c,m,k){var E=3*t,P=3*(c-t)-E,R=1-E-P,H=3*o,Q=3*(m-o)-H,ae=1-H-Q;function Z(J){return((R*J+P)*J+E)*J}return function(J,te){var le=function(ie,K){var we,ce,fe,he,Ee,Pe;for(fe=ie,Pe=0;Pe<8;Pe++){if(he=Z(fe)-ie,xe(he)<K)return fe;if(xe(Ee=(3*R*fe+2*P)*fe+E)<1e-6)break;fe-=he/Ee}if(ce=1,(fe=ie)<(we=0))return we;if(fe>ce)return ce;for(;we<ce;){if(he=Z(fe),xe(he-ie)<K)return fe;ie>he?we=fe:ce=fe,fe=(ce-we)/2+we}return fe}(J,te);return((ae*le+Q)*le+H)*le}(e,1/(200*k))}function We(e,t){var o=[],c={};if(this.ms=t,this.times=1,e){for(var m in e)e[M](m)&&(c[g(m)]=e[m],o.push(g(m)));o.sort(Se)}this.anim=c,this.top=o[o.length-1],this.percents=o}function At(e,t,o,c,m,k){o=g(o);var E,P,R,H,Q,ae,Z=e.ms,J={},te={},le={};if(c)for(K=0,we=Be.length;K<we;K++){var ie=Be[K];if(ie.el.id==t.id&&ie.anim==e){ie.percent!=o?(Be.splice(K,1),R=1):P=ie,t.attr(ie.totalOrigin);break}}else c=+te;for(var K=0,we=e.percents.length;K<we;K++){if(e.percents[K]==o||e.percents[K]>c*e.top){o=e.percents[K],Q=e.percents[K-1]||0,Z=Z/e.top*(o-Q),H=e.percents[K+1],E=e.anim[o];break}c&&t.attr(e.anim[e.percents[K]])}if(E){if(P)P.initstatus=c,P.start=new Date-P.ms*c;else{for(var ce in E)if(E[M](ce)&&(N[M](ce)||t.paper.customAttributes[M](ce)))switch(J[ce]=t.attr(ce),J[ce]==null&&(J[ce]=I[ce]),te[ce]=E[ce],N[ce]){case a:le[ce]=(te[ce]-J[ce])/Z;break;case"colour":J[ce]=u.getRGB(J[ce]);var fe=u.getRGB(te[ce]);le[ce]={r:(fe.r-J[ce].r)/Z,g:(fe.g-J[ce].g)/Z,b:(fe.b-J[ce].b)/Z};break;case"path":var he=St(J[ce],te[ce]),Ee=he[1];for(J[ce]=he[0],le[ce]=[],K=0,we=J[ce].length;K<we;K++){le[ce][K]=[0];for(var Pe=1,Re=J[ce][K].length;Pe<Re;Pe++)le[ce][K][Pe]=(Ee[K][Pe]-J[ce][K][Pe])/Z}break;case"transform":var mt=t._,Et=z1(mt[ce],te[ce]);if(Et)for(J[ce]=Et.from,te[ce]=Et.to,le[ce]=[],le[ce].real=!0,K=0,we=J[ce].length;K<we;K++)for(le[ce][K]=[J[ce][K][0]],Pe=1,Re=J[ce][K].length;Pe<Re;Pe++)le[ce][K][Pe]=(te[ce][K][Pe]-J[ce][K][Pe])/Z;else{var Ve=t.matrix||new rt,Ge={_:{transform:mt.transform},getBBox:function(){return t.getBBox(1)}};J[ce]=[Ve.a,Ve.b,Ve.c,Ve.d,Ve.e,Ve.f],e1(Ge,te[ce]),te[ce]=Ge._.transform,le[ce]=[(Ge.matrix.a-Ve.a)/Z,(Ge.matrix.b-Ve.b)/Z,(Ge.matrix.c-Ve.c)/Z,(Ge.matrix.d-Ve.d)/Z,(Ge.matrix.e-Ve.e)/Z,(Ge.matrix.f-Ve.f)/Z]}break;case"csv":var gt=U(E[ce])[oe](B),vt=U(J[ce])[oe](B);if(ce=="clip-rect")for(J[ce]=vt,le[ce]=[],K=vt.length;K--;)le[ce][K]=(gt[K]-J[ce][K])/Z;te[ce]=gt;break;default:for(gt=[][j](E[ce]),vt=[][j](J[ce]),le[ce]=[],K=t.paper.customAttributes[ce].length;K--;)le[ce][K]=((gt[K]||0)-(vt[K]||0))/Z}var Dt=E.easing,Xe=u.easing_formulas[Dt];if(!Xe)if((Xe=U(Dt).match(i))&&Xe.length==5){var st=Xe;Xe=function(qt){return j1(qt,+st[1],+st[2],+st[3],+st[4],Z)}}else Xe=Ae;if(ie={anim:e,percent:o,timestamp:ae=E.start||e.start||+new Date,start:ae+(e.del||0),status:0,initstatus:c||0,stop:!1,ms:Z,easing:Xe,from:J,diff:le,to:te,el:t,callback:E.callback,prev:Q,next:H,repeat:k||e.times,origin:t.attr(),totalOrigin:m},Be.push(ie),c&&!P&&!R&&(ie.stop=!0,ie.start=new Date-Z*c,Be.length==1))return Wt();R&&(ie.start=new Date-ie.ms*c),Be.length==1&&o1(Wt)}s("raphael.anim.start."+t.id,t,e)}}function l1(e){for(var t=0;t<Be.length;t++)Be[t].el.paper==e&&Be.splice(t--,1)}Te.animateWith=function(e,t,o,c,m,k){if(this.removed)return k&&k.call(this),this;var E=o instanceof We?o:u.animation(o,c,m,k);At(E,this,E.percents[0],null,this.attr());for(var P=0,R=Be.length;P<R;P++)if(Be[P].anim==t&&Be[P].el==e){Be[R-1].start=Be[P].start;break}return this},Te.onAnimation=function(e){return e?s.on("raphael.anim.frame."+this.id,e):s.unbind("raphael.anim.frame."+this.id),this},We.prototype.delay=function(e){var t=new We(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},We.prototype.repeat=function(e){var t=new We(this.anim,this.ms);return t.del=this.del,t.times=de.floor(be(e,0))||1,t},u.animation=function(e,t,o,c){if(e instanceof We)return e;!u.is(o,"function")&&o||(c=c||o||null,o=null),e=Object(e),t=+t||0;var m,k,E={};for(k in e)e[M](k)&&g(k)!=k&&g(k)+"%"!=k&&(m=!0,E[k]=e[k]);if(m)return o&&(E.easing=o),c&&(E.callback=c),new We({100:E},t);if(c){var P=0;for(var R in e){var H=x(R);e[M](R)&&H>P&&(P=H)}!e[P+="%"].callback&&(e[P].callback=c)}return new We(e,t)},Te.animate=function(e,t,o,c){if(this.removed)return c&&c.call(this),this;var m=e instanceof We?e:u.animation(e,t,o,c);return At(m,this,m.percents[0],null,this.attr()),this},Te.setTime=function(e,t){return e&&t!=null&&this.status(e,X(t,e.ms)/e.ms),this},Te.status=function(e,t){var o,c,m=[],k=0;if(t!=null)return At(e,this,-1,X(t,1)),this;for(o=Be.length;k<o;k++)if((c=Be[k]).el.id==this.id&&(!e||c.anim==e)){if(e)return c.status;m.push({anim:c.anim,status:c.status})}return e?0:m},Te.pause=function(e){for(var t=0;t<Be.length;t++)Be[t].el.id!=this.id||e&&Be[t].anim!=e||s("raphael.anim.pause."+this.id,this,Be[t].anim)!==!1&&(Be[t].paused=!0);return this},Te.resume=function(e){for(var t=0;t<Be.length;t++)if(Be[t].el.id==this.id&&(!e||Be[t].anim==e)){var o=Be[t];s("raphael.anim.resume."+this.id,this,o.anim)!==!1&&(delete o.paused,this.status(o.anim,o.status))}return this},Te.stop=function(e){for(var t=0;t<Be.length;t++)Be[t].el.id!=this.id||e&&Be[t].anim!=e||s("raphael.anim.stop."+this.id,this,Be[t].anim)!==!1&&Be.splice(t--,1);return this},s.on("raphael.remove",l1),s.on("raphael.clear",l1),Te.toString=function(){return"Raphaël’s object"};var c1,u1,it,h1,Pt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,o=e.length;t<o;t++)!e[t]||e[t].constructor!=Te.constructor&&e[t].constructor!=Pt||(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},Oe=Pt.prototype;for(var Yt in Oe.push=function(){for(var e,t,o=0,c=arguments.length;o<c;o++)!(e=arguments[o])||e.constructor!=Te.constructor&&e.constructor!=Pt||(this[t=this.items.length]=this.items[t]=e,this.length++);return this},Oe.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Oe.forEach=function(e,t){for(var o=0,c=this.items.length;o<c;o++)if(e.call(t,this.items[o],o)===!1)return this;return this},Te)Te[M](Yt)&&(Oe[Yt]=function(e){return function(){var t=arguments;return this.forEach(function(o){o[e][$](o,t)})}}(Yt));return Oe.attr=function(e,t){if(e&&u.is(e,l)&&u.is(e[0],"object"))for(var o=0,c=e.length;o<c;o++)this.items[o].attr(e[o]);else for(var m=0,k=this.items.length;m<k;m++)this.items[m].attr(e,t);return this},Oe.clear=function(){for(;this.length;)this.pop()},Oe.splice=function(e,t,o){e=e<0?be(this.length+e,0):e,t=be(0,X(this.length-e,t));var c,m=[],k=[],E=[];for(c=2;c<arguments.length;c++)E.push(arguments[c]);for(c=0;c<t;c++)k.push(this[e+c]);for(;c<this.length-e;c++)m.push(this[e+c]);var P=E.length;for(c=0;c<P+m.length;c++)this.items[e+c]=this[e+c]=c<P?E[c]:m[c-P];for(c=this.items.length=this.length-=t-P;this[c];)delete this[c++];return new Pt(k)},Oe.exclude=function(e){for(var t=0,o=this.length;t<o;t++)if(this[t]==e)return this.splice(t,1),!0},Oe.animate=function(e,t,o,c){(u.is(o,"function")||!o)&&(c=o||null);var m,k,E=this.items.length,P=E,R=this;if(!E)return this;c&&(k=function(){!--E&&c.call(R)}),o=u.is(o,"string")?o:k;var H=u.animation(e,t,o,k);for(m=this.items[--P].animate(H);P--;)this.items[P]&&!this.items[P].removed&&this.items[P].animateWith(m,H,H),this.items[P]&&!this.items[P].removed||E--;return this},Oe.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},Oe.getBBox=function(){for(var e=[],t=[],o=[],c=[],m=this.items.length;m--;)if(!this.items[m].removed){var k=this.items[m].getBBox();e.push(k.x),t.push(k.y),o.push(k.x+k.width),c.push(k.y+k.height)}return{x:e=X[$](0,e),y:t=X[$](0,t),x2:o=be[$](0,o),y2:c=be[$](0,c),width:o-e,height:c-t}},Oe.clone=function(e){e=this.paper.set();for(var t=0,o=this.items.length;t<o;t++)e.push(this.items[t].clone());return e},Oe.toString=function(){return"Raphaël‘s set"},Oe.glow=function(e){var t=this.paper.set();return this.forEach(function(o,c){var m=o.glow(e);m!=null&&m.forEach(function(k,E){t.push(k)})}),t},Oe.isPointInside=function(e,t){var o=!1;return this.forEach(function(c){if(c.isPointInside(e,t))return o=!0,!1}),o},u.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},o=e.face["font-family"];for(var c in e.face)e.face[M](c)&&(t.face[c]=e.face[c]);if(this.fonts[o]?this.fonts[o].push(t):this.fonts[o]=[t],!e.svg){for(var m in t.face["units-per-em"]=x(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[M](m)){var k=e.glyphs[m];if(t.glyphs[m]={w:k.w,k:{},d:k.d&&"M"+k.d.replace(/[mlcxtrv]/g,function(P){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[P]||"M"})+"z"},k.k)for(var E in k.k)k[M](E)&&(t.glyphs[m].k[E]=k.k[E])}}return e},b.getFont=function(e,t,o,c){if(c=c||"normal",o=o||"normal",t=+t||{normal:400,bold:700,lighter:300,bolder:800}[t]||400,u.fonts){var m,k=u.fonts[e];if(!k){var E=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,ue)+"(\\s|$)","i");for(var P in u.fonts)if(u.fonts[M](P)&&E.test(P)){k=u.fonts[P];break}}if(k)for(var R=0,H=k.length;R<H&&((m=k[R]).face["font-weight"]!=t||m.face["font-style"]!=o&&m.face["font-style"]||m.face["font-stretch"]!=c);R++);return m}},b.print=function(e,t,o,c,m,k,E,P){k=k||"middle",E=be(X(E||0,1),-1),P=be(X(P||1,3),1);var R,H=U(o)[oe](ue),Q=0,ae=0,Z=ue;if(u.is(c,"string")&&(c=this.getFont(c)),c){R=(m||16)/c.face["units-per-em"];for(var J=c.face.bbox[oe](B),te=+J[0],le=J[3]-J[1],ie=0,K=+J[1]+(k=="baseline"?le+ +c.face.descent:le/2),we=0,ce=H.length;we<ce;we++){if(H[we]==`
`)Q=0,he=0,ae=0,ie+=le*P;else{var fe=ae&&c.glyphs[H[we-1]]||{},he=c.glyphs[H[we]];Q+=ae?(fe.w||c.w)+(fe.k&&fe.k[H[we]]||0)+c.w*E:0,ae=1}he&&he.d&&(Z+=u.transformPath(he.d,["t",Q*R,ie*R,"s",R,R,te,K,"t",(e-te)/R,(t-K)/R]))}}return this.path(Z).attr({fill:"#000",stroke:"none"})},b.add=function(e){if(u.is(e,"array"))for(var t,o=this.set(),c=0,m=e.length;c<m;c++)t=e[c]||{},q[M](t.type)&&o.push(this[t.type]().attr(t));return o},u.format=function(e,t){var o=u.is(t,l)?[0][j](t):arguments;return e&&u.is(e,"string")&&o.length-1&&(e=e.replace(D,function(c,m){return o[++m]==null?ue:o[m]})),e||ue},u.fullfill=(c1=/\{([^\}]+)\}/g,u1=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,t){return String(e).replace(c1,function(o,c){return function(m,k,E){var P=E;return k.replace(u1,function(R,H,Q,ae,Z){H=H||ae,P&&(H in P&&(P=P[H]),typeof P=="function"&&Z&&(P=P()))}),P=(P==null||P==E?m:P)+""}(o,c,t)})}),u.ninja=function(){if(W.was)L.win.Raphael=W.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return u},u.st=Oe,s.on("raphael.DOMload",function(){v=!0}),(it=document).readyState==null&&it.addEventListener&&(it.addEventListener("DOMContentLoaded",h1=function(){it.removeEventListener("DOMContentLoaded",h1,!1),it.readyState="complete"},!1),it.readyState="loading"),function e(){/in/.test(it.readyState)?setTimeout(e,9):u.eve("raphael.DOMload")}(),u}.apply(O,C))===void 0||(T.exports=d)},function(T,O,w){var C,d;C=[w(0),w(3),w(4)],(d=function(s){return s}.apply(O,C))===void 0||(T.exports=d)},function(T,O,w){var C,d,s,u,v,b,B,q,D,M,L,W,Y,$;u="hasOwnProperty",v=/[\.\/]/,b=/\s*,\s*/,B=function(j,se){return j-se},q={n:{}},D=function(){for(var j=0,se=this.length;j<se;j++)if(this[j]!==void 0)return this[j]},M=function(){for(var j=this.length;--j;)if(this[j]!==void 0)return this[j]},L=Object.prototype.toString,W=String,Y=Array.isArray||function(j){return j instanceof Array||L.call(j)=="[object Array]"},($=function(j,se){var ue,pe=s,U=Array.prototype.slice.call(arguments,2),oe=$.listeners(j),ne=0,F=[],me={},de=[],be=d;de.firstDefined=D,de.lastDefined=M,d=j,s=0;for(var X=0,xe=oe.length;X<xe;X++)"zIndex"in oe[X]&&(F.push(oe[X].zIndex),oe[X].zIndex<0&&(me[oe[X].zIndex]=oe[X]));for(F.sort(B);F[ne]<0;)if(ue=me[F[ne++]],de.push(ue.apply(se,U)),s)return s=pe,de;for(X=0;X<xe;X++)if("zIndex"in(ue=oe[X]))if(ue.zIndex==F[ne]){if(de.push(ue.apply(se,U)),s)break;do if((ue=me[F[++ne]])&&de.push(ue.apply(se,U)),s)break;while(ue)}else me[ue.zIndex]=ue;else if(de.push(ue.apply(se,U)),s)break;return s=pe,d=be,de})._events=q,$.listeners=function(j){var se,ue,pe,U,oe,ne,F,me,de=Y(j)?j:j.split(v),be=q,X=[be],xe=[];for(U=0,oe=de.length;U<oe;U++){for(me=[],ne=0,F=X.length;ne<F;ne++)for(ue=[(be=X[ne].n)[de[U]],be["*"]],pe=2;pe--;)(se=ue[pe])&&(me.push(se),xe=xe.concat(se.f||[]));X=me}return xe},$.separator=function(j){j?(j="["+(j=W(j).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",v=new RegExp(j)):v=/[\.\/]/},$.on=function(j,se){if(typeof se!="function")return function(){};for(var ue=Y(j)?Y(j[0])?j:[j]:W(j).split(b),pe=0,U=ue.length;pe<U;pe++)(function(oe){for(var ne,F=Y(oe)?oe:W(oe).split(v),me=q,de=0,be=F.length;de<be;de++)me=(me=me.n).hasOwnProperty(F[de])&&me[F[de]]||(me[F[de]]={n:{}});for(me.f=me.f||[],de=0,be=me.f.length;de<be;de++)if(me.f[de]==se){ne=!0;break}!ne&&me.f.push(se)})(ue[pe]);return function(oe){+oe==+oe&&(se.zIndex=+oe)}},$.f=function(j){var se=[].slice.call(arguments,1);return function(){$.apply(null,[j,null].concat(se).concat([].slice.call(arguments,0)))}},$.stop=function(){s=1},$.nt=function(j){var se=Y(d)?d.join("."):d;return j?new RegExp("(?:\\.|\\/|^)"+j+"(?:\\.|\\/|$)").test(se):se},$.nts=function(){return Y(d)?d:d.split(v)},$.off=$.unbind=function(j,se){if(j){var ue=Y(j)?Y(j[0])?j:[j]:W(j).split(b);if(ue.length>1)for(var pe=0,U=ue.length;pe<U;pe++)$.off(ue[pe],se);else{ue=Y(j)?j:W(j).split(v);var oe,ne,F,me,de,be=[q];for(pe=0,U=ue.length;pe<U;pe++)for(me=0;me<be.length;me+=F.length-2){if(F=[me,1],oe=be[me].n,ue[pe]!="*")oe[ue[pe]]&&F.push(oe[ue[pe]]);else for(ne in oe)oe[u](ne)&&F.push(oe[ne]);be.splice.apply(be,F)}for(pe=0,U=be.length;pe<U;pe++)for(oe=be[pe];oe.n;){if(se){if(oe.f){for(me=0,de=oe.f.length;me<de;me++)if(oe.f[me]==se){oe.f.splice(me,1);break}!oe.f.length&&delete oe.f}for(ne in oe.n)if(oe.n[u](ne)&&oe.n[ne].f){var X=oe.n[ne].f;for(me=0,de=X.length;me<de;me++)if(X[me]==se){X.splice(me,1);break}!X.length&&delete oe.n[ne].f}}else for(ne in delete oe.f,oe.n)oe.n[u](ne)&&oe.n[ne].f&&delete oe.n[ne].f;oe=oe.n}}}else $._events=q={n:{}}},$.once=function(j,se){var ue=function(){return $.off(j,ue),se.apply(this,arguments)};return $.on(j,ue)},$.version="0.5.0",$.toString=function(){return"You are running Eve 0.5.0"},T.exports?T.exports=$:(C=function(){return $}.apply(O,[]))===void 0||(T.exports=C)},function(T,O,w){var C,d;C=[w(0)],(d=function(s){if(!s||s.svg){var u="hasOwnProperty",v=String,b=parseFloat,B=parseInt,q=Math,D=q.max,M=q.abs,L=q.pow,W=/[, ]+/,Y=s.eve,$="",j=" ",se="http://www.w3.org/1999/xlink",ue={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},pe={};s.toString=function(){return`Your browser supports SVG.
You are running Raphaël `+this.version};var U=function(n,r){if(r)for(var i in typeof n=="string"&&(n=U(n)),r)r[u](i)&&(i.substring(0,6)=="xlink:"?n.setAttributeNS(se,i.substring(6),v(r[i])):n.setAttribute(i,v(r[i])));else(n=s._g.doc.createElementNS("http://www.w3.org/2000/svg",n)).style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},oe=function(n,r){var i="linear",h=n.id+r,g=.5,x=.5,A=n.node,I=n.paper,N=A.style,V=s._g.doc.getElementById(h);if(!V){if(r=(r=v(r).replace(s._radial_gradient,function(Se,Ae,ke){if(i="radial",Ae&&ke){g=b(Ae);var Le=2*((x=b(ke))>.5)-1;L(g-.5,2)+L(x-.5,2)>.25&&(x=q.sqrt(.25-L(g-.5,2))*Le+.5)&&x!=.5&&(x=x.toFixed(5)-1e-5*Le)}return $})).split(/\s*\-\s*/),i=="linear"){var G=r.shift();if(G=-b(G),isNaN(G))return null;var re=[0,0,q.cos(s.rad(G)),q.sin(s.rad(G))],ge=1/(D(M(re[2]),M(re[3]))||1);re[2]*=ge,re[3]*=ge,re[2]<0&&(re[0]=-re[2],re[2]=0),re[3]<0&&(re[1]=-re[3],re[3]=0)}var ye=s._parseDots(r);if(!ye)return null;if(h=h.replace(/[\(\)\s,\xb0#]/g,"_"),n.gradient&&h!=n.gradient.id&&(I.defs.removeChild(n.gradient),delete n.gradient),!n.gradient){V=U(i+"Gradient",{id:h}),n.gradient=V,U(V,i=="radial"?{fx:g,fy:x}:{x1:re[0],y1:re[1],x2:re[2],y2:re[3],gradientTransform:n.matrix.invert()}),I.defs.appendChild(V);for(var ve=0,_e=ye.length;ve<_e;ve++)V.appendChild(U("stop",{offset:ye[ve].offset?ye[ve].offset:ve?"100%":"0%","stop-color":ye[ve].color||"#fff","stop-opacity":isFinite(ye[ve].opacity)?ye[ve].opacity:1}))}}return U(A,{fill:ne(h),opacity:1,"fill-opacity":1}),N.fill=$,N.opacity=1,N.fillOpacity=1,1},ne=function(n){if((r=document.documentMode)&&(r===9||r===10))return"url('#"+n+"')";var r,i=document.location;return"url('"+(i.protocol+"//"+i.host+i.pathname+i.search)+"#"+n+"')"},F=function(n){var r=n.getBBox(1);U(n.pattern,{patternTransform:n.matrix.invert()+" translate("+r.x+","+r.y+")"})},me=function(n,r,i){if(n.type=="path"){for(var h,g,x,A,I,N=v(r).toLowerCase().split("-"),V=n.paper,G=i?"end":"start",re=n.node,ge=n.attrs,ye=ge["stroke-width"],ve=N.length,_e="classic",Se=3,Ae=3,ke=5;ve--;)switch(N[ve]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_e=N[ve];break;case"wide":Ae=5;break;case"narrow":Ae=2;break;case"long":Se=5;break;case"short":Se=2}if(_e=="open"?(Se+=2,Ae+=2,ke+=2,x=1,A=i?4:1,I={fill:"none",stroke:ge.stroke}):(A=x=Se/2,I={fill:ge.stroke,stroke:"none"}),n._.arrows?i?(n._.arrows.endPath&&pe[n._.arrows.endPath]--,n._.arrows.endMarker&&pe[n._.arrows.endMarker]--):(n._.arrows.startPath&&pe[n._.arrows.startPath]--,n._.arrows.startMarker&&pe[n._.arrows.startMarker]--):n._.arrows={},_e!="none"){var Le="raphael-marker-"+_e,Me="raphael-marker-"+G+_e+Se+Ae+"-obj"+n.id;s._g.doc.getElementById(Le)?pe[Le]++:(V.defs.appendChild(U(U("path"),{"stroke-linecap":"round",d:ue[_e],id:Le})),pe[Le]=1);var Ie,Ne=s._g.doc.getElementById(Me);Ne?(pe[Me]++,Ie=Ne.getElementsByTagName("use")[0]):(Ne=U(U("marker"),{id:Me,markerHeight:Ae,markerWidth:Se,orient:"auto",refX:A,refY:Ae/2}),Ie=U(U("use"),{"xlink:href":"#"+Le,transform:(i?"rotate(180 "+Se/2+" "+Ae/2+") ":$)+"scale("+Se/ke+","+Ae/ke+")","stroke-width":(1/((Se/ke+Ae/ke)/2)).toFixed(4)}),Ne.appendChild(Ie),V.defs.appendChild(Ne),pe[Me]=1),U(Ie,I);var qe=x*(_e!="diamond"&&_e!="oval");i?(h=n._.arrows.startdx*ye||0,g=s.getTotalLength(ge.path)-qe*ye):(h=qe*ye,g=s.getTotalLength(ge.path)-(n._.arrows.enddx*ye||0)),(I={})["marker-"+G]="url(#"+Me+")",(g||h)&&(I.d=s.getSubpath(ge.path,h,g)),U(re,I),n._.arrows[G+"Path"]=Le,n._.arrows[G+"Marker"]=Me,n._.arrows[G+"dx"]=qe,n._.arrows[G+"Type"]=_e,n._.arrows[G+"String"]=r}else i?(h=n._.arrows.startdx*ye||0,g=s.getTotalLength(ge.path)-h):(h=0,g=s.getTotalLength(ge.path)-(n._.arrows.enddx*ye||0)),n._.arrows[G+"Path"]&&U(re,{d:s.getSubpath(ge.path,h,g)}),delete n._.arrows[G+"Path"],delete n._.arrows[G+"Marker"],delete n._.arrows[G+"dx"],delete n._.arrows[G+"Type"],delete n._.arrows[G+"String"];for(I in pe)if(pe[u](I)&&!pe[I]){var ze=s._g.doc.getElementById(I);ze&&ze.parentNode.removeChild(ze)}}},de={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},be=function(n,r,i){if(r=de[v(r).toLowerCase()]){for(var h=n.attrs["stroke-width"]||"1",g={round:h,square:h,butt:0}[n.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,x=[],A=r.length;A--;)x[A]=r[A]*h+(A%2?1:-1)*g;U(n.node,{"stroke-dasharray":x.join(",")})}else U(n.node,{"stroke-dasharray":"none"})},X=function(n,r){var i=n.node,h=n.attrs,g=i.style.visibility;for(var x in i.style.visibility="hidden",r)if(r[u](x)){if(!s._availableAttrs[u](x))continue;var A=r[x];switch(h[x]=A,x){case"blur":n.blur(A);break;case"title":var I=i.getElementsByTagName("title");if(I.length&&(I=I[0]))I.firstChild.nodeValue=A;else{I=U("title");var N=s._g.doc.createTextNode(A);I.appendChild(N),i.appendChild(I)}break;case"href":case"target":var V=i.parentNode;if(V.tagName.toLowerCase()!="a"){var G=U("a");V.insertBefore(G,i),G.appendChild(i),V=G}x=="target"?V.setAttributeNS(se,"show",A=="blank"?"new":A):V.setAttributeNS(se,x,A);break;case"cursor":i.style.cursor=A;break;case"transform":n.transform(A);break;case"arrow-start":me(n,A);break;case"arrow-end":me(n,A,1);break;case"clip-rect":var re=v(A).split(W);if(re.length==4){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var ge=U("clipPath"),ye=U("rect");ge.id=s.createUUID(),U(ye,{x:re[0],y:re[1],width:re[2],height:re[3]}),ge.appendChild(ye),n.paper.defs.appendChild(ge),U(i,{"clip-path":"url(#"+ge.id+")"}),n.clip=ye}if(!A){var ve=i.getAttribute("clip-path");if(ve){var _e=s._g.doc.getElementById(ve.replace(/(^url\(#|\)$)/g,$));_e&&_e.parentNode.removeChild(_e),U(i,{"clip-path":$}),delete n.clip}}break;case"path":n.type=="path"&&(U(i,{d:A?h.path=s._pathToAbsolute(A):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&me(n,n._.arrows.startString),"endString"in n._.arrows&&me(n,n._.arrows.endString,1)));break;case"width":if(i.setAttribute(x,A),n._.dirty=1,!h.fx)break;x="x",A=h.x;case"x":h.fx&&(A=-h.x-(h.width||0));case"rx":if(x=="rx"&&n.type=="rect")break;case"cx":i.setAttribute(x,A),n.pattern&&F(n),n._.dirty=1;break;case"height":if(i.setAttribute(x,A),n._.dirty=1,!h.fy)break;x="y",A=h.y;case"y":h.fy&&(A=-h.y-(h.height||0));case"ry":if(x=="ry"&&n.type=="rect")break;case"cy":i.setAttribute(x,A),n.pattern&&F(n),n._.dirty=1;break;case"r":n.type=="rect"?U(i,{rx:A,ry:A}):i.setAttribute(x,A),n._.dirty=1;break;case"src":n.type=="image"&&i.setAttributeNS(se,"href",A);break;case"stroke-width":n._.sx==1&&n._.sy==1||(A/=D(M(n._.sx),M(n._.sy))||1),i.setAttribute(x,A),h["stroke-dasharray"]&&be(n,h["stroke-dasharray"],r),n._.arrows&&("startString"in n._.arrows&&me(n,n._.arrows.startString),"endString"in n._.arrows&&me(n,n._.arrows.endString,1));break;case"stroke-dasharray":be(n,A,r);break;case"fill":var Se=v(A).match(s._ISURL);if(Se){ge=U("pattern");var Ae=U("image");ge.id=s.createUUID(),U(ge,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),U(Ae,{x:0,y:0,"xlink:href":Se[1]}),ge.appendChild(Ae),function(Ne){s._preload(Se[1],function(){var qe=this.offsetWidth,ze=this.offsetHeight;U(Ne,{width:qe,height:ze}),U(Ae,{width:qe,height:ze})})}(ge),n.paper.defs.appendChild(ge),U(i,{fill:"url(#"+ge.id+")"}),n.pattern=ge,n.pattern&&F(n);break}var ke=s.getRGB(A);if(ke.error){if((n.type=="circle"||n.type=="ellipse"||v(A).charAt()!="r")&&oe(n,A)){if("opacity"in h||"fill-opacity"in h){var Le=s._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,$));if(Le){var Me=Le.getElementsByTagName("stop");U(Me[Me.length-1],{"stop-opacity":("opacity"in h?h.opacity:1)*("fill-opacity"in h?h["fill-opacity"]:1)})}}h.gradient=A,h.fill="none";break}}else delete r.gradient,delete h.gradient,!s.is(h.opacity,"undefined")&&s.is(r.opacity,"undefined")&&U(i,{opacity:h.opacity}),!s.is(h["fill-opacity"],"undefined")&&s.is(r["fill-opacity"],"undefined")&&U(i,{"fill-opacity":h["fill-opacity"]});ke[u]("opacity")&&U(i,{"fill-opacity":ke.opacity>1?ke.opacity/100:ke.opacity});case"stroke":ke=s.getRGB(A),i.setAttribute(x,ke.hex),x=="stroke"&&ke[u]("opacity")&&U(i,{"stroke-opacity":ke.opacity>1?ke.opacity/100:ke.opacity}),x=="stroke"&&n._.arrows&&("startString"in n._.arrows&&me(n,n._.arrows.startString),"endString"in n._.arrows&&me(n,n._.arrows.endString,1));break;case"gradient":(n.type=="circle"||n.type=="ellipse"||v(A).charAt()!="r")&&oe(n,A);break;case"opacity":h.gradient&&!h[u]("stroke-opacity")&&U(i,{"stroke-opacity":A>1?A/100:A});case"fill-opacity":if(h.gradient){(Le=s._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,$)))&&(Me=Le.getElementsByTagName("stop"),U(Me[Me.length-1],{"stop-opacity":A}));break}default:x=="font-size"&&(A=B(A,10)+"px");var Ie=x.replace(/(\-.)/g,function(Ne){return Ne.substring(1).toUpperCase()});i.style[Ie]=A,n._.dirty=1,i.setAttribute(x,A)}}xe(n,r),i.style.visibility=g},xe=function(n,r){if(n.type=="text"&&(r[u]("text")||r[u]("font")||r[u]("font-size")||r[u]("x")||r[u]("y"))){var i=n.attrs,h=n.node,g=h.firstChild?B(s._g.doc.defaultView.getComputedStyle(h.firstChild,$).getPropertyValue("font-size"),10):10;if(r[u]("text")){for(i.text=r.text;h.firstChild;)h.removeChild(h.firstChild);for(var x,A=v(r.text).split(`
`),I=[],N=0,V=A.length;N<V;N++)x=U("tspan"),N&&U(x,{dy:1.2*g,x:i.x}),x.appendChild(s._g.doc.createTextNode(A[N])),h.appendChild(x),I[N]=x}else for(N=0,V=(I=h.getElementsByTagName("tspan")).length;N<V;N++)N?U(I[N],{dy:1.2*g,x:i.x}):U(I[0],{dy:0});U(h,{x:i.x,y:i.y}),n._.dirty=1;var G=n._getBBox(),re=i.y-(G.y+G.height/2);re&&s.is(re,"finite")&&U(I[0],{dy:re})}},Ce=function(n){return n.parentNode&&n.parentNode.tagName.toLowerCase()==="a"?n.parentNode:n},ee=function(n,r){this[0]=this.node=n,n.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),n.raphaelid=this.id,this.matrix=s.matrix(),this.realPath=null,this.paper=r,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},a=s.el;ee.prototype=a,a.constructor=ee,s._engine.path=function(n,r){var i=U("path");r.canvas&&r.canvas.appendChild(i);var h=new ee(i,r);return h.type="path",X(h,{fill:"none",stroke:"#000",path:n}),h},a.rotate=function(n,r,i){if(this.removed)return this;if((n=v(n).split(W)).length-1&&(r=b(n[1]),i=b(n[2])),n=b(n[0]),i==null&&(r=i),r==null||i==null){var h=this.getBBox(1);r=h.x+h.width/2,i=h.y+h.height/2}return this.transform(this._.transform.concat([["r",n,r,i]])),this},a.scale=function(n,r,i,h){if(this.removed)return this;if((n=v(n).split(W)).length-1&&(r=b(n[1]),i=b(n[2]),h=b(n[3])),n=b(n[0]),r==null&&(r=n),h==null&&(i=h),i==null||h==null)var g=this.getBBox(1);return i=i==null?g.x+g.width/2:i,h=h==null?g.y+g.height/2:h,this.transform(this._.transform.concat([["s",n,r,i,h]])),this},a.translate=function(n,r){return this.removed?this:((n=v(n).split(W)).length-1&&(r=b(n[1])),n=b(n[0])||0,r=+r||0,this.transform(this._.transform.concat([["t",n,r]])),this)},a.transform=function(n){var r=this._;if(n==null)return r.transform;if(s._extractTransform(this,n),this.clip&&U(this.clip,{transform:this.matrix.invert()}),this.pattern&&F(this),this.node&&U(this.node,{transform:this.matrix}),r.sx!=1||r.sy!=1){var i=this.attrs[u]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},a.hide=function(){return this.removed||(this.node.style.display="none"),this},a.show=function(){return this.removed||(this.node.style.display=""),this},a.remove=function(){var n=Ce(this.node);if(!this.removed&&n.parentNode){var r=this.paper;for(var i in r.__set__&&r.__set__.exclude(this),Y.unbind("raphael.*.*."+this.id),this.gradient&&r.defs.removeChild(this.gradient),s._tear(this,r),n.parentNode.removeChild(n),this.removeData(),this)this[i]=typeof this[i]=="function"?s._removedFactory(i):null;this.removed=!0}},a._getBBox=function(){if(this.node.style.display=="none"){this.show();var n=!0}var r,i=!1;this.paper.canvas.parentElement?r=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(r=this.paper.canvas.parentNode.style),r&&r.display=="none"&&(i=!0,r.display="");var h={};try{h=this.node.getBBox()}catch(g){h={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{h=h||{},i&&(r.display="none")}return n&&this.hide(),h},a.attr=function(n,r){if(this.removed)return this;if(n==null){var i={};for(var h in this.attrs)this.attrs[u](h)&&(i[h]=this.attrs[h]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(r==null&&s.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(n=="transform")return this._.transform;for(var g=n.split(W),x={},A=0,I=g.length;A<I;A++)(n=g[A])in this.attrs?x[n]=this.attrs[n]:s.is(this.paper.customAttributes[n],"function")?x[n]=this.paper.customAttributes[n].def:x[n]=s._availableAttrs[n];return I-1?x:x[g[0]]}if(r==null&&s.is(n,"array")){for(x={},A=0,I=n.length;A<I;A++)x[n[A]]=this.attr(n[A]);return x}if(r!=null){var N={};N[n]=r}else n!=null&&s.is(n,"object")&&(N=n);for(var V in N)Y("raphael.attr."+V+"."+this.id,this,N[V]);for(V in this.paper.customAttributes)if(this.paper.customAttributes[u](V)&&N[u](V)&&s.is(this.paper.customAttributes[V],"function")){var G=this.paper.customAttributes[V].apply(this,[].concat(N[V]));for(var re in this.attrs[V]=N[V],G)G[u](re)&&(N[re]=G[re])}return X(this,N),this},a.toFront=function(){if(this.removed)return this;var n=Ce(this.node);n.parentNode.appendChild(n);var r=this.paper;return r.top!=this&&s._tofront(this,r),this},a.toBack=function(){if(this.removed)return this;var n=Ce(this.node),r=n.parentNode;return r.insertBefore(n,r.firstChild),s._toback(this,this.paper),this.paper,this},a.insertAfter=function(n){if(this.removed||!n)return this;var r=Ce(this.node),i=Ce(n.node||n[n.length-1].node);return i.nextSibling?i.parentNode.insertBefore(r,i.nextSibling):i.parentNode.appendChild(r),s._insertafter(this,n,this.paper),this},a.insertBefore=function(n){if(this.removed||!n)return this;var r=Ce(this.node),i=Ce(n.node||n[0].node);return i.parentNode.insertBefore(r,i),s._insertbefore(this,n,this.paper),this},a.blur=function(n){var r=this;if(+n!=0){var i=U("filter"),h=U("feGaussianBlur");r.attrs.blur=n,i.id=s.createUUID(),U(h,{stdDeviation:+n||1.5}),i.appendChild(h),r.paper.defs.appendChild(i),r._blur=i,U(r.node,{filter:"url(#"+i.id+")"})}else r._blur&&(r._blur.parentNode.removeChild(r._blur),delete r._blur,delete r.attrs.blur),r.node.removeAttribute("filter");return r},s._engine.circle=function(n,r,i,h){var g=U("circle");n.canvas&&n.canvas.appendChild(g);var x=new ee(g,n);return x.attrs={cx:r,cy:i,r:h,fill:"none",stroke:"#000"},x.type="circle",U(g,x.attrs),x},s._engine.rect=function(n,r,i,h,g,x){var A=U("rect");n.canvas&&n.canvas.appendChild(A);var I=new ee(A,n);return I.attrs={x:r,y:i,width:h,height:g,rx:x||0,ry:x||0,fill:"none",stroke:"#000"},I.type="rect",U(A,I.attrs),I},s._engine.ellipse=function(n,r,i,h,g){var x=U("ellipse");n.canvas&&n.canvas.appendChild(x);var A=new ee(x,n);return A.attrs={cx:r,cy:i,rx:h,ry:g,fill:"none",stroke:"#000"},A.type="ellipse",U(x,A.attrs),A},s._engine.image=function(n,r,i,h,g,x){var A=U("image");U(A,{x:i,y:h,width:g,height:x,preserveAspectRatio:"none"}),A.setAttributeNS(se,"href",r),n.canvas&&n.canvas.appendChild(A);var I=new ee(A,n);return I.attrs={x:i,y:h,width:g,height:x,src:r},I.type="image",I},s._engine.text=function(n,r,i,h){var g=U("text");n.canvas&&n.canvas.appendChild(g);var x=new ee(g,n);return x.attrs={x:r,y:i,"text-anchor":"middle",text:h,"font-family":s._availableAttrs["font-family"],"font-size":s._availableAttrs["font-size"],stroke:"none",fill:"#000"},x.type="text",X(x,x.attrs),x},s._engine.setSize=function(n,r){return this.width=n||this.width,this.height=r||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},s._engine.create=function(){var n=s._getContainer.apply(0,arguments),r=n&&n.container;if(!r)throw new Error("SVG container not found.");var i,h=n.x,g=n.y,x=n.width,A=n.height,I=U("svg"),N="overflow:hidden;";return h=h||0,g=g||0,U(I,{height:A=A||342,version:1.1,width:x=x||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),r==1?(I.style.cssText=N+"position:absolute;left:"+h+"px;top:"+g+"px",s._g.doc.body.appendChild(I),i=1):(I.style.cssText=N+"position:relative",r.firstChild?r.insertBefore(I,r.firstChild):r.appendChild(I)),(r=new s._Paper).width=x,r.height=A,r.canvas=I,r.clear(),r._left=r._top=0,i&&(r.renderfix=function(){}),r.renderfix(),r},s._engine.setViewBox=function(n,r,i,h,g){Y("raphael.setViewBox",this,this._viewBox,[n,r,i,h,g]);var x,A,I=this.getSize(),N=D(i/I.width,h/I.height),V=this.top,G=g?"xMidYMid meet":"xMinYMin";for(n==null?(this._vbSize&&(N=1),delete this._vbSize,x="0 0 "+this.width+j+this.height):(this._vbSize=N,x=n+j+r+j+i+j+h),U(this.canvas,{viewBox:x,preserveAspectRatio:G});N&&V;)A="stroke-width"in V.attrs?V.attrs["stroke-width"]:1,V.attr({"stroke-width":A}),V._.dirty=1,V._.dirtyT=1,V=V.prev;return this._viewBox=[n,r,i,h,!!g],this},s.prototype.renderfix=function(){var n,r=this.canvas,i=r.style;try{n=r.getScreenCTM()||r.createSVGMatrix()}catch(x){n=r.createSVGMatrix()}var h=-n.e%1,g=-n.f%1;(h||g)&&(h&&(this._left=(this._left+h)%1,i.left=this._left+"px"),g&&(this._top=(this._top+g)%1,i.top=this._top+"px"))},s.prototype.clear=function(){s.eve("raphael.clear",this);for(var n=this.canvas;n.firstChild;)n.removeChild(n.firstChild);this.bottom=this.top=null,(this.desc=U("desc")).appendChild(s._g.doc.createTextNode("Created with Raphaël "+s.version)),n.appendChild(this.desc),n.appendChild(this.defs=U("defs"))},s.prototype.remove=function(){for(var n in Y("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[n]=typeof this[n]=="function"?s._removedFactory(n):null};var l=s.st;for(var p in a)a[u](p)&&!l[u](p)&&(l[p]=function(n){return function(){var r=arguments;return this.forEach(function(i){i[n].apply(i,r)})}}(p))}}.apply(O,C))===void 0||(T.exports=d)},function(T,O,w){var C,d;C=[w(0)],(d=function(s){if(!s||s.vml){var u="hasOwnProperty",v=String,b=parseFloat,B=Math,q=B.round,D=B.max,M=B.min,L=B.abs,W=/[, ]+/,Y=s.eve,$=" ",j="",se={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},ue=/([clmz]),?([^clmz]*)/gi,pe=/ progid:\S+Blur\([^\)]+\)/g,U=/-?[^,\s-]+/g,oe="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",ne=21600,F={path:1,rect:1,image:1},me={circle:1,ellipse:1},de=function(r,i,h){var g=s.matrix();return g.rotate(-r,.5,.5),{dx:g.x(i,h),dy:g.y(i,h)}},be=function(r,i,h,g,x,A){var I=r._,N=r.matrix,V=I.fillpos,G=r.node,re=G.style,ge=1,ye="",ve=ne/i,_e=ne/h;if(re.visibility="hidden",i&&h){if(G.coordsize=L(ve)+$+L(_e),re.rotation=A*(i*h<0?-1:1),A){var Se=de(A,g,x);g=Se.dx,x=Se.dy}if(i<0&&(ye+="x"),h<0&&(ye+=" y")&&(ge=-1),re.flip=ye,G.coordorigin=g*-ve+$+x*-_e,V||I.fillsize){var Ae=G.getElementsByTagName("fill");Ae=Ae&&Ae[0],G.removeChild(Ae),V&&(Se=de(A,N.x(V[0],V[1]),N.y(V[0],V[1])),Ae.position=Se.dx*ge+$+Se.dy*ge),I.fillsize&&(Ae.size=I.fillsize[0]*L(i)+$+I.fillsize[1]*L(h)),G.appendChild(Ae)}re.visibility="visible"}};s.toString=function(){return`Your browser doesn’t support SVG. Falling down to VML.
You are running Raphaël `+this.version};var X,xe=function(r,i,h){for(var g=v(i).toLowerCase().split("-"),x=h?"end":"start",A=g.length,I="classic",N="medium",V="medium";A--;)switch(g[A]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":I=g[A];break;case"wide":case"narrow":V=g[A];break;case"long":case"short":N=g[A]}var G=r.node.getElementsByTagName("stroke")[0];G[x+"arrow"]=I,G[x+"arrowlength"]=N,G[x+"arrowwidth"]=V},Ce=function(r,i){r.attrs=r.attrs||{};var h=r.node,g=r.attrs,x=h.style,A=F[r.type]&&(i.x!=g.x||i.y!=g.y||i.width!=g.width||i.height!=g.height||i.cx!=g.cx||i.cy!=g.cy||i.rx!=g.rx||i.ry!=g.ry||i.r!=g.r),I=me[r.type]&&(g.cx!=i.cx||g.cy!=i.cy||g.r!=i.r||g.rx!=i.rx||g.ry!=i.ry),N=r;for(var V in i)i[u](V)&&(g[V]=i[V]);if(A&&(g.path=s._getPath[r.type](r),r._.dirty=1),i.href&&(h.href=i.href),i.title&&(h.title=i.title),i.target&&(h.target=i.target),i.cursor&&(x.cursor=i.cursor),"blur"in i&&r.blur(i.blur),(i.path&&r.type=="path"||A)&&(h.path=function(Fe){var Qe=/[ahqstv]/gi,ct=s._pathToAbsolute;if(v(Fe).match(Qe)&&(ct=s._path2curve),Qe=/[clmz]/g,ct==s._pathToAbsolute&&!v(Fe).match(Qe)){var je=v(Fe).replace(ue,function(Zt,dt,ft){var Ze=[],Tt=dt.toLowerCase()=="m",nt=se[dt];return ft.replace(U,function(Mt){Tt&&Ze.length==2&&(nt+=Ze+se[dt=="m"?"l":"L"],Ze=[]),Ze.push(q(Mt*ne))}),nt+Ze});return je}var ut,Ue,kt=ct(Fe);je=[];for(var ht=0,_t=kt.length;ht<_t;ht++){ut=kt[ht],(Ue=kt[ht][0].toLowerCase())=="z"&&(Ue="x");for(var Ke=1,He=ut.length;Ke<He;Ke++)Ue+=q(ut[Ke]*ne)+(Ke!=He-1?",":j);je.push(Ue)}return je.join($)}(~v(g.path).toLowerCase().indexOf("r")?s._pathToAbsolute(g.path):g.path),r._.dirty=1,r.type=="image"&&(r._.fillpos=[g.x,g.y],r._.fillsize=[g.width,g.height],be(r,1,1,0,0,0))),"transform"in i&&r.transform(i.transform),I){var G=+g.cx,re=+g.cy,ge=+g.rx||+g.r||0,ye=+g.ry||+g.r||0;h.path=s.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",q((G-ge)*ne),q((re-ye)*ne),q((G+ge)*ne),q((re+ye)*ne),q(G*ne)),r._.dirty=1}if("clip-rect"in i){var ve=v(i["clip-rect"]).split(W);if(ve.length==4){ve[2]=+ve[2]+ +ve[0],ve[3]=+ve[3]+ +ve[1];var _e=h.clipRect||s._g.doc.createElement("div"),Se=_e.style;Se.clip=s.format("rect({1}px {2}px {3}px {0}px)",ve),h.clipRect||(Se.position="absolute",Se.top=0,Se.left=0,Se.width=r.paper.width+"px",Se.height=r.paper.height+"px",h.parentNode.insertBefore(_e,h),_e.appendChild(h),h.clipRect=_e)}i["clip-rect"]||h.clipRect&&(h.clipRect.style.clip="auto")}if(r.textpath){var Ae=r.textpath.style;i.font&&(Ae.font=i.font),i["font-family"]&&(Ae.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,j)+'"'),i["font-size"]&&(Ae.fontSize=i["font-size"]),i["font-weight"]&&(Ae.fontWeight=i["font-weight"]),i["font-style"]&&(Ae.fontStyle=i["font-style"])}if("arrow-start"in i&&xe(N,i["arrow-start"]),"arrow-end"in i&&xe(N,i["arrow-end"],1),i.opacity!=null||i.fill!=null||i.src!=null||i.stroke!=null||i["stroke-width"]!=null||i["stroke-opacity"]!=null||i["fill-opacity"]!=null||i["stroke-dasharray"]!=null||i["stroke-miterlimit"]!=null||i["stroke-linejoin"]!=null||i["stroke-linecap"]!=null){var ke=h.getElementsByTagName("fill");if(!(ke=ke&&ke[0])&&(ke=X("fill")),r.type=="image"&&i.src&&(ke.src=i.src),i.fill&&(ke.on=!0),ke.on!=null&&i.fill!="none"&&i.fill!==null||(ke.on=!1),ke.on&&i.fill){var Le=v(i.fill).match(s._ISURL);if(Le){ke.parentNode==h&&h.removeChild(ke),ke.rotate=!0,ke.src=Le[1],ke.type="tile";var Me=r.getBBox(1);ke.position=Me.x+$+Me.y,r._.fillpos=[Me.x,Me.y],s._preload(Le[1],function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]})}else ke.color=s.getRGB(i.fill).hex,ke.src=j,ke.type="solid",s.getRGB(i.fill).error&&(N.type in{circle:1,ellipse:1}||v(i.fill).charAt()!="r")&&ee(N,i.fill,ke)&&(g.fill="none",g.gradient=i.fill,ke.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var Ie=((+g["fill-opacity"]+1||2)-1)*((+g.opacity+1||2)-1)*((+s.getRGB(i.fill).o+1||2)-1);Ie=M(D(Ie,0),1),ke.opacity=Ie,ke.src&&(ke.color="none")}h.appendChild(ke);var Ne=h.getElementsByTagName("stroke")&&h.getElementsByTagName("stroke")[0],qe=!1;!Ne&&(qe=Ne=X("stroke")),(i.stroke&&i.stroke!="none"||i["stroke-width"]||i["stroke-opacity"]!=null||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])&&(Ne.on=!0),(i.stroke=="none"||i.stroke===null||Ne.on==null||i.stroke==0||i["stroke-width"]==0)&&(Ne.on=!1);var ze=s.getRGB(i.stroke);Ne.on&&i.stroke&&(Ne.color=ze.hex),Ie=((+g["stroke-opacity"]+1||2)-1)*((+g.opacity+1||2)-1)*((+ze.o+1||2)-1);var Ye=.75*(b(i["stroke-width"])||1);if(Ie=M(D(Ie,0),1),i["stroke-width"]==null&&(Ye=g["stroke-width"]),i["stroke-width"]&&(Ne.weight=Ye),Ye&&Ye<1&&(Ie*=Ye)&&(Ne.weight=1),Ne.opacity=Ie,i["stroke-linejoin"]&&(Ne.joinstyle=i["stroke-linejoin"]||"miter"),Ne.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(Ne.endcap=i["stroke-linecap"]=="butt"?"flat":i["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in i){var wt={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Ne.dashstyle=wt[u](i["stroke-dasharray"])?wt[i["stroke-dasharray"]]:j}qe&&h.appendChild(Ne)}if(N.type=="text"){N.paper.canvas.style.display=j;var Je=N.paper.span,at=g.font&&g.font.match(/\d+(?:\.\d*)?(?=px)/);x=Je.style,g.font&&(x.font=g.font),g["font-family"]&&(x.fontFamily=g["font-family"]),g["font-weight"]&&(x.fontWeight=g["font-weight"]),g["font-style"]&&(x.fontStyle=g["font-style"]),at=b(g["font-size"]||at&&at[0])||10,x.fontSize=100*at+"px",N.textpath.string&&(Je.innerHTML=v(N.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var ot=Je.getBoundingClientRect();N.W=g.w=(ot.right-ot.left)/100,N.H=g.h=(ot.bottom-ot.top)/100,N.X=g.x,N.Y=g.y+N.H/2,("x"in i||"y"in i)&&(N.path.v=s.format("m{0},{1}l{2},{1}",q(g.x*ne),q(g.y*ne),q(g.x*ne)+1));for(var Ct=["x","y","text","font","font-family","font-weight","font-style","font-size"],lt=0,Nt=Ct.length;lt<Nt;lt++)if(Ct[lt]in i){N._.dirty=1;break}switch(g["text-anchor"]){case"start":N.textpath.style["v-text-align"]="left",N.bbx=N.W/2;break;case"end":N.textpath.style["v-text-align"]="right",N.bbx=-N.W/2;break;default:N.textpath.style["v-text-align"]="center",N.bbx=0}N.textpath.style["v-text-kern"]=!0}},ee=function(r,i,h){r.attrs=r.attrs||{},r.attrs;var g=Math.pow,x="linear",A=".5 .5";if(r.attrs.gradient=i,i=(i=v(i).replace(s._radial_gradient,function(ge,ye,ve){return x="radial",ye&&ve&&(ye=b(ye),ve=b(ve),g(ye-.5,2)+g(ve-.5,2)>.25&&(ve=B.sqrt(.25-g(ye-.5,2))*(2*(ve>.5)-1)+.5),A=ye+$+ve),j})).split(/\s*\-\s*/),x=="linear"){var I=i.shift();if(I=-b(I),isNaN(I))return null}var N=s._parseDots(i);if(!N)return null;if(r=r.shape||r.node,N.length){r.removeChild(h),h.on=!0,h.method="none",h.color=N[0].color,h.color2=N[N.length-1].color;for(var V=[],G=0,re=N.length;G<re;G++)N[G].offset&&V.push(N[G].offset+$+N[G].color);h.colors=V.length?V.join():"0% "+h.color,x=="radial"?(h.type="gradientTitle",h.focus="100%",h.focussize="0 0",h.focusposition=A,h.angle=0):(h.type="gradient",h.angle=(270-I)%360),r.appendChild(h)}return 1},a=function(r,i){this[0]=this.node=r,r.raphael=!0,this.id=s._oid++,r.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=i,this.matrix=s.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},l=s.el;a.prototype=l,l.constructor=a,l.transform=function(r){if(r==null)return this._.transform;var i,h=this.paper._viewBoxShift,g=h?"s"+[h.scale,h.scale]+"-1-1t"+[h.dx,h.dy]:j;h&&(i=r=v(r).replace(/\.{3}|\u2026/g,this._.transform||j)),s._extractTransform(this,g+r);var x,A=this.matrix.clone(),I=this.skew,N=this.node,V=~v(this.attrs.fill).indexOf("-"),G=!v(this.attrs.fill).indexOf("url(");if(A.translate(1,1),G||V||this.type=="image")if(I.matrix="1 0 0 1",I.offset="0 0",x=A.split(),V&&x.noRotation||!x.isSimple){N.style.filter=A.toFilter();var re=this.getBBox(),ge=this.getBBox(1),ye=re.x-ge.x,ve=re.y-ge.y;N.coordorigin=ye*-ne+$+ve*-ne,be(this,1,1,ye,ve,0)}else N.style.filter=j,be(this,x.scalex,x.scaley,x.dx,x.dy,x.rotate);else N.style.filter=j,I.matrix=v(A),I.offset=A.offset();return i!==null&&(this._.transform=i,s._extractTransform(this,i)),this},l.rotate=function(r,i,h){if(this.removed)return this;if(r!=null){if((r=v(r).split(W)).length-1&&(i=b(r[1]),h=b(r[2])),r=b(r[0]),h==null&&(i=h),i==null||h==null){var g=this.getBBox(1);i=g.x+g.width/2,h=g.y+g.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",r,i,h]])),this}},l.translate=function(r,i){return this.removed?this:((r=v(r).split(W)).length-1&&(i=b(r[1])),r=b(r[0])||0,i=+i||0,this._.bbox&&(this._.bbox.x+=r,this._.bbox.y+=i),this.transform(this._.transform.concat([["t",r,i]])),this)},l.scale=function(r,i,h,g){if(this.removed)return this;if((r=v(r).split(W)).length-1&&(i=b(r[1]),h=b(r[2]),g=b(r[3]),isNaN(h)&&(h=null),isNaN(g)&&(g=null)),r=b(r[0]),i==null&&(i=r),g==null&&(h=g),h==null||g==null)var x=this.getBBox(1);return h=h==null?x.x+x.width/2:h,g=g==null?x.y+x.height/2:g,this.transform(this._.transform.concat([["s",r,i,h,g]])),this._.dirtyT=1,this},l.hide=function(){return!this.removed&&(this.node.style.display="none"),this},l.show=function(){return!this.removed&&(this.node.style.display=j),this},l.auxGetBBox=s.el.getBBox,l.getBBox=function(){var r=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var i={},h=1/this.paper._viewBoxShift.scale;return i.x=r.x-this.paper._viewBoxShift.dx,i.x*=h,i.y=r.y-this.paper._viewBoxShift.dy,i.y*=h,i.width=r.width*h,i.height=r.height*h,i.x2=i.x+i.width,i.y2=i.y+i.height,i}return r},l._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},l.remove=function(){if(!this.removed&&this.node.parentNode){for(var r in this.paper.__set__&&this.paper.__set__.exclude(this),s.eve.unbind("raphael.*.*."+this.id),s._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[r]=typeof this[r]=="function"?s._removedFactory(r):null;this.removed=!0}},l.attr=function(r,i){if(this.removed)return this;if(r==null){var h={};for(var g in this.attrs)this.attrs[u](g)&&(h[g]=this.attrs[g]);return h.gradient&&h.fill=="none"&&(h.fill=h.gradient)&&delete h.gradient,h.transform=this._.transform,h}if(i==null&&s.is(r,"string")){if(r=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var x=r.split(W),A={},I=0,N=x.length;I<N;I++)(r=x[I])in this.attrs?A[r]=this.attrs[r]:s.is(this.paper.customAttributes[r],"function")?A[r]=this.paper.customAttributes[r].def:A[r]=s._availableAttrs[r];return N-1?A:A[x[0]]}if(this.attrs&&i==null&&s.is(r,"array")){for(A={},I=0,N=r.length;I<N;I++)A[r[I]]=this.attr(r[I]);return A}var V;for(var G in i!=null&&((V={})[r]=i),i==null&&s.is(r,"object")&&(V=r),V)Y("raphael.attr."+G+"."+this.id,this,V[G]);if(V){for(G in this.paper.customAttributes)if(this.paper.customAttributes[u](G)&&V[u](G)&&s.is(this.paper.customAttributes[G],"function")){var re=this.paper.customAttributes[G].apply(this,[].concat(V[G]));for(var ge in this.attrs[G]=V[G],re)re[u](ge)&&(V[ge]=re[ge])}V.text&&this.type=="text"&&(this.textpath.string=V.text),Ce(this,V)}return this},l.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&s._tofront(this,this.paper),this},l.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),s._toback(this,this.paper)),this)},l.insertAfter=function(r){return this.removed?this:(r.constructor==s.st.constructor&&(r=r[r.length-1]),r.node.nextSibling?r.node.parentNode.insertBefore(this.node,r.node.nextSibling):r.node.parentNode.appendChild(this.node),s._insertafter(this,r,this.paper),this)},l.insertBefore=function(r){return this.removed?this:(r.constructor==s.st.constructor&&(r=r[0]),r.node.parentNode.insertBefore(this.node,r.node),s._insertbefore(this,r,this.paper),this)},l.blur=function(r){var i=this.node.runtimeStyle,h=i.filter;return h=h.replace(pe,j),+r!=0?(this.attrs.blur=r,i.filter=h+$+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+r||1.5)+")",i.margin=s.format("-{0}px 0 0 -{0}px",q(+r||1.5))):(i.filter=h,i.margin=0,delete this.attrs.blur),this},s._engine.path=function(r,i){var h=X("shape");h.style.cssText=oe,h.coordsize=ne+$+ne,h.coordorigin=i.coordorigin;var g=new a(h,i),x={fill:"none",stroke:"#000"};r&&(x.path=r),g.type="path",g.path=[],g.Path=j,Ce(g,x),i.canvas&&i.canvas.appendChild(h);var A=X("skew");return A.on=!0,h.appendChild(A),g.skew=A,g.transform(j),g},s._engine.rect=function(r,i,h,g,x,A){var I=s._rectPath(i,h,g,x,A),N=r.path(I),V=N.attrs;return N.X=V.x=i,N.Y=V.y=h,N.W=V.width=g,N.H=V.height=x,V.r=A,V.path=I,N.type="rect",N},s._engine.ellipse=function(r,i,h,g,x){var A=r.path();return A.attrs,A.X=i-g,A.Y=h-x,A.W=2*g,A.H=2*x,A.type="ellipse",Ce(A,{cx:i,cy:h,rx:g,ry:x}),A},s._engine.circle=function(r,i,h,g){var x=r.path();return x.attrs,x.X=i-g,x.Y=h-g,x.W=x.H=2*g,x.type="circle",Ce(x,{cx:i,cy:h,r:g}),x},s._engine.image=function(r,i,h,g,x,A){var I=s._rectPath(h,g,x,A),N=r.path(I).attr({stroke:"none"}),V=N.attrs,G=N.node,re=G.getElementsByTagName("fill")[0];return V.src=i,N.X=V.x=h,N.Y=V.y=g,N.W=V.width=x,N.H=V.height=A,V.path=I,N.type="image",re.parentNode==G&&G.removeChild(re),re.rotate=!0,re.src=i,re.type="tile",N._.fillpos=[h,g],N._.fillsize=[x,A],G.appendChild(re),be(N,1,1,0,0,0),N},s._engine.text=function(r,i,h,g){var x=X("shape"),A=X("path"),I=X("textpath");i=i||0,h=h||0,g=g||"",A.v=s.format("m{0},{1}l{2},{1}",q(i*ne),q(h*ne),q(i*ne)+1),A.textpathok=!0,I.string=v(g),I.on=!0,x.style.cssText=oe,x.coordsize=ne+$+ne,x.coordorigin="0 0";var N=new a(x,r),V={fill:"#000",stroke:"none",font:s._availableAttrs.font,text:g};N.shape=x,N.path=A,N.textpath=I,N.type="text",N.attrs.text=v(g),N.attrs.x=i,N.attrs.y=h,N.attrs.w=1,N.attrs.h=1,Ce(N,V),x.appendChild(I),x.appendChild(A),r.canvas.appendChild(x);var G=X("skew");return G.on=!0,x.appendChild(G),N.skew=G,N.transform(j),N},s._engine.setSize=function(r,i){var h=this.canvas.style;return this.width=r,this.height=i,r==+r&&(r+="px"),i==+i&&(i+="px"),h.width=r,h.height=i,h.clip="rect(0 "+r+" "+i+" 0)",this._viewBox&&s._engine.setViewBox.apply(this,this._viewBox),this},s._engine.setViewBox=function(r,i,h,g,x){s.eve("raphael.setViewBox",this,this._viewBox,[r,i,h,g,x]);var A,I,N=this.getSize(),V=N.width,G=N.height;return x&&(h*(A=G/g)<V&&(r-=(V-h*A)/2/A),g*(I=V/h)<G&&(i-=(G-g*I)/2/I)),this._viewBox=[r,i,h,g,!!x],this._viewBoxShift={dx:-r,dy:-i,scale:N},this.forEach(function(re){re.transform("...")}),this},s._engine.initWin=function(r){var i=r.document;i.styleSheets.length<31?i.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):i.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!i.namespaces.rvml&&i.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),X=function(h){return i.createElement("<rvml:"+h+' class="rvml">')}}catch(h){X=function(g){return i.createElement("<"+g+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},s._engine.initWin(s._g.win),s._engine.create=function(){var r=s._getContainer.apply(0,arguments),i=r.container,h=r.height,g=r.width,x=r.x,A=r.y;if(!i)throw new Error("VML container not found.");var I=new s._Paper,N=I.canvas=s._g.doc.createElement("div"),V=N.style;return x=x||0,A=A||0,g=g||512,h=h||342,I.width=g,I.height=h,g==+g&&(g+="px"),h==+h&&(h+="px"),I.coordsize=216e5+$+216e5,I.coordorigin="0 0",I.span=s._g.doc.createElement("span"),I.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",N.appendChild(I.span),V.cssText=s.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",g,h),i==1?(s._g.doc.body.appendChild(N),V.left=x+"px",V.top=A+"px",V.position="absolute"):i.firstChild?i.insertBefore(N,i.firstChild):i.appendChild(N),I.renderfix=function(){},I},s.prototype.clear=function(){s.eve("raphael.clear",this),this.canvas.innerHTML=j,this.span=s._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},s.prototype.remove=function(){for(var r in s.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[r]=typeof this[r]=="function"?s._removedFactory(r):null;return!0};var p=s.st;for(var n in l)l[u](n)&&!p[u](n)&&(p[n]=function(r){return function(){var i=arguments;return this.forEach(function(h){h[r].apply(h,i)})}}(n))}}.apply(O,C))===void 0||(T.exports=d)}])})}),J1=G1(Y1),Rt=J1;var z={};z.Common={nodeIdIncrement:0,activeNode:0,roundFloat:function(f,S){for(var T=0,O=1;T<S;)O*=10,T++;return Math.round(f*O)/O},apply:function(f,S){if(f&&typeof S=="object")for(var T in S)f[T]=S[T];return f},addRaphEventHandler:function(f,S,T,O){try{f[S](function(w,C){return function(d,s){var u=C;u.e=d,w(u)}}(T,O))}catch(w){}},isInteger:function(f){return!isNaN(parseInt(f))},isXMLSerializerAvailable:function(){return typeof XMLSerializer=="function"},createSvgEl:function(f,S){if(f=document.createElementNS("http://www.w3.org/2000/svg",f),S)for(var T in S)S.hasOwnProperty(T)&&f.setAttribute(T,String(S[T]));return f},createGradientEl:function(f,S,T){if(S.type!="radialGradient")return!1;var O=z.Common.createSvgEl("radialGradient",{id:f,gradientUnits:"userSpaceOnUse",cx:T[0],cy:T[1],r:T[2],fx:T[0],fy:T[1]});if(S.stop)for(var w=S.stop,C=0;C<w.length;C++){var d=w[C];d["@attributes"]?O.appendChild(z.Common.createSvgEl("stop",d["@attributes"])):(d._attributes&&delete d._attributes,d._children&&delete d._children,d.__proto__&&delete d.__proto__,O.appendChild(z.Common.createSvgEl("stop",d)))}return O},setCssStyle:function(f,S){var T=document.styleSheets[0];T.addRule?T.addRule(f,S):T.insertRule&&T.insertRule(f+" { "+S+" }",T.cssRules.length)}};z.PhyloCanvas=function(){var f,S,T,O,w;return function(C,d,s,u,v){if(this.getNewickObject=function(){return T},this.clear=function(){},this.scale=function(B){O.svg.scale(B)},this.getSvg=function(){return O},this.getPhylogram=function(){return f},this.getSvgSource=function(){if(Rt.svg&&z.Common.isXMLSerializerAvailable()){var B=new XMLSerializer;return B.serializeToString(O.svg.canvas)}else return!1},typeof C=="object")if(C.xml){if(C.fileSource)var b=C.xml;else var b=xt.textToXML(C.xml);b=xt.xmlToJSON(b),w=new z.PhyloCanvas.PhyloxmlParse(b)}else if(C.phyloxml){if(C.fileSource)var b=C.phyloxml;else var b=xt.textToXML(C.phyloxml);b=xt.xmlToJSON(b),w=new z.PhyloCanvas.PhyloxmlParse(b)}else if(C.nexml){if(C.fileSource)var b=C.nexml;else var b=xt.textToXML(C.nexml);b=xt.xmlToJSON(b),w=new z.PhyloCanvas.NexmlParse(b,C)}else C.json?w=new z.PhyloCanvas.PhyloxmlParse(C.json):C.newick?w=new z.PhyloCanvas.NewickParse(C.newick):C.nexmlJson?w=new z.PhyloCanvas.NexmlJsonParse(C):alert("Please set the format of input data");else w=new z.PhyloCanvas.NewickParse(C);S=d,O=new z.PhyloCanvas.Render.SVG(S,s,u),v=="circular"?f=new z.PhyloCanvas.Render.CircularPhylogram(O,w):f=new z.PhyloCanvas.Render.Phylogram(O,w)}}();z.PhyloCanvas.prototype={};z.PhyloCanvas.Node=function(){return function(f,S){this.id=z.Common.nodeIdIncrement+=1,this.level=0,this.len=0,this.newickLen=0,this.name="",this.type="",this.chart={},this.img=[],f&&z.Common.apply(this,f),this._countAllChildren=!1,this._countImmediateChildren=!1,this._midBranchPosition=!1,this.children=new Array,S&&S.children.push(this)}}();z.PhyloCanvas.Node.prototype={getCountAllChildren:function(){if(this._countAllChildren!==!1)return this._countAllChildren;var f=0;for(var S in this.children)if(z.Common.isInteger(S)){var T=this.children[S];T.children&&T.children.length>0?f+=T.getCountAllChildren():f++}return this._countAllChildren=f,f},getCountImmediateChildren:function(){if(this._countImmediateChildren!==!1)return this._countImmediateChildren;var f=0;for(var S in this.children){var T=this.children[S];f+=T.length}return this._countImmediateChildren=f,f},getMidbranchPosition:function(f){if(this._midBranchPosition!==!1)return this._midBranchPosition;for(var S=[0,0],T=0;T<this.children.length;T++){var O=this.children[T];O.children&&O.children.length>0?T==0&&f?(S[0]=O.getMidbranchPosition(!0),S[1]+=O.getCountAllChildren()-1):T==0?(S[0]=O.getMidbranchPosition(),S[1]+=O.getCountAllChildren()):T==this.children.length-1?S[1]+=O.getMidbranchPosition():S[1]+=O.getCountAllChildren():T==0&&f?S[0]=0:T==0?(S[0]=1,S[1]+=1):(T==this.children.length-1,S[1]+=1)}return this._midBranchPosition=S[1]>=S[0]?(S[1]+S[0])/2:S[0],this._midBranchPosition}};z.PhyloCanvas.NewickParse=function(){var f,S,T,O=0,w=0,C,d,s=function(D){for(var M=new z.PhyloCanvas.Node;S!==")"&&S!==",";)S===":"?(B(),M.len=z.Common.roundFloat(v(),4),M.len==0&&(M.len=1e-4)):S==="'"||S==='"'?(M.type="label",M.name=b(S)):(M.type="label",M.name=v());return M.level=D.level+1,M},u=function(D){var M=new z.PhyloCanvas.Node;for(D&&(M.level=D.level+1);S!==")";)B(),S==="("?M.children.push(u(M)):M.children.push(s(M));return B(),S!==":"&&S!==")"&&S!==","&&S!==";"&&(M.type="label",M.name=v()),S===":"&&(B(),M.len=z.Common.roundFloat(v(),4),M.len==0&&(M.len=1e-4),M.type="stem"),M},v=function(){for(var D="";S!==":"&&S!==")"&&S!==","&&S!==";";)D+=S,B();return D},b=function(D){for(var M="";S!==D;)M+=S,B();return M},B=function(){return S=f.charAt(T),T+=1,S},q=function(D,M){if(D.children&&D.children.length)for(var L=0;L<D.children.length;L++){var W=D.children[L];W.len===0&&(W.len=1),W.newickLen=z.Common.roundFloat(W.len+D.newickLen,4),W.level>O&&(O=W.level),W.newickLen>w&&(w=W.newickLen),W.children.length>0&&q(W,D)}return D};return function(D){this.getRoot=function(){return C},this.getLevels=function(){return O},this.getNewickLen=function(){return w},this.getValidate=function(){return d},O=0,w=0,f=D,T=0,B(),C=u(),C=q(C)}}();z.PhyloCanvas.NewickParse.prototype={};z.PhyloCanvas.PhyloxmlParse=function(){var f=0,S=0,T,O,w=function(s,u){var v=new z.PhyloCanvas.Node;if(u&&(v.level=u.level+1),s.clade&&s.clade.length)for(var b=0;b<s.clade.length;b++){var B=s.clade[b];v.children.push(w(B,v))}if(s.branch_length&&(typeof s.branch_length=="object"&&(s.branch_length=s.branch_length[0].Text),v.len=z.Common.roundFloat(s.branch_length,4),v.len==0&&(v.len=1e-4)),s.color?(v.red=s.color[0].red[0].Text,v.green=s.color[0].green[0].Text,v.blue=s.color[0].blue[0].Text):(v.red=0,v.green=0,v.blue=0),s.property&&s.property[0].applies_to=="node"&&s.property[0].ref=="style:font_color"&&(v.font_color_hex=s.property[0].Text),s.name?(v.type="label",v.name=s.name[0].Text,s.name[0]&&s.name[0].style&&(v.style=s.name[0].style),s.name[0]&&s.name[0].bgStyle&&(v.bgStyle=s.name[0].bgStyle)):s.confidence&&(v.name=s.confidence[0].Text),s.sequence&&s.sequence[0]&&s.sequence[0].name&&s.sequence[0].name[0]&&s.sequence[0].name[0].Text&&(v.sequenceName=s.sequence[0].name[0].Text),s.taxonomy&&s.taxonomy[0]&&(s.taxonomy[0].scientific_name&&s.taxonomy[0].scientific_name[0]&&s.taxonomy[0].scientific_name[0].Text&&(v.taxonomyScientificName=s.taxonomy[0].scientific_name[0].Text),s.taxonomy[0].common_name&&s.taxonomy[0].common_name[0]&&s.taxonomy[0].common_name[0].Text&&(v.taxonomyCommonName=s.taxonomy[0].common_name[0].Text)),s.sequence&&s.sequence[0]&&s.sequence[0].accession&&s.sequence[0].accession[0]&&s.sequence[0].accession[0].Text&&(v.sequenceAccession=s.sequence[0].accession[0].Text),s.point&&(v.LatLong=[s.point[0].lat[0].Text,s.point[0].long[0].Text]),v.name||(v.sequenceName?v.name=v.sequenceName:v.taxonomyScientificName?v.name=v.taxonomyScientificName:v.taxonomyCommonName?v.name=v.taxonomyCommonName:v.sequenceAccession&&(v.name=v.sequenceAccession),v.name&&(v.type="label")),s.annotation&&(s.annotation[0]&&s.annotation[0].desc&&s.annotation[0].desc[0]&&s.annotation[0].desc[0].Text&&(v.description=s.annotation[0].desc[0].Text),s.annotation[0]&&s.annotation[0].uri&&s.annotation[0].uri[0]&&s.annotation[0].uri[0].Text&&(v.uri=s.annotation[0].uri[0].Text),s.annotation[0]&&s.annotation[0].img))for(var b in s.annotation[0].img)z.Common.isInteger(b)&&(v.img[b]=s.annotation[0].img[b].Text);if(s.chart&&s.chart[0])for(var b in s.chart[0])b!="Text"&&b!="_children"&&(v.chart[b]=s.chart[0][b][0].Text);return v&&v.level>1&&(v.len||(O="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),v},C=function(s,u){if(s.children&&s.children.length)for(var v=0;v<s.children.length;v++){var b=s.children[v];b.newickLen=Math.round((b.len+s.newickLen)*1e4)/1e4,b.level>f&&(f=b.level),b.newickLen>S&&(S=b.newickLen),b.children.length>0&&C(b,s)}return s},d=function(s,u){for(var v in s)v!="_children"&&v!="Text"&&(v=="rectangular"||v=="circular"?d(s[v][0],v):(z.PhyloCanvas.Render.Parameters[v]||(z.PhyloCanvas.Render.Parameters[v]={}),z.PhyloCanvas.Render.Parameters.set(v,s[v][0].Text,u)))};return function(s){if(this.getRoot=function(){return T},this.getLevels=function(){return f},this.getNewickLen=function(){return S},this.getValidate=function(){return O},s.phylogeny&&s.phylogeny[0]&&s.phylogeny[0].clade&&(T=w(s.phylogeny[0].clade[0])),s.phylogeny&&s.phylogeny[0]&&s.phylogeny[0].render&&s.phylogeny[0].render[0]){var u=s.phylogeny[0].render[0];if(u&&u.styles){var v=u.styles[0];for(var b in v)if(b!="_children"&&b!="Text")if(v[b][0].type&&v[b][0].type=="radialGradient"&&Rt.svg)v[b][0].name=b,z.PhyloCanvas.Render.Style[b]=v[b][0],z.PhyloCanvas.Render.Style.jsphylosvgGradientList||(z.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),z.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(b);else{z.PhyloCanvas.Render.Style[b]||(z.PhyloCanvas.Render.Style[b]={});for(var B in v[b][0])B!="_attributes"&&B!="_children"&&B!="type"&&(z.PhyloCanvas.Render.Style[b][B.replace("_","-")]=v[b][0][B])}}if(u&&u.parameters&&d(u.parameters[0]),u&&u.charts){var q=u.charts[0];for(var b in q)if(b!="_children"&&b!="Text")for(var B in q[b])q[b][B].type=="binary"?(q[b][B].chart=b,z.PhyloCanvas.Render.Parameters.binaryCharts.push(q[b][B])):q[b][B].type=="integratedBinary"?(q[b][B].chart=b,z.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(q[b][B])):q[b][B].type=="bar"&&(q[b][B].chart=b,z.PhyloCanvas.Render.Parameters.barCharts.length==1&&z.PhyloCanvas.Render.Parameters.barCharts.shift(),z.PhyloCanvas.Render.Parameters.barCharts.push(q[b][B]))}}T=C(T)}}();z.PhyloCanvas.PhyloxmlParse.prototype={};z.PhyloCanvas.NexmlParse=function(){var f=0,S=0,T,O,w,C,d=function(v,b,B){var q=new z.PhyloCanvas.Node;B&&(q.level=B.level+1);for(var D=0;D<w.length;D++)if(w[D].source==v.id)for(var M=0;M<C.length;M++)w[D].target==C[M].id&&q.children.push(d(C[M],w[D].length,q));if(q&&q.level>0&&!q.len&&(q.len=1),b&&(q.len=z.Common.roundFloat(b,4),q.len==0&&(q.len=1e-4)),v.label&&(q.type="label",q.name=v.label,v.style&&(q.style=v.style)),v.color){let L=v.color.replace(/[a-z%\s\(\)]/g,"").split(",");q.red=L[0],q.green=L[1],q.blue=L[2]}else{let L=z.PhyloCanvas.Render.Style.line.stroke.replace(/[a-z%\s\(\)]/g,"").split(",");q.red=L[0],q.green=L[1],q.blue=L[2]}return q},s=function(v,b){if(v.children&&v.children.length)for(var B=0;B<v.children.length;B++){var q=v.children[B];q.newickLen=Math.round((q.len+v.newickLen)*1e4)/1e4,q.level>f&&(f=q.level),q.newickLen>S&&(S=q.newickLen),q.children.length>0&&s(q,v)}return v},u=function(v,b){for(var B in v)B!="_children"&&B!="Text"&&(B=="rectangular"||B=="circular"?u(v[B][0],B):(z.PhyloCanvas.Render.Parameters[B]||(z.PhyloCanvas.Render.Parameters[B]={}),z.PhyloCanvas.Render.Parameters.set(B,v[B][0].Text,b)))};return function(v,b){this.getRoot=function(){return T},this.getLevels=function(){return f},this.getNewickLen=function(){return S},this.getValidate=function(){return O},b.tree&&v.trees[0]&&v.trees[0].tree[b.tree-1]?(w=v.trees[0].tree[b.tree-1].edge,C=v.trees[0].tree[b.tree-1].node):(w=v.trees[0].tree[0].edge,C=v.trees[0].tree[0].node);for(var B=0;B<C.length;B++){var q=0;if(C[B].root&&C[B].root=="true"){T=C[B];break}for(var D=0;D<w.length;D++)w[D].target==C[B].id&&q++;if(q==0){T=C[B];break}}T?(T=d(T),T=s(T)):O="Error. Currently, only rooted NeXML trees are supported."}}();z.PhyloCanvas.NexmlParse.prototype={};z.PhyloCanvas.NexmlJsonParse=function(){var f=0,S=0,T,O,w=[],C=[],d=function(v,b,B){var q=new z.PhyloCanvas.Node;B&&(q.level=B.level+1);for(var D=0;D<w.length;D++)if(w[D].source==v.id)for(var M=0;M<C.length;M++)w[D].target==C[M].id&&q.children.push(d(C[M],w[D].length,q));return b&&(q.len=z.Common.roundFloat(b,4),q.len==0&&(q.len=1e-4)),v.label&&(q.type="label",q.name=v.label,v.accession&&(q.accession=v.accession),v.style&&(q.style=v.style),v.bgStyle&&(q.bgStyle=v.bgStyle)),v.chart&&(q.chart=v.chart),q&&q.level>1&&(q.len||(O="Error. Please include Branch Lengths - we only draw rooted phylogenetic trees.")),q},s=function(v,b){if(v.children&&v.children.length)for(var B=0;B<v.children.length;B++){var q=v.children[B];q.newickLen=Math.round((q.len+v.newickLen)*1e4)/1e4,q.level>f&&(f=q.level),q.newickLen>S&&(S=q.newickLen),q.children.length>0&&s(q,v)}return v},u=function(v,b){for(var B in v)B!="_children"&&B!="Text"&&(B=="rectangular"||B=="circular"?u(v[B],B):(z.PhyloCanvas.Render.Parameters[B]||(z.PhyloCanvas.Render.Parameters[B]={}),z.PhyloCanvas.Render.Parameters.set(B,v[B],b)))};return function(v){this.getRoot=function(){return T},this.getLevels=function(){return f},this.getNewickLen=function(){return S},this.getValidate=function(){return O};var b=v.nexmlJson.nexml,B=b.render;if(B&&B.styles){var q=B.styles;for(var D in q)if(D!="_children"&&D!="Text")if(q[D]["@attributes"].type&&q[D]["@attributes"].type=="radialGradient"&&Rt.svg)q[D].name=D,q[D].type=q[D]["@attributes"].type,z.PhyloCanvas.Render.Style[D]=q[D],z.PhyloCanvas.Render.Style.jsphylosvgGradientList||(z.PhyloCanvas.Render.Style.jsphylosvgGradientList=[]),z.PhyloCanvas.Render.Style.jsphylosvgGradientList.push(D);else{z.PhyloCanvas.Render.Style[D]||(z.PhyloCanvas.Render.Style[D]={});for(var M in q[D]["@attributes"])M!="_attributes"&&M!="_children"&&M!="type"&&(z.PhyloCanvas.Render.Style[D][M.replace("_","-")]=q[D]["@attributes"][M])}}if(B&&B.parameters&&u(B.parameters),B&&B.charts){var L=B.charts;for(var D in L)L[D]["@attributes"].chart=D,L[D]["@attributes"].type=="binary"?z.PhyloCanvas.Render.Parameters.binaryCharts.push(L[D]["@attributes"]):L[D]["@attributes"].type=="integratedBinary"?z.PhyloCanvas.Render.Parameters.integratedBinaryCharts.push(L[D]["@attributes"]):L[D]["@attributes"].type=="bar"&&z.PhyloCanvas.Render.Parameters.barCharts.push(L[D]["@attributes"])}if(v.tree&&b.trees[0]&&b.trees[0].tree[v.tree-1])w=b.trees[0].tree[v.tree-1].edge,C=b.trees[0].tree[v.tree-1].node;else{for(var D=0;D<b.trees.tree.edge.length;D++)w.push(b.trees.tree.edge[D]["@attributes"]);for(var D=0;D<b.trees.tree.node.length;D++){var W=b.trees.tree.node[D]["@attributes"];W.label&&(W.chart=b.trees.tree.node[D].chart),C.push(W)}}for(var D=0;D<C.length;D++)C[D].root&&C[D].root=="true"&&(T=C[D]);T?(T=d(T),T=s(T)):O="Error. Currently, only rooted NeXML trees are supported."}}();z.PhyloCanvas.NexmlParse.prototype={};z.PhyloCanvas.Render={};z.PhyloCanvas.Render.Style={line:{stroke:"rgb(0,0,0)","stroke-width":1},text:{"font-family":"Verdana","font-size":12,"text-anchor":"start"},path:{stroke:"rgb(0,0,0)","stroke-width":1},connectedDash:{stroke:"rgb(200,200,200)","stroke-dasharray":". "},textSecantBg:{fill:"#EEE",stroke:"#DDD"},highlightedEdgeCircle:{fill:"black",stroke:"black"},barChart:{fill:"#003300",stroke:"#DDD"},getStyle:function(f,S){return this[f]?this[f]:this[S]}};z.PhyloCanvas.Render.Parameters={jsOverride:0,Rectangular:{bufferX:200,paddingX:10,paddingY:20,bufferInnerLabels:10,bufferOuterLabels:5,minHeightBetweenLeaves:10,alignPadding:0,alignRight:!1,showScaleBar:!1},Circular:{bufferRadius:.33,bufferAngle:20,initStartAngle:160,innerCircleRadius:0,minHeightBetweenLeaves:5,bufferInnerLabels:2,bufferOuterLabels:5},binaryCharts:[],integratedBinaryCharts:[],barCharts:[],binaryChartBufferInner:5,binaryChartBufferSiblings:.01,binaryChartThickness:15,binaryChartDisjointed:!1,barChartBufferInner:3,barChartHeight:50,barChartWidth:.5,set:function(f,S,T){this.jsOverride||(T?T=="circular"?this.Circular[f]=parseFloat(S):T=="rectangular"&&(this.Rectangular[f]=parseFloat(S)):this[f]=parseFloat(S))}};z.PhyloCanvas.Render.Line=function(){return function(f,S,T,O,w,C,d,s){this.type="line",this.attr=z.PhyloCanvas.Render.Style.line,this.attr.stroke=["rgb(",w,",",C,",",d,")"].join(""),this.x1=f,this.x2=S,this.y1=T,this.y2=O,s&&(z.Common.apply(this,s),s.attr&&(this.attr=s.attr))}}();z.PhyloCanvas.Render.Text=function(){return function(f,S,T,O){this.type="text",this.attr=z.PhyloCanvas.Render.Style.text,this.x=f,this.y=S,this.text=T,O&&(z.Common.apply(this,O),O.attr&&(this.attr=O.attr))}}();z.PhyloCanvas.Render.Path=function(){var f=z.PhyloCanvas.Render.Style.path;return function(S,T){this.type="path",this.attr=z.PhyloCanvas.Render.Style.path,this.path=S,T&&(z.Common.apply(this,T),T.attr&&(this.attr=T.attr))}}();z.PhyloCanvas.Render.Circle=function(){return function(f,S,T,O){this.type="circle",this.x=f,this.y=S,this.radius=T,O&&(z.Common.apply(this,O),O.attr&&(this.attr=O.attr))}}();z.PhyloCanvas.Render.SVG=function(){var f,S;return function(T,O,w){f=T,this.canvasSize=[O,w],this.svg=Rt(T,this.canvasSize[0],this.canvasSize[1])}}();z.PhyloCanvas.Render.SVG.prototype={render:function(){for(var f=this.phylogramObject.getDrawInstructs(),S=0;S<f.length;S++)if(f[S].type=="line")var T=this.svg.path(["M",f[S].x1,f[S].y1,"L",f[S].x2,f[S].y2]).attr(z.PhyloCanvas.Render.Style.line);else if(f[S].type=="path")var O=this.svg.path(f[S].path).attr(f[S].attr);else if(f[S].type=="circle")var O=this.svg.circle(f[S].x,f[S].y,f[S].radius).attr({stroke:"black",fill:"black"});else{var w=this.svg.text(f[S].x,f[S].y,f[S].text).attr(z.PhyloCanvas.Render.Style.text);f[S].attr&&w.attr(f[S].attr),f[S].rotate&&w.rotate(f[S].rotate);var C=w.getBBox(),d=Math.sqrt(C.height*C.height+C.width*C.width)}},draw:function(f){var S,T;if(f.type=="line")S=this.svg.path(["M",f.x1,f.y1,"L",f.x2,f.y2]).attr(z.PhyloCanvas.Render.Style.line);else if(f.type=="path")S=this.svg.path(f.path).attr(f.attr);else if(f.type=="circle")S=this.svg.circle(f.x,f.y,f.radius).attr({stroke:"black",fill:"black"});else if(f.type=="text"){S=this.svg.text(f.x,f.y,f.text).attr(z.PhyloCanvas.Render.Style.text),f.attr&&S.attr(f.attr),f.rotate&&S.rotate(f.rotate);var O=S.getBBox();T=Math.sqrt(O.height*O.height+O.width*O.width)}return[S,T]}};z.PhyloCanvas.Render.Phylogram=function(){var f,S=z.PhyloCanvas.Render.Parameters.Rectangular,T,O,w,C,d,s,u=!0,v=0,b=0,B,q,D,M,L,W,Y,$,j,se,ue,pe,U=[],oe=function(X){return X+Math.round(X/4)},ne=function(X,xe,Ce,ee){return["M",X,xe,"L",Ce,xe,"L",Ce,ee,"L",X,ee,"Z"]},F=function(X,xe){if(X.len&&u==!1&&X.children.length==0&&(v=z.Common.roundFloat(v+C,4)),X.children.length>0){var Ce=[],ee,a,l,p,n,r,i;if(X.len&&(ee=xe,a=xe=z.Common.roundFloat(xe+w*X.len,4),l=v+X.getMidbranchPosition(u)*C,p=l,n=X.red,r=X.green,i=X.blue,f.draw(new z.PhyloCanvas.Render.Line(ee,a,l,p,n,r,i))),X.name){var h={};if(h=z.PhyloCanvas.Render.Style.getStyle("bootstrap","text"),X.font_color_hex?h.fill=X.font_color_hex:h.fill="#000000",X.uri&&(h.href=X.uri),X.description&&(h.title=X.description),X.level==0)var g=v+X.getMidbranchPosition(u)*C;else var g=p;f.draw(new z.PhyloCanvas.Render.Text((a||xe)+5,g,X.name,{attr:h}))}if(X.children&&X.children.length)for(var x=0;x<X.children.length;x++){var A=X.children[x];Ce.push(F(A,xe))}for(var I=[],x=0;x<Ce.length;x++)Ce[x][0]&&I.push(Ce[x][0]),Ce[x][1]&&I.push(Ce[x][1]);for(var N=Math.min.apply(null,I),V=Math.max.apply(null,I),G=(N+V)/2,re="",ge="",ye="",ve=0,x=0;x<X.children.length;++x){var _e=X.children[x];if(x==0)re=_e.red,ge=_e.green,ye=_e.blue;else if(re==_e.red&&ge==_e.green&&ye==_e.blue)ve=1;else{ve=0;break}}ve==0?z.PhyloCanvas.Render.Style.line.stroke="black":(n=X.children[0].red,r=X.children[0].green,i=X.children[0].blue,z.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",r,",",i,")"].join("")),X.children.length==2?(n=X.children[0].red,r=X.children[0].green,i=X.children[0].blue,z.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",r,",",i,")"].join(""),f.draw(new z.PhyloCanvas.Render.Path(["M",xe+1e-4,N,"L",xe,N,"L",xe,G],{attr:z.PhyloCanvas.Render.Style.line})),n=X.children[1].red,r=X.children[1].green,i=X.children[1].blue,z.PhyloCanvas.Render.Style.line.stroke=["rgb(",n,",",r,",",i,")"].join(""),f.draw(new z.PhyloCanvas.Render.Path(["M",xe,G,"L",xe,V,"L",xe+1e-4,V],{attr:z.PhyloCanvas.Render.Style.line}))):f.draw(new z.PhyloCanvas.Render.Path(["M",xe+1e-4,N,"L",xe,N,"L",xe,V,"L",xe+1e-4,V],{attr:z.PhyloCanvas.Render.Style.line}))}else{if(ee=xe,a=z.Common.roundFloat(xe+w*X.len,2),l=v,p=v,n=X.red,r=X.green,i=X.blue,X.y=v,U.push(X),f.draw(new z.PhyloCanvas.Render.Line(ee,a,l,p,n,r,i)),S.alignRight&&f.draw(new z.PhyloCanvas.Render.Path(["M",a,l,"L",S.alignPadding+d,p],{attr:z.PhyloCanvas.Render.Style.connectedDash})),X.name){var h={};X.style&&(h=z.PhyloCanvas.Render.Style.getStyle(X.style,"text")),X.font_color_hex?h.fill=X.font_color_hex:h.fill="#000000",h["text-anchor"]="start",X.uri&&(h.href=X.uri),X.description&&(h.title=X.description);var Se=f.draw(new z.PhyloCanvas.Render.Text(S.alignRight?d+S.bufferInnerLabels+S.alignPadding:a+S.bufferInnerLabels,p,X.name,{attr:h}));b=Math.max(Se[1],b),z.PhyloCanvas.Render.Parameters.mouseRollOver&&z.Common.addRaphEventHandler(Se[0],"mouseover",z.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:f,node:X,x:a,y:p,textEl:Se[0]}),z.PhyloCanvas.Render.Parameters.mouseRollOut&&z.Common.addRaphEventHandler(Se[0],"mouseout",z.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:f,node:X,x:a,y:p,textEl:Se[0]}),z.PhyloCanvas.Render.Parameters.onClickAction&&z.Common.addRaphEventHandler(Se[0],"click",z.PhyloCanvas.Render.Parameters.onClickAction,{svg:f,node:X,x:a,y:p,textEl:Se[0]})}u&&(u=!1)}return[l,p]},me=function(){y=v+C,M=0,L=S.showScaleBar*w,f.draw(new z.PhyloCanvas.Render.Line(M,L,y,y)),f.draw(new z.PhyloCanvas.Render.Text((M+L)/2,y-8,S.showScaleBar))},de=function(X,xe,Ce){for(var ee=(Ce&&Ce.bufferInner?Ce.bufferInner:0)|z.PhyloCanvas.Render.Parameters.binaryChartBufferInner,a=(Ce&&Ce.bufferSiblings?Ce.bufferSiblings*C:0)|(z.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?C*z.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:z.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),l=(Ce&&Ce.thickness?Ce.thickness:0)|z.PhyloCanvas.Render.Parameters.binaryChartThickness,p,n=0;n<U.length;n++){var r=U[n];f.draw(new z.PhyloCanvas.Render.Path(ne(X+ee,r.y-C/2+a/2,X+ee+l,r.y+C/2-a/2),{attr:z.PhyloCanvas.Render.Style.getStyle(r.chart[xe],"textSecantBg")}))}return X+ee+l},be=function(X,xe,Ce){for(var ee=[],a,l=Ce&&Ce.bufferInner?Ce.bufferInner:0|z.PhyloCanvas.Render.Parameters.barChartBufferInner,p=Ce&&Ce.height?Ce.height:0|z.PhyloCanvas.Render.Parameters.barChartHeight,n=Ce&&Ce.width?Ce.width<1?C*Ce.width:Ce.width:0|(z.PhyloCanvas.Render.Parameters.barChartWidth<1?C*z.PhyloCanvas.Render.Parameters.barChartWidth:z.PhyloCanvas.Render.Parameters.barChartWidth),r=0,i=0;i<U.length;i++)ee.push(U[i].chart[xe]);a=Math.max.apply(null,ee),r=z.Common.roundFloat(p/a,4);for(var i=0;i<U.length;i++){var h=U[i];f.draw(new z.PhyloCanvas.Render.Path(ne(X+l,h.y-n/2,X+l+r*h.chart[xe],h.y+n/2),{attr:z.PhyloCanvas.Render.Style.getStyle(h.chart[xe],"barChart")}))}return X+l+p};return function(X,xe){this.getCanvasSize=function(){return[T,O]},this.getRoot=function(){return xe.getRoot()},xe.getValidate()&&f.draw(0,0,xe.getValidate()),u=!0,f=X;var Ce=xe.getRoot(),ee=xe.getNewickLen();if(T=f.canvasSize[0],O=f.canvasSize[1],se=S.bufferX,ue=S.paddingX,pe=S.paddingY,s=S.minHeightBetweenLeaves,v=pe,w=Math.round((T-se-ue*2)/ee),C=Math.round((O-pe*2)/(S.showScaleBar?Ce.getCountAllChildren():Ce.getCountAllChildren()-1)),C<s&&(C=s),d=Math.round(T-se-ue*2),(z.PhyloCanvas.Render.Parameters.binaryCharts.length||z.PhyloCanvas.Render.Parameters.barCharts.length)&&(S.alignRight=!0),F(Ce,ue),S.showScaleBar&&me(),B=d+b+S.bufferInnerLabels,z.PhyloCanvas.Render.Parameters.binaryCharts.length){var a=z.PhyloCanvas.Render.Parameters.binaryCharts;for(var l in a)B=de(B,a[l].chart,a[l])}if(z.PhyloCanvas.Render.Parameters.barCharts.length){var p=z.PhyloCanvas.Render.Parameters.barCharts;for(var l in p)D=be(B,p[l].chart,p[l])}U=[],typeof bgLabelsHold!="undefined"&&(bgLabelsHold=[])}}();z.PhyloCanvas.Render.Phylogram.prototype={};z.PhyloCanvas.Render.CircularPhylogram=function(){var f,S=z.PhyloCanvas.Render.Parameters.Circular,T,O,w,C,d,s,u,v=!0,b=0,B,q,D,M=[],L=[],W,Y,$,j=0,se,ue=Math.PI/180;function pe(ee,a){return a+=se,[z.Common.roundFloat(B+ee*Math.sin(a*ue),4),z.Common.roundFloat(q+ee*Math.cos(a*ue),4)]}function U(ee){var a=F(90-ee-se);if(a>90&&a<270){a+=180;var l="end"}else var l="start";return[a,l]}function oe(ee,a,l,p){var n=pe(ee,a),r=pe(ee,l),i=[],h,g=0;return Math.abs(F(l-a))>180?h=1:h=-1,p&&p.invertSecant&&(h*=-1,g=1),p&&p.noMove||i.push("M"),i.push(n[0],n[1],"A",ee,ee,0,h<1?0:1,g,r[0],r[1]),i}function ne(ee,a,l,p){var n=[],r=pe(a,ee),i=pe(l,ee);return p&&p.noMove||n.push("M"),n.push(r[0],r[1],"L",i[0],i[1]),n}function F(ee){for(;ee>360||ee<0;)ee>360?ee-=360:ee<0&&(ee+=360);return ee}function me(ee,a,l,p){if(!a&&ee.length>1)var p=ee[3],l=ee[2],a=ee[1],ee=ee[0];var n=be("M",oe(ee,l,p,{noMove:1,invertSecant:0}),"L",oe(a,p,l,{noMove:1,invertSecant:1}),"Z");return n}function de(ee,a){if(a=a,ee.len&&(v?b=Y||1:ee.children.length==0&&(b=z.Common.roundFloat(b+d,4))),ee.children.length>0){var l=[],p,n,r,i;if(p=a,n=a+=z.Common.roundFloat(C*ee.len,4),ee.name,ee.children&&ee.children.length)for(var h=0;h<ee.children.length;h++){var g=ee.children[h],x=de(g,a);x>0&&l.push(x)}var A=z.Common.roundFloat(Math.min.apply(null,l),4),I=z.Common.roundFloat(Math.max.apply(null,l),4);ee.level!=0&&f.draw(new z.PhyloCanvas.Render.Path(be("M",pe(a+.01,A),"L",oe(a,A,I,{noMove:!0}),"L",pe(a+.01,I)))),ee.len&&(r=z.Common.roundFloat(A+(I-A)/2,4),f.draw(new z.PhyloCanvas.Render.Path(ne(r,p,n))))}else if(ee.y=b,M.push(ee),p=a,n=a=z.Common.roundFloat(a+C*ee.len),r=b,f.draw(new z.PhyloCanvas.Render.Path(ne(r,p,n))),f.draw(new z.PhyloCanvas.Render.Path(ne(r,n,D),{attr:z.PhyloCanvas.Render.Style.connectedDash})),ee.name){var N=pe(D+S.bufferInnerLabels,r),V=U(r),G=V[0],re=V[1],ge={};ee.style&&z.Common.apply(ge,z.PhyloCanvas.Render.Style.getStyle(ee.style,"text")),ee.font_color_hex?ge.fill=ee.font_color_hex:ge.fill="#000000",ge["text-anchor"]=re,ee.uri&&(ge.href=ee.uri),ee.description&&(ge.title=ee.description);var ye=f.draw(new z.PhyloCanvas.Render.Text(N[0],N[1],ee.name,{attr:ge,rotate:[G,N[0],N[1]]}));ee.bgStyle&&L.push([ee.bgStyle,r]);var N=pe(n,r);z.PhyloCanvas.Render.Parameters.mouseRollOver&&z.Common.addRaphEventHandler(ye[0],"mouseover",z.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:f,node:ee,x:N[0],y:N[1],textEl:ye[0]}),z.PhyloCanvas.Render.Parameters.mouseRollOut&&z.Common.addRaphEventHandler(ye[0],"mouseout",z.PhyloCanvas.Render.Parameters.mouseRollOut,{svg:f,node:ee,x:N[0],y:N[1],textEl:ye[0]}),z.PhyloCanvas.Render.Parameters.onClickAction&&z.Common.addRaphEventHandler(ye[0],"click",z.PhyloCanvas.Render.Parameters.onClickAction,{svg:f,node:ee,x:N[0],y:N[1],textEl:ye[0]}),j=Math.max(ye[1],j)}return v&&(v=!1),r}function be(ee){for(var a=ee,l=1;l<arguments.length;l++)a=a.concat(arguments[l]);return a}function X(){var ee=[];if(L.length>0){if(z.PhyloCanvas.Render.Style.jsphylosvgGradientList)for(var a=0;a<z.PhyloCanvas.Render.Style.jsphylosvgGradientList.length;a++){var l=z.PhyloCanvas.Render.Style.jsphylosvgGradientList[a],p=z.Common.createGradientEl(l,z.PhyloCanvas.Render.Style[l],[B,q,D+j+S.bufferOuterLabels]);f.svg.defs.appendChild(p)}for(var a=0;a<L.length;a++){if(a!=L.length-1&&L[a][0]==L[a+1][0]){L[a+1][2]=L[a][2]?L[a][2]:L[a][1];continue}var ee=me(D,D+j+S.bufferOuterLabels,L[a][2]?L[a][2]-d/2:L[a][1]-d/2,L[a][1]+d/2),n=z.PhyloCanvas.Render.Style.getStyle(L[a][0],"textSecantBg"),r=f.draw(new z.PhyloCanvas.Render.Path(ee,{attr:n.type?{}:n}));n.type&&n.type=="radialGradient"&&r[0].node.setAttribute("fill","url(#"+n.name+")"),n.type&&n.type=="radialGradient"&&r[0].node.setAttribute("stroke","none"),r[0].toBack()}}var ee=me(D,D+j+S.bufferOuterLabels,(Y||1)-d/2,360-d/2),r=f.draw(new z.PhyloCanvas.Render.Path(ee,{attr:z.PhyloCanvas.Render.Style.textSecantBg}));return r[0].toBack(),D+j+S.bufferOuterLabels}function xe(ee,a,l){for(var p=l&&l.bufferInner?parseFloat(l.bufferInner):z.PhyloCanvas.Render.Parameters.binaryChartBufferInner,n=(l&&l.bufferSiblings?l.bufferSiblings*d:0)|(z.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings<1?d*z.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings:z.PhyloCanvas.Render.Parameters.binaryChartBufferSiblings),r=l&&l.thickness?parseFloat(l.thickness):z.PhyloCanvas.Render.Parameters.binaryChartThickness,i=(l&&l.disjointed?l.disjointed:!1)|z.PhyloCanvas.Render.Parameters.binaryChartDisjointed,h=l&&l.isInternal?l.isInternal:!1,g=!0,x,A=0;A<M.length;A++){var I=M[A];if((!M[A+1]||I.chart[a]!==M[A+1].chart[a]||i)&&I.chart[a]!="none"){var N=z.PhyloCanvas.Render.Style.getStyle(I.chart[a],"textSecantBg");if(h)var V=[D-p-r,D-p,(x||I.y)-d/2+(g&&!i?0:n/2),I.y+d/2-(A==M.length-1&&!i?0:n/2)];else var V=[ee+p,ee+p+r,(x||I.y)-d/2+(g&&!i?0:n/2),I.y+d/2-(A==M.length-1&&!i?0:n/2)];if(N.label){var G=z.PhyloCanvas.Render.Style.getStyle(N.labelStyle,"text"),re=pe((V[0]+V[1])/2,(V[2]+V[3])/2),ge=U((V[2]+V[3])/2),ye=F(ge[0]+(G.rotate?parseFloat(G.rotate):0)),ve=F(90-(V[2]+V[3])/2-se);ve>90&&ve<270&&(ye+=180),G["text-anchor"]||(G["text-anchor"]="middle"),I.font_color_hex?N.fill=I.font_color_hex:N.fill="#000000";var _e=f.draw(new z.PhyloCanvas.Render.Text(re[0],re[1],N.label,{attr:G,rotate:ye}));_e[0].toBack()}if(N.borderStyle){var Se=z.PhyloCanvas.Render.Style.getStyle(N.borderStyle,"textSecantBg"),Ae=[D,Se.fullsize?V[1]:V[0],V[2],V[3]],ke=f.draw(new z.PhyloCanvas.Render.Path(me(Ae),{attr:Se}));ke[0].toBack()}var Le=f.draw(new z.PhyloCanvas.Render.Path(me(V),{attr:N}));Le[0].toBack(),x=0,g=!1}else x||(x=I.y),I.chart[a]=="none"&&(x=0);g=!1}return h?ee:ee+p+r}function Ce(ee,a,l){for(var p=[],n,r=l&&l.bufferInner?parseFloat(l.bufferInner):z.PhyloCanvas.Render.Parameters.barChartBufferInner,i=l&&l.height?parseFloat(l.height):z.PhyloCanvas.Render.Parameters.barChartHeight?z.PhyloCanvas.Render.Parameters.barChartHeight:0,h=l&&l.width?parseFloat(l.width)<1?d*parseFloat(l.width):parseFloat(l.width):0|(z.PhyloCanvas.Render.Parameters.barChartWidth<1?d*z.PhyloCanvas.Render.Parameters.barChartWidth:z.PhyloCanvas.Render.Parameters.barChartWidth),g=0,x=0;x<M.length;x++)p.push(M[x].chart[a]);n=Math.max.apply(null,p),g=z.Common.roundFloat(i/n,4);for(var x=0;x<M.length;x++){var A=M[x];A.chart[a]>0&&f.draw(new z.PhyloCanvas.Render.Path(me(ee+r,ee+r+g*A.chart[a],A.y-h/2,A.y+h/2),{attr:z.PhyloCanvas.Render.Style.getStyle(A.chart[a],"barChart")}))}return ee+r+i}return function(ee,a,l){if(this.getCanvasSize=function(){return[T,O]},this.getRoot=function(){return a.getRoot()},a.getValidate()){ee.draw({type:"text",x:0,y:ee.canvasSize[1]/3,text:a.getValidate()});return}f=ee;var p=a.getRoot(),n=a.getNewickLen();if(T=f.canvasSize[0],O=f.canvasSize[1],B=T/2,q=O/2,w=Math.min.apply(null,[T,O]),l=S.bufferRadius>1?S.bufferRadius:z.Common.roundFloat(w*S.bufferRadius,4),Y=S.bufferAngle,u=S.innerCircleRadius,s=S.minHeightBetweenLeaves,se=S.initStartAngle,D=Math.round((w-l-u)/2),C=(D-u)/n,d=z.Common.roundFloat((360-Y)/p.getCountAllChildren(),4),de(p,u),$=D+j+S.bufferOuterLabels,z.PhyloCanvas.Render.Parameters.integratedBinaryCharts.length){var r=z.PhyloCanvas.Render.Parameters.integratedBinaryCharts;for(var i in r){var h=r[i].bufferInner?r[i].bufferInner:z.PhyloCanvas.Render.Parameters.binaryChartBufferInner,g=r[i].thickness?r[i].thickness:z.PhyloCanvas.Render.Parameters.binaryChartThickness;$=xe($-g-h,r[i].chart,r[i])}}if($=X(),z.PhyloCanvas.Render.Parameters.binaryCharts.length){var x=z.PhyloCanvas.Render.Parameters.binaryCharts;for(var i in x)$=xe($,x[i].chart,x[i])}if(z.PhyloCanvas.Render.Parameters.barCharts.length){var A=z.PhyloCanvas.Render.Parameters.barCharts;for(var i in A)$=Ce($,A[i].chart,A[i])}M=[],L=[]}}();z.PhyloCanvas.Render.CircularPhylogram.prototype={};var xt=function(){var f=function(O){if(!!O&&typeof O=="object"){let w=function(){};return w.prototype=O,new w}},S=function(O){var w="";!!O&&typeof O=="string"&&(w=O);var C=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return C.test(w)},T={xmlToJSON:function(O){try{let u=function(D){return D.replace(/^\s+|\s+$/gm,"")},v=function(D){var M=/-/g,L=String(D).replace(M,"_");return L},b=function(D,M){if(M.attributes.length>0){var L=M.attributes.length-1,W;D._attributes=[];do W=String(v(M.attributes[L].name)),D._attributes.push(W),D[W]=u(M.attributes[L].value);while(L--)}},B=function(D){D.getNodeByAttribute=function(M,L){if(this.length>0){var W,Y=this.length-1;try{do if(W=this[Y],W[M]==L)return W;while(Y--)}catch($){return!1}return!1}},D.contains=function(M,L){if(this.length>0){var W=this.length-1;try{do if(this[W][M]==L)return!0;while(W--)}catch(Y){return!1}return!1}},D.indexOf=function(M,L){var W=-1;if(this.length>0){var Y=this.length-1;try{do this[Y][M]==L&&(W=Y);while(Y--)}catch($){return-1}return W}},D.SortByAttribute=function(M,L){if(this.length){let W=function($,j){var se=$[j];return se=S(se)?parseFloat(se):se,se},Y=function($,j){var se=0,ue,pe;return ue=W($,M),pe=W(j,M),ue<pe?se=-1:pe<ue&&(se=1),L&&(se=L.toUpperCase()=="DESC"?0-se:se),se};this.sort(Y)}},D.SortByValue=function(M){if(this.length){let L=function(Y){var $=Y.Text;return $=S($)?parseFloat($):$,$},W=function(Y,$){var j=0,se,ue;return se=L(Y),ue=L($),se<ue?j=-1:ue<se&&(j=1),M&&(j=M.toUpperCase()=="DESC"?0-j:j),j};this.sort(W)}},D.SortByNode=function(M,L){if(this.length){let W=function($,j){var se=$[j][0].Text;return se=S(se)?parseFloat(se):se,se},Y=function($,j){var se=0,ue,pe;return ue=W($,M),pe=W(j,M),ue<pe?se=-1:pe<ue&&(se=1),L&&(se=L.toUpperCase()=="DESC"?0-se:se),se};this.sort(Y)}}},q=function(D,M){var L,W,Y,$="";if(!M)return null;if(M.attributes.length>0&&b(D,M),D.Text="",M.hasChildNodes()){var j=M.childNodes.length-1,se=0;do switch(W=M.childNodes[se],W.nodeType){case 1:D._children=[],L=W.localName?W.localName:W.baseName,L=v(L),$!=L&&D._children.push(L),D[L]||(D[L]=[]),Y={},D[L].push(Y),W.attributes.length>0&&b(Y,W),D[L].contains||B(D[L]),$=L,W.hasChildNodes()&&q(Y,W);break;case 3:D.Text+=u(W.nodeValue);break;case 4:D.Text+=W.text?u(W.text):u(W.nodeValue);break}while(se++<j)}};if(!O)return null;var w={};w.typeOf="JSXBObject";var C=O.nodeType==9?O.documentElement:O;if(w.RootName=C.nodeName||"",O.nodeType==3||O.nodeType==4)return O.nodeValue;var d=function(){var D={activate:function(){var M=[];return M&&(M.getNodesByAttribute=function(L,W){if(!!M&&M.length>0){var Y=[],$,j=M.length-1;try{do $=M[j],$[L]===W&&Y.push($);while(j--);return Y.reverse(),Y}catch(se){return null}return null}},M.getNodeByAttribute=function(L,W){if(!!M&&M.length>0){var Y,$=M.length-1;try{do if(Y=M[$],Y[L]===W)return Y;while($--)}catch(j){return null}return null}},M.getNodesByValue=function(L){if(!!M&&M.length>0){var W=[],Y,$=M.length-1;try{do Y=M[$],!!Y.Text&&Y.Text===L&&W.push(Y);while($--);return W}catch(j){return null}return null}},M.contains=function(L,W){if(!!M&&M.length>0){var Y=M.length-1;try{do if(M[Y][L]===W)return!0;while(Y--)}catch($){return!1}return!1}},M.indexOf=function(L,W){var Y=-1;if(!!M&&M.length>0){var $=M.length-1;try{do M[$][L]===W&&(Y=$);while($--)}catch(j){return-1}return Y}},M.SortByAttribute=function(L,W){if(!!M&&M.length>0){let Y=function(j,se){var ue=j[se];return ue=bam.validation.isNumeric(ue)?parseFloat(ue):ue,ue},$=function(j,se){var ue,pe;ue=Y(j,L),pe=Y(se,L);var U=ue<pe?-1:pe<ue?1:0;return W&&(U=W.toUpperCase()==="DESC"?0-U:U),U};M.sort($)}},M.SortByValue=function(L){if(!!M&&M.length>0){let W=function($){var j=$.Text;return j=bam.validation.isNumeric(j)?parseFloat(j):j,j},Y=function($,j){var se,ue;se=W($),ue=W(j);var pe=se<ue?-1:ue<se?1:0;return L&&(pe=L.toUpperCase()==="DESC"?0-pe:pe),pe};M.sort(Y)}},M.SortByNode=function(L,W){if(!!M&&M.length>0){let Y=function(j,se){var ue=j[se][0].Text;return ue=bam.validation.isNumeric(ue)?parseFloat(ue):ue,ue},$=function(j,se){var ue,pe;ue=Y(j,L),pe=Y(se,L);var U=ue<pe?-1:pe<ue?1:0;return W&&(U=W.toUpperCase()==="DESC"?0-U:U),U};M.sort($)}}),M}};return D}(),s=function(){var D=f(d);return D.activate()};return q(w,C),O=null,C=null,w}catch(u){return null}},textToXML:function(O){var w=null;try{w=document.all?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser,w.async=!1}catch(d){throw new Error("XML Parser could not be instantiated")}var C;try{document.all?C=w.loadXML(O)?w:!1:C=w.parseFromString(O,"text/xml")}catch(d){throw new Error("Error parsing XML string")}return C}};return T}();"use strict";var De={};De.defaults={skip_sgml:!1,syncope:!1};var Ft=De.schemes={balinese:{vowels:"ᬅ ᬆ ᬇ ᬈ ᬉ ᬊ ᬋ ᬌ ᬍ ᬎ  ᬏ ᬐ  ᬑ ᬒ".split(" "),vowel_marks:"ᬵ ᬶ ᬷ ᬸ ᬹ ᬺ ᬻ ᬼ ᬽ ᭂ ᬾ ᬿ ᭃ ᭀ ᭁ".split(" "),other_marks:["ᬂ","ᬄ","ᬁ",""],virama:["᭄"],consonants:"ᬓ ᬔ ᬕ ᬖ ᬗ ᬘ ᬙ ᬚ ᬛ ᬜ ᬝ ᬞ ᬟ ᬠ ᬡ ᬢ ᬣ ᬤ ᬥ ᬦ ᬧ ᬨ ᬩ ᬪ ᬫ ᬬ ᬭ ᬮ ᬯ ᬰ ᬱ ᬲ ᬳ".split(" "),symbols:"᭐ ᭑ ᭒ ᭓ ᭔ ᭕ ᭖ ᭗ ᭘ ᭙   ᭞ ᭟".split(" "),zwj:["‍"],skip:[""]},bengali:{vowels:"অ আ ই ঈ উ ঊ ঋ ৠ ঌ ৡ  এ ঐ  ও ঔ".split(" "),vowel_marks:"া ি ী ু ূ ৃ ৄ ৢ ৣ  ে ৈ  ো ৌ".split(" "),other_marks:"ং ঃ ঁ".split(" "),virama:["্"],consonants:"ক খ গ ঘ ঙ চ ছ জ ঝ ঞ ট ঠ ড ঢ ণ ত থ দ ধ ন প ফ ব ভ ম য র ল ব শ ষ স হ ळ ক্ষ জ্ঞ".split(" "),symbols:"০ ১ ২ ৩ ৪ ৫ ৬ ৭ ৮ ৯ ॐ ঽ । ॥".split(" "),other:"    ড ঢ  য ".split(" ")},newa:{vowels:["𑐀","𑐁","𑐂","𑐃","𑐄","𑐅","𑐆","𑐇","𑐈","𑐉","","𑐊","𑐋","","𑐌","𑐍"],vowel_marks:["𑐵","𑐶","𑐷","𑐸","𑐹","𑐺","𑐻","𑐼","𑐽","","𑐾","𑐿","","𑑀","𑑁"],other_marks:["𑑄","𑑅","𑑃","𑑠","𑑡",""],virama:["𑑂"],consonants:["𑐎","𑐏","𑐐","𑐑","𑐒","𑐔","𑐕","𑐖","𑐗","𑐘","𑐚","𑐛","𑐜","𑐝","𑐞","𑐟","𑐠","𑐡","𑐢","𑐣","𑐥","𑐦","𑐧","𑐨","𑐩","𑐫","𑐬","𑐮","𑐰","𑐱","𑐲","𑐳","𑐴"],symbols:["𑑐","𑑑","𑑒","𑑓","𑑔","𑑕","𑑖","𑑗","𑑘","𑑙","𑑉","𑑇","𑑋","𑑌"]},sarada:{vowels:["𑆃","𑆄","𑆅","𑆆","𑆇","𑆈","𑆉","𑆊","𑆋","𑆌","","𑆍","𑆎","","𑆏","𑆐"],vowel_marks:["𑆳","𑆴","𑆵","𑆶","𑆷","𑆸","𑆹","𑆺","𑆻","","𑆼","𑆽","","𑆾","𑆿"],other_marks:["𑆁","𑆂","𑆀","𑇂","𑇃"],virama:["𑇀"],consonants:["𑆑","𑆒","𑆓","𑆔","𑆕","𑆖","𑆗","𑆘","𑆙","𑆚","𑆛","𑆜","𑆝","𑆞","𑆟","𑆠","𑆡","𑆢","𑆣","𑆤","𑆥","𑆦","𑆧","𑆨","𑆩","𑆪","𑆫","𑆬","𑆮","𑆯","𑆰","𑆱","𑆲","𑆭"],symbols:["𑇐","𑇑","𑇒","𑇓","𑇔","𑇕","𑇖","𑇗","𑇘","𑇙","𑇄","𑇁","𑇅","𑇆"]},devanagari:{vowels:"अ आ इ ई उ ऊ ऋ ॠ ऌ ॡ ऎ ए ऐ ऒ ओ औ ए ऐ ओ".split(" "),vowel_marks:"ा ि ी ु ू ृ ॄ ॢ ॣ ॆ े ै ॊ ो ौ ॎ ॎे ॎा ॎो ॆ ॏ".split(" "),other_marks:"ं ः ँ ᳵ ᳶ ꣽ".split(" "),virama:["्"],consonants:"क ख ग घ ङ च छ ज झ ञ ट ठ ड ढ ण त थ द ध न प फ ब भ म य र ल व श ष स ह ळ".split(" "),symbols:"० १ २ ३ ४ ५ ६ ७ ८ ९ ॐ ऽ । ॥".split(" "),zwj:["‍"],skip:[""],accent:["॑","॒"],combo_accent:"ः॑ ः॒ ं॑ ं॒".split(" "),candra:["ॅ"],other:"क़ ख़ ग़ ज़ ड़ ढ़ फ़ य़ ऱ".split(" ")},gujarati:{vowels:"અ આ ઇ ઈ ઉ ઊ ઋ ૠ ઌ ૡ  એ ઐ  ઓ ઔ".split(" "),vowel_marks:"ા િ ી ુ ૂ ૃ ૄ ૢ ૣ  ે ૈ  ો ૌ".split(" "),other_marks:"ં ઃ ઁ".split(" "),virama:["્"],consonants:"ક ખ ગ ઘ ઙ ચ છ જ ઝ ઞ ટ ઠ ડ ઢ ણ ત થ દ ધ ન પ ફ બ ભ મ ય ર લ વ શ ષ સ હ ળ".split(" "),symbols:"૦ ૧ ૨ ૩ ૪ ૫ ૬ ૭ ૮ ૯ ૐ ઽ ૤ ૥".split(" "),candra:["ૅ"]},gurmukhi:{vowels:"ਅ ਆ ਇ ਈ ਉ ਊ      ਏ ਐ  ਓ ਔ".split(" "),vowel_marks:"ਾ ਿ ੀ ੁ ੂ      ੇ ੈ  ੋ ੌ".split(" "),other_marks:"ਂ ਃ ਁ".split(" "),virama:["੍"],consonants:"ਕ ਖ ਗ ਘ ਙ ਚ ਛ ਜ ਝ ਞ ਟ ਠ ਡ ਢ ਣ ਤ ਥ ਦ ਧ ਨ ਪ ਫ ਬ ਭ ਮ ਯ ਰ ਲ ਵ ਸ਼ ਸ਼ ਸ ਹ ਲ਼".split(" "),symbols:"੦ ੧ ੨ ੩ ੪ ੫ ੬ ੭ ੮ ੯ ॐ ऽ । ॥".split(" "),other:" ਖ ਗ ਜ ਡ  ਫ  ".split(" ")},kannada:{vowels:"ಅ ಆ ಇ ಈ ಉ ಊ ಋ ೠ ಌ ೡ ಎ ಏ ಐ ಒ ಓ ಔ".split(" "),vowel_marks:"ಾ ಿ ೀ ು ೂ ೃ ೄ ೢ ೣ ೆ ೇ ೈ ೊ ೋ ೌ".split(" "),other_marks:"ಂ ಃ ँ".split(" "),virama:["್"],consonants:"ಕ ಖ ಗ ಘ ಙ ಚ ಛ ಜ ಝ ಞ ಟ ಠ ಡ ಢ ಣ ತ ಥ ದ ಧ ನ ಪ ಫ ಬ ಭ ಮ ಯ ರ ಲ ವ ಶ ಷ ಸ ಹ ಳ".split(" "),symbols:"೦ ೧ ೨ ೩ ೪ ೫ ೬ ೭ ೮ ೯ ಓಂ ಽ । ॥".split(" "),other:"      ಫ  ಱ".split(" ")},malayalam:{vowels:"അ ആ ഇ ഈ ഉ ഊ ഋ ൠ ഌ ൡ എ ഏ ഐ ഒ ഓ ഔ".split(" "),vowel_marks:"ാ ി ീ ു ൂ ൃ ൄ ൢ ൣ െ േ ൈ ൊ ോ ൌ".split(" "),other_marks:"ം ഃ ँ".split(" "),virama:["്"],consonants:"ക ഖ ഗ ഘ ങ ച ഛ ജ ഝ ഞ ട ഠ ഡ ഢ ണ ത ഥ ദ ധ ന പ ഫ ബ ഭ മ യ ര ല വ ശ ഷ സ ഹ ള".split(" "),symbols:"൦ ൧ ൨ ൩ ൪ ൫ ൬ ൭ ൮ ൯ ഓം ഽ । ॥".split(" "),other:"        റ".split(" ")},oriya:{vowels:"ଅ ଆ ଇ ଈ ଉ ଊ ଋ ୠ ଌ ୡ  ଏ ଐ  ଓ ଔ".split(" "),vowel_marks:"ା ି ୀ ୁ ୂ ୃ ୄ ୢ ୣ  େ ୈ  ୋ ୌ".split(" "),other_marks:"ଂ ଃ ଁ".split(" "),virama:["୍"],consonants:"କ ଖ ଗ ଘ ଙ ଚ ଛ ଜ ଝ ଞ ଟ ଠ ଡ ଢ ଣ ତ ଥ ଦ ଧ ନ ପ ଫ ବ ଭ ମ ଯ ର ଲ ଵ ଶ ଷ ସ ହ ଳ".split(" "),symbols:"୦ ୧ ୨ ୩ ୪ ୫ ୬ ୭ ୮ ୯ ଓଂ ଽ । ॥".split(" "),other:"    ଡ ଢ  ଯ ".split(" ")},tamil:{vowels:"அ ஆ இ ஈ உ ஊ     எ ஏ ஐ ஒ ஓ ஔ".split(" "),vowel_marks:"ா ி ீ ு ூ     ெ ே ை ொ ோ ௌ".split(" "),other_marks:"ஂ ஃ ".split(" "),virama:["்"],consonants:"க க க க ங ச ச ஜ ச ஞ ட ட ட ட ண த த த த ந ப ப ப ப ம ய ர ல வ ஶ ஷ ஸ ஹ ள".split(" "),symbols:"௦ ௧ ௨ ௩ ௪ ௫ ௬ ௭ ௮ ௯ ௐ ऽ । ॥".split(" "),other:"        ற".split(" ")},telugu:{vowels:"అ ఆ ఇ ఈ ఉ ఊ ఋ ౠ ఌ ౡ ఎ ఏ ఐ ఒ ఓ ఔ".split(" "),vowel_marks:"ా ి ీ ు ూ ృ ౄ ౢ ౣ ె ే ై ొ ో ౌ".split(" "),other_marks:"ం ః ఁ ᳲ ᳲ".split(" "),virama:["్"],consonants:"క ఖ గ ఘ ఙ చ ఛ జ ఝ ఞ ట ఠ డ ఢ ణ త థ ద ధ న ప ఫ బ భ మ య ర ల వ శ ష స హ ళ".split(" "),symbols:"౦ ౧ ౨ ౩ ౪ ౫ ౬ ౭ ౮ ౯ ఓం ఽ । ॥".split(" "),other:"        ఱ".split(" ")},iast:{vowels:"a ā i ī u ū ṛ ṝ ḷ ḹ ẽ e ai õ o au ê aî ô aû".split(" "),other_marks:["ṃ","ḥ","m̐","ẖ","ḫ","oḿ"],virama:[""],consonants:"k kh g gh ṅ c ch j jh ñ ṭ ṭh ḍ ḍh ṇ t th d dh n p ph b bh m y r l v ś ṣ s h ḻ".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oṁ ' | ||".split(" ")},iso:{vowels:"a ā i ī u ū r̥ r̥̄ l̥ l̥̄ ẽ e ai õ o au ê aî ô aû".split(" "),other_marks:["ṁ","ḥ","m̐","oḿ"],virama:[""],consonants:"k kh g gh ṅ c ch j jh ñ ṭ ṭh ḍ ḍh ṇ t th d dh n p ph b bh m y r l v ś ṣ s h ḷ kṣ jñ".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 om̐ ' | ||".split(" ")},itrans:{vowels:"a A i I u U RRi RRI LLi LLI  e ai  o au".split(" "),other_marks:["M","H",".N"],virama:[""],consonants:"k kh g gh ~N ch Ch j jh ~n T Th D Dh N t th d dh n p ph b bh m y r l v sh Sh s h L kSh j~n".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM .a | ||".split(" "),candra:[".c"],zwj:["{}"],skip:"_",accent:["\\'","\\_"],combo_accent:"\\'H \\_H \\'M \\_M".split(" "),other:"q K G z .D .Dh f Y R".split(" ")},hk:{vowels:"a A i I u U R RR lR lRR  e ai  o au".split(" "),other_marks:"M H ~".split(" "),virama:[""],consonants:"k kh g gh G c ch j jh J T Th D Dh N t th d dh n p ph b bh m y r l v z S s h L kS jJ".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 OM ' | ||".split(" ")},slp1:{vowels:"a A i I u U f F x X ẽ e E õ o O ê Ê ô Ô".split(" "),other_marks:"M H m̐ ẖ ḫ oḿ".split(" "),virama:[""],consonants:"k K g G N c C j J Y w W q Q R t T d D n p P b B m y r l v S z s h L".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oṁ ' | ||".split(" ")},velthuis:{vowels:"a aa i ii u uu .r .rr .li .ll  e ai  o au".split(" "),other_marks:".m .h ".split(" "),virama:[""],consonants:'k kh g gh "n c ch j jh ~n .t .th .d .d .n t th d dh n p ph b bh m y r l v ~s .s s h L k.s j~n'.split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 o.m ' | ||".split(" ")},wx:{vowels:"a A i I u U q Q L   e E  o O".split(" "),other_marks:"M H z".split(" "),virama:[""],consonants:"k K g G f c C j J F t T d D N w W x X n p P b B m y r l v S R s h  kR jF".split(" "),symbols:"0 1 2 3 4 5 6 7 8 9 oM ' | ||".split(" ")}},x1={},Qt={iast:{ṛ:["r̥"],ṃ:["ṁ"]},itrans:{A:["aa"],I:["ii","ee"],U:["uu","oo"],RRi:["R^i"],RRI:["R^I"],LLi:["L^i"],LLI:["L^I"],M:[".m",".n"],"~N":["N^"],ch:["c"],Ch:["C","chh"],"~n":["JN"],v:["w"],Sh:["S","shh"],kSh:["kS","x"],"j~n":["GY","dny"],OM:["AUM"],"\\_":["\\`"],"\\_H":["\\`H"],"\\'M":["\\'.m","\\'.n"],"\\_M":"\\_.m \\_.n \\`M \\`.m \\`.n".split(" "),".a":["~"],"|":["."],"||":[".."],z:["J"]}},Lt={};De.isRomanScheme=function(f){return x1.hasOwnProperty(f)};De.addBrahmicScheme=function(f,S){De.schemes[f]=S};De.addRomanScheme=function(f,S){"vowel_marks"in S||(S.vowel_marks=S.vowels.slice(1)),De.schemes[f]=S,x1[f]=!0};var b1=function(f){var S={};for(var T in f)!f.hasOwnProperty(T)||(S[T]=f[T].slice(0));return S};(function(){var f=Ft.kolkata=b1(Ft.iast),S="iast itrans hk kolkata slp1 velthuis wx".split(" ");f.vowels="a ā i ī u ū ṛ ṝ ḷ ḹ e ē ai o ō au".split(" ");for(var T=0,O;O=S[T];T++)De.addRomanScheme(O,Ft[O]);var w=b1(Ft.itrans);w.vowels="a A i I u U Ri RRI LLi LLi e E ai o O au".split(" "),w.vowel_marks=w.vowels.slice(1),Qt.itrans_dravidian=Qt.itrans,De.addRomanScheme("itrans_dravidian",w)})();var Q1=function(f,S){var T=Qt[f]||{},O={},w=De.schemes[f],C={},d=[],s={},u=De.schemes[S];for(var v in w)if(!!w.hasOwnProperty(v)){var b=w[v],B=u[v];if(B!==void 0)for(var q=0;q<b.length;q++){var D=b[q],M=B[q],L=T[D]||[],W=L.length,Y=0;for(d.push(D.length),Y=0;Y<W;Y++)d.push(L[Y].length);if(v==="vowel_marks"||v==="virama")for(s[D]=M,Y=0;Y<W;Y++)s[L[Y]]=M;else{for(C[D]=M,Y=0;Y<W;Y++)C[L[Y]]=M;if(v==="consonants"||v==="other")for(O[D]=M,Y=0;Y<W;Y++)O[L[Y]]=M}}}return{consonants:O,fromRoman:De.isRomanScheme(f),letters:C,marks:s,maxTokenLength:Math.max.apply(Math,d),toRoman:De.isRomanScheme(S),virama:u.virama}},K1=function(f,S,T){for(var O=[],w=S.consonants,C=f.length,d=!1,s=S.letters,u=S.marks,v=S.maxTokenLength,b=T.skip_sgml,B=T.syncope,q,D,M="",L=S.toRoman,W=S.virama,Y=!1,$=!1,j=!1,se=0,ue;(ue=f.charAt(se))||M;se++){var pe=v-M.length;if(!(pe>0&&se<C&&(M+=ue,pe>1)))for(var U=0;U<v;U++){var oe=M.substr(0,v-U);if(Y===!0)Y=oe!==">";else if(oe==="<")Y=b;else if(oe==="##"){j=!j,M=M.substr(2);break}if($=Y||j,(q=s[oe])!==void 0&&!$){L?O.push(q):(d?(D=u[oe])?O.push(D):oe!=="a"&&(O.push(W),O.push(q)):O.push(q),d=oe in w),M=M.substr(v-U);break}else U===v-1&&(d&&(d=!1,B||O.push(W)),O.push(oe),M=M.substr(1))}}return d&&!B&&O.push(W),O.join("")},Z1=function(f,S){for(var T=[],O=S.consonants,w=!1,C=!1,d=S.letters,s=S.marks,u,v=S.toRoman,b=!1,B=0,q;q=f.charAt(B);B++){if(q==="#"){w?(b=!b,w=!1):w=!0,C&&(T.push("a"),C=!1);continue}else if(b){T.push(q);continue}(u=s[q])!==void 0?(T.push(u),C=!1):(w&&(T.push("#"),w=!1),C&&(T.push("a"),C=!1),(u=d[q])?(T.push(u),C=v&&q in O):T.push(q))}return C&&T.push("a"),T.join("")};De.t=function(f,S,T,O){O=O||{};var w=Lt.options||{},C=De.defaults,d=Lt.from===S&&Lt.to===T,s;for(var u in C)if(C.hasOwnProperty(u)){var v=C[u];u in O&&(v=O[u]),O[u]=v,v!==w[u]&&(d=!1)}return d?s=Lt.map:(s=Q1(S,T,O),Lt={from:S,map:s,options:O,to:T}),S==="itrans"&&(f=f.replace(/\{\\m\+\}/g,".h.N"),f=f.replace(/\.h/g,""),f=f.replace(/\\([^'`_]|$)/g,"##$1##")),s.fromRoman?K1(f,s,O):Z1(f,s,O)};var w1=function(){let f=[{name:"valapalagilaka",search:"ṙ",replace:()=>"r"},{name:"short e",search:"ẽ",replace:()=>"e"},{name:"short o",search:"õ",replace:()=>"o"},{name:"pṛṣṭhamātrā e",search:"ê",replace:()=>"e"},{name:"pṛṣṭhamātrā o",search:"ô",replace:()=>"o"},{name:"pṛṣṭhamātrā ai",search:"Ê",replace:()=>"E"},{name:"pṛṣṭhamātrā au",search:"Ô",replace:()=>"O"},{name:"candrabindu",search:"m̐",replace:()=>"M"},{name:"oṃkāras",search:"oṁ",replace:()=>"oM"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"(?:kK|gG|cC|jJ|wW|qQ|tT|dD|pP|bB)",replace:d=>d[0].slice(-1)},{name:"geminated m after h",search:"(?:Mhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rfi]|p[aA])tt|tt(?=[rvy]\\S)",replace:d=>`${d[1]}t`},{name:"geminated consonants after r",search:"([rf]\\s*)([kgcjwqdpbRnmyvl])\\2{1,2}",replace:d=>`${d[1]}${d[2]}`},{name:"final nasal variants",search:"(?:M[lSs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnNYR](?=[pPbBmdDtTnwWqQcCjJkKgG])",replace:()=>"M"},{name:"final anusvāra variants",search:"M?[mN](?!\\S)|n(?=\\s+[tdn])|Y(?=\\s+[jc])",replace:()=>"M"},{name:"visarga aḥ before voiced consonants",search:"(?<!\\sB)(?:a[Hr]|[o])(?=\\s+['gGjJqQdDnbBmrylvh])",replace:()=>"aH"},{name:"visarga aḥ before vowels",search:"aH(?=\\s+[AiIeuUof])",replace:()=>"a"},{name:"visarga aḥ before unvoiced consonants and space + anusvāra",search:"o\\s+(?=[kKcCwWtTpPszSM])",replace:()=>"aH a"},{name:"visarga āḥ variants",search:"AH(?=\\s+[aAiIeEuUogGjJqQdDbBnmyrlvh])",replace:()=>"A"},{name:"other visarga variants",search:"H?[rszS](?!\\S)",replace:()=>"H"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"z(?=[kK])|s(?=s)",replace:()=>"H"},{name:"final au/āv",search:"Av(?!\\S)",replace:()=>"O"},{name:"final su",search:"(?<=[sz])v(?=\\s+[aAiIuUoOeE])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aAuUoOeE])",replace:()=>"y"},{name:"kcch/kś",search:"k(\\s*)(?:S|c?C)",replace:d=>`k${d[1]}S`},{name:"cś/tś",search:"[tc](\\s*)S",replace:d=>`c${d[1]}C`},{name:"cch/ch",search:"([aAiIuUeEoO])C",replace:d=>`${d[1]}cC`},{name:"final t + hi",search:"d(\\s+)D(?=[iy](?:\\s|$))",replace:d=>`t${d[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aAiIeEuUoOgGdDbByrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:d=>`${d[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aAuUeEoO])",replace:()=>"i"},{name:"bhd for bdh",search:"Bd",replace:()=>"bD"}],S=[{name:"valapalagilaka",search:"ṙ",replace:()=>"r"},{name:"short e",search:"ẽ",replace:()=>"e"},{name:"short o",search:"õ",replace:()=>"o"},{name:"pṛṣṭhamātrā e",search:"ê",replace:()=>"e"},{name:"pṛṣṭhamātrā o",search:"ô",replace:()=>"o"},{name:"pṛṣṭhamātrā ai",search:"aî",replace:()=>"ai"},{name:"pṛṣṭhamātrā au",search:"aû",replace:()=>"au"},{name:"candrabindu",search:"m̐",replace:()=>"ṃ"},{name:"oṃkāras",search:"oṁ",replace:()=>"oṃ"},{name:"additional punctuation",search:"[()\\[\\],;?!|_\\-=+\\d.'\\/]+",replace:()=>""},{name:"geminated aspirated consonants",search:"([kgcjṭḍtdpb]){2}h",replace:d=>`${d[1]}h`},{name:"geminated m after h",search:"(?:ṃhm|hmm)",replace:()=>"hm"},{name:"geminated t",search:"([rṛi]|p[aā])tt|tt(?=[rvy]\\S)",replace:d=>`${d[1]}t`},{name:"geminated consonants after r",search:"([rṛ]\\s*)([kgcjṭḍṇtdnpbmyvl])\\2{1,2}",replace:d=>`${d[1]}${d[2]}`},{name:"final nasal variants",search:"(?:ṃ[lṣs]|nn)(?!\\S)",replace:()=>"n"},{name:"internal nasal variants",search:"[mnṅñṇ](?=[pbmdtnṭḍcjkg])",replace:()=>"ṃ"},{name:"final anusvāra variants",search:"ṃ?[mṅ](?!\\S)|n(?=\\s+[tdn])|ñ(?=\\s+[jc])",replace:()=>"ṃ"},{name:"visarga aḥ before voiced consonants",search:"(?:a[ḥr]|[o])(?=\\s+['gjḍdnbmyrlvh])",replace:()=>"aḥ"},{name:"visarga aḥ before vowels",search:"aḥ(?=\\s+[āiīeuūoṛ])",replace:()=>"a"},{name:"visarga aḥ before unvoiced consonants and space + anusvāra",search:"o\\s+(?=[kcṭtpśṣsṃ])",replace:()=>"aḥ a"},{name:"visarga āḥ variants",search:"āḥ(?=\\s+[aāiīeuūogjḍdnbmyrlvh])",replace:()=>"ā"},{name:"other visarga variants",search:"ḥ?[rśṣs](?!\\S)",replace:()=>"ḥ"},{name:"avagrahas",search:"'",replace:()=>"a"},{name:"internal visarga variants",search:"ṣ(?=k)|s(?=s)",replace:()=>"s"},{name:"final au/āv",search:"āv(?!\\S)",replace:()=>"au"},{name:"final su",search:"(?<=[sṣ])v(?=\\s+[aāiīuūoe])",replace:()=>"u"},{name:"final i",search:"i(?=\\s+[aāuūeo])",replace:()=>"y"},{name:"kcch/kś",search:"k(\\s*)(?:ś|c?ch)",replace:d=>`k${d[1]}ś`},{name:"cś/tś",search:"[tc](\\s*)ś",replace:d=>`c${d[1]}ch`},{name:"cch/ch",search:"([aāiīuūeo])ch",replace:d=>`${d[1]}cch`},{name:"final t + hi",search:"d(\\s+)dh(?=[iy](?:\\s|$))",replace:d=>`t${d[1]}h`},{name:"final t + voiced syllable",search:"d(?=(?:\\s+[aāiīeuūogdbyrv]|\\s*$))",replace:()=>"t"},{name:"final t + n/m",search:"([ai])n(?=\\s+[nm])",replace:d=>`${d[1]}t`},{name:"final t + c/j",search:"j(?=\\s+j)|c(?=\\s+c)",replace:()=>"t"},{name:"i/y + vowel",search:"y(?=\\s+[aāuūeo])",replace:()=>"i"},{name:"bhd for bdh",search:"bhd",replace:()=>"bdh"}],T={none:{name:"remove spaces",search:"\\s",replace:()=>""},collapse:{name:"collapse spaces",search:"\\s+",replace:()=>" "}},O=function(d,s){let u=s.join(""),v=[],b=[...u.matchAll(d.search)],B=0,q=null;for(let D of s){let M=B+D.length,L=D,W=0;if(q)if(q.length<=D.length)L=w(D,0,q.length,q.text),W=q.text.length-q.length,q=null;else{L=q.text.slice(0,D.length);let $=q.text.slice(D.length);q={length:q.length-D.length,text:$};continue}for(;b.length>0&&b[0].index<M;){let Y=b.shift(),$=Y.index-B+W,j=d.replace(Y);if(Y.index+Y[0].length<M)L=w(L,$,Y[0].length,j),W=W+j.length-Y[0].length;else{let se=D.length-$+W,ue=j.slice(0,se);L=L.slice(0,$)+ue;let pe=j.slice(se);q={length:Y[0].length-se,text:pe}}}v.push(L),B=M}return v},w=function(d,s,u,v){return d.slice(0,s)+v+d.slice(s+u)};return function(d){let s=d.map(u=>De.t(u,"iast","slp1"));for(let u of[...f,T.none])s=O(u,s);return s.map(u=>De.t(u,"slp1","iast"))}}();var Bt={smush:function(f,S){return f.toLowerCase().replace(/([ḍdrmvynhs]) ([aāiīuūṛeoéó])/g,"$1$2"+S).replace(/([kgcjṭḍtdpb]) h/g,"$1‌"+S+"h").replace(/([kgcjñḍtdnpbmrlyvśṣsṙ]) ([kgcjṭḍtdnpbmyrlvśṣshḻ])/g,"$1"+S+"$2").replace(/([oóeéā]) ([ṃ'])/g,"$1"+S+"$2").replace(/^ṃ/,"'‍ṃ").replace(/^ḥ/,"'‍ḥ").replace(/^_y/,"'‍y").replace(/ü/g,"‌u").replace(/ï/g,"‌i").replace(/_{1,2}(?=\s*)/g,function(T){if(T==="__")return"‍";if(T==="_")return"‌"})},iast:function(f,S){let T=S||"devanagari";return De.t(f,T,"iast",{skip_sgml:!0})},devanagari:function(f,S){let T=S||"",O={skip_sgml:!0},w=f.replace(/ṙ/g,"r").replace(/^_ā/,"ऽ‍ा"),C=Bt.smush(w,T);return De.t(C,"iast","devanagari",O).replace(/¯/g,"ꣻ")},malayalam:function(f,S){let T=S||"",O={skip_sgml:!0},w={ക:"ൿ",ത:"ൽ",ന:"ൻ",മ:"ൔ",ര:"ർ"},C=f.replace(/^_ā/,"ഽ‍ാ"),d=Bt.smush(C,T).replace(/e/g,"ẽ").replace(/o/g,"õ").replace(/ṙ/g,"r").replace(/ṁ/g,"ṃ").replace(/ḿ/g,"ṃ").replace(/í/g,"i").replace(/ú/g,"u").replace(/é/g,"e");return De.t(d,"iast","malayalam",O).replace(/(^|[^്])ര്(?=\S)/g,"$1ൎ").replace(/([കതനമര])്(?![^\s\u200C,—’―])/g,function(u,v){return w[v]})},grantha:function(f,S){let T=S||"",O={skip_sgml:!0},w=new Map([["സ",""],["ര","ർ"],["യ",""],["ച",""],["ദ",""],["ശ",""]]),C=new RegExp("(["+[...w.keys()].join("")+"])്(?![^‌ ,—’―])","g"),d=f.replace(/^_ā/,"ഽ‍ാ"),s=Bt.smush(d,T).replace(/e/g,"ẽ").replace(/o/g,"õ").replace(/ṙ/g,"r").replace(/ṁ/g,"ṃ").replace(/ḿ/g,"ṃ").replace(/í/g,"i").replace(/ú/g,"u").replace(/é/g,"e");return De.t(s,"iast","malayalam",O).replace(/(^|[^്])ര്(?=\S)/g,"$1ൎ").replace(C,(v,b)=>w.get(b)).replace(/ക്ഷി/g,"க்ஷி")},telugu:function(f,S){var T=S||"";let O={skip_sgml:!0},w=f.replace(/^_ā/,"ఽ‍ా"),C=Bt.smush(w,T).replace(/e/g,"ẽ").replace(/o/g,"õ").replace(/ṙ/g,"r‍").replace(/ṁ/g,"ṃ").replace(/ḿ/g,"ṃ").replace(/í/g,"i").replace(/ú/g,"u").replace(/é/g,"e");return De.t(C,"iast","telugu",O)}},Ot=function(f,S,T=!1,O="sa"){let w=Bt[S],C=f.cloneNode(!0),d=function(s,u){let v=s.childNodes;for(let b of v)if(b.nodeType!==8){if(b.nodeType===3){if(u!=="sa")continue;b.data=w(b.data,T)}else if(b.hasChildNodes()){let B=b.getAttribute("lang")||u;B==="sa"&&b.classList.contains("subst")&&en(b,S),d(b,B)}}};return d(C,O),C},C1=function(f,S=!1){if(f.nodeType===3)return f;let T=document.createTreeWalker(f,NodeFilter.SHOW_TEXT,null,!1);if(S){let O;for(;T.nextNode();)O=T.currentNode;return O}else return T.nextNode},en=function(f,S){if(f.firstChild.nodeType!==3&&f.lastChild.nodeType!==3)return;let T=f.childNodes,O=/^[aāiīuūeoṛṝḷṃḥ]/,w=/[kgṅcjñṭḍṇtdnpbmyrlvṣśsh]$/,C=["ā","i","ī","e","o","_","ai","au"],d=["h","k","ś","y","g","gh","c","ch","jh","ṭh","ḍ","ḍh","t","th","d","dh","n","p","ph","bh","m","r","ḻ","v","ṣ","s"];var s=!1,u=[],v=[];let b=T[0].nodeType===3;for(let B of T){if(B.nodeType>3)continue;let q=B.textContent.trim();if(q!==""){if(q==="a"){B.textContent="";continue}if(q.match(w)){let D=C1(B,!0);D.textContent=D.textContent.replace(/\s+$/,"")+"a",S==="telugu"&&d.indexOf(q)>=0&&u.push(B)}if(B===f.lastChild&&B.nodeType===3){let D=document.createElement("span");D.appendChild(B.cloneNode(!1)),f.replaceChild(D,B),B=D,B.classList.add("aalt")}else b&&q.match(O)&&B.classList.add("aalt");switch(S){case"devanagari":(q==="i"||q==="é")&&v.unshift(B);break;case"grantha":case"malayalam":if(q==="e"||q==="ai")v.unshift(B);else if(q==="o"){let D=B.cloneNode(!0);k1("o","e",D),v.unshift(D),k1("o","ā",B)}break;case"telugu":!s&&C.indexOf(q)>=0&&(s=!0);break}}}for(let B of v)f.insertBefore(B,f.firstChild);if(s)for(let B of u){let q=C1(B,!0);q.textContent=q.textContent+"‍్"}},k1=function(f,S,T){let O=document.createTreeWalker(T,NodeFilter.SHOW_TEXT,null,!1);for(;O.nextNode();)O.currentNode.textContent.match(f)&&(O.currentNode.textContent=S)};"use strict";var tn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,115,116,114,105,112,45,115,112,97,99,101,32,101,108,101,109,101,110,116,115,61,34,42,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,47,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,97,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,120,115,108,58,116,101,120,116,62,34,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,45,45,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,33,45,45,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,33,45,45,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,45,45,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),_1=tn;"use strict";var nn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,10,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,32,32,32,32,60,120,115,108,58,111,117,116,112,117,116,32,105,110,100,101,110,116,61,34,121,101,115,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,112,97,114,97,91,99,111,110,116,101,110,116,45,115,116,121,108,101,93,91,110,111,116,40,116,101,120,116,40,41,41,93,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,34,47,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,72,101,97,100,101,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,120,101,110,111,68,97,116,97,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,48,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,60,33,45,45,120,115,108,58,105,102,32,116,101,115,116,61,34,110,111,116,40,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,51,50,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,45,45,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,110,111,100,101,40,41,124,64,42,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,111,112,121,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,115,101,108,101,99,116,61,34,110,111,100,101,40,41,124,64,42,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,111,112,121,62,10,32,32,32,32,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),S1=nn;"use strict";var rn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,105,67,111,114,112,117,115,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,97,98,108,101,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,84,69,73,34,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,116,101,120,116,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,114,101,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,99,111,114,114,101,115,112,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,100,101,110,97,109,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,115,101,108,101,99,116,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,104,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,99,111,112,101,34,62,114,111,119,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,114,97,103,103,97,98,108,101,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,46,46,47,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,116,100,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,97,114,101,110,116,58,58,120,58,99,108,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,39,49,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,115,116,97,114,116,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,112,111,115,105,116,105,111,110,40,41,32,61,32,108,97,115,116,40,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,101,110,100,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,103,114,111,117,112,45,105,110,116,101,114,110,97,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,105,110,115,105,103,110,105,102,105,99,97,110,116,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,105,110,115,105,103,110,105,102,105,99,97,110,116,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,98,105,110,97,114,121,61,39,116,114,117,101,39,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,98,105,110,97,114,121,34,62,116,114,117,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),A1=rn;"use strict";var sn=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,116,114,101,101,45,118,101,114,115,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,108,97,110,103,34,62,101,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,91,118,101,114,115,101,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,93,60,47,120,115,108,58,116,101,120,116,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),P1=sn;"use strict";var an=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,116,101,105,45,99,46,111,114,103,47,110,115,47,49,46,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,104,116,109,108,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,119,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,108,101,109,109,97,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,111,114,109,97,108,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,108,101,109,109,97,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,64,101,109,101,110,100,101,100,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,101,109,101,110,100,101,100,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,101,109,101,110,100,101,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,60,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,119,104,101,110,32,116,101,115,116,61,34,110,111,116,40,110,111,114,109,97,108,105,122,101,45,115,112,97,99,101,40,46,41,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,32,105,110,118,105,115,105,98,108,101,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,120,48,48,65,48,59,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,119,104,101,110,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,101,109,109,97,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,111,116,104,101,114,119,105,115,101,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,99,104,111,111,115,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,116,101,120,116,62,38,35,49,55,51,59,60,47,120,115,108,58,116,101,120,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,99,108,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,114,111,117,112,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,112,98,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,104,114,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,109,103,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,101,100,105,116,98,117,116,116,111,110,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,115,114,99,34,62,101,100,105,116,95,105,99,111,110,46,115,118,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,32,32,32,32,60,104,51,32,99,108,97,115,115,61,34,112,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,104,51,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,98,34,62,10,60,98,114,32,47,62,10,60,115,112,97,110,32,99,108,97,115,115,61,34,108,98,34,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,102,119,34,62,10,60,100,105,118,32,99,108,97,115,115,61,34,102,119,34,62,40,60,105,32,108,97,110,103,61,34,101,110,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,116,121,112,101,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,60,47,105,62,41,58,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,60,47,100,105,118,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,115,116,111,114,121,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,116,111,114,121,34,32,108,97,110,103,61,34,101,110,34,62,40,115,116,111,114,121,32,110,111,46,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,117,109,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,99,105,116,121,34,47,62,44,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,107,105,110,103,34,47,62,41,60,47,115,112,97,110,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,105,118,91,64,116,121,112,101,61,39,118,101,114,115,101,39,93,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,118,101,114,115,101,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,100,101,108,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,100,101,108,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,100,101,108,101,116,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,97,100,100,34,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,112,108,97,99,101,34,32,115,101,108,101,99,116,61,34,64,112,108,97,99,101,34,47,62,10,32,32,32,32,60,120,115,108,58,118,97,114,105,97,98,108,101,32,110,97,109,101,61,34,114,101,110,100,34,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,105,110,115,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,97,100,100,101,100,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,111,114,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,32,40,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,114,101,110,100,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,105,102,32,116,101,115,116,61,34,115,116,114,105,110,103,40,36,114,101,110,100,41,32,97,110,100,32,115,116,114,105,110,103,40,36,112,108,97,99,101,41,34,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,44,32,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,36,112,108,97,99,101,34,47,62,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,60,120,115,108,58,116,101,120,116,62,41,60,47,120,115,108,58,116,101,120,116,62,10,32,32,32,32,32,32,32,32,32,32,32,32,60,47,120,115,108,58,105,102,62,10,32,32,32,32,32,32,32,32,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,115,117,98,115,116,34,62,10,32,32,32,32,60,115,112,97,110,32,99,108,97,115,115,61,34,115,117,98,115,116,34,62,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,32,47,62,60,47,115,112,97,110,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,103,34,62,10,32,32,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,100,97,116,97,45,116,105,116,108,101,34,62,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,114,101,110,100,34,47,62,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,103,97,105,106,105,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,103,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,34,62,10,32,32,60,120,115,108,58,101,108,101,109,101,110,116,32,110,97,109,101,61,34,115,112,97,110,34,62,10,32,32,32,32,60,120,115,108,58,97,116,116,114,105,98,117,116,101,32,110,97,109,101,61,34,99,108,97,115,115,34,62,108,60,47,120,115,108,58,97,116,116,114,105,98,117,116,101,62,10,32,32,32,32,60,120,115,108,58,97,112,112,108,121,45,116,101,109,112,108,97,116,101,115,47,62,10,32,32,60,47,120,115,108,58,101,108,101,109,101,110,116,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),E1=an;"use strict";var on=String.fromCharCode(60,120,115,108,58,115,116,121,108,101,115,104,101,101,116,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,120,109,108,110,115,58,120,115,108,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,88,83,76,47,84,114,97,110,115,102,111,114,109,34,32,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,109,108,110,115,58,120,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,49,57,57,57,47,120,104,116,109,108,34,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,120,99,108,117,100,101,45,114,101,115,117,108,116,45,112,114,101,102,105,120,101,115,61,34,120,34,62,10,60,120,115,108,58,111,117,116,112,117,116,32,109,101,116,104,111,100,61,34,116,101,120,116,34,32,111,109,105,116,45,120,109,108,45,100,101,99,108,97,114,97,116,105,111,110,61,34,121,101,115,34,47,62,10,60,120,115,108,58,116,101,109,112,108,97,116,101,32,109,97,116,99,104,61,34,120,58,108,103,34,62,10,60,120,115,108,58,118,97,108,117,101,45,111,102,32,115,101,108,101,99,116,61,34,64,110,34,47,62,10,60,47,120,115,108,58,116,101,109,112,108,97,116,101,62,10,60,47,120,115,108,58,115,116,121,108,101,115,104,101,101,116,62,10),R1=on;var bt=function(f){let T=new DOMParser().parseFromString(f,"text/xml"),O=new XSLTProcessor;return O.importStylesheet(T),O},L1=function(f){this.transformString=function(S,T){let O=f.xml.createElementNS(f.teins,"ab");return O.innerHTML=S,T.transformToFragment(O,document)},this.sheets={csv:bt(_1),xml:bt(S1),matrix:bt(A1),lemma:bt(E1),lg:bt(R1),tree:bt(P1)}};var B1=function(f){let S={curxml(){return f.xml},teins(){return f.teins},basename(){return f.filename.split(/\.[^.]+$/)[0]},range(w,C){return Array.from(Array(parseInt(C)-parseInt(w)+1).keys(),d=>d+w)},maxlemma(){return[...S.firsttext().querySelectorAll("w[n]")].length-1},lemmata(w,C){let d=C||document.querySelector("#views");return w===!1?d.querySelectorAll(".lemma"):d.querySelectorAll(`.lemma[data-n="${w}"]`)},tds(w,C){let d=C||f.matrix.boxdiv;return w===!1?d.querySelectorAll("td[data-n]"):d.querySelectorAll(`td[data-n="${w}"]`)},firsttd(w,C){return(C||f.matrix.boxdiv).querySelector(`td[data-n="${w}"]`)},tr(w){return f.matrix.boxdiv.querySelector(`tr[data-n="${w}"]`)},trs(w){return(w||f.matrix.boxdiv).querySelectorAll("tr[data-n]")},firsttr(w){return(w||f.matrix.boxdiv).querySelector("tr[data-n]")},lasttr(w){return(w||f.matrix.boxdiv).querySelector("tr[data-n]:last-of-type")},trWalker(w){return document.createNodeIterator(w,NodeFilter.SHOW_ELEMENT,{acceptNode:function(C){if(C.tagName==="TD")return NodeFilter.FILTER_ACCEPT}},!1)},textWalker(w){return document.createNodeIterator(w,NodeFilter.SHOW_ELEMENT,{acceptNode:function(C){if(C.tagName.toLowerCase()==="w")return NodeFilter.FILTER_ACCEPT}},!1)},tei(w,C=f.xml){return C.querySelector(`TEI[n="${w}"]`)},teis(w=f.xml){return w.querySelectorAll("TEI")},texts(w){return(w||f.xml).querySelectorAll("text")},serializedtexts(w,C){let d=[...w.querySelectorAll("otu[label]")].map(u=>u.getAttribute("label"));return[...S.teis()].filter(u=>d.indexOf(u.getAttribute("n"))!==-1).map(u=>[w.querySelector(`node[label="${u.getAttribute("n")}"]`).getAttribute("id"),[...u.querySelectorAll("w")].map(v=>C&&v.hasAttribute("lemma")?v.getAttribute("lemma"):v.textContent)])},serializedlevels(w){return w.map(C=>{if(C instanceof Map){let d=new Map;for(let[s,u]of C)d.set(s.getAttribute("id"),u.map(v=>v.getAttribute("id")));return d}else return C.map(d=>d.getAttribute("id"))})},firsttext(w){return w?f.xml.querySelector(`[n="${w}"] text`):f.xml.querySelector("text")},words(w,C){let d=C||f.xml;return w===!1?d.querySelectorAll("w[n]"):d.querySelectorAll(`w[n="${w}"]`)},firstword(w,C){return(C||f.xml).querySelector(`w[n="${w}"]`)},normal(w){return(w||document.getElementById("views")).querySelectorAll(".lemma[data-normal], .tree-lemma[data-normal]")},htmlreading(w,C){return C&&w.dataset.normal?w.dataset.normal:w.IAST.textContent},ths(){return f.matrix.boxdiv.querySelectorAll("th[data-ref]")},firstth(w){return f.matrix.boxdiv.querySelector(`th[data-ref="${w}"]`)},checkbox(w,C){return f.matrix.boxdiv.querySelector(`th[data-ref="${w}"] input.${C}`)},highlit(){let C=S.firsttr().querySelectorAll(".highlit"),d=new Set;for(let s of C)d.add(s.dataset.n);return d},highlitcell(){return f.matrix.boxdiv.querySelector("td.highlitcell")},highlitrow(){let w=S.highlitcell();return w?w.closest("tr"):!1},lowhigh(w){let C=[...w].sort((u,v)=>parseInt(u)-parseInt(v)),d=parseInt(C[0]),s=C.length>1?parseInt(C[C.length-1]):void 0;return[d,s]},readings(w,C){let d=C||f.matrix.boxdiv,s=S.tds(w,d);var u=0;let v=new Set;for(let b of s){let B=b.textContent;B!==""&&(u++,v.add(B))}return[u,v.size]},attr(w,C){let d=S.firsttr();var s=[];for(let u of C)S.firsttd(u,d).dataset[w]==="true"?s.push([u,!0]):s.push([u,!1]);return new Map(s)},whichattr(w){return w.hasAttribute("n")?"n":w.hasAttribute("data-n")?"data-n":w.hasAttribute("data-ref")?"data-ref":!1},clauses(w,C=!1){let d=S.firsttext();var s=!1;let u=new Set;for(let b of w){let q=S.firstword(b,d).closest("cl");q?u.add(q):C&&(s=!0)}if(u.size===0)return!1;let v=[...u].map(b=>{let B=b.querySelectorAll("w");return new Set([...B].map(q=>q.getAttribute("n")))});return s?[null].concat(v):v},clausesToRemove(w,C,d=0){let s=new Set;for(let u of w){let v=new Set(u);for(let b of C)v.delete(b);v.size<=d&&s.add(u)}return[...s]},empty(){let w=new Set,C=[...S.trs()],d=C.map(v=>S.trWalker(v)),s=C[0].querySelector("td:last-of-type").dataset.n;for(let v=0;v<=s;v++){var u=!0;for(let b of d){let B=b.nextNode();u&&B.textContent!==""&&(u=!1)}u&&w.add(v)}return w},prevNonempty(w,C){for(let d=w;d>=0;d--)if(C[d].textContent!=="")return d;return!1},nextNonempty(w,C){for(let d=w;d<C.length;d++)if(C[d].textContent!=="")return d;return!1},cursorPos(w){let C=window.getSelection().getRangeAt(0),d=C.cloneRange();d.selectNodeContents(w);let s=d.toString().length;return d.setEnd(C.endContainer,C.endOffset),[d.toString().length,s]},selection(){let w=window.getSelection();if(w.isCollapsed)return!1;let C=w.rangeCount>1?w.getRangeAt(1).cloneContents():w.getRangeAt(0).cloneContents();if(!C)return!1;let d=new Set,s=C.querySelectorAll(".lemma");for(let u of s)d.add(u.dataset.n);return d}},T={undo(){return f.undo.length>0},redo(){return f.redo.length>0},checkbox(w,C=null){if(!T.anyhighlit())return!1;let d=C===null?S.highlit():C,s=S.attr(w,d);for(let u of s.values())if(u===!1)return!1;return!0},grouped(){let w=S.highlit();if(!w)return!1;let C=S.firsttr();for(let d of w){let s=S.firsttd(d,C);if(s.classList.contains("group-start")||s.classList.contains("group-internal")||s.classList.contains("group-end"))return!0}return!1},oneGrouped(){let w=S.highlit();if(w.size===0)return!1;if(w.size===1){let C=S.firsttr(),d=S.firsttd([...w][0],C);return!!(d.classList.contains("group-start")||d.classList.contains("group-end")||d.classList.contains("group-internal"))}return!0},anyhighlit(){return!!f.matrix.boxdiv.querySelector("td.highlit")},manyhighlit(){return S.highlit().size>1},highlitcell(){return!!f.matrix.boxdiv.querySelector("td.highlitcell")},normalizedView(){return document.getElementById("views").classList.contains("normalized")},anyNormalized(){return f.matrix.boxdiv.querySelector(".lemma[data-normal]")},headerView(){return f.matrix.boxdiv.querySelector("tr.header").style.display!=="none"}},O={tei:function(w){let C=f.xml.createElementNS(f.teins,"TEI");C.setAttribute("n",w);let d=S.firsttext().cloneNode(!0);C.appendChild(d);for(let s of S.words(!1,d))for(s.removeAttribute("lemma");s.firstChild;)s.firstChild.remove();return C},xmlel:function(w,C=f.xml){return C.createElementNS(f.teins,w)},emptycell:function(w){let C=document.createElement("td");return C.className="lemma",C.dataset.n=w,C},emptyword:function(w,C=f.xml){let d=C.createElementNS(f.teins,"w");return d.setAttribute("n",w),d},emptywords:function(w,C,d){let s=C||f.maxlemma,u=d||0;for(let v=u;v<=s;v++){let b=O.emptyword(v);w.appendChild(b)}},row:function(w,C){let d=document.createElement("tr"),s=document.createElement("th");s.scope="row",s.draggable=!0,s.appendChild(document.createTextNode(w)),d.dataset.n=w,d.appendChild(s);let u=S.firsttr();for(let v of u.querySelectorAll("td")){let b=document.createElement("td");b.dataset.n=v.dataset.n,b.className=v.className,C&&b.classList.add(C),d.appendChild(b)}return d},blackout(w,C){let d=document.createElement("div");d.id="blackout",d.appendChild(w),document.body.appendChild(d);let s=function(b){C(b),d.parentNode.removeChild(d)},u=function(b){if(!b.target.closest(".popup")){let q=document.querySelector("#blackout");q.parentNode.removeChild(q)}};d.querySelector("button").addEventListener("click",s),d.addEventListener("click",u)}};return{find:S,check:T,make:O}};var N1=function(f,S){let T={Intersection:function(...s){let u=s[0];return new Set([...u].filter(v=>{for(let b=1;b<s.length;b++)if(!s[b].has(v))return!1;return!0}))},Union:function(...s){return new Set(s.reduce((u,v)=>(u=[...u,...v],u),[]))}},O=function(s){let u=new Map;for(let v of S[0]){let b=f.get(v),B=b!==void 0?[b]:[];u.set(v,new Set(B))}for(let v=1;v<S.length;v++)for(let[b,B]of S[v]){let q=B.map(L=>u.get(L)),D=T.Intersection(...q);if(s&&b===s&&D.size===1)return[...D][0];let M=D.size>0?D:T.Union(...q);u.set(b,M)}return u},w=function(s,u){let v=S[0],b=new Map;for(let B of S[S.length-1])b.set(B[0],s.get(B[0]));for(let B=S.length-1;B>1;B--)for(let[q,D]of S[B]){let M=b.get(q);for(let L of D){if(v.indexOf(L)!==-1)continue;let W=s.get(L),Y=(()=>{if(W.size===1)return W;let $=T.Intersection(M,W);return $.size>0?$:W})();if(u&&L===u)return Y;b.set(L,Y)}}return u?b.get(u):b},C=function(s=null){let u=O(s);if(typeof u=="string")return u;let v=w(u,s);return s?d(v):new Map(Array.from(v,([b,B])=>[b,d(B,!0)]))},d=function(s,u=!1){if(!u&&s.size===1)return[...s][0].trim();let v=[...s].map(b=>b.trim()===""?"_":b);return v.length===1?v[0]:"{"+v.join(", ")+"}"};return{run:C}};import{showSaveFilePicker as Kt}from"https://cdn.jsdelivr.net/npm/native-file-system-adapter/mod.js";var T1=function(f,S){let T=f.find,O=f.make,w=T.teins(),C={write:async function(d,s){let u=await s.createWritable();u.write(d),u.close()},xml:async function(d){let s=new XMLSerializer().serializeToString(S.sheets.xml.transformToDocument(d)),u=new Blob([s],{type:"text/xml;charset=utf-8"}),v=T.basename()+".xml",b=await Kt({_preferPolyfill:!1,suggestedName:v,types:[{description:"TEI XML",accept:{"text/xml":[".xml"]}}]});C.write(u,b)},csv:async function(d){let s=S.sheets.csv.transformToDocument(d).documentElement.textContent,u=new Blob([s],{type:"text/csv;charset=utf-8"}),v=T.basename()+".csv",b=await Kt({_preferPolyfill:!1,suggestedName:v,types:[{description:"CSV file",accept:{"text/csv":[".csv"]}}]});C.write(u,b)},nexus:async function(d){let s=[...T.texts(d)],u=s.length,v="0 1 2 3 4 5 6 7 8 9 A B C D E F G H K L M N P Q R S T U V W X Y Z a b c d e f g h k l m n p q r s t u v w x y z",[b,...B]=v.split(" "),q="-",D=s.map(oe=>"'"+oe.parentElement.getAttribute("n")+"'"),M=s.map(oe=>T.textWalker(oe)),L=s[0].querySelectorAll("w").length,W=[],Y=D.map(oe=>[oe+" "]);for(let oe=0;oe<L;oe++){let ne=new Set,F=[];for(let de=0;de<M.length;de++){let X=M[de].nextNode(),xe=De.t(X.textContent.trim().toLowerCase(),"iast","hk").replace(/'/g,"()");F.push(xe),xe!==""&&xe!=="[]"&&ne.add(xe)}W.push(["[]",...ne]);let me=new Map([...ne].map((de,be)=>[de,B[be]]));for(let de=0;de<F.length;de++){let be=(X=>{switch(F[X]){case"":return q;case"[]":return b;default:return me.get(F[X])}})(de);Y[de].push(be)}}let $=W.map((oe,ne)=>ne+1+" / "+[...oe].map(F=>`'${F}'`).join(" ")).join(`,
`),j=Y.map(oe=>oe.join("")).map(oe=>oe.replace(/0{8,}/g,ne=>ne.replace(/0/g,"-"))).reduce((oe,ne)=>oe+`
`+ne),se=`#NEXUS

BEGIN TAXA;
  DIMENSIONS NTAX=${u};
  TAXLABELS ${D.join(" ")};
END;

BEGIN CHARACTERS;
  DIMENSIONS
    NCHAR=${L};
  FORMAT 
    DATATYPE=STANDARD 
    RESPECTCASE 
    GAP=${q} 
    MISSING=? 
    SYMBOLS="${v}";
  CHARSTATELABELS
${$}
;
MATRIX
${j}
;
END;
`,ue=new Blob([se],{type:"text/nexus;charset=iso8859-1"}),pe=T.basename()+".nex",U=await Kt({_preferPolyfill:!1,suggestedName:pe,types:[{description:"NEXUS file",accept:{"text/nexus":[".nex"]}}]});C.write(ue,U)},processOptions:function(d){let s=T.curxml().cloneNode(!0);if(d.get("option_normalize")){let u=s.querySelectorAll("w[lemma]");for(let v of u)v.textContent=v.getAttribute("lemma")}if(d.get("option_mergegroups")){let u=s.querySelectorAll("cl");for(let v of u){let b=v.removeChild(v.firstChild);for(;v.firstChild;){let B=b.getAttribute("lemma")||b.textContent,q=v.firstChild.getAttribute("lemma")||v.firstChild.textContent;for(b.setAttribute("lemma",B+q);v.firstChild.firstChild;)b.appendChild(v.firstChild.firstChild);v.firstChild.remove()}b.getAttribute("lemma")===b.textContent&&b.removeAttribute("lemma"),v.parentNode.insertBefore(b,v),v.parentNode.removeChild(v)}}if(d.get("option_insignificant")){let u=s.querySelectorAll('w[insignificant="true"]');for(let v of u)v.parentNode.removeChild(v)}if(d.get("option_binary")){let v=[...T.firsttext().querySelectorAll('w[binary="true"]')].map(b=>b.getAttribute("n"));for(let b of v){let B=s.querySelectorAll(`w[n="${b}"]:not(:empty)`);if(B.length===0)continue;let q=`[${B[0].textContent}]`;for(let D of B)D.textContent=q}}if(d.get("option_noempty")){let u=s.querySelectorAll("w:empty");for(let v of u)v.textContent="[]"}return d.get("option_basetext")?C.makeApp(d,s):s},makeHeader(d,s){let u=d.createElementNS(w,"teiHeader"),v=d.createElementNS(w,"fileDesc"),b=d.createElementNS(w,"sourceDesc"),B=d.createElementNS(w,"msDesc"),q=d.createElementNS(w,"msIdentifier"),D=d.createElementNS(w,"abbr");D.setAttribute("type","siglum"),D.append(d.documentElement.getAttribute("n")),q.appendChild(D),B.appendChild(q),b.appendChild(B);let M=d.createElementNS(w,"listWit");for(let L of T.teis(s)){let W=L.getAttribute("n"),Y=d.createElementNS(w,"witness");Y.setAttribute("xml:id",W);let $=d.createElementNS(w,"abbr");$.setAttribute("type","siglum"),$.append(W),Y.appendChild($),M.appendChild(Y)}return b.appendChild(M),v.appendChild(b),u.appendChild(v),u},makeApp(d,s){let u=d.get("option_basetext"),v=T.tei(u,s),b=d.get("option_app_normalize"),B=document.implementation.createDocument(w,"",null);B.appendChild(v);let q=B.createElementNS(w,"body"),D=B.createElementNS(w,"p"),M=v.querySelector("text");for(;M.firstChild;)D.appendChild(M.firstChild);q.appendChild(D),M.appendChild(q);let L=C.makeHeader(B,s);v.insertBefore(L,v.firstChild);let W=T.words(!1,v);for(let Y of W){let $=Y.getAttribute("n"),j=b&&Y.getAttribute("lemma")||Y.textContent,se=[],ue=new Map,pe=T.words($,s);for(let U of pe){let oe=U.closest("TEI").getAttribute("n");if(b&&U.getAttribute("lemma")===j)se.push(oe);else if(U.textContent===j)se.push(oe);else{let ne=U.textContent===""?"[om.]":U.textContent,F=ue.get(ne)||[];F.push(oe),ue.set(ne,F)}}if(ue.size===0)for(;Y.firstChild;)Y.parentElement.insertBefore(Y.firstChild,Y);else{let U=B.createElementNS(w,"app");U.setAttribute("n",$);let oe=B.createElementNS(w,"lem"),ne=se.map(F=>`#${F}`).join(" ");for(ne!==""&&oe.setAttribute("wit",ne);Y.firstChild;)oe.appendChild(Y.firstChild);U.appendChild(oe);for(let[F,me]of ue){let de=B.createElementNS(w,"rdg"),be=me.map(X=>`#${X}`).join(" ");de.setAttribute("wit",be),de.append(F),U.appendChild(de)}Y.parentElement.insertBefore(U,Y),oe.textContent.match(/\s$/)&&(Y.parentElement.insertBefore(B.createTextNode(" "),Y),oe.textContent=oe.textContent.trimEnd())}Y.remove()}return B},options(){return document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <input type="checkbox" id="option_insignificant" name="option_insignificant"><label for="option_insignificant">Remove insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_binary" name="option_binary"><label for="option_binary">Binarize marked lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_noempty" name="option_noempty"><label for="option_noempty">Gaps are significant</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups"><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`)},appOptions(){let d=document.createRange().createContextualFragment(`<div id="exportoptions" class="popup">
    <form id="exportform">
      <div style="font-weight: bold">Export</div>
      <div>
        <label for="option__basetext">Base text</label>
        <select id="option__basetext" name="option_basetext"></select>
      </div>
      <div>
        <input type="checkbox" id="option__app_insignificant" name="option_app_insignificant"><label for="option_app_insignificant">Ignore insignifiant lemmata</label>
      </div>
      <div>
        <input type="checkbox" id="option_mergegroups" name="option_mergegroups" checked><label for="option_mergegroups">Merge groups</label>
      </div>
      <div>
        <input type="checkbox" id="option_app_normalize" name="option_app_normalize" checked><label for="option_app_normalize">Normalized spellings in positive apparatus</label>
      </div>
      <div>
        <input type="checkbox" id="option_normalize" name="option_normalize"><label for="option_normalize">Normalize spellings in negative apparatus</label>
      </div>
      <div>
        <button type="submit">Export</button>
      </div>
    </form>
</div>`),s=d.getElementById("option__basetext"),u=[...T.trs()].map(v=>v.dataset.n);for(let v of u){let b=document.createElement("option");b.value=v,b.append(v),s.appendChild(b)}return d},showOptions:function(d,s){let u=s(),v=function(b){b.preventDefault();var B=[];let q=document.getElementById("exportform").elements;for(let M of q)M.type==="checkbox"?B.push([M.name,M.checked]):B.push([M.name,M.value]);let D=C.processOptions(new Map(B));d(D)};O.blackout(u,v)}};return C};var M1=function(f){let{find:S,check:T,make:O}=f;return{group:function(d){let s=[...d],u=s.shift(),v=S.texts();for(let B of v){let q=O.xmlel("cl"),D=S.firstword(u,B);D.parentNode.insertBefore(q,D),q.appendChild(D);for(let M of d)q.appendChild(S.firstword(M,B))}let b=s.pop();for(let B of S.tds(u))B.classList.add("group-start");for(let B of S.tds(b))B.classList.add("group-end");for(let B of s)for(let q of S.tds(B))q.classList.add("group-internal")},ungroup:function(d){let s=S.texts();for(let v of s){let b;for(let B of d){let q=S.firstword(B,v);b||(b=q.closest("cl")),b.parentNode.insertBefore(q,b)}b.parentNode.removeChild(b)}let u=[...d].flatMap(v=>[...S.tds(v)]);for(let v of u)v.classList.remove("group-start","group-internal","group-end")}}};function Ht(f){var S=[],T=0;if(this.trie=this.createTrie(f.patterns),this.leftMin=f.leftmin,this.rightMin=f.rightmin,this.exceptions={},f.exceptions)for(S=f.exceptions.split(/,\s?/g);T<S.length;T+=1)this.exceptions[S[T].replace(/\u2027/g,"").toLowerCase()]=new RegExp("("+S[T].split("‧").join(")(")+")","i")}Ht.prototype.createTrie=function(f){var S=0,T=0,O=0,w=0,C=null,d=null,s=null,u=null,v={_points:[]},b;for(S in f)if(f.hasOwnProperty(S))for(b=f[S].match(new RegExp(".{1,"+ +S+"}","g")),T=0;T<b.length;T+=1){for(C=b[T].replace(/[0-9]/g,"").split(""),d=b[T].split(/\D/),u=v,O=0;O<C.length;O+=1)s=C[O].charCodeAt(0),u[s]||(u[s]={}),u=u[s];for(u._points=[],w=0;w<d.length;w+=1)u._points[w]=d[w]||0}return v};Ht.prototype.hyphenateText=function(f,S){S=S||4;for(var T=f.split(/([a-zA-Z0-9_\u0027\u00AD\u00DF-\u00EA\u00EB\u00EC-\u00EF\u00F1-\u00F6\u00F8-\u00FD\u0101\u0103\u0105\u0107\u0109\u010D\u010F\u0111\u0113\u0117\u0119\u011B\u011D\u011F\u0123\u0125\u012B\u012F\u0131\u0135\u0137\u013C\u013E\u0142\u0144\u0146\u0148\u0151\u0153\u0155\u0159\u015B\u015D\u015F\u0161\u0165\u016B\u016D\u016F\u0171\u0173\u017A\u017C\u017E\u017F\u0219\u021B\u02BC\u0390\u03AC-\u03CE\u03F2\u0401\u0410-\u044F\u0451\u0454\u0456\u0457\u045E\u0491\u0531-\u0556\u0561-\u0587\u0902\u0903\u0905-\u090B\u090E-\u0910\u0912\u0914-\u0928\u092A-\u0939\u093E-\u0943\u0946-\u0948\u094A-\u094D\u0982\u0983\u0985-\u098B\u098F\u0990\u0994-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BE-\u09C3\u09C7\u09C8\u09CB-\u09CD\u09D7\u0A02\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A14-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A82\u0A83\u0A85-\u0A8B\u0A8F\u0A90\u0A94-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABE-\u0AC3\u0AC7\u0AC8\u0ACB-\u0ACD\u0B02\u0B03\u0B05-\u0B0B\u0B0F\u0B10\u0B14-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3E-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B57\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C02\u0C03\u0C05-\u0C0B\u0C0E-\u0C10\u0C12\u0C14-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C43\u0C46-\u0C48\u0C4A-\u0C4D\u0C82\u0C83\u0C85-\u0C8B\u0C8E-\u0C90\u0C92\u0C94-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBE-\u0CC3\u0CC6-\u0CC8\u0CCA-\u0CCD\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D7A-\u0D7F\u1F00-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB2-\u1FB4\u1FB6\u1FB7\u1FBD\u1FBF\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD2\u1FD3\u1FD6\u1FD7\u1FE2-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u200D\u2019]+)/gi),O=0;O<T.length;O+=1)T[O].indexOf("/")!==-1?O!==0&&O!==T.length-1&&!/\s+\/|\/\s+/.test(T[O])&&(T[O]+="​"):T[O].length>S&&(T[O]=this.hyphenate(T[O]).join("­"));return T.join("")};Ht.prototype.hyphenate=function(f){var S,T=[],O,w,C,d,s,u=[],v,b=f.toLowerCase(),B,q,D=Math.max,M=this.trie,L=[""];if(this.exceptions.hasOwnProperty(b))return f.match(this.exceptions[b]).slice(1);if(f.indexOf("­")!==-1)return[f];for(f="_"+f+"_",S=f.toLowerCase().split(""),O=f.split(""),v=S.length,w=0;w<v;w+=1)u[w]=0,T[w]=S[w].charCodeAt(0);for(w=0;w<v;w+=1)for(s=M,C=w;C<v&&(s=s[T[C]],s);C+=1)if(B=s._points,B)for(d=0,q=B.length;d<q;d+=1)u[w+d]=D(u[w+d],B[d]);for(w=1;w<v-1;w+=1)w>this.leftMin&&w<v-this.rightMin&&u[w]%2?L.push(O[w]):L[L.length-1]+=O[w];return L};var ln=Ht,I1=ln;var D1={id:"sa",leftmin:2,rightmin:2,patterns:{2:"a1e1i1o1u1é1í1ï1ó1ú1ü1ā1ī1ū1ḷ1ḹ1ṛ1ṝ1",3:"2b_2c_2d_2g_2h_2j_2k_2l_2m_2n_2p_2r_2s_2t_2v_2y_2ñ_2ś_2ḍ_2ḥ12ḫ12ḷ_2ṁ12ṃ12ṅ_2ṇ_2ṭ_2ẖ1l̥1r̥1",4:"2bh_2ch_2dh_2gh_2jh_2kh_2m̐12ph_2rb_2rd_2rg_2rk_2rp_2rt_2rḍ_2rṭ_2th_2ḍh_2ṭh_a2i1a2u1a3ï1a3ü1l̥̄1r̥̄1"}};window.comboView=function(){let f={teins:"http://www.tei-c.org/ns/1.0",scripts:["iast","devanagari","telugu","grantha","malayalam"],filename:null,xml:null,treelist:new Map,trees:[],textboxes:[],matrix:null,viewdiv:null,descs:null,maxlemma:null,windows:[window],dragged:null,undo:[],redo:[],editing:!1},S=new I1(D1),T=new L1(f),O=new B1(f),w=new M1(O),C=new T1(O,T),{find:d,check:s,make:u}=O,v=function(){let a=document.getElementById("tooltip");a&&a.remove()},b={matrix:function(){return f.matrix=new ee,f.matrix.init(),f.matrix.show(),document.getElementById("matrixmenu").style.display="none",B(),L.rehighlight(),f.matrix},text:function(a){let l=new Ce(a);return f.textboxes.push(l),l.init(),l.show(),B(),L.rehighlight(),document.querySelector(".highlit")||ne.textClick({target:l.boxdiv.querySelector(".lemma:not(.invisible)")}),l},tree:function(a,l){let p=new xe(a,l);return f.trees.push(p),p.init(),p.show(),B(),L.rehighlight(),p}},B=function(){for(let a of f.trees)a.draw()},q=function(){let a=window.getSelection?window.getSelection():document.selection;a&&(a.removeAllRanges?a.removeAllRanges():a.empty&&a.empty())},D=function(a){let l=document.createTreeWalker(a,NodeFilter.SHOW_TEXT);for(;l.nextNode();){let p=M(l.currentNode.nodeValue);l.currentNode.nodeValue=p}},M=function(a){return S.hyphenateText(a.replace(/ \|/g," |").replace(/\| (?=\d)/g,"| ").replace(/\|\|/g,"॥").replace(/\|/g,"।"))},L={getAllWindows:function(){return window.mainWindow?window.mainWindow.comboView.getWindows():f.windows},forEachWindow:function(a){let l=L.getAllWindows();for(let p of l)if(!p.closed&&a(p)===!1)break},highlightLemma:function(a,l){var p=!!l;L.forEachWindow(n=>{let r=n.comboView.getViewdiv().querySelectorAll('[data-n="'+a+'"]');for(let h of r)(!p||!h.classList.contains("invisible"))&&h.classList.add("highlit");let i=n.comboView.getViewdiv().querySelectorAll('[data-n-trans="'+a+'"]');for(let h of i)h.classList.add("translit")})},highlightRange:function(a){if(!a||a.size===0)return;L.unHighlightAll();let[l,p]=d.lowhigh(a);if(p!==void 0)for(let n=l;n<=p;n++)L.highlightLemma(n,!0);else L.highlightLemma(l);L.repopulateTrees(l,p);for(let n of f.viewdiv.querySelectorAll(".text-box"))n.querySelector(".highlit")||n.querySelector('[data-n="'+l+'"]').classList.add("highlit");me.xScroll(l)},highlightAll:function(){s.anyhighlit()?L.unHighlightAll():L.highlightRange(new Set([0,d.maxlemma()]))},unHighlightAll:function(){L.forEachWindow(a=>{let l=a.comboView.getViewdiv().querySelectorAll(".highlit");for(let n of l)n.classList.remove("highlit");let p=a.comboView.getViewdiv().querySelectorAll(".translit");for(let n of p)n.classList.remove("translit");L.unCelllightAll()})},unCelllightAll:function(){L.forEachWindow(a=>{let l=a.comboView.getViewdiv().querySelectorAll(".highlitcell");for(let p of l)p.classList.remove("highlitcell")})},rehighlight:function(){var a;if(L.forEachWindow(p=>{if(a=p.document.querySelectorAll(".highlit"),a.length>0)return!1}),a.length>0){var l=new Set;for(let p of a)l.add(p.dataset.n);L.highlightRange(l)}},clearTrees:function(){L.forEachWindow(a=>{let l=a.comboView.getTrees();for(let p of l)p.clearlemmata()})},repopulateTrees:function(a,l){L.forEachWindow(p=>{let n=p.comboView.getTrees();for(let r of n)r.populate(a,l),r.colourizeVariants(a,l),r.updatescript()})},highlightTreeLemma:function(a){L.forEachWindow(l=>{let p=l.comboView.getTrees();for(let n of p){let r=n.boxdiv.querySelector('.tree-lemma[data-id="'+a+'"]'),i=n.boxdiv.querySelectorAll(".tree-lemma");for(let h of i)(r.dataset.nodes&&h.dataset.nodes===r.dataset.nodes||!r.dataset.nodes&&h.dataset.id===r.dataset.id)&&h.classList.add("highlit");n.clearLabels()}})},unhighlightTrees:function(){L.forEachWindow(a=>{let l=a.comboView.getViewdiv().querySelectorAll(".tree-lemma.highlit");for(let n of l)n.classList.remove("highlit");let p=a.comboView.getTrees();for(let n of p)n.clearLabels()})}},W=function(a,l){let p=l.target.files[0],n=[...l.target.files].slice(1),r=new FileReader;r.onload=a.bind(null,p,n),r.readAsText(p)},Y=function(a,l,p){f.filename=a.name,document.title=document.title+`: ${f.filename}`,f.filename.split(".").pop()==="csv"?se(a,l,p):ue(a,l,p)},$=function(a,l,p){let n=p.target.result,i=new DOMParser().parseFromString(n,"text/xml"),h=f.xml.querySelector("teiHeader > xenoData")||function(){let x=f.xml.querySelector("teiHeader")||function(){let I=u.xmlel("teiHeader");return f.xml.documentElement.appendChild(I),I}(),A=u.xmlel("xenoData");return x.appendChild(A),A}(),g=u.xmlel("stemma");g.setAttribute("format","nexml"),g.id="stemma"+[...h.querySelectorAll("stemma")].length,g.appendChild(i.firstChild.cloneNode(!0)),h.appendChild(g),j(i,g.id)},j=function(a,l,p=!0){let n=a.querySelectorAll("tree"),r=document.querySelector("#treemenu ul");for(let i of n){let h=i.id,g=a.cloneNode(!0);for(let I of g.querySelectorAll("tree"))I.id!==h&&I.parentNode.removeChild(I);let x=i.getAttribute("label")||"New Tree "+f.treelist.size;f.treelist.set(`#${l} #${h}`,g);let A=document.createElement("li");A.dataset.name=x,A.dataset.treeid=h,A.dataset.stemmaid=l,A.appendChild(document.createTextNode(x)),r.insertBefore(A,r.lastElementChild),p&&b.tree(l,h)}},se=function(a,l,p){let n=Jt.parse(p.target.result,{delimiter:","});f.xml=document.implementation.createDocument(f.teins,"",null);let r=u.xmlel("teiCorpus"),i=u.xmlel("teiHeader");r.appendChild(i),f.xml.appendChild(r);for(let h of n){let g=h[0],x=h.slice(1),A=u.xmlel("TEI");A.setAttribute("n",g);let I=u.xmlel("text");for(let N=0;N<x.length;N++){let V=x[N],G=u.xmlel("w");V&&G.appendChild(document.createTextNode(V)),G.setAttribute("n",N),I.appendChild(G)}A.appendChild(I),r.appendChild(A)}f.xml.normalize(),f.maxlemma=d.maxlemma(),oe()},ue=function(a,l,p){let n=new DOMParser;f.xml=n.parseFromString(p.target.result,"text/xml");let r=f.xml.querySelectorAll("teiHeader xenoData stemma nexml");for(let i of r){let h=document.implementation.createDocument("http://www.nexml.org/2009","",null);h.appendChild(i.cloneNode(!0)),j(h,i.closest("stemma").id,!1)}f.maxlemma=d.maxlemma(),l.length>0?pe(l):oe()},pe=function(a){let l=a[0],p=a.slice(1),n=function(h,g){let x=new Set(h);for(let A of g)x.delete(A);return x},r=function(h,g){let A=new DOMParser().parseFromString(g.target.result,"text/xml"),I=new Map;for(let Se of d.teis()){let Ae=Se.getAttribute("n");I.set(Ae,Se)}let N=new Set(I.keys()),V=new Map;for(let Se of A.querySelectorAll("TEI")){let Ae=Se.getAttribute("n");V.set(Ae,Se)}let G=new Set(V.keys()),re=n(N,G),ge=n(G,N);for(let Se of ge)u.tei(Se);let ye=[...A.querySelector("text").querySelectorAll("w[n]")].length,ve=f.maxlemma+ye;for(let[Se,Ae]of V)if(I.has(Se)){let ke=I.get(Se).querySelector("text"),Me=Ae.querySelector("text").querySelectorAll("w[n]");var _e=f.maxlemma+1;for(let Ie of Me)Ie.setAttribute("n",_e),ke.appendChild(Ie),_e=_e+1}else{let ke=u.xmlel("TEI");ke.setAttribute("n",Se);let Le=u.xmlel("text");u.emptywords(Le,ve,0),ke.appendChild(Le),f.xml.documentElement.appendChild(ke)}for(let Se of re){let Ae=I.get(Se).querySelector("text");u.emptywords(Ae,ve,f.maxlemma+1)}f.maxlemma=d.maxlemma(),h.length>0?pe(h):oe()},i=new FileReader;i.onload=r.bind(null,p),i.readAsText(l)},U=function(){var a="";let l=[...d.teis()].map(p=>p.getAttribute("n"));for(let p of l)a+=`<li data-name="${p}">${p}</li>`;document.getElementById("menu").querySelector(".ms").innerHTML=a},oe=function(){U();let a=new be("Export");a.populate([{text:"TEI corpus",func:C.showOptions.bind(null,C.xml,C.options)},{text:"TEI apparatus",func:C.showOptions.bind(null,C.xml,C.appOptions)},{text:"CSV",func:C.showOptions.bind(null,C.csv,C.options)},{text:"NEXUS",func:C.showOptions.bind(null,C.nexus,C.options)}]);let l=new be("Edit");l.populate([{text:"Undo",greyout:s.undo,func:F.undo},{text:"Redo",greyout:s.redo,func:F.redo},{text:"Select all",alt:"Deselect all",toggle:s.anyhighlit,func:L.highlightAll},{text:"Group all words",func:F.doGroupWords},{text:"Delete empty columns",func:F.startRemoveEmpty}]);let p=new be("Column");p.populate([{text:"(Re)normalize column",alt:"(Re)normalize columns",greyout:s.anyhighlit,toggle:s.manyhighlit,func:F.startRenormalize.bind(null,!1)},{text:"Delete column",alt:"Delete columns",greyout:s.anyhighlit,toggle:s.manyhighlit,func:F.removeCol.start.bind(null,!1)},{text:"Merge columns",greyout:s.manyhighlit,func:F.startMerge.bind(null,!1)},{text:"Group columns",alt:"Ungroup columns",greyout:s.oneGrouped,toggle:s.grouped,func:F.group.start.bind(null,!1)},{text:"Insert column",greyout:s.anyhighlit,func:F.insertCol.start},{text:"Mark insignificant",checkbox:s.checkbox.bind(null,"insignificant"),greyout:s.anyhighlit,func:F.startMarkAs.bind(null,"insignificant",!1)},{text:"Mark binary",checkbox:s.checkbox.bind(null,"binary"),greyout:s.anyhighlit,func:F.startMarkAs.bind(null,"binary",!1)}]);let n=new be("Row");n.populate([{text:"Insert row",func:F.startNewRow}]);let r=new be("Cell");r.populate([{text:"Edit cell",greyout:s.highlitcell,func:F.startEditCell.bind(null,!1)}]);let i=new be("View");i.populate([{text:"Header",checkbox:s.headerView,func:me.toggleHeader},{text:"Normalized",checkbox:s.normalizedView,greyout:s.anyNormalized,func:me.toggleNormalize}]);let h=document.getElementById("left_menu");h.appendChild(i.box),h.appendChild(l.box),h.appendChild(p.box),h.appendChild(n.box),h.appendChild(r.box),h.appendChild(a.box);let g=document.getElementById("views");g.style.justifyContent="flex-start",g.removeChild(g.querySelector("#splash")),b.matrix();let x=document.getElementById("matrixmenu");x.addEventListener("click",b.matrix),x.removeChild(x.querySelector("ul")),document.getElementById("mssmenu").style.display="block",document.getElementById("treemenu").style.display="block"},ne={selectAll(a){let l=document.createRange();l.selectNodeContents(a);let p=window.getSelection();p.removeAllRanges(),p.addRange(l)},deselect(){let a=window.getSelection();a.removeAllRanges?a.removeAllRanges():a.empty&&a.empty()},treeMouseover(a){let l=a.target.classList.contains("tree-lemma")?a.target:a.target.closest(".tree-lemma");l&&(L.highlightTreeLemma(l.dataset.id),l.addEventListener("mouseout",L.unhighlightTrees));let p=a.target.dataset.reconstructed;if(!p)return;let n=document.createElement("div");n.id="tooltip",n.style.top=a.pageY+"px",n.style.left=a.pageX+"px",n.style.opacity=0,n.style.transition="opacity 0.2s ease-in",f.viewdiv.parentElement.appendChild(n);let r=document.createElement("div");if(r.appendChild(document.createTextNode(p)),this.script!==0?n.appendChild(Ot(r,f.scripts[this.script])):n.appendChild(r),a.target.classList.contains("reconstructed")){let i=a.target.parentNode.querySelector("span.tree-lemma");if(i&&i.dataset.hasOwnProperty("emended")){let h=document.createElement("div");h.classList.add("emphasis"),h.appendChild(document.createTextNode(i.textContent)),this.script!==0?n.prepend(Ot(h,f.scripts[this.script])):n.prepend(h)}}window.getComputedStyle(n).opacity,n.style.opacity=1,a.target.addEventListener("mouseout",v)},treeClick(a){a.target.classList.contains("witness")?b.text(a.target.dataset.key):a.target.classList.contains("reconstructed")?b.text(a.target.dataset.label):a.target.classList.contains("internal")&&F.startReconstruction(a),v()},keyDown(a){if(!f.editing&&a.key.substring(0,5)==="Arrow")ne.cycleVariant(a);else if(a.ctrlKey||a.metaKey)a.key==="Z"?F.redo():a.key==="z"&&F.undo();else if(!f.editing&&f.matrix&&!f.matrix.closed&a.key==="Enter"){let l=d.highlitcell();l&&(a.preventDefault(),F.startEditCell(l))}},cycleVariant(a){let l=d.highlitcell()||f.viewdiv.querySelector("td.highlit")||f.viewdiv.querySelector('td[data-n="0"]');switch(a.key){case"ArrowRight":{if(!f.matrix.closed&&l){let p=l.nextElementSibling;p&&ne.textClick({target:p})}else{let p=f.viewdiv.querySelector(".highlit"),n=p?p.dataset.n:0,r=parseInt(n)+1;for(;r<=f.maxlemma;){let i=f.viewdiv.querySelectorAll('[data-n="'+r+'"]');for(let h of i)if(h&&!h.classList.contains("invisible")){ne.textClick({target:h});return}r++}}break}case"ArrowLeft":{if(!f.matrix.closed&&l){let p=l.previousElementSibling;p&&ne.textClick({target:p})}else{let p=f.viewdiv.querySelector(".highlit"),n=p?p.dataset.n:0,r=parseInt(n)-1;for(;r>=0;){let i=f.viewdiv.querySelectorAll('[data-n="'+r+'"]');for(let h of i)if(h&&!h.classList.contains("invisible")){ne.textClick({target:h});return}if(r--,l){ne.textClick({target:l.previousElementSibling});return}}}break}case"ArrowUp":{if(f.matrix.closed||!l)return;let n=l.closest("tr").previousElementSibling;if(!n||!n.dataset.n)return;let r=n.querySelector(`td[data-n="${l.dataset.n}"]`);ne.textClick({target:r});break}case"ArrowDown":{if(f.matrix.closed||!l)return;let n=l.closest("tr").nextElementSibling;if(!n||n.tagName!=="TR")return;let r=n.querySelector(`td[data-n="${l.dataset.n}"]`);ne.textClick({target:r})}}},textClick(a,l=!1){if(a.target.closest("tr.header")){ne.matrixHeaderClick(a);return}let p=a.target.classList.contains("lemma")?a.target:a.target.closest(".lemma");if(p){if(!l&&a.ctrlKey){ne.rightClick(a);return}let n=p.dataset.n,r=d.highlitrow();if(L.unHighlightAll(),L.highlightLemma(n),L.repopulateTrees(n),me.xScroll(n,r),p.tagName==="TD")p.classList.add("highlitcell");else{let i=p.closest(".text-box");if(i){let h=i.dataset.id;d.tr(h).querySelector(`td[data-n="${n}"]`).classList.add("highlitcell")}}}},textMouseup(){let a=d.selection();!a||(L.highlightRange(a),q())},menuMouseover(a){let l=a.target.classList.contains("menubox")?a.target:a.target.closest(".menubox");if(l){let p=l.querySelector("ul");p&&(p.style.display="block"),l.classList.add("open")}},menuMouseout(a){let l=a.target.classList.contains("menubox")?a.target:a.target.closest(".menubox");if(l){let p=l.querySelector("ul");p&&(p.style.display="none"),l.classList.remove("open")}},menuClick(a){!a.target.parentElement||(a.target.parentElement.className==="ms"&&(ne.menuMouseout(a),b.text(a.target.dataset.name)),a.target.parentElement.className==="tree"&&(ne.menuMouseout(a),a.target.closest("li[data-name]")&&b.tree(a.target.dataset.stemmaid,a.target.dataset.treeid)))},thDragStart(a){!a.target.closest('th[scope="row"]')||(a.dataTransfer.setData("text/plain",a.target.textContent),F.startMoveRow(a.target.parentNode,a))},trDragEnter(a){let l=a.target.nodeType===1?a.target.closest("tr"):a.target.parentElement.closest("tr");l&&l.classList.add("dragenter")},trDragLeave(a){let l=a.target.nodeType===1?a.target.closest("tr"):a.target.parentElement.closest("tr");l&&l.classList.remove("dragenter")},trDragDrop(a){a.preventDefault(),F.finishMoveRow(a)},matrixMousedown(a){if(a.button!==0)return;if(a.ctrlKey){ne.rightClick(a);return}let l=a.target.nodeType===1?a.target.closest(".lemma"):a.target.parentElement.closest(".lemma");if(l){if(l.isContentEditable)return;L.unHighlightAll(),L.highlightLemma(l.dataset.n);let p=f.matrix.boxdiv.querySelector("table");p.addEventListener("mouseover",ne.matrixMouseover),p.addEventListener("mouseup",ne.matrixMouseup)}},matrixMouseup(a){let l=d.highlit();l.size===1?ne.textClick(a):L.highlightRange(l);let p=f.matrix.boxdiv.querySelector("table");p.removeEventListener("mouseover",ne.matrixMouseover),p.removeEventListener("mouseup",ne.matrixMouseup)},matrixMouseover(a){let l=a.target.nodeType===1?a.target.closest(".lemma"):a.target.parentElement.closest(".lemma");l&&L.highlightLemma(l.dataset.n)},matrixHeaderClick(a){if(a.target.tagName!=="INPUT")return;let l=a.target.className;if(l!=="insignificant"&&l!=="binary")return;let p=a.target.closest("th").dataset.ref,n=d.firsttd(p).dataset[l]!=="true",r=new Map([[p,n]]);F.doMarkAs(l,r)},rightClick(a){let l=a.target.nodeType===1?a.target.closest("tr[data-n] th"):a.target.parentElement.closest("tr[data-n] th");if(l){a.preventDefault(),de.remove();let n=de.create(a),r=[{text:"move row",func:F.startMoveRow.bind(null,l.parentNode)},{text:"delete row",func:F.doDeleteRow.bind(null,l.parentNode.dataset.n)}];de.populate(n,r),de.show(n);return}let p=a.target.nodeType===1?a.target.closest("td.lemma"):a.target.parentElement.closest("td.lemma");if(p){a.preventDefault();let n=p.classList.contains("highlit")?function(){let h=d.highlit();return h.size===1&&!p.classList.contains("highlitcell")&&(L.unCelllightAll(),p.classList.add("highlitcell")),h}():(ne.textClick(a,!0),new Set([p.dataset.n])),r=n.size>1?[{text:"merge columns",func:F.startMerge.bind(null,n)},{text:"ungroup columns",alt:"group columns",toggle:s.grouped,func:F.group.start.bind(null,!1)},{text:"delete columns",func:F.removeCol.start.bind(null,n)}]:[{text:"edit cell",func:F.startEditCell.bind(null,p)},{text:"delete column",func:F.removeCol.start.bind(null,n)},{text:"insert column",func:F.insertCol.start}];de.remove();let i=de.create(a);de.populate(i,r),de.show(i)}}},F={undo:function(){let a=f.undo.pop();a&&a[0](...a[1])},redo:function(){let a=f.redo.pop();a&&a[0](...a[1])},doStack:function(a,l="do"){l==="undo"?(a[1].push("redo"),f.redo.push(a)):l==="redo"?(a[1].push("undo"),f.undo.push(a)):(a[1].push("undo"),f.undo.push(a),f.redo=[])},doMulti:function(a,l){let p=[];for(let n of a){let r=n[0](...n[1],"multido");p.unshift(r)}F.doStack([F.doMulti,[p]],l)},startMoveRow:function(a,l){if(f.dragged=a,f.dragged.classList.add("dragging"),l.type!=="dragstart"){for(let p of d.trs())p.classList.add("moveinprogress");f.matrix.boxdiv.querySelector("table").addEventListener("mousedown",F.finishMoveRow)}},startMerge:function(a){let l=a===!1?d.highlit():a,p=d.clauses(l,!0);if(!p)F.doMerge(l,"do");else if(p[0]===null){let n=p.filter(r=>r!==null).map(r=>[F.ungroup.go,[r]]).concat([[F.doMerge,[l]]]);F.doMulti(n,"do")}else{let n=p.map(r=>[F.ungroup.go,[r]]).concat([[F.doMerge,[l]]]);F.doMulti(n,"do")}},group:{start:function(a){let l=a===!1?d.highlit():a;s.grouped()?F.ungroup.start(l):F.group.go(l,"do")},go:function(a,l="do"){w.group(a);for(let p of f.textboxes)p.refresh();if(l==="multido")return[F.ungroup.go,[a]];F.doStack([F.ungroup.go,[a]],l)}},ungroup:{start:function(a){let p=[...d.clauses(a)].map(n=>[F.ungroup.go,[n]]);F.doMulti(p,"do")},go:function(a,l="do"){w.ungroup(a);for(let p of f.textboxes)p.refresh();if(l==="multido")return[F.group.go,[a]];F.doStack([F.group.go,[a]],l)}},insertCol:{start:function(){let a=Math.max([...d.highlit()])||f.maxlemma;F.insertCol.go({mode:"append",start:a})},go:function(a,l="do"){let p=function(i,h,g,x){let A=i();for(var I=0;I<A.length;I++){let N=h(a.start,A[I]);if(a.mode==="append")if(g)for(let V of g[I].reverse())N.insertAdjacentElement("afterend",V);else{let V=x(a.start+1);N.insertAdjacentElement("afterend",V)}else if(g)for(let V of g[I])N.insertAdjacentElement("beforebegin",V);else{let V=x(a.start);N.insertAdjacentElement("beforebegin",V)}}return g?g[0].length:1};L.unHighlightAll();var n;a.hasOwnProperty("xml")?(p(...a.xml),n=p(...a.html)):(p(d.trs,d.firsttd,null,u.emptycell),p(d.texts,d.firstword,null,u.emptyword),n=1);let r=a.mode==="append"?[...Array(n).keys()].map(i=>a.start+i+1):[...Array(n).keys()].map(i=>a.start+i);if(F.renumber(a.start),L.highlightRange(new Set(r)),F.refresh(),F.reIAST(r),F.restyleGroups(r,!0),me.updateAllHeaders(),l==="multido")return[F.removeCol.go,[r]];F.doStack([F.removeCol.go,[r]],l)}},removeCol:{start:function(a){let l=a===!1?d.highlit():a,p=d.clauses(l);if(console.log(p),!p)F.removeCol.go(l,"do");else{let n=p.map(r=>[F.ungroup.go,[r]]).concat([[F.removeCol.go,[l]]]);F.doMulti(n,"do")}},go:function(a,l="do"){let p=function(I,N){let V=I(),G=[];for(let re of V){let ge=[...a].map(ve=>{let _e=N(ve,re);return F.unnormalize(_e),_e}),ye=ge.map(ve=>ve.cloneNode(!0));G.push(ye);for(let ve of ge)ve.parentNode.removeChild(ve)}return[I,N,G]},n={mode:"insert"},r=[...a].map(I=>parseInt(I)),i=Math.min(...a),h=Math.max(...a);d.firstword(h).nextElementSibling||(n.mode="append");let x=p(d.trs,d.firsttd),A=p(d.texts,d.firstword);if(F.renumber(i-1),F.refresh(),F.restyleGroups(a,!0),me.updateAllHeaders(),n.html=x,n.xml=A,n.mode==="append"?n.start=i-1:n.start=i,l==="multido")return[F.insertCol.go,[n]];F.doStack([F.insertCol.go,[n]],l)}},startRemoveEmpty:function(){let a=d.empty(),l=d.clauses(a);if(!l)F.removeCol.go(a,"do");else{let p=d.clausesToRemove(l,a,1);if(!p)F.removeCol.go(a,"do");else{let n=p.map(r=>[F.ungroup.go,[r]]).concat([[F.removeCol.go,[a]]]);F.doMulti(n,"do")}}},startEditCell:function(a){let l=a||d.highlitcell();!l||(F.unnormalize(l),l.dataset.oldContent=l.textContent,l.contentEditable="true",l.focus(),f.editing=!0,ne.selectAll(l),l.addEventListener("blur",F.finishEditCell),l.addEventListener("keydown",F.cellKeyDown))},cellKeyDown:function(a){switch(a.key){case"Enter":F.finishEditCell(a);break;case"Escape":F.finishEditCell(a,!0);break;case"ArrowRight":{let l=d.cursorPos(a.target);l[0]===l[1]&&(a.preventDefault(),F.finishEditCell(a),ne.cycleVariant({key:"ArrowRight"}),F.startEditCell(d.highlitcell()));break}case"ArrowLeft":{d.cursorPos(a.target)[0]===0&&(a.preventDefault(),F.finishEditCell(a),ne.cycleVariant({key:"ArrowLeft"}),F.startEditCell(d.highlitcell()));break}}},startMarkAs:function(a,l,p){let n=p.target.tagName==="INPUT"?p.target:p.target.querySelector("input"),r=l===!1?d.highlit():l,i=new Map([...r].map(h=>[h,!n.checked]));F.doMarkAs(a,i)},startNewRow:function(){let a=u.row("new row"),l=a.querySelector("th");l.contentEditable=!0,l.addEventListener("blur",F.finishNewRow),l.addEventListener("keydown",F.thKeyDown),f.matrix.boxdiv.querySelector("tbody").appendChild(a),l.scrollIntoView(),l.focus(),document.execCommand("selectAll",!1,null),f.editing=!0},startRenameRow:function(){},startReconstruction:function(a){let l=a.target.dataset.key,p=a.target.closest(".tree-box").myTree,n=p.desc,r=document.createRange().createContextualFragment(`<div id="reconstructionoptions" class="popup">
    <form id="reconstructionform">
      <div>
        <label for="reconstructed_node_name">Label for node:</label>
        <input type="text" id="reconstructed_node_name" name="reconstructed_node_name" placeholder="${n}-${l}" size="15">
      </div>
      <div style="width: 100%; display: flex; justify-content: center;padding-top: 1em;">
        <button type="submit">Add to matrix</button>
      </div>
    </form>
</div>`),i=function(h){h.preventDefault();let g=blackout.querySelector("input"),x=g.value?g.value:g.placeholder;F.doReconstruction(p,l,x)};u.blackout(r,i),document.getElementById("reconstructed_node_name").focus()},thKeyDown:function(a){a.key==="Enter"&&F.finishNewRow(a)},finishNewRow:function(a){let l=a.target,p=l.textContent;l.closest("tr").dataset.n=p;let n=u.tei(p);f.xml.documentElement.appendChild(n),f.editing=!1,l.contentEditable=!1,l.removeEventListener("blur",F.finishNewRow),l.removeEventListener("keydown",F.thKeyDown),F.doStack([F.doDeleteRow,[p]],"do")},finishEditCell:function(a,l=!1){let p=a.target;f.editing=!1,p.contentEditable="false",p.removeEventListener("blur",F.finishEditCell),p.removeEventListener("keydown",F.cellKeyDown),p.blur(),ne.deselect();let n=p.textContent;if(n===""){let g=p.querySelector("br");g&&g.remove()}if(l||n===p.dataset.oldContent)return;p.hasOwnProperty("IAST")||(p.IAST=p.cloneNode(!0)),p.IAST.textContent=n;let r=parseInt(p.dataset.n),i=p.closest("tr"),h=i.dataset.n;if(F.xmlChangeCell(r,h,n),i.dataset.hasOwnProperty("treename")&&!p.dataset.hasOwnProperty("emended")){let g=F.doEmend(r,h,"multido"),x=[];x.push([F.doChangeCell,[r,h,p.dataset.oldContent]]),x.push(g),F.doStack([F.doMulti,[x]],"do")}else F.doStack([F.doChangeCell,[r,h,p.dataset.oldContent]],"do");delete p.dataset.oldContent,F.refresh(),me.updateAllHeaders(!0),p.classList.add("highlitcell")},finishMoveRow:function(a){let l=a.target.nodeType===1?a.target.closest("tr"):a.target.parentElement.closest("tr");if(l&&F.doMoveRow(f.dragged,l,"do"),a.type!=="drop"){for(let p of d.trs())p.classList.remove("moveinprogress");f.matrix.boxdiv.querySelector("table").removeEventListener("mousedown",F.finishMoveRow)}else for(let p of d.trs())p.classList.remove("dragenter");f.dragged.classList.remove("dragging"),f.dragged=null},doReconstruction:function(a,l,p){let n=u.row(p,"pending");n.dataset.treename=a.name,n.dataset.nodename=l;let r=n.querySelector("th"),i=document.createElement("div");i.id="spinner",r.prepend(i);let h=u.tei(p);h.setAttribute("type","reconstructed"),h.setAttribute("corresp",a.name),h.setAttribute("select",`#${l}`);let g=[...d.tds(!1,n)],x=[...d.words(!1,h)];f.matrix.boxdiv.querySelector("tbody").appendChild(n),r.scrollIntoView();let A=new Worker("./worker.js"),I=s.normalizedView(),N=d.serializedtexts(a.nexml,I),V=new Map(N.map(G=>[G[0],G[1][0]]));A.postMessage({readings:V,levels:a.levels,num:0,id:l}),A.onmessage=function(G){let re=G.data.n,ge=G.data.result;if(g[re].textContent=ge,g[re].IAST=g[re].cloneNode(!0),g[re].classList.remove("pending"),x[re].textContent=ge,re<f.maxlemma){let ye=new Map(N.map(ve=>[ve[0],ve[1][re+1]]));A.postMessage({readings:ye,levels:a.levels,num:re+1,id:l})}else{r.removeChild(i),f.xml.documentElement.appendChild(h),me.updateAllHeaders(),a.draw();let ye=d.highlit();ye.size>0&&L.repopulateTrees(...d.lowhigh(ye));let ve=document.getElementById("menu").querySelector(".ms"),_e=document.createElement("li");_e.setAttribute("data-name",p),_e.appendChild(document.createTextNode(p)),ve.appendChild(_e),F.doStack([F.doDeleteRow,[p]],"do")}}},doDeleteRow:function(a,l="do"){let p=d.tr(a),n=d.tei(a),i=[...d.teis()].indexOf(n);p.parentNode.removeChild(p),n.parentNode.removeChild(n),me.updateAllHeaders(),U(),B(),F.doStack([F.doUndeleteRow,[p,n,i]],l)},doUndeleteRow:function(a,l,p,n="do"){let r=l.getAttribute("n"),i=[...d.teis()];if(p===i.length)f.xml.documentElement.appendChild(l),f.matrix.boxdiv.querySelector("tbody").appendChild(a);else{let h=[...d.trs()];f.xml.documentElement.insertBefore(l,i[p]),h[p].parentNode.insertBefore(a,h[p])}me.updateAllHeaders(),U(),B(),F.doStack([F.doDeleteRow,[r]],n)},doMoveRow:function(a,l,p="do"){let n=a.parentNode,r=[...d.trs()],i=a.previousElementSibling,h=r.indexOf(a),g=l!==null?r.indexOf(l):null,x=function(){l===null?n.insertBefore(a,n.firstChild):l.nextElementSibling?n.insertBefore(a,l.nextElementSibling):n.appendChild(a)},A=function(){let I=f.xml.documentElement,N=[...d.teis()],V=N[h];if(g===null)I.insertBefore(V,N[0]);else{let G=N[g];G.nextElementSibling?I.insertBefore(V,G.nextElementSibling):I.appendChild(V)}};if(x(),A(),p==="multido")return[F.doMoveRow,[a,i]];F.doStack([F.doMoveRow,[a,i]],p)},doMerge:function(a,l="do"){let p=function(h,g,x){let A=h();var I=[];for(let N of A){let V=[...x].map(ge=>g(ge,N)),G=V.map(ge=>ge.cloneNode(!0));I.push(G);for(let ge of V)F.unnormalize(ge);let re=V.reduce(function(ge,ye){if(ye.hasChildNodes())for(;ye.firstChild;)ge.appendChild(ye.firstChild);return ye.parentNode.removeChild(ye),ge});re.normalize(),re.dataset?(delete re.dataset.normal,re.IAST=re.cloneNode(!0)):re.removeAttribute("lemma")}return[h,g,I]},n=p(d.trs,d.firsttd,a),r=p(d.texts,d.firstword,a),i=parseInt([...a][0]);if(F.renumber(i),F.restyleGroups(a),F.refresh(),me.updateAllHeaders(),l==="multido")return[F.doUnmerge,[n,r]];F.doStack([F.doUnmerge,[n,r]],l)},doUnmerge:function(a,l,p="undo"){let n=function(g,x,A){let I=d.whichattr(A[0][0]),N=A[0].map(ge=>ge.getAttribute(I)),V=N[0],G=g();for(var re=0;re<G.length;re++){let ge=A[re].pop(),ye=x(V,G[re]);ye.parentNode.replaceChild(ge,ye);for(let ve of A[re])ge.parentNode.insertBefore(ve,ge)}return N};n(...a);let r=n(...l),h=[...r].sort((g,x)=>parseInt(g)-parseInt(x))[0];if(F.renumber(h),F.reIAST(r),F.refresh(),F.restyleGroups(r),me.updateAllHeaders(),p==="multido")return[F.doMerge,[r]];F.doStack([F.doMerge,[r]],p)},doGroupWords:function(){let a=0,l=[];for(let p=0;p<=f.maxlemma;p++){let n=d.tds(p),r=n[0].classList;if(r.contains("group-start")||r.contains("group-internal")||r.contains("group-end")){a=p+1;continue}let i=n.length,h=0;if(p===f.maxlemma)h=i;else for(let g of n)(g.IAST?g.IAST.textContent:g.textContent).slice(-1)===" "&&h++;if(h/i>=.5)if(a===p){a++;continue}else{let g=d.range(a,p);l.push([F.group.go,[g]]),a=p+1}}F.doMulti(l)},doEmend:function(a,l,p="do"){let n=[...d.trs()][l],r=d.firsttd(a,n);r.dataset.emended=!0;let i=d.tei(l).querySelector("text");if(d.firstword(a,i).setAttribute("emended","true"),p==="multido")return[F.doUnemend,[a,l]];F.doStack([F.doUnemend,[a,l]],p)},doUnemend:function(a,l,p="do"){let n=[...d.trs()][l],r=d.firsttd(a,n);delete r.dataset.emended;let i=d.tei(l).querySelector("text");if(d.firstword(a,i).removeAttribute("emended"),p==="multido")return[F.doEmend,[a,l]];F.doStack([F.doEmend,[a,l]],p)},doChangeCell:function(a,l,p,n="do"){let r=F.xmlChangeCell(a,l,p),i=F.htmlChangeCell(a,l,p);if(F.refresh(),me.updateAllHeaders(!0),ne.textClick({target:i}),n==="multido")return[F.doChangeCell,[a,l,r]];F.doStack([F.doChangeCell,[a,l,r]],n)},htmlChangeCell:function(a,l,p){let n=d.tr(l),r=d.firsttd(a,n);return F.unnormalize(r),r.textContent=p,r.IAST&&(r.IAST=r.cloneNode(!0)),r},xmlChangeCell:function(a,l,p){let n=d.tei(l).querySelector("text"),r=d.firstword(a,n);F.unnormalize(r);let i=r.textContent;return r.childNodes.length===0?r.appendChild(document.createTextNode(p)):r.textContent=p,i},doMarkAs:function(a,l,p="do"){let n=[...l.keys()],r=d.attr(a,n);for(let i of n){let h=d.tds(i),g=d.words(i);if(l.get(i)===!0){for(let A of h)A.dataset[a]="true";for(let A of g)A.setAttribute(a,"true")}else{for(let A of h)delete A.dataset[a];for(let A of g)A.removeAttribute(a)}let x=d.checkbox(i,a);x.checked=l.get(i)}if(p==="multido")return[F.doMarkAs,[a,r]];F.doStack([F.doMarkAs,[a,r]],p)},refresh:function(){for(let a of f.textboxes)a.refresh();L.rehighlight(),s.anyhighlit()?L.repopulateTrees(...d.lowhigh(d.highlit())):L.clearTrees()},renumber:function(a=0){let l=function(p,n,r){let i=p();for(let g of i){let x=[...n(!1,g)],A=d.whichattr(x[0]);for(var h=parseInt(r)+1;h<x.length;h++)x[h].setAttribute(A,h)}};l(d.trs,d.tds,a),l(()=>[!0],d.ths,a),l(d.texts,d.words,a),f.maxlemma=d.maxlemma()},reIAST:function(a){let l=[...a].map(p=>[...d.lemmata(p)]).flat();for(let p of l)p.IAST=p.cloneNode(!0)},restyleGroups:function(a,l=!1){let n=l?function(i){var h=[...i];let g=parseInt(a[0])-1,x=parseInt(a[a.length-1])+1;return h.unshift(g),h.push(x),h}(a):a,r=function(i,h=!1){let g=new Set(["group-start","group-internal","group-end"]);h&&g.delete(h);for(let x of i){for(let A of g)x.classList.remove(A);h&&x.classList.add(h)}};for(let i of n){let h=d.firstword(i),g=d.tds(i);if(g.length===0)continue;let x=h.closest("cl");x?h===x.firstElementChild?r(g,"group-start"):h===x.lastElementChild?r(g,"group-end"):r(g,"group-internal"):r(g)}},startRenormalize:function(a){let l=a===!1?d.highlit():a;F.doRenormalize(Math.min(...l),Math.max(...l))},doRenormalize:function(a,l,p=!1,n="do"){s.normalizedView()||me.showNormalized();let r=new Map,i=[...d.trs()],h=[...d.texts()],g=p?[p]:[...i.keys()];for(let x of g){let A=new Map,I=h[x],N=[...d.words(!1,I)],V=d.firstword(a,I),G=d.firstword(l,I),re=N.indexOf(V),ge=N.indexOf(G),ye=N.slice(re,ge+1),ve=i[x],Se=[...d.tds(!1,ve)].slice(re,ge+1),Ae=ye.map(Le=>Le.textContent),ke=w1(Ae);for(let Le=0;Le<ke.length;Le++){let Me=ye[Le],Ie=ke[Le],Ne=Ae[Le],qe=Se[Le],ze=Me.hasAttribute("lemma")?Me.getAttribute("lemma"):!1;if(ze!==!1){if(ze===Ie)continue;A.set(qe.dataset.n,ze),F.unnormalize(Me),F.unnormalize(qe)}else A.set(qe.dataset.n,null);Ie!==Ne&&(Me.setAttribute("lemma",Ie),qe.dataset.normal=Ie,qe.textContent=Ie)}r.set(x,A)}me.updateAllHeaders(!0),me.xScrollToHighlit(),F.doStack([F.doUnrenormalize,[r]],n)},doUnrenormalize:function(a,l="undo"){s.normalizedView()||me.showNormalized();let p=new Map,n=[...d.trs()],r=[...d.texts()];for(let[i,h]of a.entries()){let g=n[i],x=r[i],A=new Map;for(let[I,N]of h.entries()){let V=d.firsttd(I,g),G=d.firstword(I,x),re=G.hasAttribute("lemma")?G.getAttribute("lemma"):null;A.set(I,re),N===null?(F.unnormalize(V),F.unnormalize(G)):(V.dataset.normal=N,G.setAttribute("lemma",N),V.textContent=N)}p.set(i,A)}F.doStack([F.doUnrenormalize,[p]],l)},unnormalize:function(a){a.hasOwnProperty("IAST")&&(a.textContent=a.IAST.textContent),a.dataset&&a.dataset.hasOwnProperty("normal")&&delete a.dataset.normal,a.getAttribute("lemma")&&a.removeAttribute("lemma")}},me={toggleNormalize:function(){s.normalizedView()?me.showUnnormalized():me.showNormalized()},showNormalized:function(a){if(a)a.updatescript();else{document.getElementById("views").classList.add("normalized");for(let p of f.textboxes)p.updatescript();f.matrix.updatescript(),s.anyhighlit()?L.repopulateTrees(...d.lowhigh(d.highlit())):L.clearTrees()}me.updateAllHeaders(!0),me.xScrollToHighlit()},showUnnormalized:function(){document.getElementById("views").classList.remove("normalized"),f.matrix.updatescript();for(let a of f.textboxes)a.updatescript();s.anyhighlit()?L.repopulateTrees(...d.lowhigh(d.highlit())):L.clearTrees(),me.updateAllHeaders(!0),me.xScrollToHighlit()},toggleHeader:function(){let a=f.matrix.boxdiv.querySelector("tr.header");a.style.display==="none"?a.style.display="table-row":a.style.display="none"},updateHeaders(a){for(let l of a){let p=d.firstth(l),[n,r]=d.readings(l),i=p.querySelector("span.readings"),h=n<2?n:`${n}(${r.size})`;i.textContent=h}},updateAllHeaders(a=!1){let l=[...d.trs()],p=l.map(g=>d.trWalker(g)),n=[...d.tds(!1,l[0])],r=[...d.ths()],i=f.matrix.boxdiv.querySelector("tr.header"),h=function(){let g=document.createElement("th"),x=document.createElement("span");x.classList.add("readings"),g.appendChild(x);let A=document.createElement("form");return A.innerHTML='<div><input class="insignificant" type="checkbox">Insignificant</div><div><input class="binary" type="checkbox">Binary</div>',g.appendChild(A),i.appendChild(g),g};for(let g=0;g<n.length;g++){let x=g>=r.length?h():r[g],A=n[g];x.dataset.ref=A.dataset.n;let I=0,N=new Set;for(let G of p){let re=G.nextNode().textContent;re!==""&&(I++,N.add(re))}let V=I<2?I:`${I}(${N.size})`;x.querySelector("span.readings").textContent=V,a||(x.querySelector("input.insignificant").checked=!!A.dataset.insignificant,x.querySelector("input.binary").checked=!!A.dataset.binary)}if(r.length>n.length)for(let g=n.length;g<r.length;g++)i.removeChild(r[g])},xScrollToHighlit:function(){let a=d.highlit();a.size>0&&me.xScroll([...a][0])},xScroll:function(a,l){if(!a)return;let p=l||d.firsttr(),n=d.firsttd(a,p),r=n.getBoundingClientRect(),i=f.matrix.boxdiv,g=i.getBoundingClientRect().right,x=p.querySelector("th").getBoundingClientRect(),A=x.right,I=r.right>g,N=r.left+.1<A;I&&n.scrollIntoView({inline:"end",block:"nearest"}),N&&(n.scrollIntoView({inline:"start",block:"nearest"}),i.scroll({left:i.scrollLeft-x.width}))}},de={create:function(a){let l=document.createElement("div");return l.classList.add("contextmenu"),l.style.left=a.clientX-12+"px",l.style.top=a.clientY-22+"px",l},remove:function(){for(let a of document.querySelectorAll(".contextmenu"))a.parentNode.removeChild(a)},show:function(a){document.body.appendChild(a)},populate:function(a,l){let p=document.createElement("ul");for(let n of l){let r=document.createElement("li");if(n.hasOwnProperty("cond")){let i=document.createRange().createContextualFragment('<form><input type="checkbox"'+(n.cond()?" checked":"")+"></form>");r.appendChild(i)}if(n.hasOwnProperty("toggle")){let i=n.toggle()?n.text:n.alt;r.appendChild(document.createTextNode(i))}else r.appendChild(document.createTextNode(n.text));r.addEventListener("mouseup",n.func),p.appendChild(r)}a.appendChild(p)}};class be{constructor(l){this.name=l,this.box=document.createElement("div"),this.box.classList.add("menubox");let p=document.createElement("div");p.classList.add("heading"),p.appendChild(document.createTextNode(l)),this.box.appendChild(p),p.addEventListener("mouseover",this.checkConditions.bind(this)),this.box.addEventListener("mouseup",this.click.bind(this)),this.items=new Map,this.conditions=new Map}populate(l){let p=this.box.querySelector("ul")||function(n){let r=document.createElement("ul");return n.box.appendChild(r),r}(this);for(let n of l){let r=document.createElement("li");if(n.hasOwnProperty("checkbox")){let i=document.createElement("form"),h=document.createElement("input");h.type="checkbox",h.addEventListener("click",g=>g.preventDefault()),i.appendChild(h),r.appendChild(i),r.appendChild(document.createTextNode(n.text)),this.conditions.set(h,n.checkbox)}else if(n.hasOwnProperty("toggle")){let i=document.createElement("span");i.appendChild(document.createTextNode(n.text)),i.dataset.text=n.text,i.dataset.alt=n.alt,this.conditions.set(i,n.toggle),r.appendChild(i)}else r.appendChild(document.createTextNode(n.text));n.hasOwnProperty("greyout")&&this.conditions.set(r,n.greyout),this.items.set(r,n.func),p.appendChild(r)}}click(l){let p=l.target.tagName==="LI"?l.target:l.target.closest("li");if(p&&!p.classList.contains("greyedout")){let n=this.items.get(p);n&&(n(l),this.checkConditions())}}checkConditions(){let l=new Map;for(let[p,n]of this.conditions){let r=l.get(n)||function(){let i=n();return l.set(n,i),i}();p.tagName==="INPUT"?p.checked=r:p.tagName==="SPAN"?r?p.textContent=p.dataset.alt:p.textContent=p.dataset.text:p.tagName==="LI"&&(r?p.classList.remove("greyedout"):p.classList.add("greyedout"))}}}class X{constructor(l){this.name=l,this.script=0}show(){f.descs.appendChild(this.descbox),s.normalizedView()&&me.showNormalized(this),f.viewdiv.appendChild(this.boxdiv),this.closed=!1}clear(){for(;this.boxdiv.firstChild;)this.boxdiv.removeChild(this.boxdiv.firstChild);this.svgcontainer&&(this.clearsvg(),this.boxdiv.appendChild(this.svgcontainer))}destroy(){f.viewdiv.removeChild(this.boxdiv),f.descs.removeChild(this.descbox);let l=f.trees.indexOf(this);l>-1&&f.trees.splice(l,1);let p=f.textboxes.indexOf(this);p>-1&&f.textboxes.splice(p,1),this.closed=!0,this.name==="Matrix"&&(document.getElementById("matrixmenu").style.display="block"),B(),L.rehighlight()}pullout(){this.destroy();let l="menubar=no,location=no,status=no,height=620,width=620,scrollbars=yes,centerscreen=yes",p=window.mainWindow?window.mainWindow.comboView.getWindows().length:f.windows.length,n=window.open("branch.html","branch"+p,l);n.mainWindow=window.mainWindow?window.mainWindow:window,n.startbox=this.text?{text:{name:this.name}}:{tree:this.name},n.mainWindow.comboView.addWindow(n)}makeDescBox(){let l=document.createElement("div"),p=document.createElement("div");p.classList.add("closer"),p.innerHTML="x",p.title="close";let n=document.createElement("div");n.classList.add("scripter"),n.innerHTML="A",n.title="change script",l.appendChild(p),l.appendChild(n),l.appendChild(document.createTextNode(this.desc)),this.descbox=l,p.addEventListener("click",this.destroy.bind(this)),n.addEventListener("click",this.cyclescript.bind(this))}cyclescript(){this.script=this.script+1,this.script===f.scripts.length&&(this.script=0);let l=this.descbox.querySelector(".scripter");this.script===0?l.innerHTML="A":l.innerHTML=to[f.scripts[this.script]]("a"),f.scripts[this.script]==="grantha"?l.classList.add("grantha"):l.classList.remove("grantha"),this.updatescript()}updatescript(){let l=this.boxdiv.querySelectorAll(".lemma,.tree-lemma");for(let p of l){let n=p.dataset.hasOwnProperty("normal");if(!n&&p.textContent.trim()==="")continue;let r=function(){if(s.normalizedView()&&n){let h=document.createElement("span");return h.appendChild(document.createTextNode(p.dataset.normal)),h}else return p.IAST.cloneNode(!0)}(),i=this.script===0?r:Ot(r,f.scripts[this.script]);for(p.innerHTML="";i.firstChild;)p.appendChild(i.firstChild)}f.scripts[this.script]==="grantha"?this.boxdiv.classList.add("grantha"):this.boxdiv.classList.remove("grantha"),this.boxdiv.classList.contains("matrix")&&me.xScrollToHighlit()}}class xe extends X{constructor(l,p){super(`#${l} #${p}`);this.stemmaid=l,this.id=p,this.nexml=f.treelist.get(this.name).cloneNode(!0),this.desc=this.nexml.querySelector("tree").getAttribute("label")}init(){this.makeDescBox();let l=document.createElement("div");l.classList.add("tree-box");var p,n=0;do p="tree"+n,n++;while(document.getElementById(p));l.id=p,this.boxdiv=l,this.boxdiv.addEventListener("mouseover",ne.treeMouseover.bind(this)),this.boxdiv.addEventListener("click",ne.treeClick),this.svgcontainer=document.createElement("div"),this.svgcontainer.id=this.boxdiv.id+"container",this.boxdiv.appendChild(this.svgcontainer),this.boxdiv.myTree=this,this.calcPaths(),this.jiggleroot(),this.findLevels(),this.labelInternal()}show(){f.descs.appendChild(this.descbox),f.viewdiv.appendChild(this.boxdiv)}jiggleroot(){let l=this.nexml.evaluate('//nex:node[@root="true"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,p=this.nexml.evaluate('//nex:edge[@source="'+l.id+'"]|//nex:edge[@target="'+l.id+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);if(p.snapshotLength===3){var n,r;for(let i=0;i<p.snapshotLength;i++){let h=p.snapshotItem(i),g=h.getAttribute("source"),x=h.getAttribute("target"),A=this.nexml.evaluate('//nex:node[@id="'+g+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,I=this.nexml.evaluate('//nex:node[@id="'+x+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!A.hasAttribute("otu")&&!I.hasAttribute("otu")){n=h,r=x===l.id?"target":"source";break}}if(n){let i=this.nexml.createElementNS(l.namespaceURI,"node");i.id="fakeroot",i.setAttribute("root","true"),l.removeAttribute("root"),l.parentElement.insertBefore(i,l);let h=this.nexml.createElementNS(l.namespaceURI,"edge");h.id="newrootedge",h.setAttribute("length","0"),h.setAttribute("source","fakeroot"),h.setAttribute("target",l.id),l.parentElement.insertBefore(h,n),n.setAttribute(r,i.id)}}}findLevels(){let l=this.nexml.querySelectorAll("edge"),p=[...this.nexml.querySelectorAll("node[otu]")],n=this.nexml,r=[p],i=function(x,A){let I=x.map(ve=>ve.id),N=new Map,V=new Map,G=[];for(let ve of A){let _e=ve.getAttribute("target"),Se=ve.getAttribute("source"),Ae=(()=>I.indexOf(_e)!==-1?{ancestor:n.getElementById(Se),child:n.getElementById(_e)}:I.indexOf(Se)!==-1?{ancestor:n.getElementById(_e),child:n.getElementById(Se)}:null)();if(Ae!==null)if(V.has(Ae.ancestor)){let ke=V.get(Ae.ancestor);N.set(Ae.ancestor,[ke.child,Ae.child]),G.push(ve),G.push(ke.edge)}else V.set(Ae.ancestor,{child:Ae.child,edge:ve})}let re=[...N.keys()],ge=[...V.keys()].reduce((ve,_e)=>(re.indexOf(_e)===-1&&ve.push(V.get(_e).child),ve),[]),ye=[...A].reduce((ve,_e)=>(G.indexOf(_e)===-1&&ve.push(_e),ve),[]);return{match:N,remainder:[...new Set(ge)],edges:ye}};var h=p,g=l;do{let x=i(h,g);r.push(x.match),h=[...x.match.keys(),...x.remainder],g=x.edges}while(g.length>0);this.levels=d.serializedlevels(r)}labelInternal(){for(let l of this.nexml.querySelectorAll("node:not([label])"))l.setAttribute("label",l.id)}fitch(){let l=new Map(this.levels[0].map(n=>{let r=s.normalizedView(),i=this.nexml.querySelector(`node[id="${n}"]`).getAttribute("label"),h=this.boxdiv.querySelector(`span.tree-lemma[data-id="${i}"]`),g=h?d.htmlreading(h,r):void 0;return[n,g]})),p=new N1(l,this.levels).run();for(let[n,r]of p){let i=this.boxdiv.querySelector(`span.internal[data-key="${n}"]`);i.dataset.reconstructed=r}}clearsvg(){for(;this.svgcontainer.firstChild;)this.svgcontainer.removeChild(this.svgcontainer.firstChild)}removecolors(){let l=this.nexml.querySelectorAll("node[color]");for(let p=0;p<l.snapshotLength;p++)l.snapshotItem(p).removeAttribute("color")}drawlines(l,p){if(this.removecolors(),l){let g=this.getPath(...l.split(";")).path,x=new Set;for(let A of g)x.add(A.getAttribute("target")),x.add(A.getAttribute("source"));for(let A of x){let I=this.nexml.evaluate('//nex:node[@id="'+A+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;I.getAttribute("root")||I.setAttribute("color",p)}}let n=parseInt(window.getComputedStyle(this.svgcontainer,null).width)-15,r=parseInt(window.getComputedStyle(this.boxdiv,null).height)-10,i=function(){return r<600?600:r}();z.PhyloCanvas.Render.Style.line.stroke="rgb(162,164,170)",this.phylocanvas=new z.PhyloCanvas({nexml:this.nexml,fileSource:!0},this.svgcontainer.id,n,i);let h=this.svgcontainer.querySelectorAll('path:not([stroke="#a2a4aa"])');for(let g of h)g.style.strokeWidth="2"}draw(){this.clear(),this.drawlines(),this.makeLabels()}clearLabels(){for(let l of this.boxdiv.firstChild.querySelectorAll("text"))l.parentElement.removeChild(l)}makeLabels(){let l=[...d.texts()],p=new Set(l.map(r=>r.parentNode.getAttribute("n"))),n=new Map(l.filter(r=>r.parentNode.hasAttribute("corresp")&&r.parentNode.getAttribute("corresp")===this.name).map(r=>[r.parentNode.getAttribute("select").replace(/^#/,""),r.parentNode.getAttribute("n")]));for(let r of this.boxdiv.firstChild.querySelectorAll("text")){let i=document.createElement("div");i.setAttribute("class","tree-div");let h=parseInt(r.getAttribute("x")-5),g=parseInt(r.getAttribute("y"))-15;i.style.left=h+"px",i.style.top=g+"px";let x=r.textContent.trim();p.has(x)?i.innerHTML=`<span class="witness inactive" data-key="${x}">${x}</span><span class="tree-lemma ${x}" data-id="${x}"></span>`:x!=="fakeroot"?n.has(x)?i.innerHTML=`<span class="internal reconstructed" data-key="${x}" data-label="${n.get(x)}">${n.get(x)}</span><span class="tree-lemma invisible ${x}" data-id="${x}" data-label="${n.get(x)}"></span>`:i.innerHTML=`<span class="internal" data-key="${x}">0</span>`:i.innerHTML=`<span class="internal" data-key="${x}"></span>`,r.parentElement.removeChild(r),this.boxdiv.appendChild(i)}}clearlemmata(){for(let l of this.boxdiv.querySelectorAll("span.tree-lemma"))l.innerHTML="",l.dataset.hasOwnProperty("normal")&&delete l.dataset.normal,l.IAST=l.cloneNode(!0)}populate(l,p){let n=d.texts();for(let h of n){let g=h.parentNode.getAttribute("n"),x=this.boxdiv.querySelector(`span.tree-lemma[data-id="${g}"]`)||this.boxdiv.querySelector(`span.tree-lemma[data-label="${g}"]`);if(!!x){if(x.hasOwnProperty("IAST")||(x.IAST=x.cloneNode(!0)),x.IAST.innerHTML="",p){let A=[],I=[];var r=!1;for(let N=l;N<=p;N++){let V=d.firstword(N,h);A.push(V.innerHTML),V.hasAttribute("lemma")&&(I[N-l]=V.getAttribute("lemma")),V.hasAttribute("emended")&&(r=!0)}if(x.IAST.appendChild(T.transformString(A.join(" ").replace(/\s+/g," ").trim(),T.sheets.tree)),I.length!==0){let N=A.slice(0).map((G,re)=>I.hasOwnProperty(re)?I[re]:G),V=document.createElement("span");V.appendChild(T.transformString(N.join(" ").replace(/\s+/g," ").trim(),T.sheets.tree)),x.dataset.normal=V.innerHTML}r?x.dataset.emended=!0:x.dataset.hasOwnProperty("emended")&&delete x.dataset.emended}else{let A=d.firstword(l,h);x.IAST.appendChild(T.transformString(A.innerHTML,T.sheets.tree)),A.hasAttribute("lemma")?x.dataset.normal=A.getAttribute("lemma"):delete x.dataset.normal,A.hasAttribute("emended")?x.dataset.emended=!0:x.dataset.hasOwnProperty("emended")&&delete x.dataset.emended}s.normalizedView()&&x.dataset.hasOwnProperty("normal")?x.innerHTML=x.dataset.normal:x.innerHTML=x.IAST.innerHTML}}let i=this.boxdiv.querySelectorAll(".inactive");for(let h of i)h.classList.remove("inactive");this.fitch()}calcPaths(){this.nodes=[],this.paths=[],this.longest={path:[]},this.nsResolver=this.nexml.createNSResolver(this.nexml.ownerDocument==null?this.nexml.documentElement:this.nexml.ownerDocument.documentElement);let l=this.nexml.evaluate("//nex:node[@label]",this.nexml,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);for(let p=0;p<l.snapshotLength;p++)this.nodes.push(l.snapshotItem(p));for(let p=0;p<this.nodes.length;p++){let n=this.nodes[p],r=n.getAttribute("label"),i=n.id;for(let h=p+1;h<this.nodes.length;h++){let g=this.nodes[h],x=g.getAttribute("label"),A=g.id;this.paths.push({nodes:[r,x],path:this.pathFind(i,A)})}}for(let p of Object.keys(this.paths))this.paths[p].path.length>this.longest.path.length&&(this.longest=this.paths[p])}pathFind(l,p,n){n||(n=[]);let r=this.nexml.evaluate('//nex:edge[@source="'+l+'"]|//nex:edge[@target="'+l+'"]',this.nexml,this.nsResolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);var i;for(let h=0;h<r.snapshotLength;h++){let g=r.snapshotItem(h);if(i=[g],n.indexOf(g.id)!=-1)continue;n.push(g.id);let x=g.getAttribute("source")!==l?g.getAttribute("source"):g.getAttribute("target");if(x===p)return i;if(!this.nexml.evaluate('//nex:node[@id="'+x+'"]',this.nexml,this.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.hasAttribute("otu")){let I=this.pathFind(x,p,n);if(I)return i.concat(I);continue}}return!1}analyzeVariants(l,p){let n=[],r=[],i=function(I){return I.startsWith("<lg")?T.transformString(I,T.sheets.lg).firstChild.data.slice(1):I},h=function(I){return I.map(N=>i(N)).join(" ").replace(/\s+/g," ").trim()},g=s.normalizedView()?function(I,N){let V=d.firstword(I,N);return V.hasAttribute("lemma")?V.getAttribute("lemma"):V.textContent}:function(I,N){return d.firstword(I,N).textContent};for(let I of d.texts()){let N=I.parentNode.getAttribute("n");if(!this.nexml.querySelector(`otu[label="${N}"]`))continue;let V=p?h(d.range(l,p).map(G=>g(G,I))):i(g(l,I));V===""?n.hasOwnProperty("")?n[""].push(N):n[""]=[N]:n.hasOwnProperty(V)?n[V].push(N):n[V]=[N]}let x={};for(let I of Object.keys(n)){var A={length:0,branch_length:0,paths:[]};if(n[I].length===1)A=!1;else for(let N=0;N<n[I].length;N++)for(let V=N+1;V<n[I].length;V++){let G=this.getPath(n[I][N],n[I][V]);if(G.hasOwnProperty("path")||alert(G),G.path.length===A.length){let re=this.calcBranchLength(G.path);re===A.branch_length?A.paths.push(G):re>A.branch_length&&(A={length:G.path.length,branch_length:re,paths:[G]})}else G.path.length>A.length&&(A={length:G.path.length,branch_length:this.calcBranchLength(G.path),paths:[G]})}x[I]=A}for(let I of Object.keys(r))x[I]=r[I];return x}getPath(l,p){for(let n of this.paths)if(n.nodes.indexOf(l)>-1&&n.nodes.indexOf(p)>-1)return n;return!1}calcBranchLength(l){return l.map(p=>p.getAttribute("length")).reduce((p,n)=>parseFloat(p)+parseFloat(n))}pickColour(l,p,n,r){var i=p,h=n,g=l;r&&(g=g*2,g>=1&&(g-=1,i=n,h=r));let x=h.red-i.red,A=h.green-i.green,I=h.blue-i.blue,N={red:parseInt(Math.floor(i.red+x*g),10),green:parseInt(Math.floor(i.green+A*g),10),blue:parseInt(Math.floor(i.blue+I*g),10)};return"rgb("+N.red+","+N.green+","+N.blue+")"}colourizeVariants(l,p){let n=this.analyzeVariants(l,p);for(let r of this.boxdiv.querySelectorAll("span.tree-lemma")){let i=n.hasOwnProperty(r.dataset.id)?n[n[r.dataset.id]]:n[r.textContent],h={red:252,green:70,blue:107},g={red:63,green:94,blue:251};i?(r.style.color=this.pickColour(i.length/this.longest.path.length,g,h),r.dataset.length=i.length,r.dataset.branch_length=i.branch_length,r.dataset.nodes=i.paths[0].nodes.join(";")):(r.style.color=this.pickColour(1/this.longest.path.length,g,h),r.dataset.length=0,r.dataset.branch_length=0,r.dataset.nodes=""),r.textContent.trim()===""?(r.innerHTML='<span lang="en">   </span>',r.style.backgroundColor=r.style.color):r.style.backgroundColor=""}}}class Ce extends X{constructor(l){super(l);this.desc=l,this.text=d.firsttext(l)}init(){this.makeTextBox(),this.makeDescBox(),this.descbox.style.maxWidth="595px",this.descbox.style.paddingLeft="5px",this.boxdiv.addEventListener("mouseup",ne.textMouseup)}refresh(){this.boxdiv.innerHTML="",this.boxdiv.appendChild(T.sheets.lemma.transformToFragment(this.text,document)),D(this.boxdiv);for(let l of d.lemmata(!1,this.boxdiv))l.IAST=l.cloneNode(!0);this.updatescript()}makeTextBox(){let l=document.createElement("div");l.dataset.id=this.name,l.classList.add("text-box"),l.appendChild(T.sheets.lemma.transformToFragment(this.text,document)),D(l);for(let p of d.lemmata(!1,l))p.IAST=p.cloneNode(!0);this.boxdiv=l}}class ee extends X{constructor(){super(name);this.desc="Matrix",this.name="Matrix",this.makeDescBox(),this.makeViewBox(),this.descbox.style.maxWidth="100vw",this.descbox.style.paddingLeft="5px"}init(){this.makeTable()}makeViewBox(){let l=document.createElement("div");l.classList.add("matrix"),l.dataset.id=this.name,this.boxdiv=l}makeTable(){let l=document.createElement("div");l.classList.add("scroller"),l.append(T.sheets.matrix.transformToFragment(f.xml,document)),l.addEventListener("dragstart",ne.thDragStart),l.addEventListener("dragenter",ne.trDragEnter),l.addEventListener("dragleave",ne.trDragLeave),l.addEventListener("dragover",x=>x.preventDefault()),l.addEventListener("drop",ne.trDragDrop),l.addEventListener("mousedown",ne.matrixMousedown);let p=document.createElement("tr");p.classList.add("header");let n=document.createElement("td");n.classList.add("anchor"),p.appendChild(n);let r=[...d.trs(l)],i=r.map(x=>d.trWalker(x)),h=d.tds(!1,r[0]);for(let x of h){let A=document.createElement("th");A.dataset.ref=x.dataset.n;let I=0,N=new Set;for(let ge of i){let ye=ge.nextNode();ye.IAST=ye.cloneNode(!0);let ve=ye.textContent;ve!==""&&(I++,N.add(ve))}let V=I<2?I:`${I}(${N.size})`,G=document.createElement("span");G.classList.add("readings"),G.appendChild(document.createTextNode(V)),A.appendChild(G);let re=document.createElement("form");re.innerHTML='<div><input class="insignificant" title="insignificant" type="checkbox"'+(x.dataset.insignificant?"checked":"")+'></div><div><input class="binary" title="binary" type="checkbox"'+(x.dataset.binary?"checked":"")+"></div>",A.appendChild(re),p.appendChild(A)}let g=l.querySelector("tbody");g.insertBefore(p,g.firstChild),this.boxdiv.append(l)}}return{branchinit:function(){comboView.init(),window.startbox!==void 0&&(window.startbox.tree?b.tree(window.startbox.tree.stemmaid,window.startbox.tree.id):window.startbox.text&&b.text(window.startbox.text.name,window.startbox.text.map))},maininit:function(){let a=document.getElementById("menu");a.addEventListener("mouseover",ne.menuMouseover),a.addEventListener("mouseout",ne.menuMouseout),a.addEventListener("click",ne.menuClick),a.querySelector("#file").addEventListener("change",W.bind(null,Y),!1),a.querySelector("#treefile").addEventListener("change",W.bind(null,$),!1),a.style.display="block",comboView.init()},init:function(){f.viewdiv=document.getElementById("views"),f.descs=document.getElementById("descs"),f.viewdiv.addEventListener("click",ne.textClick),document.addEventListener("keydown",ne.keyDown,{capture:!0}),document.addEventListener("contextmenu",ne.rightClick),document.addEventListener("mouseup",de.remove)},getWindows:function(){return f.windows},addWindow:function(a){f.windows.push(a)},getViewdiv:function(){return f.viewdiv},getTrees:function(){return f.trees}}}();window.addEventListener("load",window.comboView.maininit);
//# sourceMappingURL=script.js.map
